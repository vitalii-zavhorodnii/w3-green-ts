{"version":3,"file":"umd/viewer.min.js","mappings":"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","sources":["webpack://mdx-m3-viewer-th/./node_modules/events/events.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/defs.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/fengaricore.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/lapi.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/lauxlib.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/lcode.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/ldebug.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/ldo.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/ldump.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/lfunc.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/ljstype.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/llex.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/llimits.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/lobject.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/lopcodes.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/lparser.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/lstate.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/lstring.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/ltable.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/ltm.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/lua.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/luaconf.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/lundump.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/lvm.js","webpack://mdx-m3-viewer-th/./node_modules/fengari/src/lzio.js","webpack://mdx-m3-viewer-th/webpack/bootstrap","webpack://mdx-m3-viewer-th/webpack/runtime/define property getters","webpack://mdx-m3-viewer-th/webpack/runtime/hasOwnProperty shorthand","webpack://mdx-m3-viewer-th/webpack/runtime/make namespace object","webpack://mdx-m3-viewer-th/./src/version.ts","webpack://mdx-m3-viewer-th/./node_modules/gl-matrix/esm/common.js","webpack://mdx-m3-viewer-th/./node_modules/gl-matrix/esm/mat2.js","webpack://mdx-m3-viewer-th/./node_modules/gl-matrix/esm/mat2d.js","webpack://mdx-m3-viewer-th/./node_modules/gl-matrix/esm/mat3.js","webpack://mdx-m3-viewer-th/./node_modules/gl-matrix/esm/mat4.js","webpack://mdx-m3-viewer-th/./node_modules/gl-matrix/esm/vec3.js","webpack://mdx-m3-viewer-th/./node_modules/gl-matrix/esm/vec4.js","webpack://mdx-m3-viewer-th/./node_modules/gl-matrix/esm/quat.js","webpack://mdx-m3-viewer-th/./node_modules/gl-matrix/esm/quat2.js","webpack://mdx-m3-viewer-th/./node_modules/gl-matrix/esm/vec2.js","webpack://mdx-m3-viewer-th/./src/common/gl-matrix-addon.ts","webpack://mdx-m3-viewer-th/./src/common/math.ts","webpack://mdx-m3-viewer-th/./src/common/canvas.ts","webpack://mdx-m3-viewer-th/./src/common/utf8.ts","webpack://mdx-m3-viewer-th/./src/common/bytesof.ts","webpack://mdx-m3-viewer-th/./src/common/searches.ts","webpack://mdx-m3-viewer-th/./src/common/typecast.ts","webpack://mdx-m3-viewer-th/./src/common/binarystream.ts","webpack://mdx-m3-viewer-th/./src/common/bitstream.ts","webpack://mdx-m3-viewer-th/./src/common/path.ts","webpack://mdx-m3-viewer-th/./src/common/isformat.ts","webpack://mdx-m3-viewer-th/./src/common/index.ts","webpack://mdx-m3-viewer-th/./src/common/urlwithparams.ts","webpack://mdx-m3-viewer-th/./src/parsers/ini/file.ts","webpack://mdx-m3-viewer-th/./src/parsers/ini/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/slk/file.ts","webpack://mdx-m3-viewer-th/./src/parsers/slk/index.ts","webpack://mdx-m3-viewer-th/./src/common/stringreverse.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/reference.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/md34.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/boundingsphere.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/boundingshape.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/animationreference.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/sd.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/unsupportedentry.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/indexentry.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/modelheader.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/sequence.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/stc.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/stg.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/sts.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/bone.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/division.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/region.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/batch.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/materialreference.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/standardmaterial.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/layer.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/event.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/attachmentpoint.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/camera.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/model.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/isformat.ts","webpack://mdx-m3-viewer-th/./src/parsers/m3/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/tokenstream.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/extent.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/sequence.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/animations.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/animationmap.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/animatedobject.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/layer.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/material.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/texture.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/textureanimation.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/geoset.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/geosetanimation.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/genericobject.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/bone.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/light.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/helper.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/attachment.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/particleemitter.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/particleemitter2.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/particleemitterpopcorn.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/ribbonemitter.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/camera.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/eventobject.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/collisionshape.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/faceeffect.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/unknownchunk.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/isformat.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/model.ts","webpack://mdx-m3-viewer-th/./src/parsers/mdlx/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/mpq/block.ts","webpack://mdx-m3-viewer-th/./src/parsers/mpq/constants.ts","webpack://mdx-m3-viewer-th/./src/parsers/mpq/blocktable.ts","webpack://mdx-m3-viewer-th/./src/parsers/mpq/crypto.ts","webpack://mdx-m3-viewer-th/./node_modules/pako/dist/pako.esm.mjs","webpack://mdx-m3-viewer-th/./src/parsers/mpq/explode.ts","webpack://mdx-m3-viewer-th/./src/parsers/mpq/isarchive.ts","webpack://mdx-m3-viewer-th/./src/parsers/mpq/file.ts","webpack://mdx-m3-viewer-th/./src/parsers/mpq/hash.ts","webpack://mdx-m3-viewer-th/./src/parsers/mpq/hashtable.ts","webpack://mdx-m3-viewer-th/./src/parsers/mpq/archive.ts","webpack://mdx-m3-viewer-th/./src/parsers/mpq/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/imp/import.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/imp/file.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3u/modification.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3u/modifiedobject.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3u/modificationtable.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3d/file.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3u/file.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/wct/customtexttrigger.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/wct/file.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/wtg/triggercategory.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/wtg/variable.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/wtg/subparameters.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/wtg/parameter.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/wtg/eca.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/wtg/trigger.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/wtg/file.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/wts/file.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3i/force.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3i/player.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3i/randomitem.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3i/randomitemset.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3i/randomitemtable.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3i/randomunit.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3i/randomunittable.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3i/techavailabilitychange.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3i/upgradeavailabilitychange.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3i/file.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/map.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/doo/randomitem.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/doo/randomitemset.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/doo/doodad.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/doo/terraindoodad.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/doo/file.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/doo/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/imp/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/mmp/minimapicon.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/mmp/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/mmp/file.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/shd/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/shd/file.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3c/camera.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3c/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3c/file.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3d/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3e/corner.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3e/file.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3e/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3i/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3o/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3o/file.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3r/region.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3r/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3r/file.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3s/sound.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3s/file.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3s/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3u/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/wct/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/wpm/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/wpm/file.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/tokenstream.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/wtg/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/wtg/triggerdata.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/wts/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/unitsdoo/droppeditem.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/unitsdoo/droppeditemset.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/unitsdoo/inventoryitem.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/unitsdoo/modifiedability.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/unitsdoo/randomunit.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/unitsdoo/unit.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/unitsdoo/file.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/unitsdoo/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3f/maptitle.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3f/maporder.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3f/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/w3f/file.ts","webpack://mdx-m3-viewer-th/./src/parsers/w3x/index.ts","webpack://mdx-m3-viewer-th/./src/common/convertbitrange.ts","webpack://mdx-m3-viewer-th/./src/parsers/blp/jpg.js","webpack://mdx-m3-viewer-th/./src/parsers/blp/image.ts","webpack://mdx-m3-viewer-th/./src/parsers/blp/index.ts","webpack://mdx-m3-viewer-th/./src/common/dxt.ts","webpack://mdx-m3-viewer-th/./src/parsers/dds/image.ts","webpack://mdx-m3-viewer-th/./src/parsers/dds/isformat.ts","webpack://mdx-m3-viewer-th/./src/parsers/dds/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/tga/image.ts","webpack://mdx-m3-viewer-th/./node_modules/tga-js/dist/esm/tga.js","webpack://mdx-m3-viewer-th/./src/parsers/tga/isformat.ts","webpack://mdx-m3-viewer-th/./src/parsers/tga/index.ts","webpack://mdx-m3-viewer-th/./src/parsers/index.ts","webpack://mdx-m3-viewer-th/./src/common/fetchdatatype.ts","webpack://mdx-m3-viewer-th/./src/viewer/gl/clientbuffer.ts","webpack://mdx-m3-viewer-th/./src/viewer/gl/clientdatatexture.ts","webpack://mdx-m3-viewer-th/./src/viewer/gl/datatexture.ts","webpack://mdx-m3-viewer-th/./src/viewer/gl/shader.ts","webpack://mdx-m3-viewer-th/./src/viewer/gl/gl.ts","webpack://mdx-m3-viewer-th/./src/viewer/camera.ts","webpack://mdx-m3-viewer-th/./src/viewer/cell.ts","webpack://mdx-m3-viewer-th/./src/viewer/grid.ts","webpack://mdx-m3-viewer-th/./src/viewer/emittedobjectupdater.ts","webpack://mdx-m3-viewer-th/./src/viewer/scene.ts","webpack://mdx-m3-viewer-th/./src/viewer/resource.ts","webpack://mdx-m3-viewer-th/./src/viewer/genericresource.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlerresource.ts","webpack://mdx-m3-viewer-th/./src/viewer/texture.ts","webpack://mdx-m3-viewer-th/./src/viewer/imagetexture.ts","webpack://mdx-m3-viewer-th/./src/viewer/viewer.ts","webpack://mdx-m3-viewer-th/./src/viewer/node.ts","webpack://mdx-m3-viewer-th/./src/viewer/bounds.ts","webpack://mdx-m3-viewer-th/./src/viewer/model.ts","webpack://mdx-m3-viewer-th/./src/viewer/modelinstance.ts","webpack://mdx-m3-viewer-th/./src/viewer/gl/index.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/blp/handler.ts","webpack://mdx-m3-viewer-th/./src/parsers/blp/isformat.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/blp/texture.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/dds/handler.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/dds/texture.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/m3/texture.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/m3/layer.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/m3/standardmaterial.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/m3/bone.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/m3/sequence.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/m3/sts.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/m3/sd.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/m3/stc.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/m3/stg.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/m3/attachment.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/m3/camera.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/m3/region.ts","webpack://mdx-m3-viewer-th/./src/viewer/skeletalnode.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/m3/node.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/m3/skeleton.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/m3/modelinstance.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/m3/batch.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/shaders/bonetexture.glsl.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/m3/shaders/standard.vert.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/shaders/precision.glsl.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/m3/shaders/standard.frag.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/m3/handler.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/m3/model.ts","webpack://mdx-m3-viewer-th/./src/common/audio.ts","webpack://mdx-m3-viewer-th/./src/utils/mappeddata.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/sequence.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/sd.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/animatedobject.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/textureanimation.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/filtermode.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/layer.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/material.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/geosetanimation.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/replaceableids.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/genericobject.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/bone.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/light.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/helper.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/attachment.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/particleemitterobject.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/geometryemitterfuncs.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/texture.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/particleemitter2object.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/ribbonemitterobject.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/camera.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/eventobjectemitterobject.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/collisionshape.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/batch.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/geoset.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/batchgroup.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/emittergroup.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/setupgroups.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/node.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/attachmentinstance.ts","webpack://mdx-m3-viewer-th/./src/viewer/emitter.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/emitter.ts","webpack://mdx-m3-viewer-th/./src/viewer/emittedobject.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/particle.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/particleemitter.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/particle2.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/particleemitter2.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/ribbon.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/ribbonemitter.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/eventobjectemitter.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/eventobjectspn.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/eventobjectspnemitter.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/eventobjectsplubr.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/eventobjectsplemitter.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/eventobjectubremitter.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/eventobjectsnd.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/eventobjectsndemitter.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/modelinstance.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/shaders/transforms.glsl.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/shaders/sd.vert.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/shaders/sd.frag.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/shaders/hd.vert.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/shaders/hd.frag.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/shaders/particles.frag.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/handler.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/shaders/particles.vert.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/model.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/mdx/setupgeosets.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/tga/handler.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/tga/texture.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/w3x/shaders/ground.frag.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/w3x/shaders/water.frag.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/w3x/shaders/cliffs.frag.ts","webpack://mdx-m3-viewer-th/./src/common/arrayunique.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/w3x/variations.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/w3x/terrainmodel.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/w3x/standsequence.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/w3x/widget.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/w3x/unit.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/w3x/doodad.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/w3x/terraindoodad.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/w3x/map.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/index.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/w3x/viewer.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/w3x/shaders/ground.vert.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/w3x/shaders/water.vert.ts","webpack://mdx-m3-viewer-th/./src/viewer/handlers/w3x/shaders/cliffs.vert.ts","webpack://mdx-m3-viewer-th/./src/viewer/index.ts","webpack://mdx-m3-viewer-th/./src/utils/blp/sanitytest.ts","webpack://mdx-m3-viewer-th/./src/utils/blp/index.ts","webpack://mdx-m3-viewer-th/./src/utils/dds/index.ts","webpack://mdx-m3-viewer-th/./src/utils/dds/sanitytest.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/jass2lua.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/handle.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/agent.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/player.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/widget.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/unit.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/force.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/group.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/trigger.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/timer.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/location.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/region.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/rect.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/enum.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/race.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/alliancetype.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/racepreference.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/gamestate.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/igamestate.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/fgamestate.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/playerstate.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/playerscore.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/playergameresult.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/unitstate.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/aidifficulty.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/eventid.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/gameevent.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/playerevent.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/playerunitevent.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/unitevent.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/limitop.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/widgetevent.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/dialogevent.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/unittype.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/gamespeed.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/gamedifficulty.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/gametype.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/mapflag.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/mapvisibility.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/mapsetting.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/mapdensity.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/mapcontrol.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/playerslotstate.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/volumegroup.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/camerafield.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/camerasetup.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/playercolor.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/placement.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/startlocprio.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/raritycontrol.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/blendmode.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/texmapflags.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/effecttype.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/weathereffect.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/fogstate.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/version.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/itemtype.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/attacktype.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/damagetype.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/weapontype.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/soundtype.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/pathingtype.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/hashtable.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/natives.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/mousebuttontype.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/animtype.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/types/subanimtype.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/thread.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/context.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/constanthandles.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/compilenatives.ts","webpack://mdx-m3-viewer-th/./src/utils/jass2/index.ts","webpack://mdx-m3-viewer-th/./src/utils/mdlx/sanitytest/tracks.ts","webpack://mdx-m3-viewer-th/./src/utils/mdlx/sanitytest/utils.ts","webpack://mdx-m3-viewer-th/./src/utils/mdlx/sanitytest/data.ts","webpack://mdx-m3-viewer-th/./src/utils/mdlx/sanitytest/testers.ts","webpack://mdx-m3-viewer-th/./src/utils/mdlx/primitives/primitives.ts","webpack://mdx-m3-viewer-th/./src/utils/mdlx/mdlstructure.ts","webpack://mdx-m3-viewer-th/./src/utils/mdlx/index.ts","webpack://mdx-m3-viewer-th/./src/utils/mdlx/sanitytest/sanitytest.ts","webpack://mdx-m3-viewer-th/./src/utils/mdlx/primitives/createprimitive.ts","webpack://mdx-m3-viewer-th/./src/utils/w3x/weu/parsewtg.ts","webpack://mdx-m3-viewer-th/./src/utils/w3x/weu/data.ts","webpack://mdx-m3-viewer-th/./src/utils/w3x/weu/utils.ts","webpack://mdx-m3-viewer-th/./src/utils/w3x/weu/conversions.ts","webpack://mdx-m3-viewer-th/./src/utils/w3x/weu/transformations/transformer.ts","webpack://mdx-m3-viewer-th/./src/utils/w3x/weu/transformations/specific.ts","webpack://mdx-m3-viewer-th/./src/utils/w3x/weu/transformations/functions.ts","webpack://mdx-m3-viewer-th/./src/utils/w3x/weu/transformations/blz.ts","webpack://mdx-m3-viewer-th/./src/utils/w3x/weu/transformations/presets.ts","webpack://mdx-m3-viewer-th/./src/utils/w3x/weu/processing.ts","webpack://mdx-m3-viewer-th/./src/utils/w3x/generatelistfile.ts","webpack://mdx-m3-viewer-th/./src/utils/w3x/index.ts","webpack://mdx-m3-viewer-th/./src/utils/w3x/weu/weu.ts","webpack://mdx-m3-viewer-th/./src/utils/index.ts"],"sourcesContent":["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","\"use strict\";\n\n/*\n * Fengari specific string conversion functions\n */\n\nlet luastring_from;\nif (typeof Uint8Array.from === \"function\") {\n    luastring_from = Uint8Array.from.bind(Uint8Array);\n} else {\n    luastring_from = function(a) {\n        let i = 0;\n        let len = a.length;\n        let r = new Uint8Array(len);\n        while (len > i) r[i] = a[i++];\n        return r;\n    };\n}\n\nlet luastring_indexOf;\nif (typeof (new Uint8Array().indexOf) === \"function\") {\n    luastring_indexOf = function(s, v, i) {\n        return s.indexOf(v, i);\n    };\n} else {\n    /* Browsers that don't support Uint8Array.indexOf seem to allow using Array.indexOf on Uint8Array objects e.g. IE11 */\n    let array_indexOf = [].indexOf;\n    if (array_indexOf.call(new Uint8Array(1), 0) !== 0) throw Error(\"missing .indexOf\");\n    luastring_indexOf = function(s, v, i) {\n        return array_indexOf.call(s, v, i);\n    };\n}\n\nlet luastring_of;\nif (typeof Uint8Array.of === \"function\") {\n    luastring_of = Uint8Array.of.bind(Uint8Array);\n} else {\n    luastring_of = function() {\n        return luastring_from(arguments);\n    };\n}\n\nconst is_luastring = function(s) {\n    return s instanceof Uint8Array;\n};\n\n/* test two lua strings for equality */\nconst luastring_eq = function(a, b) {\n    if (a !== b) {\n        let len = a.length;\n        if (len !== b.length) return false;\n        /* XXX: Should this be a constant time algorithm? */\n        for (let i=0; i<len; i++)\n            if (a[i] !== b[i]) return false;\n    }\n    return true;\n};\n\nconst unicode_error_message = \"cannot convert invalid utf8 to javascript string\";\nconst to_jsstring = function(value, from, to, replacement_char) {\n    if (!is_luastring(value)) throw new TypeError(\"to_jsstring expects a Uint8Array\");\n\n    if (to === void 0) {\n        to = value.length;\n    } else {\n        to = Math.min(value.length, to);\n    }\n\n    let str = \"\";\n    for (let i = (from!==void 0?from:0); i < to;) {\n        let u0 = value[i++];\n        if (u0 < 0x80) {\n            /* single byte sequence */\n            str += String.fromCharCode(u0);\n        } else if (u0 < 0xC2 || u0 > 0xF4) {\n            if (!replacement_char) throw RangeError(unicode_error_message);\n            str += \"�\";\n        } else if (u0 <= 0xDF) {\n            /* two byte sequence */\n            if (i >= to) {\n                if (!replacement_char) throw RangeError(unicode_error_message);\n                str += \"�\";\n                continue;\n            }\n            let u1 = value[i++];\n            if ((u1&0xC0) !== 0x80) {\n                if (!replacement_char) throw RangeError(unicode_error_message);\n                str += \"�\";\n                continue;\n            }\n            str += String.fromCharCode(((u0 & 0x1F) << 6) + (u1 & 0x3F));\n        } else if (u0 <= 0xEF) {\n            /* three byte sequence */\n            if (i+1 >= to) {\n                if (!replacement_char) throw RangeError(unicode_error_message);\n                str += \"�\";\n                continue;\n            }\n            let u1 = value[i++];\n            if ((u1&0xC0) !== 0x80) {\n                if (!replacement_char) throw RangeError(unicode_error_message);\n                str += \"�\";\n                continue;\n            }\n            let u2 = value[i++];\n            if ((u2&0xC0) !== 0x80) {\n                if (!replacement_char) throw RangeError(unicode_error_message);\n                str += \"�\";\n                continue;\n            }\n            let u = ((u0 & 0x0F) << 12) + ((u1 & 0x3F) << 6) + (u2 & 0x3F);\n            if (u <= 0xFFFF) { /* BMP codepoint */\n                str += String.fromCharCode(u);\n            } else { /* Astral codepoint */\n                u -= 0x10000;\n                let s1 = (u >> 10) + 0xD800;\n                let s2 = (u % 0x400) + 0xDC00;\n                str += String.fromCharCode(s1, s2);\n            }\n        } else {\n            /* four byte sequence */\n            if (i+2 >= to) {\n                if (!replacement_char) throw RangeError(unicode_error_message);\n                str += \"�\";\n                continue;\n            }\n            let u1 = value[i++];\n            if ((u1&0xC0) !== 0x80) {\n                if (!replacement_char) throw RangeError(unicode_error_message);\n                str += \"�\";\n                continue;\n            }\n            let u2 = value[i++];\n            if ((u2&0xC0) !== 0x80) {\n                if (!replacement_char) throw RangeError(unicode_error_message);\n                str += \"�\";\n                continue;\n            }\n            let u3 = value[i++];\n            if ((u3&0xC0) !== 0x80) {\n                if (!replacement_char) throw RangeError(unicode_error_message);\n                str += \"�\";\n                continue;\n            }\n            /* Has to be astral codepoint */\n            let u = ((u0 & 0x07) << 18) + ((u1 & 0x3F) << 12) + ((u2 & 0x3F) << 6) + (u3 & 0x3F);\n            u -= 0x10000;\n            let s1 = (u >> 10) + 0xD800;\n            let s2 = (u % 0x400) + 0xDC00;\n            str += String.fromCharCode(s1, s2);\n        }\n    }\n    return str;\n};\n\n/* bytes allowed unescaped in a uri */\nconst uri_allowed = (\";,/?:@&=+$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789,-_.!~*'()#\").split('').reduce(function(uri_allowed, c) {\n    uri_allowed[c.charCodeAt(0)] = true;\n    return uri_allowed;\n}, {});\n\n/* utility function to convert a lua string to a js string with uri escaping */\nconst to_uristring = function(a) {\n    if (!is_luastring(a)) throw new TypeError(\"to_uristring expects a Uint8Array\");\n    let s = \"\";\n    for (let i=0; i<a.length; i++) {\n        let v = a[i];\n        if (uri_allowed[v]) {\n            s += String.fromCharCode(v);\n        } else {\n            s += \"%\" + (v<0x10?\"0\":\"\") + v.toString(16);\n        }\n    }\n    return s;\n};\n\nconst to_luastring_cache = {};\n\nconst to_luastring = function(str, cache) {\n    if (typeof str !== \"string\") throw new TypeError(\"to_luastring expects a javascript string\");\n\n    if (cache) {\n        let cached = to_luastring_cache[str];\n        if (is_luastring(cached)) return cached;\n    }\n\n    let len = str.length;\n    let outU8Array = Array(len); /* array is at *least* going to be length of string */\n    let outIdx = 0;\n    for (let i = 0; i < len; ++i) {\n        let u = str.charCodeAt(i);\n        if (u <= 0x7F) {\n            outU8Array[outIdx++] = u;\n        } else if (u <= 0x7FF) {\n            outU8Array[outIdx++] = 0xC0 | (u >> 6);\n            outU8Array[outIdx++] = 0x80 | (u & 63);\n        } else {\n            /* This part is to work around possible lack of String.codePointAt */\n            if (u >= 0xD800 && u <= 0xDBFF && (i+1) < len) {\n                /* is first half of surrogate pair */\n                let v = str.charCodeAt(i+1);\n                if (v >= 0xDC00 && v <= 0xDFFF) {\n                    /* is valid low surrogate */\n                    i++;\n                    u = (u - 0xD800) * 0x400 + v + 0x2400;\n                }\n            }\n            if (u <= 0xFFFF) {\n                outU8Array[outIdx++] = 0xE0 | (u >> 12);\n                outU8Array[outIdx++] = 0x80 | ((u >> 6) & 63);\n                outU8Array[outIdx++] = 0x80 | (u & 63);\n            } else {\n                outU8Array[outIdx++] = 0xF0 | (u >> 18);\n                outU8Array[outIdx++] = 0x80 | ((u >> 12) & 63);\n                outU8Array[outIdx++] = 0x80 | ((u >> 6) & 63);\n                outU8Array[outIdx++] = 0x80 | (u & 63);\n            }\n        }\n    }\n    outU8Array = luastring_from(outU8Array);\n\n    if (cache) to_luastring_cache[str] = outU8Array;\n\n    return outU8Array;\n};\n\nconst from_userstring = function(str) {\n    if (!is_luastring(str)) {\n        if (typeof str === \"string\") {\n            str = to_luastring(str);\n        } else {\n            throw new TypeError(\"expects an array of bytes or javascript string\");\n        }\n    }\n    return str;\n};\n\nmodule.exports.luastring_from    = luastring_from;\nmodule.exports.luastring_indexOf = luastring_indexOf;\nmodule.exports.luastring_of      = luastring_of;\nmodule.exports.is_luastring      = is_luastring;\nmodule.exports.luastring_eq      = luastring_eq;\nmodule.exports.to_jsstring       = to_jsstring;\nmodule.exports.to_uristring      = to_uristring;\nmodule.exports.to_luastring      = to_luastring;\nmodule.exports.from_userstring   = from_userstring;\n\n\n/* mark for precompiled code ('<esc>Lua') */\nconst LUA_SIGNATURE = to_luastring(\"\\x1bLua\");\n\nconst LUA_VERSION_MAJOR   = \"5\";\nconst LUA_VERSION_MINOR   = \"3\";\nconst LUA_VERSION_NUM     = 503;\nconst LUA_VERSION_RELEASE = \"4\";\n\nconst LUA_VERSION         = \"Lua \" + LUA_VERSION_MAJOR + \".\" + LUA_VERSION_MINOR;\nconst LUA_RELEASE         = LUA_VERSION + \".\" + LUA_VERSION_RELEASE;\nconst LUA_COPYRIGHT       = LUA_RELEASE + \"  Copyright (C) 1994-2017 Lua.org, PUC-Rio\";\nconst LUA_AUTHORS         = \"R. Ierusalimschy, L. H. de Figueiredo, W. Celes\";\n\nmodule.exports.LUA_SIGNATURE       = LUA_SIGNATURE;\nmodule.exports.LUA_VERSION_MAJOR   = LUA_VERSION_MAJOR;\nmodule.exports.LUA_VERSION_MINOR   = LUA_VERSION_MINOR;\nmodule.exports.LUA_VERSION_NUM     = LUA_VERSION_NUM;\nmodule.exports.LUA_VERSION_RELEASE = LUA_VERSION_RELEASE;\nmodule.exports.LUA_VERSION         = LUA_VERSION;\nmodule.exports.LUA_RELEASE         = LUA_RELEASE;\nmodule.exports.LUA_COPYRIGHT       = LUA_COPYRIGHT;\nmodule.exports.LUA_AUTHORS         = LUA_AUTHORS;\n\n\nconst thread_status = {\n    LUA_OK:        0,\n    LUA_YIELD:     1,\n    LUA_ERRRUN:    2,\n    LUA_ERRSYNTAX: 3,\n    LUA_ERRMEM:    4,\n    LUA_ERRGCMM:   5,\n    LUA_ERRERR:    6\n};\n\nconst constant_types = {\n    LUA_TNONE:          -1,\n    LUA_TNIL:           0,\n    LUA_TBOOLEAN:       1,\n    LUA_TLIGHTUSERDATA: 2,\n    LUA_TNUMBER:        3,\n    LUA_TSTRING:        4,\n    LUA_TTABLE:         5,\n    LUA_TFUNCTION:      6,\n    LUA_TUSERDATA:      7,\n    LUA_TTHREAD:        8,\n    LUA_NUMTAGS:        9\n};\n\nconstant_types.LUA_TSHRSTR = constant_types.LUA_TSTRING | (0 << 4);  /* short strings */\nconstant_types.LUA_TLNGSTR = constant_types.LUA_TSTRING | (1 << 4);  /* long strings */\n\nconstant_types.LUA_TNUMFLT = constant_types.LUA_TNUMBER | (0 << 4);  /* float numbers */\nconstant_types.LUA_TNUMINT = constant_types.LUA_TNUMBER | (1 << 4);  /* integer numbers */\n\nconstant_types.LUA_TLCL = constant_types.LUA_TFUNCTION | (0 << 4);  /* Lua closure */\nconstant_types.LUA_TLCF = constant_types.LUA_TFUNCTION | (1 << 4);  /* light C function */\nconstant_types.LUA_TCCL = constant_types.LUA_TFUNCTION | (2 << 4);  /* C closure */\n\n/*\n** Comparison and arithmetic functions\n*/\n\nconst LUA_OPADD  = 0;   /* ORDER TM, ORDER OP */\nconst LUA_OPSUB  = 1;\nconst LUA_OPMUL  = 2;\nconst LUA_OPMOD  = 3;\nconst LUA_OPPOW  = 4;\nconst LUA_OPDIV  = 5;\nconst LUA_OPIDIV = 6;\nconst LUA_OPBAND = 7;\nconst LUA_OPBOR  = 8;\nconst LUA_OPBXOR = 9;\nconst LUA_OPSHL  = 10;\nconst LUA_OPSHR  = 11;\nconst LUA_OPUNM  = 12;\nconst LUA_OPBNOT = 13;\n\nconst LUA_OPEQ = 0;\nconst LUA_OPLT = 1;\nconst LUA_OPLE = 2;\n\nconst LUA_MINSTACK = 20;\n\nconst { LUAI_MAXSTACK } = require('./luaconf.js');\nconst LUA_REGISTRYINDEX = -LUAI_MAXSTACK - 1000;\n\nconst lua_upvalueindex = function(i) {\n    return LUA_REGISTRYINDEX - i;\n};\n\n/* predefined values in the registry */\nconst LUA_RIDX_MAINTHREAD = 1;\nconst LUA_RIDX_GLOBALS    = 2;\nconst LUA_RIDX_LAST       = LUA_RIDX_GLOBALS;\n\nclass lua_Debug {\n    constructor() {\n        this.event = NaN;\n        this.name = null;           /* (n) */\n        this.namewhat = null;       /* (n) 'global', 'local', 'field', 'method' */\n        this.what = null;           /* (S) 'Lua', 'C', 'main', 'tail' */\n        this.source = null;         /* (S) */\n        this.currentline = NaN;     /* (l) */\n        this.linedefined = NaN;     /* (S) */\n        this.lastlinedefined = NaN; /* (S) */\n        this.nups = NaN;            /* (u) number of upvalues */\n        this.nparams = NaN;         /* (u) number of parameters */\n        this.isvararg = NaN;        /* (u) */\n        this.istailcall = NaN;      /* (t) */\n        this.short_src = null;      /* (S) */\n        /* private part */\n        this.i_ci = null;           /* active function */\n    }\n}\n\n/*\n** Event codes\n*/\nconst LUA_HOOKCALL     = 0;\nconst LUA_HOOKRET      = 1;\nconst LUA_HOOKLINE     = 2;\nconst LUA_HOOKCOUNT    = 3;\nconst LUA_HOOKTAILCALL = 4;\n\n\n/*\n** Event masks\n*/\nconst LUA_MASKCALL  = (1 << LUA_HOOKCALL);\nconst LUA_MASKRET   = (1 << LUA_HOOKRET);\nconst LUA_MASKLINE  = (1 << LUA_HOOKLINE);\nconst LUA_MASKCOUNT = (1 << LUA_HOOKCOUNT);\n\nmodule.exports.LUA_HOOKCALL            = LUA_HOOKCALL;\nmodule.exports.LUA_HOOKCOUNT           = LUA_HOOKCOUNT;\nmodule.exports.LUA_HOOKLINE            = LUA_HOOKLINE;\nmodule.exports.LUA_HOOKRET             = LUA_HOOKRET;\nmodule.exports.LUA_HOOKTAILCALL        = LUA_HOOKTAILCALL;\nmodule.exports.LUA_MASKCALL            = LUA_MASKCALL;\nmodule.exports.LUA_MASKCOUNT           = LUA_MASKCOUNT;\nmodule.exports.LUA_MASKLINE            = LUA_MASKLINE;\nmodule.exports.LUA_MASKRET             = LUA_MASKRET;\nmodule.exports.LUA_MINSTACK            = LUA_MINSTACK;\nmodule.exports.LUA_MULTRET             = -1;\nmodule.exports.LUA_OPADD               = LUA_OPADD;\nmodule.exports.LUA_OPBAND              = LUA_OPBAND;\nmodule.exports.LUA_OPBNOT              = LUA_OPBNOT;\nmodule.exports.LUA_OPBOR               = LUA_OPBOR;\nmodule.exports.LUA_OPBXOR              = LUA_OPBXOR;\nmodule.exports.LUA_OPDIV               = LUA_OPDIV;\nmodule.exports.LUA_OPEQ                = LUA_OPEQ;\nmodule.exports.LUA_OPIDIV              = LUA_OPIDIV;\nmodule.exports.LUA_OPLE                = LUA_OPLE;\nmodule.exports.LUA_OPLT                = LUA_OPLT;\nmodule.exports.LUA_OPMOD               = LUA_OPMOD;\nmodule.exports.LUA_OPMUL               = LUA_OPMUL;\nmodule.exports.LUA_OPPOW               = LUA_OPPOW;\nmodule.exports.LUA_OPSHL               = LUA_OPSHL;\nmodule.exports.LUA_OPSHR               = LUA_OPSHR;\nmodule.exports.LUA_OPSUB               = LUA_OPSUB;\nmodule.exports.LUA_OPUNM               = LUA_OPUNM;\nmodule.exports.LUA_REGISTRYINDEX       = LUA_REGISTRYINDEX;\nmodule.exports.LUA_RIDX_GLOBALS        = LUA_RIDX_GLOBALS;\nmodule.exports.LUA_RIDX_LAST           = LUA_RIDX_LAST;\nmodule.exports.LUA_RIDX_MAINTHREAD     = LUA_RIDX_MAINTHREAD;\nmodule.exports.constant_types          = constant_types;\nmodule.exports.lua_Debug               = lua_Debug;\nmodule.exports.lua_upvalueindex        = lua_upvalueindex;\nmodule.exports.thread_status           = thread_status;\n","/* Fengari specific functions\n *\n * This file includes fengari-specific data or and functionality for users to\n * manipulate fengari's string type.\n * The fields are exposed to the user on the 'fengari' entry point; however to\n * avoid a dependency on defs.js from lauxlib.js they are defined in this file.\n */\n\nconst defs = require(\"./defs.js\");\n\nconst FENGARI_VERSION_MAJOR   = \"0\";\nconst FENGARI_VERSION_MINOR   = \"1\";\nconst FENGARI_VERSION_NUM     = 1;\nconst FENGARI_VERSION_RELEASE = \"4\";\nconst FENGARI_VERSION         = \"Fengari \" + FENGARI_VERSION_MAJOR + \".\" + FENGARI_VERSION_MINOR;\nconst FENGARI_RELEASE         = FENGARI_VERSION + \".\" + FENGARI_VERSION_RELEASE;\nconst FENGARI_AUTHORS         = \"B. Giannangeli, Daurnimator\";\nconst FENGARI_COPYRIGHT       = FENGARI_RELEASE + \"  Copyright (C) 2017-2018 \" + FENGARI_AUTHORS + \"\\nBased on: \" + defs.LUA_COPYRIGHT;\n\nmodule.exports.FENGARI_AUTHORS         = FENGARI_AUTHORS;\nmodule.exports.FENGARI_COPYRIGHT       = FENGARI_COPYRIGHT;\nmodule.exports.FENGARI_RELEASE         = FENGARI_RELEASE;\nmodule.exports.FENGARI_VERSION         = FENGARI_VERSION;\nmodule.exports.FENGARI_VERSION_MAJOR   = FENGARI_VERSION_MAJOR;\nmodule.exports.FENGARI_VERSION_MINOR   = FENGARI_VERSION_MINOR;\nmodule.exports.FENGARI_VERSION_NUM     = FENGARI_VERSION_NUM;\nmodule.exports.FENGARI_VERSION_RELEASE = FENGARI_VERSION_RELEASE;\nmodule.exports.is_luastring            = defs.is_luastring;\nmodule.exports.luastring_eq            = defs.luastring_eq;\nmodule.exports.luastring_from          = defs.luastring_from;\nmodule.exports.luastring_indexOf       = defs.luastring_indexOf;\nmodule.exports.luastring_of            = defs.luastring_of;\nmodule.exports.to_jsstring             = defs.to_jsstring;\nmodule.exports.to_luastring            = defs.to_luastring;\nmodule.exports.to_uristring            = defs.to_uristring;\nmodule.exports.from_userstring         = defs.from_userstring;\n","\"use strict\";\n\nconst {\n    LUA_MULTRET,\n    LUA_OPBNOT,\n    LUA_OPEQ,\n    LUA_OPLE,\n    LUA_OPLT,\n    LUA_OPUNM,\n    LUA_REGISTRYINDEX,\n    LUA_RIDX_GLOBALS,\n    LUA_VERSION_NUM,\n    constant_types: {\n        LUA_NUMTAGS,\n        LUA_TBOOLEAN,\n        LUA_TCCL,\n        LUA_TFUNCTION,\n        LUA_TLCF,\n        LUA_TLCL,\n        LUA_TLIGHTUSERDATA,\n        LUA_TLNGSTR,\n        LUA_TNIL,\n        LUA_TNONE,\n        LUA_TNUMFLT,\n        LUA_TNUMINT,\n        LUA_TSHRSTR,\n        LUA_TTABLE,\n        LUA_TTHREAD,\n        LUA_TUSERDATA\n    },\n    thread_status: { LUA_OK },\n    from_userstring,\n    to_luastring,\n} = require('./defs.js');\nconst { api_check } = require('./llimits.js');\nconst ldebug    = require('./ldebug.js');\nconst ldo       = require('./ldo.js');\nconst { luaU_dump } = require('./ldump.js');\nconst lfunc     = require('./lfunc.js');\nconst lobject   = require('./lobject.js');\nconst lstate    = require('./lstate.js');\nconst {\n    luaS_bless,\n    luaS_new,\n    luaS_newliteral\n} = require('./lstring.js');\nconst ltm       = require('./ltm.js');\nconst { LUAI_MAXSTACK } = require('./luaconf.js');\nconst lvm       = require('./lvm.js');\nconst ltable    = require('./ltable.js');\nconst { ZIO } = require('./lzio.js');\nconst TValue    = lobject.TValue;\nconst CClosure  = lobject.CClosure;\n\nconst api_incr_top = function(L) {\n    L.top++;\n    api_check(L, L.top <= L.ci.top, \"stack overflow\");\n};\n\nconst api_checknelems = function(L, n) {\n    api_check(L, n < (L.top - L.ci.funcOff), \"not enough elements in the stack\");\n};\n\nconst fengari_argcheck = function(c) {\n    if (!c) throw TypeError(\"invalid argument\");\n};\n\nconst fengari_argcheckinteger = function(n) {\n    fengari_argcheck(typeof n === \"number\" && (n|0) === n);\n};\n\nconst isvalid = function(o) {\n    return o !== lobject.luaO_nilobject;\n};\n\nconst lua_version = function(L) {\n    if (L === null) return LUA_VERSION_NUM;\n    else return L.l_G.version;\n};\n\nconst lua_atpanic = function(L, panicf) {\n    let old = L.l_G.panic;\n    L.l_G.panic = panicf;\n    return old;\n};\n\nconst lua_atnativeerror = function(L, errorf) {\n    let old = L.l_G.atnativeerror;\n    L.l_G.atnativeerror = errorf;\n    return old;\n};\n\n// Return value for idx on stack\nconst index2addr = function(L, idx) {\n    let ci = L.ci;\n    if (idx > 0) {\n        let o = ci.funcOff + idx;\n        api_check(L, idx <= ci.top - (ci.funcOff + 1), \"unacceptable index\");\n        if (o >= L.top) return lobject.luaO_nilobject;\n        else return L.stack[o];\n    } else if (idx > LUA_REGISTRYINDEX) {\n        api_check(L, idx !== 0 && -idx <= L.top, \"invalid index\");\n        return L.stack[L.top + idx];\n    } else if (idx === LUA_REGISTRYINDEX) {\n        return L.l_G.l_registry;\n    } else { /* upvalues */\n        idx = LUA_REGISTRYINDEX - idx;\n        api_check(L, idx <= lfunc.MAXUPVAL + 1, \"upvalue index too large\");\n        if (ci.func.ttislcf()) /* light C function? */\n            return lobject.luaO_nilobject; /* it has no upvalues */\n        else {\n            return idx <= ci.func.value.nupvalues ? ci.func.value.upvalue[idx - 1] : lobject.luaO_nilobject;\n        }\n    }\n};\n\n// Like index2addr but returns the index on stack; doesn't allow pseudo indices\nconst index2addr_ = function(L, idx) {\n    let ci = L.ci;\n    if (idx > 0) {\n        let o = ci.funcOff + idx;\n        api_check(L, idx <= ci.top - (ci.funcOff + 1), \"unacceptable index\");\n        if (o >= L.top) return null;\n        else return o;\n    } else if (idx > LUA_REGISTRYINDEX) {\n        api_check(L, idx !== 0 && -idx <= L.top, \"invalid index\");\n        return L.top + idx;\n    } else { /* registry or upvalue */\n        throw Error(\"attempt to use pseudo-index\");\n    }\n};\n\nconst lua_checkstack = function(L, n) {\n    let res;\n    let ci = L.ci;\n    api_check(L, n >= 0, \"negative 'n'\");\n    if (L.stack_last - L.top > n) /* stack large enough? */\n        res = true;\n    else { /* no; need to grow stack */\n        let inuse = L.top + lstate.EXTRA_STACK;\n        if (inuse > LUAI_MAXSTACK - n)  /* can grow without overflow? */\n            res = false;  /* no */\n        else { /* try to grow stack */\n            ldo.luaD_growstack(L, n);\n            res = true;\n        }\n    }\n\n    if (res && ci.top < L.top + n)\n        ci.top = L.top + n;  /* adjust frame top */\n\n    return res;\n};\n\nconst lua_xmove = function(from, to, n) {\n    if (from === to) return;\n    api_checknelems(from, n);\n    api_check(from, from.l_G === to.l_G, \"moving among independent states\");\n    api_check(from, to.ci.top - to.top >= n, \"stack overflow\");\n    from.top -= n;\n    for (let i = 0; i < n; i++) {\n        to.stack[to.top] = new lobject.TValue();\n        lobject.setobj2s(to, to.top, from.stack[from.top + i]);\n        delete from.stack[from.top + i];\n        to.top++;\n    }\n};\n\n/*\n** basic stack manipulation\n*/\n\n/*\n** convert an acceptable stack index into an absolute index\n*/\nconst lua_absindex = function(L, idx) {\n    return (idx > 0 || idx <= LUA_REGISTRYINDEX)\n        ? idx\n        : (L.top - L.ci.funcOff) + idx;\n};\n\nconst lua_gettop = function(L) {\n    return L.top - (L.ci.funcOff + 1);\n};\n\nconst lua_pushvalue = function(L, idx) {\n    lobject.pushobj2s(L, index2addr(L, idx));\n    api_check(L, L.top <= L.ci.top, \"stack overflow\");\n};\n\nconst lua_settop = function(L, idx) {\n    let func = L.ci.funcOff;\n    let newtop;\n    if (idx >= 0) {\n        api_check(L, idx <= L.stack_last - (func + 1), \"new top too large\");\n        newtop = func + 1 + idx;\n    } else {\n        api_check(L, -(idx + 1) <= L.top - (func + 1), \"invalid new top\");\n        newtop = L.top + idx + 1; /* 'subtract' index (index is negative) */\n    }\n    ldo.adjust_top(L, newtop);\n};\n\nconst lua_pop = function(L, n) {\n    lua_settop(L, -n - 1);\n};\n\nconst reverse = function(L, from, to) {\n    for (; from < to; from++, to--) {\n        let fromtv = L.stack[from];\n        let temp = new TValue(fromtv.type, fromtv.value);\n        lobject.setobjs2s(L, from, to);\n        lobject.setobj2s(L, to, temp);\n    }\n};\n\n/*\n** Let x = AB, where A is a prefix of length 'n'. Then,\n** rotate x n === BA. But BA === (A^r . B^r)^r.\n*/\nconst lua_rotate = function(L, idx, n) {\n    let t = L.top - 1;\n    let pIdx = index2addr_(L, idx);\n    let p = L.stack[pIdx];\n    api_check(L, isvalid(p) && idx > LUA_REGISTRYINDEX, \"index not in the stack\");\n    api_check(L, (n >= 0 ? n : -n) <= (t - pIdx + 1), \"invalid 'n'\");\n    let m = n >= 0 ? t - n : pIdx - n - 1;  /* end of prefix */\n    reverse(L, pIdx, m);\n    reverse(L, m + 1, L.top - 1);\n    reverse(L, pIdx, L.top - 1);\n};\n\nconst lua_copy = function(L, fromidx, toidx) {\n    let from = index2addr(L, fromidx);\n    index2addr(L, toidx).setfrom(from);\n};\n\nconst lua_remove = function(L, idx) {\n    lua_rotate(L, idx, -1);\n    lua_pop(L, 1);\n};\n\nconst lua_insert = function(L, idx) {\n    lua_rotate(L, idx, 1);\n};\n\nconst lua_replace = function(L, idx) {\n    lua_copy(L, -1, idx);\n    lua_pop(L, 1);\n};\n\n/*\n** push functions (JS -> stack)\n*/\n\nconst lua_pushnil = function(L) {\n    L.stack[L.top] = new TValue(LUA_TNIL, null);\n    api_incr_top(L);\n};\n\nconst lua_pushnumber = function(L, n) {\n    fengari_argcheck(typeof n === \"number\");\n    L.stack[L.top] = new TValue(LUA_TNUMFLT, n);\n    api_incr_top(L);\n};\n\nconst lua_pushinteger = function(L, n) {\n    fengari_argcheckinteger(n);\n    L.stack[L.top] = new TValue(LUA_TNUMINT, n);\n    api_incr_top(L);\n};\n\nconst lua_pushlstring = function(L, s, len) {\n    fengari_argcheckinteger(len);\n    let ts;\n    if (len === 0) {\n        s = to_luastring(\"\", true);\n        ts = luaS_bless(L, s);\n    } else {\n        s = from_userstring(s);\n        api_check(L, s.length >= len, \"invalid length to lua_pushlstring\");\n        ts = luaS_new(L, s.subarray(0, len));\n    }\n    lobject.pushsvalue2s(L, ts);\n    api_check(L, L.top <= L.ci.top, \"stack overflow\");\n    return ts.value;\n};\n\nconst lua_pushstring = function (L, s) {\n    if (s === undefined || s === null) {\n        L.stack[L.top] = new TValue(LUA_TNIL, null);\n        L.top++;\n    } else {\n        let ts = luaS_new(L, from_userstring(s));\n        lobject.pushsvalue2s(L, ts);\n        s = ts.getstr(); /* internal copy */\n    }\n    api_check(L, L.top <= L.ci.top, \"stack overflow\");\n    return s;\n};\n\nconst lua_pushvfstring = function (L, fmt, argp) {\n    fmt = from_userstring(fmt);\n    return lobject.luaO_pushvfstring(L, fmt, argp);\n};\n\nconst lua_pushfstring = function (L, fmt, ...argp) {\n    fmt = from_userstring(fmt);\n    return lobject.luaO_pushvfstring(L, fmt, argp);\n};\n\n/* Similar to lua_pushstring, but takes a JS string */\nconst lua_pushliteral = function (L, s) {\n    if (s === undefined || s === null) {\n        L.stack[L.top] = new TValue(LUA_TNIL, null);\n        L.top++;\n    } else {\n        fengari_argcheck(typeof s === \"string\");\n        let ts = luaS_newliteral(L, s);\n        lobject.pushsvalue2s(L, ts);\n        s = ts.getstr(); /* internal copy */\n    }\n    api_check(L, L.top <= L.ci.top, \"stack overflow\");\n\n    return s;\n};\n\nconst lua_pushcclosure = function(L, fn, n) {\n    fengari_argcheck(typeof fn === \"function\");\n    fengari_argcheckinteger(n);\n    if (n === 0)\n        L.stack[L.top] = new TValue(LUA_TLCF, fn);\n    else {\n        api_checknelems(L, n);\n        api_check(L, n <= lfunc.MAXUPVAL, \"upvalue index too large\");\n        let cl = new CClosure(L, fn, n);\n        for (let i=0; i<n; i++)\n            cl.upvalue[i].setfrom(L.stack[L.top - n + i]);\n        for (let i=1; i<n; i++)\n            delete L.stack[--L.top];\n        if (n>0)\n            --L.top;\n        L.stack[L.top].setclCvalue(cl);\n    }\n    api_incr_top(L);\n};\n\nconst lua_pushjsclosure = lua_pushcclosure;\n\nconst lua_pushcfunction = function(L, fn) {\n    lua_pushcclosure(L, fn, 0);\n};\n\nconst lua_pushjsfunction = lua_pushcfunction;\n\nconst lua_pushboolean = function(L, b) {\n    L.stack[L.top] = new TValue(LUA_TBOOLEAN, !!b);\n    api_incr_top(L);\n};\n\nconst lua_pushlightuserdata = function(L, p) {\n    L.stack[L.top] = new TValue(LUA_TLIGHTUSERDATA, p);\n    api_incr_top(L);\n};\n\nconst lua_pushthread = function(L) {\n    L.stack[L.top] = new TValue(LUA_TTHREAD, L);\n    api_incr_top(L);\n    return L.l_G.mainthread === L;\n};\n\nconst lua_pushglobaltable = function(L) {\n    lua_rawgeti(L, LUA_REGISTRYINDEX, LUA_RIDX_GLOBALS);\n};\n\n/*\n** set functions (stack -> Lua)\n*/\n\n/*\n** t[k] = value at the top of the stack (where 'k' is a string)\n*/\nconst auxsetstr = function(L, t, k) {\n    let str = luaS_new(L, from_userstring(k));\n    api_checknelems(L, 1);\n    lobject.pushsvalue2s(L, str); /* push 'str' (to make it a TValue) */\n    api_check(L, L.top <= L.ci.top, \"stack overflow\");\n    lvm.settable(L, t, L.stack[L.top - 1], L.stack[L.top - 2]);\n    /* pop value and key */\n    delete L.stack[--L.top];\n    delete L.stack[--L.top];\n};\n\nconst lua_setglobal = function(L, name) {\n    auxsetstr(L, ltable.luaH_getint(L.l_G.l_registry.value, LUA_RIDX_GLOBALS), name);\n};\n\nconst lua_setmetatable = function(L, objindex) {\n    api_checknelems(L, 1);\n    let mt;\n    let obj = index2addr(L, objindex);\n    if (L.stack[L.top - 1].ttisnil())\n        mt = null;\n    else {\n        api_check(L, L.stack[L.top - 1].ttistable(), \"table expected\");\n        mt = L.stack[L.top - 1].value;\n    }\n\n    switch (obj.ttnov()) {\n        case LUA_TUSERDATA:\n        case LUA_TTABLE: {\n            obj.value.metatable = mt;\n            break;\n        }\n        default: {\n            L.l_G.mt[obj.ttnov()] = mt;\n            break;\n        }\n    }\n\n    delete L.stack[--L.top];\n    return true;\n};\n\nconst lua_settable = function(L, idx) {\n    api_checknelems(L, 2);\n    let t = index2addr(L, idx);\n    lvm.settable(L, t, L.stack[L.top - 2], L.stack[L.top - 1]);\n    delete L.stack[--L.top];\n    delete L.stack[--L.top];\n};\n\nconst lua_setfield = function(L, idx, k) {\n    auxsetstr(L, index2addr(L, idx), k);\n};\n\nconst lua_seti = function(L, idx, n) {\n    fengari_argcheckinteger(n);\n    api_checknelems(L, 1);\n    let t = index2addr(L, idx);\n    L.stack[L.top] = new TValue(LUA_TNUMINT, n);\n    api_incr_top(L);\n    lvm.settable(L, t, L.stack[L.top - 1], L.stack[L.top - 2]);\n    /* pop value and key */\n    delete L.stack[--L.top];\n    delete L.stack[--L.top];\n};\n\nconst lua_rawset = function(L, idx) {\n    api_checknelems(L, 2);\n    let o = index2addr(L, idx);\n    api_check(L, o.ttistable(), \"table expected\");\n    let k = L.stack[L.top - 2];\n    let v = L.stack[L.top - 1];\n    ltable.luaH_setfrom(L, o.value, k, v);\n    ltable.invalidateTMcache(o.value);\n    delete L.stack[--L.top];\n    delete L.stack[--L.top];\n};\n\nconst lua_rawseti = function(L, idx, n) {\n    fengari_argcheckinteger(n);\n    api_checknelems(L, 1);\n    let o = index2addr(L, idx);\n    api_check(L, o.ttistable(), \"table expected\");\n    ltable.luaH_setint(o.value, n, L.stack[L.top - 1]);\n    delete L.stack[--L.top];\n};\n\nconst lua_rawsetp = function(L, idx, p) {\n    api_checknelems(L, 1);\n    let o = index2addr(L, idx);\n    api_check(L, o.ttistable(), \"table expected\");\n    let k = new TValue(LUA_TLIGHTUSERDATA, p);\n    let v = L.stack[L.top - 1];\n    ltable.luaH_setfrom(L, o.value, k, v);\n    delete L.stack[--L.top];\n};\n\n/*\n** get functions (Lua -> stack)\n*/\n\nconst auxgetstr = function(L, t, k) {\n    let str = luaS_new(L, from_userstring(k));\n    lobject.pushsvalue2s(L, str);\n    api_check(L, L.top <= L.ci.top, \"stack overflow\");\n    lvm.luaV_gettable(L, t, L.stack[L.top - 1], L.top - 1);\n    return L.stack[L.top - 1].ttnov();\n};\n\nconst lua_rawgeti = function(L, idx, n) {\n    let t = index2addr(L, idx);\n    fengari_argcheckinteger(n);\n    api_check(L, t.ttistable(), \"table expected\");\n    lobject.pushobj2s(L, ltable.luaH_getint(t.value, n));\n    api_check(L, L.top <= L.ci.top, \"stack overflow\");\n    return L.stack[L.top - 1].ttnov();\n};\n\nconst lua_rawgetp = function(L, idx, p) {\n    let t = index2addr(L, idx);\n    api_check(L, t.ttistable(), \"table expected\");\n    let k = new TValue(LUA_TLIGHTUSERDATA, p);\n    lobject.pushobj2s(L, ltable.luaH_get(L, t.value, k));\n    api_check(L, L.top <= L.ci.top, \"stack overflow\");\n    return L.stack[L.top - 1].ttnov();\n};\n\nconst lua_rawget = function(L, idx) {\n    let t = index2addr(L, idx);\n    api_check(L, t.ttistable(t), \"table expected\");\n    lobject.setobj2s(L, L.top - 1, ltable.luaH_get(L, t.value, L.stack[L.top - 1]));\n    return L.stack[L.top - 1].ttnov();\n};\n\n// narray and nrec are mostly useless for this implementation\nconst lua_createtable = function(L, narray, nrec) {\n    let t = new lobject.TValue(LUA_TTABLE, ltable.luaH_new(L));\n    L.stack[L.top] = t;\n    api_incr_top(L);\n};\n\nconst luaS_newudata = function(L, size) {\n    return new lobject.Udata(L, size);\n};\n\nconst lua_newuserdata = function(L, size) {\n    let u = luaS_newudata(L, size);\n    L.stack[L.top] = new lobject.TValue(LUA_TUSERDATA, u);\n    api_incr_top(L);\n    return u.data;\n};\n\nconst aux_upvalue = function(L, fi, n) {\n    fengari_argcheckinteger(n);\n    switch(fi.ttype()) {\n        case LUA_TCCL: {  /* C closure */\n            let f = fi.value;\n            if (!(1 <= n && n <= f.nupvalues)) return null;\n            return {\n                name: to_luastring(\"\", true),\n                val: f.upvalue[n-1]\n            };\n        }\n        case LUA_TLCL: {  /* Lua closure */\n            let f = fi.value;\n            let p = f.p;\n            if (!(1 <= n && n <= p.upvalues.length)) return null;\n            let name = p.upvalues[n-1].name;\n            return {\n                name: name ? name.getstr() : to_luastring(\"(*no name)\", true),\n                val: f.upvals[n-1]\n            };\n        }\n        default: return null;  /* not a closure */\n    }\n};\n\nconst lua_getupvalue = function(L, funcindex, n) {\n    let up = aux_upvalue(L, index2addr(L, funcindex), n);\n    if (up) {\n        let name = up.name;\n        let val = up.val;\n        lobject.pushobj2s(L, val);\n        api_check(L, L.top <= L.ci.top, \"stack overflow\");\n        return name;\n    }\n    return null;\n};\n\nconst lua_setupvalue = function(L, funcindex, n) {\n    let fi = index2addr(L, funcindex);\n    api_checknelems(L, 1);\n    let aux = aux_upvalue(L, fi, n);\n    if (aux) {\n        let name = aux.name;\n        let val = aux.val;\n        val.setfrom(L.stack[L.top-1]);\n        delete L.stack[--L.top];\n        return name;\n    }\n    return null;\n};\n\nconst lua_newtable = function(L) {\n    lua_createtable(L, 0, 0);\n};\n\nconst lua_register = function(L, n, f) {\n    lua_pushcfunction(L, f);\n    lua_setglobal(L, n);\n};\n\nconst lua_getmetatable = function(L, objindex) {\n    let obj = index2addr(L, objindex);\n    let mt;\n    let res = false;\n    switch (obj.ttnov()) {\n        case LUA_TTABLE:\n        case LUA_TUSERDATA:\n            mt = obj.value.metatable;\n            break;\n        default:\n            mt = L.l_G.mt[obj.ttnov()];\n            break;\n    }\n\n    if (mt !== null && mt !== undefined) {\n        L.stack[L.top] = new TValue(LUA_TTABLE, mt);\n        api_incr_top(L);\n        res = true;\n    }\n\n    return res;\n};\n\nconst lua_getuservalue = function(L, idx) {\n    let o = index2addr(L, idx);\n    api_check(L, o.ttisfulluserdata(), \"full userdata expected\");\n    let uv = o.value.uservalue;\n    L.stack[L.top] = new TValue(uv.type, uv.value);\n    api_incr_top(L);\n    return L.stack[L.top - 1].ttnov();\n};\n\nconst lua_gettable = function(L, idx) {\n    let t = index2addr(L, idx);\n    lvm.luaV_gettable(L, t, L.stack[L.top - 1], L.top - 1);\n    return L.stack[L.top - 1].ttnov();\n};\n\nconst lua_getfield = function(L, idx, k) {\n    return auxgetstr(L, index2addr(L, idx), k);\n};\n\nconst lua_geti = function(L, idx, n) {\n    let t = index2addr(L, idx);\n    fengari_argcheckinteger(n);\n    L.stack[L.top] = new TValue(LUA_TNUMINT, n);\n    api_incr_top(L);\n    lvm.luaV_gettable(L, t, L.stack[L.top - 1], L.top - 1);\n    return L.stack[L.top - 1].ttnov();\n};\n\nconst lua_getglobal = function(L, name) {\n    return auxgetstr(L, ltable.luaH_getint(L.l_G.l_registry.value, LUA_RIDX_GLOBALS), name);\n};\n\n/*\n** access functions (stack -> JS)\n*/\n\nconst lua_toboolean = function(L, idx) {\n    let o = index2addr(L, idx);\n    return !o.l_isfalse();\n};\n\nconst lua_tolstring = function(L, idx) {\n    let o = index2addr(L, idx);\n\n    if (!o.ttisstring()) {\n        if (!lvm.cvt2str(o)) {  /* not convertible? */\n            return null;\n        }\n        lobject.luaO_tostring(L, o);\n    }\n    return o.svalue();\n};\n\nconst lua_tostring =  lua_tolstring;\n\nconst lua_tojsstring = function(L, idx) {\n    let o = index2addr(L, idx);\n\n    if (!o.ttisstring()) {\n        if (!lvm.cvt2str(o)) {  /* not convertible? */\n            return null;\n        }\n        lobject.luaO_tostring(L, o);\n    }\n    return o.jsstring();\n};\n\nconst lua_todataview = function(L, idx) {\n    let u8 = lua_tolstring(L, idx);\n    return new DataView(u8.buffer, u8.byteOffset, u8.byteLength);\n};\n\nconst lua_rawlen = function(L, idx) {\n    let o = index2addr(L, idx);\n    switch (o.ttype()) {\n        case LUA_TSHRSTR:\n        case LUA_TLNGSTR:\n            return o.vslen();\n        case LUA_TUSERDATA:\n            return o.value.len;\n        case LUA_TTABLE:\n            return ltable.luaH_getn(o.value);\n        default:\n            return 0;\n    }\n};\n\nconst lua_tocfunction = function(L, idx) {\n    let o = index2addr(L, idx);\n    if (o.ttislcf() || o.ttisCclosure()) return o.value;\n    else return null;  /* not a C function */\n};\n\nconst lua_tointeger = function(L, idx) {\n    let n = lua_tointegerx(L, idx);\n    return n === false ? 0 : n;\n};\n\nconst lua_tointegerx = function(L, idx) {\n    return lvm.tointeger(index2addr(L, idx));\n};\n\nconst lua_tonumber = function(L, idx) {\n    let n = lua_tonumberx(L, idx);\n    return n === false ? 0 : n;\n};\n\nconst lua_tonumberx = function(L, idx) {\n    return lvm.tonumber(index2addr(L, idx));\n};\n\nconst lua_touserdata = function(L, idx) {\n    let o = index2addr(L, idx);\n    switch (o.ttnov()) {\n        case LUA_TUSERDATA:\n            return o.value.data;\n        case LUA_TLIGHTUSERDATA:\n            return o.value;\n        default: return null;\n    }\n};\n\nconst lua_tothread = function(L, idx) {\n    let o = index2addr(L, idx);\n    return o.ttisthread() ? o.value : null;\n};\n\nconst lua_topointer = function(L, idx) {\n    let o = index2addr(L, idx);\n    switch (o.ttype()) {\n        case LUA_TTABLE:\n        case LUA_TLCL:\n        case LUA_TCCL:\n        case LUA_TLCF:\n        case LUA_TTHREAD:\n        case LUA_TUSERDATA: /* note: this differs in behaviour to reference lua implementation */\n        case LUA_TLIGHTUSERDATA:\n            return o.value;\n        default:\n            return null;\n    }\n};\n\n\n/* A proxy is a function that the same lua value to the given lua state. */\n\n/* Having a weakmap of created proxies was only way I could think of to provide an 'isproxy' function */\nconst seen = new WeakMap();\n\n/* is the passed object a proxy? is it from the given state? (if passed) */\nconst lua_isproxy = function(p, L) {\n    let G = seen.get(p);\n    if (!G)\n        return false;\n    return (L === null) || (L.l_G === G);\n};\n\n/* Use 'create_proxy' helper function so that 'L' is not in scope */\nconst create_proxy = function(G, type, value) {\n    let proxy = function(L) {\n        api_check(L, L instanceof lstate.lua_State && G === L.l_G, \"must be from same global state\");\n        L.stack[L.top] = new TValue(type, value);\n        api_incr_top(L);\n    };\n    seen.set(proxy, G);\n    return proxy;\n};\n\nconst lua_toproxy = function(L, idx) {\n    let tv = index2addr(L, idx);\n    /* pass broken down tv incase it is an upvalue index */\n    return create_proxy(L.l_G, tv.type, tv.value);\n};\n\n\nconst lua_compare = function(L, index1, index2, op) {\n    let o1 = index2addr(L, index1);\n    let o2 = index2addr(L, index2);\n\n    let i = 0;\n\n    if (isvalid(o1) && isvalid(o2)) {\n        switch (op) {\n            case LUA_OPEQ: i = lvm.luaV_equalobj(L, o1, o2); break;\n            case LUA_OPLT: i = lvm.luaV_lessthan(L, o1, o2); break;\n            case LUA_OPLE: i = lvm.luaV_lessequal(L, o1, o2); break;\n            default: api_check(L, false, \"invalid option\");\n        }\n    }\n\n    return i;\n};\n\nconst lua_stringtonumber = function(L, s) {\n    let tv = new TValue();\n    let sz = lobject.luaO_str2num(s, tv);\n    if (sz !== 0) {\n        L.stack[L.top] = tv;\n        api_incr_top(L);\n    }\n    return sz;\n};\n\nconst f_call = function(L, ud) {\n    ldo.luaD_callnoyield(L, ud.funcOff, ud.nresults);\n};\n\nconst lua_type = function(L, idx) {\n    let o = index2addr(L, idx);\n    return isvalid(o) ?  o.ttnov() : LUA_TNONE;\n};\n\nconst lua_typename = function(L, t) {\n    api_check(L, LUA_TNONE <= t && t < LUA_NUMTAGS, \"invalid tag\");\n    return ltm.ttypename(t);\n};\n\nconst lua_iscfunction = function(L, idx) {\n    let o = index2addr(L, idx);\n    return o.ttislcf(o) || o.ttisCclosure();\n};\n\nconst lua_isnil = function(L, n) {\n    return lua_type(L, n) === LUA_TNIL;\n};\n\nconst lua_isboolean = function(L, n) {\n    return lua_type(L, n) === LUA_TBOOLEAN;\n};\n\nconst lua_isnone = function(L, n) {\n    return lua_type(L, n) === LUA_TNONE;\n};\n\nconst lua_isnoneornil = function(L, n) {\n    return lua_type(L, n) <= 0;\n};\n\nconst lua_istable = function(L, idx) {\n    return index2addr(L, idx).ttistable();\n};\n\nconst lua_isinteger = function(L, idx) {\n    return index2addr(L, idx).ttisinteger();\n};\n\nconst lua_isnumber = function(L, idx) {\n    return lvm.tonumber(index2addr(L, idx)) !== false;\n};\n\nconst lua_isstring = function(L, idx) {\n    let o = index2addr(L, idx);\n    return o.ttisstring() || lvm.cvt2str(o);\n};\n\nconst lua_isuserdata = function(L, idx) {\n    let o = index2addr(L, idx);\n    return o.ttisfulluserdata(o) || o.ttislightuserdata();\n};\n\nconst lua_isthread = function(L, idx) {\n    return lua_type(L, idx) === LUA_TTHREAD;\n};\n\nconst lua_isfunction = function(L, idx) {\n    return lua_type(L, idx) === LUA_TFUNCTION;\n};\n\nconst lua_islightuserdata = function(L, idx) {\n    return lua_type(L, idx) === LUA_TLIGHTUSERDATA;\n};\n\nconst lua_rawequal = function(L, index1, index2) {\n    let o1 = index2addr(L, index1);\n    let o2 = index2addr(L, index2);\n    return isvalid(o1) && isvalid(o2) ? lvm.luaV_equalobj(null, o1, o2) : 0;\n};\n\nconst lua_arith = function(L, op) {\n    if (op !== LUA_OPUNM && op !== LUA_OPBNOT)\n        api_checknelems(L, 2);  /* all other operations expect two operands */\n    else {  /* for unary operations, add fake 2nd operand */\n        api_checknelems(L, 1);\n        lobject.pushobj2s(L, L.stack[L.top-1]);\n        api_check(L, L.top <= L.ci.top, \"stack overflow\");\n    }\n    /* first operand at top - 2, second at top - 1; result go to top - 2 */\n    lobject.luaO_arith(L, op, L.stack[L.top - 2], L.stack[L.top - 1], L.stack[L.top - 2]);\n    delete L.stack[--L.top];  /* remove second operand */\n};\n\n/*\n** 'load' and 'call' functions (run Lua code)\n*/\n\nconst default_chunkname = to_luastring(\"?\");\nconst lua_load = function(L, reader, data, chunkname, mode) {\n    if (!chunkname) chunkname = default_chunkname;\n    else chunkname = from_userstring(chunkname);\n    if (mode !== null) mode = from_userstring(mode);\n    let z = new ZIO(L, reader, data);\n    let status = ldo.luaD_protectedparser(L, z, chunkname, mode);\n    if (status === LUA_OK) {  /* no errors? */\n        let f = L.stack[L.top - 1].value; /* get newly created function */\n        if (f.nupvalues >= 1) {  /* does it have an upvalue? */\n            /* get global table from registry */\n            let gt = ltable.luaH_getint(L.l_G.l_registry.value, LUA_RIDX_GLOBALS);\n            /* set global table as 1st upvalue of 'f' (may be LUA_ENV) */\n            f.upvals[0].setfrom(gt);\n        }\n    }\n    return status;\n};\n\nconst lua_dump = function(L, writer, data, strip) {\n    api_checknelems(L, 1);\n    let o = L.stack[L.top -1];\n    if (o.ttisLclosure())\n        return luaU_dump(L, o.value.p, writer, data, strip);\n    return 1;\n};\n\nconst lua_status = function(L) {\n    return L.status;\n};\n\nconst lua_setuservalue = function(L, idx) {\n    api_checknelems(L, 1);\n    let o = index2addr(L, idx);\n    api_check(L, o.ttisfulluserdata(), \"full userdata expected\");\n    o.value.uservalue.setfrom(L.stack[L.top - 1]);\n    delete L.stack[--L.top];\n};\n\nconst checkresults = function(L,na,nr) {\n    api_check(L, nr === LUA_MULTRET || (L.ci.top - L.top >= (nr) - (na)),\n        \"results from function overflow current stack size\");\n};\n\nconst lua_callk = function(L, nargs, nresults, ctx, k) {\n    api_check(L, k === null || !(L.ci.callstatus & lstate.CIST_LUA), \"cannot use continuations inside hooks\");\n    api_checknelems(L, nargs + 1);\n    api_check(L, L.status === LUA_OK, \"cannot do calls on non-normal thread\");\n    checkresults(L, nargs, nresults);\n    let func = L.top - (nargs + 1);\n    if (k !== null && L.nny === 0) { /* need to prepare continuation? */\n        L.ci.c_k = k;\n        L.ci.c_ctx = ctx;\n        ldo.luaD_call(L, func, nresults);\n    } else { /* no continuation or no yieldable */\n        ldo.luaD_callnoyield(L, func, nresults);\n    }\n\n    if (nresults === LUA_MULTRET && L.ci.top < L.top)\n        L.ci.top = L.top;\n};\n\nconst lua_call = function(L, n, r) {\n    lua_callk(L, n, r, 0, null);\n};\n\nconst lua_pcallk = function(L, nargs, nresults, errfunc, ctx, k) {\n    api_check(L, k === null || !(L.ci.callstatus & lstate.CIST_LUA), \"cannot use continuations inside hooks\");\n    api_checknelems(L, nargs + 1);\n    api_check(L, L.status === LUA_OK, \"cannot do calls on non-normal thread\");\n    checkresults(L, nargs, nresults);\n    let status;\n    let func;\n    if (errfunc === 0)\n        func = 0;\n    else {\n        func = index2addr_(L, errfunc);\n    }\n    let funcOff = L.top - (nargs + 1); /* function to be called */\n    if (k === null || L.nny > 0) { /* no continuation or no yieldable? */\n        let c = {\n            funcOff: funcOff,\n            nresults: nresults /* do a 'conventional' protected call */\n        };\n        status = ldo.luaD_pcall(L, f_call, c, funcOff, func);\n    } else { /* prepare continuation (call is already protected by 'resume') */\n        let ci = L.ci;\n        ci.c_k = k;  /* prepare continuation (call is already protected by 'resume') */\n        ci.c_ctx = ctx;  /* prepare continuation (call is already protected by 'resume') */\n        /* save information for error recovery */\n        ci.extra = funcOff;\n        ci.c_old_errfunc = L.errfunc;\n        L.errfunc = func;\n        ci.callstatus &= ~lstate.CIST_OAH | L.allowhook;\n        ci.callstatus |= lstate.CIST_YPCALL;  /* function can do error recovery */\n        ldo.luaD_call(L, funcOff, nresults);  /* do the call */\n        ci.callstatus &= ~lstate.CIST_YPCALL;\n        L.errfunc = ci.c_old_errfunc;\n        status = LUA_OK;\n    }\n\n    if (nresults === LUA_MULTRET && L.ci.top < L.top)\n        L.ci.top = L.top;\n\n    return status;\n};\n\nconst lua_pcall = function(L, n, r, f) {\n    return lua_pcallk(L, n, r, f, 0, null);\n};\n\n/*\n** miscellaneous functions\n*/\n\nconst lua_error = function(L) {\n    api_checknelems(L, 1);\n    ldebug.luaG_errormsg(L);\n};\n\nconst lua_next = function(L, idx) {\n    let t = index2addr(L, idx);\n    api_check(L, t.ttistable(), \"table expected\");\n    L.stack[L.top] = new TValue();\n    let more = ltable.luaH_next(L, t.value, L.top - 1);\n    if (more) {\n        api_incr_top(L);\n        return 1;\n    } else {\n        delete L.stack[L.top];\n        delete L.stack[--L.top];\n        return 0;\n    }\n};\n\nconst lua_concat = function(L, n) {\n    api_checknelems(L, n);\n    if (n >= 2)\n        lvm.luaV_concat(L, n);\n    else if (n === 0) {\n        lobject.pushsvalue2s(L, luaS_bless(L, to_luastring(\"\", true)));\n        api_check(L, L.top <= L.ci.top, \"stack overflow\");\n    }\n};\n\nconst lua_len = function(L, idx) {\n    let t = index2addr(L, idx);\n    let tv = new TValue();\n    lvm.luaV_objlen(L, tv, t);\n    L.stack[L.top] = tv;\n    api_incr_top(L);\n};\n\nconst getupvalref = function(L, fidx, n) {\n    let fi = index2addr(L, fidx);\n    api_check(L, fi.ttisLclosure(), \"Lua function expected\");\n    let f = fi.value;\n    fengari_argcheckinteger(n);\n    api_check(L, 1 <= n && n <= f.p.upvalues.length, \"invalid upvalue index\");\n    return {\n        f: f,\n        i: n - 1\n    };\n};\n\nconst lua_upvalueid = function(L, fidx, n) {\n    let fi = index2addr(L, fidx);\n    switch (fi.ttype()) {\n        case LUA_TLCL: {  /* lua closure */\n            let ref = getupvalref(L, fidx, n);\n            return ref.f.upvals[ref.i];\n        }\n        case LUA_TCCL: {  /* C closure */\n            let f = fi.value;\n            api_check(L, (n|0) === n && n > 0 && n <= f.nupvalues, \"invalid upvalue index\");\n            return f.upvalue[n - 1];\n        }\n        default: {\n            api_check(L, false, \"closure expected\");\n            return null;\n        }\n    }\n};\n\nconst lua_upvaluejoin = function(L, fidx1, n1, fidx2, n2) {\n    let ref1 = getupvalref(L, fidx1, n1);\n    let ref2 = getupvalref(L, fidx2, n2);\n    let up2 = ref2.f.upvals[ref2.i];\n    ref1.f.upvals[ref1.i] = up2;\n};\n\n// This functions are only there for compatibility purposes\nconst lua_gc = function () {};\n\nconst lua_getallocf = function () {\n    console.warn(\"lua_getallocf is not available\");\n    return 0;\n};\n\nconst lua_setallocf = function () {\n    console.warn(\"lua_setallocf is not available\");\n    return 0;\n};\n\nconst lua_getextraspace = function () {\n    console.warn(\"lua_getextraspace is not available\");\n    return 0;\n};\n\nmodule.exports.api_incr_top          = api_incr_top;\nmodule.exports.api_checknelems       = api_checknelems;\nmodule.exports.lua_absindex          = lua_absindex;\nmodule.exports.lua_arith             = lua_arith;\nmodule.exports.lua_atpanic           = lua_atpanic;\nmodule.exports.lua_atnativeerror     = lua_atnativeerror;\nmodule.exports.lua_call              = lua_call;\nmodule.exports.lua_callk             = lua_callk;\nmodule.exports.lua_checkstack        = lua_checkstack;\nmodule.exports.lua_compare           = lua_compare;\nmodule.exports.lua_concat            = lua_concat;\nmodule.exports.lua_copy              = lua_copy;\nmodule.exports.lua_createtable       = lua_createtable;\nmodule.exports.lua_dump              = lua_dump;\nmodule.exports.lua_error             = lua_error;\nmodule.exports.lua_gc                = lua_gc;\nmodule.exports.lua_getallocf         = lua_getallocf;\nmodule.exports.lua_getextraspace     = lua_getextraspace;\nmodule.exports.lua_getfield          = lua_getfield;\nmodule.exports.lua_getglobal         = lua_getglobal;\nmodule.exports.lua_geti              = lua_geti;\nmodule.exports.lua_getmetatable      = lua_getmetatable;\nmodule.exports.lua_gettable          = lua_gettable;\nmodule.exports.lua_gettop            = lua_gettop;\nmodule.exports.lua_getupvalue        = lua_getupvalue;\nmodule.exports.lua_getuservalue      = lua_getuservalue;\nmodule.exports.lua_insert            = lua_insert;\nmodule.exports.lua_isboolean         = lua_isboolean;\nmodule.exports.lua_iscfunction       = lua_iscfunction;\nmodule.exports.lua_isfunction        = lua_isfunction;\nmodule.exports.lua_isinteger         = lua_isinteger;\nmodule.exports.lua_islightuserdata   = lua_islightuserdata;\nmodule.exports.lua_isnil             = lua_isnil;\nmodule.exports.lua_isnone            = lua_isnone;\nmodule.exports.lua_isnoneornil       = lua_isnoneornil;\nmodule.exports.lua_isnumber          = lua_isnumber;\nmodule.exports.lua_isproxy           = lua_isproxy;\nmodule.exports.lua_isstring          = lua_isstring;\nmodule.exports.lua_istable           = lua_istable;\nmodule.exports.lua_isthread          = lua_isthread;\nmodule.exports.lua_isuserdata        = lua_isuserdata;\nmodule.exports.lua_len               = lua_len;\nmodule.exports.lua_load              = lua_load;\nmodule.exports.lua_newtable          = lua_newtable;\nmodule.exports.lua_newuserdata       = lua_newuserdata;\nmodule.exports.lua_next              = lua_next;\nmodule.exports.lua_pcall             = lua_pcall;\nmodule.exports.lua_pcallk            = lua_pcallk;\nmodule.exports.lua_pop               = lua_pop;\nmodule.exports.lua_pushboolean       = lua_pushboolean;\nmodule.exports.lua_pushcclosure      = lua_pushcclosure;\nmodule.exports.lua_pushcfunction     = lua_pushcfunction;\nmodule.exports.lua_pushfstring       = lua_pushfstring;\nmodule.exports.lua_pushglobaltable   = lua_pushglobaltable;\nmodule.exports.lua_pushinteger       = lua_pushinteger;\nmodule.exports.lua_pushjsclosure     = lua_pushjsclosure;\nmodule.exports.lua_pushjsfunction    = lua_pushjsfunction;\nmodule.exports.lua_pushlightuserdata = lua_pushlightuserdata;\nmodule.exports.lua_pushliteral       = lua_pushliteral;\nmodule.exports.lua_pushlstring       = lua_pushlstring;\nmodule.exports.lua_pushnil           = lua_pushnil;\nmodule.exports.lua_pushnumber        = lua_pushnumber;\nmodule.exports.lua_pushstring        = lua_pushstring;\nmodule.exports.lua_pushthread        = lua_pushthread;\nmodule.exports.lua_pushvalue         = lua_pushvalue;\nmodule.exports.lua_pushvfstring      = lua_pushvfstring;\nmodule.exports.lua_rawequal          = lua_rawequal;\nmodule.exports.lua_rawget            = lua_rawget;\nmodule.exports.lua_rawgeti           = lua_rawgeti;\nmodule.exports.lua_rawgetp           = lua_rawgetp;\nmodule.exports.lua_rawlen            = lua_rawlen;\nmodule.exports.lua_rawset            = lua_rawset;\nmodule.exports.lua_rawseti           = lua_rawseti;\nmodule.exports.lua_rawsetp           = lua_rawsetp;\nmodule.exports.lua_register          = lua_register;\nmodule.exports.lua_remove            = lua_remove;\nmodule.exports.lua_replace           = lua_replace;\nmodule.exports.lua_rotate            = lua_rotate;\nmodule.exports.lua_setallocf         = lua_setallocf;\nmodule.exports.lua_setfield          = lua_setfield;\nmodule.exports.lua_setglobal         = lua_setglobal;\nmodule.exports.lua_seti              = lua_seti;\nmodule.exports.lua_setmetatable      = lua_setmetatable;\nmodule.exports.lua_settable          = lua_settable;\nmodule.exports.lua_settop            = lua_settop;\nmodule.exports.lua_setupvalue        = lua_setupvalue;\nmodule.exports.lua_setuservalue      = lua_setuservalue;\nmodule.exports.lua_status            = lua_status;\nmodule.exports.lua_stringtonumber    = lua_stringtonumber;\nmodule.exports.lua_toboolean         = lua_toboolean;\nmodule.exports.lua_tocfunction       = lua_tocfunction;\nmodule.exports.lua_todataview        = lua_todataview;\nmodule.exports.lua_tointeger         = lua_tointeger;\nmodule.exports.lua_tointegerx        = lua_tointegerx;\nmodule.exports.lua_tojsstring        = lua_tojsstring;\nmodule.exports.lua_tolstring         = lua_tolstring;\nmodule.exports.lua_tonumber          = lua_tonumber;\nmodule.exports.lua_tonumberx         = lua_tonumberx;\nmodule.exports.lua_topointer         = lua_topointer;\nmodule.exports.lua_toproxy           = lua_toproxy;\nmodule.exports.lua_tostring          = lua_tostring;\nmodule.exports.lua_tothread          = lua_tothread;\nmodule.exports.lua_touserdata        = lua_touserdata;\nmodule.exports.lua_type              = lua_type;\nmodule.exports.lua_typename          = lua_typename;\nmodule.exports.lua_upvalueid         = lua_upvalueid;\nmodule.exports.lua_upvaluejoin       = lua_upvaluejoin;\nmodule.exports.lua_version           = lua_version;\nmodule.exports.lua_xmove             = lua_xmove;\n","\"use strict\";\n\nconst {\n    LUAL_BUFFERSIZE\n} = require('./luaconf.js');\nconst {\n    LUA_ERRERR,\n    LUA_MULTRET,\n    LUA_REGISTRYINDEX,\n    LUA_SIGNATURE,\n    LUA_TBOOLEAN,\n    LUA_TLIGHTUSERDATA,\n    LUA_TNIL,\n    LUA_TNONE,\n    LUA_TNUMBER,\n    LUA_TSTRING,\n    LUA_TTABLE,\n    LUA_VERSION_NUM,\n    lua_Debug,\n    lua_absindex,\n    lua_atpanic,\n    lua_call,\n    lua_checkstack,\n    lua_concat,\n    lua_copy,\n    lua_createtable,\n    lua_error,\n    lua_getfield,\n    lua_getinfo,\n    lua_getmetatable,\n    lua_getstack,\n    lua_gettop,\n    lua_insert,\n    lua_isinteger,\n    lua_isnil,\n    lua_isnumber,\n    lua_isstring,\n    lua_istable,\n    lua_len,\n    lua_load,\n    lua_newstate,\n    lua_newtable,\n    lua_next,\n    lua_pcall,\n    lua_pop,\n    lua_pushboolean,\n    lua_pushcclosure,\n    lua_pushcfunction,\n    lua_pushfstring,\n    lua_pushinteger,\n    lua_pushliteral,\n    lua_pushlstring,\n    lua_pushnil,\n    lua_pushstring,\n    lua_pushvalue,\n    lua_pushvfstring,\n    lua_rawequal,\n    lua_rawget,\n    lua_rawgeti,\n    lua_rawlen,\n    lua_rawseti,\n    lua_remove,\n    lua_setfield,\n    lua_setglobal,\n    lua_setmetatable,\n    lua_settop,\n    lua_toboolean,\n    lua_tointeger,\n    lua_tointegerx,\n    lua_tojsstring,\n    lua_tolstring,\n    lua_tonumber,\n    lua_tonumberx,\n    lua_topointer,\n    lua_tostring,\n    lua_touserdata,\n    lua_type,\n    lua_typename,\n    lua_version\n} = require('./lua.js');\nconst {\n    from_userstring,\n    luastring_eq,\n    to_luastring,\n    to_uristring\n} = require(\"./fengaricore.js\");\n\n/* extra error code for 'luaL_loadfilex' */\nconst LUA_ERRFILE = LUA_ERRERR+1;\n\n/* key, in the registry, for table of loaded modules */\nconst LUA_LOADED_TABLE = to_luastring(\"_LOADED\");\n\n/* key, in the registry, for table of preloaded loaders */\nconst LUA_PRELOAD_TABLE = to_luastring(\"_PRELOAD\");\n\nconst LUA_FILEHANDLE = to_luastring(\"FILE*\");\n\nconst LUAL_NUMSIZES  = 4*16 + 8;\n\nconst __name = to_luastring(\"__name\");\nconst __tostring = to_luastring(\"__tostring\");\n\nconst empty = new Uint8Array(0);\n\nclass luaL_Buffer {\n    constructor() {\n        this.L = null;\n        this.b = empty;\n        this.n = 0;\n    }\n}\n\nconst LEVELS1 = 10;  /* size of the first part of the stack */\nconst LEVELS2 = 11;  /* size of the second part of the stack */\n\n/*\n** search for 'objidx' in table at index -1.\n** return 1 + string at top if find a good name.\n*/\nconst findfield = function(L, objidx, level) {\n    if (level === 0 || !lua_istable(L, -1))\n        return 0;  /* not found */\n\n    lua_pushnil(L);  /* start 'next' loop */\n\n    while (lua_next(L, -2)) {  /* for each pair in table */\n        if (lua_type(L, -2) === LUA_TSTRING) {  /* ignore non-string keys */\n            if (lua_rawequal(L, objidx, -1)) {  /* found object? */\n                lua_pop(L, 1);  /* remove value (but keep name) */\n                return 1;\n            } else if (findfield(L, objidx, level - 1)) {  /* try recursively */\n                lua_remove(L, -2);  /* remove table (but keep name) */\n                lua_pushliteral(L, \".\");\n                lua_insert(L, -2);  /* place '.' between the two names */\n                lua_concat(L, 3);\n                return 1;\n            }\n        }\n        lua_pop(L, 1);  /* remove value */\n    }\n\n    return 0;  /* not found */\n};\n\n/*\n** Search for a name for a function in all loaded modules\n*/\nconst pushglobalfuncname = function(L, ar) {\n    let top = lua_gettop(L);\n    lua_getinfo(L, to_luastring(\"f\"), ar);  /* push function */\n    lua_getfield(L, LUA_REGISTRYINDEX, LUA_LOADED_TABLE);\n    if (findfield(L, top + 1, 2)) {\n        let name = lua_tostring(L, -1);\n        if (name[0] === 95 /* '_'.charCodeAt(0) */ &&\n            name[1] === 71 /* 'G'.charCodeAt(0) */ &&\n            name[2] === 46 /* '.'.charCodeAt(0) */\n        ) {  /* name start with '_G.'? */\n            lua_pushstring(L, name.subarray(3));  /* push name without prefix */\n            lua_remove(L, -2);  /* remove original name */\n        }\n        lua_copy(L, -1, top + 1);  /* move name to proper place */\n        lua_pop(L, 2);  /* remove pushed values */\n        return 1;\n    } else {\n        lua_settop(L, top);  /* remove function and global table */\n        return 0;\n    }\n};\n\nconst pushfuncname = function(L, ar) {\n    if (pushglobalfuncname(L, ar)) {  /* try first a global name */\n        lua_pushfstring(L, to_luastring(\"function '%s'\"), lua_tostring(L, -1));\n        lua_remove(L, -2);  /* remove name */\n    }\n    else if (ar.namewhat.length !== 0)  /* is there a name from code? */\n        lua_pushfstring(L, to_luastring(\"%s '%s'\"), ar.namewhat, ar.name);  /* use it */\n    else if (ar.what && ar.what[0] === 109 /* 'm'.charCodeAt(0) */)  /* main? */\n        lua_pushliteral(L, \"main chunk\");\n    else if (ar.what && ar.what[0] === 76 /* 'L'.charCodeAt(0) */)  /* for Lua functions, use <file:line> */\n        lua_pushfstring(L, to_luastring(\"function <%s:%d>\"), ar.short_src, ar.linedefined);\n    else  /* nothing left... */\n        lua_pushliteral(L, \"?\");\n};\n\nconst lastlevel = function(L) {\n    let ar = new lua_Debug();\n    let li = 1;\n    let le = 1;\n    /* find an upper bound */\n    while (lua_getstack(L, le, ar)) { li = le; le *= 2; }\n    /* do a binary search */\n    while (li < le) {\n        let m = Math.floor((li + le)/2);\n        if (lua_getstack(L, m, ar)) li = m + 1;\n        else le = m;\n    }\n    return le - 1;\n};\n\nconst luaL_traceback = function(L, L1, msg, level) {\n    let ar = new lua_Debug();\n    let top = lua_gettop(L);\n    let last = lastlevel(L1);\n    let n1 = last - level > LEVELS1 + LEVELS2 ? LEVELS1 : -1;\n    if (msg)\n        lua_pushfstring(L, to_luastring(\"%s\\n\"), msg);\n    luaL_checkstack(L, 10, null);\n    lua_pushliteral(L, \"stack traceback:\");\n    while (lua_getstack(L1, level++, ar)) {\n        if (n1-- === 0) {  /* too many levels? */\n            lua_pushliteral(L, \"\\n\\t...\");  /* add a '...' */\n            level = last - LEVELS2 + 1;  /* and skip to last ones */\n        } else {\n            lua_getinfo(L1, to_luastring(\"Slnt\", true), ar);\n            lua_pushfstring(L, to_luastring(\"\\n\\t%s:\"), ar.short_src);\n            if (ar.currentline > 0)\n                lua_pushliteral(L, `${ar.currentline}:`);\n            lua_pushliteral(L, \" in \");\n            pushfuncname(L, ar);\n            if (ar.istailcall)\n                lua_pushliteral(L, \"\\n\\t(...tail calls..)\");\n            lua_concat(L, lua_gettop(L) - top);\n        }\n    }\n    lua_concat(L, lua_gettop(L) - top);\n};\n\nconst panic = function(L) {\n    let msg = \"PANIC: unprotected error in call to Lua API (\" + lua_tojsstring(L, -1) + \")\";\n    throw new Error(msg);\n};\n\nconst luaL_argerror = function(L, arg, extramsg) {\n    let ar = new lua_Debug();\n\n    if (!lua_getstack(L, 0, ar))  /* no stack frame? */\n        return luaL_error(L, to_luastring(\"bad argument #%d (%s)\"), arg, extramsg);\n\n    lua_getinfo(L, to_luastring(\"n\"), ar);\n\n    if (luastring_eq(ar.namewhat, to_luastring(\"method\"))) {\n        arg--;  /* do not count 'self' */\n        if (arg === 0)  /* error is in the self argument itself? */\n            return luaL_error(L, to_luastring(\"calling '%s' on bad self (%s)\"), ar.name, extramsg);\n    }\n\n    if (ar.name === null)\n        ar.name = pushglobalfuncname(L, ar) ? lua_tostring(L, -1) : to_luastring(\"?\");\n\n    return luaL_error(L, to_luastring(\"bad argument #%d to '%s' (%s)\"), arg, ar.name, extramsg);\n};\n\nconst typeerror = function(L, arg, tname) {\n    let typearg;\n    if (luaL_getmetafield(L, arg, __name) === LUA_TSTRING)\n        typearg = lua_tostring(L, -1);\n    else if (lua_type(L, arg) === LUA_TLIGHTUSERDATA)\n        typearg = to_luastring(\"light userdata\", true);\n    else\n        typearg = luaL_typename(L, arg);\n\n    let msg = lua_pushfstring(L, to_luastring(\"%s expected, got %s\"), tname, typearg);\n    return luaL_argerror(L, arg, msg);\n};\n\nconst luaL_where = function(L, level) {\n    let ar = new lua_Debug();\n    if (lua_getstack(L, level, ar)) {\n        lua_getinfo(L, to_luastring(\"Sl\", true), ar);\n        if (ar.currentline > 0) {\n            lua_pushfstring(L, to_luastring(\"%s:%d: \"), ar.short_src, ar.currentline);\n            return;\n        }\n    }\n    lua_pushstring(L, to_luastring(\"\"));\n};\n\nconst luaL_error = function(L, fmt, ...argp) {\n    luaL_where(L, 1);\n    lua_pushvfstring(L, fmt, argp);\n    lua_concat(L, 2);\n    return lua_error(L);\n};\n\n/* Unlike normal lua, we pass in an error object */\nconst luaL_fileresult = function(L, stat, fname, e) {\n    if (stat) {\n        lua_pushboolean(L, 1);\n        return 1;\n    } else {\n        lua_pushnil(L);\n        let message, errno;\n        if (e) {\n            message = e.message;\n            errno = -e.errno;\n        } else {\n            message = \"Success\"; /* what strerror(0) returns */\n            errno = 0;\n        }\n        if (fname)\n            lua_pushfstring(L, to_luastring(\"%s: %s\"), fname, to_luastring(message));\n        else\n            lua_pushstring(L, to_luastring(message));\n        lua_pushinteger(L, errno);\n        return 3;\n    }\n};\n\n/* Unlike normal lua, we pass in an error object */\nconst luaL_execresult = function(L, e) {\n    let what, stat;\n    if (e === null) {\n        lua_pushboolean(L, 1);\n        lua_pushliteral(L, \"exit\");\n        lua_pushinteger(L, 0);\n        return 3;\n    } else if (e.status) {\n        what = \"exit\";\n        stat = e.status;\n    } else if (e.signal) {\n        what = \"signal\";\n        stat = e.signal;\n    } else {\n        /* XXX: node seems to have e.errno as a string instead of a number */\n        return luaL_fileresult(L, 0, null, e);\n    }\n    lua_pushnil(L);\n    lua_pushliteral(L, what);\n    lua_pushinteger(L, stat);\n    return 3;\n};\n\nconst luaL_getmetatable = function(L, n) {\n    return lua_getfield(L, LUA_REGISTRYINDEX, n);\n};\n\nconst luaL_newmetatable = function(L, tname) {\n    if (luaL_getmetatable(L, tname) !== LUA_TNIL)  /* name already in use? */\n        return 0;  /* leave previous value on top, but return 0 */\n    lua_pop(L, 1);\n    lua_createtable(L, 0, 2);  /* create metatable */\n    lua_pushstring(L, tname);\n    lua_setfield(L, -2, __name);  /* metatable.__name = tname */\n    lua_pushvalue(L, -1);\n    lua_setfield(L, LUA_REGISTRYINDEX, tname);  /* registry.name = metatable */\n    return 1;\n\n};\n\nconst luaL_setmetatable = function(L, tname) {\n    luaL_getmetatable(L, tname);\n    lua_setmetatable(L, -2);\n};\n\nconst luaL_testudata = function(L, ud, tname) {\n    let p = lua_touserdata(L, ud);\n    if (p !== null) {  /* value is a userdata? */\n        if (lua_getmetatable(L, ud)) {  /* does it have a metatable? */\n            luaL_getmetatable(L, tname);  /* get correct metatable */\n            if (!lua_rawequal(L, -1, -2))  /* not the same? */\n                p = null;  /* value is a userdata with wrong metatable */\n            lua_pop(L, 2);  /* remove both metatables */\n            return p;\n        }\n    }\n    return null;  /* value is not a userdata with a metatable */\n};\n\nconst luaL_checkudata = function(L, ud, tname) {\n    let p = luaL_testudata(L, ud, tname);\n    if (p === null) typeerror(L, ud, tname);\n    return p;\n};\n\nconst luaL_checkoption = function(L, arg, def, lst) {\n    let name = def !== null ? luaL_optstring(L, arg, def) : luaL_checkstring(L, arg);\n    for (let i = 0; lst[i]; i++)\n        if (luastring_eq(lst[i], name))\n            return i;\n    return luaL_argerror(L, arg, lua_pushfstring(L, to_luastring(\"invalid option '%s'\"), name));\n};\n\nconst tag_error = function(L, arg, tag) {\n    typeerror(L, arg, lua_typename(L, tag));\n};\n\nconst luaL_newstate = function() {\n    let L = lua_newstate();\n    if (L) lua_atpanic(L, panic);\n    return L;\n};\n\n\nconst luaL_typename = function(L, i) {\n    return lua_typename(L, lua_type(L, i));\n};\n\nconst luaL_argcheck = function(L, cond, arg, extramsg) {\n    if (!cond) luaL_argerror(L, arg, extramsg);\n};\n\nconst luaL_checkany = function(L, arg) {\n    if (lua_type(L, arg) === LUA_TNONE)\n        luaL_argerror(L, arg, to_luastring(\"value expected\", true));\n};\n\nconst luaL_checktype = function(L, arg, t) {\n    if (lua_type(L, arg) !== t)\n        tag_error(L, arg, t);\n};\n\nconst luaL_checklstring = function(L, arg) {\n    let s = lua_tolstring(L, arg);\n    if (s === null || s === undefined) tag_error(L, arg, LUA_TSTRING);\n    return s;\n};\n\nconst luaL_checkstring = luaL_checklstring;\n\nconst luaL_optlstring = function(L, arg, def) {\n    if (lua_type(L, arg) <= 0) {\n        return def === null ? null : from_userstring(def);\n    } else return luaL_checklstring(L, arg);\n};\n\nconst luaL_optstring = luaL_optlstring;\n\nconst interror = function(L, arg) {\n    if (lua_isnumber(L, arg))\n        luaL_argerror(L, arg, to_luastring(\"number has no integer representation\", true));\n    else\n        tag_error(L, arg, LUA_TNUMBER);\n};\n\nconst luaL_checknumber = function(L, arg) {\n    let d = lua_tonumberx(L, arg);\n    if (d === false)\n        tag_error(L, arg, LUA_TNUMBER);\n    return d;\n};\n\nconst luaL_optnumber = function(L, arg, def) {\n    return luaL_opt(L, luaL_checknumber, arg, def);\n};\n\nconst luaL_checkinteger = function(L, arg) {\n    let d = lua_tointegerx(L, arg);\n    if (d === false)\n        interror(L, arg);\n    return d;\n};\n\nconst luaL_optinteger = function(L, arg, def) {\n    return luaL_opt(L, luaL_checkinteger, arg, def);\n};\n\nconst luaL_prepbuffsize = function(B, sz) {\n    let newend = B.n + sz;\n    if (B.b.length < newend) {\n        let newsize = Math.max(B.b.length * 2, newend);  /* double buffer size */\n        let newbuff = new Uint8Array(newsize);  /* create larger buffer */\n        newbuff.set(B.b);  /* copy original content */\n        B.b = newbuff;\n    }\n    return B.b.subarray(B.n, newend);\n};\n\nconst luaL_buffinit = function(L, B) {\n    B.L = L;\n    B.b = empty;\n};\n\nconst luaL_buffinitsize = function(L, B, sz) {\n    luaL_buffinit(L, B);\n    return luaL_prepbuffsize(B, sz);\n};\n\nconst luaL_prepbuffer = function(B) {\n    return luaL_prepbuffsize(B, LUAL_BUFFERSIZE);\n};\n\nconst luaL_addlstring = function(B, s, l) {\n    if (l > 0) {\n        s = from_userstring(s);\n        let b = luaL_prepbuffsize(B, l);\n        b.set(s.subarray(0, l));\n        luaL_addsize(B, l);\n    }\n};\n\nconst luaL_addstring = function(B, s) {\n    s = from_userstring(s);\n    luaL_addlstring(B, s, s.length);\n};\n\nconst luaL_pushresult = function(B) {\n    lua_pushlstring(B.L, B.b, B.n);\n    /* delete old buffer */\n    B.n = 0;\n    B.b = empty;\n};\n\nconst luaL_addchar = function(B, c) {\n    luaL_prepbuffsize(B, 1);\n    B.b[B.n++] = c;\n};\n\nconst luaL_addsize = function(B, s) {\n    B.n += s;\n};\n\nconst luaL_pushresultsize = function(B, sz) {\n    luaL_addsize(B, sz);\n    luaL_pushresult(B);\n};\n\nconst luaL_addvalue = function(B) {\n    let L = B.L;\n    let s = lua_tostring(L, -1);\n    luaL_addlstring(B, s, s.length);\n    lua_pop(L, 1);  /* remove value */\n};\n\nconst luaL_opt = function(L, f, n, d) {\n    return lua_type(L, n) <= 0 ? d : f(L, n);\n};\n\nconst getS = function(L, ud) {\n    let s = ud.string;\n    ud.string = null;\n    return s;\n};\n\nconst luaL_loadbufferx = function(L, buff, size, name, mode) {\n    return lua_load(L, getS, {string: buff}, name, mode);\n};\n\nconst luaL_loadbuffer = function(L, s, sz, n) {\n    return luaL_loadbufferx(L, s, sz, n, null);\n};\n\nconst luaL_loadstring = function(L, s) {\n    return luaL_loadbuffer(L, s, s.length, s);\n};\n\nconst luaL_dostring = function(L, s) {\n    return (luaL_loadstring(L, s) || lua_pcall(L, 0, LUA_MULTRET, 0));\n};\n\nconst luaL_getmetafield = function(L, obj, event) {\n    if (!lua_getmetatable(L, obj))  /* no metatable? */\n        return LUA_TNIL;\n    else {\n        lua_pushstring(L, event);\n        let tt = lua_rawget(L, -2);\n        if (tt === LUA_TNIL)  /* is metafield nil? */\n            lua_pop(L, 2);  /* remove metatable and metafield */\n        else\n            lua_remove(L, -2);  /* remove only metatable */\n        return tt;  /* return metafield type */\n    }\n};\n\nconst luaL_callmeta = function(L, obj, event) {\n    obj = lua_absindex(L, obj);\n    if (luaL_getmetafield(L, obj, event) === LUA_TNIL)\n        return false;\n\n    lua_pushvalue(L, obj);\n    lua_call(L, 1, 1);\n\n    return true;\n};\n\nconst luaL_len = function(L, idx) {\n    lua_len(L, idx);\n    let l = lua_tointegerx(L, -1);\n    if (l === false)\n        luaL_error(L, to_luastring(\"object length is not an integer\", true));\n    lua_pop(L, 1);  /* remove object */\n    return l;\n};\n\nconst p_I = to_luastring(\"%I\");\nconst p_f = to_luastring(\"%f\");\nconst luaL_tolstring = function(L, idx) {\n    if (luaL_callmeta(L, idx, __tostring)) {\n        if (!lua_isstring(L, -1))\n            luaL_error(L, to_luastring(\"'__tostring' must return a string\"));\n    } else {\n        let t = lua_type(L, idx);\n        switch(t) {\n            case LUA_TNUMBER: {\n                if (lua_isinteger(L, idx))\n                    lua_pushfstring(L, p_I, lua_tointeger(L, idx));\n                else\n                    lua_pushfstring(L, p_f, lua_tonumber(L, idx));\n                break;\n            }\n            case LUA_TSTRING:\n                lua_pushvalue(L, idx);\n                break;\n            case LUA_TBOOLEAN:\n                lua_pushliteral(L, (lua_toboolean(L, idx) ? \"true\" : \"false\"));\n                break;\n            case LUA_TNIL:\n                lua_pushliteral(L, \"nil\");\n                break;\n            default: {\n                let tt = luaL_getmetafield(L, idx, __name);\n                let kind = tt === LUA_TSTRING ? lua_tostring(L, -1) : luaL_typename(L, idx);\n                lua_pushfstring(L, to_luastring(\"%s: %p\"), kind, lua_topointer(L, idx));\n                if (tt !== LUA_TNIL)\n                    lua_remove(L, -2);\n                break;\n            }\n        }\n    }\n\n    return lua_tolstring(L, -1);\n};\n\n/*\n** Stripped-down 'require': After checking \"loaded\" table, calls 'openf'\n** to open a module, registers the result in 'package.loaded' table and,\n** if 'glb' is true, also registers the result in the global table.\n** Leaves resulting module on the top.\n*/\nconst luaL_requiref = function(L, modname, openf, glb) {\n    luaL_getsubtable(L, LUA_REGISTRYINDEX, LUA_LOADED_TABLE);\n    lua_getfield(L, -1, modname); /* LOADED[modname] */\n    if (!lua_toboolean(L, -1)) {  /* package not already loaded? */\n        lua_pop(L, 1);  /* remove field */\n        lua_pushcfunction(L, openf);\n        lua_pushstring(L, modname);  /* argument to open function */\n        lua_call(L, 1, 1);  /* call 'openf' to open module */\n        lua_pushvalue(L, -1);  /* make copy of module (call result) */\n        lua_setfield(L, -3, modname);  /* LOADED[modname] = module */\n    }\n    lua_remove(L, -2);  /* remove LOADED table */\n    if (glb) {\n        lua_pushvalue(L, -1);  /* copy of module */\n        lua_setglobal(L, modname);  /* _G[modname] = module */\n    }\n};\n\nconst find_subarray = function(arr, subarr, from_index) {\n    var i = from_index >>> 0,\n        sl = subarr.length,\n        l = arr.length + 1 - sl;\n\n    loop: for (; i < l; i++) {\n        for (let j = 0; j < sl; j++)\n            if (arr[i+j] !== subarr[j])\n                continue loop;\n        return i;\n    }\n    return -1;\n};\n\nconst luaL_gsub = function(L, s, p, r) {\n    let wild;\n    let b = new luaL_Buffer();\n    luaL_buffinit(L, b);\n    while ((wild = find_subarray(s, p)) >= 0) {\n        luaL_addlstring(b, s, wild);  /* push prefix */\n        luaL_addstring(b, r);  /* push replacement in place of pattern */\n        s = s.subarray(wild + p.length);  /* continue after 'p' */\n    }\n    luaL_addstring(b, s);  /* push last suffix */\n    luaL_pushresult(b);\n    return lua_tostring(L, -1);\n};\n\n/*\n** ensure that stack[idx][fname] has a table and push that table\n** into the stack\n*/\nconst luaL_getsubtable = function(L, idx, fname) {\n    if (lua_getfield(L, idx, fname) === LUA_TTABLE)\n        return true;  /* table already there */\n    else {\n        lua_pop(L, 1);  /* remove previous result */\n        idx = lua_absindex(L, idx);\n        lua_newtable(L);\n        lua_pushvalue(L, -1);  /* copy to be left at top */\n        lua_setfield(L, idx, fname);  /* assign new table to field */\n        return false;  /* false, because did not find table there */\n    }\n};\n\n/*\n** set functions from list 'l' into table at top - 'nup'; each\n** function gets the 'nup' elements at the top as upvalues.\n** Returns with only the table at the stack.\n*/\nconst luaL_setfuncs = function(L, l, nup) {\n    luaL_checkstack(L, nup, to_luastring(\"too many upvalues\", true));\n    for (let lib in l) {  /* fill the table with given functions */\n        for (let i = 0; i < nup; i++)  /* copy upvalues to the top */\n            lua_pushvalue(L, -nup);\n        lua_pushcclosure(L, l[lib], nup);  /* closure with those upvalues */\n        lua_setfield(L, -(nup + 2), to_luastring(lib));\n    }\n    lua_pop(L, nup);  /* remove upvalues */\n};\n\n/*\n** Ensures the stack has at least 'space' extra slots, raising an error\n** if it cannot fulfill the request. (The error handling needs a few\n** extra slots to format the error message. In case of an error without\n** this extra space, Lua will generate the same 'stack overflow' error,\n** but without 'msg'.)\n*/\nconst luaL_checkstack = function(L, space, msg) {\n    if (!lua_checkstack(L, space)) {\n        if (msg)\n            luaL_error(L, to_luastring(\"stack overflow (%s)\"), msg);\n        else\n            luaL_error(L, to_luastring('stack overflow', true));\n    }\n};\n\nconst luaL_newlibtable = function(L) {\n    lua_createtable(L);\n};\n\nconst luaL_newlib = function(L, l) {\n    lua_createtable(L);\n    luaL_setfuncs(L, l, 0);\n};\n\n/* predefined references */\nconst LUA_NOREF  = -2;\nconst LUA_REFNIL = -1;\n\nconst luaL_ref = function(L, t) {\n    let ref;\n    if (lua_isnil(L, -1)) {\n        lua_pop(L, 1);  /* remove from stack */\n        return LUA_REFNIL;  /* 'nil' has a unique fixed reference */\n    }\n    t = lua_absindex(L, t);\n    lua_rawgeti(L, t, 0);  /* get first free element */\n    ref = lua_tointeger(L, -1);  /* ref = t[freelist] */\n    lua_pop(L, 1);  /* remove it from stack */\n    if (ref !== 0) {  /* any free element? */\n        lua_rawgeti(L, t, ref);  /* remove it from list */\n        lua_rawseti(L, t, 0);  /* (t[freelist] = t[ref]) */\n    }\n    else  /* no free elements */\n        ref = lua_rawlen(L, t) + 1;  /* get a new reference */\n    lua_rawseti(L, t, ref);\n    return ref;\n};\n\n\nconst luaL_unref = function(L, t, ref) {\n    if (ref >= 0) {\n        t = lua_absindex(L, t);\n        lua_rawgeti(L, t, 0);\n        lua_rawseti(L, t, ref);  /* t[ref] = t[freelist] */\n        lua_pushinteger(L, ref);\n        lua_rawseti(L, t, 0);  /* t[freelist] = ref */\n    }\n};\n\n\nconst errfile = function(L, what, fnameindex, error) {\n    let serr = error.message;\n    let filename = lua_tostring(L, fnameindex).subarray(1);\n    lua_pushfstring(L, to_luastring(\"cannot %s %s: %s\"), to_luastring(what), filename, to_luastring(serr));\n    lua_remove(L, fnameindex);\n    return LUA_ERRFILE;\n};\n\nlet getc;\n\nconst utf8_bom = [0XEF, 0XBB, 0XBF];  /* UTF-8 BOM mark */\nconst skipBOM = function(lf) {\n    lf.n = 0;\n    let c;\n    let p = 0;\n    do {\n        c = getc(lf);\n        if (c === null || c !== utf8_bom[p]) return c;\n        p++;\n        lf.buff[lf.n++] = c;  /* to be read by the parser */\n    } while (p < utf8_bom.length);\n    lf.n = 0;  /* prefix matched; discard it */\n    return getc(lf);  /* return next character */\n};\n\n/*\n** reads the first character of file 'f' and skips an optional BOM mark\n** in its beginning plus its first line if it starts with '#'. Returns\n** true if it skipped the first line.  In any case, '*cp' has the\n** first \"valid\" character of the file (after the optional BOM and\n** a first-line comment).\n*/\nconst skipcomment = function(lf) {\n    let c = skipBOM(lf);\n    if (c === 35 /* '#'.charCodeAt(0) */) {  /* first line is a comment (Unix exec. file)? */\n        do {  /* skip first line */\n            c = getc(lf);\n        } while (c && c !== 10 /* '\\n'.charCodeAt(0) */);\n\n        return {\n            skipped: true,\n            c: getc(lf)  /* skip end-of-line, if present */\n        };\n    } else {\n        return {\n            skipped: false,\n            c: c\n        };\n    }\n};\n\nlet luaL_loadfilex;\n\nif (typeof process === \"undefined\") {\n    class LoadF {\n        constructor() {\n            this.n = NaN;  /* number of pre-read characters */\n            this.f = null;  /* file being read */\n            this.buff = new Uint8Array(1024);  /* area for reading file */\n            this.pos = 0;  /* current position in file */\n            this.err = void 0;\n        }\n    }\n\n    const getF = function(L, ud) {\n        let lf = ud;\n\n        if (lf.f !== null && lf.n > 0) {  /* are there pre-read characters to be read? */\n            let bytes = lf.n; /* return them (chars already in buffer) */\n            lf.n = 0;  /* no more pre-read characters */\n            lf.f = lf.f.subarray(lf.pos);  /* we won't use lf.buff anymore */\n            return lf.buff.subarray(0, bytes);\n        }\n\n        let f = lf.f;\n        lf.f = null;\n        return f;\n    };\n\n    getc = function(lf) {\n        return lf.pos < lf.f.length ? lf.f[lf.pos++] : null;\n    };\n\n    luaL_loadfilex = function(L, filename, mode) {\n        let lf = new LoadF();\n        let fnameindex = lua_gettop(L) + 1;  /* index of filename on the stack */\n        if (filename === null) {\n            throw new Error(\"Can't read stdin in the browser\");\n        } else {\n            lua_pushfstring(L, to_luastring(\"@%s\"), filename);\n            let path = to_uristring(filename);\n            let xhr = new XMLHttpRequest();\n            xhr.open(\"GET\", path, false);\n            /*\n            Synchronous xhr in main thread always returns a js string.\n            Some browsers make console noise if you even attempt to set responseType\n            */\n            if (typeof window === \"undefined\") {\n                xhr.responseType = \"arraybuffer\";\n            }\n            xhr.send();\n            if (xhr.status >= 200 && xhr.status <= 299) {\n                if (typeof xhr.response === \"string\") {\n                    lf.f = to_luastring(xhr.response);\n                } else {\n                    lf.f = new Uint8Array(xhr.response);\n                }\n            } else {\n                lf.err = xhr.status;\n                return errfile(L, \"open\", fnameindex, { message: `${xhr.status}: ${xhr.statusText}` });\n            }\n        }\n        let com = skipcomment(lf);\n        /* check for signature first, as we don't want to add line number corrections in binary case */\n        if (com.c === LUA_SIGNATURE[0] && filename) {  /* binary file? */\n            /* no need to re-open */\n        } else if (com.skipped) { /* read initial portion */\n            lf.buff[lf.n++] = 10 /* '\\n'.charCodeAt(0) */;  /* add line to correct line numbers */\n        }\n        if (com.c !== null)\n            lf.buff[lf.n++] = com.c; /* 'c' is the first character of the stream */\n        let status = lua_load(L, getF, lf, lua_tostring(L, -1), mode);\n        let readstatus = lf.err;\n        if (readstatus) {\n            lua_settop(L, fnameindex);  /* ignore results from 'lua_load' */\n            return errfile(L, \"read\", fnameindex, readstatus);\n        }\n        lua_remove(L, fnameindex);\n        return status;\n    };\n} else {\n    const fs = require('fs');\n\n    class LoadF {\n        constructor() {\n            this.n = NaN;  /* number of pre-read characters */\n            this.f = null;  /* file being read */\n            this.buff = Buffer.alloc(1024);  /* area for reading file */\n            this.pos = 0;  /* current position in file */\n            this.err = void 0;\n        }\n    }\n\n    const getF = function(L, ud) {\n        let lf = ud;\n        let bytes = 0;\n        if (lf.n > 0) {  /* are there pre-read characters to be read? */\n            bytes = lf.n; /* return them (chars already in buffer) */\n            lf.n = 0;  /* no more pre-read characters */\n        } else {  /* read a block from file */\n            try {\n                bytes = fs.readSync(lf.f, lf.buff, 0, lf.buff.length, lf.pos); /* read block */\n            } catch(e) {\n                lf.err = e;\n                bytes = 0;\n            }\n            lf.pos += bytes;\n        }\n        if (bytes > 0)\n            return lf.buff.subarray(0, bytes);\n        else return null;\n    };\n\n    getc = function(lf) {\n        let b = Buffer.alloc(1);\n        let bytes;\n        try {\n            bytes = fs.readSync(lf.f, b, 0, 1, lf.pos);\n        } catch(e) {\n            lf.err = e;\n            return null;\n        }\n        lf.pos += bytes;\n        return bytes > 0 ? b.readUInt8() : null;\n    };\n\n    luaL_loadfilex = function(L, filename, mode) {\n        let lf = new LoadF();\n        let fnameindex = lua_gettop(L) + 1;  /* index of filename on the stack */\n        if (filename === null) {\n            lua_pushliteral(L, \"=stdin\");\n            lf.f = process.stdin.fd;\n        } else {\n            lua_pushfstring(L, to_luastring(\"@%s\"), filename);\n            try {\n                lf.f = fs.openSync(filename, \"r\");\n            } catch (e) {\n                return errfile(L, \"open\", fnameindex, e);\n            }\n        }\n        let com = skipcomment(lf);\n        /* check for signature first, as we don't want to add line number corrections in binary case */\n        if (com.c === LUA_SIGNATURE[0] && filename) {  /* binary file? */\n            /* no need to re-open */\n        } else if (com.skipped) { /* read initial portion */\n            lf.buff[lf.n++] = 10 /* '\\n'.charCodeAt(0) */;  /* add line to correct line numbers */\n        }\n        if (com.c !== null)\n            lf.buff[lf.n++] = com.c; /* 'c' is the first character of the stream */\n        let status = lua_load(L, getF, lf, lua_tostring(L, -1), mode);\n        let readstatus = lf.err;\n        if (filename) try { fs.closeSync(lf.f); } catch(e) {}  /* close file (even in case of errors) */\n        if (readstatus) {\n            lua_settop(L, fnameindex);  /* ignore results from 'lua_load' */\n            return errfile(L, \"read\", fnameindex, readstatus);\n        }\n        lua_remove(L, fnameindex);\n        return status;\n    };\n}\n\nconst luaL_loadfile = function(L, filename) {\n    return luaL_loadfilex(L, filename, null);\n};\n\nconst luaL_dofile = function(L, filename) {\n    return (luaL_loadfile(L, filename) || lua_pcall(L, 0, LUA_MULTRET, 0));\n};\n\nconst lua_writestringerror = function() {\n    for (let i=0; i<arguments.length; i++) {\n        let a = arguments[i];\n        if (typeof process === \"undefined\") {\n            /* split along new lines for separate console.error invocations */\n            do {\n                /* regexp uses [\\d\\D] to work around matching new lines\n                   the 's' flag is non-standard */\n                let r = /([^\\n]*)\\n?([\\d\\D]*)/.exec(a);\n                console.error(r[1]);\n                a = r[2];\n            } while (a !== \"\");\n        } else {\n            process.stderr.write(a);\n        }\n    }\n};\n\nconst luaL_checkversion_ = function(L, ver, sz) {\n    let v = lua_version(L);\n    if (sz != LUAL_NUMSIZES)  /* check numeric types */\n        luaL_error(L, to_luastring(\"core and library have incompatible numeric types\"));\n    if (v != lua_version(null))\n        luaL_error(L, to_luastring(\"multiple Lua VMs detected\"));\n    else if (v !== ver)\n        luaL_error(L, to_luastring(\"version mismatch: app. needs %f, Lua core provides %f\"), ver, v);\n};\n\n/* There is no point in providing this function... */\nconst luaL_checkversion = function(L) {\n    luaL_checkversion_(L, LUA_VERSION_NUM, LUAL_NUMSIZES);\n};\n\nmodule.exports.LUA_ERRFILE          = LUA_ERRFILE;\nmodule.exports.LUA_FILEHANDLE       = LUA_FILEHANDLE;\nmodule.exports.LUA_LOADED_TABLE     = LUA_LOADED_TABLE;\nmodule.exports.LUA_NOREF            = LUA_NOREF;\nmodule.exports.LUA_PRELOAD_TABLE    = LUA_PRELOAD_TABLE;\nmodule.exports.LUA_REFNIL           = LUA_REFNIL;\nmodule.exports.luaL_Buffer          = luaL_Buffer;\nmodule.exports.luaL_addchar         = luaL_addchar;\nmodule.exports.luaL_addlstring      = luaL_addlstring;\nmodule.exports.luaL_addsize         = luaL_addsize;\nmodule.exports.luaL_addstring       = luaL_addstring;\nmodule.exports.luaL_addvalue        = luaL_addvalue;\nmodule.exports.luaL_argcheck        = luaL_argcheck;\nmodule.exports.luaL_argerror        = luaL_argerror;\nmodule.exports.luaL_buffinit        = luaL_buffinit;\nmodule.exports.luaL_buffinitsize    = luaL_buffinitsize;\nmodule.exports.luaL_callmeta        = luaL_callmeta;\nmodule.exports.luaL_checkany        = luaL_checkany;\nmodule.exports.luaL_checkinteger    = luaL_checkinteger;\nmodule.exports.luaL_checklstring    = luaL_checklstring;\nmodule.exports.luaL_checknumber     = luaL_checknumber;\nmodule.exports.luaL_checkoption     = luaL_checkoption;\nmodule.exports.luaL_checkstack      = luaL_checkstack;\nmodule.exports.luaL_checkstring     = luaL_checkstring;\nmodule.exports.luaL_checktype       = luaL_checktype;\nmodule.exports.luaL_checkudata      = luaL_checkudata;\nmodule.exports.luaL_checkversion    = luaL_checkversion;\nmodule.exports.luaL_checkversion_   = luaL_checkversion_;\nmodule.exports.luaL_dofile          = luaL_dofile;\nmodule.exports.luaL_dostring        = luaL_dostring;\nmodule.exports.luaL_error           = luaL_error;\nmodule.exports.luaL_execresult      = luaL_execresult;\nmodule.exports.luaL_fileresult      = luaL_fileresult;\nmodule.exports.luaL_getmetafield    = luaL_getmetafield;\nmodule.exports.luaL_getmetatable    = luaL_getmetatable;\nmodule.exports.luaL_getsubtable     = luaL_getsubtable;\nmodule.exports.luaL_gsub            = luaL_gsub;\nmodule.exports.luaL_len             = luaL_len;\nmodule.exports.luaL_loadbuffer      = luaL_loadbuffer;\nmodule.exports.luaL_loadbufferx     = luaL_loadbufferx;\nmodule.exports.luaL_loadfile        = luaL_loadfile;\nmodule.exports.luaL_loadfilex       = luaL_loadfilex;\nmodule.exports.luaL_loadstring      = luaL_loadstring;\nmodule.exports.luaL_newlib          = luaL_newlib;\nmodule.exports.luaL_newlibtable     = luaL_newlibtable;\nmodule.exports.luaL_newmetatable    = luaL_newmetatable;\nmodule.exports.luaL_newstate        = luaL_newstate;\nmodule.exports.luaL_opt             = luaL_opt;\nmodule.exports.luaL_optinteger      = luaL_optinteger;\nmodule.exports.luaL_optlstring      = luaL_optlstring;\nmodule.exports.luaL_optnumber       = luaL_optnumber;\nmodule.exports.luaL_optstring       = luaL_optstring;\nmodule.exports.luaL_prepbuffer      = luaL_prepbuffer;\nmodule.exports.luaL_prepbuffsize    = luaL_prepbuffsize;\nmodule.exports.luaL_pushresult      = luaL_pushresult;\nmodule.exports.luaL_pushresultsize  = luaL_pushresultsize;\nmodule.exports.luaL_ref             = luaL_ref;\nmodule.exports.luaL_requiref        = luaL_requiref;\nmodule.exports.luaL_setfuncs        = luaL_setfuncs;\nmodule.exports.luaL_setmetatable    = luaL_setmetatable;\nmodule.exports.luaL_testudata       = luaL_testudata;\nmodule.exports.luaL_tolstring       = luaL_tolstring;\nmodule.exports.luaL_traceback       = luaL_traceback;\nmodule.exports.luaL_typename        = luaL_typename;\nmodule.exports.luaL_unref           = luaL_unref;\nmodule.exports.luaL_where           = luaL_where;\nmodule.exports.lua_writestringerror = lua_writestringerror;\n","\"use strict\";\n\nconst {\n    LUA_MULTRET,\n    LUA_OPADD,\n    LUA_OPBAND,\n    LUA_OPBNOT,\n    LUA_OPBOR,\n    LUA_OPBXOR,\n    LUA_OPDIV,\n    LUA_OPIDIV,\n    LUA_OPMOD,\n    LUA_OPSHL,\n    LUA_OPSHR,\n    LUA_OPUNM,\n    constant_types: {\n        LUA_TBOOLEAN,\n        LUA_TLIGHTUSERDATA,\n        LUA_TLNGSTR,\n        LUA_TNIL,\n        LUA_TNUMFLT,\n        LUA_TNUMINT,\n        LUA_TTABLE\n    },\n    to_luastring\n} = require('./defs.js');\nconst { lua_assert } = require(\"./llimits.js\");\nconst llex     = require('./llex.js');\nconst lobject  = require('./lobject.js');\nconst lopcodes = require('./lopcodes.js');\nconst lparser  = require('./lparser.js');\nconst ltable   = require('./ltable.js');\nconst lvm      = require('./lvm.js');\n\nconst OpCodesI = lopcodes.OpCodesI;\nconst TValue   = lobject.TValue;\n\n/* Maximum number of registers in a Lua function (must fit in 8 bits) */\nconst MAXREGS = 255;\n\n/*\n** Marks the end of a patch list. It is an invalid value both as an absolute\n** address, and as a list link (would link an element to itself).\n*/\nconst NO_JUMP = -1;\n\nconst BinOpr = {\n    OPR_ADD:      0,\n    OPR_SUB:      1,\n    OPR_MUL:      2,\n    OPR_MOD:      3,\n    OPR_POW:      4,\n    OPR_DIV:      5,\n    OPR_IDIV:     6,\n    OPR_BAND:     7,\n    OPR_BOR:      8,\n    OPR_BXOR:     9,\n    OPR_SHL:      10,\n    OPR_SHR:      11,\n    OPR_CONCAT:   12,\n    OPR_EQ:       13,\n    OPR_LT:       14,\n    OPR_LE:       15,\n    OPR_NE:       16,\n    OPR_GT:       17,\n    OPR_GE:       18,\n    OPR_AND:      19,\n    OPR_OR:       20,\n    OPR_NOBINOPR: 21\n};\n\nconst UnOpr = {\n    OPR_MINUS:    0,\n    OPR_BNOT:     1,\n    OPR_NOT:      2,\n    OPR_LEN:      3,\n    OPR_NOUNOPR:  4\n};\n\nconst hasjumps = function(e) {\n    return e.t !== e.f;\n};\n\n/*\n** If expression is a numeric constant returns either true or a new TValue\n** (depending on 'make_tvalue'). Otherwise, returns false.\n*/\nconst tonumeral = function(e, make_tvalue) {\n    let ek = lparser.expkind;\n    if (hasjumps(e))\n        return false;  /* not a numeral */\n    switch (e.k) {\n        case ek.VKINT:\n            if (make_tvalue) {\n                return new TValue(LUA_TNUMINT, e.u.ival);\n            }\n            return true;\n        case ek.VKFLT:\n            if (make_tvalue) {\n                return new TValue(LUA_TNUMFLT, e.u.nval);\n            }\n            return true;\n        default: return false;\n    }\n};\n\n/*\n** Create a OP_LOADNIL instruction, but try to optimize: if the previous\n** instruction is also OP_LOADNIL and ranges are compatible, adjust\n** range of previous instruction instead of emitting a new one. (For\n** instance, 'local a; local b' will generate a single opcode.)\n*/\nconst luaK_nil = function(fs, from, n) {\n    let previous;\n    let l = from + n - 1;  /* last register to set nil */\n    if (fs.pc > fs.lasttarget) {  /* no jumps to current position? */\n        previous = fs.f.code[fs.pc-1];\n        if (previous.opcode === OpCodesI.OP_LOADNIL) {  /* previous is LOADNIL? */\n            let pfrom = previous.A;  /* get previous range */\n            let pl = pfrom + previous.B;\n            if ((pfrom <= from && from <= pl + 1) ||\n                    (from <= pfrom && pfrom <= l + 1)) {  /* can connect both? */\n                if (pfrom < from) from = pfrom;  /* from = min(from, pfrom) */\n                if (pl > l) l = pl;  /* l = max(l, pl) */\n                lopcodes.SETARG_A(previous, from);\n                lopcodes.SETARG_B(previous, l - from);\n                return;\n            }\n        }  /* else go through */\n    }\n    luaK_codeABC(fs, OpCodesI.OP_LOADNIL, from, n - 1, 0);  /* else no optimization */\n};\n\nconst getinstruction = function(fs, e) {\n    return fs.f.code[e.u.info];\n};\n\n/*\n** Gets the destination address of a jump instruction. Used to traverse\n** a list of jumps.\n*/\nconst getjump = function(fs, pc) {\n    let offset = fs.f.code[pc].sBx;\n    if (offset === NO_JUMP)  /* point to itself represents end of list */\n        return NO_JUMP;  /* end of list */\n    else\n        return pc + 1 + offset;  /* turn offset into absolute position */\n};\n\n/*\n** Fix jump instruction at position 'pc' to jump to 'dest'.\n** (Jump addresses are relative in Lua)\n*/\nconst fixjump = function(fs, pc, dest) {\n    let jmp = fs.f.code[pc];\n    let offset = dest - (pc + 1);\n    lua_assert(dest !== NO_JUMP);\n    if (Math.abs(offset) > lopcodes.MAXARG_sBx)\n        llex.luaX_syntaxerror(fs.ls, to_luastring(\"control structure too long\", true));\n    lopcodes.SETARG_sBx(jmp, offset);\n};\n\n/*\n** Concatenate jump-list 'l2' into jump-list 'l1'\n*/\nconst luaK_concat = function(fs, l1, l2) {\n    if (l2 === NO_JUMP) return l1;  /* nothing to concatenate? */\n    else if (l1 === NO_JUMP)  /* no original list? */\n        l1 = l2;\n    else {\n        let list = l1;\n        let next = getjump(fs, list);\n        while (next !== NO_JUMP) {  /* find last element */\n            list = next;\n            next = getjump(fs, list);\n        }\n        fixjump(fs, list, l2);\n    }\n\n    return l1;\n};\n\n/*\n** Create a jump instruction and return its position, so its destination\n** can be fixed later (with 'fixjump'). If there are jumps to\n** this position (kept in 'jpc'), link them all together so that\n** 'patchlistaux' will fix all them directly to the final destination.\n*/\nconst luaK_jump = function (fs) {\n    let jpc = fs.jpc;  /* save list of jumps to here */\n    fs.jpc = NO_JUMP;  /* no more jumps to here */\n    let j = luaK_codeAsBx(fs, OpCodesI.OP_JMP, 0, NO_JUMP);\n    j = luaK_concat(fs, j, jpc);  /* keep them on hold */\n    return j;\n};\n\nconst luaK_jumpto = function(fs, t) {\n    return luaK_patchlist(fs, luaK_jump(fs), t);\n};\n\n/*\n** Code a 'return' instruction\n*/\nconst luaK_ret = function(fs, first, nret) {\n    luaK_codeABC(fs, OpCodesI.OP_RETURN, first, nret + 1, 0);\n};\n\n/*\n** Code a \"conditional jump\", that is, a test or comparison opcode\n** followed by a jump. Return jump position.\n*/\nconst condjump = function(fs, op, A, B, C) {\n    luaK_codeABC(fs, op, A, B, C);\n    return luaK_jump(fs);\n};\n\n/*\n** returns current 'pc' and marks it as a jump target (to avoid wrong\n** optimizations with consecutive instructions not in the same basic block).\n*/\nconst luaK_getlabel = function(fs) {\n    fs.lasttarget = fs.pc;\n    return fs.pc;\n};\n\n/*\n** Returns the position of the instruction \"controlling\" a given\n** jump (that is, its condition), or the jump itself if it is\n** unconditional.\n*/\nconst getjumpcontroloffset = function(fs, pc) {\n    if (pc >= 1 && lopcodes.testTMode(fs.f.code[pc - 1].opcode))\n        return pc - 1;\n    else\n        return pc;\n};\nconst getjumpcontrol = function(fs, pc) {\n    return fs.f.code[getjumpcontroloffset(fs, pc)];\n};\n\n/*\n** Patch destination register for a TESTSET instruction.\n** If instruction in position 'node' is not a TESTSET, return 0 (\"fails\").\n** Otherwise, if 'reg' is not 'NO_REG', set it as the destination\n** register. Otherwise, change instruction to a simple 'TEST' (produces\n** no register value)\n*/\nconst patchtestreg = function(fs, node, reg) {\n    let pc = getjumpcontroloffset(fs, node);\n    let i = fs.f.code[pc];\n    if (i.opcode !== OpCodesI.OP_TESTSET)\n        return false;  /* cannot patch other instructions */\n    if (reg !== lopcodes.NO_REG && reg !== i.B)\n        lopcodes.SETARG_A(i, reg);\n    else {\n        /* no register to put value or register already has the value;\n           change instruction to simple test */\n        fs.f.code[pc] = lopcodes.CREATE_ABC(OpCodesI.OP_TEST, i.B, 0, i.C);\n    }\n    return true;\n};\n\n/*\n** Traverse a list of tests ensuring no one produces a value\n*/\nconst removevalues = function(fs, list) {\n    for (; list !== NO_JUMP; list = getjump(fs, list))\n        patchtestreg(fs, list, lopcodes.NO_REG);\n};\n\n/*\n** Traverse a list of tests, patching their destination address and\n** registers: tests producing values jump to 'vtarget' (and put their\n** values in 'reg'), other tests jump to 'dtarget'.\n*/\nconst patchlistaux = function(fs, list, vtarget, reg, dtarget) {\n    while (list !== NO_JUMP) {\n        let next = getjump(fs, list);\n        if (patchtestreg(fs, list, reg))\n            fixjump(fs, list, vtarget);\n        else\n            fixjump(fs, list, dtarget);  /* jump to default target */\n        list = next;\n    }\n};\n\n/*\n** Ensure all pending jumps to current position are fixed (jumping\n** to current position with no values) and reset list of pending\n** jumps\n*/\nconst dischargejpc = function(fs) {\n    patchlistaux(fs, fs.jpc, fs.pc, lopcodes.NO_REG, fs.pc);\n    fs.jpc = NO_JUMP;\n};\n\n/*\n** Add elements in 'list' to list of pending jumps to \"here\"\n** (current position)\n*/\nconst luaK_patchtohere = function(fs, list) {\n    luaK_getlabel(fs);  /* mark \"here\" as a jump target */\n    fs.jpc = luaK_concat(fs, fs.jpc, list);\n};\n\n/*\n** Path all jumps in 'list' to jump to 'target'.\n** (The assert means that we cannot fix a jump to a forward address\n** because we only know addresses once code is generated.)\n*/\nconst luaK_patchlist = function(fs, list, target) {\n    if (target === fs.pc)  /* 'target' is current position? */\n        luaK_patchtohere(fs, list);  /* add list to pending jumps */\n    else {\n        lua_assert(target < fs.pc);\n        patchlistaux(fs, list, target, lopcodes.NO_REG, target);\n    }\n};\n\n/*\n** Path all jumps in 'list' to close upvalues up to given 'level'\n** (The assertion checks that jumps either were closing nothing\n** or were closing higher levels, from inner blocks.)\n*/\nconst luaK_patchclose = function(fs, list, level) {\n    level++;  /* argument is +1 to reserve 0 as non-op */\n    for (; list !== NO_JUMP; list = getjump(fs, list)) {\n        let ins = fs.f.code[list];\n        lua_assert(ins.opcode === OpCodesI.OP_JMP && (ins.A === 0 || ins.A >= level));\n        lopcodes.SETARG_A(ins, level);\n    }\n};\n\n/*\n** Emit instruction 'i', checking for array sizes and saving also its\n** line information. Return 'i' position.\n*/\nconst luaK_code = function(fs, i) {\n    let f = fs.f;\n    dischargejpc(fs);  /* 'pc' will change */\n    /* put new instruction in code array */\n    f.code[fs.pc] = i;\n    f.lineinfo[fs.pc] = fs.ls.lastline;\n    return fs.pc++;\n};\n\n/*\n** Format and emit an 'iABC' instruction. (Assertions check consistency\n** of parameters versus opcode.)\n*/\nconst luaK_codeABC = function(fs, o, a, b, c) {\n    lua_assert(lopcodes.getOpMode(o) === lopcodes.iABC);\n    lua_assert(lopcodes.getBMode(o) !== lopcodes.OpArgN || b === 0);\n    lua_assert(lopcodes.getCMode(o) !== lopcodes.OpArgN || c === 0);\n    lua_assert(a <= lopcodes.MAXARG_A && b <= lopcodes.MAXARG_B && c <= lopcodes.MAXARG_C);\n    return luaK_code(fs, lopcodes.CREATE_ABC(o, a, b, c));\n};\n\n/*\n** Format and emit an 'iABx' instruction.\n*/\nconst luaK_codeABx = function(fs, o, a, bc) {\n    lua_assert(lopcodes.getOpMode(o) === lopcodes.iABx || lopcodes.getOpMode(o) === lopcodes.iAsBx);\n    lua_assert(lopcodes.getCMode(o) === lopcodes.OpArgN);\n    lua_assert(a <= lopcodes.MAXARG_A && bc <= lopcodes.MAXARG_Bx);\n    return luaK_code(fs, lopcodes.CREATE_ABx(o, a, bc));\n};\n\nconst luaK_codeAsBx = function(fs,o,A,sBx) {\n    return luaK_codeABx(fs, o, A, (sBx) + lopcodes.MAXARG_sBx);\n};\n\n/*\n** Emit an \"extra argument\" instruction (format 'iAx')\n*/\nconst codeextraarg = function(fs, a) {\n    lua_assert(a <= lopcodes.MAXARG_Ax);\n    return luaK_code(fs, lopcodes.CREATE_Ax(OpCodesI.OP_EXTRAARG, a));\n};\n\n/*\n** Emit a \"load constant\" instruction, using either 'OP_LOADK'\n** (if constant index 'k' fits in 18 bits) or an 'OP_LOADKX'\n** instruction with \"extra argument\".\n*/\nconst luaK_codek = function(fs, reg, k) {\n    if (k <= lopcodes.MAXARG_Bx)\n        return luaK_codeABx(fs, OpCodesI.OP_LOADK, reg, k);\n    else {\n        let p = luaK_codeABx(fs, OpCodesI.OP_LOADKX, reg, 0);\n        codeextraarg(fs, k);\n        return p;\n    }\n};\n\n/*\n** Check register-stack level, keeping track of its maximum size\n** in field 'maxstacksize'\n*/\nconst luaK_checkstack = function(fs, n) {\n    let newstack = fs.freereg + n;\n    if (newstack > fs.f.maxstacksize) {\n        if (newstack >= MAXREGS)\n            llex.luaX_syntaxerror(fs.ls, to_luastring(\"function or expression needs too many registers\", true));\n        fs.f.maxstacksize = newstack;\n    }\n};\n\n/*\n** Reserve 'n' registers in register stack\n*/\nconst luaK_reserveregs = function(fs, n) {\n    luaK_checkstack(fs, n);\n    fs.freereg += n;\n};\n\n/*\n** Free register 'reg', if it is neither a constant index nor\n** a local variable.\n*/\nconst freereg = function(fs, reg) {\n    if (!lopcodes.ISK(reg) && reg >= fs.nactvar) {\n        fs.freereg--;\n        lua_assert(reg === fs.freereg);\n    }\n};\n\n/*\n** Free register used by expression 'e' (if any)\n*/\nconst freeexp = function(fs, e) {\n    if (e.k === lparser.expkind.VNONRELOC)\n        freereg(fs, e.u.info);\n};\n\n/*\n** Free registers used by expressions 'e1' and 'e2' (if any) in proper\n** order.\n*/\nconst freeexps = function(fs, e1, e2) {\n    let r1 = (e1.k === lparser.expkind.VNONRELOC) ? e1.u.info : -1;\n    let r2 = (e2.k === lparser.expkind.VNONRELOC) ? e2.u.info : -1;\n    if (r1 > r2) {\n        freereg(fs, r1);\n        freereg(fs, r2);\n    }\n    else {\n        freereg(fs, r2);\n        freereg(fs, r1);\n    }\n};\n\n\n/*\n** Add constant 'v' to prototype's list of constants (field 'k').\n** Use scanner's table to cache position of constants in constant list\n** and try to reuse constants. Because some values should not be used\n** as keys (nil cannot be a key, integer keys can collapse with float\n** keys), the caller must provide a useful 'key' for indexing the cache.\n*/\nconst addk = function(fs, key, v) {\n    let f = fs.f;\n    let idx = ltable.luaH_get(fs.L, fs.ls.h, key);  /* index scanner table */\n    if (idx.ttisinteger()) {  /* is there an index there? */\n        let k = idx.value;\n        /* correct value? (warning: must distinguish floats from integers!) */\n        if (k < fs.nk && f.k[k].ttype() === v.ttype() && f.k[k].value === v.value)\n            return k;  /* reuse index */\n    }\n    /* constant not found; create a new entry */\n    let k = fs.nk;\n    ltable.luaH_setfrom(fs.L, fs.ls.h, key, new lobject.TValue(LUA_TNUMINT, k));\n    f.k[k] = v;\n    fs.nk++;\n    return k;\n};\n\n/*\n** Add a string to list of constants and return its index.\n*/\nconst luaK_stringK = function(fs, s) {\n    let o = new TValue(LUA_TLNGSTR, s);\n    return addk(fs, o, o);  /* use string itself as key */\n};\n\n\n/*\n** Add an integer to list of constants and return its index.\n** Integers use userdata as keys to avoid collision with floats with\n** same value.\n*/\nconst luaK_intK = function(fs, n) {\n    let k = new TValue(LUA_TLIGHTUSERDATA, n);\n    let o = new TValue(LUA_TNUMINT, n);\n    return addk(fs, k, o);\n};\n\n/*\n** Add a float to list of constants and return its index.\n*/\nconst luaK_numberK = function(fs, r) {\n    let o = new TValue(LUA_TNUMFLT, r);\n    return addk(fs, o, o);  /* use number itself as key */\n};\n\n\n/*\n** Add a boolean to list of constants and return its index.\n*/\nconst boolK = function(fs, b) {\n    let o = new TValue(LUA_TBOOLEAN, b);\n    return addk(fs, o, o);  /* use boolean itself as key */\n};\n\n\n/*\n** Add nil to list of constants and return its index.\n*/\nconst nilK = function(fs) {\n    let v = new TValue(LUA_TNIL, null);\n    let k = new TValue(LUA_TTABLE, fs.ls.h);\n    /* cannot use nil as key; instead use table itself to represent nil */\n    return addk(fs, k, v);\n};\n\n/*\n** Fix an expression to return the number of results 'nresults'.\n** Either 'e' is a multi-ret expression (function call or vararg)\n** or 'nresults' is LUA_MULTRET (as any expression can satisfy that).\n*/\nconst luaK_setreturns = function(fs, e, nresults) {\n    let ek = lparser.expkind;\n    if (e.k === ek.VCALL) {  /* expression is an open function call? */\n        lopcodes.SETARG_C(getinstruction(fs, e), nresults + 1);\n    }\n    else if (e.k === ek.VVARARG) {\n        let pc = getinstruction(fs, e);\n        lopcodes.SETARG_B(pc, nresults + 1);\n        lopcodes.SETARG_A(pc, fs.freereg);\n        luaK_reserveregs(fs, 1);\n    }\n    else lua_assert(nresults === LUA_MULTRET);\n};\n\nconst luaK_setmultret = function(fs, e) {\n    luaK_setreturns(fs, e, LUA_MULTRET);\n};\n\n/*\n** Fix an expression to return one result.\n** If expression is not a multi-ret expression (function call or\n** vararg), it already returns one result, so nothing needs to be done.\n** Function calls become VNONRELOC expressions (as its result comes\n** fixed in the base register of the call), while vararg expressions\n** become VRELOCABLE (as OP_VARARG puts its results where it wants).\n** (Calls are created returning one result, so that does not need\n** to be fixed.)\n*/\nconst luaK_setoneret = function(fs, e) {\n    let ek = lparser.expkind;\n    if (e.k === ek.VCALL) {  /* expression is an open function call? */\n        /* already returns 1 value */\n        lua_assert(getinstruction(fs, e).C === 2);\n        e.k = ek.VNONRELOC;  /* result has fixed position */\n        e.u.info = getinstruction(fs, e).A;\n    } else if (e.k === ek.VVARARG) {\n        lopcodes.SETARG_B(getinstruction(fs, e), 2);\n        e.k = ek.VRELOCABLE;  /* can relocate its simple result */\n    }\n};\n\n/*\n** Ensure that expression 'e' is not a variable.\n*/\nconst luaK_dischargevars = function(fs, e) {\n    let ek = lparser.expkind;\n\n    switch (e.k) {\n        case ek.VLOCAL: {  /* already in a register */\n            e.k =  ek.VNONRELOC;  /* becomes a non-relocatable value */\n            break;\n        }\n        case ek.VUPVAL: {  /* move value to some (pending) register */\n            e.u.info = luaK_codeABC(fs, OpCodesI.OP_GETUPVAL, 0, e.u.info, 0);\n            e.k = ek.VRELOCABLE;\n            break;\n        }\n        case ek.VINDEXED: {\n            let op;\n            freereg(fs, e.u.ind.idx);\n            if (e.u.ind.vt === ek.VLOCAL) {  /* is 't' in a register? */\n                freereg(fs, e.u.ind.t);\n                op = OpCodesI.OP_GETTABLE;\n            } else {\n                lua_assert(e.u.ind.vt === ek.VUPVAL);\n                op = OpCodesI.OP_GETTABUP;  /* 't' is in an upvalue */\n            }\n            e.u.info = luaK_codeABC(fs, op, 0, e.u.ind.t, e.u.ind.idx);\n            e.k = ek.VRELOCABLE;\n            break;\n        }\n        case ek.VVARARG: case ek.VCALL: {\n            luaK_setoneret(fs, e);\n            break;\n        }\n        default: break;  /* there is one value available (somewhere) */\n    }\n};\n\nconst code_loadbool = function(fs, A, b, jump) {\n    luaK_getlabel(fs);  /* those instructions may be jump targets */\n    return luaK_codeABC(fs, OpCodesI.OP_LOADBOOL, A, b, jump);\n};\n\n/*\n** Ensures expression value is in register 'reg' (and therefore\n** 'e' will become a non-relocatable expression).\n*/\nconst discharge2reg = function(fs, e, reg) {\n    let ek = lparser.expkind;\n    luaK_dischargevars(fs, e);\n    switch (e.k) {\n        case ek.VNIL: {\n            luaK_nil(fs, reg, 1);\n            break;\n        }\n        case ek.VFALSE: case ek.VTRUE: {\n            luaK_codeABC(fs, OpCodesI.OP_LOADBOOL, reg, e.k === ek.VTRUE, 0);\n            break;\n        }\n        case ek.VK: {\n            luaK_codek(fs, reg, e.u.info);\n            break;\n        }\n        case ek.VKFLT: {\n            luaK_codek(fs, reg, luaK_numberK(fs, e.u.nval));\n            break;\n        }\n        case ek.VKINT: {\n            luaK_codek(fs, reg, luaK_intK(fs, e.u.ival));\n            break;\n        }\n        case ek.VRELOCABLE: {\n            let pc = getinstruction(fs, e);\n            lopcodes.SETARG_A(pc, reg);  /* instruction will put result in 'reg' */\n            break;\n        }\n        case ek.VNONRELOC: {\n            if (reg !== e.u.info)\n                luaK_codeABC(fs, OpCodesI.OP_MOVE, reg, e.u.info, 0);\n            break;\n        }\n        default: {\n            lua_assert(e.k === ek.VJMP);\n            return;  /* nothing to do... */\n        }\n    }\n    e.u.info = reg;\n    e.k = ek.VNONRELOC;\n};\n\n/*\n** Ensures expression value is in any register.\n*/\nconst discharge2anyreg = function(fs, e) {\n    if (e.k !== lparser.expkind.VNONRELOC) {  /* no fixed register yet? */\n        luaK_reserveregs(fs, 1);  /* get a register */\n        discharge2reg(fs, e, fs.freereg-1);  /* put value there */\n    }\n};\n\n/*\n** check whether list has any jump that do not produce a value\n** or produce an inverted value\n*/\nconst need_value = function(fs, list) {\n    for (; list !== NO_JUMP; list = getjump(fs, list)) {\n        let i = getjumpcontrol(fs, list);\n        if (i.opcode !== OpCodesI.OP_TESTSET) return true;\n    }\n    return false;  /* not found */\n};\n\n/*\n** Ensures final expression result (including results from its jump\n** lists) is in register 'reg'.\n** If expression has jumps, need to patch these jumps either to\n** its final position or to \"load\" instructions (for those tests\n** that do not produce values).\n*/\nconst exp2reg = function(fs, e, reg) {\n    let ek = lparser.expkind;\n    discharge2reg(fs, e, reg);\n    if (e.k === ek.VJMP)  /* expression itself is a test? */\n        e.t = luaK_concat(fs, e.t, e.u.info);  /* put this jump in 't' list */\n    if (hasjumps(e)) {\n        let final;  /* position after whole expression */\n        let p_f = NO_JUMP;  /* position of an eventual LOAD false */\n        let p_t = NO_JUMP;  /* position of an eventual LOAD true */\n        if (need_value(fs, e.t) || need_value(fs, e.f)) {\n            let fj = (e.k === ek.VJMP) ? NO_JUMP : luaK_jump(fs);\n            p_f = code_loadbool(fs, reg, 0, 1);\n            p_t = code_loadbool(fs, reg, 1, 0);\n            luaK_patchtohere(fs, fj);\n        }\n        final = luaK_getlabel(fs);\n        patchlistaux(fs, e.f, final, reg, p_f);\n        patchlistaux(fs, e.t, final, reg, p_t);\n    }\n    e.f = e.t = NO_JUMP;\n    e.u.info = reg;\n    e.k = ek.VNONRELOC;\n};\n\n/*\n** Ensures final expression result (including results from its jump\n** lists) is in next available register.\n*/\nconst luaK_exp2nextreg = function(fs, e) {\n    luaK_dischargevars(fs, e);\n    freeexp(fs, e);\n    luaK_reserveregs(fs, 1);\n    exp2reg(fs, e, fs.freereg - 1);\n};\n\n\n/*\n** Ensures final expression result (including results from its jump\n** lists) is in some (any) register and return that register.\n*/\nconst luaK_exp2anyreg = function(fs, e) {\n    luaK_dischargevars(fs, e);\n    if (e.k === lparser.expkind.VNONRELOC) {  /* expression already has a register? */\n        if (!hasjumps(e))  /* no jumps? */\n            return e.u.info;  /* result is already in a register */\n        if (e.u.info >= fs.nactvar) {  /* reg. is not a local? */\n            exp2reg(fs, e, e.u.info);  /* put final result in it */\n            return e.u.info;\n        }\n    }\n    luaK_exp2nextreg(fs, e);  /* otherwise, use next available register */\n    return e.u.info;\n};\n\n/*\n** Ensures final expression result is either in a register or in an\n** upvalue.\n*/\nconst luaK_exp2anyregup = function(fs, e) {\n    if (e.k !== lparser.expkind.VUPVAL || hasjumps(e))\n        luaK_exp2anyreg(fs, e);\n};\n\n/*\n** Ensures final expression result is either in a register or it is\n** a constant.\n*/\nconst luaK_exp2val = function(fs, e) {\n    if (hasjumps(e))\n        luaK_exp2anyreg(fs, e);\n    else\n        luaK_dischargevars(fs, e);\n};\n\n/*\n** Ensures final expression result is in a valid R/K index\n** (that is, it is either in a register or in 'k' with an index\n** in the range of R/K indices).\n** Returns R/K index.\n*/\nconst luaK_exp2RK = function(fs, e) {\n    let ek = lparser.expkind;\n    let vk = false;\n    luaK_exp2val(fs, e);\n    switch (e.k) {  /* move constants to 'k' */\n        case ek.VTRUE: e.u.info = boolK(fs, true); vk = true; break;\n        case ek.VFALSE: e.u.info = boolK(fs, false); vk = true; break;\n        case ek.VNIL: e.u.info = nilK(fs); vk = true; break;\n        case ek.VKINT: e.u.info = luaK_intK(fs, e.u.ival); vk = true; break;\n        case ek.VKFLT: e.u.info = luaK_numberK(fs, e.u.nval); vk = true; break;\n        case ek.VK: vk = true; break;\n        default: break;\n    }\n\n    if (vk) {\n        e.k = ek.VK;\n        if (e.u.info <= lopcodes.MAXINDEXRK)  /* constant fits in 'argC'? */\n            return lopcodes.RKASK(e.u.info);\n    }\n\n    /* not a constant in the right range: put it in a register */\n    return luaK_exp2anyreg(fs, e);\n};\n\n/*\n** Generate code to store result of expression 'ex' into variable 'var'.\n*/\nconst luaK_storevar = function(fs, vr, ex) {\n    let ek = lparser.expkind;\n    switch (vr.k) {\n        case ek.VLOCAL: {\n            freeexp(fs, ex);\n            exp2reg(fs, ex, vr.u.info);  /* compute 'ex' into proper place */\n            return;\n        }\n        case ek.VUPVAL: {\n            let e = luaK_exp2anyreg(fs, ex);\n            luaK_codeABC(fs, OpCodesI.OP_SETUPVAL, e, vr.u.info, 0);\n            break;\n        }\n        case ek.VINDEXED: {\n            let op = (vr.u.ind.vt === ek.VLOCAL) ? OpCodesI.OP_SETTABLE : OpCodesI.OP_SETTABUP;\n            let e = luaK_exp2RK(fs, ex);\n            luaK_codeABC(fs, op, vr.u.ind.t, vr.u.ind.idx, e);\n            break;\n        }\n    }\n    freeexp(fs, ex);\n};\n\n\n/*\n** Emit SELF instruction (convert expression 'e' into 'e:key(e,').\n*/\nconst luaK_self = function(fs, e, key) {\n    luaK_exp2anyreg(fs, e);\n    let ereg = e.u.info;  /* register where 'e' was placed */\n    freeexp(fs, e);\n    e.u.info = fs.freereg;  /* base register for op_self */\n    e.k = lparser.expkind.VNONRELOC;  /* self expression has a fixed register */\n    luaK_reserveregs(fs, 2);  /* function and 'self' produced by op_self */\n    luaK_codeABC(fs, OpCodesI.OP_SELF, e.u.info, ereg, luaK_exp2RK(fs, key));\n    freeexp(fs, key);\n};\n\n/*\n** Negate condition 'e' (where 'e' is a comparison).\n*/\nconst negatecondition = function(fs, e) {\n    let pc = getjumpcontrol(fs, e.u.info);\n    lua_assert(lopcodes.testTMode(pc.opcode) && pc.opcode !== OpCodesI.OP_TESTSET && pc.opcode !== OpCodesI.OP_TEST);\n    lopcodes.SETARG_A(pc, !(pc.A));\n};\n\n/*\n** Emit instruction to jump if 'e' is 'cond' (that is, if 'cond'\n** is true, code will jump if 'e' is true.) Return jump position.\n** Optimize when 'e' is 'not' something, inverting the condition\n** and removing the 'not'.\n*/\nconst jumponcond = function(fs, e, cond) {\n    if (e.k === lparser.expkind.VRELOCABLE) {\n        let ie = getinstruction(fs, e);\n        if (ie.opcode === OpCodesI.OP_NOT) {\n            fs.pc--;  /* remove previous OP_NOT */\n            return condjump(fs, OpCodesI.OP_TEST, ie.B, 0, !cond);\n        }\n        /* else go through */\n    }\n    discharge2anyreg(fs, e);\n    freeexp(fs, e);\n    return condjump(fs, OpCodesI.OP_TESTSET, lopcodes.NO_REG, e.u.info, cond);\n};\n\n/*\n** Emit code to go through if 'e' is true, jump otherwise.\n*/\nconst luaK_goiftrue = function(fs, e) {\n    let ek = lparser.expkind;\n    let pc;  /* pc of new jump */\n    luaK_dischargevars(fs, e);\n    switch (e.k) {\n        case ek.VJMP: {  /* condition? */\n            negatecondition(fs, e);  /* jump when it is false */\n            pc = e.u.info;  /* save jump position */\n            break;\n        }\n        case ek.VK: case ek.VKFLT: case ek.VKINT: case ek.VTRUE: {\n            pc = NO_JUMP;  /* always true; do nothing */\n            break;\n        }\n        default: {\n            pc = jumponcond(fs, e, 0);  /* jump when false */\n            break;\n        }\n    }\n    e.f = luaK_concat(fs, e.f, pc);  /* insert new jump in false list */\n    luaK_patchtohere(fs, e.t);  /* true list jumps to here (to go through) */\n    e.t = NO_JUMP;\n};\n\n/*\n** Emit code to go through if 'e' is false, jump otherwise.\n*/\nconst luaK_goiffalse = function(fs, e) {\n    let ek = lparser.expkind;\n    let pc;  /* pc of new jump */\n    luaK_dischargevars(fs, e);\n    switch (e.k) {\n        case ek.VJMP: {\n            pc = e.u.info;  /* already jump if true */\n            break;\n        }\n        case ek.VNIL: case ek.VFALSE: {\n            pc = NO_JUMP;  /* always false; do nothing */\n            break;\n        }\n        default: {\n            pc = jumponcond(fs, e, 1);  /* jump if true */\n            break;\n        }\n    }\n    e.t = luaK_concat(fs, e.t, pc);  /* insert new jump in 't' list */\n    luaK_patchtohere(fs, e.f);  /* false list jumps to here (to go through) */\n    e.f = NO_JUMP;\n};\n\n/*\n** Code 'not e', doing constant folding.\n*/\nconst codenot = function(fs, e) {\n    let ek = lparser.expkind;\n    luaK_dischargevars(fs, e);\n    switch (e.k) {\n        case ek.VNIL: case ek.VFALSE: {\n            e.k = ek.VTRUE;  /* true === not nil === not false */\n            break;\n        }\n        case ek.VK: case ek.VKFLT: case ek.VKINT: case ek.VTRUE: {\n            e.k = ek.VFALSE;  /* false === not \"x\" === not 0.5 === not 1 === not true */\n            break;\n        }\n        case ek.VJMP: {\n            negatecondition(fs, e);\n            break;\n        }\n        case ek.VRELOCABLE:\n        case ek.VNONRELOC: {\n            discharge2anyreg(fs, e);\n            freeexp(fs, e);\n            e.u.info = luaK_codeABC(fs, OpCodesI.OP_NOT, 0, e.u.info, 0);\n            e.k = ek.VRELOCABLE;\n            break;\n        }\n    }\n    /* interchange true and false lists */\n    { let temp = e.f; e.f = e.t; e.t = temp; }\n    removevalues(fs, e.f);  /* values are useless when negated */\n    removevalues(fs, e.t);\n};\n\n/*\n** Create expression 't[k]'. 't' must have its final result already in a\n** register or upvalue.\n*/\nconst luaK_indexed = function(fs, t, k) {\n    let ek = lparser.expkind;\n    lua_assert(!hasjumps(t) && (lparser.vkisinreg(t.k) || t.k === ek.VUPVAL));\n    t.u.ind.t = t.u.info;  /* register or upvalue index */\n    t.u.ind.idx = luaK_exp2RK(fs, k);  /* R/K index for key */\n    t.u.ind.vt = (t.k === ek.VUPVAL) ? ek.VUPVAL : ek.VLOCAL;\n    t.k = ek.VINDEXED;\n};\n\n/*\n** Return false if folding can raise an error.\n** Bitwise operations need operands convertible to integers; division\n** operations cannot have 0 as divisor.\n*/\nconst validop = function(op, v1, v2) {\n    switch (op) {\n        case LUA_OPBAND: case LUA_OPBOR: case LUA_OPBXOR:\n        case LUA_OPSHL: case LUA_OPSHR: case LUA_OPBNOT: {  /* conversion errors */\n            return (lvm.tointeger(v1) !== false && lvm.tointeger(v2) !== false);\n        }\n        case LUA_OPDIV: case LUA_OPIDIV: case LUA_OPMOD:  /* division by 0 */\n            return (v2.value !== 0);\n        default: return 1;  /* everything else is valid */\n    }\n};\n\n/*\n** Try to \"constant-fold\" an operation; return 1 iff successful.\n** (In this case, 'e1' has the final result.)\n*/\nconst constfolding = function(op, e1, e2) {\n    let ek = lparser.expkind;\n    let v1, v2;\n    if (!(v1 = tonumeral(e1, true)) || !(v2 = tonumeral(e2, true)) || !validop(op, v1, v2))\n        return 0;  /* non-numeric operands or not safe to fold */\n    let res = new TValue(); /* FIXME */\n    lobject.luaO_arith(null, op, v1, v2, res);  /* does operation */\n    if (res.ttisinteger()) {\n        e1.k = ek.VKINT;\n        e1.u.ival = res.value;\n    }\n    else {  /* folds neither NaN nor 0.0 (to avoid problems with -0.0) */\n        let n = res.value;\n        if (isNaN(n) || n === 0)\n            return false;\n        e1.k = ek.VKFLT;\n        e1.u.nval = n;\n    }\n    return true;\n};\n\n/*\n** Emit code for unary expressions that \"produce values\"\n** (everything but 'not').\n** Expression to produce final result will be encoded in 'e'.\n*/\nconst codeunexpval = function(fs, op, e, line) {\n    let r = luaK_exp2anyreg(fs, e);  /* opcodes operate only on registers */\n    freeexp(fs, e);\n    e.u.info = luaK_codeABC(fs, op, 0, r, 0);  /* generate opcode */\n    e.k = lparser.expkind.VRELOCABLE;  /* all those operations are relocatable */\n    luaK_fixline(fs, line);\n};\n\n/*\n** Emit code for binary expressions that \"produce values\"\n** (everything but logical operators 'and'/'or' and comparison\n** operators).\n** Expression to produce final result will be encoded in 'e1'.\n** Because 'luaK_exp2RK' can free registers, its calls must be\n** in \"stack order\" (that is, first on 'e2', which may have more\n** recent registers to be released).\n*/\nconst codebinexpval = function(fs, op, e1, e2, line) {\n    let rk2 = luaK_exp2RK(fs, e2);  /* both operands are \"RK\" */\n    let rk1 = luaK_exp2RK(fs, e1);\n    freeexps(fs, e1, e2);\n    e1.u.info = luaK_codeABC(fs, op, 0, rk1, rk2);  /* generate opcode */\n    e1.k = lparser.expkind.VRELOCABLE;  /* all those operations are relocatable */\n    luaK_fixline(fs, line);\n};\n\n\n/*\n** Emit code for comparisons.\n** 'e1' was already put in R/K form by 'luaK_infix'.\n*/\nconst codecomp = function(fs, opr, e1, e2) {\n    let ek = lparser.expkind;\n\n    let rk1;\n    if (e1.k === ek.VK)\n        rk1 = lopcodes.RKASK(e1.u.info);\n    else {\n        lua_assert(e1.k === ek.VNONRELOC);\n        rk1 = e1.u.info;\n    }\n\n    let rk2 = luaK_exp2RK(fs, e2);\n    freeexps(fs, e1, e2);\n    switch (opr) {\n        case BinOpr.OPR_NE: {  /* '(a ~= b)' ==> 'not (a === b)' */\n            e1.u.info = condjump(fs, OpCodesI.OP_EQ, 0, rk1, rk2);\n            break;\n        }\n        case BinOpr.OPR_GT: case BinOpr.OPR_GE: {\n            /* '(a > b)' ==> '(b < a)';  '(a >= b)' ==> '(b <= a)' */\n            let op = (opr - BinOpr.OPR_NE) + OpCodesI.OP_EQ;\n            e1.u.info = condjump(fs, op, 1, rk2, rk1);  /* invert operands */\n            break;\n        }\n        default: {  /* '==', '<', '<=' use their own opcodes */\n            let op = (opr - BinOpr.OPR_EQ) + OpCodesI.OP_EQ;\n            e1.u.info = condjump(fs, op, 1, rk1, rk2);\n            break;\n        }\n    }\n    e1.k = ek.VJMP;\n};\n\n/*\n** Apply prefix operation 'op' to expression 'e'.\n*/\nconst luaK_prefix = function(fs, op, e, line) {\n    let ef = new lparser.expdesc();\n    ef.k = lparser.expkind.VKINT;\n    ef.u.ival = ef.u.nval = ef.u.info = 0;\n    ef.t = NO_JUMP;\n    ef.f = NO_JUMP;\n    switch (op) {\n        case UnOpr.OPR_MINUS: case UnOpr.OPR_BNOT:  /* use 'ef' as fake 2nd operand */\n            if (constfolding(op + LUA_OPUNM, e, ef))\n                break;\n            /* FALLTHROUGH */\n        case UnOpr.OPR_LEN:\n            codeunexpval(fs, op + OpCodesI.OP_UNM, e, line);\n            break;\n        case UnOpr.OPR_NOT: codenot(fs, e); break;\n    }\n};\n\n/*\n** Process 1st operand 'v' of binary operation 'op' before reading\n** 2nd operand.\n*/\nconst luaK_infix = function(fs, op, v) {\n    switch (op) {\n        case BinOpr.OPR_AND: {\n            luaK_goiftrue(fs, v);  /* go ahead only if 'v' is true */\n            break;\n        }\n        case BinOpr.OPR_OR: {\n            luaK_goiffalse(fs, v);  /* go ahead only if 'v' is false */\n            break;\n        }\n        case BinOpr.OPR_CONCAT: {\n            luaK_exp2nextreg(fs, v);  /* operand must be on the 'stack' */\n            break;\n        }\n        case BinOpr.OPR_ADD: case BinOpr.OPR_SUB:\n        case BinOpr.OPR_MUL: case BinOpr.OPR_DIV: case BinOpr.OPR_IDIV:\n        case BinOpr.OPR_MOD: case BinOpr.OPR_POW:\n        case BinOpr.OPR_BAND: case BinOpr.OPR_BOR: case BinOpr.OPR_BXOR:\n        case BinOpr.OPR_SHL: case BinOpr.OPR_SHR: {\n            if (!tonumeral(v, false))\n                luaK_exp2RK(fs, v);\n            /* else keep numeral, which may be folded with 2nd operand */\n            break;\n        }\n        default: {\n            luaK_exp2RK(fs, v);\n            break;\n        }\n    }\n};\n\n/*\n** Finalize code for binary operation, after reading 2nd operand.\n** For '(a .. b .. c)' (which is '(a .. (b .. c))', because\n** concatenation is right associative), merge second CONCAT into first\n** one.\n*/\nconst luaK_posfix = function(fs, op, e1, e2, line) {\n    let ek = lparser.expkind;\n    switch (op) {\n        case BinOpr.OPR_AND: {\n            lua_assert(e1.t === NO_JUMP);  /* list closed by 'luK_infix' */\n            luaK_dischargevars(fs, e2);\n            e2.f = luaK_concat(fs, e2.f, e1.f);\n            e1.to(e2);\n            break;\n        }\n        case BinOpr.OPR_OR: {\n            lua_assert(e1.f === NO_JUMP);  /* list closed by 'luK_infix' */\n            luaK_dischargevars(fs, e2);\n            e2.t = luaK_concat(fs, e2.t, e1.t);\n            e1.to(e2);\n            break;\n        }\n        case BinOpr.OPR_CONCAT: {\n            luaK_exp2val(fs, e2);\n            let ins = getinstruction(fs, e2);\n            if (e2.k === ek.VRELOCABLE && ins.opcode === OpCodesI.OP_CONCAT) {\n                lua_assert(e1.u.info === ins.B - 1);\n                freeexp(fs, e1);\n                lopcodes.SETARG_B(ins, e1.u.info);\n                e1.k = ek.VRELOCABLE; e1.u.info = e2.u.info;\n            }\n            else {\n                luaK_exp2nextreg(fs, e2);  /* operand must be on the 'stack' */\n                codebinexpval(fs, OpCodesI.OP_CONCAT, e1, e2, line);\n            }\n            break;\n        }\n        case BinOpr.OPR_ADD: case BinOpr.OPR_SUB: case BinOpr.OPR_MUL: case BinOpr.OPR_DIV:\n        case BinOpr.OPR_IDIV: case BinOpr.OPR_MOD: case BinOpr.OPR_POW:\n        case BinOpr.OPR_BAND: case BinOpr.OPR_BOR: case BinOpr.OPR_BXOR:\n        case BinOpr.OPR_SHL: case BinOpr.OPR_SHR: {\n            if (!constfolding(op + LUA_OPADD, e1, e2))\n                codebinexpval(fs, op + OpCodesI.OP_ADD, e1, e2, line);\n            break;\n        }\n        case BinOpr.OPR_EQ: case BinOpr.OPR_LT: case BinOpr.OPR_LE:\n        case BinOpr.OPR_NE: case BinOpr.OPR_GT: case BinOpr.OPR_GE: {\n            codecomp(fs, op, e1, e2);\n            break;\n        }\n    }\n\n    return e1;\n};\n\n/*\n** Change line information associated with current position.\n*/\nconst luaK_fixline = function(fs, line) {\n    fs.f.lineinfo[fs.pc - 1] = line;\n};\n\n/*\n** Emit a SETLIST instruction.\n** 'base' is register that keeps table;\n** 'nelems' is #table plus those to be stored now;\n** 'tostore' is number of values (in registers 'base + 1',...) to add to\n** table (or LUA_MULTRET to add up to stack top).\n*/\nconst luaK_setlist = function(fs, base, nelems, tostore) {\n    let c =  (nelems - 1)/lopcodes.LFIELDS_PER_FLUSH + 1;\n    let b = (tostore === LUA_MULTRET) ? 0 : tostore;\n    lua_assert(tostore !== 0 && tostore <= lopcodes.LFIELDS_PER_FLUSH);\n    if (c <= lopcodes.MAXARG_C)\n        luaK_codeABC(fs, OpCodesI.OP_SETLIST, base, b, c);\n    else if (c <= lopcodes.MAXARG_Ax) {\n        luaK_codeABC(fs, OpCodesI.OP_SETLIST, base, b, 0);\n        codeextraarg(fs, c);\n    }\n    else\n        llex.luaX_syntaxerror(fs.ls, to_luastring(\"constructor too long\", true));\n    fs.freereg = base + 1;  /* free registers with list values */\n};\n\n\nmodule.exports.BinOpr             = BinOpr;\nmodule.exports.NO_JUMP            = NO_JUMP;\nmodule.exports.UnOpr              = UnOpr;\nmodule.exports.getinstruction     = getinstruction;\nmodule.exports.luaK_checkstack    = luaK_checkstack;\nmodule.exports.luaK_code          = luaK_code;\nmodule.exports.luaK_codeABC       = luaK_codeABC;\nmodule.exports.luaK_codeABx       = luaK_codeABx;\nmodule.exports.luaK_codeAsBx      = luaK_codeAsBx;\nmodule.exports.luaK_codek         = luaK_codek;\nmodule.exports.luaK_concat        = luaK_concat;\nmodule.exports.luaK_dischargevars = luaK_dischargevars;\nmodule.exports.luaK_exp2RK        = luaK_exp2RK;\nmodule.exports.luaK_exp2anyreg    = luaK_exp2anyreg;\nmodule.exports.luaK_exp2anyregup  = luaK_exp2anyregup;\nmodule.exports.luaK_exp2nextreg   = luaK_exp2nextreg;\nmodule.exports.luaK_exp2val       = luaK_exp2val;\nmodule.exports.luaK_fixline       = luaK_fixline;\nmodule.exports.luaK_getlabel      = luaK_getlabel;\nmodule.exports.luaK_goiffalse     = luaK_goiffalse;\nmodule.exports.luaK_goiftrue      = luaK_goiftrue;\nmodule.exports.luaK_indexed       = luaK_indexed;\nmodule.exports.luaK_infix         = luaK_infix;\nmodule.exports.luaK_intK          = luaK_intK;\nmodule.exports.luaK_jump          = luaK_jump;\nmodule.exports.luaK_jumpto        = luaK_jumpto;\nmodule.exports.luaK_nil           = luaK_nil;\nmodule.exports.luaK_numberK       = luaK_numberK;\nmodule.exports.luaK_patchclose    = luaK_patchclose;\nmodule.exports.luaK_patchlist     = luaK_patchlist;\nmodule.exports.luaK_patchtohere   = luaK_patchtohere;\nmodule.exports.luaK_posfix        = luaK_posfix;\nmodule.exports.luaK_prefix        = luaK_prefix;\nmodule.exports.luaK_reserveregs   = luaK_reserveregs;\nmodule.exports.luaK_ret           = luaK_ret;\nmodule.exports.luaK_self          = luaK_self;\nmodule.exports.luaK_setlist       = luaK_setlist;\nmodule.exports.luaK_setmultret    = luaK_setmultret;\nmodule.exports.luaK_setoneret     = luaK_setoneret;\nmodule.exports.luaK_setreturns    = luaK_setreturns;\nmodule.exports.luaK_storevar      = luaK_storevar;\nmodule.exports.luaK_stringK       = luaK_stringK;\n","\"use strict\";\n\nconst {\n    LUA_HOOKCOUNT,\n    LUA_HOOKLINE,\n    LUA_MASKCOUNT,\n    LUA_MASKLINE,\n    constant_types: {\n        LUA_TBOOLEAN,\n        LUA_TNIL,\n        LUA_TTABLE\n    },\n    thread_status: {\n        LUA_ERRRUN,\n        LUA_YIELD\n    },\n    from_userstring,\n    luastring_eq,\n    luastring_indexOf,\n    to_luastring\n} = require('./defs.js');\nconst {\n    api_check,\n    lua_assert\n} = require('./llimits.js');\nconst { LUA_IDSIZE } = require('./luaconf.js');\nconst lapi     = require('./lapi.js');\nconst ldo      = require('./ldo.js');\nconst lfunc    = require('./lfunc.js');\nconst llex     = require('./llex.js');\nconst lobject  = require('./lobject.js');\nconst lopcodes = require('./lopcodes.js');\nconst lstate   = require('./lstate.js');\nconst ltable   = require('./ltable.js');\nconst ltm      = require('./ltm.js');\nconst lvm      = require('./lvm.js');\n\nconst currentpc = function(ci) {\n    lua_assert(ci.callstatus & lstate.CIST_LUA);\n    return ci.l_savedpc - 1;\n};\n\nconst currentline = function(ci) {\n    return ci.func.value.p.lineinfo.length !== 0 ? ci.func.value.p.lineinfo[currentpc(ci)] : -1;\n};\n\n/*\n** If function yielded, its 'func' can be in the 'extra' field. The\n** next function restores 'func' to its correct value for debugging\n** purposes. (It exchanges 'func' and 'extra'; so, when called again,\n** after debugging, it also \"re-restores\" ** 'func' to its altered value.\n*/\nconst swapextra = function(L) {\n    if (L.status === LUA_YIELD) {\n        let ci = L.ci;  /* get function that yielded */\n        let temp = ci.funcOff;  /* exchange its 'func' and 'extra' values */\n        ci.func = L.stack[ci.extra];\n        ci.funcOff = ci.extra;\n        ci.extra = temp;\n    }\n};\n\nconst lua_sethook = function(L, func, mask, count) {\n    if (func === null || mask === 0) {  /* turn off hooks? */\n        mask = 0;\n        func = null;\n    }\n    if (L.ci.callstatus & lstate.CIST_LUA)\n        L.oldpc = L.ci.l_savedpc;\n    L.hook = func;\n    L.basehookcount = count;\n    L.hookcount = L.basehookcount;\n    L.hookmask = mask;\n};\n\nconst lua_gethook = function(L) {\n    return L.hook;\n};\n\n\nconst lua_gethookmask = function(L) {\n    return L.hookmask;\n};\n\n\nconst lua_gethookcount = function(L) {\n    return L.basehookcount;\n};\n\nconst lua_getstack = function(L, level, ar) {\n    let ci;\n    let status;\n    if (level < 0) return 0;  /* invalid (negative) level */\n    for (ci = L.ci; level > 0 && ci !== L.base_ci; ci = ci.previous)\n        level--;\n    if (level === 0 && ci !== L.base_ci) {  /* level found? */\n        status = 1;\n        ar.i_ci = ci;\n    } else\n        status = 0;  /* no such level */\n    return status;\n};\n\nconst upvalname = function(p, uv) {\n    lua_assert(uv < p.upvalues.length);\n    let s = p.upvalues[uv].name;\n    if (s === null) return to_luastring(\"?\", true);\n    return s.getstr();\n};\n\nconst findvararg = function(ci, n) {\n    let nparams = ci.func.value.p.numparams;\n    if (n >= ci.l_base - ci.funcOff - nparams)\n        return null;  /* no such vararg */\n    else {\n        return {\n            pos: ci.funcOff + nparams + n,\n            name: to_luastring(\"(*vararg)\", true)  /* generic name for any vararg */\n        };\n    }\n};\n\nconst findlocal = function(L, ci, n) {\n    let base, name = null;\n\n    if (ci.callstatus & lstate.CIST_LUA) {\n        if (n < 0)  /* access to vararg values? */\n            return findvararg(ci, -n);\n        else {\n            base = ci.l_base;\n            name = lfunc.luaF_getlocalname(ci.func.value.p, n, currentpc(ci));\n        }\n    } else\n        base = ci.funcOff + 1;\n\n    if (name === null) {  /* no 'standard' name? */\n        let limit = ci === L.ci ? L.top : ci.next.funcOff;\n        if (limit - base >= n && n > 0)  /* is 'n' inside 'ci' stack? */\n            name = to_luastring(\"(*temporary)\", true);  /* generic name for any valid slot */\n        else\n            return null;  /* no name */\n    }\n    return {\n        pos: base + (n - 1),\n        name: name\n    };\n};\n\nconst lua_getlocal = function(L, ar, n) {\n    let name;\n    swapextra(L);\n    if (ar === null) {  /* information about non-active function? */\n        if (!L.stack[L.top - 1].ttisLclosure())  /* not a Lua function? */\n            name = null;\n        else  /* consider live variables at function start (parameters) */\n            name = lfunc.luaF_getlocalname(L.stack[L.top - 1].value.p, n, 0);\n    } else {  /* active function; get information through 'ar' */\n        let local = findlocal(L, ar.i_ci, n);\n        if (local) {\n            name = local.name;\n            lobject.pushobj2s(L, L.stack[local.pos]);\n            api_check(L, L.top <= L.ci.top, \"stack overflow\");\n        } else {\n            name = null;\n        }\n    }\n    swapextra(L);\n    return name;\n};\n\nconst lua_setlocal = function(L, ar, n) {\n    let name;\n    swapextra(L);\n    let local = findlocal(L, ar.i_ci, n);\n    if (local) {\n        name = local.name;\n        lobject.setobjs2s(L, local.pos, L.top - 1);\n        delete L.stack[--L.top];  /* pop value */\n    } else {\n        name = null;\n    }\n    swapextra(L);\n    return name;\n};\n\nconst funcinfo = function(ar, cl) {\n    if (cl === null || cl instanceof lobject.CClosure) {\n        ar.source = to_luastring(\"=[JS]\", true);\n        ar.linedefined = -1;\n        ar.lastlinedefined = -1;\n        ar.what = to_luastring(\"J\", true);\n    } else {\n        let p = cl.p;\n        ar.source = p.source ? p.source.getstr() : to_luastring(\"=?\", true);\n        ar.linedefined = p.linedefined;\n        ar.lastlinedefined = p.lastlinedefined;\n        ar.what = ar.linedefined === 0 ? to_luastring(\"main\", true) : to_luastring(\"Lua\", true);\n    }\n\n    ar.short_src = lobject.luaO_chunkid(ar.source, LUA_IDSIZE);\n};\n\nconst collectvalidlines = function(L, f) {\n    if (f === null || f instanceof lobject.CClosure) {\n        L.stack[L.top] = new lobject.TValue(LUA_TNIL, null);\n        lapi.api_incr_top(L);\n    } else {\n        let lineinfo = f.p.lineinfo;\n        let t = ltable.luaH_new(L);\n        L.stack[L.top] = new lobject.TValue(LUA_TTABLE, t);\n        lapi.api_incr_top(L);\n        let v = new lobject.TValue(LUA_TBOOLEAN, true);\n        for (let i = 0; i < lineinfo.length; i++)\n            ltable.luaH_setint(t, lineinfo[i], v);\n    }\n};\n\nconst getfuncname = function(L, ci) {\n    let r = {\n        name: null,\n        funcname: null\n    };\n    if (ci === null)\n        return null;\n    else if (ci.callstatus & lstate.CIST_FIN) {  /* is this a finalizer? */\n        r.name = to_luastring(\"__gc\", true);\n        r.funcname = to_luastring(\"metamethod\", true);  /* report it as such */\n        return r;\n    }\n    /* calling function is a known Lua function? */\n    else if (!(ci.callstatus & lstate.CIST_TAIL) && ci.previous.callstatus & lstate.CIST_LUA)\n        return funcnamefromcode(L, ci.previous);\n    else return null;  /* no way to find a name */\n};\n\nconst auxgetinfo = function(L, what, ar, f, ci) {\n    let status = 1;\n    for (; what.length > 0; what = what.subarray(1)) {\n        switch (what[0]) {\n            case 83 /* ('S').charCodeAt(0) */: {\n                funcinfo(ar, f);\n                break;\n            }\n            case 108 /* ('l').charCodeAt(0) */: {\n                ar.currentline = ci && ci.callstatus & lstate.CIST_LUA ? currentline(ci) : -1;\n                break;\n            }\n            case 117 /* ('u').charCodeAt(0) */: {\n                ar.nups = f === null ? 0 : f.nupvalues;\n                if (f === null || f instanceof lobject.CClosure) {\n                    ar.isvararg = true;\n                    ar.nparams = 0;\n                } else {\n                    ar.isvararg = f.p.is_vararg;\n                    ar.nparams = f.p.numparams;\n                }\n                break;\n            }\n            case 116 /* ('t').charCodeAt(0) */: {\n                ar.istailcall = ci ? ci.callstatus & lstate.CIST_TAIL : 0;\n                break;\n            }\n            case 110 /* ('n').charCodeAt(0) */: {\n                let r = getfuncname(L, ci);\n                if (r === null) {\n                    ar.namewhat = to_luastring(\"\", true);\n                    ar.name = null;\n                } else {\n                    ar.namewhat = r.funcname;\n                    ar.name = r.name;\n                }\n                break;\n            }\n            case 76 /* ('L').charCodeAt(0) */:\n            case 102 /* ('f').charCodeAt(0) */:  /* handled by lua_getinfo */\n                break;\n            default: status = 0;  /* invalid option */\n        }\n    }\n\n    return status;\n};\n\nconst lua_getinfo = function(L, what, ar) {\n    what = from_userstring(what);\n    let status, cl, ci, func;\n    swapextra(L);\n    if (what[0] === 62 /* ('>').charCodeAt(0) */) {\n        ci = null;\n        func = L.stack[L.top - 1];\n        api_check(L, func.ttisfunction(), \"function expected\");\n        what = what.subarray(1);  /* skip the '>' */\n        L.top--;  /* pop function */\n    } else {\n        ci = ar.i_ci;\n        func = ci.func;\n        lua_assert(ci.func.ttisfunction());\n    }\n\n    cl = func.ttisclosure() ? func.value : null;\n    status = auxgetinfo(L, what, ar, cl, ci);\n    if (luastring_indexOf(what, 102 /* ('f').charCodeAt(0) */) >= 0) {\n        lobject.pushobj2s(L, func);\n        api_check(L, L.top <= L.ci.top, \"stack overflow\");\n    }\n\n    swapextra(L);\n    if (luastring_indexOf(what, 76 /* ('L').charCodeAt(0) */) >= 0)\n        collectvalidlines(L, cl);\n\n    return status;\n};\n\nconst kname = function(p, pc, c) {\n    let r = {\n        name: null,\n        funcname: null\n    };\n\n    if (lopcodes.ISK(c)) {  /* is 'c' a constant? */\n        let kvalue = p.k[lopcodes.INDEXK(c)];\n        if (kvalue.ttisstring()) {  /* literal constant? */\n            r.name = kvalue.svalue();  /* it is its own name */\n            return r;\n        }\n        /* else no reasonable name found */\n    } else {  /* 'c' is a register */\n        let what = getobjname(p, pc, c); /* search for 'c' */\n        if (what && what.funcname[0] === 99 /* ('c').charCodeAt(0) */) {  /* found a constant name? */\n            return what;  /* 'name' already filled */\n        }\n        /* else no reasonable name found */\n    }\n    r.name = to_luastring(\"?\", true);\n    return r;  /* no reasonable name found */\n};\n\nconst filterpc = function(pc, jmptarget) {\n    if (pc < jmptarget)  /* is code conditional (inside a jump)? */\n        return -1;  /* cannot know who sets that register */\n    else return pc;  /* current position sets that register */\n};\n\n/*\n** try to find last instruction before 'lastpc' that modified register 'reg'\n*/\nconst findsetreg = function(p, lastpc, reg) {\n    let setreg = -1;  /* keep last instruction that changed 'reg' */\n    let jmptarget = 0;  /* any code before this address is conditional */\n    let OCi = lopcodes.OpCodesI;\n    for (let pc = 0; pc < lastpc; pc++) {\n        let i = p.code[pc];\n        let a = i.A;\n        switch (i.opcode) {\n            case OCi.OP_LOADNIL: {\n                let b = i.B;\n                if (a <= reg && reg <= a + b)  /* set registers from 'a' to 'a+b' */\n                    setreg = filterpc(pc, jmptarget);\n                break;\n            }\n            case OCi.OP_TFORCALL: {\n                if (reg >= a + 2)  /* affect all regs above its base */\n                    setreg = filterpc(pc, jmptarget);\n                break;\n            }\n            case OCi.OP_CALL:\n            case OCi.OP_TAILCALL: {\n                if (reg >= a)  /* affect all registers above base */\n                    setreg = filterpc(pc, jmptarget);\n                break;\n            }\n            case OCi.OP_JMP: {\n                let b = i.sBx;\n                let dest = pc + 1 + b;\n                /* jump is forward and do not skip 'lastpc'? */\n                if (pc < dest && dest <= lastpc) {\n                    if (dest > jmptarget)\n                        jmptarget = dest;  /* update 'jmptarget' */\n                }\n                break;\n            }\n            default:\n                if (lopcodes.testAMode(i.opcode) && reg === a)\n                    setreg = filterpc(pc, jmptarget);\n                break;\n        }\n    }\n\n    return setreg;\n};\n\n\nconst getobjname = function(p, lastpc, reg) {\n    let r = {\n        name: lfunc.luaF_getlocalname(p, reg + 1, lastpc),\n        funcname: null\n    };\n\n    if (r.name) {  /* is a local? */\n        r.funcname = to_luastring(\"local\", true);\n        return r;\n    }\n\n    /* else try symbolic execution */\n    let pc = findsetreg(p, lastpc, reg);\n    let OCi = lopcodes.OpCodesI;\n    if (pc !== -1) {  /* could find instruction? */\n        let i = p.code[pc];\n        switch (i.opcode) {\n            case OCi.OP_MOVE: {\n                let b = i.B;  /* move from 'b' to 'a' */\n                if (b < i.A)\n                    return getobjname(p, pc, b);  /* get name for 'b' */\n                break;\n            }\n            case OCi.OP_GETTABUP:\n            case OCi.OP_GETTABLE: {\n                let k = i.C;  /* key index */\n                let t = i.B;  /* table index */\n                let vn = i.opcode === OCi.OP_GETTABLE ? lfunc.luaF_getlocalname(p, t + 1, pc) : upvalname(p, t);\n                r.name = kname(p, pc, k).name;\n                r.funcname = (vn && luastring_eq(vn, llex.LUA_ENV)) ? to_luastring(\"global\", true) : to_luastring(\"field\", true);\n                return r;\n            }\n            case OCi.OP_GETUPVAL: {\n                r.name = upvalname(p, i.B);\n                r.funcname = to_luastring(\"upvalue\", true);\n                return r;\n            }\n            case OCi.OP_LOADK:\n            case OCi.OP_LOADKX: {\n                let b = i.opcode === OCi.OP_LOADK ? i.Bx : p.code[pc + 1].Ax;\n                if (p.k[b].ttisstring()) {\n                    r.name = p.k[b].svalue();\n                    r.funcname = to_luastring(\"constant\", true);\n                    return r;\n                }\n                break;\n            }\n            case OCi.OP_SELF: {\n                let k = i.C;\n                r.name = kname(p, pc, k).name;\n                r.funcname = to_luastring(\"method\", true);\n                return r;\n            }\n            default: break;\n        }\n    }\n\n    return null;\n};\n\n/*\n** Try to find a name for a function based on the code that called it.\n** (Only works when function was called by a Lua function.)\n** Returns what the name is (e.g., \"for iterator\", \"method\",\n** \"metamethod\") and sets '*name' to point to the name.\n*/\nconst funcnamefromcode = function(L, ci) {\n    let r = {\n        name: null,\n        funcname: null\n    };\n\n    let tm = 0;  /* (initial value avoids warnings) */\n    let p = ci.func.value.p;  /* calling function */\n    let pc = currentpc(ci);  /* calling instruction index */\n    let i = p.code[pc];  /* calling instruction */\n    let OCi = lopcodes.OpCodesI;\n\n    if (ci.callstatus & lstate.CIST_HOOKED) {\n        r.name = to_luastring(\"?\", true);\n        r.funcname = to_luastring(\"hook\", true);\n        return r;\n    }\n\n    switch (i.opcode) {\n        case OCi.OP_CALL:\n        case OCi.OP_TAILCALL:\n            return getobjname(p, pc, i.A);  /* get function name */\n        case OCi.OP_TFORCALL:\n            r.name = to_luastring(\"for iterator\", true);\n            r.funcname = to_luastring(\"for iterator\", true);\n            return r;\n        /* other instructions can do calls through metamethods */\n        case OCi.OP_SELF:\n        case OCi.OP_GETTABUP:\n        case OCi.OP_GETTABLE:\n            tm = ltm.TMS.TM_INDEX;\n            break;\n        case OCi.OP_SETTABUP:\n        case OCi.OP_SETTABLE:\n            tm = ltm.TMS.TM_NEWINDEX;\n            break;\n        case OCi.OP_ADD:    tm = ltm.TMS.TM_ADD;    break;\n        case OCi.OP_SUB:    tm = ltm.TMS.TM_SUB;    break;\n        case OCi.OP_MUL:    tm = ltm.TMS.TM_MUL;    break;\n        case OCi.OP_MOD:    tm = ltm.TMS.TM_MOD;    break;\n        case OCi.OP_POW:    tm = ltm.TMS.TM_POW;    break;\n        case OCi.OP_DIV:    tm = ltm.TMS.TM_DIV;    break;\n        case OCi.OP_IDIV:   tm = ltm.TMS.TM_IDIV;   break;\n        case OCi.OP_BAND:   tm = ltm.TMS.TM_BAND;   break;\n        case OCi.OP_BOR:    tm = ltm.TMS.TM_BOR;    break;\n        case OCi.OP_BXOR:   tm = ltm.TMS.TM_BXOR;   break;\n        case OCi.OP_SHL:    tm = ltm.TMS.TM_SHL;    break;\n        case OCi.OP_SHR:    tm = ltm.TMS.TM_SHR;    break;\n        case OCi.OP_UNM:    tm = ltm.TMS.TM_UNM;    break;\n        case OCi.OP_BNOT:   tm = ltm.TMS.TM_BNOT;   break;\n        case OCi.OP_LEN:    tm = ltm.TMS.TM_LEN;    break;\n        case OCi.OP_CONCAT: tm = ltm.TMS.TM_CONCAT; break;\n        case OCi.OP_EQ:     tm = ltm.TMS.TM_EQ;     break;\n        case OCi.OP_LT:     tm = ltm.TMS.TM_LT;     break;\n        case OCi.OP_LE:     tm = ltm.TMS.TM_LE;     break;\n        default:\n            return null;  /* cannot find a reasonable name */\n    }\n\n    r.name = L.l_G.tmname[tm].getstr();\n    r.funcname = to_luastring(\"metamethod\", true);\n    return r;\n};\n\nconst isinstack = function(L, ci, o) {\n    for (let i = ci.l_base; i < ci.top; i++) {\n        if (L.stack[i] === o)\n            return i;\n    }\n\n    return false;\n};\n\n/*\n** Checks whether value 'o' came from an upvalue. (That can only happen\n** with instructions OP_GETTABUP/OP_SETTABUP, which operate directly on\n** upvalues.)\n*/\nconst getupvalname = function(L, ci, o) {\n    let c = ci.func.value;\n    for (let i = 0; i < c.nupvalues; i++) {\n        if (c.upvals[i] === o) {\n            return {\n                name: upvalname(c.p, i),\n                funcname: to_luastring('upvalue', true)\n            };\n        }\n    }\n\n    return null;\n};\n\nconst varinfo = function(L, o) {\n    let ci = L.ci;\n    let kind = null;\n    if (ci.callstatus & lstate.CIST_LUA) {\n        kind = getupvalname(L, ci, o);  /* check whether 'o' is an upvalue */\n        let stkid = isinstack(L, ci, o);\n        if (!kind && stkid)  /* no? try a register */\n            kind = getobjname(ci.func.value.p, currentpc(ci), stkid - ci.l_base);\n    }\n\n    return kind ? lobject.luaO_pushfstring(L, to_luastring(\" (%s '%s')\", true), kind.funcname, kind.name) : to_luastring(\"\", true);\n};\n\nconst luaG_typeerror = function(L, o, op) {\n    let t = ltm.luaT_objtypename(L, o);\n    luaG_runerror(L, to_luastring(\"attempt to %s a %s value%s\", true), op, t, varinfo(L, o));\n};\n\nconst luaG_concaterror = function(L, p1, p2) {\n    if (p1.ttisstring() || lvm.cvt2str(p1)) p1 = p2;\n    luaG_typeerror(L, p1, to_luastring('concatenate', true));\n};\n\n/*\n** Error when both values are convertible to numbers, but not to integers\n*/\nconst luaG_opinterror = function(L, p1, p2, msg) {\n    if (lvm.tonumber(p1) === false)\n        p2 = p1;\n    luaG_typeerror(L, p2, msg);\n};\n\nconst luaG_ordererror = function(L, p1, p2) {\n    let t1 = ltm.luaT_objtypename(L, p1);\n    let t2 = ltm.luaT_objtypename(L, p2);\n    if (luastring_eq(t1, t2))\n        luaG_runerror(L, to_luastring(\"attempt to compare two %s values\", true), t1);\n    else\n        luaG_runerror(L, to_luastring(\"attempt to compare %s with %s\", true), t1, t2);\n};\n\n/* add src:line information to 'msg' */\nconst luaG_addinfo = function(L, msg, src, line) {\n    let buff;\n    if (src)\n        buff = lobject.luaO_chunkid(src.getstr(), LUA_IDSIZE);\n    else\n        buff = to_luastring(\"?\", true);\n\n    return lobject.luaO_pushfstring(L, to_luastring(\"%s:%d: %s\", true), buff, line, msg);\n};\n\nconst luaG_runerror = function(L, fmt, ...argp) {\n    let ci = L.ci;\n    let msg = lobject.luaO_pushvfstring(L, fmt, argp);\n    if (ci.callstatus & lstate.CIST_LUA)  /* if Lua function, add source:line information */\n        luaG_addinfo(L, msg, ci.func.value.p.source, currentline(ci));\n    luaG_errormsg(L);\n};\n\nconst luaG_errormsg = function(L) {\n    if (L.errfunc !== 0) {  /* is there an error handling function? */\n        let errfunc = L.errfunc;\n        lobject.pushobj2s(L, L.stack[L.top - 1]); /* move argument */\n        lobject.setobjs2s(L, L.top - 2, errfunc); /* push function */\n        ldo.luaD_callnoyield(L, L.top - 2, 1);\n    }\n\n    ldo.luaD_throw(L, LUA_ERRRUN);\n};\n\n/*\n** Error when both values are convertible to numbers, but not to integers\n*/\nconst luaG_tointerror = function(L, p1, p2) {\n    let temp = lvm.tointeger(p1);\n    if (temp === false)\n        p2 = p1;\n    luaG_runerror(L, to_luastring(\"number%s has no integer representation\", true), varinfo(L, p2));\n};\n\nconst luaG_traceexec = function(L) {\n    let ci = L.ci;\n    let mask = L.hookmask;\n    let counthook = (--L.hookcount === 0 && (mask & LUA_MASKCOUNT));\n    if (counthook)\n        L.hookcount = L.basehookcount;  /* reset count */\n    else if (!(mask & LUA_MASKLINE))\n        return;  /* no line hook and count != 0; nothing to be done */\n    if (ci.callstatus & lstate.CIST_HOOKYIELD) {  /* called hook last time? */\n        ci.callstatus &= ~lstate.CIST_HOOKYIELD;  /* erase mark */\n        return;  /* do not call hook again (VM yielded, so it did not move) */\n    }\n    if (counthook)\n        ldo.luaD_hook(L, LUA_HOOKCOUNT, -1);  /* call count hook */\n    if (mask & LUA_MASKLINE) {\n        let p = ci.func.value.p;\n        let npc = ci.l_savedpc - 1; // pcRel(ci.u.l.savedpc, p);\n        let newline = p.lineinfo.length !== 0 ? p.lineinfo[npc] : -1;\n        if (npc === 0 ||  /* call linehook when enter a new function, */\n            ci.l_savedpc <= L.oldpc ||  /* when jump back (loop), or when */\n            newline !== (p.lineinfo.length !== 0 ? p.lineinfo[L.oldpc - 1] : -1))  /* enter a new line */\n            ldo.luaD_hook(L, LUA_HOOKLINE, newline);  /* call line hook */\n    }\n    L.oldpc = ci.l_savedpc;\n    if (L.status === LUA_YIELD) {  /* did hook yield? */\n        if (counthook)\n            L.hookcount = 1;  /* undo decrement to zero */\n        ci.l_savedpc--;  /* undo increment (resume will increment it again) */\n        ci.callstatus |= lstate.CIST_HOOKYIELD;  /* mark that it yielded */\n        ci.funcOff = L.top - 1;  /* protect stack below results */\n        ci.func = L.stack[ci.funcOff];\n        ldo.luaD_throw(L, LUA_YIELD);\n    }\n};\n\nmodule.exports.luaG_addinfo     = luaG_addinfo;\nmodule.exports.luaG_concaterror = luaG_concaterror;\nmodule.exports.luaG_errormsg    = luaG_errormsg;\nmodule.exports.luaG_opinterror  = luaG_opinterror;\nmodule.exports.luaG_ordererror  = luaG_ordererror;\nmodule.exports.luaG_runerror    = luaG_runerror;\nmodule.exports.luaG_tointerror  = luaG_tointerror;\nmodule.exports.luaG_traceexec   = luaG_traceexec;\nmodule.exports.luaG_typeerror   = luaG_typeerror;\nmodule.exports.lua_gethook      = lua_gethook;\nmodule.exports.lua_gethookcount = lua_gethookcount;\nmodule.exports.lua_gethookmask  = lua_gethookmask;\nmodule.exports.lua_getinfo      = lua_getinfo;\nmodule.exports.lua_getlocal     = lua_getlocal;\nmodule.exports.lua_getstack     = lua_getstack;\nmodule.exports.lua_sethook      = lua_sethook;\nmodule.exports.lua_setlocal     = lua_setlocal;\n","\"use strict\";\n\nconst {\n    LUA_HOOKCALL,\n    LUA_HOOKRET,\n    LUA_HOOKTAILCALL,\n    LUA_MASKCALL,\n    LUA_MASKLINE,\n    LUA_MASKRET,\n    LUA_MINSTACK,\n    LUA_MULTRET,\n    LUA_SIGNATURE,\n    constant_types: {\n        LUA_TCCL,\n        LUA_TLCF,\n        LUA_TLCL,\n        LUA_TNIL\n    },\n    thread_status: {\n        LUA_ERRMEM,\n        LUA_ERRERR,\n        LUA_ERRRUN,\n        LUA_ERRSYNTAX,\n        LUA_OK,\n        LUA_YIELD\n    },\n    lua_Debug,\n    luastring_indexOf,\n    to_luastring\n} = require('./defs.js');\nconst lapi     = require('./lapi.js');\nconst ldebug   = require('./ldebug.js');\nconst lfunc    = require('./lfunc.js');\nconst {\n    api_check,\n    lua_assert,\n    LUAI_MAXCCALLS\n} = require('./llimits.js');\nconst lobject  = require('./lobject.js');\nconst lopcodes = require('./lopcodes.js');\nconst lparser  = require('./lparser.js');\nconst lstate   = require('./lstate.js');\nconst { luaS_newliteral } = require('./lstring.js');\nconst ltm      = require('./ltm.js');\nconst { LUAI_MAXSTACK } = require('./luaconf.js');\nconst lundump  = require('./lundump.js');\nconst lvm      = require('./lvm.js');\nconst { MBuffer } = require('./lzio.js');\n\nconst adjust_top = function(L, newtop) {\n    if (L.top < newtop) {\n        while (L.top < newtop)\n            L.stack[L.top++] = new lobject.TValue(LUA_TNIL, null);\n    } else {\n        while (L.top > newtop)\n            delete L.stack[--L.top];\n    }\n};\n\nconst seterrorobj = function(L, errcode, oldtop) {\n    let current_top = L.top;\n\n    /* extend stack so that L.stack[oldtop] is sure to exist */\n    while (L.top < oldtop + 1)\n        L.stack[L.top++] = new lobject.TValue(LUA_TNIL, null);\n\n    switch (errcode) {\n        case LUA_ERRMEM: {\n            lobject.setsvalue2s(L, oldtop, luaS_newliteral(L, \"not enough memory\"));\n            break;\n        }\n        case LUA_ERRERR: {\n            lobject.setsvalue2s(L, oldtop, luaS_newliteral(L, \"error in error handling\"));\n            break;\n        }\n        default: {\n            lobject.setobjs2s(L, oldtop, current_top - 1);\n        }\n    }\n\n    while (L.top > oldtop + 1)\n        delete L.stack[--L.top];\n};\n\nconst ERRORSTACKSIZE = LUAI_MAXSTACK + 200;\n\nconst luaD_reallocstack = function(L, newsize) {\n    lua_assert(newsize <= LUAI_MAXSTACK || newsize == ERRORSTACKSIZE);\n    lua_assert(L.stack_last == L.stack.length - lstate.EXTRA_STACK);\n    L.stack.length = newsize;\n    L.stack_last = newsize - lstate.EXTRA_STACK;\n};\n\nconst luaD_growstack = function(L, n) {\n    let size = L.stack.length;\n    if (size > LUAI_MAXSTACK)\n        luaD_throw(L, LUA_ERRERR);\n    else {\n        let needed = L.top + n + lstate.EXTRA_STACK;\n        let newsize = 2 * size;\n        if (newsize > LUAI_MAXSTACK) newsize = LUAI_MAXSTACK;\n        if (newsize < needed) newsize = needed;\n        if (newsize > LUAI_MAXSTACK) {  /* stack overflow? */\n            luaD_reallocstack(L, ERRORSTACKSIZE);\n            ldebug.luaG_runerror(L, to_luastring(\"stack overflow\", true));\n        }\n        else\n            luaD_reallocstack(L, newsize);\n    }\n};\n\nconst luaD_checkstack = function(L, n) {\n    if (L.stack_last - L.top <= n)\n        luaD_growstack(L, n);\n};\n\nconst stackinuse = function(L) {\n    let lim = L.top;\n    for (let ci = L.ci; ci !== null; ci = ci.previous) {\n        if (lim < ci.top) lim = ci.top;\n    }\n    lua_assert(lim <= L.stack_last);\n    return lim + 1; /* part of stack in use */\n};\n\nconst luaD_shrinkstack = function(L) {\n    let inuse = stackinuse(L);\n    let goodsize = inuse + Math.floor(inuse / 8) + 2*lstate.EXTRA_STACK;\n    if (goodsize > LUAI_MAXSTACK)\n        goodsize = LUAI_MAXSTACK;  /* respect stack limit */\n    if (L.stack.length > LUAI_MAXSTACK)  /* had been handling stack overflow? */\n        lstate.luaE_freeCI(L);  /* free all CIs (list grew because of an error) */\n    /* if thread is currently not handling a stack overflow and its\n     good size is smaller than current size, shrink its stack */\n    if (inuse <= (LUAI_MAXSTACK - lstate.EXTRA_STACK) && goodsize < L.stack.length)\n        luaD_reallocstack(L, goodsize);\n};\n\nconst luaD_inctop = function(L) {\n    luaD_checkstack(L, 1);\n    L.stack[L.top++] = new lobject.TValue(LUA_TNIL, null);\n};\n\n/*\n** Prepares a function call: checks the stack, creates a new CallInfo\n** entry, fills in the relevant information, calls hook if needed.\n** If function is a JS function, does the call, too. (Otherwise, leave\n** the execution ('luaV_execute') to the caller, to allow stackless\n** calls.) Returns true iff function has been executed (JS function).\n*/\nconst luaD_precall = function(L, off, nresults) {\n    let func = L.stack[off];\n\n    switch(func.type) {\n        case LUA_TCCL:\n        case LUA_TLCF: {\n            let f = func.type === LUA_TCCL ? func.value.f : func.value;\n\n            luaD_checkstack(L, LUA_MINSTACK);\n            let ci = lstate.luaE_extendCI(L);\n            ci.funcOff = off;\n            ci.nresults = nresults;\n            ci.func = func;\n            ci.top = L.top + LUA_MINSTACK;\n            lua_assert(ci.top <= L.stack_last);\n            ci.callstatus = 0;\n            if (L.hookmask & LUA_MASKCALL)\n                luaD_hook(L, LUA_HOOKCALL, -1);\n            let n = f(L); /* do the actual call */\n            if (typeof n !== \"number\" || n < 0 || (n|0) !== n)\n                throw Error(\"invalid return value from JS function (expected integer)\");\n            lapi.api_checknelems(L, n);\n\n            luaD_poscall(L, ci, L.top - n, n);\n\n            return true;\n        }\n        case LUA_TLCL: {\n            let base;\n            let p = func.value.p;\n            let n = L.top - off - 1;\n            let fsize = p.maxstacksize;\n            luaD_checkstack(L, fsize);\n            if (p.is_vararg) {\n                base = adjust_varargs(L, p, n);\n            } else {\n                for (; n < p.numparams; n++)\n                    L.stack[L.top++] = new lobject.TValue(LUA_TNIL, null); // complete missing arguments\n                base = off + 1;\n            }\n\n            let ci = lstate.luaE_extendCI(L);\n            ci.funcOff = off;\n            ci.nresults = nresults;\n            ci.func = func;\n            ci.l_base = base;\n            ci.top = base + fsize;\n            adjust_top(L, ci.top);\n            ci.l_code = p.code;\n            ci.l_savedpc = 0;\n            ci.callstatus = lstate.CIST_LUA;\n            if (L.hookmask & LUA_MASKCALL)\n                callhook(L, ci);\n            return false;\n        }\n        default:\n            luaD_checkstack(L, 1);\n            tryfuncTM(L, off, func);\n            return luaD_precall(L, off, nresults);\n    }\n};\n\nconst luaD_poscall = function(L, ci, firstResult, nres) {\n    let wanted = ci.nresults;\n\n    if (L.hookmask & (LUA_MASKRET | LUA_MASKLINE)) {\n        if (L.hookmask & LUA_MASKRET)\n            luaD_hook(L, LUA_HOOKRET, -1);\n        L.oldpc = ci.previous.l_savedpc;  /* 'oldpc' for caller function */\n    }\n\n    let res = ci.funcOff;\n    L.ci = ci.previous;\n    L.ci.next = null;\n    return moveresults(L, firstResult, res, nres, wanted);\n};\n\nconst moveresults = function(L, firstResult, res, nres, wanted) {\n    switch (wanted) {\n        case 0:\n            break;\n        case 1: {\n            if (nres === 0)\n                L.stack[res].setnilvalue();\n            else {\n                lobject.setobjs2s(L, res, firstResult); /* move it to proper place */\n            }\n            break;\n        }\n        case LUA_MULTRET: {\n            for (let i = 0; i < nres; i++)\n                lobject.setobjs2s(L, res + i, firstResult + i);\n            for (let i=L.top; i>=(res + nres); i--)\n                delete L.stack[i];\n            L.top = res + nres;\n            return false;\n        }\n        default: {\n            let i;\n            if (wanted <= nres) {\n                for (i = 0; i < wanted; i++)\n                    lobject.setobjs2s(L, res + i, firstResult + i);\n            } else {\n                for (i = 0; i < nres; i++)\n                    lobject.setobjs2s(L, res + i, firstResult + i);\n                for (; i < wanted; i++) {\n                    if (res+i >= L.top)\n                        L.stack[res + i] = new lobject.TValue(LUA_TNIL, null);\n                    else\n                        L.stack[res + i].setnilvalue();\n                }\n            }\n            break;\n        }\n    }\n    let newtop = res + wanted; /* top points after the last result */\n    for (let i=L.top; i>=newtop; i--)\n        delete L.stack[i];\n    L.top = newtop;\n    return true;\n};\n\n/*\n** Call a hook for the given event. Make sure there is a hook to be\n** called. (Both 'L->hook' and 'L->hookmask', which triggers this\n** function, can be changed asynchronously by signals.)\n*/\nconst luaD_hook = function(L, event, line) {\n    let hook = L.hook;\n    if (hook && L.allowhook) {  /* make sure there is a hook */\n        let ci = L.ci;\n        let top = L.top;\n        let ci_top = ci.top;\n        let ar = new lua_Debug();\n        ar.event = event;\n        ar.currentline = line;\n        ar.i_ci = ci;\n        luaD_checkstack(L, LUA_MINSTACK);  /* ensure minimum stack size */\n        ci.top = L.top + LUA_MINSTACK;\n        lua_assert(ci.top <= L.stack_last);\n        L.allowhook = 0;  /* cannot call hooks inside a hook */\n        ci.callstatus |= lstate.CIST_HOOKED;\n        hook(L, ar);\n        lua_assert(!L.allowhook);\n        L.allowhook = 1;\n        ci.top = ci_top;\n        adjust_top(L, top);\n        ci.callstatus &= ~lstate.CIST_HOOKED;\n    }\n};\n\nconst callhook = function(L, ci) {\n    let hook = LUA_HOOKCALL;\n    ci.l_savedpc++;  /* hooks assume 'pc' is already incremented */\n    if ((ci.previous.callstatus & lstate.CIST_LUA) &&\n      ci.previous.l_code[ci.previous.l_savedpc - 1].opcode == lopcodes.OpCodesI.OP_TAILCALL) {\n        ci.callstatus |= lstate.CIST_TAIL;\n        hook = LUA_HOOKTAILCALL;\n    }\n    luaD_hook(L, hook, -1);\n    ci.l_savedpc--;  /* correct 'pc' */\n};\n\nconst adjust_varargs = function(L, p, actual) {\n    let nfixargs = p.numparams;\n    /* move fixed parameters to final position */\n    let fixed = L.top - actual; /* first fixed argument */\n    let base = L.top; /* final position of first argument */\n\n    let i;\n    for (i = 0; i < nfixargs && i < actual; i++) {\n        lobject.pushobj2s(L, L.stack[fixed + i]);\n        L.stack[fixed + i].setnilvalue();\n    }\n\n    for (; i < nfixargs; i++)\n        L.stack[L.top++] = new lobject.TValue(LUA_TNIL, null);\n\n    return base;\n};\n\nconst tryfuncTM = function(L, off, func) {\n    let tm = ltm.luaT_gettmbyobj(L, func, ltm.TMS.TM_CALL);\n    if (!tm.ttisfunction(tm))\n        ldebug.luaG_typeerror(L, func, to_luastring(\"call\", true));\n    /* Open a hole inside the stack at 'func' */\n    lobject.pushobj2s(L, L.stack[L.top-1]); /* push top of stack again */\n    for (let p = L.top-2; p > off; p--)\n        lobject.setobjs2s(L, p, p-1); /* move other items up one */\n    lobject.setobj2s(L, off, tm); /* tag method is the new function to be called */\n};\n\n/*\n** Check appropriate error for stack overflow (\"regular\" overflow or\n** overflow while handling stack overflow). If 'nCalls' is larger than\n** LUAI_MAXCCALLS (which means it is handling a \"regular\" overflow) but\n** smaller than 9/8 of LUAI_MAXCCALLS, does not report an error (to\n** allow overflow handling to work)\n*/\nconst stackerror = function(L) {\n    if (L.nCcalls === LUAI_MAXCCALLS)\n        ldebug.luaG_runerror(L, to_luastring(\"JS stack overflow\", true));\n    else if (L.nCcalls >= LUAI_MAXCCALLS + (LUAI_MAXCCALLS >> 3))\n        luaD_throw(L, LUA_ERRERR);  /* error while handing stack error */\n};\n\n/*\n** Call a function (JS or Lua). The function to be called is at func.\n** The arguments are on the stack, right after the function.\n** When returns, all the results are on the stack, starting at the original\n** function position.\n*/\nconst luaD_call = function(L, off, nResults) {\n    if (++L.nCcalls >= LUAI_MAXCCALLS)\n        stackerror(L);\n    if (!luaD_precall(L, off, nResults))\n        lvm.luaV_execute(L);\n    L.nCcalls--;\n};\n\nconst luaD_throw = function(L, errcode) {\n    if (L.errorJmp) {  /* thread has an error handler? */\n        L.errorJmp.status = errcode;  /* set status */\n        throw L.errorJmp;\n    } else {  /* thread has no error handler */\n        let g = L.l_G;\n        L.status = errcode;  /* mark it as dead */\n        if (g.mainthread.errorJmp) {  /* main thread has a handler? */\n            g.mainthread.stack[g.mainthread.top++] = L.stack[L.top - 1];  /* copy error obj. */\n            luaD_throw(g.mainthread, errcode);  /* re-throw in main thread */\n        } else {  /* no handler at all; abort */\n            let panic = g.panic;\n            if (panic) {  /* panic function? */\n                seterrorobj(L, errcode, L.top);  /* assume EXTRA_STACK */\n                if (L.ci.top < L.top)\n                    L.ci.top = L.top;  /* pushing msg. can break this invariant */\n                panic(L);  /* call panic function (last chance to jump out) */\n            }\n            throw new Error(`Aborted ${errcode}`);\n        }\n    }\n};\n\nconst luaD_rawrunprotected = function(L, f, ud) {\n    let oldnCcalls = L.nCcalls;\n    let lj = {\n        status: LUA_OK,\n        previous: L.errorJmp /* chain new error handler */\n    };\n    L.errorJmp = lj;\n\n    try {\n        f(L, ud);\n    } catch (e) {\n        if (lj.status === LUA_OK) {\n            /* error was not thrown via luaD_throw, i.e. it is a JS error */\n            /* run user error handler (if it exists) */\n            let atnativeerror = L.l_G.atnativeerror;\n            if (atnativeerror) {\n                try {\n                    lj.status = LUA_OK;\n\n                    lapi.lua_pushcfunction(L, atnativeerror);\n                    lapi.lua_pushlightuserdata(L, e);\n                    luaD_callnoyield(L, L.top - 2, 1);\n\n                    /* Now run the message handler (if it exists) */\n                    /* copy of luaG_errormsg without the throw */\n                    if (L.errfunc !== 0) {  /* is there an error handling function? */\n                        let errfunc = L.errfunc;\n                        lobject.pushobj2s(L, L.stack[L.top - 1]); /* move argument */\n                        lobject.setobjs2s(L, L.top - 2, errfunc); /* push function */\n                        luaD_callnoyield(L, L.top - 2, 1);\n                    }\n\n                    lj.status = LUA_ERRRUN;\n                } catch(e2) {\n                    if (lj.status === LUA_OK) {\n                        /* also failed */\n                        lj.status = -1;\n                    }\n                }\n            } else {\n                lj.status = -1;\n            }\n        }\n    }\n\n    L.errorJmp = lj.previous;\n    L.nCcalls = oldnCcalls;\n\n    return lj.status;\n\n};\n\n/*\n** Completes the execution of an interrupted C function, calling its\n** continuation function.\n*/\nconst finishCcall = function(L, status) {\n    let ci = L.ci;\n\n    /* must have a continuation and must be able to call it */\n    lua_assert(ci.c_k !== null && L.nny === 0);\n    /* error status can only happen in a protected call */\n    lua_assert(ci.callstatus & lstate.CIST_YPCALL || status === LUA_YIELD);\n\n    if (ci.callstatus & lstate.CIST_YPCALL) {  /* was inside a pcall? */\n        ci.callstatus &= ~lstate.CIST_YPCALL;  /* continuation is also inside it */\n        L.errfunc = ci.c_old_errfunc;  /* with the same error function */\n    }\n\n    /* finish 'lua_callk'/'lua_pcall'; CIST_YPCALL and 'errfunc' already\n       handled */\n    if (ci.nresults === LUA_MULTRET && L.ci.top < L.top) L.ci.top = L.top;\n    let c_k = ci.c_k; /* don't want to call as method */\n    let n = c_k(L, status, ci.c_ctx);  /* call continuation function */\n    lapi.api_checknelems(L, n);\n    luaD_poscall(L, ci, L.top - n, n);  /* finish 'luaD_precall' */\n};\n\n/*\n** Executes \"full continuation\" (everything in the stack) of a\n** previously interrupted coroutine until the stack is empty (or another\n** interruption long-jumps out of the loop). If the coroutine is\n** recovering from an error, 'ud' points to the error status, which must\n** be passed to the first continuation function (otherwise the default\n** status is LUA_YIELD).\n*/\nconst unroll = function(L, ud) {\n    if (ud !== null)  /* error status? */\n        finishCcall(L, ud);  /* finish 'lua_pcallk' callee */\n\n    while (L.ci !== L.base_ci) {  /* something in the stack */\n        if (!(L.ci.callstatus & lstate.CIST_LUA))  /* C function? */\n            finishCcall(L, LUA_YIELD);  /* complete its execution */\n        else {  /* Lua function */\n            lvm.luaV_finishOp(L);  /* finish interrupted instruction */\n            lvm.luaV_execute(L);  /* execute down to higher C 'boundary' */\n        }\n    }\n};\n\n/*\n** Try to find a suspended protected call (a \"recover point\") for the\n** given thread.\n*/\nconst findpcall = function(L) {\n    for (let ci = L.ci; ci !== null; ci = ci.previous) {  /* search for a pcall */\n        if (ci.callstatus & lstate.CIST_YPCALL)\n            return ci;\n    }\n\n    return null;  /* no pending pcall */\n};\n\n/*\n** Recovers from an error in a coroutine. Finds a recover point (if\n** there is one) and completes the execution of the interrupted\n** 'luaD_pcall'. If there is no recover point, returns zero.\n*/\nconst recover = function(L, status) {\n    let ci = findpcall(L);\n    if (ci === null) return 0;  /* no recovery point */\n    /* \"finish\" luaD_pcall */\n    let oldtop = ci.extra;\n    lfunc.luaF_close(L, oldtop);\n    seterrorobj(L, status, oldtop);\n    L.ci = ci;\n    L.allowhook = ci.callstatus & lstate.CIST_OAH;  /* restore original 'allowhook' */\n    L.nny = 0;  /* should be zero to be yieldable */\n    luaD_shrinkstack(L);\n    L.errfunc = ci.c_old_errfunc;\n    return 1;  /* continue running the coroutine */\n};\n\n/*\n** Signal an error in the call to 'lua_resume', not in the execution\n** of the coroutine itself. (Such errors should not be handled by any\n** coroutine error handler and should not kill the coroutine.)\n*/\nconst resume_error = function(L, msg, narg) {\n    let ts = luaS_newliteral(L, msg);\n    if (narg === 0) {\n        lobject.pushsvalue2s(L, ts);\n        api_check(L, L.top <= L.ci.top, \"stack overflow\");\n    } else {\n        /* remove args from the stack */\n        for (let i=1; i<narg; i++)\n            delete L.stack[--L.top];\n        lobject.setsvalue2s(L, L.top-1, ts);  /* push error message */\n    }\n    return LUA_ERRRUN;\n};\n\n/*\n** Do the work for 'lua_resume' in protected mode. Most of the work\n** depends on the status of the coroutine: initial state, suspended\n** inside a hook, or regularly suspended (optionally with a continuation\n** function), plus erroneous cases: non-suspended coroutine or dead\n** coroutine.\n*/\nconst resume = function(L, n) {\n    let firstArg = L.top - n;  /* first argument */\n    let ci = L.ci;\n    if (L.status === LUA_OK) {  /* starting a coroutine? */\n        if (!luaD_precall(L, firstArg - 1, LUA_MULTRET))  /* Lua function? */\n            lvm.luaV_execute(L);  /* call it */\n    } else {  /* resuming from previous yield */\n        lua_assert(L.status === LUA_YIELD);\n        L.status = LUA_OK;  /* mark that it is running (again) */\n        ci.funcOff = ci.extra;\n        ci.func = L.stack[ci.funcOff];\n\n        if (ci.callstatus & lstate.CIST_LUA)  /* yielded inside a hook? */\n            lvm.luaV_execute(L);  /* just continue running Lua code */\n        else {  /* 'common' yield */\n            if (ci.c_k !== null) {  /* does it have a continuation function? */\n                n = ci.c_k(L, LUA_YIELD, ci.c_ctx); /* call continuation */\n                lapi.api_checknelems(L, n);\n                firstArg = L.top - n;  /* yield results come from continuation */\n            }\n\n            luaD_poscall(L, ci, firstArg, n);  /* finish 'luaD_precall' */\n        }\n\n        unroll(L, null);  /* run continuation */\n    }\n};\n\nconst lua_resume = function(L, from, nargs) {\n    let oldnny = L.nny;  /* save \"number of non-yieldable\" calls */\n\n    if (L.status === LUA_OK) {  /* may be starting a coroutine */\n        if (L.ci !== L.base_ci)  /* not in base level? */\n            return resume_error(L, \"cannot resume non-suspended coroutine\", nargs);\n    } else if (L.status !== LUA_YIELD)\n        return resume_error(L, \"cannot resume dead coroutine\", nargs);\n\n    L.nCcalls = from ? from.nCcalls + 1 : 1;\n    if (L.nCcalls >= LUAI_MAXCCALLS)\n        return resume_error(L, \"JS stack overflow\", nargs);\n\n    L.nny = 0;  /* allow yields */\n\n    lapi.api_checknelems(L, L.status === LUA_OK ? nargs + 1: nargs);\n\n    let status = luaD_rawrunprotected(L, resume, nargs);\n    if (status === -1)  /* error calling 'lua_resume'? */\n        status = LUA_ERRRUN;\n    else {  /* continue running after recoverable errors */\n        while (status > LUA_YIELD && recover(L, status)) {\n            /* unroll continuation */\n            status = luaD_rawrunprotected(L, unroll, status);\n        }\n\n        if (status > LUA_YIELD) {  /* unrecoverable error? */\n            L.status = status;  /* mark thread as 'dead' */\n            seterrorobj(L, status, L.top);  /* push error message */\n            L.ci.top = L.top;\n        } else\n            lua_assert(status === L.status);  /* normal end or yield */\n    }\n\n    L.nny = oldnny;  /* restore 'nny' */\n    L.nCcalls--;\n    lua_assert(L.nCcalls === (from ? from.nCcalls : 0));\n    return status;\n};\n\nconst lua_isyieldable = function(L) {\n    return L.nny === 0;\n};\n\nconst lua_yieldk = function(L, nresults, ctx, k) {\n    let ci = L.ci;\n    lapi.api_checknelems(L, nresults);\n\n    if (L.nny > 0) {\n        if (L !== L.l_G.mainthread)\n            ldebug.luaG_runerror(L, to_luastring(\"attempt to yield across a JS-call boundary\", true));\n        else\n            ldebug.luaG_runerror(L, to_luastring(\"attempt to yield from outside a coroutine\", true));\n    }\n\n    L.status = LUA_YIELD;\n    ci.extra = ci.funcOff;  /* save current 'func' */\n    if (ci.callstatus & lstate.CIST_LUA)  /* inside a hook? */\n        api_check(L, k === null, \"hooks cannot continue after yielding\");\n    else {\n        ci.c_k = k;\n        if (k !== null)  /* is there a continuation? */\n            ci.c_ctx = ctx;  /* save context */\n        ci.funcOff = L.top - nresults - 1;  /* protect stack below results */\n        ci.func = L.stack[ci.funcOff];\n        luaD_throw(L, LUA_YIELD);\n    }\n\n    lua_assert(ci.callstatus & lstate.CIST_HOOKED);  /* must be inside a hook */\n    return 0;  /* return to 'luaD_hook' */\n};\n\nconst lua_yield = function(L, n) {\n    lua_yieldk(L, n, 0, null);\n};\n\nconst luaD_pcall = function(L, func, u, old_top, ef) {\n    let old_ci = L.ci;\n    let old_allowhooks = L.allowhook;\n    let old_nny = L.nny;\n    let old_errfunc = L.errfunc;\n    L.errfunc = ef;\n\n    let status = luaD_rawrunprotected(L, func, u);\n\n    if (status !== LUA_OK) {\n        lfunc.luaF_close(L, old_top);\n        seterrorobj(L, status, old_top);\n        L.ci = old_ci;\n        L.allowhook = old_allowhooks;\n        L.nny = old_nny;\n        luaD_shrinkstack(L);\n    }\n\n    L.errfunc = old_errfunc;\n\n    return status;\n};\n\n/*\n** Similar to 'luaD_call', but does not allow yields during the call\n*/\nconst luaD_callnoyield = function(L, off, nResults) {\n    L.nny++;\n    luaD_call(L, off, nResults);\n    L.nny--;\n};\n\n/*\n** Execute a protected parser.\n*/\nclass SParser {\n    constructor(z, name, mode) {  /* data to 'f_parser' */\n        this.z = z;\n        this.buff = new MBuffer();  /* dynamic structure used by the scanner */\n        this.dyd = new lparser.Dyndata();  /* dynamic structures used by the parser */\n        this.mode = mode;\n        this.name = name;\n    }\n}\n\nconst checkmode = function(L, mode, x) {\n    if (mode && luastring_indexOf(mode, x[0]) === -1) {\n        lobject.luaO_pushfstring(L,\n            to_luastring(\"attempt to load a %s chunk (mode is '%s')\"), x, mode);\n        luaD_throw(L, LUA_ERRSYNTAX);\n    }\n};\n\nconst f_parser = function(L, p) {\n    let cl;\n    let c = p.z.zgetc();  /* read first character */\n    if (c === LUA_SIGNATURE[0]) {\n        checkmode(L, p.mode, to_luastring(\"binary\", true));\n        cl = lundump.luaU_undump(L, p.z, p.name);\n    } else {\n        checkmode(L, p.mode, to_luastring(\"text\", true));\n        cl = lparser.luaY_parser(L, p.z, p.buff, p.dyd, p.name, c);\n    }\n\n    lua_assert(cl.nupvalues === cl.p.upvalues.length);\n    lfunc.luaF_initupvals(L, cl);\n};\n\nconst luaD_protectedparser = function(L, z, name, mode) {\n    let p = new SParser(z, name, mode);\n    L.nny++;  /* cannot yield during parsing */\n    let status = luaD_pcall(L, f_parser, p, L.top, L.errfunc);\n    L.nny--;\n    return status;\n};\n\nmodule.exports.adjust_top           = adjust_top;\nmodule.exports.luaD_call            = luaD_call;\nmodule.exports.luaD_callnoyield     = luaD_callnoyield;\nmodule.exports.luaD_checkstack      = luaD_checkstack;\nmodule.exports.luaD_growstack       = luaD_growstack;\nmodule.exports.luaD_hook            = luaD_hook;\nmodule.exports.luaD_inctop          = luaD_inctop;\nmodule.exports.luaD_pcall           = luaD_pcall;\nmodule.exports.luaD_poscall         = luaD_poscall;\nmodule.exports.luaD_precall         = luaD_precall;\nmodule.exports.luaD_protectedparser = luaD_protectedparser;\nmodule.exports.luaD_rawrunprotected = luaD_rawrunprotected;\nmodule.exports.luaD_reallocstack    = luaD_reallocstack;\nmodule.exports.luaD_throw           = luaD_throw;\nmodule.exports.lua_isyieldable      = lua_isyieldable;\nmodule.exports.lua_resume           = lua_resume;\nmodule.exports.lua_yield            = lua_yield;\nmodule.exports.lua_yieldk           = lua_yieldk;\n","\"use strict\";\n\nconst {\n    LUA_SIGNATURE,\n    LUA_VERSION_MAJOR,\n    LUA_VERSION_MINOR,\n    constant_types: {\n        LUA_TBOOLEAN,\n        LUA_TLNGSTR,\n        LUA_TNIL,\n        LUA_TNUMFLT,\n        LUA_TNUMINT,\n        LUA_TSHRSTR\n    },\n    luastring_of\n} = require('./defs.js');\n\nconst LUAC_DATA    = luastring_of(25, 147, 13, 10, 26, 10);\nconst LUAC_INT     = 0x5678;\nconst LUAC_NUM     = 370.5;\nconst LUAC_VERSION = Number(LUA_VERSION_MAJOR) * 16 + Number(LUA_VERSION_MINOR);\nconst LUAC_FORMAT  = 0;   /* this is the official format */\n\nclass DumpState {\n    constructor() {\n        this.L = null;\n        this.write = null;\n        this.data = null;\n        this.strip = NaN;\n        this.status = NaN;\n    }\n}\n\nconst DumpBlock = function(b, size, D) {\n    if (D.status === 0 && size > 0)\n        D.status = D.writer(D.L, b, size, D.data);\n};\n\nconst DumpByte = function(y, D) {\n    DumpBlock(luastring_of(y), 1, D);\n};\n\nconst DumpInt = function(x, D) {\n    let ab = new ArrayBuffer(4);\n    let dv = new DataView(ab);\n    dv.setInt32(0, x, true);\n    let t = new Uint8Array(ab);\n    DumpBlock(t, 4, D);\n};\n\nconst DumpInteger = function(x, D) {\n    let ab = new ArrayBuffer(4);\n    let dv = new DataView(ab);\n    dv.setInt32(0, x, true);\n    let t = new Uint8Array(ab);\n    DumpBlock(t, 4, D);\n};\n\nconst DumpNumber = function(x, D) {\n    let ab = new ArrayBuffer(8);\n    let dv = new DataView(ab);\n    dv.setFloat64(0, x, true);\n    let t = new Uint8Array(ab);\n    DumpBlock(t, 8, D);\n};\n\nconst DumpString = function(s, D) {\n    if (s === null)\n        DumpByte(0, D);\n    else {\n        let size = s.tsslen() + 1;\n        let str = s.getstr();\n        if (size < 0xFF)\n            DumpByte(size, D);\n        else {\n            DumpByte(0xFF, D);\n            DumpInteger(size, D);\n        }\n        DumpBlock(str, size - 1, D);  /* no need to save '\\0' */\n    }\n};\n\nconst DumpCode = function(f, D) {\n    let s = f.code.map(e => e.code);\n    DumpInt(s.length, D);\n\n    for (let i = 0; i < s.length; i++)\n        DumpInt(s[i], D);\n};\n\nconst DumpConstants = function(f, D) {\n    let n = f.k.length;\n    DumpInt(n, D);\n    for (let i = 0; i < n; i++) {\n        let o = f.k[i];\n        DumpByte(o.ttype(), D);\n        switch (o.ttype()) {\n            case LUA_TNIL:\n                break;\n            case LUA_TBOOLEAN:\n                DumpByte(o.value ? 1 : 0, D);\n                break;\n            case LUA_TNUMFLT:\n                DumpNumber(o.value, D);\n                break;\n            case LUA_TNUMINT:\n                DumpInteger(o.value, D);\n                break;\n            case LUA_TSHRSTR:\n            case LUA_TLNGSTR:\n                DumpString(o.tsvalue(), D);\n                break;\n        }\n    }\n};\n\nconst DumpProtos = function(f, D) {\n    let n = f.p.length;\n    DumpInt(n, D);\n    for (let i = 0; i < n; i++)\n        DumpFunction(f.p[i], f.source, D);\n};\n\nconst DumpUpvalues = function(f, D) {\n    let n = f.upvalues.length;\n    DumpInt(n, D);\n    for (let i = 0; i < n; i++) {\n        DumpByte(f.upvalues[i].instack ? 1 : 0, D);\n        DumpByte(f.upvalues[i].idx, D);\n    }\n};\n\nconst DumpDebug = function(f, D) {\n    let n = D.strip ? 0 : f.lineinfo.length;\n    DumpInt(n, D);\n    for (let i = 0; i < n; i++)\n        DumpInt(f.lineinfo[i], D);\n    n = D.strip ? 0 : f.locvars.length;\n    DumpInt(n, D);\n    for (let i = 0; i < n; i++) {\n        DumpString(f.locvars[i].varname, D);\n        DumpInt(f.locvars[i].startpc, D);\n        DumpInt(f.locvars[i].endpc, D);\n    }\n    n = D.strip ? 0 : f.upvalues.length;\n    DumpInt(n, D);\n    for (let i = 0; i < n; i++)\n        DumpString(f.upvalues[i].name, D);\n};\n\nconst DumpFunction = function(f, psource, D) {\n    if (D.strip || f.source === psource)\n        DumpString(null, D);  /* no debug info or same source as its parent */\n    else\n        DumpString(f.source, D);\n    DumpInt(f.linedefined, D);\n    DumpInt(f.lastlinedefined, D);\n    DumpByte(f.numparams, D);\n    DumpByte(f.is_vararg?1:0, D);\n    DumpByte(f.maxstacksize, D);\n    DumpCode(f, D);\n    DumpConstants(f, D);\n    DumpUpvalues(f, D);\n    DumpProtos(f, D);\n    DumpDebug(f, D);\n};\n\nconst DumpHeader = function(D) {\n    DumpBlock(LUA_SIGNATURE, LUA_SIGNATURE.length, D);\n    DumpByte(LUAC_VERSION, D);\n    DumpByte(LUAC_FORMAT, D);\n    DumpBlock(LUAC_DATA, LUAC_DATA.length, D);\n    DumpByte(4, D); // intSize\n    DumpByte(4, D); // size_tSize\n    DumpByte(4, D); // instructionSize\n    DumpByte(4, D); // integerSize\n    DumpByte(8, D); // numberSize\n    DumpInteger(LUAC_INT, D);\n    DumpNumber(LUAC_NUM, D);\n};\n\n/*\n** dump Lua function as precompiled chunk\n*/\nconst luaU_dump = function(L, f, w, data, strip) {\n    let D = new DumpState();\n    D.L = L;\n    D.writer = w;\n    D.data = data;\n    D.strip = strip;\n    D.status = 0;\n    DumpHeader(D);\n    DumpByte(f.upvalues.length, D);\n    DumpFunction(f, null, D);\n    return D.status;\n};\n\nmodule.exports.luaU_dump = luaU_dump;\n","\"use strict\";\n\nconst { constant_types: { LUA_TNIL } } = require('./defs.js');\nconst lobject = require('./lobject.js');\n\nclass Proto {\n    constructor(L) {\n        this.id = L.l_G.id_counter++;\n        this.k = [];              // constants used by the function\n        this.p = [];              // functions defined inside the function\n        this.code = [];           // opcodes\n        this.cache = null;        // last-created closure with this prototype\n        this.lineinfo = [];       // map from opcodes to source lines (debug information)\n        this.upvalues = [];       // upvalue information\n        this.numparams = 0;       // number of fixed parameters\n        this.is_vararg = false;\n        this.maxstacksize = 0;    // number of registers needed by this function\n        this.locvars = [];        // information about local variables (debug information)\n        this.linedefined = 0;     // debug information\n        this.lastlinedefined = 0; // debug information\n        this.source = null;       // used for debug information\n    }\n}\n\nconst luaF_newLclosure = function(L, n) {\n    return new lobject.LClosure(L, n);\n};\n\n\nconst luaF_findupval = function(L, level) {\n    return L.stack[level];\n};\n\nconst luaF_close = function(L, level) {\n    /* Create new TValues on stack;\n     * any closures will keep referencing old TValues */\n    for (let i=level; i<L.top; i++) {\n        let old = L.stack[i];\n        L.stack[i] = new lobject.TValue(old.type, old.value);\n    }\n};\n\n/*\n** fill a closure with new upvalues\n*/\nconst luaF_initupvals = function(L, cl) {\n    for (let i = 0; i < cl.nupvalues; i++)\n        cl.upvals[i] = new lobject.TValue(LUA_TNIL, null);\n};\n\n/*\n** Look for n-th local variable at line 'line' in function 'func'.\n** Returns null if not found.\n*/\nconst luaF_getlocalname = function(f, local_number, pc) {\n    for (let i = 0; i < f.locvars.length && f.locvars[i].startpc <= pc; i++) {\n        if (pc < f.locvars[i].endpc) {  /* is variable active? */\n            local_number--;\n            if (local_number === 0)\n                return f.locvars[i].varname.getstr();\n        }\n    }\n    return null;  /* not found */\n};\n\nmodule.exports.MAXUPVAL          = 255;\nmodule.exports.Proto             = Proto;\nmodule.exports.luaF_findupval    = luaF_findupval;\nmodule.exports.luaF_close        = luaF_close;\nmodule.exports.luaF_getlocalname = luaF_getlocalname;\nmodule.exports.luaF_initupvals   = luaF_initupvals;\nmodule.exports.luaF_newLclosure  = luaF_newLclosure;\n","\"use strict\";\n\nconst { luastring_of } = require('./defs.js');\n\nconst luai_ctype_ = luastring_of(\n    0x00,  /* EOZ */\n    0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,        /* 0. */\n    0x00,  0x08,  0x08,  0x08,  0x08,  0x08,  0x00,  0x00,\n    0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,        /* 1. */\n    0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,\n    0x0c,  0x04,  0x04,  0x04,  0x04,  0x04,  0x04,  0x04,        /* 2. */\n    0x04,  0x04,  0x04,  0x04,  0x04,  0x04,  0x04,  0x04,\n    0x16,  0x16,  0x16,  0x16,  0x16,  0x16,  0x16,  0x16,        /* 3. */\n    0x16,  0x16,  0x04,  0x04,  0x04,  0x04,  0x04,  0x04,\n    0x04,  0x15,  0x15,  0x15,  0x15,  0x15,  0x15,  0x05,        /* 4. */\n    0x05,  0x05,  0x05,  0x05,  0x05,  0x05,  0x05,  0x05,\n    0x05,  0x05,  0x05,  0x05,  0x05,  0x05,  0x05,  0x05,        /* 5. */\n    0x05,  0x05,  0x05,  0x04,  0x04,  0x04,  0x04,  0x05,\n    0x04,  0x15,  0x15,  0x15,  0x15,  0x15,  0x15,  0x05,        /* 6. */\n    0x05,  0x05,  0x05,  0x05,  0x05,  0x05,  0x05,  0x05,\n    0x05,  0x05,  0x05,  0x05,  0x05,  0x05,  0x05,  0x05,        /* 7. */\n    0x05,  0x05,  0x05,  0x04,  0x04,  0x04,  0x04,  0x00,\n    0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,        /* 8. */\n    0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,\n    0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,        /* 9. */\n    0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,\n    0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,        /* a. */\n    0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,\n    0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,        /* b. */\n    0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,\n    0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,        /* c. */\n    0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,\n    0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,        /* d. */\n    0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,\n    0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,        /* e. */\n    0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,\n    0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,        /* f. */\n    0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00,  0x00\n);\n\nconst ALPHABIT = 0;\nconst DIGITBIT = 1;\nconst PRINTBIT = 2;\nconst SPACEBIT = 3;\nconst XDIGITBIT = 4;\n\nconst lisdigit = function(c) {\n    return (luai_ctype_[c+1] & (1<<DIGITBIT)) !== 0;\n};\n\nconst lisxdigit = function(c) {\n    return (luai_ctype_[c+1] & (1<<XDIGITBIT)) !== 0;\n};\n\nconst lisprint = function(c) {\n    return (luai_ctype_[c+1] & (1<<PRINTBIT)) !== 0;\n};\n\nconst lisspace = function(c) {\n    return (luai_ctype_[c+1] & (1<<SPACEBIT)) !== 0;\n};\n\nconst lislalpha = function(c) {\n    return (luai_ctype_[c+1] & (1<<ALPHABIT)) !== 0;\n};\n\nconst lislalnum = function(c) {\n    return (luai_ctype_[c+1] & ((1<<ALPHABIT)|(1<<DIGITBIT))) !== 0;\n};\n\nmodule.exports.lisdigit   = lisdigit;\nmodule.exports.lislalnum  = lislalnum;\nmodule.exports.lislalpha  = lislalpha;\nmodule.exports.lisprint   = lisprint;\nmodule.exports.lisspace   = lisspace;\nmodule.exports.lisxdigit  = lisxdigit;\n","\"use strict\";\n\nconst {\n    constant_types: { LUA_TBOOLEAN, LUA_TLNGSTR },\n    thread_status: { LUA_ERRSYNTAX },\n    to_luastring\n} = require('./defs.js');\nconst {\n    LUA_MINBUFFER,\n    MAX_INT,\n    lua_assert\n} = require('./llimits.js');\nconst ldebug   = require('./ldebug.js');\nconst ldo      = require('./ldo.js');\nconst {\n    lisdigit,\n    lislalnum,\n    lislalpha,\n    lisspace,\n    lisxdigit\n} = require('./ljstype.js');\nconst lobject  = require('./lobject.js');\nconst {\n    luaS_bless,\n    luaS_hash,\n    luaS_hashlongstr,\n    luaS_new\n} = require('./lstring.js');\nconst ltable   = require('./ltable.js');\nconst {\n    EOZ,\n    luaZ_buffer,\n    luaZ_buffremove,\n    luaZ_resetbuffer,\n    luaZ_resizebuffer\n} = require('./lzio.js');\n\nconst FIRST_RESERVED = 257;\n\nconst LUA_ENV = to_luastring(\"_ENV\", true);\n\n/* terminal symbols denoted by reserved words */\nconst TK_AND      = FIRST_RESERVED;\nconst TK_BREAK    = FIRST_RESERVED + 1;\nconst TK_DO       = FIRST_RESERVED + 2;\nconst TK_ELSE     = FIRST_RESERVED + 3;\nconst TK_ELSEIF   = FIRST_RESERVED + 4;\nconst TK_END      = FIRST_RESERVED + 5;\nconst TK_FALSE    = FIRST_RESERVED + 6;\nconst TK_FOR      = FIRST_RESERVED + 7;\nconst TK_FUNCTION = FIRST_RESERVED + 8;\nconst TK_GOTO     = FIRST_RESERVED + 9;\nconst TK_IF       = FIRST_RESERVED + 10;\nconst TK_IN       = FIRST_RESERVED + 11;\nconst TK_LOCAL    = FIRST_RESERVED + 12;\nconst TK_NIL      = FIRST_RESERVED + 13;\nconst TK_NOT      = FIRST_RESERVED + 14;\nconst TK_OR       = FIRST_RESERVED + 15;\nconst TK_REPEAT   = FIRST_RESERVED + 16;\nconst TK_RETURN   = FIRST_RESERVED + 17;\nconst TK_THEN     = FIRST_RESERVED + 18;\nconst TK_TRUE     = FIRST_RESERVED + 19;\nconst TK_UNTIL    = FIRST_RESERVED + 20;\nconst TK_WHILE    = FIRST_RESERVED + 21;\n/* other terminal symbols */\nconst TK_IDIV     = FIRST_RESERVED + 22;\nconst TK_CONCAT   = FIRST_RESERVED + 23;\nconst TK_DOTS     = FIRST_RESERVED + 24;\nconst TK_EQ       = FIRST_RESERVED + 25;\nconst TK_GE       = FIRST_RESERVED + 26;\nconst TK_LE       = FIRST_RESERVED + 27;\nconst TK_NE       = FIRST_RESERVED + 28;\nconst TK_SHL      = FIRST_RESERVED + 29;\nconst TK_SHR      = FIRST_RESERVED + 30;\nconst TK_DBCOLON  = FIRST_RESERVED + 31;\nconst TK_EOS      = FIRST_RESERVED + 32;\nconst TK_FLT      = FIRST_RESERVED + 33;\nconst TK_INT      = FIRST_RESERVED + 34;\nconst TK_NAME     = FIRST_RESERVED + 35;\nconst TK_STRING   = FIRST_RESERVED + 36;\n\nconst RESERVED = {\n    \"TK_AND\":      TK_AND,\n    \"TK_BREAK\":    TK_BREAK,\n    \"TK_DO\":       TK_DO,\n    \"TK_ELSE\":     TK_ELSE,\n    \"TK_ELSEIF\":   TK_ELSEIF,\n    \"TK_END\":      TK_END,\n    \"TK_FALSE\":    TK_FALSE,\n    \"TK_FOR\":      TK_FOR,\n    \"TK_FUNCTION\": TK_FUNCTION,\n    \"TK_GOTO\":     TK_GOTO,\n    \"TK_IF\":       TK_IF,\n    \"TK_IN\":       TK_IN,\n    \"TK_LOCAL\":    TK_LOCAL,\n    \"TK_NIL\":      TK_NIL,\n    \"TK_NOT\":      TK_NOT,\n    \"TK_OR\":       TK_OR,\n    \"TK_REPEAT\":   TK_REPEAT,\n    \"TK_RETURN\":   TK_RETURN,\n    \"TK_THEN\":     TK_THEN,\n    \"TK_TRUE\":     TK_TRUE,\n    \"TK_UNTIL\":    TK_UNTIL,\n    \"TK_WHILE\":    TK_WHILE,\n    \"TK_IDIV\":     TK_IDIV,\n    \"TK_CONCAT\":   TK_CONCAT,\n    \"TK_DOTS\":     TK_DOTS,\n    \"TK_EQ\":       TK_EQ,\n    \"TK_GE\":       TK_GE,\n    \"TK_LE\":       TK_LE,\n    \"TK_NE\":       TK_NE,\n    \"TK_SHL\":      TK_SHL,\n    \"TK_SHR\":      TK_SHR,\n    \"TK_DBCOLON\":  TK_DBCOLON,\n    \"TK_EOS\":      TK_EOS,\n    \"TK_FLT\":      TK_FLT,\n    \"TK_INT\":      TK_INT,\n    \"TK_NAME\":     TK_NAME,\n    \"TK_STRING\":   TK_STRING\n};\n\nconst luaX_tokens = [\n    \"and\", \"break\", \"do\", \"else\", \"elseif\",\n    \"end\", \"false\", \"for\", \"function\", \"goto\", \"if\",\n    \"in\", \"local\", \"nil\", \"not\", \"or\", \"repeat\",\n    \"return\", \"then\", \"true\", \"until\", \"while\",\n    \"//\", \"..\", \"...\", \"==\", \">=\", \"<=\", \"~=\",\n    \"<<\", \">>\", \"::\", \"<eof>\",\n    \"<number>\", \"<integer>\", \"<name>\", \"<string>\"\n].map((e, i)=>to_luastring(e));\n\nclass SemInfo {\n    constructor() {\n        this.r = NaN;\n        this.i = NaN;\n        this.ts = null;\n    }\n}\n\nclass Token {\n    constructor() {\n        this.token = NaN;\n        this.seminfo = new SemInfo();\n    }\n}\n\n/* state of the lexer plus state of the parser when shared by all\n   functions */\nclass LexState {\n    constructor() {\n        this.current = NaN;  /* current character (charint) */\n        this.linenumber = NaN;  /* input line counter */\n        this.lastline = NaN;  /* line of last token 'consumed' */\n        this.t = new Token();  /* current token */\n        this.lookahead = new Token();  /* look ahead token */\n        this.fs = null;  /* current function (parser) */\n        this.L = null;\n        this.z = null; /* input stream */\n        this.buff = null;  /* buffer for tokens */\n        this.h = null;  /* to reuse strings */\n        this.dyd = null;  /* dynamic structures used by the parser */\n        this.source = null;  /* current source name */\n        this.envn = null;  /* environment variable name */\n    }\n}\n\nconst save = function(ls, c) {\n    let b = ls.buff;\n    if (b.n + 1 > b.buffer.length) {\n        if (b.buffer.length >= MAX_INT/2)\n            lexerror(ls, to_luastring(\"lexical element too long\", true), 0);\n        let newsize = b.buffer.length*2;\n        luaZ_resizebuffer(ls.L, b, newsize);\n    }\n    b.buffer[b.n++] = c < 0 ? 255 + c + 1 : c;\n};\n\nconst luaX_token2str = function(ls, token) {\n    if (token < FIRST_RESERVED) {  /* single-byte symbols? */\n        return lobject.luaO_pushfstring(ls.L, to_luastring(\"'%c'\", true), token);\n    } else {\n        let s = luaX_tokens[token - FIRST_RESERVED];\n        if (token < TK_EOS)  /* fixed format (symbols and reserved words)? */\n            return lobject.luaO_pushfstring(ls.L, to_luastring(\"'%s'\", true), s);\n        else  /* names, strings, and numerals */\n            return s;\n    }\n};\n\nconst currIsNewline = function(ls) {\n    return ls.current === 10 /* ('\\n').charCodeAt(0) */ || ls.current === 13 /* ('\\r').charCodeAt(0) */;\n};\n\nconst next = function(ls) {\n    ls.current = ls.z.zgetc();\n};\n\nconst save_and_next = function(ls) {\n    save(ls, ls.current);\n    next(ls);\n};\n\n/*\n** creates a new string and anchors it in scanner's table so that\n** it will not be collected until the end of the compilation\n** (by that time it should be anchored somewhere)\n*/\nconst TVtrue = new lobject.TValue(LUA_TBOOLEAN, true);\nconst luaX_newstring = function(ls, str) {\n    let L = ls.L;\n    let ts = luaS_new(L, str);\n    /* HACK: Workaround lack of ltable 'keyfromval' */\n    let tpair = ls.h.strong.get(luaS_hashlongstr(ts));\n    if (!tpair) { /* not in use yet? */\n        let key = new lobject.TValue(LUA_TLNGSTR, ts);\n        ltable.luaH_setfrom(L, ls.h, key, TVtrue);\n    } else { /* string already present */\n        ts = tpair.key.tsvalue(); /* re-use value previously stored */\n    }\n    return ts;\n};\n\n/*\n** increment line number and skips newline sequence (any of\n** \\n, \\r, \\n\\r, or \\r\\n)\n*/\nconst inclinenumber = function(ls) {\n    let old = ls.current;\n    lua_assert(currIsNewline(ls));\n    next(ls);  /* skip '\\n' or '\\r' */\n    if (currIsNewline(ls) && ls.current !== old)\n        next(ls);  /* skip '\\n\\r' or '\\r\\n' */\n    if (++ls.linenumber >= MAX_INT)\n        lexerror(ls, to_luastring(\"chunk has too many lines\", true), 0);\n};\n\nconst luaX_setinput = function(L, ls, z, source, firstchar) {\n    ls.t = {\n        token: 0,\n        seminfo: new SemInfo()\n    };\n    ls.L = L;\n    ls.current = firstchar;\n    ls.lookahead = {\n        token: TK_EOS,\n        seminfo: new SemInfo()\n    };\n    ls.z = z;\n    ls.fs = null;\n    ls.linenumber = 1;\n    ls.lastline = 1;\n    ls.source = source;\n    ls.envn = luaS_bless(L, LUA_ENV);\n    luaZ_resizebuffer(L, ls.buff, LUA_MINBUFFER);  /* initialize buffer */\n};\n\nconst check_next1 = function(ls, c) {\n    if (ls.current === c) {\n        next(ls);\n        return true;\n    }\n\n    return false;\n};\n\n/*\n** Check whether current char is in set 'set' (with two chars) and\n** saves it\n*/\nconst check_next2 = function(ls, set) {\n    if (ls.current === set[0].charCodeAt(0) || ls.current === set[1].charCodeAt(0)) {\n        save_and_next(ls);\n        return true;\n    }\n\n    return false;\n};\n\nconst read_numeral = function(ls, seminfo) {\n    let expo = \"Ee\";\n    let first = ls.current;\n    lua_assert(lisdigit(ls.current));\n    save_and_next(ls);\n    if (first === 48 /* ('0').charCodeAt(0) */ && check_next2(ls, \"xX\"))  /* hexadecimal? */\n        expo = \"Pp\";\n\n    for (;;) {\n        if (check_next2(ls, expo))  /* exponent part? */\n            check_next2(ls, \"-+\");  /* optional exponent sign */\n        if (lisxdigit(ls.current))\n            save_and_next(ls);\n        else if (ls.current === 46 /* ('.').charCodeAt(0) */)\n            save_and_next(ls);\n        else break;\n    }\n\n    // save(ls, 0);\n\n    let obj = new lobject.TValue();\n    if (lobject.luaO_str2num(luaZ_buffer(ls.buff), obj) === 0)  /* format error? */\n        lexerror(ls, to_luastring(\"malformed number\", true), TK_FLT);\n    if (obj.ttisinteger()) {\n        seminfo.i = obj.value;\n        return TK_INT;\n    } else {\n        lua_assert(obj.ttisfloat());\n        seminfo.r = obj.value;\n        return TK_FLT;\n    }\n};\n\nconst txtToken = function(ls, token) {\n    switch (token) {\n        case TK_NAME: case TK_STRING:\n        case TK_FLT: case TK_INT:\n            // save(ls, 0);\n            return lobject.luaO_pushfstring(ls.L, to_luastring(\"'%s'\", true), luaZ_buffer(ls.buff));\n        default:\n            return luaX_token2str(ls, token);\n    }\n};\n\nconst lexerror = function(ls, msg, token) {\n    msg = ldebug.luaG_addinfo(ls.L, msg, ls.source, ls.linenumber);\n    if (token)\n        lobject.luaO_pushfstring(ls.L, to_luastring(\"%s near %s\"), msg, txtToken(ls, token));\n    ldo.luaD_throw(ls.L, LUA_ERRSYNTAX);\n};\n\nconst luaX_syntaxerror = function(ls, msg) {\n    lexerror(ls, msg, ls.t.token);\n};\n\n/*\n** skip a sequence '[=*[' or ']=*]'; if sequence is well formed, return\n** its number of '='s; otherwise, return a negative number (-1 iff there\n** are no '='s after initial bracket)\n*/\nconst skip_sep = function(ls) {\n    let count = 0;\n    let s = ls.current;\n    lua_assert(s === 91 /* ('[').charCodeAt(0) */ || s === 93 /* (']').charCodeAt(0) */);\n    save_and_next(ls);\n    while (ls.current === 61 /* ('=').charCodeAt(0) */) {\n        save_and_next(ls);\n        count++;\n    }\n    return ls.current === s ? count : (-count) - 1;\n};\n\nconst read_long_string = function(ls, seminfo, sep) {\n    let line = ls.linenumber;  /* initial line (for error message) */\n    save_and_next(ls);  /* skip 2nd '[' */\n\n    if (currIsNewline(ls))  /* string starts with a newline? */\n        inclinenumber(ls);  /* skip it */\n\n    let skip = false;\n    for (; !skip ;) {\n        switch (ls.current) {\n            case EOZ: {  /* error */\n                let what = seminfo ? \"string\" : \"comment\";\n                let msg = `unfinished long ${what} (starting at line ${line})`;\n                lexerror(ls, to_luastring(msg), TK_EOS);\n                break;\n            }\n            case 93 /* (']').charCodeAt(0) */: {\n                if (skip_sep(ls) === sep) {\n                    save_and_next(ls);  /* skip 2nd ']' */\n                    skip = true;\n                }\n                break;\n            }\n            case 10 /* ('\\n').charCodeAt(0) */:\n            case 13 /* ('\\r').charCodeAt(0) */: {\n                save(ls, 10 /* ('\\n').charCodeAt(0) */);\n                inclinenumber(ls);\n                if (!seminfo) luaZ_resetbuffer(ls.buff);\n                break;\n            }\n            default: {\n                if (seminfo) save_and_next(ls);\n                else next(ls);\n            }\n        }\n    }\n\n    if (seminfo)\n        seminfo.ts = luaX_newstring(ls, ls.buff.buffer.subarray(2 + sep, ls.buff.n - (2 + sep)));\n};\n\nconst esccheck = function(ls, c, msg) {\n    if (!c) {\n        if (ls.current !== EOZ)\n            save_and_next(ls);  /* add current to buffer for error message */\n        lexerror(ls, msg, TK_STRING);\n    }\n};\n\nconst gethexa = function(ls) {\n    save_and_next(ls);\n    esccheck(ls, lisxdigit(ls.current), to_luastring(\"hexadecimal digit expected\", true));\n    return lobject.luaO_hexavalue(ls.current);\n};\n\nconst readhexaesc = function(ls) {\n    let r = gethexa(ls);\n    r = (r << 4) + gethexa(ls);\n    luaZ_buffremove(ls.buff, 2);  /* remove saved chars from buffer */\n    return r;\n};\n\nconst readutf8desc = function(ls) {\n    let i = 4;  /* chars to be removed: '\\', 'u', '{', and first digit */\n    save_and_next(ls);  /* skip 'u' */\n    esccheck(ls, ls.current === 123 /* ('{').charCodeAt(0) */, to_luastring(\"missing '{'\", true));\n    let r = gethexa(ls);  /* must have at least one digit */\n\n    save_and_next(ls);\n    while (lisxdigit(ls.current)) {\n        i++;\n        r = (r << 4) + lobject.luaO_hexavalue(ls.current);\n        esccheck(ls, r <= 0x10FFFF, to_luastring(\"UTF-8 value too large\", true));\n        save_and_next(ls);\n    }\n    esccheck(ls, ls.current === 125 /* ('}').charCodeAt(0) */, to_luastring(\"missing '}'\", true));\n    next(ls);  /* skip '}' */\n    luaZ_buffremove(ls.buff, i);  /* remove saved chars from buffer */\n    return r;\n};\n\nconst utf8esc = function(ls) {\n    let buff = new Uint8Array(lobject.UTF8BUFFSZ);\n    let n = lobject.luaO_utf8esc(buff, readutf8desc(ls));\n    for (; n > 0; n--)  /* add 'buff' to string */\n        save(ls, buff[lobject.UTF8BUFFSZ - n]);\n};\n\nconst readdecesc = function(ls) {\n    let r = 0;  /* result accumulator */\n    let i;\n    for (i = 0; i < 3 && lisdigit(ls.current); i++) {  /* read up to 3 digits */\n        r = 10 * r + ls.current - 48 /* ('0').charCodeAt(0) */;\n        save_and_next(ls);\n    }\n    esccheck(ls, r <= 255, to_luastring(\"decimal escape too large\", true));\n    luaZ_buffremove(ls.buff, i);  /* remove read digits from buffer */\n    return r;\n};\n\nconst read_string = function(ls, del, seminfo) {\n    save_and_next(ls);  /* keep delimiter (for error messages) */\n\n    while (ls.current !== del) {\n        switch (ls.current) {\n            case EOZ:\n                lexerror(ls, to_luastring(\"unfinished string\", true), TK_EOS);\n                break;\n            case 10 /* ('\\n').charCodeAt(0) */:\n            case 13 /* ('\\r').charCodeAt(0) */:\n                lexerror(ls, to_luastring(\"unfinished string\", true), TK_STRING);\n                break;\n            case 92 /* ('\\\\').charCodeAt(0) */: {  /* escape sequences */\n                save_and_next(ls);  /* keep '\\\\' for error messages */\n                let will;\n                let c;\n                switch(ls.current) {\n                    case 97 /* ('a').charCodeAt(0) */: c = 7 /* \\a isn't valid JS */; will = 'read_save'; break;\n                    case 98 /* ('b').charCodeAt(0) */: c = 8 /* ('\\b').charCodeAt(0) */; will = 'read_save'; break;\n                    case 102 /* ('f').charCodeAt(0) */: c = 12 /* ('\\f').charCodeAt(0) */; will = 'read_save'; break;\n                    case 110 /* ('n').charCodeAt(0) */: c = 10 /* ('\\n').charCodeAt(0) */; will = 'read_save'; break;\n                    case 114 /* ('r').charCodeAt(0) */: c = 13 /* ('\\r').charCodeAt(0) */; will = 'read_save'; break;\n                    case 116 /* ('t').charCodeAt(0) */: c = 9 /* ('\\t').charCodeAt(0) */; will = 'read_save'; break;\n                    case 118 /* ('v').charCodeAt(0) */: c = 11 /* ('\\v').charCodeAt(0) */; will = 'read_save'; break;\n                    case 120 /* ('x').charCodeAt(0) */: c = readhexaesc(ls); will = 'read_save'; break;\n                    case 117 /* ('u').charCodeAt(0) */: utf8esc(ls); will = 'no_save'; break;\n                    case 10 /* ('\\n').charCodeAt(0) */:\n                    case 13 /* ('\\r').charCodeAt(0) */:\n                        inclinenumber(ls); c = 10 /* ('\\n').charCodeAt(0) */; will = 'only_save'; break;\n                    case 92 /* ('\\\\').charCodeAt(0) */:\n                    case 34 /* ('\"').charCodeAt(0) */:\n                    case 39 /* ('\\'').charCodeAt(0) */:\n                        c = ls.current; will = 'read_save'; break;\n                    case EOZ: will = 'no_save'; break;  /* will raise an error next loop */\n                    case 122 /* ('z').charCodeAt(0) */: {  /* zap following span of spaces */\n                        luaZ_buffremove(ls.buff, 1);  /* remove '\\\\' */\n                        next(ls);  /* skip the 'z' */\n                        while (lisspace(ls.current)) {\n                            if (currIsNewline(ls)) inclinenumber(ls);\n                            else next(ls);\n                        }\n                        will = 'no_save'; break;\n                    }\n                    default: {\n                        esccheck(ls, lisdigit(ls.current), to_luastring(\"invalid escape sequence\", true));\n                        c = readdecesc(ls);  /* digital escape '\\ddd' */\n                        will = 'only_save'; break;\n                    }\n                }\n\n                if (will === 'read_save')\n                    next(ls);\n\n                if (will === 'read_save' || will === 'only_save') {\n                    luaZ_buffremove(ls.buff, 1);  /* remove '\\\\' */\n                    save(ls, c);\n                }\n\n                break;\n            }\n            default:\n                save_and_next(ls);\n        }\n    }\n    save_and_next(ls);  /* skip delimiter */\n\n    seminfo.ts = luaX_newstring(ls, ls.buff.buffer.subarray(1, ls.buff.n-1));\n};\n\nconst token_to_index = Object.create(null); /* don't want to return true for e.g. 'hasOwnProperty' */\nluaX_tokens.forEach((e, i)=>token_to_index[luaS_hash(e)] = i);\n\nconst isreserved = function(w) {\n    let kidx = token_to_index[luaS_hashlongstr(w)];\n    return kidx !== void 0 && kidx <= 22;\n};\n\nconst llex = function(ls, seminfo) {\n    luaZ_resetbuffer(ls.buff);\n    for (;;) {\n        lua_assert(typeof ls.current == \"number\"); /* fengari addition */\n        switch (ls.current) {\n            case 10 /* ('\\n').charCodeAt(0) */:\n            case 13 /* ('\\r').charCodeAt(0) */: {  /* line breaks */\n                inclinenumber(ls);\n                break;\n            }\n            case 32 /* (' ').charCodeAt(0) */:\n            case 12 /* ('\\f').charCodeAt(0) */:\n            case 9 /* ('\\t').charCodeAt(0) */:\n            case 11 /* ('\\v').charCodeAt(0) */: {  /* spaces */\n                next(ls);\n                break;\n            }\n            case 45 /* ('-').charCodeAt(0) */: {  /* '-' or '--' (comment) */\n                next(ls);\n                if (ls.current !== 45 /* ('-').charCodeAt(0) */) return 45 /* ('-').charCodeAt(0) */;\n                /* else is a comment */\n                next(ls);\n                if (ls.current === 91 /* ('[').charCodeAt(0) */) {  /* long comment? */\n                    let sep = skip_sep(ls);\n                    luaZ_resetbuffer(ls.buff);  /* 'skip_sep' may dirty the buffer */\n                    if (sep >= 0) {\n                        read_long_string(ls, null, sep);  /* skip long comment */\n                        luaZ_resetbuffer(ls.buff);  /* previous call may dirty the buff. */\n                        break;\n                    }\n                }\n\n                /* else short comment */\n                while (!currIsNewline(ls) && ls.current !== EOZ)\n                    next(ls);  /* skip until end of line (or end of file) */\n                break;\n            }\n            case 91 /* ('[').charCodeAt(0) */: {  /* long string or simply '[' */\n                let sep = skip_sep(ls);\n                if (sep >= 0) {\n                    read_long_string(ls, seminfo, sep);\n                    return TK_STRING;\n                } else if (sep !== -1)  /* '[=...' missing second bracket */\n                    lexerror(ls, to_luastring(\"invalid long string delimiter\", true), TK_STRING);\n                return 91 /* ('[').charCodeAt(0) */;\n            }\n            case 61 /* ('=').charCodeAt(0) */: {\n                next(ls);\n                if (check_next1(ls, 61 /* ('=').charCodeAt(0) */)) return TK_EQ;\n                else return 61 /* ('=').charCodeAt(0) */;\n            }\n            case 60 /* ('<').charCodeAt(0) */: {\n                next(ls);\n                if (check_next1(ls, 61 /* ('=').charCodeAt(0) */)) return TK_LE;\n                else if (check_next1(ls, 60 /* ('<').charCodeAt(0) */)) return TK_SHL;\n                else return 60 /* ('<').charCodeAt(0) */;\n            }\n            case 62 /* ('>').charCodeAt(0) */: {\n                next(ls);\n                if (check_next1(ls, 61 /* ('=').charCodeAt(0) */)) return TK_GE;\n                else if (check_next1(ls, 62 /* ('>').charCodeAt(0) */)) return TK_SHR;\n                else return 62 /* ('>').charCodeAt(0) */;\n            }\n            case 47 /* ('/').charCodeAt(0) */: {\n                next(ls);\n                if (check_next1(ls, 47 /* ('/').charCodeAt(0) */)) return TK_IDIV;\n                else return 47 /* ('/').charCodeAt(0) */;\n            }\n            case 126 /* ('~').charCodeAt(0) */: {\n                next(ls);\n                if (check_next1(ls, 61 /* ('=').charCodeAt(0) */)) return TK_NE;\n                else return 126 /* ('~').charCodeAt(0) */;\n            }\n            case 58 /* (':').charCodeAt(0) */: {\n                next(ls);\n                if (check_next1(ls, 58 /* (':').charCodeAt(0) */)) return TK_DBCOLON;\n                else return 58 /* (':').charCodeAt(0) */;\n            }\n            case 34 /* ('\"').charCodeAt(0) */:\n            case 39 /* ('\\'').charCodeAt(0) */: {  /* short literal strings */\n                read_string(ls, ls.current, seminfo);\n                return TK_STRING;\n            }\n            case 46 /* ('.').charCodeAt(0) */: {  /* '.', '..', '...', or number */\n                save_and_next(ls);\n                if (check_next1(ls, 46 /* ('.').charCodeAt(0) */)) {\n                    if (check_next1(ls, 46 /* ('.').charCodeAt(0) */))\n                        return TK_DOTS;   /* '...' */\n                    else return TK_CONCAT;   /* '..' */\n                }\n                else if (!lisdigit(ls.current)) return 46 /* ('.').charCodeAt(0) */;\n                else return read_numeral(ls, seminfo);\n            }\n            case 48 /* ('0').charCodeAt(0) */: case 49 /* ('1').charCodeAt(0) */: case 50 /* ('2').charCodeAt(0) */: case 51 /* ('3').charCodeAt(0) */: case 52 /* ('4').charCodeAt(0) */:\n            case 53 /* ('5').charCodeAt(0) */: case 54 /* ('6').charCodeAt(0) */: case 55 /* ('7').charCodeAt(0) */: case 56 /* ('8').charCodeAt(0) */: case 57 /* ('9').charCodeAt(0) */: {\n                return read_numeral(ls, seminfo);\n            }\n            case EOZ: {\n                return TK_EOS;\n            }\n            default: {\n                if (lislalpha(ls.current)) {  /* identifier or reserved word? */\n                    do {\n                        save_and_next(ls);\n                    } while (lislalnum(ls.current));\n                    let ts = luaX_newstring(ls, luaZ_buffer(ls.buff));\n                    seminfo.ts = ts;\n                    let kidx = token_to_index[luaS_hashlongstr(ts)];\n                    if (kidx !== void 0 && kidx <= 22)  /* reserved word? */\n                        return kidx + FIRST_RESERVED;\n                    else\n                        return TK_NAME;\n                } else {  /* single-char tokens (+ - / ...) */\n                    let c = ls.current;\n                    next(ls);\n                    return c;\n                }\n            }\n        }\n    }\n};\n\nconst luaX_next = function(ls) {\n    ls.lastline = ls.linenumber;\n    if (ls.lookahead.token !== TK_EOS) {  /* is there a look-ahead token? */\n        ls.t.token = ls.lookahead.token;  /* use this one */\n        ls.t.seminfo.i = ls.lookahead.seminfo.i;\n        ls.t.seminfo.r = ls.lookahead.seminfo.r;\n        ls.t.seminfo.ts = ls.lookahead.seminfo.ts;\n        ls.lookahead.token = TK_EOS;  /* and discharge it */\n    } else\n        ls.t.token = llex(ls, ls.t.seminfo);  /* read next token */\n};\n\nconst luaX_lookahead = function(ls) {\n    lua_assert(ls.lookahead.token === TK_EOS);\n    ls.lookahead.token = llex(ls, ls.lookahead.seminfo);\n    return ls.lookahead.token;\n};\n\nmodule.exports.FIRST_RESERVED   = FIRST_RESERVED;\nmodule.exports.LUA_ENV          = LUA_ENV;\nmodule.exports.LexState         = LexState;\nmodule.exports.RESERVED         = RESERVED;\nmodule.exports.isreserved       = isreserved;\nmodule.exports.luaX_lookahead   = luaX_lookahead;\nmodule.exports.luaX_newstring   = luaX_newstring;\nmodule.exports.luaX_next        = luaX_next;\nmodule.exports.luaX_setinput    = luaX_setinput;\nmodule.exports.luaX_syntaxerror = luaX_syntaxerror;\nmodule.exports.luaX_token2str   = luaX_token2str;\nmodule.exports.luaX_tokens      = luaX_tokens;\n","\"use strict\";\n\nconst { luai_apicheck } = require(\"./luaconf.js\");\n\nconst lua_assert = function(c) {\n    if (!c) throw Error(\"assertion failed\");\n};\nmodule.exports.lua_assert = lua_assert;\n\nmodule.exports.luai_apicheck = luai_apicheck || function(l, e) { return lua_assert(e); };\n\nconst api_check = function(l, e, msg) {\n    return luai_apicheck(l, e && msg);\n};\nmodule.exports.api_check = api_check;\n\nconst LUAI_MAXCCALLS = 200;\nmodule.exports.LUAI_MAXCCALLS = LUAI_MAXCCALLS;\n\n/* minimum size for string buffer */\nconst LUA_MINBUFFER = 32;\nmodule.exports.LUA_MINBUFFER = LUA_MINBUFFER;\n\nconst luai_nummod = function(L, a, b) {\n    let m = a % b;\n    if ((m*b) < 0)\n        m += b;\n    return m;\n};\nmodule.exports.luai_nummod = luai_nummod;\n\n// If later integers are more than 32bit, LUA_MAXINTEGER will then be != MAX_INT\nconst MAX_INT = 2147483647;\nmodule.exports.MAX_INT = MAX_INT;\nconst MIN_INT = -2147483648;\nmodule.exports.MIN_INT = MIN_INT;\n","\"use strict\";\n\nconst {\n    LUA_OPADD,\n    LUA_OPBAND,\n    LUA_OPBNOT,\n    LUA_OPBOR,\n    LUA_OPBXOR,\n    LUA_OPDIV,\n    LUA_OPIDIV,\n    LUA_OPMOD,\n    LUA_OPMUL,\n    LUA_OPPOW,\n    LUA_OPSHL,\n    LUA_OPSHR,\n    LUA_OPSUB,\n    LUA_OPUNM,\n    constant_types: {\n        LUA_NUMTAGS,\n        LUA_TBOOLEAN,\n        LUA_TCCL,\n        LUA_TFUNCTION,\n        LUA_TLCF,\n        LUA_TLCL,\n        LUA_TLIGHTUSERDATA,\n        LUA_TLNGSTR,\n        LUA_TNIL,\n        LUA_TNUMBER,\n        LUA_TNUMFLT,\n        LUA_TNUMINT,\n        LUA_TSHRSTR,\n        LUA_TSTRING,\n        LUA_TTABLE,\n        LUA_TTHREAD,\n        LUA_TUSERDATA\n    },\n    from_userstring,\n    luastring_indexOf,\n    luastring_of,\n    to_jsstring,\n    to_luastring\n} = require('./defs.js');\nconst {\n    lisdigit,\n    lisprint,\n    lisspace,\n    lisxdigit\n} = require('./ljstype.js');\nconst ldebug  = require('./ldebug.js');\nconst ldo     = require('./ldo.js');\nconst lstate  = require('./lstate.js');\nconst {\n    luaS_bless,\n    luaS_new\n} = require('./lstring.js');\nconst ltable  = require('./ltable.js');\nconst {\n    LUA_COMPAT_FLOATSTRING,\n    ldexp,\n    lua_integer2str,\n    lua_number2str\n} = require('./luaconf.js');\nconst lvm     = require('./lvm.js');\nconst {\n    MAX_INT,\n    luai_nummod,\n    lua_assert\n} = require(\"./llimits.js\");\nconst ltm     = require('./ltm.js');\n\nconst LUA_TPROTO = LUA_NUMTAGS;\nconst LUA_TDEADKEY = LUA_NUMTAGS+1;\n\nclass TValue {\n\n    constructor(type, value) {\n        this.type = type;\n        this.value = value;\n    }\n\n    /* type tag of a TValue (bits 0-3 for tags + variant bits 4-5) */\n    ttype() {\n        return this.type & 0x3F;\n    }\n\n    /* type tag of a TValue with no variants (bits 0-3) */\n    ttnov() {\n        return this.type & 0x0F;\n    }\n\n    checktag(t) {\n        return this.type === t;\n    }\n\n    checktype(t) {\n        return this.ttnov() === t;\n    }\n\n    ttisnumber() {\n        return this.checktype(LUA_TNUMBER);\n    }\n\n    ttisfloat() {\n        return this.checktag(LUA_TNUMFLT);\n    }\n\n    ttisinteger() {\n        return this.checktag(LUA_TNUMINT);\n    }\n\n    ttisnil() {\n        return this.checktag(LUA_TNIL);\n    }\n\n    ttisboolean() {\n        return this.checktag(LUA_TBOOLEAN);\n    }\n\n    ttislightuserdata() {\n        return this.checktag(LUA_TLIGHTUSERDATA);\n    }\n\n    ttisstring() {\n        return this.checktype(LUA_TSTRING);\n    }\n\n    ttisshrstring() {\n        return this.checktag(LUA_TSHRSTR);\n    }\n\n    ttislngstring() {\n        return this.checktag(LUA_TLNGSTR);\n    }\n\n    ttistable() {\n        return this.checktag(LUA_TTABLE);\n    }\n\n    ttisfunction() {\n        return this.checktype(LUA_TFUNCTION);\n    }\n\n    ttisclosure() {\n        return (this.type & 0x1F) === LUA_TFUNCTION;\n    }\n\n    ttisCclosure() {\n        return this.checktag(LUA_TCCL);\n    }\n\n    ttisLclosure() {\n        return this.checktag(LUA_TLCL);\n    }\n\n    ttislcf() {\n        return this.checktag(LUA_TLCF);\n    }\n\n    ttisfulluserdata() {\n        return this.checktag(LUA_TUSERDATA);\n    }\n\n    ttisthread() {\n        return this.checktag(LUA_TTHREAD);\n    }\n\n    ttisdeadkey() {\n        return this.checktag(LUA_TDEADKEY);\n    }\n\n    l_isfalse() {\n        return this.ttisnil() || (this.ttisboolean() && this.value === false);\n    }\n\n    setfltvalue(x) {\n        this.type = LUA_TNUMFLT;\n        this.value = x;\n    }\n\n    chgfltvalue(x) {\n        lua_assert(this.type == LUA_TNUMFLT);\n        this.value = x;\n    }\n\n    setivalue(x) {\n        this.type = LUA_TNUMINT;\n        this.value = x;\n    }\n\n    chgivalue(x) {\n        lua_assert(this.type == LUA_TNUMINT);\n        this.value = x;\n    }\n\n    setnilvalue() {\n        this.type = LUA_TNIL;\n        this.value = null;\n    }\n\n    setfvalue(x) {\n        this.type = LUA_TLCF;\n        this.value = x;\n    }\n\n    setpvalue(x) {\n        this.type = LUA_TLIGHTUSERDATA;\n        this.value = x;\n    }\n\n    setbvalue(x) {\n        this.type = LUA_TBOOLEAN;\n        this.value = x;\n    }\n\n    setsvalue(x) {\n        this.type = LUA_TLNGSTR; /* LUA_TSHRSTR? */\n        this.value = x;\n    }\n\n    setuvalue(x) {\n        this.type = LUA_TUSERDATA;\n        this.value = x;\n    }\n\n    setthvalue(x) {\n        this.type = LUA_TTHREAD;\n        this.value = x;\n    }\n\n    setclLvalue(x) {\n        this.type = LUA_TLCL;\n        this.value = x;\n    }\n\n    setclCvalue(x) {\n        this.type = LUA_TCCL;\n        this.value = x;\n    }\n\n    sethvalue(x) {\n        this.type = LUA_TTABLE;\n        this.value = x;\n    }\n\n    setdeadvalue() {\n        this.type = LUA_TDEADKEY;\n        this.value = null;\n    }\n\n    setfrom(tv) { /* in lua C source setobj2t is often used for this */\n        this.type = tv.type;\n        this.value = tv.value;\n    }\n\n    tsvalue() {\n        lua_assert(this.ttisstring());\n        return this.value;\n    }\n\n    svalue() {\n        return this.tsvalue().getstr();\n    }\n\n    vslen() {\n        return this.tsvalue().tsslen();\n    }\n\n    jsstring(from, to) {\n        return to_jsstring(this.svalue(), from, to, true);\n    }\n}\n\nconst pushobj2s = function(L, tv) {\n    L.stack[L.top++] = new TValue(tv.type, tv.value);\n};\nconst pushsvalue2s = function(L, ts) {\n    L.stack[L.top++] = new TValue(LUA_TLNGSTR, ts);\n};\n/* from stack to (same) stack */\nconst setobjs2s = function(L, newidx, oldidx) {\n    L.stack[newidx].setfrom(L.stack[oldidx]);\n};\n/* to stack (not from same stack) */\nconst setobj2s = function(L, newidx, oldtv) {\n    L.stack[newidx].setfrom(oldtv);\n};\nconst setsvalue2s = function(L, newidx, ts) {\n    L.stack[newidx].setsvalue(ts);\n};\n\nconst luaO_nilobject = new TValue(LUA_TNIL, null);\nObject.freeze(luaO_nilobject);\nmodule.exports.luaO_nilobject = luaO_nilobject;\n\nclass LClosure {\n\n    constructor(L, n) {\n        this.id = L.l_G.id_counter++;\n\n        this.p = null;\n        this.nupvalues = n;\n        this.upvals = new Array(n); /* list of upvalues. initialised in luaF_initupvals */\n    }\n\n}\n\nclass CClosure {\n\n    constructor(L, f, n) {\n        this.id = L.l_G.id_counter++;\n\n        this.f = f;\n        this.nupvalues = n;\n        this.upvalue = new Array(n); /* list of upvalues as TValues */\n        while (n--) {\n            this.upvalue[n] = new TValue(LUA_TNIL, null);\n        }\n    }\n\n}\n\nclass Udata {\n\n    constructor(L, size) {\n        this.id = L.l_G.id_counter++;\n\n        this.metatable = null;\n        this.uservalue = new TValue(LUA_TNIL, null);\n        this.len = size;\n        this.data = Object.create(null); // ignores size argument\n    }\n\n}\n\n/*\n** Description of a local variable for function prototypes\n** (used for debug information)\n*/\nclass LocVar {\n    constructor() {\n        this.varname = null;\n        this.startpc = NaN;  /* first point where variable is active */\n        this.endpc = NaN;    /* first point where variable is dead */\n    }\n}\n\nconst RETS = to_luastring(\"...\");\nconst PRE  = to_luastring(\"[string \\\"\");\nconst POS  = to_luastring(\"\\\"]\");\n\nconst luaO_chunkid = function(source, bufflen) {\n    let l = source.length;\n    let out;\n    if (source[0] === 61 /* ('=').charCodeAt(0) */) {  /* 'literal' source */\n        if (l < bufflen) {  /* small enough? */\n            out = new Uint8Array(l-1);\n            out.set(source.subarray(1));\n        } else {  /* truncate it */\n            out = new Uint8Array(bufflen);\n            out.set(source.subarray(1, bufflen+1));\n        }\n    } else if (source[0] === 64 /* ('@').charCodeAt(0) */) {  /* file name */\n        if (l <= bufflen) {  /* small enough? */\n            out = new Uint8Array(l-1);\n            out.set(source.subarray(1));\n        } else {  /* add '...' before rest of name */\n            out = new Uint8Array(bufflen);\n            out.set(RETS);\n            bufflen -= RETS.length;\n            out.set(source.subarray(l - bufflen), RETS.length);\n        }\n    } else {  /* string; format as [string \"source\"] */\n        out = new Uint8Array(bufflen);\n        let nli = luastring_indexOf(source, 10 /* ('\\n').charCodeAt(0) */);  /* find first new line (if any) */\n        out.set(PRE);  /* add prefix */\n        let out_i = PRE.length;\n        bufflen -= PRE.length + RETS.length + POS.length;  /* save space for prefix+suffix */\n        if (l < bufflen && nli === -1) {  /* small one-line source? */\n            out.set(source, out_i);  /* keep it */\n            out_i += source.length;\n        } else {\n            if (nli !== -1) l = nli;  /* stop at first newline */\n            if (l > bufflen) l = bufflen;\n            out.set(source.subarray(0, l), out_i);\n            out_i += l;\n            out.set(RETS, out_i);\n            out_i += RETS.length;\n        }\n        out.set(POS, out_i);\n        out_i += POS.length;\n        out = out.subarray(0, out_i);\n    }\n    return out;\n};\n\nconst luaO_hexavalue = function(c) {\n    if (lisdigit(c)) return c - 48;\n    else return (c & 0xdf) - 55;\n};\n\nconst UTF8BUFFSZ = 8;\n\nconst luaO_utf8esc = function(buff, x) {\n    let n = 1;  /* number of bytes put in buffer (backwards) */\n    lua_assert(x <= 0x10FFFF);\n    if (x < 0x80)  /* ascii? */\n        buff[UTF8BUFFSZ - 1] = x;\n    else {  /* need continuation bytes */\n        let mfb = 0x3f;  /* maximum that fits in first byte */\n        do {\n            buff[UTF8BUFFSZ - (n++)] = 0x80 | (x & 0x3f);\n            x >>= 6;  /* remove added bits */\n            mfb >>= 1;  /* now there is one less bit available in first byte */\n        } while (x > mfb);  /* still needs continuation byte? */\n        buff[UTF8BUFFSZ - n] = (~mfb << 1) | x;  /* add first byte */\n    }\n    return n;\n};\n\n/* maximum number of significant digits to read (to avoid overflows\n   even with single floats) */\nconst MAXSIGDIG = 30;\n\n/*\n** convert an hexadecimal numeric string to a number, following\n** C99 specification for 'strtod'\n*/\nconst lua_strx2number = function(s) {\n    let i = 0;\n    let r = 0.0;  /* result (accumulator) */\n    let sigdig = 0;  /* number of significant digits */\n    let nosigdig = 0;  /* number of non-significant digits */\n    let e = 0;  /* exponent correction */\n    let neg;  /* 1 if number is negative */\n    let hasdot = false;  /* true after seen a dot */\n    while (lisspace(s[i])) i++;  /* skip initial spaces */\n    if ((neg = (s[i] === 45 /* ('-').charCodeAt(0) */))) i++;  /* check signal */\n    else if (s[i] === 43 /* ('+').charCodeAt(0) */) i++;\n    if (!(s[i] === 48 /* ('0').charCodeAt(0) */ && (s[i+1] === 120 /* ('x').charCodeAt(0) */ || s[i+1] === 88 /* ('X').charCodeAt(0) */)))  /* check '0x' */\n        return null;  /* invalid format (no '0x') */\n    for (i += 2; ; i++) {  /* skip '0x' and read numeral */\n        if (s[i] === 46 /* ('.').charCodeAt(0) i.e. dot/lua_getlocaledecpoint(); */) {\n            if (hasdot) break;  /* second dot? stop loop */\n            else hasdot = true;\n        } else if (lisxdigit(s[i])) {\n            if (sigdig === 0 && s[i] === 48 /* ('0').charCodeAt(0) */)  /* non-significant digit (zero)? */\n                nosigdig++;\n            else if (++sigdig <= MAXSIGDIG)  /* can read it without overflow? */\n                r = (r * 16) + luaO_hexavalue(s[i]);\n            else e++; /* too many digits; ignore, but still count for exponent */\n            if (hasdot) e--;  /* decimal digit? correct exponent */\n        } else break;  /* neither a dot nor a digit */\n    }\n\n    if (nosigdig + sigdig === 0)  /* no digits? */\n        return null;  /* invalid format */\n    e *= 4;  /* each digit multiplies/divides value by 2^4 */\n    if (s[i] === 112 /* ('p').charCodeAt(0) */ || s[i] === 80 /* ('P').charCodeAt(0) */) {  /* exponent part? */\n        let exp1 = 0;  /* exponent value */\n        let neg1;  /* exponent signal */\n        i++;  /* skip 'p' */\n        if ((neg1 = (s[i] === 45 /* ('-').charCodeAt(0) */))) i++;  /* signal */\n        else if (s[i] === 43 /* ('+').charCodeAt(0) */) i++;\n        if (!lisdigit(s[i]))\n            return null;  /* invalid; must have at least one digit */\n        while (lisdigit(s[i]))  /* read exponent */\n            exp1 = exp1 * 10 + s[i++] - 48 /* ('0').charCodeAt(0) */;\n        if (neg1) exp1 = -exp1;\n        e += exp1;\n    }\n    if (neg) r = -r;\n    return {\n        n: ldexp(r, e),\n        i: i\n    };\n};\n\nconst lua_str2number = function(s) {\n    try {\n        s = to_jsstring(s);\n    } catch (e) {\n        return null;\n    }\n    /* use a regex to validate number and also to get length\n       parseFloat ignores trailing junk */\n    let r = /^[\\t\\v\\f \\n\\r]*[+-]?(?:[0-9]+\\.?[0-9]*|\\.[0-9]*)(?:[eE][+-]?[0-9]+)?/.exec(s);\n    if (!r)\n        return null;\n    let flt = parseFloat(r[0]);\n    return !isNaN(flt) ? { n: flt, i: r[0].length } : null;\n};\n\nconst l_str2dloc = function(s, mode) {\n    let result = mode === 'x' ? lua_strx2number(s) : lua_str2number(s); /* try to convert */\n    if (result === null) return null;\n    while (lisspace(s[result.i])) result.i++;  /* skip trailing spaces */\n    return (result.i === s.length || s[result.i] === 0) ? result : null;  /* OK if no trailing characters */\n};\n\nconst SIGILS = [\n    46  /* (\".\").charCodeAt(0) */,\n    120 /* (\"x\").charCodeAt(0) */,\n    88  /* (\"X\").charCodeAt(0) */,\n    110 /* (\"n\").charCodeAt(0) */,\n    78  /* (\"N\").charCodeAt(0) */\n];\nconst modes = {\n    [ 46]: \".\",\n    [120]: \"x\",\n    [ 88]: \"x\",\n    [110]: \"n\",\n    [ 78]: \"n\"\n};\nconst l_str2d = function(s) {\n    let l = s.length;\n    let pmode = 0;\n    for (let i=0; i<l; i++) {\n        let v = s[i];\n        if (SIGILS.indexOf(v) !== -1) {\n            pmode = v;\n            break;\n        }\n    }\n    let mode = modes[pmode];\n    if (mode === 'n')  /* reject 'inf' and 'nan' */\n        return null;\n    let end = l_str2dloc(s, mode);  /* try to convert */\n    // if (end === null) {   /* failed? may be a different locale */\n    //     throw new Error(\"Locale not available to handle number\"); // TODO\n    // }\n    return end;\n};\n\nconst MAXBY10  = Math.floor(MAX_INT / 10);\nconst MAXLASTD = MAX_INT % 10;\n\nconst l_str2int = function(s) {\n    let i = 0;\n    let a = 0;\n    let empty = true;\n    let neg;\n\n    while (lisspace(s[i])) i++;  /* skip initial spaces */\n    if ((neg = (s[i] === 45 /* ('-').charCodeAt(0) */))) i++;\n    else if (s[i] === 43 /* ('+').charCodeAt(0) */) i++;\n    if (s[i] === 48 /* ('0').charCodeAt(0) */ && (s[i+1] === 120 /* ('x').charCodeAt(0) */ || s[i+1] === 88 /* ('X').charCodeAt(0) */)) {  /* hex? */\n        i += 2;  /* skip '0x' */\n        for (; i < s.length && lisxdigit(s[i]); i++) {\n            a = (a * 16 + luaO_hexavalue(s[i]))|0;\n            empty = false;\n        }\n    } else {  /* decimal */\n        for (; i < s.length && lisdigit(s[i]); i++) {\n            let d = s[i] - 48 /* ('0').charCodeAt(0) */;\n            if (a >= MAXBY10 && (a > MAXBY10 || d > MAXLASTD + neg))  /* overflow? */\n                return null;  /* do not accept it (as integer) */\n            a = (a * 10 + d)|0;\n            empty = false;\n        }\n    }\n    while (i < s.length && lisspace(s[i])) i++;  /* skip trailing spaces */\n    if (empty || (i !== s.length && s[i] !== 0)) return null;  /* something wrong in the numeral */\n    else {\n        return {\n            n: (neg ? -a : a)|0,\n            i: i\n        };\n    }\n};\n\nconst luaO_str2num = function(s, o) {\n    let s2i = l_str2int(s);\n    if (s2i !== null) {   /* try as an integer */\n        o.setivalue(s2i.n);\n        return s2i.i+1;\n    } else {   /* else try as a float */\n        s2i = l_str2d(s);\n        if (s2i !== null) {\n            o.setfltvalue(s2i.n);\n            return s2i.i+1;\n        } else\n            return 0;  /* conversion failed */\n    }\n};\n\nconst luaO_tostring = function(L, obj) {\n    let buff;\n    if (obj.ttisinteger())\n        buff = to_luastring(lua_integer2str(obj.value));\n    else {\n        let str = lua_number2str(obj.value);\n        if (!LUA_COMPAT_FLOATSTRING && /^[-0123456789]+$/.test(str)) {  /* looks like an int? */\n            str += '.0'; /* adds '.0' to result: lua_getlocaledecpoint removed as optimisation */\n        }\n        buff = to_luastring(str);\n    }\n    obj.setsvalue(luaS_bless(L, buff));\n};\n\nconst pushstr = function(L, str) {\n    ldo.luaD_inctop(L);\n    setsvalue2s(L, L.top-1, luaS_new(L, str));\n};\n\nconst luaO_pushvfstring = function(L, fmt, argp) {\n    let n = 0;\n    let i = 0;\n    let a = 0;\n    let e;\n    for (;;) {\n        e = luastring_indexOf(fmt, 37 /* ('%').charCodeAt(0) */, i);\n        if (e == -1) break;\n        pushstr(L, fmt.subarray(i, e));\n        switch(fmt[e+1]) {\n            case 115 /* ('s').charCodeAt(0) */: {\n                let s = argp[a++];\n                if (s === null) s = to_luastring(\"(null)\", true);\n                else {\n                    s = from_userstring(s);\n                    /* respect null terminator */\n                    let i = luastring_indexOf(s, 0);\n                    if (i !== -1)\n                        s = s.subarray(0, i);\n                }\n                pushstr(L, s);\n                break;\n            }\n            case 99 /* ('c').charCodeAt(0) */: {\n                let buff = argp[a++];\n                if (lisprint(buff))\n                    pushstr(L, luastring_of(buff));\n                else\n                    luaO_pushfstring(L, to_luastring(\"<\\\\%d>\", true), buff);\n                break;\n            }\n            case 100 /* ('d').charCodeAt(0) */:\n            case 73 /* ('I').charCodeAt(0) */:\n                ldo.luaD_inctop(L);\n                L.stack[L.top-1].setivalue(argp[a++]);\n                luaO_tostring(L, L.stack[L.top-1]);\n                break;\n            case 102 /* ('f').charCodeAt(0) */:\n                ldo.luaD_inctop(L);\n                L.stack[L.top-1].setfltvalue(argp[a++]);\n                luaO_tostring(L, L.stack[L.top-1]);\n                break;\n            case 112 /* ('p').charCodeAt(0) */: {\n                let v = argp[a++];\n                if (v instanceof lstate.lua_State ||\n                    v instanceof ltable.Table ||\n                    v instanceof Udata ||\n                    v instanceof LClosure ||\n                    v instanceof CClosure) {\n                    pushstr(L, to_luastring(\"0x\"+v.id.toString(16)));\n                } else {\n                    switch(typeof v) {\n                        case \"undefined\":\n                            pushstr(L, to_luastring(\"undefined\"));\n                            break;\n                        case \"number\":  /* before check object as null is an object */\n                            pushstr(L, to_luastring(\"Number(\"+v+\")\"));\n                            break;\n                        case \"string\":  /* before check object as null is an object */\n                            pushstr(L, to_luastring(\"String(\"+JSON.stringify(v)+\")\"));\n                            break;\n                        case \"boolean\":  /* before check object as null is an object */\n                            pushstr(L, to_luastring(v?\"Boolean(true)\":\"Boolean(false)\"));\n                            break;\n                        case \"object\":\n                            if (v === null) { /* null is special */\n                                pushstr(L, to_luastring(\"null\"));\n                                break;\n                            }\n                            /* fall through */\n                        case \"function\": {\n                            let id = L.l_G.ids.get(v);\n                            if (!id) {\n                                id = L.l_G.id_counter++;\n                                L.l_G.ids.set(v, id);\n                            }\n                            pushstr(L, to_luastring(\"0x\"+id.toString(16)));\n                            break;\n                        }\n                        default:\n                            /* user provided object. no id available */\n                            pushstr(L, to_luastring(\"<id NYI>\"));\n                    }\n                }\n                break;\n            }\n            case 85 /* ('U').charCodeAt(0) */: {\n                let buff = new Uint8Array(UTF8BUFFSZ);\n                let l = luaO_utf8esc(buff, argp[a++]);\n                pushstr(L, buff.subarray(UTF8BUFFSZ - l));\n                break;\n            }\n            case 37 /* ('%').charCodeAt(0) */:\n                pushstr(L, to_luastring(\"%\", true));\n                break;\n            default:\n                ldebug.luaG_runerror(L, to_luastring(\"invalid option '%%%c' to 'lua_pushfstring'\"), fmt[e + 1]);\n        }\n        n += 2;\n        i = e + 2;\n    }\n    ldo.luaD_checkstack(L, 1);\n    pushstr(L, fmt.subarray(i));\n    if (n > 0) lvm.luaV_concat(L, n+1);\n    return L.stack[L.top-1].svalue();\n};\n\nconst luaO_pushfstring = function(L, fmt, ...argp) {\n    return luaO_pushvfstring(L, fmt, argp);\n};\n\n\n/*\n** converts an integer to a \"floating point byte\", represented as\n** (eeeeexxx), where the real value is (1xxx) * 2^(eeeee - 1) if\n** eeeee !== 0 and (xxx) otherwise.\n*/\nconst luaO_int2fb = function(x) {\n    let e = 0;  /* exponent */\n    if (x < 8) return x;\n    while (x >= (8 << 4)) {  /* coarse steps */\n        x = (x + 0xf) >> 4;  /* x = ceil(x / 16) */\n        e += 4;\n    }\n    while (x >= (8 << 1)) {  /* fine steps */\n        x = (x + 1) >> 1;  /* x = ceil(x / 2) */\n        e++;\n    }\n    return ((e+1) << 3) | (x - 8);\n};\n\nconst intarith = function(L, op, v1, v2) {\n    switch (op) {\n        case LUA_OPADD:  return (v1 + v2)|0;\n        case LUA_OPSUB:  return (v1 - v2)|0;\n        case LUA_OPMUL:  return lvm.luaV_imul(v1, v2);\n        case LUA_OPMOD:  return lvm.luaV_mod(L, v1, v2);\n        case LUA_OPIDIV: return lvm.luaV_div(L, v1, v2);\n        case LUA_OPBAND: return (v1 & v2);\n        case LUA_OPBOR:  return (v1 | v2);\n        case LUA_OPBXOR: return (v1 ^ v2);\n        case LUA_OPSHL:  return lvm.luaV_shiftl(v1, v2);\n        case LUA_OPSHR:  return lvm.luaV_shiftl(v1, -v2);\n        case LUA_OPUNM:  return (0 - v1)|0;\n        case LUA_OPBNOT: return (~0 ^ v1);\n        default: lua_assert(0);\n    }\n};\n\n\nconst numarith = function(L, op, v1, v2) {\n    switch (op) {\n        case LUA_OPADD:  return v1 + v2;\n        case LUA_OPSUB:  return v1 - v2;\n        case LUA_OPMUL:  return v1 * v2;\n        case LUA_OPDIV:  return v1 / v2;\n        case LUA_OPPOW:  return Math.pow(v1, v2);\n        case LUA_OPIDIV: return Math.floor(v1 / v2);\n        case LUA_OPUNM:  return -v1;\n        case LUA_OPMOD:  return luai_nummod(L, v1, v2);\n        default: lua_assert(0);\n    }\n};\n\nconst luaO_arith = function(L, op, p1, p2, p3) {\n    let res = (typeof p3 === \"number\") ? L.stack[p3] : p3;  /* FIXME */\n\n    switch (op) {\n        case LUA_OPBAND: case LUA_OPBOR: case LUA_OPBXOR:\n        case LUA_OPSHL: case LUA_OPSHR:\n        case LUA_OPBNOT: {  /* operate only on integers */\n            let i1, i2;\n            if ((i1 = lvm.tointeger(p1)) !== false && (i2 = lvm.tointeger(p2)) !== false) {\n                res.setivalue(intarith(L, op, i1, i2));\n                return;\n            }\n            else break;  /* go to the end */\n        }\n        case LUA_OPDIV: case LUA_OPPOW: {  /* operate only on floats */\n            let n1, n2;\n            if ((n1 = lvm.tonumber(p1)) !== false && (n2 = lvm.tonumber(p2)) !== false) {\n                res.setfltvalue(numarith(L, op, n1, n2));\n                return;\n            }\n            else break;  /* go to the end */\n        }\n        default: {  /* other operations */\n            let n1, n2;\n            if (p1.ttisinteger() && p2.ttisinteger()) {\n                res.setivalue(intarith(L, op, p1.value, p2.value));\n                return;\n            }\n            else if ((n1 = lvm.tonumber(p1)) !== false && (n2 = lvm.tonumber(p2)) !== false) {\n                res.setfltvalue(numarith(L, op, n1, n2));\n                return;\n            }\n            else break;  /* go to the end */\n        }\n    }\n    /* could not perform raw operation; try metamethod */\n    lua_assert(L !== null);  /* should not fail when folding (compile time) */\n    ltm.luaT_trybinTM(L, p1, p2, p3, (op - LUA_OPADD) + ltm.TMS.TM_ADD);\n};\n\n\nmodule.exports.CClosure          = CClosure;\nmodule.exports.LClosure          = LClosure;\nmodule.exports.LUA_TDEADKEY      = LUA_TDEADKEY;\nmodule.exports.LUA_TPROTO        = LUA_TPROTO;\nmodule.exports.LocVar            = LocVar;\nmodule.exports.TValue            = TValue;\nmodule.exports.Udata             = Udata;\nmodule.exports.UTF8BUFFSZ        = UTF8BUFFSZ;\nmodule.exports.luaO_arith        = luaO_arith;\nmodule.exports.luaO_chunkid      = luaO_chunkid;\nmodule.exports.luaO_hexavalue    = luaO_hexavalue;\nmodule.exports.luaO_int2fb       = luaO_int2fb;\nmodule.exports.luaO_pushfstring  = luaO_pushfstring;\nmodule.exports.luaO_pushvfstring = luaO_pushvfstring;\nmodule.exports.luaO_str2num      = luaO_str2num;\nmodule.exports.luaO_tostring     = luaO_tostring;\nmodule.exports.luaO_utf8esc      = luaO_utf8esc;\nmodule.exports.numarith          = numarith;\nmodule.exports.pushobj2s         = pushobj2s;\nmodule.exports.pushsvalue2s      = pushsvalue2s;\nmodule.exports.setobjs2s         = setobjs2s;\nmodule.exports.setobj2s          = setobj2s;\nmodule.exports.setsvalue2s       = setsvalue2s;\n","\"use strict\";\n\nconst OpCodes = [\n    \"MOVE\",\n    \"LOADK\",\n    \"LOADKX\",\n    \"LOADBOOL\",\n    \"LOADNIL\",\n    \"GETUPVAL\",\n    \"GETTABUP\",\n    \"GETTABLE\",\n    \"SETTABUP\",\n    \"SETUPVAL\",\n    \"SETTABLE\",\n    \"NEWTABLE\",\n    \"SELF\",\n    \"ADD\",\n    \"SUB\",\n    \"MUL\",\n    \"MOD\",\n    \"POW\",\n    \"DIV\",\n    \"IDIV\",\n    \"BAND\",\n    \"BOR\",\n    \"BXOR\",\n    \"SHL\",\n    \"SHR\",\n    \"UNM\",\n    \"BNOT\",\n    \"NOT\",\n    \"LEN\",\n    \"CONCAT\",\n    \"JMP\",\n    \"EQ\",\n    \"LT\",\n    \"LE\",\n    \"TEST\",\n    \"TESTSET\",\n    \"CALL\",\n    \"TAILCALL\",\n    \"RETURN\",\n    \"FORLOOP\",\n    \"FORPREP\",\n    \"TFORCALL\",\n    \"TFORLOOP\",\n    \"SETLIST\",\n    \"CLOSURE\",\n    \"VARARG\",\n    \"EXTRAARG\"\n];\n\nconst OpCodesI = {\n    OP_MOVE:     0,\n    OP_LOADK:    1,\n    OP_LOADKX:   2,\n    OP_LOADBOOL: 3,\n    OP_LOADNIL:  4,\n    OP_GETUPVAL: 5,\n    OP_GETTABUP: 6,\n    OP_GETTABLE: 7,\n    OP_SETTABUP: 8,\n    OP_SETUPVAL: 9,\n    OP_SETTABLE: 10,\n    OP_NEWTABLE: 11,\n    OP_SELF:     12,\n    OP_ADD:      13,\n    OP_SUB:      14,\n    OP_MUL:      15,\n    OP_MOD:      16,\n    OP_POW:      17,\n    OP_DIV:      18,\n    OP_IDIV:     19,\n    OP_BAND:     20,\n    OP_BOR:      21,\n    OP_BXOR:     22,\n    OP_SHL:      23,\n    OP_SHR:      24,\n    OP_UNM:      25,\n    OP_BNOT:     26,\n    OP_NOT:      27,\n    OP_LEN:      28,\n    OP_CONCAT:   29,\n    OP_JMP:      30,\n    OP_EQ:       31,\n    OP_LT:       32,\n    OP_LE:       33,\n    OP_TEST:     34,\n    OP_TESTSET:  35,\n    OP_CALL:     36,\n    OP_TAILCALL: 37,\n    OP_RETURN:   38,\n    OP_FORLOOP:  39,\n    OP_FORPREP:  40,\n    OP_TFORCALL: 41,\n    OP_TFORLOOP: 42,\n    OP_SETLIST:  43,\n    OP_CLOSURE:  44,\n    OP_VARARG:   45,\n    OP_EXTRAARG: 46\n};\n\n/*\n** masks for instruction properties. The format is:\n** bits 0-1: op mode\n** bits 2-3: C arg mode\n** bits 4-5: B arg mode\n** bit 6: instruction set register A\n** bit 7: operator is a test (next instruction must be a jump)\n*/\nconst OpArgN = 0;  /* argument is not used */\nconst OpArgU = 1;  /* argument is used */\nconst OpArgR = 2;  /* argument is a register or a jump offset */\nconst OpArgK = 3;  /* argument is a constant or register/constant */\n\n/* basic instruction format */\nconst iABC  = 0;\nconst iABx  = 1;\nconst iAsBx = 2;\nconst iAx   = 3;\n\nconst luaP_opmodes = [\n    0 << 7 | 1 << 6 | OpArgR << 4 | OpArgN << 2 | iABC,   /* OP_MOVE */\n    0 << 7 | 1 << 6 | OpArgK << 4 | OpArgN << 2 | iABx,   /* OP_LOADK */\n    0 << 7 | 1 << 6 | OpArgN << 4 | OpArgN << 2 | iABx,   /* OP_LOADKX */\n    0 << 7 | 1 << 6 | OpArgU << 4 | OpArgU << 2 | iABC,   /* OP_LOADBOOL */\n    0 << 7 | 1 << 6 | OpArgU << 4 | OpArgN << 2 | iABC,   /* OP_LOADNIL */\n    0 << 7 | 1 << 6 | OpArgU << 4 | OpArgN << 2 | iABC,   /* OP_GETUPVAL */\n    0 << 7 | 1 << 6 | OpArgU << 4 | OpArgK << 2 | iABC,   /* OP_GETTABUP */\n    0 << 7 | 1 << 6 | OpArgR << 4 | OpArgK << 2 | iABC,   /* OP_GETTABLE */\n    0 << 7 | 0 << 6 | OpArgK << 4 | OpArgK << 2 | iABC,   /* OP_SETTABUP */\n    0 << 7 | 0 << 6 | OpArgU << 4 | OpArgN << 2 | iABC,   /* OP_SETUPVAL */\n    0 << 7 | 0 << 6 | OpArgK << 4 | OpArgK << 2 | iABC,   /* OP_SETTABLE */\n    0 << 7 | 1 << 6 | OpArgU << 4 | OpArgU << 2 | iABC,   /* OP_NEWTABLE */\n    0 << 7 | 1 << 6 | OpArgR << 4 | OpArgK << 2 | iABC,   /* OP_SELF */\n    0 << 7 | 1 << 6 | OpArgK << 4 | OpArgK << 2 | iABC,   /* OP_ADD */\n    0 << 7 | 1 << 6 | OpArgK << 4 | OpArgK << 2 | iABC,   /* OP_SUB */\n    0 << 7 | 1 << 6 | OpArgK << 4 | OpArgK << 2 | iABC,   /* OP_MUL */\n    0 << 7 | 1 << 6 | OpArgK << 4 | OpArgK << 2 | iABC,   /* OP_MOD */\n    0 << 7 | 1 << 6 | OpArgK << 4 | OpArgK << 2 | iABC,   /* OP_POW */\n    0 << 7 | 1 << 6 | OpArgK << 4 | OpArgK << 2 | iABC,   /* OP_DIV */\n    0 << 7 | 1 << 6 | OpArgK << 4 | OpArgK << 2 | iABC,   /* OP_IDIV */\n    0 << 7 | 1 << 6 | OpArgK << 4 | OpArgK << 2 | iABC,   /* OP_BAND */\n    0 << 7 | 1 << 6 | OpArgK << 4 | OpArgK << 2 | iABC,   /* OP_BOR */\n    0 << 7 | 1 << 6 | OpArgK << 4 | OpArgK << 2 | iABC,   /* OP_BXOR */\n    0 << 7 | 1 << 6 | OpArgK << 4 | OpArgK << 2 | iABC,   /* OP_SHL */\n    0 << 7 | 1 << 6 | OpArgK << 4 | OpArgK << 2 | iABC,   /* OP_SHR */\n    0 << 7 | 1 << 6 | OpArgR << 4 | OpArgN << 2 | iABC,   /* OP_UNM */\n    0 << 7 | 1 << 6 | OpArgR << 4 | OpArgN << 2 | iABC,   /* OP_BNOT */\n    0 << 7 | 1 << 6 | OpArgR << 4 | OpArgN << 2 | iABC,   /* OP_NOT */\n    0 << 7 | 1 << 6 | OpArgR << 4 | OpArgN << 2 | iABC,   /* OP_LEN */\n    0 << 7 | 1 << 6 | OpArgR << 4 | OpArgR << 2 | iABC,   /* OP_CONCAT */\n    0 << 7 | 0 << 6 | OpArgR << 4 | OpArgN << 2 | iAsBx,  /* OP_JMP */\n    1 << 7 | 0 << 6 | OpArgK << 4 | OpArgK << 2 | iABC,   /* OP_EQ */\n    1 << 7 | 0 << 6 | OpArgK << 4 | OpArgK << 2 | iABC,   /* OP_LT */\n    1 << 7 | 0 << 6 | OpArgK << 4 | OpArgK << 2 | iABC,   /* OP_LE */\n    1 << 7 | 0 << 6 | OpArgN << 4 | OpArgU << 2 | iABC,   /* OP_TEST */\n    1 << 7 | 1 << 6 | OpArgR << 4 | OpArgU << 2 | iABC,   /* OP_TESTSET */\n    0 << 7 | 1 << 6 | OpArgU << 4 | OpArgU << 2 | iABC,   /* OP_CALL */\n    0 << 7 | 1 << 6 | OpArgU << 4 | OpArgU << 2 | iABC,   /* OP_TAILCALL */\n    0 << 7 | 0 << 6 | OpArgU << 4 | OpArgN << 2 | iABC,   /* OP_RETURN */\n    0 << 7 | 1 << 6 | OpArgR << 4 | OpArgN << 2 | iAsBx,  /* OP_FORLOOP */\n    0 << 7 | 1 << 6 | OpArgR << 4 | OpArgN << 2 | iAsBx,  /* OP_FORPREP */\n    0 << 7 | 0 << 6 | OpArgN << 4 | OpArgU << 2 | iABC,   /* OP_TFORCALL */\n    0 << 7 | 1 << 6 | OpArgR << 4 | OpArgN << 2 | iAsBx,  /* OP_TFORLOOP */\n    0 << 7 | 0 << 6 | OpArgU << 4 | OpArgU << 2 | iABC,   /* OP_SETLIST */\n    0 << 7 | 1 << 6 | OpArgU << 4 | OpArgN << 2 | iABx,   /* OP_CLOSURE */\n    0 << 7 | 1 << 6 | OpArgU << 4 | OpArgN << 2 | iABC,   /* OP_VARARG */\n    0 << 7 | 0 << 6 | OpArgU << 4 | OpArgU << 2 | iAx     /* OP_EXTRAARG */\n];\n\nconst getOpMode = function(m) {\n    return luaP_opmodes[m] & 3;\n};\n\nconst getBMode = function(m) {\n    return (luaP_opmodes[m] >> 4) & 3;\n};\n\nconst getCMode = function(m) {\n    return (luaP_opmodes[m] >> 2) & 3;\n};\n\nconst testAMode = function(m) {\n    return luaP_opmodes[m] & (1 << 6);\n};\n\nconst testTMode = function(m) {\n    return luaP_opmodes[m] & (1 << 7);\n};\n\nconst SIZE_C     = 9;\nconst SIZE_B     = 9;\nconst SIZE_Bx    = (SIZE_C + SIZE_B);\nconst SIZE_A     = 8;\nconst SIZE_Ax    = (SIZE_C + SIZE_B + SIZE_A);\nconst SIZE_OP    = 6;\nconst POS_OP     = 0;\nconst POS_A      = (POS_OP + SIZE_OP);\nconst POS_C      = (POS_A + SIZE_A);\nconst POS_B      = (POS_C + SIZE_C);\nconst POS_Bx     = POS_C;\nconst POS_Ax     = POS_A;\nconst MAXARG_Bx  = ((1 << SIZE_Bx) - 1);\nconst MAXARG_sBx = (MAXARG_Bx >> 1); /* 'sBx' is signed */\nconst MAXARG_Ax  = ((1<<SIZE_Ax)-1);\nconst MAXARG_A   = ((1 << SIZE_A) - 1);\nconst MAXARG_B   = ((1 << SIZE_B) - 1);\nconst MAXARG_C   = ((1 << SIZE_C) - 1);\n\n/* this bit 1 means constant (0 means register) */\nconst BITRK      = (1 << (SIZE_B - 1));\n\nconst MAXINDEXRK = (BITRK - 1);\n\n/*\n** invalid register that fits in 8 bits\n*/\nconst NO_REG     = MAXARG_A;\n\n/* test whether value is a constant */\nconst ISK = function (x) {\n    return x & BITRK;\n};\n\n/* gets the index of the constant */\nconst INDEXK = function (r) {\n    return r & ~BITRK;\n};\n\n/* code a constant index as a RK value */\nconst RKASK = function(x) {\n    return x | BITRK;\n};\n\n\n/* creates a mask with 'n' 1 bits at position 'p' */\nconst MASK1 = function(n, p) {\n    return ((~((~0)<<(n)))<<(p));\n};\n\n/* creates a mask with 'n' 0 bits at position 'p' */\nconst MASK0 = function(n, p) {\n    return (~MASK1(n, p));\n};\n\nconst GET_OPCODE = function(i) {\n    return i.opcode;\n};\n\nconst SET_OPCODE = function(i, o) {\n    i.code = (i.code & MASK0(SIZE_OP, POS_OP)) | ((o << POS_OP) & MASK1(SIZE_OP, POS_OP));\n    return fullins(i);\n};\n\nconst setarg = function(i, v, pos, size) {\n    i.code = (i.code & MASK0(size, pos)) | ((v << pos) & MASK1(size, pos));\n    return fullins(i);\n};\n\nconst GETARG_A = function(i) {\n    return i.A;\n};\n\nconst SETARG_A = function(i,v) {\n    return setarg(i, v, POS_A, SIZE_A);\n};\n\nconst GETARG_B = function(i) {\n    return i.B;\n};\n\nconst SETARG_B = function(i,v) {\n    return setarg(i, v, POS_B, SIZE_B);\n};\n\nconst GETARG_C = function(i) {\n    return i.C;\n};\n\nconst SETARG_C = function(i,v) {\n    return setarg(i, v, POS_C, SIZE_C);\n};\n\nconst GETARG_Bx = function(i) {\n    return i.Bx;\n};\n\nconst SETARG_Bx = function(i,v) {\n    return setarg(i, v, POS_Bx, SIZE_Bx);\n};\n\nconst GETARG_Ax = function(i) {\n    return i.Ax;\n};\n\nconst SETARG_Ax = function(i,v) {\n    return setarg(i, v, POS_Ax, SIZE_Ax);\n};\n\nconst GETARG_sBx = function(i) {\n    return i.sBx;\n};\n\nconst SETARG_sBx = function(i, b) {\n    return SETARG_Bx(i, b + MAXARG_sBx);\n};\n\n/*\n** Pre-calculate all possible part of the instruction\n*/\nconst fullins = function(ins) {\n    if (typeof ins === \"number\") {\n        return {\n            code:   ins,\n            opcode: (ins >> POS_OP) & MASK1(SIZE_OP, 0),\n            A:      (ins >> POS_A)  & MASK1(SIZE_A,  0),\n            B:      (ins >> POS_B)  & MASK1(SIZE_B,  0),\n            C:      (ins >> POS_C)  & MASK1(SIZE_C,  0),\n            Bx:     (ins >> POS_Bx) & MASK1(SIZE_Bx, 0),\n            Ax:     (ins >> POS_Ax) & MASK1(SIZE_Ax, 0),\n            sBx:    ((ins >> POS_Bx) & MASK1(SIZE_Bx, 0)) - MAXARG_sBx\n        };\n    } else {\n        let i = ins.code;\n        ins.opcode = (i >> POS_OP) & MASK1(SIZE_OP, 0);\n        ins.A      = (i >> POS_A)  & MASK1(SIZE_A,  0);\n        ins.B      = (i >> POS_B)  & MASK1(SIZE_B,  0);\n        ins.C      = (i >> POS_C)  & MASK1(SIZE_C,  0);\n        ins.Bx     = (i >> POS_Bx) & MASK1(SIZE_Bx, 0);\n        ins.Ax     = (i >> POS_Ax) & MASK1(SIZE_Ax, 0);\n        ins.sBx    = ((i >> POS_Bx) & MASK1(SIZE_Bx, 0)) - MAXARG_sBx;\n        return ins;\n    }\n};\n\nconst CREATE_ABC = function(o, a, b, c) {\n    return fullins(o << POS_OP | a << POS_A | b << POS_B | c << POS_C);\n};\n\nconst CREATE_ABx = function(o, a, bc) {\n    return fullins(o << POS_OP | a << POS_A | bc << POS_Bx);\n};\n\nconst CREATE_Ax = function(o, a) {\n    return fullins(o << POS_OP | a << POS_Ax);\n};\n\n/* number of list items to accumulate before a SETLIST instruction */\nconst LFIELDS_PER_FLUSH = 50;\n\nmodule.exports.BITRK               = BITRK;\nmodule.exports.CREATE_ABC          = CREATE_ABC;\nmodule.exports.CREATE_ABx          = CREATE_ABx;\nmodule.exports.CREATE_Ax           = CREATE_Ax;\nmodule.exports.GET_OPCODE          = GET_OPCODE;\nmodule.exports.GETARG_A            = GETARG_A;\nmodule.exports.GETARG_B            = GETARG_B;\nmodule.exports.GETARG_C            = GETARG_C;\nmodule.exports.GETARG_Bx           = GETARG_Bx;\nmodule.exports.GETARG_Ax           = GETARG_Ax;\nmodule.exports.GETARG_sBx          = GETARG_sBx;\nmodule.exports.INDEXK              = INDEXK;\nmodule.exports.ISK                 = ISK;\nmodule.exports.LFIELDS_PER_FLUSH   = LFIELDS_PER_FLUSH;\nmodule.exports.MAXARG_A            = MAXARG_A;\nmodule.exports.MAXARG_Ax           = MAXARG_Ax;\nmodule.exports.MAXARG_B            = MAXARG_B;\nmodule.exports.MAXARG_Bx           = MAXARG_Bx;\nmodule.exports.MAXARG_C            = MAXARG_C;\nmodule.exports.MAXARG_sBx          = MAXARG_sBx;\nmodule.exports.MAXINDEXRK          = MAXINDEXRK;\nmodule.exports.NO_REG              = NO_REG;\nmodule.exports.OpArgK              = OpArgK;\nmodule.exports.OpArgN              = OpArgN;\nmodule.exports.OpArgR              = OpArgR;\nmodule.exports.OpArgU              = OpArgU;\nmodule.exports.OpCodes             = OpCodes;\nmodule.exports.OpCodesI            = OpCodesI;\nmodule.exports.POS_A               = POS_A;\nmodule.exports.POS_Ax              = POS_Ax;\nmodule.exports.POS_B               = POS_B;\nmodule.exports.POS_Bx              = POS_Bx;\nmodule.exports.POS_C               = POS_C;\nmodule.exports.POS_OP              = POS_OP;\nmodule.exports.RKASK               = RKASK;\nmodule.exports.SETARG_A            = SETARG_A;\nmodule.exports.SETARG_Ax           = SETARG_Ax;\nmodule.exports.SETARG_B            = SETARG_B;\nmodule.exports.SETARG_Bx           = SETARG_Bx;\nmodule.exports.SETARG_C            = SETARG_C;\nmodule.exports.SETARG_sBx          = SETARG_sBx;\nmodule.exports.SET_OPCODE          = SET_OPCODE;\nmodule.exports.SIZE_A              = SIZE_A;\nmodule.exports.SIZE_Ax             = SIZE_Ax;\nmodule.exports.SIZE_B              = SIZE_B;\nmodule.exports.SIZE_Bx             = SIZE_Bx;\nmodule.exports.SIZE_C              = SIZE_C;\nmodule.exports.SIZE_OP             = SIZE_OP;\nmodule.exports.fullins             = fullins;\nmodule.exports.getBMode            = getBMode;\nmodule.exports.getCMode            = getCMode;\nmodule.exports.getOpMode           = getOpMode;\nmodule.exports.iABC                = iABC;\nmodule.exports.iABx                = iABx;\nmodule.exports.iAsBx               = iAsBx;\nmodule.exports.iAx                 = iAx;\nmodule.exports.testAMode           = testAMode;\nmodule.exports.testTMode           = testTMode;\n","\"use strict\";\n\nconst {\n    LUA_MULTRET,\n    to_luastring\n} = require('./defs.js');\nconst {\n    BinOpr: {\n        OPR_ADD,\n        OPR_AND,\n        OPR_BAND,\n        OPR_BOR,\n        OPR_BXOR,\n        OPR_CONCAT,\n        OPR_DIV,\n        OPR_EQ,\n        OPR_GE,\n        OPR_GT,\n        OPR_IDIV,\n        OPR_LE,\n        OPR_LT,\n        OPR_MOD,\n        OPR_MUL,\n        OPR_NE,\n        OPR_NOBINOPR,\n        OPR_OR,\n        OPR_POW,\n        OPR_SHL,\n        OPR_SHR,\n        OPR_SUB\n    },\n    UnOpr: {\n        OPR_BNOT,\n        OPR_LEN,\n        OPR_MINUS,\n        OPR_NOT,\n        OPR_NOUNOPR\n    },\n    NO_JUMP,\n    getinstruction,\n    luaK_checkstack,\n    luaK_codeABC,\n    luaK_codeABx,\n    luaK_codeAsBx,\n    luaK_codek,\n    luaK_concat,\n    luaK_dischargevars,\n    luaK_exp2RK,\n    luaK_exp2anyreg,\n    luaK_exp2anyregup,\n    luaK_exp2nextreg,\n    luaK_exp2val,\n    luaK_fixline,\n    luaK_getlabel,\n    luaK_goiffalse,\n    luaK_goiftrue,\n    luaK_indexed,\n    luaK_infix,\n    luaK_intK,\n    luaK_jump,\n    luaK_jumpto,\n    luaK_nil,\n    luaK_patchclose,\n    luaK_patchlist,\n    luaK_patchtohere,\n    luaK_posfix,\n    luaK_prefix,\n    luaK_reserveregs,\n    luaK_ret,\n    luaK_self,\n    luaK_setlist,\n    luaK_setmultret,\n    luaK_setoneret,\n    luaK_setreturns,\n    luaK_storevar,\n    luaK_stringK\n} = require('./lcode.js');\nconst ldo      = require('./ldo.js');\nconst lfunc    = require('./lfunc.js');\nconst llex     = require('./llex.js');\nconst {\n    LUAI_MAXCCALLS,\n    MAX_INT,\n    lua_assert\n}  = require('./llimits.js');\nconst lobject  = require('./lobject.js');\nconst {\n    OpCodesI: {\n        OP_CALL,\n        OP_CLOSURE,\n        OP_FORLOOP,\n        OP_FORPREP,\n        OP_GETUPVAL,\n        OP_MOVE,\n        OP_NEWTABLE,\n        OP_SETTABLE,\n        OP_TAILCALL,\n        OP_TFORCALL,\n        OP_TFORLOOP,\n        OP_VARARG\n    },\n    LFIELDS_PER_FLUSH,\n    SETARG_B,\n    SETARG_C,\n    SET_OPCODE\n} = require('./lopcodes.js');\nconst {\n    luaS_eqlngstr,\n    luaS_new,\n    luaS_newliteral\n} = require('./lstring.js');\nconst ltable   = require('./ltable.js');\nconst Proto    = lfunc.Proto;\nconst R        = llex.RESERVED;\n\nconst MAXVARS = 200;\n\nconst hasmultret = function(k) {\n    return k === expkind.VCALL || k === expkind.VVARARG;\n};\n\nconst eqstr = function(a, b) {\n    /* TODO: use plain equality as strings are cached */\n    return luaS_eqlngstr(a, b);\n};\n\nclass BlockCnt {\n    constructor() {\n        this.previous = null;  /* chain */\n        this.firstlabel = NaN; /* index of first label in this block */\n        this.firstgoto = NaN;  /* index of first pending goto in this block */\n        this.nactvar = NaN;    /* # active locals outside the block */\n        this.upval = NaN;      /* true if some variable in the block is an upvalue */\n        this.isloop = NaN;     /* true if 'block' is a loop */\n    }\n}\n\nconst expkind = {\n    VVOID: 0,        /* when 'expdesc' describes the last expression a list,\n                        this kind means an empty list (so, no expression) */\n    VNIL: 1,         /* constant nil */\n    VTRUE: 2,        /* constant true */\n    VFALSE: 3,       /* constant false */\n    VK: 4,           /* constant in 'k'; info = index of constant in 'k' */\n    VKFLT: 5,        /* floating constant; nval = numerical float value */\n    VKINT: 6,        /* integer constant; nval = numerical integer value */\n    VNONRELOC: 7,    /* expression has its value in a fixed register;\n                        info = result register */\n    VLOCAL: 8,       /* local variable; info = local register */\n    VUPVAL: 9,       /* upvalue variable; info = index of upvalue in 'upvalues' */\n    VINDEXED: 10,    /* indexed variable;\n                        ind.vt = whether 't' is register or upvalue;\n                        ind.t = table register or upvalue;\n                        ind.idx = key's R/K index */\n    VJMP: 11,        /* expression is a test/comparison;\n                        info = pc of corresponding jump instruction */\n    VRELOCABLE: 12,  /* expression can put result in any register;\n                        info = instruction pc */\n    VCALL: 13,       /* expression is a function call; info = instruction pc */\n    VVARARG: 14      /* vararg expression; info = instruction pc */\n};\n\nconst vkisvar = function(k) {\n    return expkind.VLOCAL <= k && k <= expkind.VINDEXED;\n};\n\nconst vkisinreg = function(k) {\n    return k === expkind.VNONRELOC || k === expkind.VLOCAL;\n};\n\nclass expdesc {\n    constructor() {\n        this.k = NaN;\n        this.u = {\n            ival: NaN,    /* for VKINT */\n            nval: NaN,    /* for VKFLT */\n            info: NaN,    /* for generic use */\n            ind: {        /* for indexed variables (VINDEXED) */\n                idx: NaN, /* index (R/K) */\n                t: NaN,   /* table (register or upvalue) */\n                vt: NaN   /* whether 't' is register (VLOCAL) or upvalue (VUPVAL) */\n            }\n        };\n        this.t = NaN;     /* patch list of 'exit when true' */\n        this.f = NaN;     /* patch list of 'exit when false' */\n    }\n\n    to(e) { // Copy e content to this, cf. luaK_posfix\n        this.k = e.k;\n        this.u = e.u;\n        this.t = e.t;\n        this.f = e.f;\n    }\n}\n\nclass FuncState {\n    constructor() {\n        this.f = null;         /* current function header */\n        this.prev = null;      /* enclosing function */\n        this.ls = null;        /* lexical state */\n        this.bl = null;        /* chain of current blocks */\n        this.pc = NaN;         /* next position to code (equivalent to 'ncode') */\n        this.lasttarget = NaN; /* 'label' of last 'jump label' */\n        this.jpc = NaN;        /* list of pending jumps to 'pc' */\n        this.nk = NaN;         /* number of elements in 'k' */\n        this.np = NaN;         /* number of elements in 'p' */\n        this.firstlocal = NaN; /* index of first local var (in Dyndata array) */\n        this.nlocvars = NaN;   /* number of elements in 'f->locvars' */\n        this.nactvar = NaN;    /* number of active local variables */\n        this.nups = NaN;       /* number of upvalues */\n        this.freereg = NaN;    /* first free register */\n    }\n}\n\n/* description of active local variable */\nclass Vardesc {\n    constructor() {\n        this.idx = NaN;  /* variable index in stack */\n    }\n}\n\n\n/* description of pending goto statements and label statements */\nclass Labeldesc {\n    constructor() {\n        this.name = null;  /* label identifier */\n        this.pc = NaN;  /* position in code */\n        this.line = NaN;  /* line where it appeared */\n        this.nactvar = NaN;  /* local level where it appears in current block */\n    }\n}\n\n\n/* list of labels or gotos */\nclass Labellist {\n    constructor() {\n        this.arr = []; /* array */\n        this.n = NaN;  /* number of entries in use */\n        this.size = NaN;  /* array size */\n    }\n}\n\n/* dynamic structures used by the parser */\nclass Dyndata {\n    constructor() {\n        this.actvar = {  /* list of active local variables */\n            arr: [],\n            n: NaN,\n            size: NaN\n        };\n        this.gt = new Labellist();\n        this.label = new Labellist();\n    }\n}\n\nconst semerror = function(ls, msg) {\n    ls.t.token = 0;  /* remove \"near <token>\" from final message */\n    llex.luaX_syntaxerror(ls, msg);\n};\n\nconst error_expected = function(ls, token) {\n    llex.luaX_syntaxerror(ls, lobject.luaO_pushfstring(ls.L, to_luastring(\"%s expected\", true), llex.luaX_token2str(ls, token)));\n};\n\nconst errorlimit = function(fs, limit, what) {\n    let L = fs.ls.L;\n    let line = fs.f.linedefined;\n    let where = (line === 0)\n        ? to_luastring(\"main function\", true)\n        : lobject.luaO_pushfstring(L, to_luastring(\"function at line %d\", true), line);\n    let msg = lobject.luaO_pushfstring(L, to_luastring(\"too many %s (limit is %d) in %s\", true),\n        what, limit, where);\n    llex.luaX_syntaxerror(fs.ls, msg);\n};\n\nconst checklimit = function(fs, v, l, what) {\n    if (v > l) errorlimit(fs, l, what);\n};\n\nconst testnext = function(ls, c) {\n    if (ls.t.token === c) {\n        llex.luaX_next(ls);\n        return true;\n    }\n\n    return false;\n};\n\nconst check = function(ls, c) {\n    if (ls.t.token !== c)\n        error_expected(ls, c);\n};\n\nconst checknext = function(ls, c) {\n    check(ls, c);\n    llex.luaX_next(ls);\n};\n\nconst check_condition = function(ls, c, msg) {\n    if (!c)\n        llex.luaX_syntaxerror(ls, msg);\n};\n\nconst check_match = function(ls, what, who, where) {\n    if (!testnext(ls, what)) {\n        if (where === ls.linenumber)\n            error_expected(ls, what);\n        else\n            llex.luaX_syntaxerror(ls, lobject.luaO_pushfstring(ls.L,\n                to_luastring(\"%s expected (to close %s at line %d)\"),\n                llex.luaX_token2str(ls, what), llex.luaX_token2str(ls, who), where));\n    }\n};\n\nconst str_checkname = function(ls) {\n    check(ls, R.TK_NAME);\n    let ts = ls.t.seminfo.ts;\n    llex.luaX_next(ls);\n    return ts;\n};\n\nconst init_exp = function(e, k, i) {\n    e.f = e.t = NO_JUMP;\n    e.k = k;\n    e.u.info = i;\n};\n\nconst codestring = function(ls, e, s) {\n    init_exp(e, expkind.VK, luaK_stringK(ls.fs, s));\n};\n\nconst checkname = function(ls, e) {\n    codestring(ls, e, str_checkname(ls));\n};\n\nconst registerlocalvar = function(ls, varname) {\n    let fs = ls.fs;\n    let f = fs.f;\n    f.locvars[fs.nlocvars] = new lobject.LocVar();\n    f.locvars[fs.nlocvars].varname = varname;\n    return fs.nlocvars++;\n};\n\nconst new_localvar = function(ls, name) {\n    let fs = ls.fs;\n    let dyd = ls.dyd;\n    let reg = registerlocalvar(ls, name);\n    checklimit(fs, dyd.actvar.n + 1 - fs.firstlocal, MAXVARS, to_luastring(\"local variables\", true));\n    dyd.actvar.arr[dyd.actvar.n] = new Vardesc();\n    dyd.actvar.arr[dyd.actvar.n].idx = reg;\n    dyd.actvar.n++;\n};\n\nconst new_localvarliteral = function(ls, name) {\n    new_localvar(ls, llex.luaX_newstring(ls, to_luastring(name, true)));\n};\n\nconst getlocvar = function(fs, i) {\n    let idx = fs.ls.dyd.actvar.arr[fs.firstlocal + i].idx;\n    lua_assert(idx < fs.nlocvars);\n    return fs.f.locvars[idx];\n};\n\nconst adjustlocalvars = function(ls, nvars) {\n    let fs = ls.fs;\n    fs.nactvar = fs.nactvar + nvars;\n    for (; nvars; nvars--)\n        getlocvar(fs, fs.nactvar - nvars).startpc = fs.pc;\n};\n\nconst removevars = function(fs, tolevel) {\n    fs.ls.dyd.actvar.n -= fs.nactvar - tolevel;\n    while (fs.nactvar > tolevel)\n        getlocvar(fs, --fs.nactvar).endpc = fs.pc;\n};\n\nconst searchupvalue = function(fs, name) {\n    let up = fs.f.upvalues;\n    for (let i = 0; i < fs.nups; i++) {\n        if (eqstr(up[i].name, name))\n            return i;\n    }\n    return -1;  /* not found */\n};\n\nconst newupvalue = function(fs, name, v) {\n    let f = fs.f;\n    checklimit(fs, fs.nups + 1, lfunc.MAXUPVAL, to_luastring(\"upvalues\", true));\n    f.upvalues[fs.nups] = {\n        instack: v.k === expkind.VLOCAL,\n        idx: v.u.info,\n        name: name\n    };\n    return fs.nups++;\n};\n\nconst searchvar = function(fs, n) {\n    for (let i = fs.nactvar - 1; i >= 0; i--) {\n        if (eqstr(n, getlocvar(fs, i).varname))\n            return i;\n    }\n\n    return -1;\n};\n\n/*\n** Mark block where variable at given level was defined\n** (to emit close instructions later).\n*/\nconst markupval = function(fs, level) {\n    let bl = fs.bl;\n    while (bl.nactvar > level)\n        bl = bl.previous;\n    bl.upval = 1;\n};\n\n/*\n** Find variable with given name 'n'. If it is an upvalue, add this\n** upvalue into all intermediate functions.\n*/\nconst singlevaraux = function(fs, n, vr, base) {\n    if (fs === null)  /* no more levels? */\n        init_exp(vr, expkind.VVOID, 0);  /* default is global */\n    else {\n        let v = searchvar(fs, n);  /* look up locals at current level */\n        if (v >= 0) {  /* found? */\n            init_exp(vr, expkind.VLOCAL, v);  /* variable is local */\n            if (!base)\n                markupval(fs, v);  /* local will be used as an upval */\n        } else {  /* not found as local at current level; try upvalues */\n            let idx = searchupvalue(fs, n);  /* try existing upvalues */\n            if (idx < 0) {  /* not found? */\n                singlevaraux(fs.prev, n, vr, 0);  /* try upper levels */\n                if (vr.k === expkind.VVOID)  /* not found? */\n                    return;  /* it is a global */\n                /* else was LOCAL or UPVAL */\n                idx = newupvalue(fs, n, vr);  /* will be a new upvalue */\n            }\n            init_exp(vr, expkind.VUPVAL, idx);  /* new or old upvalue */\n        }\n    }\n};\n\nconst singlevar = function(ls, vr) {\n    let varname = str_checkname(ls);\n    let fs = ls.fs;\n    singlevaraux(fs, varname, vr, 1);\n    if (vr.k === expkind.VVOID) {  /* is global name? */\n        let key = new expdesc();\n        singlevaraux(fs, ls.envn, vr, 1);  /* get environment variable */\n        lua_assert(vr.k !== expkind.VVOID);  /* this one must exist */\n        codestring(ls, key, varname);  /* key is variable name */\n        luaK_indexed(fs, vr, key);  /* env[varname] */\n    }\n};\n\nconst adjust_assign = function(ls, nvars, nexps, e) {\n    let fs = ls.fs;\n    let extra = nvars - nexps;\n    if (hasmultret(e.k)) {\n        extra++;  /* includes call itself */\n        if (extra < 0) extra = 0;\n        luaK_setreturns(fs, e, extra);  /* last exp. provides the difference */\n        if (extra > 1) luaK_reserveregs(fs, extra - 1);\n    } else {\n        if (e.k !== expkind.VVOID) luaK_exp2nextreg(fs, e);  /* close last expression */\n        if (extra > 0) {\n            let reg = fs.freereg;\n            luaK_reserveregs(fs, extra);\n            luaK_nil(fs, reg, extra);\n        }\n    }\n    if (nexps > nvars)\n        ls.fs.freereg -= nexps - nvars;  /* remove extra values */\n};\n\nconst enterlevel = function(ls) {\n    let L = ls.L;\n    ++L.nCcalls;\n    checklimit(ls.fs, L.nCcalls, LUAI_MAXCCALLS, to_luastring(\"JS levels\", true));\n};\n\nconst leavelevel = function(ls) {\n    return ls.L.nCcalls--;\n};\n\nconst closegoto = function(ls, g, label) {\n    let fs = ls.fs;\n    let gl = ls.dyd.gt;\n    let gt = gl.arr[g];\n    lua_assert(eqstr(gt.name, label.name));\n    if (gt.nactvar < label.nactvar) {\n        let vname = getlocvar(fs, gt.nactvar).varname;\n        let msg = lobject.luaO_pushfstring(ls.L,\n            to_luastring(\"<goto %s> at line %d jumps into the scope of local '%s'\"),\n            gt.name.getstr(), gt.line, vname.getstr());\n        semerror(ls, msg);\n    }\n    luaK_patchlist(fs, gt.pc, label.pc);\n    /* remove goto from pending list */\n    for (let i = g; i < gl.n - 1; i++)\n        gl.arr[i] = gl.arr[i + 1];\n    gl.n--;\n};\n\n/*\n** try to close a goto with existing labels; this solves backward jumps\n*/\nconst findlabel = function(ls, g) {\n    let bl = ls.fs.bl;\n    let dyd = ls.dyd;\n    let gt = dyd.gt.arr[g];\n    /* check labels in current block for a match */\n    for (let i = bl.firstlabel; i < dyd.label.n; i++) {\n        let lb = dyd.label.arr[i];\n        if (eqstr(lb.name, gt.name)) {  /* correct label? */\n            if (gt.nactvar > lb.nactvar && (bl.upval || dyd.label.n > bl.firstlabel))\n                luaK_patchclose(ls.fs, gt.pc, lb.nactvar);\n            closegoto(ls, g, lb);  /* close it */\n            return true;\n        }\n    }\n    return false;  /* label not found; cannot close goto */\n};\n\nconst newlabelentry = function(ls, l, name, line, pc) {\n    let n = l.n;\n    l.arr[n] = new Labeldesc();\n    l.arr[n].name = name;\n    l.arr[n].line = line;\n    l.arr[n].nactvar = ls.fs.nactvar;\n    l.arr[n].pc = pc;\n    l.n = n + 1;\n    return n;\n};\n\n/*\n** check whether new label 'lb' matches any pending gotos in current\n** block; solves forward jumps\n*/\nconst findgotos = function(ls, lb) {\n    let gl = ls.dyd.gt;\n    let i = ls.fs.bl.firstgoto;\n    while (i < gl.n) {\n        if (eqstr(gl.arr[i].name, lb.name))\n            closegoto(ls, i, lb);\n        else\n            i++;\n    }\n};\n\n/*\n** export pending gotos to outer level, to check them against\n** outer labels; if the block being exited has upvalues, and\n** the goto exits the scope of any variable (which can be the\n** upvalue), close those variables being exited.\n*/\nconst movegotosout = function(fs, bl) {\n    let i = bl.firstgoto;\n    let gl = fs.ls.dyd.gt;\n    /* correct pending gotos to current block and try to close it\n       with visible labels */\n    while (i < gl.n) {\n        let gt = gl.arr[i];\n        if (gt.nactvar > bl.nactvar) {\n            if (bl.upval)\n                luaK_patchclose(fs, gt.pc, bl.nactvar);\n            gt.nactvar = bl.nactvar;\n        }\n        if (!findlabel(fs.ls, i))\n            i++;  /* move to next one */\n    }\n};\n\nconst enterblock = function(fs, bl, isloop) {\n    bl.isloop = isloop;\n    bl.nactvar = fs.nactvar;\n    bl.firstlabel = fs.ls.dyd.label.n;\n    bl.firstgoto = fs.ls.dyd.gt.n;\n    bl.upval = 0;\n    bl.previous = fs.bl;\n    fs.bl = bl;\n    lua_assert(fs.freereg === fs.nactvar);\n};\n\n/*\n** create a label named 'break' to resolve break statements\n*/\nconst breaklabel = function(ls) {\n    let n = luaS_newliteral(ls.L, \"break\");\n    let l = newlabelentry(ls, ls.dyd.label, n, 0, ls.fs.pc);\n    findgotos(ls, ls.dyd.label.arr[l]);\n};\n\n/*\n** generates an error for an undefined 'goto'; choose appropriate\n** message when label name is a reserved word (which can only be 'break')\n*/\nconst undefgoto = function(ls, gt) {\n    let msg = llex.isreserved(gt.name)\n        ? \"<%s> at line %d not inside a loop\"\n        : \"no visible label '%s' for <goto> at line %d\";\n    msg = lobject.luaO_pushfstring(ls.L, to_luastring(msg), gt.name.getstr(), gt.line);\n    semerror(ls, msg);\n};\n\n/*\n** adds a new prototype into list of prototypes\n*/\nconst addprototype = function(ls) {\n    let L = ls.L;\n    let clp = new Proto(L);\n    let fs = ls.fs;\n    let f = fs.f;  /* prototype of current function */\n    f.p[fs.np++] = clp;\n    return clp;\n};\n\n/*\n** codes instruction to create new closure in parent function.\n*/\nconst codeclosure = function(ls, v) {\n    let fs = ls.fs.prev;\n    init_exp(v, expkind.VRELOCABLE, luaK_codeABx(fs, OP_CLOSURE, 0, fs.np -1));\n    luaK_exp2nextreg(fs, v);  /* fix it at the last register */\n};\n\nconst open_func = function(ls, fs, bl) {\n    fs.prev = ls.fs;  /* linked list of funcstates */\n    fs.ls = ls;\n    ls.fs = fs;\n    fs.pc = 0;\n    fs.lasttarget = 0;\n    fs.jpc = NO_JUMP;\n    fs.freereg = 0;\n    fs.nk = 0;\n    fs.np = 0;\n    fs.nups = 0;\n    fs.nlocvars = 0;\n    fs.nactvar = 0;\n    fs.firstlocal = ls.dyd.actvar.n;\n    fs.bl = null;\n    let f = fs.f;\n    f.source = ls.source;\n    f.maxstacksize = 2;  /* registers 0/1 are always valid */\n    enterblock(fs, bl, false);\n};\n\nconst leaveblock = function(fs) {\n    let bl = fs.bl;\n    let ls = fs.ls;\n    if (bl.previous && bl.upval) {\n        /* create a 'jump to here' to close upvalues */\n        let j = luaK_jump(fs);\n        luaK_patchclose(fs, j , bl.nactvar);\n        luaK_patchtohere(fs, j);\n    }\n\n    if (bl.isloop)\n        breaklabel(ls);  /* close pending breaks */\n\n    fs.bl = bl.previous;\n    removevars(fs, bl.nactvar);\n    lua_assert(bl.nactvar === fs.nactvar);\n    fs.freereg = fs.nactvar;  /* free registers */\n    ls.dyd.label.n = bl.firstlabel;  /* remove local labels */\n    if (bl.previous)  /* inner block? */\n        movegotosout(fs, bl);  /* update pending gotos to outer block */\n    else if (bl.firstgoto < ls.dyd.gt.n)  /* pending gotos in outer block? */\n        undefgoto(ls, ls.dyd.gt.arr[bl.firstgoto]);  /* error */\n};\n\nconst close_func = function(ls) {\n    let fs = ls.fs;\n    luaK_ret(fs, 0, 0);  /* final return */\n    leaveblock(fs);\n    lua_assert(fs.bl === null);\n    ls.fs = fs.prev;\n};\n\n/*============================================================*/\n/* GRAMMAR RULES */\n/*============================================================*/\n\nconst block_follow = function(ls, withuntil) {\n    switch (ls.t.token) {\n        case R.TK_ELSE: case R.TK_ELSEIF:\n        case R.TK_END: case R.TK_EOS:\n            return true;\n        case R.TK_UNTIL: return withuntil;\n        default: return false;\n    }\n};\n\nconst statlist = function(ls) {\n    /* statlist -> { stat [';'] } */\n    while (!block_follow(ls, 1)) {\n        if (ls.t.token === R.TK_RETURN) {\n            statement(ls);\n            return;  /* 'return' must be last statement */\n        }\n        statement(ls);\n    }\n};\n\nconst fieldsel = function(ls, v) {\n    /* fieldsel -> ['.' | ':'] NAME */\n    let fs = ls.fs;\n    let key = new expdesc();\n    luaK_exp2anyregup(fs, v);\n    llex.luaX_next(ls);  /* skip the dot or colon */\n    checkname(ls, key);\n    luaK_indexed(fs, v, key);\n};\n\nconst yindex = function(ls, v) {\n    /* index -> '[' expr ']' */\n    llex.luaX_next(ls);  /* skip the '[' */\n    expr(ls, v);\n    luaK_exp2val(ls.fs, v);\n    checknext(ls, 93 /* (']').charCodeAt(0) */);\n};\n\n/*\n** {======================================================================\n** Rules for Constructors\n** =======================================================================\n*/\n\nclass ConsControl {\n    constructor() {\n        this.v = new expdesc(); /* last list item read */\n        this.t = new expdesc(); /* table descriptor */\n        this.nh = NaN;          /* total number of 'record' elements */\n        this.na = NaN;          /* total number of array elements */\n        this.tostore = NaN;     /* number of array elements pending to be stored */\n    }\n}\n\nconst recfield = function(ls, cc) {\n    /* recfield -> (NAME | '['exp1']') = exp1 */\n    let fs = ls.fs;\n    let reg = ls.fs.freereg;\n    let key = new expdesc();\n    let val = new expdesc();\n\n    if (ls.t.token === R.TK_NAME) {\n        checklimit(fs, cc.nh, MAX_INT, to_luastring(\"items in a constructor\", true));\n        checkname(ls, key);\n    } else  /* ls->t.token === '[' */\n        yindex(ls, key);\n    cc.nh++;\n    checknext(ls, 61 /* ('=').charCodeAt(0) */);\n    let rkkey = luaK_exp2RK(fs, key);\n    expr(ls, val);\n    luaK_codeABC(fs, OP_SETTABLE, cc.t.u.info, rkkey, luaK_exp2RK(fs, val));\n    fs.freereg = reg;  /* free registers */\n};\n\nconst closelistfield = function(fs, cc) {\n    if (cc.v.k === expkind.VVOID) return;  /* there is no list item */\n    luaK_exp2nextreg(fs, cc.v);\n    cc.v.k = expkind.VVOID;\n    if (cc.tostore === LFIELDS_PER_FLUSH) {\n        luaK_setlist(fs, cc.t.u.info, cc.na, cc.tostore);  /* flush */\n        cc.tostore = 0;  /* no more items pending */\n    }\n};\n\nconst lastlistfield = function(fs, cc) {\n    if (cc.tostore === 0) return;\n    if (hasmultret(cc.v.k)) {\n        luaK_setmultret(fs, cc.v);\n        luaK_setlist(fs, cc.t.u.info, cc.na, LUA_MULTRET);\n        cc.na--;  /* do not count last expression (unknown number of elements) */\n    } else {\n        if (cc.v.k !== expkind.VVOID)\n            luaK_exp2nextreg(fs, cc.v);\n        luaK_setlist(fs, cc.t.u.info, cc.na, cc.tostore);\n    }\n};\n\nconst listfield = function(ls, cc) {\n    /* listfield -> exp */\n    expr(ls, cc.v);\n    checklimit(ls.fs, cc.na, MAX_INT, to_luastring(\"items in a constructor\", true));\n    cc.na++;\n    cc.tostore++;\n};\n\nconst field = function(ls, cc) {\n    /* field -> listfield | recfield */\n    switch (ls.t.token) {\n        case R.TK_NAME: {  /* may be 'listfield' or 'recfield' */\n            if (llex.luaX_lookahead(ls) !== 61 /* ('=').charCodeAt(0) */)  /* expression? */\n                listfield(ls, cc);\n            else\n                recfield(ls, cc);\n            break;\n        }\n        case 91 /* ('[').charCodeAt(0) */: {\n            recfield(ls, cc);\n            break;\n        }\n        default: {\n            listfield(ls, cc);\n            break;\n        }\n    }\n};\n\nconst constructor = function(ls, t) {\n    /* constructor -> '{' [ field { sep field } [sep] ] '}'\n       sep -> ',' | ';' */\n    let fs = ls.fs;\n    let line = ls.linenumber;\n    let pc = luaK_codeABC(fs, OP_NEWTABLE, 0, 0, 0);\n    let cc = new ConsControl();\n    cc.na = cc.nh = cc.tostore = 0;\n    cc.t = t;\n    init_exp(t, expkind.VRELOCABLE, pc);\n    init_exp(cc.v, expkind.VVOID, 0);  /* no value (yet) */\n    luaK_exp2nextreg(ls.fs, t);  /* fix it at stack top */\n    checknext(ls, 123 /* ('{').charCodeAt(0) */);\n    do {\n        lua_assert(cc.v.k === expkind.VVOID || cc.tostore > 0);\n        if (ls.t.token === 125 /* ('}').charCodeAt(0) */) break;\n        closelistfield(fs, cc);\n        field(ls, cc);\n    } while (testnext(ls, 44 /* (',').charCodeAt(0) */) || testnext(ls, 59 /* (';').charCodeAt(0) */));\n    check_match(ls, 125 /* ('}').charCodeAt(0) */, 123 /* ('{').charCodeAt(0) */, line);\n    lastlistfield(fs, cc);\n    SETARG_B(fs.f.code[pc], lobject.luaO_int2fb(cc.na));  /* set initial array size */\n    SETARG_C(fs.f.code[pc], lobject.luaO_int2fb(cc.nh));  /* set initial table size */\n};\n\n/* }====================================================================== */\n\nconst parlist = function(ls) {\n    /* parlist -> [ param { ',' param } ] */\n    let fs = ls.fs;\n    let f = fs.f;\n    let nparams = 0;\n    f.is_vararg = false;\n    if (ls.t.token !== 41 /* (')').charCodeAt(0) */) {  /* is 'parlist' not empty? */\n        do {\n            switch (ls.t.token) {\n                case R.TK_NAME: {  /* param -> NAME */\n                    new_localvar(ls, str_checkname(ls));\n                    nparams++;\n                    break;\n                }\n                case R.TK_DOTS: {  /* param -> '...' */\n                    llex.luaX_next(ls);\n                    f.is_vararg = true;  /* declared vararg */\n                    break;\n                }\n                default: llex.luaX_syntaxerror(ls, to_luastring(\"<name> or '...' expected\", true));\n            }\n        } while(!f.is_vararg && testnext(ls, 44 /* (',').charCodeAt(0) */));\n    }\n    adjustlocalvars(ls, nparams);\n    f.numparams = fs.nactvar;\n    luaK_reserveregs(fs, fs.nactvar);  /* reserve register for parameters */\n};\n\nconst body = function(ls, e, ismethod, line) {\n    /* body ->  '(' parlist ')' block END */\n    let new_fs = new FuncState();\n    let bl = new BlockCnt();\n    new_fs.f = addprototype(ls);\n    new_fs.f.linedefined = line;\n    open_func(ls, new_fs, bl);\n    checknext(ls, 40 /* ('(').charCodeAt(0) */);\n    if (ismethod) {\n        new_localvarliteral(ls, \"self\");  /* create 'self' parameter */\n        adjustlocalvars(ls, 1);\n    }\n    parlist(ls);\n    checknext(ls, 41 /* (')').charCodeAt(0) */);\n    statlist(ls);\n    new_fs.f.lastlinedefined = ls.linenumber;\n    check_match(ls, R.TK_END, R.TK_FUNCTION, line);\n    codeclosure(ls, e);\n    close_func(ls);\n};\n\nconst explist = function(ls, v) {\n    /* explist -> expr { ',' expr } */\n    let n = 1;  /* at least one expression */\n    expr(ls, v);\n    while (testnext(ls, 44 /* (',').charCodeAt(0) */)) {\n        luaK_exp2nextreg(ls.fs, v);\n        expr(ls, v);\n        n++;\n    }\n    return n;\n};\n\nconst funcargs = function(ls, f, line) {\n    let fs = ls.fs;\n    let args = new expdesc();\n    switch (ls.t.token) {\n        case 40 /* ('(').charCodeAt(0) */: {  /* funcargs -> '(' [ explist ] ')' */\n            llex.luaX_next(ls);\n            if (ls.t.token === 41 /* (')').charCodeAt(0) */)  /* arg list is empty? */\n                args.k = expkind.VVOID;\n            else {\n                explist(ls, args);\n                luaK_setmultret(fs, args);\n            }\n            check_match(ls, 41 /* (')').charCodeAt(0) */, 40 /* ('(').charCodeAt(0) */, line);\n            break;\n        }\n        case 123 /* ('{').charCodeAt(0) */: {  /* funcargs -> constructor */\n            constructor(ls, args);\n            break;\n        }\n        case R.TK_STRING: {  /* funcargs -> STRING */\n            codestring(ls, args, ls.t.seminfo.ts);\n            llex.luaX_next(ls);  /* must use 'seminfo' before 'next' */\n            break;\n        }\n        default: {\n            llex.luaX_syntaxerror(ls, to_luastring(\"function arguments expected\", true));\n        }\n    }\n    lua_assert(f.k === expkind.VNONRELOC);\n    let nparams;\n    let base = f.u.info;  /* base register for call */\n    if (hasmultret(args.k))\n        nparams = LUA_MULTRET;  /* open call */\n    else {\n        if (args.k !== expkind.VVOID)\n            luaK_exp2nextreg(fs, args);  /* close last argument */\n        nparams = fs.freereg - (base+1);\n    }\n    init_exp(f, expkind.VCALL, luaK_codeABC(fs, OP_CALL, base, nparams+1, 2));\n    luaK_fixline(fs, line);\n    fs.freereg = base + 1; /* call remove function and arguments and leaves (unless changed) one result */\n};\n\n/*\n** {======================================================================\n** Expression parsing\n** =======================================================================\n*/\n\nconst primaryexp = function(ls, v) {\n    /* primaryexp -> NAME | '(' expr ')' */\n    switch (ls.t.token) {\n        case 40 /* ('(').charCodeAt(0) */: {\n            let line = ls.linenumber;\n            llex.luaX_next(ls);\n            expr(ls, v);\n            check_match(ls, 41 /* (')').charCodeAt(0) */, 40 /* ('(').charCodeAt(0) */, line);\n            luaK_dischargevars(ls.fs, v);\n            return;\n        }\n        case R.TK_NAME: {\n            singlevar(ls, v);\n            return;\n        }\n        default: {\n            llex.luaX_syntaxerror(ls, to_luastring(\"unexpected symbol\", true));\n        }\n    }\n};\n\nconst suffixedexp = function(ls, v) {\n    /* suffixedexp ->\n       primaryexp { '.' NAME | '[' exp ']' | ':' NAME funcargs | funcargs } */\n    let fs = ls.fs;\n    let line = ls.linenumber;\n    primaryexp(ls, v);\n    for (;;) {\n        switch (ls.t.token) {\n            case 46 /* ('.').charCodeAt(0) */: {  /* fieldsel */\n                fieldsel(ls, v);\n                break;\n            }\n            case 91 /* ('[').charCodeAt(0) */: {  /* '[' exp1 ']' */\n                let key = new expdesc();\n                luaK_exp2anyregup(fs, v);\n                yindex(ls, key);\n                luaK_indexed(fs, v, key);\n                break;\n            }\n            case 58 /* (':').charCodeAt(0) */: {  /* ':' NAME funcargs */\n                let key = new expdesc();\n                llex.luaX_next(ls);\n                checkname(ls, key);\n                luaK_self(fs, v, key);\n                funcargs(ls, v, line);\n                break;\n            }\n            case 40 /* ('(').charCodeAt(0) */: case R.TK_STRING: case 123 /* ('{').charCodeAt(0) */: {  /* funcargs */\n                luaK_exp2nextreg(fs, v);\n                funcargs(ls, v, line);\n                break;\n            }\n            default: return;\n        }\n    }\n};\n\nconst simpleexp = function(ls, v) {\n    /* simpleexp -> FLT | INT | STRING | NIL | TRUE | FALSE | ... |\n       constructor | FUNCTION body | suffixedexp */\n    switch (ls.t.token) {\n        case R.TK_FLT: {\n            init_exp(v, expkind.VKFLT, 0);\n            v.u.nval = ls.t.seminfo.r;\n            break;\n        }\n        case R.TK_INT: {\n            init_exp(v, expkind.VKINT, 0);\n            v.u.ival = ls.t.seminfo.i;\n            break;\n        }\n        case R.TK_STRING: {\n            codestring(ls, v, ls.t.seminfo.ts);\n            break;\n        }\n        case R.TK_NIL: {\n            init_exp(v, expkind.VNIL, 0);\n            break;\n        }\n        case R.TK_TRUE: {\n            init_exp(v, expkind.VTRUE, 0);\n            break;\n        }\n        case R.TK_FALSE: {\n            init_exp(v, expkind.VFALSE, 0);\n            break;\n        }\n        case R.TK_DOTS: {  /* vararg */\n            let fs = ls.fs;\n            check_condition(ls, fs.f.is_vararg, to_luastring(\"cannot use '...' outside a vararg function\", true));\n            init_exp(v, expkind.VVARARG, luaK_codeABC(fs, OP_VARARG, 0, 1, 0));\n            break;\n        }\n        case 123 /* ('{').charCodeAt(0) */: {  /* constructor */\n            constructor(ls, v);\n            return;\n        }\n        case R.TK_FUNCTION: {\n            llex.luaX_next(ls);\n            body(ls, v, 0, ls.linenumber);\n            return;\n        }\n        default: {\n            suffixedexp(ls, v);\n            return;\n        }\n    }\n    llex.luaX_next(ls);\n};\n\nconst getunopr = function(op) {\n    switch (op) {\n        case R.TK_NOT: return OPR_NOT;\n        case 45 /* ('-').charCodeAt(0) */: return OPR_MINUS;\n        case 126 /* ('~').charCodeAt(0) */: return OPR_BNOT;\n        case 35 /* ('#').charCodeAt(0) */: return OPR_LEN;\n        default: return OPR_NOUNOPR;\n    }\n};\n\nconst getbinopr = function(op) {\n    switch (op) {\n        case 43 /* ('+').charCodeAt(0) */: return OPR_ADD;\n        case 45 /* ('-').charCodeAt(0) */: return OPR_SUB;\n        case 42 /* ('*').charCodeAt(0) */: return OPR_MUL;\n        case 37 /* ('%').charCodeAt(0) */: return OPR_MOD;\n        case 94 /* ('^').charCodeAt(0) */: return OPR_POW;\n        case 47 /* ('/').charCodeAt(0) */: return OPR_DIV;\n        case R.TK_IDIV:   return OPR_IDIV;\n        case 38 /* ('&').charCodeAt(0) */: return OPR_BAND;\n        case 124 /* ('|').charCodeAt(0) */: return OPR_BOR;\n        case 126 /* ('~').charCodeAt(0) */: return OPR_BXOR;\n        case R.TK_SHL:    return OPR_SHL;\n        case R.TK_SHR:    return OPR_SHR;\n        case R.TK_CONCAT: return OPR_CONCAT;\n        case R.TK_NE:     return OPR_NE;\n        case R.TK_EQ:     return OPR_EQ;\n        case 60 /* ('<').charCodeAt(0) */: return OPR_LT;\n        case R.TK_LE:     return OPR_LE;\n        case 62 /* ('>').charCodeAt(0) */: return OPR_GT;\n        case R.TK_GE:     return OPR_GE;\n        case R.TK_AND:    return OPR_AND;\n        case R.TK_OR:     return OPR_OR;\n        default:          return OPR_NOBINOPR;\n    }\n};\n\nconst priority = [  /* ORDER OPR */\n    {left: 10, right: 10}, {left: 10, right: 10},     /* '+' '-' */\n    {left: 11, right: 11}, {left: 11, right: 11},     /* '*' '%' */\n    {left: 14, right: 13},               /* '^' (right associative) */\n    {left: 11, right: 11}, {left: 11, right: 11},     /* '/' '//' */\n    {left: 6, right: 6}, {left: 4, right: 4}, {left: 5, right: 5}, /* '&' '|' '~' */\n    {left: 7, right: 7}, {left: 7, right: 7},         /* '<<' '>>' */\n    {left: 9, right: 8},                 /* '..' (right associative) */\n    {left: 3, right: 3}, {left: 3, right: 3}, {left: 3, right: 3}, /* ==, <, <= */\n    {left: 3, right: 3}, {left: 3, right: 3}, {left: 3, right: 3}, /* ~=, >, >= */\n    {left: 2, right: 2}, {left: 1, right: 1}          /* and, or */\n];\n\nconst UNARY_PRIORITY = 12;\n\n/*\n** subexpr -> (simpleexp | unop subexpr) { binop subexpr }\n** where 'binop' is any binary operator with a priority higher than 'limit'\n*/\nconst subexpr = function(ls, v, limit) {\n    enterlevel(ls);\n    let uop = getunopr(ls.t.token);\n    if (uop !== OPR_NOUNOPR) {\n        let line = ls.linenumber;\n        llex.luaX_next(ls);\n        subexpr(ls, v, UNARY_PRIORITY);\n        luaK_prefix(ls.fs, uop, v, line);\n    } else\n        simpleexp(ls, v);\n    /* expand while operators have priorities higher than 'limit' */\n    let op = getbinopr(ls.t.token);\n    while (op !== OPR_NOBINOPR && priority[op].left > limit) {\n        let v2 = new expdesc();\n        let line = ls.linenumber;\n        llex.luaX_next(ls);\n        luaK_infix(ls.fs, op, v);\n        /* read sub-expression with higher priority */\n        let nextop = subexpr(ls, v2, priority[op].right);\n        luaK_posfix(ls.fs, op, v, v2, line);\n        op = nextop;\n    }\n    leavelevel(ls);\n    return op;  /* return first untreated operator */\n};\n\nconst expr = function(ls, v) {\n    subexpr(ls, v, 0);\n};\n\n/* }==================================================================== */\n\n\n\n/*\n** {======================================================================\n** Rules for Statements\n** =======================================================================\n*/\n\nconst block = function(ls) {\n    /* block -> statlist */\n    let fs = ls.fs;\n    let bl = new BlockCnt();\n    enterblock(fs, bl, 0);\n    statlist(ls);\n    leaveblock(fs);\n};\n\n/*\n** structure to chain all variables in the left-hand side of an\n** assignment\n*/\nclass LHS_assign {\n    constructor() {\n        this.prev = null;\n        this.v = new expdesc();  /* variable (global, local, upvalue, or indexed) */\n    }\n}\n\n/*\n** check whether, in an assignment to an upvalue/local variable, the\n** upvalue/local variable is begin used in a previous assignment to a\n** table. If so, save original upvalue/local value in a safe place and\n** use this safe copy in the previous assignment.\n*/\nconst check_conflict = function(ls, lh, v) {\n    let fs = ls.fs;\n    let extra = fs.freereg;  /* eventual position to save local variable */\n    let conflict = false;\n    for (; lh; lh = lh.prev) {  /* check all previous assignments */\n        if (lh.v.k === expkind.VINDEXED) {  /* assigning to a table? */\n            /* table is the upvalue/local being assigned now? */\n            if (lh.v.u.ind.vt === v.k && lh.v.u.ind.t === v.u.info) {\n                conflict = true;\n                lh.v.u.ind.vt = expkind.VLOCAL;\n                lh.v.u.ind.t = extra;  /* previous assignment will use safe copy */\n            }\n            /* index is the local being assigned? (index cannot be upvalue) */\n            if (v.k === expkind.VLOCAL && lh.v.u.ind.idx === v.u.info) {\n                conflict = true;\n                lh.v.u.ind.idx = extra;  /* previous assignment will use safe copy */\n            }\n        }\n    }\n    if (conflict) {\n        /* copy upvalue/local value to a temporary (in position 'extra') */\n        let op = v.k === expkind.VLOCAL ? OP_MOVE : OP_GETUPVAL;\n        luaK_codeABC(fs, op, extra, v.u.info, 0);\n        luaK_reserveregs(fs, 1);\n    }\n};\n\nconst assignment = function(ls, lh, nvars) {\n    let e = new expdesc();\n    check_condition(ls, vkisvar(lh.v.k), to_luastring(\"syntax error\", true));\n    if (testnext(ls, 44 /* (',').charCodeAt(0) */)) {  /* assignment -> ',' suffixedexp assignment */\n        let nv = new LHS_assign();\n        nv.prev = lh;\n        suffixedexp(ls, nv.v);\n        if (nv.v.k !== expkind.VINDEXED)\n            check_conflict(ls, lh, nv.v);\n        checklimit(ls.fs, nvars + ls.L.nCcalls, LUAI_MAXCCALLS, to_luastring(\"JS levels\", true));\n        assignment(ls, nv, nvars + 1);\n    } else {  /* assignment -> '=' explist */\n        checknext(ls, 61 /* ('=').charCodeAt(0) */);\n        let nexps = explist(ls, e);\n        if (nexps !== nvars)\n            adjust_assign(ls, nvars, nexps, e);\n        else {\n            luaK_setoneret(ls.fs, e);  /* close last expression */\n            luaK_storevar(ls.fs, lh.v, e);\n            return;  /* avoid default */\n        }\n    }\n    init_exp(e, expkind.VNONRELOC, ls.fs.freereg-1);  /* default assignment */\n    luaK_storevar(ls.fs, lh.v, e);\n};\n\nconst cond = function(ls) {\n    /* cond -> exp */\n    let v = new expdesc();\n    expr(ls, v);  /* read condition */\n    if (v.k === expkind.VNIL) v.k = expkind.VFALSE;  /* 'falses' are all equal here */\n    luaK_goiftrue(ls.fs, v);\n    return v.f;\n};\n\nconst gotostat = function(ls, pc) {\n    let line = ls.linenumber;\n    let label;\n    if (testnext(ls, R.TK_GOTO))\n        label = str_checkname(ls);\n    else {\n        llex.luaX_next(ls);  /* skip break */\n        label = luaS_newliteral(ls.L, \"break\");\n    }\n    let g = newlabelentry(ls, ls.dyd.gt, label, line, pc);\n    findlabel(ls, g);  /* close it if label already defined */\n};\n\n/* check for repeated labels on the same block */\nconst checkrepeated = function(fs, ll, label) {\n    for (let i = fs.bl.firstlabel; i < ll.n; i++) {\n        if (eqstr(label, ll.arr[i].name)) {\n            let msg = lobject.luaO_pushfstring(fs.ls.L,\n                to_luastring(\"label '%s' already defined on line %d\", true),\n                label.getstr(), ll.arr[i].line);\n            semerror(fs.ls, msg);\n        }\n    }\n};\n\n/* skip no-op statements */\nconst skipnoopstat = function(ls) {\n    while (ls.t.token === 59 /* (';').charCodeAt(0) */ || ls.t.token === R.TK_DBCOLON)\n        statement(ls);\n};\n\nconst labelstat = function(ls, label, line) {\n    /* label -> '::' NAME '::' */\n    let fs = ls.fs;\n    let ll = ls.dyd.label;\n    let l;  /* index of new label being created */\n    checkrepeated(fs, ll, label);  /* check for repeated labels */\n    checknext(ls, R.TK_DBCOLON);  /* skip double colon */\n    /* create new entry for this label */\n    l = newlabelentry(ls, ll, label, line, luaK_getlabel(fs));\n    skipnoopstat(ls);  /* skip other no-op statements */\n    if (block_follow(ls, 0)) {  /* label is last no-op statement in the block? */\n        /* assume that locals are already out of scope */\n        ll.arr[l].nactvar = fs.bl.nactvar;\n    }\n    findgotos(ls, ll.arr[l]);\n};\n\nconst whilestat = function(ls, line) {\n    /* whilestat -> WHILE cond DO block END */\n    let fs = ls.fs;\n    let bl = new BlockCnt();\n    llex.luaX_next(ls);  /* skip WHILE */\n    let whileinit = luaK_getlabel(fs);\n    let condexit = cond(ls);\n    enterblock(fs, bl, 1);\n    checknext(ls, R.TK_DO);\n    block(ls);\n    luaK_jumpto(fs, whileinit);\n    check_match(ls, R.TK_END, R.TK_WHILE, line);\n    leaveblock(fs);\n    luaK_patchtohere(fs, condexit);  /* false conditions finish the loop */\n};\n\nconst repeatstat = function(ls, line) {\n    /* repeatstat -> REPEAT block UNTIL cond */\n    let fs = ls.fs;\n    let repeat_init = luaK_getlabel(fs);\n    let bl1 = new BlockCnt();\n    let bl2 = new BlockCnt();\n    enterblock(fs, bl1, 1);  /* loop block */\n    enterblock(fs, bl2, 0);  /* scope block */\n    llex.luaX_next(ls);  /* skip REPEAT */\n    statlist(ls);\n    check_match(ls, R.TK_UNTIL, R.TK_REPEAT, line);\n    let condexit = cond(ls);  /* read condition (inside scope block) */\n    if (bl2.upval)  /* upvalues? */\n        luaK_patchclose(fs, condexit, bl2.nactvar);\n    leaveblock(fs);  /* finish scope */\n    luaK_patchlist(fs, condexit, repeat_init);  /* close the loop */\n    leaveblock(fs);  /* finish loop */\n};\n\nconst exp1 = function(ls) {\n    let e = new expdesc();\n    expr(ls, e);\n    luaK_exp2nextreg(ls.fs, e);\n    lua_assert(e.k === expkind.VNONRELOC);\n    let reg = e.u.info;\n    return reg;\n};\n\nconst forbody = function(ls, base, line, nvars, isnum) {\n    /* forbody -> DO block */\n    let bl = new BlockCnt();\n    let fs = ls.fs;\n    let endfor;\n    adjustlocalvars(ls, 3);  /* control variables */\n    checknext(ls, R.TK_DO);\n    let prep = isnum ? luaK_codeAsBx(fs, OP_FORPREP, base, NO_JUMP) : luaK_jump(fs);\n    enterblock(fs, bl, 0);  /* scope for declared variables */\n    adjustlocalvars(ls, nvars);\n    luaK_reserveregs(fs, nvars);\n    block(ls);\n    leaveblock(fs);  /* end of scope for declared variables */\n    luaK_patchtohere(fs, prep);\n    if (isnum)  /* end of scope for declared variables */\n        endfor = luaK_codeAsBx(fs, OP_FORLOOP, base, NO_JUMP);\n    else {  /* generic for */\n        luaK_codeABC(fs, OP_TFORCALL, base, 0, nvars);\n        luaK_fixline(fs, line);\n        endfor = luaK_codeAsBx(fs, OP_TFORLOOP, base + 2, NO_JUMP);\n    }\n    luaK_patchlist(fs, endfor, prep + 1);\n    luaK_fixline(fs, line);\n};\n\nconst fornum = function(ls, varname, line) {\n    /* fornum -> NAME = exp1,exp1[,exp1] forbody */\n    let fs = ls.fs;\n    let base = fs.freereg;\n    new_localvarliteral(ls, \"(for index)\");\n    new_localvarliteral(ls, \"(for limit)\");\n    new_localvarliteral(ls, \"(for step)\");\n    new_localvar(ls, varname);\n    checknext(ls, 61 /* ('=').charCodeAt(0) */);\n    exp1(ls);  /* initial value */\n    checknext(ls, 44 /* (',').charCodeAt(0) */);\n    exp1(ls);  /* limit */\n    if (testnext(ls, 44 /* (',').charCodeAt(0) */))\n        exp1(ls);  /* optional step */\n    else {  /* default step = 1 */\n        luaK_codek(fs, fs.freereg, luaK_intK(fs, 1));\n        luaK_reserveregs(fs, 1);\n    }\n    forbody(ls, base, line, 1, 1);\n};\n\nconst forlist = function(ls, indexname) {\n    /* forlist -> NAME {,NAME} IN explist forbody */\n    let fs = ls.fs;\n    let e = new expdesc();\n    let nvars = 4;  /* gen, state, control, plus at least one declared var */\n    let base = fs.freereg;\n    /* create control variables */\n    new_localvarliteral(ls, \"(for generator)\");\n    new_localvarliteral(ls, \"(for state)\");\n    new_localvarliteral(ls, \"(for control)\");\n    /* create declared variables */\n    new_localvar(ls, indexname);\n    while (testnext(ls, 44 /* (',').charCodeAt(0) */)) {\n        new_localvar(ls, str_checkname(ls));\n        nvars++;\n    }\n    checknext(ls, R.TK_IN);\n    let line = ls.linenumber;\n    adjust_assign(ls, 3, explist(ls, e), e);\n    luaK_checkstack(fs, 3);  /* extra space to call generator */\n    forbody(ls, base, line, nvars - 3, 0);\n};\n\nconst forstat = function(ls, line) {\n    /* forstat -> FOR (fornum | forlist) END */\n    let fs = ls.fs;\n    let bl = new BlockCnt();\n    enterblock(fs, bl, 1);  /* scope for loop and control variables */\n    llex.luaX_next(ls);  /* skip 'for' */\n    let varname = str_checkname(ls);  /* first variable name */\n    switch (ls.t.token) {\n        case 61 /* ('=').charCodeAt(0) */: fornum(ls, varname, line); break;\n        case 44 /* (',').charCodeAt(0) */: case R.TK_IN: forlist(ls, varname); break;\n        default: llex.luaX_syntaxerror(ls, to_luastring(\"'=' or 'in' expected\", true));\n    }\n    check_match(ls, R.TK_END, R.TK_FOR, line);\n    leaveblock(fs);  /* loop scope ('break' jumps to this point) */\n};\n\nconst test_then_block = function(ls, escapelist) {\n    /* test_then_block -> [IF | ELSEIF] cond THEN block */\n    let bl = new BlockCnt();\n    let fs = ls.fs;\n    let v = new expdesc();\n    let jf;  /* instruction to skip 'then' code (if condition is false) */\n\n    llex.luaX_next(ls);  /* skip IF or ELSEIF */\n    expr(ls, v);  /* read condition */\n    checknext(ls, R.TK_THEN);\n\n    if (ls.t.token === R.TK_GOTO || ls.t.token === R.TK_BREAK) {\n        luaK_goiffalse(ls.fs, v);  /* will jump to label if condition is true */\n        enterblock(fs, bl, false);  /* must enter block before 'goto' */\n        gotostat(ls, v.t);   /* handle goto/break */\n        while (testnext(ls, 59 /* (';').charCodeAt(0) */));  /* skip colons */\n        if (block_follow(ls, 0)) {  /* 'goto' is the entire block? */\n            leaveblock(fs);\n            return escapelist;  /* and that is it */\n        } else  /* must skip over 'then' part if condition is false */\n            jf = luaK_jump(fs);\n    } else {  /* regular case (not goto/break) */\n        luaK_goiftrue(ls.fs, v);  /* skip over block if condition is false */\n        enterblock(fs, bl, false);\n        jf = v.f;\n    }\n\n    statlist(ls);  /* 'then' part */\n    leaveblock(fs);\n    if (ls.t.token === R.TK_ELSE || ls.t.token === R.TK_ELSEIF)  /* followed by 'else'/'elseif'? */\n        escapelist = luaK_concat(fs, escapelist, luaK_jump(fs));  /* must jump over it */\n    luaK_patchtohere(fs, jf);\n\n    return escapelist;\n};\n\nconst ifstat = function(ls, line) {\n    /* ifstat -> IF cond THEN block {ELSEIF cond THEN block} [ELSE block] END */\n    let fs = ls.fs;\n    let escapelist = NO_JUMP;  /* exit list for finished parts */\n    escapelist = test_then_block(ls, escapelist);  /* IF cond THEN block */\n    while (ls.t.token === R.TK_ELSEIF)\n        escapelist = test_then_block(ls, escapelist);  /* ELSEIF cond THEN block */\n    if (testnext(ls, R.TK_ELSE))\n        block(ls);  /* 'else' part */\n    check_match(ls, R.TK_END, R.TK_IF, line);\n    luaK_patchtohere(fs, escapelist);  /* patch escape list to 'if' end */\n};\n\nconst localfunc = function(ls) {\n    let b = new expdesc();\n    let fs = ls.fs;\n    new_localvar(ls, str_checkname(ls));  /* new local variable */\n    adjustlocalvars(ls, 1);  /* enter its scope */\n    body(ls, b, 0, ls.linenumber);  /* function created in next register */\n    /* debug information will only see the variable after this point! */\n    getlocvar(fs, b.u.info).startpc = fs.pc;\n};\n\nconst localstat = function(ls) {\n    /* stat -> LOCAL NAME {',' NAME} ['=' explist] */\n    let nvars = 0;\n    let nexps;\n    let e = new expdesc();\n    do {\n        new_localvar(ls, str_checkname(ls));\n        nvars++;\n    } while (testnext(ls, 44 /* (',').charCodeAt(0) */));\n    if (testnext(ls, 61 /* ('=').charCodeAt(0) */))\n        nexps = explist(ls, e);\n    else {\n        e.k = expkind.VVOID;\n        nexps = 0;\n    }\n    adjust_assign(ls, nvars, nexps, e);\n    adjustlocalvars(ls, nvars);\n};\n\nconst funcname = function(ls, v) {\n    /* funcname -> NAME {fieldsel} [':' NAME] */\n    let ismethod = 0;\n    singlevar(ls, v);\n    while (ls.t.token === 46 /* ('.').charCodeAt(0) */)\n        fieldsel(ls, v);\n    if (ls.t.token === 58 /* (':').charCodeAt(0) */) {\n        ismethod = 1;\n        fieldsel(ls, v);\n    }\n    return ismethod;\n};\n\nconst funcstat = function(ls, line) {\n    /* funcstat -> FUNCTION funcname body */\n    let v = new expdesc();\n    let b = new expdesc();\n    llex.luaX_next(ls);  /* skip FUNCTION */\n    let ismethod = funcname(ls, v);\n    body(ls, b, ismethod, line);\n    luaK_storevar(ls.fs, v, b);\n    luaK_fixline(ls.fs, line);  /* definition \"happens\" in the first line */\n};\n\nconst exprstat= function(ls) {\n    /* stat -> func | assignment */\n    let fs = ls.fs;\n    let v = new LHS_assign();\n    suffixedexp(ls, v.v);\n    if (ls.t.token === 61 /* ('=').charCodeAt(0) */ || ls.t.token === 44 /* (',').charCodeAt(0) */) { /* stat . assignment ? */\n        v.prev = null;\n        assignment(ls, v, 1);\n    }\n    else {  /* stat -> func */\n        check_condition(ls, v.v.k === expkind.VCALL, to_luastring(\"syntax error\", true));\n        SETARG_C(getinstruction(fs, v.v), 1);  /* call statement uses no results */\n    }\n};\n\nconst retstat = function(ls) {\n    /* stat -> RETURN [explist] [';'] */\n    let fs = ls.fs;\n    let e = new expdesc();\n    let first, nret;  /* registers with returned values */\n    if (block_follow(ls, 1) || ls.t.token === 59 /* (';').charCodeAt(0) */)\n        first = nret = 0;  /* return no values */\n    else {\n        nret = explist(ls, e);  /* optional return values */\n        if (hasmultret(e.k)) {\n            luaK_setmultret(fs, e);\n            if (e.k === expkind.VCALL && nret === 1) {  /* tail call? */\n                SET_OPCODE(getinstruction(fs, e), OP_TAILCALL);\n                lua_assert(getinstruction(fs, e).A === fs.nactvar);\n            }\n            first = fs.nactvar;\n            nret = LUA_MULTRET;  /* return all values */\n        } else {\n            if (nret === 1)  /* only one single value? */\n                first = luaK_exp2anyreg(fs, e);\n            else {\n                luaK_exp2nextreg(fs, e);  /* values must go to the stack */\n                first = fs.nactvar;  /* return all active values */\n                lua_assert(nret === fs.freereg - first);\n            }\n        }\n    }\n    luaK_ret(fs, first, nret);\n    testnext(ls, 59 /* (';').charCodeAt(0) */);  /* skip optional semicolon */\n};\n\nconst statement = function(ls) {\n    let line = ls.linenumber;  /* may be needed for error messages */\n    enterlevel(ls);\n    switch(ls.t.token) {\n        case 59 /* (';').charCodeAt(0) */: {  /* stat -> ';' (empty statement) */\n            llex.luaX_next(ls);  /* skip ';' */\n            break;\n        }\n        case R.TK_IF: {  /* stat -> ifstat */\n            ifstat(ls, line);\n            break;\n        }\n        case R.TK_WHILE: {  /* stat -> whilestat */\n            whilestat(ls, line);\n            break;\n        }\n        case R.TK_DO: {  /* stat -> DO block END */\n            llex.luaX_next(ls);  /* skip DO */\n            block(ls);\n            check_match(ls, R.TK_END, R.TK_DO, line);\n            break;\n        }\n        case R.TK_FOR: {  /* stat -> forstat */\n            forstat(ls, line);\n            break;\n        }\n        case R.TK_REPEAT: {  /* stat -> repeatstat */\n            repeatstat(ls, line);\n            break;\n        }\n        case R.TK_FUNCTION: {  /* stat -> funcstat */\n            funcstat(ls, line);\n            break;\n        }\n        case R.TK_LOCAL: {  /* stat -> localstat */\n            llex.luaX_next(ls);  /* skip LOCAL */\n            if (testnext(ls, R.TK_FUNCTION))  /* local function? */\n                localfunc(ls);\n            else\n                localstat(ls);\n            break;\n        }\n        case R.TK_DBCOLON: {  /* stat -> label */\n            llex.luaX_next(ls);  /* skip double colon */\n            labelstat(ls, str_checkname(ls), line);\n            break;\n        }\n        case R.TK_RETURN: {  /* skip double colon */\n            llex.luaX_next(ls);  /* skip RETURN */\n            retstat(ls);\n            break;\n        }\n        case R.TK_BREAK:   /* stat -> breakstat */\n        case R.TK_GOTO: {  /* stat -> 'goto' NAME */\n            gotostat(ls, luaK_jump(ls.fs));\n            break;\n        }\n        default: {  /* stat -> func | assignment */\n            exprstat(ls);\n            break;\n        }\n    }\n    lua_assert(ls.fs.f.maxstacksize >= ls.fs.freereg && ls.fs.freereg >= ls.fs.nactvar);\n    ls.fs.freereg = ls.fs.nactvar;  /* free registers */\n    leavelevel(ls);\n};\n\n/*\n** compiles the main function, which is a regular vararg function with an\n** upvalue named LUA_ENV\n*/\nconst mainfunc = function(ls, fs) {\n    let bl = new BlockCnt();\n    let v = new expdesc();\n    open_func(ls, fs, bl);\n    fs.f.is_vararg = true;  /* main function is always declared vararg */\n    init_exp(v, expkind.VLOCAL, 0);  /* create and... */\n    newupvalue(fs, ls.envn, v);  /* ...set environment upvalue */\n    llex.luaX_next(ls);  /* read first token */\n    statlist(ls);  /* parse main body */\n    check(ls, R.TK_EOS);\n    close_func(ls);\n};\n\nconst luaY_parser = function(L, z, buff, dyd, name, firstchar) {\n    let lexstate = new llex.LexState();\n    let funcstate = new FuncState();\n    let cl = lfunc.luaF_newLclosure(L, 1);  /* create main closure */\n    ldo.luaD_inctop(L);\n    L.stack[L.top-1].setclLvalue(cl);\n    lexstate.h = ltable.luaH_new(L);  /* create table for scanner */\n    ldo.luaD_inctop(L);\n    L.stack[L.top-1].sethvalue(lexstate.h);\n    funcstate.f = cl.p = new Proto(L);\n    funcstate.f.source = luaS_new(L, name);\n    lexstate.buff = buff;\n    lexstate.dyd = dyd;\n    dyd.actvar.n = dyd.gt.n = dyd.label.n = 0;\n    llex.luaX_setinput(L, lexstate, z, funcstate.f.source, firstchar);\n    mainfunc(lexstate, funcstate);\n    lua_assert(!funcstate.prev && funcstate.nups === 1 && !lexstate.fs);\n    /* all scopes should be correctly finished */\n    lua_assert(dyd.actvar.n === 0 && dyd.gt.n === 0 && dyd.label.n === 0);\n    delete L.stack[--L.top];  /* remove scanner's table */\n    return cl;  /* closure is on the stack, too */\n};\n\n\nmodule.exports.Dyndata     = Dyndata;\nmodule.exports.expkind     = expkind;\nmodule.exports.expdesc     = expdesc;\nmodule.exports.luaY_parser = luaY_parser;\nmodule.exports.vkisinreg   = vkisinreg;\n","\"use strict\";\n\nconst {\n    LUA_MINSTACK,\n    LUA_RIDX_GLOBALS,\n    LUA_RIDX_MAINTHREAD,\n    constant_types: {\n        LUA_NUMTAGS,\n        LUA_TNIL,\n        LUA_TTABLE,\n        LUA_TTHREAD\n    },\n    thread_status: {\n        LUA_OK\n    }\n} = require('./defs.js');\nconst lobject              = require('./lobject.js');\nconst ldo                  = require('./ldo.js');\nconst lapi                 = require('./lapi.js');\nconst ltable               = require('./ltable.js');\nconst ltm                  = require('./ltm.js');\n\nconst EXTRA_STACK = 5;\n\nconst BASIC_STACK_SIZE = 2 * LUA_MINSTACK;\n\nclass CallInfo {\n\n    constructor() {\n        this.func = null;\n        this.funcOff = NaN;\n        this.top = NaN;\n        this.previous = null;\n        this.next = null;\n\n        /* only for Lua functions */\n        this.l_base = NaN; /* base for this function */\n        this.l_code = null; /* reference to this.func.p.code */\n        this.l_savedpc = NaN; /* offset into l_code */\n        /* only for JS functions */\n        this.c_k = null;  /* continuation in case of yields */\n        this.c_old_errfunc = null;\n        this.c_ctx = null;  /* context info. in case of yields */\n\n        this.nresults = NaN;\n        this.callstatus = NaN;\n    }\n\n}\n\nclass lua_State {\n\n    constructor(g) {\n        this.id = g.id_counter++;\n\n        this.base_ci = new CallInfo(); /* CallInfo for first level (C calling Lua) */\n        this.top = NaN; /* first free slot in the stack */\n        this.stack_last = NaN; /* last free slot in the stack */\n        this.oldpc = NaN; /* last pc traced */\n\n        /* preinit_thread */\n        this.l_G = g;\n        this.stack = null;\n        this.ci = null;\n        this.errorJmp = null;\n        this.nCcalls = 0;\n        this.hook = null;\n        this.hookmask = 0;\n        this.basehookcount = 0;\n        this.allowhook = 1;\n        this.hookcount = this.basehookcount;\n        this.nny = 1;\n        this.status = LUA_OK;\n        this.errfunc = 0;\n    }\n\n}\n\nclass global_State {\n\n    constructor() {\n        this.id_counter = 1; /* used to give objects unique ids */\n        this.ids = new WeakMap();\n\n        this.mainthread = null;\n        this.l_registry = new lobject.TValue(LUA_TNIL, null);\n        this.panic = null;\n        this.atnativeerror = null;\n        this.version = null;\n        this.tmname = new Array(ltm.TMS.TM_N);\n        this.mt = new Array(LUA_NUMTAGS);\n    }\n\n}\n\nconst luaE_extendCI = function(L) {\n    let ci = new CallInfo();\n    L.ci.next = ci;\n    ci.previous = L.ci;\n    ci.next = null;\n    L.ci = ci;\n    return ci;\n};\n\nconst luaE_freeCI = function(L) {\n    let ci = L.ci;\n    ci.next = null;\n};\n\nconst stack_init = function(L1, L) {\n    L1.stack = new Array(BASIC_STACK_SIZE);\n    L1.top = 0;\n    L1.stack_last = BASIC_STACK_SIZE - EXTRA_STACK;\n    /* initialize first ci */\n    let ci = L1.base_ci;\n    ci.next = ci.previous = null;\n    ci.callstatus = 0;\n    ci.funcOff = L1.top;\n    ci.func = L1.stack[L1.top];\n    L1.stack[L1.top++] = new lobject.TValue(LUA_TNIL, null);\n    ci.top = L1.top + LUA_MINSTACK;\n    L1.ci = ci;\n};\n\nconst freestack = function(L) {\n    L.ci = L.base_ci;\n    luaE_freeCI(L);\n    L.stack = null;\n};\n\n/*\n** Create registry table and its predefined values\n*/\nconst init_registry = function(L, g) {\n    let registry = ltable.luaH_new(L);\n    g.l_registry.sethvalue(registry);\n    ltable.luaH_setint(registry, LUA_RIDX_MAINTHREAD, new lobject.TValue(LUA_TTHREAD, L));\n    ltable.luaH_setint(registry, LUA_RIDX_GLOBALS, new lobject.TValue(LUA_TTABLE, ltable.luaH_new(L)));\n};\n\n/*\n** open parts of the state that may cause memory-allocation errors.\n** ('g->version' !== NULL flags that the state was completely build)\n*/\nconst f_luaopen = function(L) {\n    let g = L.l_G;\n    stack_init(L, L);\n    init_registry(L, g);\n    ltm.luaT_init(L);\n    g.version = lapi.lua_version(null);\n};\n\nconst lua_newthread = function(L) {\n    let g = L.l_G;\n    let L1 = new lua_State(g);\n    L.stack[L.top] = new lobject.TValue(LUA_TTHREAD, L1);\n    lapi.api_incr_top(L);\n    L1.hookmask = L.hookmask;\n    L1.basehookcount = L.basehookcount;\n    L1.hook = L.hook;\n    L1.hookcount = L1.basehookcount;\n    stack_init(L1, L);\n    return L1;\n};\n\nconst luaE_freethread = function(L, L1) {\n    freestack(L1);\n};\n\nconst lua_newstate = function() {\n    let g = new global_State();\n    let L = new lua_State(g);\n    g.mainthread = L;\n\n    if (ldo.luaD_rawrunprotected(L, f_luaopen, null) !== LUA_OK) {\n        L = null;\n    }\n\n    return L;\n};\n\nconst close_state = function(L) {\n    freestack(L);\n};\n\nconst lua_close = function(L) {\n    L = L.l_G.mainthread;  /* only the main thread can be closed */\n    close_state(L);\n};\n\nmodule.exports.lua_State       = lua_State;\nmodule.exports.CallInfo        = CallInfo;\nmodule.exports.CIST_OAH        = (1<<0);  /* original value of 'allowhook' */\nmodule.exports.CIST_LUA        = (1<<1);  /* call is running a Lua function */\nmodule.exports.CIST_HOOKED     = (1<<2);  /* call is running a debug hook */\nmodule.exports.CIST_FRESH      = (1<<3);  /* call is running on a fresh invocation of luaV_execute */\nmodule.exports.CIST_YPCALL     = (1<<4);  /* call is a yieldable protected call */\nmodule.exports.CIST_TAIL       = (1<<5);  /* call was tail called */\nmodule.exports.CIST_HOOKYIELD  = (1<<6);  /* last hook called yielded */\nmodule.exports.CIST_LEQ        = (1<<7);  /* using __lt for __le */\nmodule.exports.CIST_FIN        = (1<<8);   /* call is running a finalizer */\nmodule.exports.EXTRA_STACK     = EXTRA_STACK;\nmodule.exports.lua_close       = lua_close;\nmodule.exports.lua_newstate    = lua_newstate;\nmodule.exports.lua_newthread   = lua_newthread;\nmodule.exports.luaE_extendCI   = luaE_extendCI;\nmodule.exports.luaE_freeCI     = luaE_freeCI;\nmodule.exports.luaE_freethread = luaE_freethread;\n","\"use strict\";\n\nconst {\n    is_luastring,\n    luastring_eq,\n    luastring_from,\n    to_luastring\n} = require('./defs.js');\nconst { lua_assert } = require(\"./llimits.js\");\n\nclass TString {\n\n    constructor(L, str) {\n        this.hash = null;\n        this.realstring = str;\n    }\n\n    getstr() {\n        return this.realstring;\n    }\n\n    tsslen() {\n        return this.realstring.length;\n    }\n\n}\n\nconst luaS_eqlngstr = function(a, b) {\n    lua_assert(a instanceof TString);\n    lua_assert(b instanceof TString);\n    return a == b || luastring_eq(a.realstring, b.realstring);\n};\n\n/* converts strings (arrays) to a consistent map key\n   make sure this doesn't conflict with any of the anti-collision strategies in ltable */\nconst luaS_hash = function(str) {\n    lua_assert(is_luastring(str));\n    let len = str.length;\n    let s = \"|\";\n    for (let i=0; i<len; i++)\n        s += str[i].toString(16);\n    return s;\n};\n\nconst luaS_hashlongstr = function(ts) {\n    lua_assert(ts instanceof TString);\n    if(ts.hash === null) {\n        ts.hash = luaS_hash(ts.getstr());\n    }\n    return ts.hash;\n};\n\n/* variant that takes ownership of array */\nconst luaS_bless = function(L, str) {\n    lua_assert(str instanceof Uint8Array);\n    return new TString(L, str);\n};\n\n/* makes a copy */\nconst luaS_new = function(L, str) {\n    return luaS_bless(L, luastring_from(str));\n};\n\n/* takes a js string */\nconst luaS_newliteral = function(L, str) {\n    return luaS_bless(L, to_luastring(str));\n};\n\nmodule.exports.luaS_eqlngstr    = luaS_eqlngstr;\nmodule.exports.luaS_hash        = luaS_hash;\nmodule.exports.luaS_hashlongstr = luaS_hashlongstr;\nmodule.exports.luaS_bless       = luaS_bless;\nmodule.exports.luaS_new         = luaS_new;\nmodule.exports.luaS_newliteral  = luaS_newliteral;\nmodule.exports.TString          = TString;\n","\"use strict\";\n\nconst {\n    constant_types: {\n        LUA_TBOOLEAN,\n        LUA_TCCL,\n        LUA_TLCF,\n        LUA_TLCL,\n        LUA_TLIGHTUSERDATA,\n        LUA_TLNGSTR,\n        LUA_TNIL,\n        LUA_TNUMFLT,\n        LUA_TNUMINT,\n        LUA_TSHRSTR,\n        LUA_TTABLE,\n        LUA_TTHREAD,\n        LUA_TUSERDATA\n    },\n    to_luastring\n} = require('./defs.js');\nconst { lua_assert } = require('./llimits.js');\nconst ldebug  = require('./ldebug.js');\nconst lobject = require('./lobject.js');\nconst {\n    luaS_hashlongstr,\n    TString\n} = require('./lstring.js');\nconst lstate  = require('./lstate.js');\n\n/* used to prevent conflicts with lightuserdata keys */\nlet lightuserdata_hashes = new WeakMap();\nconst get_lightuserdata_hash = function(v) {\n    let hash = lightuserdata_hashes.get(v);\n    if (!hash) {\n        /* Hash should be something unique that is a valid WeakMap key\n           so that it ends up in dead_weak when removed from a table */\n        hash = {};\n        lightuserdata_hashes.set(v, hash);\n    }\n    return hash;\n};\n\nconst table_hash = function(L, key) {\n    switch(key.type) {\n        case LUA_TNIL:\n            return ldebug.luaG_runerror(L, to_luastring(\"table index is nil\", true));\n        case LUA_TNUMFLT:\n            if (isNaN(key.value))\n                return ldebug.luaG_runerror(L, to_luastring(\"table index is NaN\", true));\n            /* fall through */\n        case LUA_TNUMINT: /* takes advantage of floats and integers being same in JS */\n        case LUA_TBOOLEAN:\n        case LUA_TTABLE:\n        case LUA_TLCL:\n        case LUA_TLCF:\n        case LUA_TCCL:\n        case LUA_TUSERDATA:\n        case LUA_TTHREAD:\n            return key.value;\n        case LUA_TSHRSTR:\n        case LUA_TLNGSTR:\n            return luaS_hashlongstr(key.tsvalue());\n        case LUA_TLIGHTUSERDATA: {\n            let v = key.value;\n            switch(typeof v) {\n                case \"string\":\n                    /* possible conflict with LUA_TSTRING.\n                       prefix this string with \"*\" so they don't clash */\n                    return \"*\" + v;\n                case \"number\":\n                    /* possible conflict with LUA_TNUMBER.\n                       turn into string and prefix with \"#\" to avoid clash with other strings */\n                    return \"#\" + v;\n                case \"boolean\":\n                    /* possible conflict with LUA_TBOOLEAN. use strings ?true and ?false instead */\n                    return v?\"?true\":\"?false\";\n                case \"function\":\n                    /* possible conflict with LUA_TLCF.\n                       indirect via a weakmap */\n                    return get_lightuserdata_hash(v);\n                case \"object\":\n                    /* v could be a lua_State, CClosure, LClosure, Table or Userdata from this state as returned by lua_topointer */\n                    if ((v instanceof lstate.lua_State && v.l_G === L.l_G) ||\n                        v instanceof Table ||\n                        v instanceof lobject.Udata ||\n                        v instanceof lobject.LClosure ||\n                        v instanceof lobject.CClosure) {\n                        /* indirect via a weakmap */\n                        return get_lightuserdata_hash(v);\n                    }\n                    /* fall through */\n                default:\n                    return v;\n            }\n        }\n        default:\n            throw new Error(\"unknown key type: \" + key.type);\n    }\n};\n\nclass Table {\n    constructor(L) {\n        this.id = L.l_G.id_counter++;\n        this.strong = new Map();\n        this.dead_strong = new Map();\n        this.dead_weak = void 0; /* initialised when needed */\n        this.f = void 0; /* first entry */\n        this.l = void 0; /* last entry */\n        this.metatable = null;\n        this.flags = ~0;\n    }\n}\n\nconst invalidateTMcache = function(t) {\n    t.flags = 0;\n};\n\nconst add = function(t, hash, key, value) {\n    t.dead_strong.clear();\n    t.dead_weak = void 0;\n    let prev = null;\n    let entry = {\n        key: key,\n        value: value,\n        p: prev = t.l,\n        n: void 0\n    };\n    if (!t.f) t.f = entry;\n    if (prev) prev.n = entry;\n    t.strong.set(hash, entry);\n    t.l = entry;\n};\n\nconst is_valid_weakmap_key = function(k) {\n    return typeof k === 'object' ? k !== null : typeof k === 'function';\n};\n\n/* Move out of 'strong' part and into 'dead' part. */\nconst mark_dead = function(t, hash) {\n    let e = t.strong.get(hash);\n    if (e) {\n        e.key.setdeadvalue();\n        e.value = void 0;\n        let next = e.n;\n        let prev = e.p;\n        e.p = void 0; /* no need to know previous item any more */\n        if(prev) prev.n = next;\n        if(next) next.p = prev;\n        if(t.f === e) t.f = next;\n        if(t.l === e) t.l = prev;\n        t.strong.delete(hash);\n        if (is_valid_weakmap_key(hash)) {\n            if (!t.dead_weak) t.dead_weak = new WeakMap();\n            t.dead_weak.set(hash, e);\n        } else {\n            /* can't be used as key in weakmap */\n            t.dead_strong.set(hash, e);\n        }\n    }\n};\n\nconst luaH_new = function(L) {\n    return new Table(L);\n};\n\nconst getgeneric = function(t, hash) {\n    let v = t.strong.get(hash);\n    return v ? v.value : lobject.luaO_nilobject;\n};\n\nconst luaH_getint = function(t, key) {\n    lua_assert(typeof key == \"number\" && (key|0) === key);\n    return getgeneric(t, key);\n};\n\nconst luaH_getstr = function(t, key) {\n    lua_assert(key instanceof TString);\n    return getgeneric(t, luaS_hashlongstr(key));\n};\n\nconst luaH_get = function(L, t, key) {\n    lua_assert(key instanceof lobject.TValue);\n    if (key.ttisnil() || (key.ttisfloat() && isNaN(key.value)))\n        return lobject.luaO_nilobject;\n    return getgeneric(t, table_hash(L, key));\n};\n\nconst luaH_setint = function(t, key, value) {\n    lua_assert(typeof key == \"number\" && (key|0) === key && value instanceof lobject.TValue);\n    let hash = key; /* table_hash known result */\n    if (value.ttisnil()) {\n        mark_dead(t, hash);\n        return;\n    }\n    let e = t.strong.get(hash);\n    if (e) {\n        let tv = e.value;\n        tv.setfrom(value);\n    } else {\n        let k = new lobject.TValue(LUA_TNUMINT, key);\n        let v = new lobject.TValue(value.type, value.value);\n        add(t, hash, k, v);\n    }\n};\n\nconst luaH_setfrom = function(L, t, key, value) {\n    lua_assert(key instanceof lobject.TValue);\n    let hash = table_hash(L, key);\n    if (value.ttisnil()) { /* delete */\n        mark_dead(t, hash);\n        return;\n    }\n\n    let e = t.strong.get(hash);\n    if (e) {\n        e.value.setfrom(value);\n    } else {\n        let k;\n        let kv = key.value;\n        if ((key.ttisfloat() && (kv|0) === kv)) { /* does index fit in an integer? */\n            /* insert it as an integer */\n            k = new lobject.TValue(LUA_TNUMINT, kv);\n        } else {\n            k = new lobject.TValue(key.type, kv);\n        }\n        let v = new lobject.TValue(value.type, value.value);\n        add(t, hash, k, v);\n    }\n};\n\n/*\n** Try to find a boundary in table 't'. A 'boundary' is an integer index\n** such that t[i] is non-nil and t[i+1] is nil (and 0 if t[1] is nil).\n*/\nconst luaH_getn = function(t) {\n    let i = 0;\n    let j = t.strong.size + 1; /* use known size of Map to bound search */\n    /* now do a binary search between them */\n    while (j - i > 1) {\n        let m = Math.floor((i+j)/2);\n        if (luaH_getint(t, m).ttisnil()) j = m;\n        else i = m;\n    }\n    return i;\n};\n\nconst luaH_next = function(L, table, keyI) {\n    let keyO = L.stack[keyI];\n\n    let entry;\n    if (keyO.type === LUA_TNIL) {\n        entry = table.f;\n        if (!entry)\n            return false;\n    } else {\n        /* First find current key */\n        let hash = table_hash(L, keyO);\n        /* Look in main part of table */\n        entry = table.strong.get(hash);\n        if (entry) {\n            entry = entry.n;\n            if (!entry)\n                return false;\n        } else {\n            /* Try dead keys */\n            entry = (table.dead_weak && table.dead_weak.get(hash)) || table.dead_strong.get(hash);\n            if (!entry)\n                /* item not in table */\n                return ldebug.luaG_runerror(L, to_luastring(\"invalid key to 'next'\"));\n            /* Iterate until either out of keys, or until finding a non-dead key */\n            do {\n                entry = entry.n;\n                if (!entry)\n                    return false;\n            } while (entry.key.ttisdeadkey());\n        }\n    }\n    lobject.setobj2s(L, keyI, entry.key);\n    lobject.setobj2s(L, keyI+1, entry.value);\n    return true;\n};\n\nmodule.exports.invalidateTMcache = invalidateTMcache;\nmodule.exports.luaH_get     = luaH_get;\nmodule.exports.luaH_getint  = luaH_getint;\nmodule.exports.luaH_getn    = luaH_getn;\nmodule.exports.luaH_getstr  = luaH_getstr;\nmodule.exports.luaH_setfrom = luaH_setfrom;\nmodule.exports.luaH_setint  = luaH_setint;\nmodule.exports.luaH_new     = luaH_new;\nmodule.exports.luaH_next    = luaH_next;\nmodule.exports.Table        = Table;\n","\"use strict\";\n\nconst {\n    constant_types: {\n        LUA_TTABLE,\n        LUA_TUSERDATA\n    },\n    to_luastring\n} = require('./defs.js');\nconst { lua_assert } = require('./llimits.js');\nconst lobject = require('./lobject.js');\nconst ldo     = require('./ldo.js');\nconst lstate  = require('./lstate.js');\nconst {\n    luaS_bless,\n    luaS_new\n} = require('./lstring.js');\nconst ltable  = require('./ltable.js');\nconst ldebug  = require('./ldebug.js');\nconst lvm     = require('./lvm.js');\n\nconst luaT_typenames_ = [\n    \"no value\",\n    \"nil\",\n    \"boolean\",\n    \"userdata\",\n    \"number\",\n    \"string\",\n    \"table\",\n    \"function\",\n    \"userdata\",\n    \"thread\",\n    \"proto\" /* this last case is used for tests only */\n].map(e => to_luastring(e));\n\nconst ttypename = function(t) {\n    return luaT_typenames_[t + 1];\n};\n\n\n/*\n* WARNING: if you change the order of this enumeration,\n* grep \"ORDER TM\" and \"ORDER OP\"\n*/\nconst TMS = {\n    TM_INDEX:    0,\n    TM_NEWINDEX: 1,\n    TM_GC:       2,\n    TM_MODE:     3,\n    TM_LEN:      4,\n    TM_EQ:       5,  /* last tag method with fast access */\n    TM_ADD:      6,\n    TM_SUB:      7,\n    TM_MUL:      8,\n    TM_MOD:      9,\n    TM_POW:     10,\n    TM_DIV:     11,\n    TM_IDIV:    12,\n    TM_BAND:    13 ,\n    TM_BOR:     14,\n    TM_BXOR:    15,\n    TM_SHL:     16,\n    TM_SHR:     17,\n    TM_UNM:     18,\n    TM_BNOT:    19,\n    TM_LT:      20,\n    TM_LE:      21,\n    TM_CONCAT:  22,\n    TM_CALL:    23,\n    TM_N:       24  /* number of elements in the enum */\n};\n\nconst luaT_init = function(L) {\n    L.l_G.tmname[TMS.TM_INDEX]    = new luaS_new(L, to_luastring(\"__index\", true));\n    L.l_G.tmname[TMS.TM_NEWINDEX] = new luaS_new(L, to_luastring(\"__newindex\", true));\n    L.l_G.tmname[TMS.TM_GC]       = new luaS_new(L, to_luastring(\"__gc\", true));\n    L.l_G.tmname[TMS.TM_MODE]     = new luaS_new(L, to_luastring(\"__mode\", true));\n    L.l_G.tmname[TMS.TM_LEN]      = new luaS_new(L, to_luastring(\"__len\", true));\n    L.l_G.tmname[TMS.TM_EQ]       = new luaS_new(L, to_luastring(\"__eq\", true));\n    L.l_G.tmname[TMS.TM_ADD]      = new luaS_new(L, to_luastring(\"__add\", true));\n    L.l_G.tmname[TMS.TM_SUB]      = new luaS_new(L, to_luastring(\"__sub\", true));\n    L.l_G.tmname[TMS.TM_MUL]      = new luaS_new(L, to_luastring(\"__mul\", true));\n    L.l_G.tmname[TMS.TM_MOD]      = new luaS_new(L, to_luastring(\"__mod\", true));\n    L.l_G.tmname[TMS.TM_POW]      = new luaS_new(L, to_luastring(\"__pow\", true));\n    L.l_G.tmname[TMS.TM_DIV]      = new luaS_new(L, to_luastring(\"__div\", true));\n    L.l_G.tmname[TMS.TM_IDIV]     = new luaS_new(L, to_luastring(\"__idiv\", true));\n    L.l_G.tmname[TMS.TM_BAND]     = new luaS_new(L, to_luastring(\"__band\", true));\n    L.l_G.tmname[TMS.TM_BOR]      = new luaS_new(L, to_luastring(\"__bor\", true));\n    L.l_G.tmname[TMS.TM_BXOR]     = new luaS_new(L, to_luastring(\"__bxor\", true));\n    L.l_G.tmname[TMS.TM_SHL]      = new luaS_new(L, to_luastring(\"__shl\", true));\n    L.l_G.tmname[TMS.TM_SHR]      = new luaS_new(L, to_luastring(\"__shr\", true));\n    L.l_G.tmname[TMS.TM_UNM]      = new luaS_new(L, to_luastring(\"__unm\", true));\n    L.l_G.tmname[TMS.TM_BNOT]     = new luaS_new(L, to_luastring(\"__bnot\", true));\n    L.l_G.tmname[TMS.TM_LT]       = new luaS_new(L, to_luastring(\"__lt\", true));\n    L.l_G.tmname[TMS.TM_LE]       = new luaS_new(L, to_luastring(\"__le\", true));\n    L.l_G.tmname[TMS.TM_CONCAT]   = new luaS_new(L, to_luastring(\"__concat\", true));\n    L.l_G.tmname[TMS.TM_CALL]     = new luaS_new(L, to_luastring(\"__call\", true));\n};\n\n/*\n** Return the name of the type of an object. For tables and userdata\n** with metatable, use their '__name' metafield, if present.\n*/\nconst __name = to_luastring('__name', true);\nconst luaT_objtypename = function(L, o) {\n    let mt;\n    if ((o.ttistable() && (mt = o.value.metatable) !== null) ||\n        (o.ttisfulluserdata() && (mt = o.value.metatable) !== null)) {\n        let name = ltable.luaH_getstr(mt, luaS_bless(L, __name));\n        if (name.ttisstring())\n            return name.svalue();\n    }\n    return ttypename(o.ttnov());\n};\n\nconst luaT_callTM = function(L, f, p1, p2, p3, hasres) {\n    let func = L.top;\n\n    lobject.pushobj2s(L, f); /* push function (assume EXTRA_STACK) */\n    lobject.pushobj2s(L, p1); /* 1st argument */\n    lobject.pushobj2s(L, p2); /* 2nd argument */\n\n    if (!hasres)  /* no result? 'p3' is third argument */\n        lobject.pushobj2s(L, p3); /* 3rd argument */\n\n    if (L.ci.callstatus & lstate.CIST_LUA)\n        ldo.luaD_call(L, func, hasres);\n    else\n        ldo.luaD_callnoyield(L, func, hasres);\n\n    if (hasres) {  /* if has result, move it to its place */\n        let tv = L.stack[L.top-1];\n        delete L.stack[--L.top];\n        p3.setfrom(tv);\n    }\n};\n\nconst luaT_callbinTM = function(L, p1, p2, res, event) {\n    let tm = luaT_gettmbyobj(L, p1, event);\n    if (tm.ttisnil())\n        tm = luaT_gettmbyobj(L, p2, event);\n    if (tm.ttisnil()) return false;\n    luaT_callTM(L, tm, p1, p2, res, 1);\n    return true;\n};\n\nconst luaT_trybinTM = function(L, p1, p2, res, event) {\n    if (!luaT_callbinTM(L, p1, p2, res, event)) {\n        switch (event) {\n            case TMS.TM_CONCAT:\n                return ldebug.luaG_concaterror(L, p1, p2);\n            case TMS.TM_BAND: case TMS.TM_BOR: case TMS.TM_BXOR:\n            case TMS.TM_SHL: case TMS.TM_SHR: case TMS.TM_BNOT: {\n                let n1 = lvm.tonumber(p1);\n                let n2 = lvm.tonumber(p2);\n                if (n1 !== false && n2 !== false)\n                    return ldebug.luaG_tointerror(L, p1, p2);\n                else\n                    return ldebug.luaG_opinterror(L, p1, p2, to_luastring(\"perform bitwise operation on\", true));\n            }\n            default:\n                return ldebug.luaG_opinterror(L, p1, p2, to_luastring(\"perform arithmetic on\", true));\n        }\n    }\n};\n\nconst luaT_callorderTM = function(L, p1, p2, event) {\n    let res = new lobject.TValue();\n    if (!luaT_callbinTM(L, p1, p2, res, event))\n        return null;\n    else\n        return !res.l_isfalse();\n};\n\nconst fasttm = function(l, et, e) {\n    return et === null ? null :\n        (et.flags & (1 << e)) ? null : luaT_gettm(et, e, l.l_G.tmname[e]);\n};\n\nconst luaT_gettm = function(events, event, ename) {\n    const tm = ltable.luaH_getstr(events, ename);\n    lua_assert(event <= TMS.TM_EQ);\n    if (tm.ttisnil()) {  /* no tag method? */\n        events.flags |= 1<<event;  /* cache this fact */\n        return null;\n    }\n    else return tm;\n};\n\nconst luaT_gettmbyobj = function(L, o, event) {\n    let mt;\n    switch(o.ttnov()) {\n        case LUA_TTABLE:\n        case LUA_TUSERDATA:\n            mt = o.value.metatable;\n            break;\n        default:\n            mt = L.l_G.mt[o.ttnov()];\n    }\n\n    return mt ? ltable.luaH_getstr(mt, L.l_G.tmname[event]) : lobject.luaO_nilobject;\n};\n\nmodule.exports.fasttm           = fasttm;\nmodule.exports.TMS              = TMS;\nmodule.exports.luaT_callTM      = luaT_callTM;\nmodule.exports.luaT_callbinTM   = luaT_callbinTM;\nmodule.exports.luaT_trybinTM    = luaT_trybinTM;\nmodule.exports.luaT_callorderTM = luaT_callorderTM;\nmodule.exports.luaT_gettm       = luaT_gettm;\nmodule.exports.luaT_gettmbyobj  = luaT_gettmbyobj;\nmodule.exports.luaT_init        = luaT_init;\nmodule.exports.luaT_objtypename = luaT_objtypename;\nmodule.exports.ttypename        = ttypename;\n","\"use strict\";\n\nconst defs   = require(\"./defs.js\");\nconst lapi   = require(\"./lapi.js\");\nconst ldebug = require(\"./ldebug.js\");\nconst ldo    = require(\"./ldo.js\");\nconst lstate = require(\"./lstate.js\");\n\nmodule.exports.LUA_AUTHORS             = defs.LUA_AUTHORS;\nmodule.exports.LUA_COPYRIGHT           = defs.LUA_COPYRIGHT;\nmodule.exports.LUA_ERRERR              = defs.thread_status.LUA_ERRERR;\nmodule.exports.LUA_ERRGCMM             = defs.thread_status.LUA_ERRGCMM;\nmodule.exports.LUA_ERRMEM              = defs.thread_status.LUA_ERRMEM;\nmodule.exports.LUA_ERRRUN              = defs.thread_status.LUA_ERRRUN;\nmodule.exports.LUA_ERRSYNTAX           = defs.thread_status.LUA_ERRSYNTAX;\nmodule.exports.LUA_HOOKCALL            = defs.LUA_HOOKCALL;\nmodule.exports.LUA_HOOKCOUNT           = defs.LUA_HOOKCOUNT;\nmodule.exports.LUA_HOOKLINE            = defs.LUA_HOOKLINE;\nmodule.exports.LUA_HOOKRET             = defs.LUA_HOOKRET;\nmodule.exports.LUA_HOOKTAILCALL        = defs.LUA_HOOKTAILCALL;\nmodule.exports.LUA_MASKCALL            = defs.LUA_MASKCALL;\nmodule.exports.LUA_MASKCOUNT           = defs.LUA_MASKCOUNT;\nmodule.exports.LUA_MASKLINE            = defs.LUA_MASKLINE;\nmodule.exports.LUA_MASKRET             = defs.LUA_MASKRET;\nmodule.exports.LUA_MINSTACK            = defs.LUA_MINSTACK;\nmodule.exports.LUA_MULTRET             = defs.LUA_MULTRET;\nmodule.exports.LUA_NUMTAGS             = defs.constant_types.LUA_NUMTAGS;\nmodule.exports.LUA_OK                  = defs.thread_status.LUA_OK;\nmodule.exports.LUA_OPADD               = defs.LUA_OPADD;\nmodule.exports.LUA_OPBAND              = defs.LUA_OPBAND;\nmodule.exports.LUA_OPBNOT              = defs.LUA_OPBNOT;\nmodule.exports.LUA_OPBOR               = defs.LUA_OPBOR;\nmodule.exports.LUA_OPBXOR              = defs.LUA_OPBXOR;\nmodule.exports.LUA_OPDIV               = defs.LUA_OPDIV;\nmodule.exports.LUA_OPEQ                = defs.LUA_OPEQ;\nmodule.exports.LUA_OPIDIV              = defs.LUA_OPIDIV;\nmodule.exports.LUA_OPLE                = defs.LUA_OPLE;\nmodule.exports.LUA_OPLT                = defs.LUA_OPLT;\nmodule.exports.LUA_OPMOD               = defs.LUA_OPMOD;\nmodule.exports.LUA_OPMUL               = defs.LUA_OPMUL;\nmodule.exports.LUA_OPPOW               = defs.LUA_OPPOW;\nmodule.exports.LUA_OPSHL               = defs.LUA_OPSHL;\nmodule.exports.LUA_OPSHR               = defs.LUA_OPSHR;\nmodule.exports.LUA_OPSUB               = defs.LUA_OPSUB;\nmodule.exports.LUA_OPUNM               = defs.LUA_OPUNM;\nmodule.exports.LUA_REGISTRYINDEX       = defs.LUA_REGISTRYINDEX;\nmodule.exports.LUA_RELEASE             = defs.LUA_RELEASE;\nmodule.exports.LUA_RIDX_GLOBALS        = defs.LUA_RIDX_GLOBALS;\nmodule.exports.LUA_RIDX_LAST           = defs.LUA_RIDX_LAST;\nmodule.exports.LUA_RIDX_MAINTHREAD     = defs.LUA_RIDX_MAINTHREAD;\nmodule.exports.LUA_SIGNATURE           = defs.LUA_SIGNATURE;\nmodule.exports.LUA_TNONE               = defs.constant_types.LUA_TNONE;\nmodule.exports.LUA_TNIL                = defs.constant_types.LUA_TNIL;\nmodule.exports.LUA_TBOOLEAN            = defs.constant_types.LUA_TBOOLEAN;\nmodule.exports.LUA_TLIGHTUSERDATA      = defs.constant_types.LUA_TLIGHTUSERDATA;\nmodule.exports.LUA_TNUMBER             = defs.constant_types.LUA_TNUMBER;\nmodule.exports.LUA_TSTRING             = defs.constant_types.LUA_TSTRING;\nmodule.exports.LUA_TTABLE              = defs.constant_types.LUA_TTABLE;\nmodule.exports.LUA_TFUNCTION           = defs.constant_types.LUA_TFUNCTION;\nmodule.exports.LUA_TUSERDATA           = defs.constant_types.LUA_TUSERDATA;\nmodule.exports.LUA_TTHREAD             = defs.constant_types.LUA_TTHREAD;\nmodule.exports.LUA_VERSION             = defs.LUA_VERSION;\nmodule.exports.LUA_VERSION_MAJOR       = defs.LUA_VERSION_MAJOR;\nmodule.exports.LUA_VERSION_MINOR       = defs.LUA_VERSION_MINOR;\nmodule.exports.LUA_VERSION_NUM         = defs.LUA_VERSION_NUM;\nmodule.exports.LUA_VERSION_RELEASE     = defs.LUA_VERSION_RELEASE;\nmodule.exports.LUA_YIELD               = defs.thread_status.LUA_YIELD;\nmodule.exports.lua_Debug               = defs.lua_Debug;\nmodule.exports.lua_upvalueindex        = defs.lua_upvalueindex;\nmodule.exports.lua_absindex            = lapi.lua_absindex;\nmodule.exports.lua_arith               = lapi.lua_arith;\nmodule.exports.lua_atpanic             = lapi.lua_atpanic;\nmodule.exports.lua_atnativeerror       = lapi.lua_atnativeerror;\nmodule.exports.lua_call                = lapi.lua_call;\nmodule.exports.lua_callk               = lapi.lua_callk;\nmodule.exports.lua_checkstack          = lapi.lua_checkstack;\nmodule.exports.lua_close               = lstate.lua_close;\nmodule.exports.lua_compare             = lapi.lua_compare;\nmodule.exports.lua_concat              = lapi.lua_concat;\nmodule.exports.lua_copy                = lapi.lua_copy;\nmodule.exports.lua_createtable         = lapi.lua_createtable;\nmodule.exports.lua_dump                = lapi.lua_dump;\nmodule.exports.lua_error               = lapi.lua_error;\nmodule.exports.lua_gc                  = lapi.lua_gc;\nmodule.exports.lua_getallocf           = lapi.lua_getallocf;\nmodule.exports.lua_getextraspace       = lapi.lua_getextraspace;\nmodule.exports.lua_getfield            = lapi.lua_getfield;\nmodule.exports.lua_getglobal           = lapi.lua_getglobal;\nmodule.exports.lua_gethook             = ldebug.lua_gethook;\nmodule.exports.lua_gethookcount        = ldebug.lua_gethookcount;\nmodule.exports.lua_gethookmask         = ldebug.lua_gethookmask;\nmodule.exports.lua_geti                = lapi.lua_geti;\nmodule.exports.lua_getinfo             = ldebug.lua_getinfo;\nmodule.exports.lua_getlocal            = ldebug.lua_getlocal;\nmodule.exports.lua_getmetatable        = lapi.lua_getmetatable;\nmodule.exports.lua_getstack            = ldebug.lua_getstack;\nmodule.exports.lua_gettable            = lapi.lua_gettable;\nmodule.exports.lua_gettop              = lapi.lua_gettop;\nmodule.exports.lua_getupvalue          = lapi.lua_getupvalue;\nmodule.exports.lua_getuservalue        = lapi.lua_getuservalue;\nmodule.exports.lua_insert              = lapi.lua_insert;\nmodule.exports.lua_isboolean           = lapi.lua_isboolean;\nmodule.exports.lua_iscfunction         = lapi.lua_iscfunction;\nmodule.exports.lua_isfunction          = lapi.lua_isfunction;\nmodule.exports.lua_isinteger           = lapi.lua_isinteger;\nmodule.exports.lua_islightuserdata     = lapi.lua_islightuserdata;\nmodule.exports.lua_isnil               = lapi.lua_isnil;\nmodule.exports.lua_isnone              = lapi.lua_isnone;\nmodule.exports.lua_isnoneornil         = lapi.lua_isnoneornil;\nmodule.exports.lua_isnumber            = lapi.lua_isnumber;\nmodule.exports.lua_isproxy             = lapi.lua_isproxy;\nmodule.exports.lua_isstring            = lapi.lua_isstring;\nmodule.exports.lua_istable             = lapi.lua_istable;\nmodule.exports.lua_isthread            = lapi.lua_isthread;\nmodule.exports.lua_isuserdata          = lapi.lua_isuserdata;\nmodule.exports.lua_isyieldable         = ldo.lua_isyieldable;\nmodule.exports.lua_len                 = lapi.lua_len;\nmodule.exports.lua_load                = lapi.lua_load;\nmodule.exports.lua_newstate            = lstate.lua_newstate;\nmodule.exports.lua_newtable            = lapi.lua_newtable;\nmodule.exports.lua_newthread           = lstate.lua_newthread;\nmodule.exports.lua_newuserdata         = lapi.lua_newuserdata;\nmodule.exports.lua_next                = lapi.lua_next;\nmodule.exports.lua_pcall               = lapi.lua_pcall;\nmodule.exports.lua_pcallk              = lapi.lua_pcallk;\nmodule.exports.lua_pop                 = lapi.lua_pop;\nmodule.exports.lua_pushboolean         = lapi.lua_pushboolean;\nmodule.exports.lua_pushcclosure        = lapi.lua_pushcclosure;\nmodule.exports.lua_pushcfunction       = lapi.lua_pushcfunction;\nmodule.exports.lua_pushfstring         = lapi.lua_pushfstring;\nmodule.exports.lua_pushglobaltable     = lapi.lua_pushglobaltable;\nmodule.exports.lua_pushinteger         = lapi.lua_pushinteger;\nmodule.exports.lua_pushjsclosure       = lapi.lua_pushjsclosure;\nmodule.exports.lua_pushjsfunction      = lapi.lua_pushjsfunction;\nmodule.exports.lua_pushlightuserdata   = lapi.lua_pushlightuserdata;\nmodule.exports.lua_pushliteral         = lapi.lua_pushliteral;\nmodule.exports.lua_pushlstring         = lapi.lua_pushlstring;\nmodule.exports.lua_pushnil             = lapi.lua_pushnil;\nmodule.exports.lua_pushnumber          = lapi.lua_pushnumber;\nmodule.exports.lua_pushstring          = lapi.lua_pushstring;\nmodule.exports.lua_pushthread          = lapi.lua_pushthread;\nmodule.exports.lua_pushvalue           = lapi.lua_pushvalue;\nmodule.exports.lua_pushvfstring        = lapi.lua_pushvfstring;\nmodule.exports.lua_rawequal            = lapi.lua_rawequal;\nmodule.exports.lua_rawget              = lapi.lua_rawget;\nmodule.exports.lua_rawgeti             = lapi.lua_rawgeti;\nmodule.exports.lua_rawgetp             = lapi.lua_rawgetp;\nmodule.exports.lua_rawlen              = lapi.lua_rawlen;\nmodule.exports.lua_rawset              = lapi.lua_rawset;\nmodule.exports.lua_rawseti             = lapi.lua_rawseti;\nmodule.exports.lua_rawsetp             = lapi.lua_rawsetp;\nmodule.exports.lua_register            = lapi.lua_register;\nmodule.exports.lua_remove              = lapi.lua_remove;\nmodule.exports.lua_replace             = lapi.lua_replace;\nmodule.exports.lua_resume              = ldo.lua_resume;\nmodule.exports.lua_rotate              = lapi.lua_rotate;\nmodule.exports.lua_setallof            = ldo.lua_setallof;\nmodule.exports.lua_setfield            = lapi.lua_setfield;\nmodule.exports.lua_setglobal           = lapi.lua_setglobal;\nmodule.exports.lua_sethook             = ldebug.lua_sethook;\nmodule.exports.lua_seti                = lapi.lua_seti;\nmodule.exports.lua_setlocal            = ldebug.lua_setlocal;\nmodule.exports.lua_setmetatable        = lapi.lua_setmetatable;\nmodule.exports.lua_settable            = lapi.lua_settable;\nmodule.exports.lua_settop              = lapi.lua_settop;\nmodule.exports.lua_setupvalue          = lapi.lua_setupvalue;\nmodule.exports.lua_setuservalue        = lapi.lua_setuservalue;\nmodule.exports.lua_status              = lapi.lua_status;\nmodule.exports.lua_stringtonumber      = lapi.lua_stringtonumber;\nmodule.exports.lua_toboolean           = lapi.lua_toboolean;\nmodule.exports.lua_todataview          = lapi.lua_todataview;\nmodule.exports.lua_tointeger           = lapi.lua_tointeger;\nmodule.exports.lua_tointegerx          = lapi.lua_tointegerx;\nmodule.exports.lua_tojsstring          = lapi.lua_tojsstring;\nmodule.exports.lua_tolstring           = lapi.lua_tolstring;\nmodule.exports.lua_tonumber            = lapi.lua_tonumber;\nmodule.exports.lua_tonumberx           = lapi.lua_tonumberx;\nmodule.exports.lua_topointer           = lapi.lua_topointer;\nmodule.exports.lua_toproxy             = lapi.lua_toproxy;\nmodule.exports.lua_tostring            = lapi.lua_tostring;\nmodule.exports.lua_tothread            = lapi.lua_tothread;\nmodule.exports.lua_touserdata          = lapi.lua_touserdata;\nmodule.exports.lua_type                = lapi.lua_type;\nmodule.exports.lua_typename            = lapi.lua_typename;\nmodule.exports.lua_upvalueid           = lapi.lua_upvalueid;\nmodule.exports.lua_upvaluejoin         = lapi.lua_upvaluejoin;\nmodule.exports.lua_version             = lapi.lua_version;\nmodule.exports.lua_xmove               = lapi.lua_xmove;\nmodule.exports.lua_yield               = ldo.lua_yield;\nmodule.exports.lua_yieldk              = ldo.lua_yieldk;\nmodule.exports.lua_tocfunction         = lapi.lua_tocfunction;\n","\"use strict\";\n\nconst conf = (process.env.FENGARICONF ? JSON.parse(process.env.FENGARICONF) : {});\n\nconst {\n    LUA_VERSION_MAJOR,\n    LUA_VERSION_MINOR,\n    to_luastring\n} = require('./defs.js');\n\n/*\n** LUA_PATH_SEP is the character that separates templates in a path.\n** LUA_PATH_MARK is the string that marks the substitution points in a\n** template.\n** LUA_EXEC_DIR in a Windows path is replaced by the executable's\n** directory.\n*/\nconst LUA_PATH_SEP  = \";\";\nmodule.exports.LUA_PATH_SEP = LUA_PATH_SEP;\n\nconst LUA_PATH_MARK = \"?\";\nmodule.exports.LUA_PATH_MARK = LUA_PATH_MARK;\n\nconst LUA_EXEC_DIR  = \"!\";\nmodule.exports.LUA_EXEC_DIR = LUA_EXEC_DIR;\n\n/*\n@@ LUA_PATH_DEFAULT is the default path that Lua uses to look for\n** Lua libraries.\n@@ LUA_JSPATH_DEFAULT is the default path that Lua uses to look for\n** JS libraries.\n** CHANGE them if your machine has a non-conventional directory\n** hierarchy or if you want to install your libraries in\n** non-conventional directories.\n*/\nconst LUA_VDIR = LUA_VERSION_MAJOR + \".\" + LUA_VERSION_MINOR;\nmodule.exports.LUA_VDIR = LUA_VDIR;\n\nif (typeof process === \"undefined\") {\n    const LUA_DIRSEP = \"/\";\n    module.exports.LUA_DIRSEP = LUA_DIRSEP;\n\n    const LUA_LDIR = \"./lua/\" + LUA_VDIR + \"/\";\n    module.exports.LUA_LDIR = LUA_LDIR;\n\n    const LUA_JSDIR = LUA_LDIR;\n    module.exports.LUA_JSDIR = LUA_JSDIR;\n\n    const LUA_PATH_DEFAULT = to_luastring(\n        LUA_LDIR + \"?.lua;\" + LUA_LDIR + \"?/init.lua;\" +\n        /* LUA_JSDIR excluded as it is equal to LUA_LDIR */\n        \"./?.lua;./?/init.lua\"\n    );\n    module.exports.LUA_PATH_DEFAULT = LUA_PATH_DEFAULT;\n\n    const LUA_JSPATH_DEFAULT = to_luastring(\n        LUA_JSDIR + \"?.js;\" + LUA_JSDIR + \"loadall.js;./?.js\"\n    );\n    module.exports.LUA_JSPATH_DEFAULT = LUA_JSPATH_DEFAULT;\n} else if (require('os').platform() === 'win32') {\n    const LUA_DIRSEP = \"\\\\\";\n    module.exports.LUA_DIRSEP = LUA_DIRSEP;\n\n    /*\n    ** In Windows, any exclamation mark ('!') in the path is replaced by the\n    ** path of the directory of the executable file of the current process.\n    */\n    const LUA_LDIR = \"!\\\\lua\\\\\";\n    module.exports.LUA_LDIR = LUA_LDIR;\n\n    const LUA_JSDIR = \"!\\\\\";\n    module.exports.LUA_JSDIR = LUA_JSDIR;\n\n    const LUA_SHRDIR = \"!\\\\..\\\\share\\\\lua\\\\\" + LUA_VDIR + \"\\\\\";\n    module.exports.LUA_SHRDIR = LUA_SHRDIR;\n\n    const LUA_PATH_DEFAULT = to_luastring(\n        LUA_LDIR + \"?.lua;\" + LUA_LDIR + \"?\\\\init.lua;\" +\n        LUA_JSDIR + \"?.lua;\" + LUA_JSDIR + \"?\\\\init.lua;\" +\n        LUA_SHRDIR + \"?.lua;\" + LUA_SHRDIR + \"?\\\\init.lua;\" +\n        \".\\\\?.lua;.\\\\?\\\\init.lua\"\n    );\n    module.exports.LUA_PATH_DEFAULT = LUA_PATH_DEFAULT;\n\n    const LUA_JSPATH_DEFAULT = to_luastring(\n        LUA_JSDIR + \"?.js;\" +\n        LUA_JSDIR + \"..\\\\share\\\\lua\\\\\" + LUA_VDIR + \"\\\\?.js;\" +\n        LUA_JSDIR + \"loadall.js;.\\\\?.js\"\n    );\n    module.exports.LUA_JSPATH_DEFAULT = LUA_JSPATH_DEFAULT;\n} else {\n    const LUA_DIRSEP = \"/\";\n    module.exports.LUA_DIRSEP = LUA_DIRSEP;\n\n    const LUA_ROOT = \"/usr/local/\";\n    module.exports.LUA_ROOT = LUA_ROOT;\n    const LUA_ROOT2 = \"/usr/\";\n\n    const LUA_LDIR = LUA_ROOT + \"share/lua/\" + LUA_VDIR + \"/\";\n    const LUA_LDIR2 = LUA_ROOT2 + \"share/lua/\" + LUA_VDIR + \"/\";\n    module.exports.LUA_LDIR = LUA_LDIR;\n\n    const LUA_JSDIR = LUA_LDIR;\n    module.exports.LUA_JSDIR = LUA_JSDIR;\n    const LUA_JSDIR2 = LUA_LDIR2;\n\n    const LUA_PATH_DEFAULT = to_luastring(\n        LUA_LDIR + \"?.lua;\" + LUA_LDIR + \"?/init.lua;\" +\n        LUA_LDIR2 + \"?.lua;\" + LUA_LDIR2 + \"?/init.lua;\" +\n        /* LUA_JSDIR(2) excluded as it is equal to LUA_LDIR(2) */\n        \"./?.lua;./?/init.lua\"\n    );\n    module.exports.LUA_PATH_DEFAULT = LUA_PATH_DEFAULT;\n\n    const LUA_JSPATH_DEFAULT = to_luastring(\n        LUA_JSDIR + \"?.js;\" + LUA_JSDIR + \"loadall.js;\" +\n        LUA_JSDIR2 + \"?.js;\" + LUA_JSDIR2 + \"loadall.js;\" +\n        \"./?.js\"\n    );\n    module.exports.LUA_JSPATH_DEFAULT = LUA_JSPATH_DEFAULT;\n}\n\n/*\n@@ LUA_COMPAT_FLOATSTRING makes Lua format integral floats without a\n@@ a float mark ('.0').\n** This macro is not on by default even in compatibility mode,\n** because this is not really an incompatibility.\n*/\nconst LUA_COMPAT_FLOATSTRING = conf.LUA_COMPAT_FLOATSTRING || false;\n\nconst LUA_MAXINTEGER = 2147483647;\nconst LUA_MININTEGER = -2147483648;\n\n/*\n@@ LUAI_MAXSTACK limits the size of the Lua stack.\n** CHANGE it if you need a different limit. This limit is arbitrary;\n** its only purpose is to stop Lua from consuming unlimited stack\n** space (and to reserve some numbers for pseudo-indices).\n*/\nconst LUAI_MAXSTACK = conf.LUAI_MAXSTACK || 1000000;\n\n/*\n@@ LUA_IDSIZE gives the maximum size for the description of the source\n@@ of a function in debug information.\n** CHANGE it if you want a different size.\n*/\nconst LUA_IDSIZE = conf.LUA_IDSIZE || (60-1); /* fengari uses 1 less than lua as we don't embed the null byte */\n\nconst lua_integer2str = function(n) {\n    return String(n); /* should match behaviour of LUA_INTEGER_FMT */\n};\n\nconst lua_number2str = function(n) {\n    return String(Number(n.toPrecision(14))); /* should match behaviour of LUA_NUMBER_FMT */\n};\n\nconst lua_numbertointeger = function(n) {\n    return n >= LUA_MININTEGER && n < -LUA_MININTEGER ? n : false;\n};\n\nconst LUA_INTEGER_FRMLEN = \"\";\nconst LUA_NUMBER_FRMLEN = \"\";\n\nconst LUA_INTEGER_FMT = `%${LUA_INTEGER_FRMLEN}d`;\nconst LUA_NUMBER_FMT  = \"%.14g\";\n\nconst lua_getlocaledecpoint = function() {\n    /* we hard-code the decimal point to '.' as a user cannot change the\n       locale in most JS environments, and in that you can, a multi-byte\n       locale is common.\n    */\n    return 46 /* '.'.charCodeAt(0) */;\n};\n\nconst luai_apicheck = function(l, e) {\n    if (!e) throw Error(e);\n};\n\n/*\n@@ LUAL_BUFFERSIZE is the buffer size used by the lauxlib buffer system.\n*/\nconst LUAL_BUFFERSIZE = conf.LUAL_BUFFERSIZE || 8192;\n\n// See: http://croquetweak.blogspot.fr/2014/08/deconstructing-floats-frexp-and-ldexp.html\nconst frexp = function(value) {\n    if (value === 0) return [value, 0];\n    var data = new DataView(new ArrayBuffer(8));\n    data.setFloat64(0, value);\n    var bits = (data.getUint32(0) >>> 20) & 0x7FF;\n    if (bits === 0) { // denormal\n        data.setFloat64(0, value * Math.pow(2, 64));  // exp + 64\n        bits = ((data.getUint32(0) >>> 20) & 0x7FF) - 64;\n    }\n    var exponent = bits - 1022;\n    var mantissa = ldexp(value, -exponent);\n    return [mantissa, exponent];\n};\n\nconst ldexp = function(mantissa, exponent) {\n    var steps = Math.min(3, Math.ceil(Math.abs(exponent) / 1023));\n    var result = mantissa;\n    for (var i = 0; i < steps; i++)\n        result *= Math.pow(2, Math.floor((exponent + i) / steps));\n    return result;\n};\n\nmodule.exports.LUAI_MAXSTACK          = LUAI_MAXSTACK;\nmodule.exports.LUA_COMPAT_FLOATSTRING = LUA_COMPAT_FLOATSTRING;\nmodule.exports.LUA_IDSIZE             = LUA_IDSIZE;\nmodule.exports.LUA_INTEGER_FMT        = LUA_INTEGER_FMT;\nmodule.exports.LUA_INTEGER_FRMLEN     = LUA_INTEGER_FRMLEN;\nmodule.exports.LUA_MAXINTEGER         = LUA_MAXINTEGER;\nmodule.exports.LUA_MININTEGER         = LUA_MININTEGER;\nmodule.exports.LUA_NUMBER_FMT         = LUA_NUMBER_FMT;\nmodule.exports.LUA_NUMBER_FRMLEN      = LUA_NUMBER_FRMLEN;\nmodule.exports.LUAL_BUFFERSIZE        = LUAL_BUFFERSIZE;\nmodule.exports.frexp                  = frexp;\nmodule.exports.ldexp                  = ldexp;\nmodule.exports.lua_getlocaledecpoint  = lua_getlocaledecpoint;\nmodule.exports.lua_integer2str        = lua_integer2str;\nmodule.exports.lua_number2str         = lua_number2str;\nmodule.exports.lua_numbertointeger    = lua_numbertointeger;\nmodule.exports.luai_apicheck          = luai_apicheck;\n","\"use strict\";\n\nconst {\n    LUA_SIGNATURE,\n    constant_types: {\n        LUA_TBOOLEAN,\n        LUA_TLNGSTR,\n        LUA_TNIL,\n        LUA_TNUMFLT,\n        LUA_TNUMINT,\n        LUA_TSHRSTR\n    },\n    thread_status: { LUA_ERRSYNTAX },\n    is_luastring,\n    luastring_eq,\n    to_luastring\n} = require('./defs.js');\nconst ldo      = require('./ldo.js');\nconst lfunc    = require('./lfunc.js');\nconst lobject  = require('./lobject.js');\nconst {\n    MAXARG_sBx,\n    POS_A,\n    POS_Ax,\n    POS_B,\n    POS_Bx,\n    POS_C,\n    POS_OP,\n    SIZE_A,\n    SIZE_Ax,\n    SIZE_B,\n    SIZE_Bx,\n    SIZE_C,\n    SIZE_OP\n} = require('./lopcodes.js');\nconst { lua_assert } = require(\"./llimits.js\");\nconst { luaS_bless } = require('./lstring.js');\nconst {\n    luaZ_read,\n    ZIO\n} = require('./lzio.js');\n\nlet LUAC_DATA = [0x19, 0x93, 13, 10, 0x1a, 10];\n\nclass BytecodeParser {\n\n    constructor(L, Z, name) {\n        this.intSize = 4;\n        this.size_tSize = 4;\n        this.instructionSize = 4;\n        this.integerSize = 4;\n        this.numberSize = 8;\n\n        lua_assert(Z instanceof ZIO, \"BytecodeParser only operates on a ZIO\");\n        lua_assert(is_luastring(name));\n\n        if (name[0] === 64 /* ('@').charCodeAt(0) */ || name[0] === 61 /* ('=').charCodeAt(0) */)\n            this.name = name.subarray(1);\n        else if (name[0] == LUA_SIGNATURE[0])\n            this.name = to_luastring(\"binary string\", true);\n        else\n            this.name = name;\n\n        this.L = L;\n        this.Z = Z;\n\n        // Used to do buffer to number conversions\n        this.arraybuffer = new ArrayBuffer(\n            Math.max(this.intSize, this.size_tSize, this.instructionSize, this.integerSize, this.numberSize)\n        );\n        this.dv = new DataView(this.arraybuffer);\n        this.u8 = new Uint8Array(this.arraybuffer);\n    }\n\n    read(size) {\n        let u8 = new Uint8Array(size);\n        if(luaZ_read(this.Z, u8, 0, size) !== 0)\n            this.error(\"truncated\");\n        return u8;\n    }\n\n    LoadByte() {\n        if (luaZ_read(this.Z, this.u8, 0, 1) !== 0)\n            this.error(\"truncated\");\n        return this.u8[0];\n    }\n\n    LoadInt() {\n        if (luaZ_read(this.Z, this.u8, 0, this.intSize) !== 0)\n            this.error(\"truncated\");\n        return this.dv.getInt32(0, true);\n    }\n\n    LoadNumber() {\n        if (luaZ_read(this.Z, this.u8, 0, this.numberSize) !== 0)\n            this.error(\"truncated\");\n        return this.dv.getFloat64(0, true);\n    }\n\n    LoadInteger() {\n        if (luaZ_read(this.Z, this.u8, 0, this.integerSize) !== 0)\n            this.error(\"truncated\");\n        return this.dv.getInt32(0, true);\n    }\n\n    LoadSize_t() {\n        return this.LoadInteger();\n    }\n\n    LoadString() {\n        let size = this.LoadByte();\n        if (size === 0xFF)\n            size = this.LoadSize_t();\n        if (size === 0)\n            return null;\n        return luaS_bless(this.L, this.read(size-1));\n    }\n\n    /* creates a mask with 'n' 1 bits at position 'p' */\n    static MASK1(n, p) {\n        return ((~((~0)<<(n)))<<(p));\n    }\n\n    LoadCode(f) {\n        let n = this.LoadInt();\n        let p = BytecodeParser;\n\n        for (let i = 0; i < n; i++) {\n            if (luaZ_read(this.Z, this.u8, 0, this.instructionSize) !== 0)\n                this.error(\"truncated\");\n            let ins = this.dv.getUint32(0, true);\n            f.code[i] = {\n                code:   ins,\n                opcode: (ins >> POS_OP) & p.MASK1(SIZE_OP, 0),\n                A:      (ins >> POS_A)  & p.MASK1(SIZE_A,  0),\n                B:      (ins >> POS_B)  & p.MASK1(SIZE_B,  0),\n                C:      (ins >> POS_C)  & p.MASK1(SIZE_C,  0),\n                Bx:     (ins >> POS_Bx) & p.MASK1(SIZE_Bx, 0),\n                Ax:     (ins >> POS_Ax) & p.MASK1(SIZE_Ax, 0),\n                sBx:    ((ins >> POS_Bx) & p.MASK1(SIZE_Bx, 0)) - MAXARG_sBx\n            };\n        }\n    }\n\n    LoadConstants(f) {\n        let n = this.LoadInt();\n\n        for (let i = 0; i < n; i++) {\n            let t = this.LoadByte();\n\n            switch (t) {\n                case LUA_TNIL:\n                    f.k.push(new lobject.TValue(LUA_TNIL, null));\n                    break;\n                case LUA_TBOOLEAN:\n                    f.k.push(new lobject.TValue(LUA_TBOOLEAN, this.LoadByte() !== 0));\n                    break;\n                case LUA_TNUMFLT:\n                    f.k.push(new lobject.TValue(LUA_TNUMFLT, this.LoadNumber()));\n                    break;\n                case LUA_TNUMINT:\n                    f.k.push(new lobject.TValue(LUA_TNUMINT, this.LoadInteger()));\n                    break;\n                case LUA_TSHRSTR:\n                case LUA_TLNGSTR:\n                    f.k.push(new lobject.TValue(LUA_TLNGSTR, this.LoadString()));\n                    break;\n                default:\n                    this.error(`unrecognized constant '${t}'`);\n            }\n        }\n    }\n\n    LoadProtos(f) {\n        let n = this.LoadInt();\n\n        for (let i = 0; i < n; i++) {\n            f.p[i] = new lfunc.Proto(this.L);\n            this.LoadFunction(f.p[i], f.source);\n        }\n    }\n\n    LoadUpvalues(f) {\n        let n = this.LoadInt();\n\n        for (let i = 0; i < n; i++) {\n            f.upvalues[i] = {\n                name:    null,\n                instack: this.LoadByte(),\n                idx:     this.LoadByte()\n            };\n        }\n    }\n\n    LoadDebug(f) {\n        let n = this.LoadInt();\n        for (let i = 0; i < n; i++)\n            f.lineinfo[i] = this.LoadInt();\n\n        n = this.LoadInt();\n        for (let i = 0; i < n; i++) {\n            f.locvars[i] = {\n                varname: this.LoadString(),\n                startpc: this.LoadInt(),\n                endpc:   this.LoadInt()\n            };\n        }\n\n        n = this.LoadInt();\n        for (let i = 0; i < n; i++) {\n            f.upvalues[i].name = this.LoadString();\n        }\n    }\n\n    LoadFunction(f, psource) {\n        f.source = this.LoadString();\n        if (f.source === null)  /* no source in dump? */\n            f.source = psource;  /* reuse parent's source */\n        f.linedefined = this.LoadInt();\n        f.lastlinedefined = this.LoadInt();\n        f.numparams = this.LoadByte();\n        f.is_vararg = this.LoadByte() !== 0;\n        f.maxstacksize = this.LoadByte();\n        this.LoadCode(f);\n        this.LoadConstants(f);\n        this.LoadUpvalues(f);\n        this.LoadProtos(f);\n        this.LoadDebug(f);\n    }\n\n    checkliteral(s, msg) {\n        let buff = this.read(s.length);\n        if (!luastring_eq(buff, s))\n            this.error(msg);\n    }\n\n    checkHeader() {\n        this.checkliteral(LUA_SIGNATURE.subarray(1), \"not a\"); /* 1st char already checked */\n\n        if (this.LoadByte() !== 0x53)\n            this.error(\"version mismatch in\");\n\n        if (this.LoadByte() !== 0)\n            this.error(\"format mismatch in\");\n\n        this.checkliteral(LUAC_DATA, \"corrupted\");\n\n        this.intSize         = this.LoadByte();\n        this.size_tSize      = this.LoadByte();\n        this.instructionSize = this.LoadByte();\n        this.integerSize     = this.LoadByte();\n        this.numberSize      = this.LoadByte();\n\n        this.checksize(this.intSize, 4, \"int\");\n        this.checksize(this.size_tSize, 4, \"size_t\");\n        this.checksize(this.instructionSize, 4, \"instruction\");\n        this.checksize(this.integerSize, 4, \"integer\");\n        this.checksize(this.numberSize, 8, \"number\");\n\n        if (this.LoadInteger() !== 0x5678)\n            this.error(\"endianness mismatch in\");\n\n        if (this.LoadNumber() !== 370.5)\n            this.error(\"float format mismatch in\");\n\n    }\n\n    error(why) {\n        lobject.luaO_pushfstring(this.L, to_luastring(\"%s: %s precompiled chunk\"), this.name, to_luastring(why));\n        ldo.luaD_throw(this.L, LUA_ERRSYNTAX);\n    }\n\n    checksize(byte, size, tname) {\n        if (byte !== size)\n            this.error(`${tname} size mismatch in`);\n    }\n}\n\nconst luaU_undump = function(L, Z, name) {\n    let S = new BytecodeParser(L, Z, name);\n    S.checkHeader();\n    let cl = lfunc.luaF_newLclosure(L, S.LoadByte());\n    ldo.luaD_inctop(L);\n    L.stack[L.top-1].setclLvalue(cl);\n    cl.p = new lfunc.Proto(L);\n    S.LoadFunction(cl.p, null);\n    lua_assert(cl.nupvalues === cl.p.upvalues.length);\n    /* luai_verifycode */\n    return cl;\n};\n\nmodule.exports.luaU_undump = luaU_undump;\n","\"use strict\";\n\nconst {\n    LUA_MASKLINE,\n    LUA_MASKCOUNT,\n    LUA_MULTRET,\n    constant_types: {\n        LUA_TBOOLEAN,\n        LUA_TLCF,\n        LUA_TLIGHTUSERDATA,\n        LUA_TLNGSTR,\n        LUA_TNIL,\n        LUA_TNUMBER,\n        LUA_TNUMFLT,\n        LUA_TNUMINT,\n        LUA_TSHRSTR,\n        LUA_TTABLE,\n        LUA_TUSERDATA\n    },\n    to_luastring\n} = require('./defs.js');\nconst {\n    INDEXK,\n    ISK,\n    LFIELDS_PER_FLUSH,\n    OpCodesI: {\n        OP_ADD,\n        OP_BAND,\n        OP_BNOT,\n        OP_BOR,\n        OP_BXOR,\n        OP_CALL,\n        OP_CLOSURE,\n        OP_CONCAT,\n        OP_DIV,\n        OP_EQ,\n        OP_EXTRAARG,\n        OP_FORLOOP,\n        OP_FORPREP,\n        OP_GETTABLE,\n        OP_GETTABUP,\n        OP_GETUPVAL,\n        OP_IDIV,\n        OP_JMP,\n        OP_LE,\n        OP_LEN,\n        OP_LOADBOOL,\n        OP_LOADK,\n        OP_LOADKX,\n        OP_LOADNIL,\n        OP_LT,\n        OP_MOD,\n        OP_MOVE,\n        OP_MUL,\n        OP_NEWTABLE,\n        OP_NOT,\n        OP_POW,\n        OP_RETURN,\n        OP_SELF,\n        OP_SETLIST,\n        OP_SETTABLE,\n        OP_SETTABUP,\n        OP_SETUPVAL,\n        OP_SHL,\n        OP_SHR,\n        OP_SUB,\n        OP_TAILCALL,\n        OP_TEST,\n        OP_TESTSET,\n        OP_TFORCALL,\n        OP_TFORLOOP,\n        OP_UNM,\n        OP_VARARG\n    }\n} = require('./lopcodes.js');\nconst {\n    LUA_MAXINTEGER,\n    LUA_MININTEGER,\n    lua_numbertointeger\n} = require('./luaconf.js');\nconst {\n    lua_assert,\n    luai_nummod\n} = require('./llimits.js');\nconst lobject = require('./lobject.js');\nconst lfunc   = require('./lfunc.js');\nconst lstate  = require('./lstate.js');\nconst {\n    luaS_bless,\n    luaS_eqlngstr,\n    luaS_hashlongstr\n} = require('./lstring.js');\nconst ldo     = require('./ldo.js');\nconst ltm     = require('./ltm.js');\nconst ltable  = require('./ltable.js');\nconst ldebug  = require('./ldebug.js');\n\n/*\n** finish execution of an opcode interrupted by an yield\n*/\nconst luaV_finishOp = function(L) {\n    let ci = L.ci;\n    let base = ci.l_base;\n    let inst = ci.l_code[ci.l_savedpc - 1];  /* interrupted instruction */\n    let op = inst.opcode;\n\n    switch (op) {  /* finish its execution */\n        case OP_ADD: case OP_SUB: case OP_MUL: case OP_DIV: case OP_IDIV:\n        case OP_BAND: case OP_BOR: case OP_BXOR: case OP_SHL: case OP_SHR:\n        case OP_MOD: case OP_POW:\n        case OP_UNM: case OP_BNOT: case OP_LEN:\n        case OP_GETTABUP: case OP_GETTABLE: case OP_SELF: {\n            lobject.setobjs2s(L, base + inst.A, L.top-1);\n            delete L.stack[--L.top];\n            break;\n        }\n        case OP_LE: case OP_LT: case OP_EQ: {\n            let res = !L.stack[L.top - 1].l_isfalse();\n            delete L.stack[--L.top];\n            if (ci.callstatus & lstate.CIST_LEQ) {  /* \"<=\" using \"<\" instead? */\n                lua_assert(op === OP_LE);\n                ci.callstatus ^= lstate.CIST_LEQ;  /* clear mark */\n                res = !res;  /* negate result */\n            }\n            lua_assert(ci.l_code[ci.l_savedpc].opcode === OP_JMP);\n            if (res !== (inst.A ? true : false))  /* condition failed? */\n                ci.l_savedpc++;  /* skip jump instruction */\n            break;\n        }\n        case OP_CONCAT: {\n            let top = L.top - 1;  /* top when 'luaT_trybinTM' was called */\n            let b = inst.B;  /* first element to concatenate */\n            let total = top - 1 - (base + b);  /* yet to concatenate */\n            lobject.setobjs2s(L, top - 2, top);  /* put TM result in proper position */\n            if (total > 1) {  /* are there elements to concat? */\n                L.top = top - 1;  /* top is one after last element (at top-2) */\n                luaV_concat(L, total);  /* concat them (may yield again) */\n            }\n            /* move final result to final position */\n            lobject.setobjs2s(L, ci.l_base + inst.A, L.top - 1);\n            ldo.adjust_top(L, ci.top);  /* restore top */\n            break;\n        }\n        case OP_TFORCALL: {\n            lua_assert(ci.l_code[ci.l_savedpc].opcode === OP_TFORLOOP);\n            ldo.adjust_top(L, ci.top);  /* correct top */\n            break;\n        }\n        case OP_CALL: {\n            if (inst.C - 1 >= 0)  /* nresults >= 0? */\n                ldo.adjust_top(L, ci.top);  /* adjust results */\n            break;\n        }\n    }\n};\n\nconst RA = function(L, base, i) {\n    return base + i.A;\n};\n\nconst RB = function(L, base, i) {\n    return base + i.B;\n};\n\n// const RC = function(L, base, i) {\n//     return base + i.C;\n// };\n\nconst RKB = function(L, base, k, i) {\n    return ISK(i.B) ? k[INDEXK(i.B)] : L.stack[base + i.B];\n};\n\nconst RKC = function(L, base, k, i) {\n    return ISK(i.C) ? k[INDEXK(i.C)] : L.stack[base + i.C];\n};\n\nconst luaV_execute = function(L) {\n    let ci = L.ci;\n\n    ci.callstatus |= lstate.CIST_FRESH;\n    newframe:\n    for (;;) {\n        lua_assert(ci === L.ci);\n        let cl = ci.func.value;\n        let k = cl.p.k;\n        let base = ci.l_base;\n\n        let i = ci.l_code[ci.l_savedpc++];\n\n        if (L.hookmask & (LUA_MASKLINE | LUA_MASKCOUNT)) {\n            ldebug.luaG_traceexec(L);\n        }\n\n        let ra = RA(L, base, i);\n        let opcode = i.opcode;\n\n        switch (opcode) {\n            case OP_MOVE: {\n                lobject.setobjs2s(L, ra, RB(L, base, i));\n                break;\n            }\n            case OP_LOADK: {\n                let konst = k[i.Bx];\n                lobject.setobj2s(L, ra, konst);\n                break;\n            }\n            case OP_LOADKX: {\n                lua_assert(ci.l_code[ci.l_savedpc].opcode === OP_EXTRAARG);\n                let konst = k[ci.l_code[ci.l_savedpc++].Ax];\n                lobject.setobj2s(L, ra, konst);\n                break;\n            }\n            case OP_LOADBOOL: {\n                L.stack[ra].setbvalue(i.B !== 0);\n\n                if (i.C !== 0)\n                    ci.l_savedpc++; /* skip next instruction (if C) */\n\n                break;\n            }\n            case OP_LOADNIL: {\n                for (let j = 0; j <= i.B; j++)\n                    L.stack[ra + j].setnilvalue();\n                break;\n            }\n            case OP_GETUPVAL: {\n                let b = i.B;\n                lobject.setobj2s(L, ra, cl.upvals[b]);\n                break;\n            }\n            case OP_GETTABUP: {\n                let upval = cl.upvals[i.B];\n                let rc = RKC(L, base, k, i);\n                luaV_gettable(L, upval, rc, ra);\n                break;\n            }\n            case OP_GETTABLE: {\n                let rb = L.stack[RB(L, base, i)];\n                let rc = RKC(L, base, k, i);\n                luaV_gettable(L, rb, rc, ra);\n                break;\n            }\n            case OP_SETTABUP: {\n                let upval = cl.upvals[i.A];\n                let rb = RKB(L, base, k, i);\n                let rc = RKC(L, base, k, i);\n                settable(L, upval, rb, rc);\n                break;\n            }\n            case OP_SETUPVAL: {\n                let uv = cl.upvals[i.B];\n                uv.setfrom(L.stack[ra]);\n                break;\n            }\n            case OP_SETTABLE: {\n                let table = L.stack[ra];\n                let key = RKB(L, base, k, i);\n                let v = RKC(L, base, k, i);\n\n                settable(L, table, key, v);\n                break;\n            }\n            case OP_NEWTABLE: {\n                L.stack[ra].sethvalue(ltable.luaH_new(L));\n                break;\n            }\n            case OP_SELF: {\n                let rb = RB(L, base, i);\n                let rc = RKC(L, base, k, i);\n                lobject.setobjs2s(L, ra + 1, rb);\n                luaV_gettable(L, L.stack[rb], rc, ra);\n                break;\n            }\n            case OP_ADD: {\n                let op1 = RKB(L, base, k, i);\n                let op2 = RKC(L, base, k, i);\n                let numberop1, numberop2;\n\n                if (op1.ttisinteger() && op2.ttisinteger()) {\n                    L.stack[ra].setivalue((op1.value + op2.value)|0);\n                } else if ((numberop1 = tonumber(op1)) !== false && (numberop2 = tonumber(op2)) !== false) {\n                    L.stack[ra].setfltvalue(numberop1 + numberop2);\n                } else {\n                    ltm.luaT_trybinTM(L, op1, op2, L.stack[ra], ltm.TMS.TM_ADD);\n                }\n                break;\n            }\n            case OP_SUB: {\n                let op1 = RKB(L, base, k, i);\n                let op2 = RKC(L, base, k, i);\n                let numberop1, numberop2;\n\n                if (op1.ttisinteger() && op2.ttisinteger()) {\n                    L.stack[ra].setivalue((op1.value - op2.value)|0);\n                } else if ((numberop1 = tonumber(op1)) !== false && (numberop2 = tonumber(op2)) !== false) {\n                    L.stack[ra].setfltvalue(numberop1 - numberop2);\n                } else {\n                    ltm.luaT_trybinTM(L, op1, op2, L.stack[ra], ltm.TMS.TM_SUB);\n                }\n                break;\n            }\n            case OP_MUL: {\n                let op1 = RKB(L, base, k, i);\n                let op2 = RKC(L, base, k, i);\n                let numberop1, numberop2;\n\n                if (op1.ttisinteger() && op2.ttisinteger()) {\n                    L.stack[ra].setivalue(luaV_imul(op1.value, op2.value));\n                } else if ((numberop1 = tonumber(op1)) !== false && (numberop2 = tonumber(op2)) !== false) {\n                    L.stack[ra].setfltvalue(numberop1 * numberop2);\n                } else {\n                    ltm.luaT_trybinTM(L, op1, op2, L.stack[ra], ltm.TMS.TM_MUL);\n                }\n                break;\n            }\n            case OP_MOD: {\n                let op1 = RKB(L, base, k, i);\n                let op2 = RKC(L, base, k, i);\n                let numberop1, numberop2;\n\n                if (op1.ttisinteger() && op2.ttisinteger()) {\n                    L.stack[ra].setivalue(luaV_mod(L, op1.value, op2.value));\n                } else if ((numberop1 = tonumber(op1)) !== false && (numberop2 = tonumber(op2)) !== false) {\n                    L.stack[ra].setfltvalue(luai_nummod(L, numberop1, numberop2));\n                } else {\n                    ltm.luaT_trybinTM(L, op1, op2, L.stack[ra], ltm.TMS.TM_MOD);\n                }\n                break;\n            }\n            case OP_POW: {\n                let op1 = RKB(L, base, k, i);\n                let op2 = RKC(L, base, k, i);\n                let numberop1, numberop2;\n\n                if ((numberop1 = tonumber(op1)) !== false && (numberop2 = tonumber(op2)) !== false) {\n                    L.stack[ra].setfltvalue(Math.pow(numberop1, numberop2));\n                } else {\n                    ltm.luaT_trybinTM(L, op1, op2, L.stack[ra], ltm.TMS.TM_POW);\n                }\n                break;\n            }\n            case OP_DIV: {\n                let op1 = RKB(L, base, k, i);\n                let op2 = RKC(L, base, k, i);\n                let numberop1, numberop2;\n\n                if ((numberop1 = tonumber(op1)) !== false && (numberop2 = tonumber(op2)) !== false) {\n                    L.stack[ra].setfltvalue(numberop1 / numberop2);\n                } else {\n                    ltm.luaT_trybinTM(L, op1, op2, L.stack[ra], ltm.TMS.TM_DIV);\n                }\n                break;\n            }\n            case OP_IDIV: {\n                let op1 = RKB(L, base, k, i);\n                let op2 = RKC(L, base, k, i);\n                let numberop1, numberop2;\n\n                if (op1.ttisinteger() && op2.ttisinteger()) {\n                    L.stack[ra].setivalue(luaV_div(L, op1.value, op2.value));\n                } else if ((numberop1 = tonumber(op1)) !== false && (numberop2 = tonumber(op2)) !== false) {\n                    L.stack[ra].setfltvalue(Math.floor(numberop1 / numberop2));\n                } else {\n                    ltm.luaT_trybinTM(L, op1, op2, L.stack[ra], ltm.TMS.TM_IDIV);\n                }\n                break;\n            }\n            case OP_BAND: {\n                let op1 = RKB(L, base, k, i);\n                let op2 = RKC(L, base, k, i);\n                let numberop1, numberop2;\n\n                if ((numberop1 = tointeger(op1)) !== false && (numberop2 = tointeger(op2)) !== false) {\n                    L.stack[ra].setivalue(numberop1 & numberop2);\n                } else {\n                    ltm.luaT_trybinTM(L, op1, op2, L.stack[ra], ltm.TMS.TM_BAND);\n                }\n                break;\n            }\n            case OP_BOR: {\n                let op1 = RKB(L, base, k, i);\n                let op2 = RKC(L, base, k, i);\n                let numberop1, numberop2;\n\n                if ((numberop1 = tointeger(op1)) !== false && (numberop2 = tointeger(op2)) !== false) {\n                    L.stack[ra].setivalue(numberop1 | numberop2);\n                } else {\n                    ltm.luaT_trybinTM(L, op1, op2, L.stack[ra], ltm.TMS.TM_BOR);\n                }\n                break;\n            }\n            case OP_BXOR: {\n                let op1 = RKB(L, base, k, i);\n                let op2 = RKC(L, base, k, i);\n                let numberop1, numberop2;\n\n                if ((numberop1 = tointeger(op1)) !== false && (numberop2 = tointeger(op2)) !== false) {\n                    L.stack[ra].setivalue(numberop1 ^ numberop2);\n                } else {\n                    ltm.luaT_trybinTM(L, op1, op2, L.stack[ra], ltm.TMS.TM_BXOR);\n                }\n                break;\n            }\n            case OP_SHL: {\n                let op1 = RKB(L, base, k, i);\n                let op2 = RKC(L, base, k, i);\n                let numberop1, numberop2;\n\n                if ((numberop1 = tointeger(op1)) !== false && (numberop2 = tointeger(op2)) !== false) {\n                    L.stack[ra].setivalue(luaV_shiftl(numberop1, numberop2));\n                } else {\n                    ltm.luaT_trybinTM(L, op1, op2, L.stack[ra], ltm.TMS.TM_SHL);\n                }\n                break;\n            }\n            case OP_SHR: {\n                let op1 = RKB(L, base, k, i);\n                let op2 = RKC(L, base, k, i);\n                let numberop1, numberop2;\n\n                if ((numberop1 = tointeger(op1)) !== false && (numberop2 = tointeger(op2)) !== false) {\n                    L.stack[ra].setivalue(luaV_shiftl(numberop1, -numberop2));\n                } else {\n                    ltm.luaT_trybinTM(L, op1, op2, L.stack[ra], ltm.TMS.TM_SHR);\n                }\n                break;\n            }\n            case OP_UNM: {\n                let op = L.stack[RB(L, base, i)];\n                let numberop;\n\n                if (op.ttisinteger()) {\n                    L.stack[ra].setivalue((-op.value)|0);\n                } else if ((numberop = tonumber(op)) !== false) {\n                    L.stack[ra].setfltvalue(-numberop);\n                } else {\n                    ltm.luaT_trybinTM(L, op, op, L.stack[ra], ltm.TMS.TM_UNM);\n                }\n                break;\n            }\n            case OP_BNOT: {\n                let op = L.stack[RB(L, base, i)];\n\n                if (op.ttisinteger()) {\n                    L.stack[ra].setivalue(~op.value);\n                } else {\n                    ltm.luaT_trybinTM(L, op, op, L.stack[ra], ltm.TMS.TM_BNOT);\n                }\n                break;\n            }\n            case OP_NOT: {\n                let op = L.stack[RB(L, base, i)];\n                L.stack[ra].setbvalue(op.l_isfalse());\n                break;\n            }\n            case OP_LEN: {\n                luaV_objlen(L, L.stack[ra], L.stack[RB(L, base, i)]);\n                break;\n            }\n            case OP_CONCAT: {\n                let b = i.B;\n                let c = i.C;\n                L.top = base + c + 1; /* mark the end of concat operands */\n                luaV_concat(L, c - b + 1);\n                let rb = base + b;\n                lobject.setobjs2s(L, ra, rb);\n                ldo.adjust_top(L, ci.top); /* restore top */\n                break;\n            }\n            case OP_JMP: {\n                dojump(L, ci, i, 0);\n                break;\n            }\n            case OP_EQ: {\n                if (luaV_equalobj(L, RKB(L, base, k, i), RKC(L, base, k, i)) !== i.A)\n                    ci.l_savedpc++;\n                else\n                    donextjump(L, ci);\n                break;\n            }\n            case OP_LT: {\n                if (luaV_lessthan(L, RKB(L, base, k, i), RKC(L, base, k, i)) !== i.A)\n                    ci.l_savedpc++;\n                else\n                    donextjump(L, ci);\n                break;\n            }\n            case OP_LE: {\n                if (luaV_lessequal(L, RKB(L, base, k, i), RKC(L, base, k, i)) !== i.A)\n                    ci.l_savedpc++;\n                else\n                    donextjump(L, ci);\n                break;\n            }\n            case OP_TEST: {\n                if (i.C ? L.stack[ra].l_isfalse() : !L.stack[ra].l_isfalse())\n                    ci.l_savedpc++;\n                else\n                    donextjump(L, ci);\n                break;\n            }\n            case OP_TESTSET: {\n                let rbIdx = RB(L, base, i);\n                let rb = L.stack[rbIdx];\n                if (i.C ? rb.l_isfalse() : !rb.l_isfalse())\n                    ci.l_savedpc++;\n                else {\n                    lobject.setobjs2s(L, ra, rbIdx);\n                    donextjump(L, ci);\n                }\n                break;\n            }\n            case OP_CALL: {\n                let b = i.B;\n                let nresults = i.C - 1;\n                if (b !== 0) ldo.adjust_top(L, ra+b);  /* else previous instruction set top */\n                if (ldo.luaD_precall(L, ra, nresults)) {\n                    if (nresults >= 0)\n                        ldo.adjust_top(L, ci.top);  /* adjust results */\n                } else {\n                    ci = L.ci;\n                    continue newframe;\n                }\n\n                break;\n            }\n            case OP_TAILCALL: {\n                let b = i.B;\n                if (b !== 0) ldo.adjust_top(L, ra+b);  /* else previous instruction set top */\n                if (ldo.luaD_precall(L, ra, LUA_MULTRET)) { // JS function\n                } else {\n                    /* tail call: put called frame (n) in place of caller one (o) */\n                    let nci = L.ci;\n                    let oci = nci.previous;\n                    let nfunc = nci.func;\n                    let nfuncOff = nci.funcOff;\n                    let ofuncOff = oci.funcOff;\n                    let lim = nci.l_base + nfunc.value.p.numparams;\n                    if (cl.p.p.length > 0) lfunc.luaF_close(L, oci.l_base);\n                    for (let aux = 0; nfuncOff + aux < lim; aux++)\n                        lobject.setobjs2s(L, ofuncOff + aux, nfuncOff + aux);\n                    oci.l_base = ofuncOff + (nci.l_base - nfuncOff);\n                    oci.top = ofuncOff + (L.top - nfuncOff);\n                    ldo.adjust_top(L, oci.top);  /* correct top */\n                    oci.l_code = nci.l_code;\n                    oci.l_savedpc = nci.l_savedpc;\n                    oci.callstatus |= lstate.CIST_TAIL;\n                    oci.next = null;\n                    ci = L.ci = oci;\n\n                    lua_assert(L.top === oci.l_base + L.stack[ofuncOff].value.p.maxstacksize);\n\n                    continue newframe;\n                }\n                break;\n            }\n            case OP_RETURN: {\n                if (cl.p.p.length > 0) lfunc.luaF_close(L, base);\n                let b = ldo.luaD_poscall(L, ci, ra, (i.B !== 0 ? i.B - 1 : L.top - ra));\n\n                if (ci.callstatus & lstate.CIST_FRESH)\n                    return; /* external invocation: return */\n                /* invocation via reentry: continue execution */\n                ci = L.ci;\n                if (b) ldo.adjust_top(L, ci.top);\n                lua_assert(ci.callstatus & lstate.CIST_LUA);\n                lua_assert(ci.l_code[ci.l_savedpc - 1].opcode === OP_CALL);\n                continue newframe;\n            }\n            case OP_FORLOOP: {\n                if (L.stack[ra].ttisinteger()) { /* integer loop? */\n                    let step = L.stack[ra + 2].value;\n                    let idx = (L.stack[ra].value + step)|0;\n                    let limit = L.stack[ra + 1].value;\n\n                    if (0 < step ? idx <= limit : limit <= idx) {\n                        ci.l_savedpc += i.sBx;\n                        L.stack[ra].chgivalue(idx);  /* update internal index... */\n                        L.stack[ra + 3].setivalue(idx);\n                    }\n                } else { /* floating loop */\n                    let step = L.stack[ra + 2].value;\n                    let idx = L.stack[ra].value + step;\n                    let limit = L.stack[ra + 1].value;\n\n                    if (0 < step ? idx <= limit : limit <= idx) {\n                        ci.l_savedpc += i.sBx;\n                        L.stack[ra].chgfltvalue(idx);  /* update internal index... */\n                        L.stack[ra + 3].setfltvalue(idx);\n                    }\n                }\n                break;\n            }\n            case OP_FORPREP: {\n                let init = L.stack[ra];\n                let plimit = L.stack[ra + 1];\n                let pstep = L.stack[ra + 2];\n                let forlim;\n\n                if (init.ttisinteger() && pstep.ttisinteger() && (forlim = forlimit(plimit, pstep.value))) {\n                    /* all values are integer */\n                    let initv = forlim.stopnow ? 0 : init.value;\n                    plimit.value = forlim.ilimit;\n                    init.value = (initv - pstep.value)|0;\n                } else { /* try making all values floats */\n                    let nlimit, nstep, ninit;\n                    if ((nlimit = tonumber(plimit)) === false)\n                        ldebug.luaG_runerror(L, to_luastring(\"'for' limit must be a number\", true));\n                    L.stack[ra + 1].setfltvalue(nlimit);\n                    if ((nstep = tonumber(pstep)) === false)\n                        ldebug.luaG_runerror(L, to_luastring(\"'for' step must be a number\", true));\n                    L.stack[ra + 2].setfltvalue(nstep);\n                    if ((ninit = tonumber(init)) === false)\n                        ldebug.luaG_runerror(L, to_luastring(\"'for' initial value must be a number\", true));\n                    L.stack[ra].setfltvalue(ninit - nstep);\n                }\n\n                ci.l_savedpc += i.sBx;\n                break;\n            }\n            case OP_TFORCALL: {\n                let cb = ra + 3; /* call base */\n                lobject.setobjs2s(L, cb+2, ra+2);\n                lobject.setobjs2s(L, cb+1, ra+1);\n                lobject.setobjs2s(L, cb, ra);\n                ldo.adjust_top(L, cb+3);  /* func. + 2 args (state and index) */\n                ldo.luaD_call(L, cb, i.C);\n                ldo.adjust_top(L, ci.top);\n                /* go straight to OP_TFORLOOP */\n                i = ci.l_code[ci.l_savedpc++];\n                ra = RA(L, base, i);\n                lua_assert(i.opcode === OP_TFORLOOP);\n            }\n            /* fall through */\n            case OP_TFORLOOP: {\n                if (!L.stack[ra + 1].ttisnil()) { /* continue loop? */\n                    lobject.setobjs2s(L, ra, ra + 1); /* save control variable */\n                    ci.l_savedpc += i.sBx; /* jump back */\n                }\n                break;\n            }\n            case OP_SETLIST: {\n                let n = i.B;\n                let c = i.C;\n\n                if (n === 0) n = L.top - ra - 1;\n\n                if (c === 0) {\n                    lua_assert(ci.l_code[ci.l_savedpc].opcode === OP_EXTRAARG);\n                    c = ci.l_code[ci.l_savedpc++].Ax;\n                }\n\n                let h = L.stack[ra].value;\n                let last = ((c - 1) * LFIELDS_PER_FLUSH) + n;\n\n                for (; n > 0; n--) {\n                    ltable.luaH_setint(h, last--, L.stack[ra + n]);\n                }\n                ldo.adjust_top(L, ci.top);  /* correct top (in case of previous open call) */\n                break;\n            }\n            case OP_CLOSURE: {\n                let p = cl.p.p[i.Bx];\n                let ncl = getcached(p, cl.upvals, L.stack, base);  /* cached closure */\n                if (ncl === null)  /* no match? */\n                    pushclosure(L, p, cl.upvals, base, ra);  /* create a new one */\n                else\n                    L.stack[ra].setclLvalue(ncl);\n                break;\n            }\n            case OP_VARARG: {\n                let b = i.B - 1;\n                let n = base - ci.funcOff - cl.p.numparams - 1;\n                let j;\n\n                if (n < 0) /* less arguments than parameters? */\n                    n = 0; /* no vararg arguments */\n\n                if (b < 0) {\n                    b = n;  /* get all var. arguments */\n                    ldo.luaD_checkstack(L, n);\n                    ldo.adjust_top(L, ra + n);\n                }\n\n                for (j = 0; j < b && j < n; j++)\n                    lobject.setobjs2s(L, ra + j, base - n + j);\n\n                for (; j < b; j++) /* complete required results with nil */\n                    L.stack[ra + j].setnilvalue();\n                break;\n            }\n            case OP_EXTRAARG: {\n                throw Error(\"invalid opcode\");\n            }\n        }\n    }\n};\n\nconst dojump = function(L, ci, i, e) {\n    let a = i.A;\n    if (a !== 0) lfunc.luaF_close(L, ci.l_base + a - 1);\n    ci.l_savedpc += i.sBx + e;\n};\n\nconst donextjump = function(L, ci) {\n    dojump(L, ci, ci.l_code[ci.l_savedpc], 1);\n};\n\n\nconst luaV_lessthan = function(L, l, r) {\n    if (l.ttisnumber() && r.ttisnumber())\n        return LTnum(l, r) ? 1 : 0;\n    else if (l.ttisstring() && r.ttisstring())\n        return l_strcmp(l.tsvalue(), r.tsvalue()) < 0 ? 1 : 0;\n    else {\n        let res = ltm.luaT_callorderTM(L, l, r, ltm.TMS.TM_LT);\n        if (res === null)\n            ldebug.luaG_ordererror(L, l, r);\n        return res ? 1 : 0;\n    }\n};\n\nconst luaV_lessequal = function(L, l, r) {\n    let res;\n\n    if (l.ttisnumber() && r.ttisnumber())\n        return LEnum(l, r) ? 1 : 0;\n    else if (l.ttisstring() && r.ttisstring())\n        return l_strcmp(l.tsvalue(), r.tsvalue()) <= 0 ? 1 : 0;\n    else {\n        res = ltm.luaT_callorderTM(L, l, r, ltm.TMS.TM_LE);\n        if (res !== null)\n            return res ? 1 : 0;\n    }\n    /* try 'lt': */\n    L.ci.callstatus |= lstate.CIST_LEQ; /* mark it is doing 'lt' for 'le' */\n    res = ltm.luaT_callorderTM(L, r, l, ltm.TMS.TM_LT);\n    L.ci.callstatus ^= lstate.CIST_LEQ; /* clear mark */\n    if (res === null)\n        ldebug.luaG_ordererror(L, l, r);\n    return res ? 0 : 1; /* result is negated */\n};\n\nconst luaV_equalobj = function(L, t1, t2) {\n    if (t1.ttype() !== t2.ttype()) { /* not the same variant? */\n        if (t1.ttnov() !== t2.ttnov() || t1.ttnov() !== LUA_TNUMBER)\n            return 0; /* only numbers can be equal with different variants */\n        else { /* two numbers with different variants */\n            /* OPTIMIZATION: instead of calling luaV_tointeger we can just let JS do the comparison */\n            return (t1.value === t2.value) ? 1 : 0;\n        }\n    }\n\n    let tm;\n\n    /* values have same type and same variant */\n    switch(t1.ttype()) {\n        case LUA_TNIL:\n            return 1;\n        case LUA_TBOOLEAN:\n            return t1.value == t2.value ? 1 : 0; // Might be 1 or true\n        case LUA_TLIGHTUSERDATA:\n        case LUA_TNUMINT:\n        case LUA_TNUMFLT:\n        case LUA_TLCF:\n            return t1.value === t2.value ? 1 : 0;\n        case LUA_TSHRSTR:\n        case LUA_TLNGSTR: {\n            return luaS_eqlngstr(t1.tsvalue(), t2.tsvalue()) ? 1 : 0;\n        }\n        case LUA_TUSERDATA:\n        case LUA_TTABLE:\n            if (t1.value === t2.value) return 1;\n            else if (L === null) return 0;\n\n            tm = ltm.fasttm(L, t1.value.metatable, ltm.TMS.TM_EQ);\n            if (tm === null)\n                tm = ltm.fasttm(L, t2.value.metatable, ltm.TMS.TM_EQ);\n            break;\n        default:\n            return t1.value === t2.value ? 1 : 0;\n    }\n\n    if (tm === null) /* no TM? */\n        return 0;\n\n    let tv = new lobject.TValue(); /* doesn't use the stack */\n    ltm.luaT_callTM(L, tm, t1, t2, tv, 1);\n    return tv.l_isfalse() ? 0 : 1;\n};\n\nconst luaV_rawequalobj = function(t1, t2) {\n    return luaV_equalobj(null, t1, t2);\n};\n\nconst forlimit = function(obj, step) {\n    let stopnow = false;\n    let ilimit = luaV_tointeger(obj, step < 0 ? 2 : 1);\n    if (ilimit === false) {\n        let n = tonumber(obj);\n        if (n === false)\n            return false;\n\n        if (0 < n) {\n            ilimit = LUA_MAXINTEGER;\n            if (step < 0) stopnow = true;\n        } else {\n            ilimit = LUA_MININTEGER;\n            if (step >= 0) stopnow = true;\n        }\n    }\n\n    return {\n        stopnow: stopnow,\n        ilimit: ilimit\n    };\n};\n\n/*\n** try to convert a value to an integer, rounding according to 'mode':\n** mode === 0: accepts only integral values\n** mode === 1: takes the floor of the number\n** mode === 2: takes the ceil of the number\n*/\nconst luaV_tointeger = function(obj, mode) {\n    if (obj.ttisfloat()) {\n        let n = obj.value;\n        let f = Math.floor(n);\n\n        if (n !== f) { /* not an integral value? */\n            if (mode === 0)\n                return false;  /* fails if mode demands integral value */\n            else if (mode > 1)  /* needs ceil? */\n                f += 1;  /* convert floor to ceil (remember: n !== f) */\n        }\n\n        return lua_numbertointeger(f);\n    } else if (obj.ttisinteger()) {\n        return obj.value;\n    } else if (cvt2num(obj)) {\n        let v = new lobject.TValue();\n        if (lobject.luaO_str2num(obj.svalue(), v) === (obj.vslen() + 1))\n            return luaV_tointeger(v, mode);\n    }\n\n    return false;\n};\n\nconst tointeger = function(o) {\n    return o.ttisinteger() ? o.value : luaV_tointeger(o, 0);\n};\n\nconst tonumber = function(o) {\n    if (o.ttnov() === LUA_TNUMBER)\n        return o.value;\n\n    if (cvt2num(o)) {  /* string convertible to number? */\n        let v = new lobject.TValue();\n        if (lobject.luaO_str2num(o.svalue(), v) === (o.vslen() + 1))\n            return v.value;\n    }\n\n    return false;\n};\n\n/*\n** Return 'l < r', for numbers.\n** As fengari uses javascript numbers for both floats and integers and has\n** correct semantics, we can just compare values.\n*/\nconst LTnum = function(l, r) {\n    return l.value < r.value;\n};\n\n/*\n** Return 'l <= r', for numbers.\n*/\nconst LEnum = function(l, r) {\n    return l.value <= r.value;\n};\n\n/*\n** Compare two strings 'ls' x 'rs', returning an integer smaller-equal-\n** -larger than zero if 'ls' is smaller-equal-larger than 'rs'.\n*/\nconst l_strcmp = function(ls, rs) {\n    let l = luaS_hashlongstr(ls);\n    let r = luaS_hashlongstr(rs);\n    /* In fengari we assume string hash has same collation as byte values */\n    if (l === r)\n        return 0;\n    else if (l < r)\n        return -1;\n    else\n        return 1;\n};\n\n/*\n** Main operation 'ra' = #rb'.\n*/\nconst luaV_objlen = function(L, ra, rb) {\n    let tm;\n    switch(rb.ttype()) {\n        case LUA_TTABLE: {\n            let h = rb.value;\n            tm = ltm.fasttm(L, h.metatable, ltm.TMS.TM_LEN);\n            if (tm !== null) break; /* metamethod? break switch to call it */\n            ra.setivalue(ltable.luaH_getn(h)); /* else primitive len */\n            return;\n        }\n        case LUA_TSHRSTR:\n        case LUA_TLNGSTR:\n            ra.setivalue(rb.vslen());\n            return;\n        default: {\n            tm = ltm.luaT_gettmbyobj(L, rb, ltm.TMS.TM_LEN);\n            if (tm.ttisnil())\n                ldebug.luaG_typeerror(L, rb, to_luastring(\"get length of\", true));\n            break;\n        }\n    }\n\n    ltm.luaT_callTM(L, tm, rb, rb, ra, 1);\n};\n\n/* Shim taken from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/imul */\nconst luaV_imul = Math.imul || function(a, b) {\n    let aHi = (a >>> 16) & 0xffff;\n    let aLo = a & 0xffff;\n    let bHi = (b >>> 16) & 0xffff;\n    let bLo = b & 0xffff;\n    /*\n    ** the shift by 0 fixes the sign on the high part\n    ** the final |0 converts the unsigned value into a signed value\n    */\n    return ((aLo * bLo) + (((aHi * bLo + aLo * bHi) << 16) >>> 0) | 0);\n};\n\nconst luaV_div = function(L, m, n) {\n    if (n === 0)\n        ldebug.luaG_runerror(L, to_luastring(\"attempt to divide by zero\"));\n    return Math.floor(m / n)|0;\n};\n\n// % semantic on negative numbers is different in js\nconst luaV_mod = function(L, m, n) {\n    if (n === 0)\n        ldebug.luaG_runerror(L, to_luastring(\"attempt to perform 'n%%0'\"));\n    return (m - Math.floor(m / n) * n)|0;\n};\n\nconst NBITS = 32;\n\nconst luaV_shiftl = function(x, y) {\n    if (y < 0) {  /* shift right? */\n        if (y <= -NBITS) return 0;\n        else return x >>> -y;\n    }\n    else {  /* shift left */\n        if (y >= NBITS) return 0;\n        else return x << y;\n    }\n};\n\n/*\n** check whether cached closure in prototype 'p' may be reused, that is,\n** whether there is a cached closure with the same upvalues needed by\n** new closure to be created.\n*/\nconst getcached = function(p, encup, stack, base) {\n    let c = p.cache;\n    if (c !== null) {  /* is there a cached closure? */\n        let uv = p.upvalues;\n        let nup = uv.length;\n        for (let i = 0; i < nup; i++) {  /* check whether it has right upvalues */\n            let v = uv[i].instack ? stack[base + uv[i].idx] : encup[uv[i].idx];\n            if (c.upvals[i] !== v)\n                return null;  /* wrong upvalue; cannot reuse closure */\n        }\n    }\n    return c;  /* return cached closure (or NULL if no cached closure) */\n};\n\n/*\n** create a new Lua closure, push it in the stack, and initialize\n** its upvalues.\n*/\nconst pushclosure = function(L, p, encup, base, ra) {\n    let nup = p.upvalues.length;\n    let uv = p.upvalues;\n    let ncl = new lobject.LClosure(L, nup);\n    ncl.p = p;\n    L.stack[ra].setclLvalue(ncl);\n    for (let i = 0; i < nup; i++) {\n        if (uv[i].instack)\n            ncl.upvals[i] = lfunc.luaF_findupval(L, base + uv[i].idx);\n        else\n            ncl.upvals[i] = encup[uv[i].idx];\n    }\n    p.cache = ncl;  /* save it on cache for reuse */\n};\n\nconst cvt2str = function(o) {\n    return o.ttisnumber();\n};\n\nconst cvt2num = function(o) {\n    return o.ttisstring();\n};\n\nconst tostring = function(L, i) {\n    let o = L.stack[i];\n\n    if (o.ttisstring()) return true;\n\n    if (cvt2str(o)) {\n        lobject.luaO_tostring(L, o);\n        return true;\n    }\n\n    return false;\n};\n\nconst isemptystr = function(o) {\n    return o.ttisstring() && o.vslen() === 0;\n};\n\n/* copy strings in stack from top - n up to top - 1 to buffer */\nconst copy2buff = function(L, top, n, buff) {\n    let tl = 0;  /* size already copied */\n    do {\n        let tv = L.stack[top-n];\n        let l = tv.vslen();  /* length of string being copied */\n        let s = tv.svalue();\n        buff.set(s, tl);\n        tl += l;\n    } while (--n > 0);\n};\n\n/*\n** Main operation for concatenation: concat 'total' values in the stack,\n** from 'L->top - total' up to 'L->top - 1'.\n*/\nconst luaV_concat = function(L, total) {\n    lua_assert(total >= 2);\n    do {\n        let top = L.top;\n        let n = 2; /* number of elements handled in this pass (at least 2) */\n\n        if (!(L.stack[top-2].ttisstring() || cvt2str(L.stack[top-2])) || !tostring(L, top - 1)) {\n            ltm.luaT_trybinTM(L, L.stack[top-2], L.stack[top-1], L.stack[top-2], ltm.TMS.TM_CONCAT);\n        } else if (isemptystr(L.stack[top-1])) {\n            tostring(L, top - 2);\n        } else if (isemptystr(L.stack[top-2])) {\n            lobject.setobjs2s(L, top - 2, top - 1);\n        } else {\n            /* at least two non-empty string values; get as many as possible */\n            let tl = L.stack[top-1].vslen();\n            /* collect total length and number of strings */\n            for (n = 1; n < total && tostring(L, top - n - 1); n++) {\n                let l = L.stack[top - n - 1].vslen();\n                tl += l;\n            }\n            let buff = new Uint8Array(tl);\n            copy2buff(L, top, n, buff);\n            let ts = luaS_bless(L, buff);\n            lobject.setsvalue2s(L, top - n, ts);\n        }\n        total -= n - 1; /* got 'n' strings to create 1 new */\n        /* popped 'n' strings and pushed one */\n        for (; L.top > top-(n-1);)\n            delete L.stack[--L.top];\n    } while (total > 1); /* repeat until only 1 result left */\n};\n\nconst MAXTAGLOOP = 2000;\n\nconst luaV_gettable = function(L, t, key, ra) {\n    for (let loop = 0; loop < MAXTAGLOOP; loop++) {\n        let tm;\n\n        if (!t.ttistable()) {\n            tm = ltm.luaT_gettmbyobj(L, t, ltm.TMS.TM_INDEX);\n            if (tm.ttisnil())\n                ldebug.luaG_typeerror(L, t, to_luastring('index', true)); /* no metamethod */\n            /* else will try the metamethod */\n        } else {\n            let slot = ltable.luaH_get(L, t.value, key);\n            if (!slot.ttisnil()) {\n                lobject.setobj2s(L, ra, slot);\n                return;\n            } else { /* 't' is a table */\n                tm = ltm.fasttm(L, t.value.metatable, ltm.TMS.TM_INDEX);  /* table's metamethod */\n                if (tm === null) { /* no metamethod? */\n                    L.stack[ra].setnilvalue(); /* result is nil */\n                    return;\n                }\n            }\n            /* else will try the metamethod */\n        }\n        if (tm.ttisfunction()) { /* is metamethod a function? */\n            ltm.luaT_callTM(L, tm, t, key, L.stack[ra], 1); /* call it */\n            return;\n        }\n        t = tm;  /* else try to access 'tm[key]' */\n    }\n\n    ldebug.luaG_runerror(L, to_luastring(\"'__index' chain too long; possible loop\", true));\n};\n\nconst settable = function(L, t, key, val) {\n    for (let loop = 0; loop < MAXTAGLOOP; loop++) {\n        let tm;\n        if (t.ttistable()) {\n            let h = t.value; /* save 't' table */\n            let slot = ltable.luaH_get(L, h, key);\n            if (!slot.ttisnil() || (tm = ltm.fasttm(L, h.metatable, ltm.TMS.TM_NEWINDEX)) === null) {\n                ltable.luaH_setfrom(L, h, key, val);\n                ltable.invalidateTMcache(h);\n                return;\n            }\n            /* else will try the metamethod */\n        } else { /* not a table; check metamethod */\n            if ((tm = ltm.luaT_gettmbyobj(L, t, ltm.TMS.TM_NEWINDEX)).ttisnil())\n                ldebug.luaG_typeerror(L, t, to_luastring('index', true));\n        }\n        /* try the metamethod */\n        if (tm.ttisfunction()) {\n            ltm.luaT_callTM(L, tm, t, key, val, 0);\n            return;\n        }\n        t = tm;  /* else repeat assignment over 'tm' */\n    }\n\n    ldebug.luaG_runerror(L, to_luastring(\"'__newindex' chain too long; possible loop\", true));\n};\n\n\nmodule.exports.cvt2str          = cvt2str;\nmodule.exports.cvt2num          = cvt2num;\nmodule.exports.luaV_gettable    = luaV_gettable;\nmodule.exports.luaV_concat      = luaV_concat;\nmodule.exports.luaV_div         = luaV_div;\nmodule.exports.luaV_equalobj    = luaV_equalobj;\nmodule.exports.luaV_execute     = luaV_execute;\nmodule.exports.luaV_finishOp    = luaV_finishOp;\nmodule.exports.luaV_imul        = luaV_imul;\nmodule.exports.luaV_lessequal   = luaV_lessequal;\nmodule.exports.luaV_lessthan    = luaV_lessthan;\nmodule.exports.luaV_mod         = luaV_mod;\nmodule.exports.luaV_objlen      = luaV_objlen;\nmodule.exports.luaV_rawequalobj = luaV_rawequalobj;\nmodule.exports.luaV_shiftl      = luaV_shiftl;\nmodule.exports.luaV_tointeger   = luaV_tointeger;\nmodule.exports.settable         = settable;\nmodule.exports.tointeger        = tointeger;\nmodule.exports.tonumber         = tonumber;\n","\"use strict\";\n\nconst { lua_assert } = require(\"./llimits.js\");\n\nclass MBuffer {\n    constructor() {\n        this.buffer = null;\n        this.n = 0;\n    }\n}\n\nconst luaZ_buffer = function(buff) {\n    return buff.buffer.subarray(0, buff.n);\n};\n\nconst luaZ_buffremove = function(buff, i) {\n    buff.n -= i;\n};\n\nconst luaZ_resetbuffer = function(buff) {\n    buff.n = 0;\n};\n\nconst luaZ_resizebuffer = function(L, buff, size) {\n    let newbuff = new Uint8Array(size);\n    if (buff.buffer)\n        newbuff.set(buff.buffer);\n    buff.buffer = newbuff;\n};\n\nclass ZIO {\n    constructor(L, reader, data) {\n        this.L = L;           /* Lua state (for reader) */\n        lua_assert(typeof reader == \"function\", \"ZIO requires a reader\");\n        this.reader = reader; /* reader function */\n        this.data = data;     /* additional data */\n        this.n = 0;           /* bytes still unread */\n        this.buffer = null;\n        this.off = 0;         /* current position in buffer */\n    }\n\n    zgetc () {\n        return ((this.n--) > 0) ? this.buffer[this.off++] : luaZ_fill(this);\n    }\n}\n\nconst EOZ = -1;\n\nconst luaZ_fill = function(z) {\n    let buff = z.reader(z.L, z.data);\n    if (buff === null)\n        return EOZ;\n    lua_assert(buff instanceof Uint8Array, \"Should only load binary of array of bytes\");\n    let size = buff.length;\n    if (size === 0)\n        return EOZ;\n    z.buffer = buff;\n    z.off = 0;\n    z.n = size - 1;\n    return z.buffer[z.off++];\n};\n\n/* b should be an array-like that will be set to bytes\n * b_offset is the offset at which to start filling */\nconst luaZ_read = function(z, b, b_offset, n) {\n    while (n) {\n        if (z.n === 0) { /* no bytes in buffer? */\n            if (luaZ_fill(z) === EOZ)\n                return n; /* no more input; return number of missing bytes */\n            else {\n                z.n++;  /* luaZ_fill consumed first byte; put it back */\n                z.off--;\n            }\n        }\n        let m = (n <= z.n) ? n : z.n; /* min. between n and z->n */\n        for (let i=0; i<m; i++) {\n            b[b_offset++] = z.buffer[z.off++];\n        }\n        z.n -= m;\n        if (z.n === 0) // remove reference to input so it can get freed\n            z.buffer = null;\n        n -= m;\n    }\n\n    return 0;\n};\n\nmodule.exports.EOZ               = EOZ;\nmodule.exports.luaZ_buffer       = luaZ_buffer;\nmodule.exports.luaZ_buffremove   = luaZ_buffremove;\nmodule.exports.luaZ_fill         = luaZ_fill;\nmodule.exports.luaZ_read         = luaZ_read;\nmodule.exports.luaZ_resetbuffer  = luaZ_resetbuffer;\nmodule.exports.luaZ_resizebuffer = luaZ_resizebuffer;\nmodule.exports.MBuffer           = MBuffer;\nmodule.exports.ZIO               = ZIO;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export const version = '5.12.0';\r\n","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\r\n * 2x2 Matrix\r\n * @module mat2\r\n */\n\n/**\r\n * Creates a new identity mat2\r\n *\r\n * @returns {mat2} a new 2x2 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[0] = 1;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat2 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat2} a matrix to clone\r\n * @returns {mat2} a new 2x2 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Copy the values from one mat2 to another\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the source matrix\r\n * @returns {mat2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set a mat2 to the identity matrix\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @returns {mat2} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Create a new mat2 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\r\n * @returns {mat2} out A new 2x2 matrix\r\n */\n\nexport function fromValues(m00, m01, m10, m11) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m10;\n  out[3] = m11;\n  return out;\n}\n/**\r\n * Set the components of a mat2 to the given values\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\r\n * @returns {mat2} out\r\n */\n\nexport function set(out, m00, m01, m10, m11) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m10;\n  out[3] = m11;\n  return out;\n}\n/**\r\n * Transpose the values of a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the source matrix\r\n * @returns {mat2} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache\n  // some values\n  if (out === a) {\n    var a1 = a[1];\n    out[1] = a[2];\n    out[2] = a1;\n  } else {\n    out[0] = a[0];\n    out[1] = a[2];\n    out[2] = a[1];\n    out[3] = a[3];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the source matrix\r\n * @returns {mat2} out\r\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3]; // Calculate the determinant\n\n  var det = a0 * a3 - a2 * a1;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = a3 * det;\n  out[1] = -a1 * det;\n  out[2] = -a2 * det;\n  out[3] = a0 * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the source matrix\r\n * @returns {mat2} out\r\n */\n\nexport function adjoint(out, a) {\n  // Caching this value is nessecary if out == a\n  var a0 = a[0];\n  out[0] = a[3];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a0;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat2\r\n *\r\n * @param {ReadonlyMat2} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  return a[0] * a[3] - a[2] * a[1];\n}\n/**\r\n * Multiplies two mat2's\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the first operand\r\n * @param {ReadonlyMat2} b the second operand\r\n * @returns {mat2} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = a0 * b0 + a2 * b1;\n  out[1] = a1 * b0 + a3 * b1;\n  out[2] = a0 * b2 + a2 * b3;\n  out[3] = a1 * b2 + a3 * b3;\n  return out;\n}\n/**\r\n * Rotates a mat2 by the given angle\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  out[0] = a0 * c + a2 * s;\n  out[1] = a1 * c + a3 * s;\n  out[2] = a0 * -s + a2 * c;\n  out[3] = a1 * -s + a3 * c;\n  return out;\n}\n/**\r\n * Scales the mat2 by the dimensions in the given vec2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the matrix to rotate\r\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\r\n * @returns {mat2} out\r\n **/\n\nexport function scale(out, a, v) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var v0 = v[0],\n      v1 = v[1];\n  out[0] = a0 * v0;\n  out[1] = a1 * v0;\n  out[2] = a2 * v1;\n  out[3] = a3 * v1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2.identity(dest);\r\n *     mat2.rotate(dest, dest, rad);\r\n *\r\n * @param {mat2} out mat2 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = -s;\n  out[3] = c;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2.identity(dest);\r\n *     mat2.scale(dest, dest, vec);\r\n *\r\n * @param {mat2} out mat2 receiving operation result\r\n * @param {ReadonlyVec2} v Scaling vector\r\n * @returns {mat2} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = v[1];\n  return out;\n}\n/**\r\n * Returns a string representation of a mat2\r\n *\r\n * @param {ReadonlyMat2} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat2(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat2\r\n *\r\n * @param {ReadonlyMat2} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3]);\n}\n/**\r\n * Returns L, D and U matrices (Lower triangular, Diagonal and Upper triangular) by factorizing the input matrix\r\n * @param {ReadonlyMat2} L the lower triangular matrix\r\n * @param {ReadonlyMat2} D the diagonal matrix\r\n * @param {ReadonlyMat2} U the upper triangular matrix\r\n * @param {ReadonlyMat2} a the input matrix to factorize\r\n */\n\nexport function LDU(L, D, U, a) {\n  L[2] = a[2] / a[0];\n  U[0] = a[0];\n  U[1] = a[1];\n  U[3] = a[3] - L[2] * U[1];\n  return [L, D, U];\n}\n/**\r\n * Adds two mat2's\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the first operand\r\n * @param {ReadonlyMat2} b the second operand\r\n * @returns {mat2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the first operand\r\n * @param {ReadonlyMat2} b the second operand\r\n * @returns {mat2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat2} a The first matrix.\r\n * @param {ReadonlyMat2} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat2} a The first matrix.\r\n * @param {ReadonlyMat2} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat2} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two mat2's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat2} out the receiving vector\r\n * @param {ReadonlyMat2} a the first operand\r\n * @param {ReadonlyMat2} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat2} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Alias for {@link mat2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 2x3 Matrix\r\n * @module mat2d\r\n * @description\r\n * A mat2d contains six elements defined as:\r\n * <pre>\r\n * [a, b,\r\n *  c, d,\r\n *  tx, ty]\r\n * </pre>\r\n * This is a short form for the 3x3 matrix:\r\n * <pre>\r\n * [a, b, 0,\r\n *  c, d, 0,\r\n *  tx, ty, 1]\r\n * </pre>\r\n * The last column is ignored so the array is shorter and operations are faster.\r\n */\n\n/**\r\n * Creates a new identity mat2d\r\n *\r\n * @returns {mat2d} a new 2x3 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(6);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[4] = 0;\n    out[5] = 0;\n  }\n\n  out[0] = 1;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat2d initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat2d} a matrix to clone\r\n * @returns {mat2d} a new 2x3 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(6);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  return out;\n}\n/**\r\n * Copy the values from one mat2d to another\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the source matrix\r\n * @returns {mat2d} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  return out;\n}\n/**\r\n * Set a mat2d to the identity matrix\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @returns {mat2d} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\r\n * Create a new mat2d with the given values\r\n *\r\n * @param {Number} a Component A (index 0)\r\n * @param {Number} b Component B (index 1)\r\n * @param {Number} c Component C (index 2)\r\n * @param {Number} d Component D (index 3)\r\n * @param {Number} tx Component TX (index 4)\r\n * @param {Number} ty Component TY (index 5)\r\n * @returns {mat2d} A new mat2d\r\n */\n\nexport function fromValues(a, b, c, d, tx, ty) {\n  var out = new glMatrix.ARRAY_TYPE(6);\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  out[4] = tx;\n  out[5] = ty;\n  return out;\n}\n/**\r\n * Set the components of a mat2d to the given values\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {Number} a Component A (index 0)\r\n * @param {Number} b Component B (index 1)\r\n * @param {Number} c Component C (index 2)\r\n * @param {Number} d Component D (index 3)\r\n * @param {Number} tx Component TX (index 4)\r\n * @param {Number} ty Component TY (index 5)\r\n * @returns {mat2d} out\r\n */\n\nexport function set(out, a, b, c, d, tx, ty) {\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  out[4] = tx;\n  out[5] = ty;\n  return out;\n}\n/**\r\n * Inverts a mat2d\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the source matrix\r\n * @returns {mat2d} out\r\n */\n\nexport function invert(out, a) {\n  var aa = a[0],\n      ab = a[1],\n      ac = a[2],\n      ad = a[3];\n  var atx = a[4],\n      aty = a[5];\n  var det = aa * ad - ab * ac;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = ad * det;\n  out[1] = -ab * det;\n  out[2] = -ac * det;\n  out[3] = aa * det;\n  out[4] = (ac * aty - ad * atx) * det;\n  out[5] = (ab * atx - aa * aty) * det;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat2d\r\n *\r\n * @param {ReadonlyMat2d} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  return a[0] * a[3] - a[1] * a[2];\n}\n/**\r\n * Multiplies two mat2d's\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the first operand\r\n * @param {ReadonlyMat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5];\n  out[0] = a0 * b0 + a2 * b1;\n  out[1] = a1 * b0 + a3 * b1;\n  out[2] = a0 * b2 + a2 * b3;\n  out[3] = a1 * b2 + a3 * b3;\n  out[4] = a0 * b4 + a2 * b5 + a4;\n  out[5] = a1 * b4 + a3 * b5 + a5;\n  return out;\n}\n/**\r\n * Rotates a mat2d by the given angle\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2d} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  out[0] = a0 * c + a2 * s;\n  out[1] = a1 * c + a3 * s;\n  out[2] = a0 * -s + a2 * c;\n  out[3] = a1 * -s + a3 * c;\n  out[4] = a4;\n  out[5] = a5;\n  return out;\n}\n/**\r\n * Scales the mat2d by the dimensions in the given vec2\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the matrix to translate\r\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\r\n * @returns {mat2d} out\r\n **/\n\nexport function scale(out, a, v) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var v0 = v[0],\n      v1 = v[1];\n  out[0] = a0 * v0;\n  out[1] = a1 * v0;\n  out[2] = a2 * v1;\n  out[3] = a3 * v1;\n  out[4] = a4;\n  out[5] = a5;\n  return out;\n}\n/**\r\n * Translates the mat2d by the dimensions in the given vec2\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the matrix to translate\r\n * @param {ReadonlyVec2} v the vec2 to translate the matrix by\r\n * @returns {mat2d} out\r\n **/\n\nexport function translate(out, a, v) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var v0 = v[0],\n      v1 = v[1];\n  out[0] = a0;\n  out[1] = a1;\n  out[2] = a2;\n  out[3] = a3;\n  out[4] = a0 * v0 + a2 * v1 + a4;\n  out[5] = a1 * v0 + a3 * v1 + a5;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.rotate(dest, dest, rad);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2d} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = -s;\n  out[3] = c;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.scale(dest, dest, vec);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {ReadonlyVec2} v Scaling vector\r\n * @returns {mat2d} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = v[1];\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.translate(dest, dest, vec);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {ReadonlyVec2} v Translation vector\r\n * @returns {mat2d} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = v[0];\n  out[5] = v[1];\n  return out;\n}\n/**\r\n * Returns a string representation of a mat2d\r\n *\r\n * @param {ReadonlyMat2d} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat2d(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat2d\r\n *\r\n * @param {ReadonlyMat2d} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], 1);\n}\n/**\r\n * Adds two mat2d's\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the first operand\r\n * @param {ReadonlyMat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the first operand\r\n * @param {ReadonlyMat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat2d} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  return out;\n}\n/**\r\n * Adds two mat2d's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat2d} out the receiving vector\r\n * @param {ReadonlyMat2d} a the first operand\r\n * @param {ReadonlyMat2d} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat2d} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat2d} a The first matrix.\r\n * @param {ReadonlyMat2d} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat2d} a The first matrix.\r\n * @param {ReadonlyMat2d} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5));\n}\n/**\r\n * Alias for {@link mat2d.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat2d.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 3x3 Matrix\r\n * @module mat3\r\n */\n\n/**\r\n * Creates a new identity mat3\r\n *\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the upper-left 3x3 values into the given mat3.\r\n *\r\n * @param {mat3} out the receiving 3x3 matrix\r\n * @param {ReadonlyMat4} a   the source 4x4 matrix\r\n * @returns {mat3} out\r\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\r\n * Creates a new mat3 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat3} a matrix to clone\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Copy the values from one mat3 to another\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Create a new mat3 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} A new mat3\r\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set the components of a mat3 to the given values\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} out\r\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set a mat3 to the identity matrix\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @returns {mat3} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat3\r\n *\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\r\n * Multiplies two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\r\n * Translate a mat3 by the given vector\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to translate\r\n * @param {ReadonlyVec2} v vector to translate by\r\n * @returns {mat3} out\r\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\r\n * Rotates a mat3 by the given angle\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\r\n * Scales the mat3 by the dimensions in the given vec2\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to rotate\r\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\r\n * @returns {mat3} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.translate(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyVec2} v Translation vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.rotate(dest, dest, rad);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.scale(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyVec2} v Scaling vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the values from a mat2d into a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the matrix to copy\r\n * @returns {mat3} out\r\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Calculates a 3x3 matrix from the given quaternion\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat3} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\r\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\r\n *\r\n * @returns {mat3} out\r\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\r\n * Generates a 2D projection matrix with the given bounds\r\n *\r\n * @param {mat3} out mat3 frustum matrix will be written into\r\n * @param {number} width Width of your gl context\r\n * @param {number} height Height of gl context\r\n * @returns {mat3} out\r\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat3\r\n *\r\n * @param {ReadonlyMat3} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat3\r\n *\r\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\r\n * Adds two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\r\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat3} out the receiving vector\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat3} a The first matrix.\r\n * @param {ReadonlyMat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat3} a The first matrix.\r\n * @param {ReadonlyMat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\r\n * Alias for {@link mat3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {ReadonlyQuat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {ReadonlyMat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {ReadonlyVec3} a The first operand\r\n * @param {ReadonlyVec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {ReadonlyVec4} result the receiving vector\r\n * @param {ReadonlyVec4} U the first vector\r\n * @param {ReadonlyVec4} V the second vector\r\n * @param {ReadonlyVec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\r\n * Quaternion\r\n * @module quat\r\n */\n\n/**\r\n * Creates a new identity quat\r\n *\r\n * @returns {quat} a new quaternion\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Set a quat to the identity quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Sets a quat from the given angle and rotation axis,\r\n * then returns it.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyVec3} axis the axis around which to rotate\r\n * @param {Number} rad the angle in radians\r\n * @returns {quat} out\r\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\r\n * Gets the rotation axis and angle for a given\r\n *  quaternion. If a quaternion is created with\r\n *  setAxisAngle, this method will return the same\r\n *  values as providied in the original parameter list\r\n *  OR functionally equivalent values.\r\n * Example: The quaternion formed by axis [0, 0, 1] and\r\n *  angle -90 is the same as the quaternion formed by\r\n *  [0, 0, 1] and 270. This method favors the latter.\r\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\r\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\r\n * @return {Number}     Angle, in radians, of the rotation\r\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\r\n * Gets the angular distance between two unit quaternions\r\n *\r\n * @param  {ReadonlyQuat} a     Origin unit quaternion\r\n * @param  {ReadonlyQuat} b     Destination unit quaternion\r\n * @return {Number}     Angle, in radians, between the two quaternions\r\n */\n\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n/**\r\n * Multiplies two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @returns {quat} out\r\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the X axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {ReadonlyQuat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Y axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {ReadonlyQuat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Z axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {ReadonlyQuat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\r\n * Calculates the W component of a quat from the X, Y, and Z components.\r\n * Assumes that quaternion is 1 unit in length.\r\n * Any existing W component will be ignored.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate W component of\r\n * @returns {quat} out\r\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\r\n * Calculate the exponential of a unit quaternion.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate the exponential of\r\n * @returns {quat} out\r\n */\n\nexport function exp(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n/**\r\n * Calculate the natural logarithm of a unit quaternion.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate the exponential of\r\n * @returns {quat} out\r\n */\n\nexport function ln(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n/**\r\n * Calculate the scalar power of a unit quaternion.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate the exponential of\r\n * @param {Number} b amount to scale the quaternion by\r\n * @returns {quat} out\r\n */\n\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n/**\r\n * Performs a spherical linear interpolation between two quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\r\n * Generates a random unit quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\r\n * Calculates the inverse of a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate inverse of\r\n * @returns {quat} out\r\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\r\n * Calculates the conjugate of a quat\r\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate conjugate of\r\n * @returns {quat} out\r\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a quaternion from the given 3x3 rotation matrix.\r\n *\r\n * NOTE: The resultant quaternion is not normalized, so you should be sure\r\n * to renormalize the quaternion yourself where necessary.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyMat3} m rotation matrix\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\r\n * Creates a quaternion from the given euler angle x, y, z.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {x} Angle to rotate around X axis in degrees.\r\n * @param {y} Angle to rotate around Y axis in degrees.\r\n * @param {z} Angle to rotate around Z axis in degrees.\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\r\n * Returns a string representation of a quatenion\r\n *\r\n * @param {ReadonlyQuat} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {ReadonlyQuat} a quaternion to clone\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var clone = vec4.clone;\n/**\r\n * Creates a new quat initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var fromValues = vec4.fromValues;\n/**\r\n * Copy the values from one quat to another\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the source quaternion\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var copy = vec4.copy;\n/**\r\n * Set the components of a quat to the given values\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var set = vec4.set;\n/**\r\n * Adds two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var add = vec4.add;\n/**\r\n * Alias for {@link quat.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Scales a quat by a scalar number\r\n *\r\n * @param {quat} out the receiving vector\r\n * @param {ReadonlyQuat} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var scale = vec4.scale;\n/**\r\n * Calculates the dot product of two quat's\r\n *\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\n\nexport var dot = vec4.dot;\n/**\r\n * Performs a linear interpolation between two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var lerp = vec4.lerp;\n/**\r\n * Calculates the length of a quat\r\n *\r\n * @param {ReadonlyQuat} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport var length = vec4.length;\n/**\r\n * Alias for {@link quat.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Calculates the squared length of a quat\r\n *\r\n * @param {ReadonlyQuat} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\r\n * Alias for {@link quat.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Normalize a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quaternion to normalize\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var normalize = vec4.normalize;\n/**\r\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyQuat} a The first quaternion.\r\n * @param {ReadonlyQuat} b The second quaternion.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\r\n * Returns whether or not the quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyQuat} a The first vector.\r\n * @param {ReadonlyQuat} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var equals = vec4.equals;\n/**\r\n * Sets a quaternion to represent the shortest rotation from one\r\n * vector to another.\r\n *\r\n * Both vectors are assumed to be unit length.\r\n *\r\n * @param {quat} out the receiving quaternion.\r\n * @param {ReadonlyVec3} a the initial vector\r\n * @param {ReadonlyVec3} b the destination vector\r\n * @returns {quat} out\r\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\r\n * Performs a spherical linear interpolation with two control points\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @param {ReadonlyQuat} c the third operand\r\n * @param {ReadonlyQuat} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\r\n * Sets the specified quaternion with values corresponding to the given\r\n * axes. Each axis is a vec3 and is expected to be unit length and\r\n * perpendicular to all other specified axes.\r\n *\r\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\r\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\r\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\r\n * @returns {quat} out\r\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as quat from \"./quat.js\";\nimport * as mat4 from \"./mat4.js\";\n/**\r\n * Dual Quaternion<br>\r\n * Format: [real, dual]<br>\r\n * Quaternion format: XYZW<br>\r\n * Make sure to have normalized dual quaternions, otherwise the functions may not work as intended.<br>\r\n * @module quat2\r\n */\n\n/**\r\n * Creates a new identity dual quat\r\n *\r\n * @returns {quat2} a new dual quaternion [real -> rotation, dual -> translation]\r\n */\n\nexport function create() {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    dq[0] = 0;\n    dq[1] = 0;\n    dq[2] = 0;\n    dq[4] = 0;\n    dq[5] = 0;\n    dq[6] = 0;\n    dq[7] = 0;\n  }\n\n  dq[3] = 1;\n  return dq;\n}\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {ReadonlyQuat2} a dual quaternion to clone\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\n\nexport function clone(a) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = a[0];\n  dq[1] = a[1];\n  dq[2] = a[2];\n  dq[3] = a[3];\n  dq[4] = a[4];\n  dq[5] = a[5];\n  dq[6] = a[6];\n  dq[7] = a[7];\n  return dq;\n}\n/**\r\n * Creates a new dual quat initialized with the given values\r\n *\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component\r\n * @param {Number} y2 Y component\r\n * @param {Number} z2 Z component\r\n * @param {Number} w2 W component\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\n\nexport function fromValues(x1, y1, z1, w1, x2, y2, z2, w2) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = x1;\n  dq[1] = y1;\n  dq[2] = z1;\n  dq[3] = w1;\n  dq[4] = x2;\n  dq[5] = y2;\n  dq[6] = z2;\n  dq[7] = w2;\n  return dq;\n}\n/**\r\n * Creates a new dual quat from the given values (quat and translation)\r\n *\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component (translation)\r\n * @param {Number} y2 Y component (translation)\r\n * @param {Number} z2 Z component (translation)\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\n\nexport function fromRotationTranslationValues(x1, y1, z1, w1, x2, y2, z2) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = x1;\n  dq[1] = y1;\n  dq[2] = z1;\n  dq[3] = w1;\n  var ax = x2 * 0.5,\n      ay = y2 * 0.5,\n      az = z2 * 0.5;\n  dq[4] = ax * w1 + ay * z1 - az * y1;\n  dq[5] = ay * w1 + az * x1 - ax * z1;\n  dq[6] = az * w1 + ax * y1 - ay * x1;\n  dq[7] = -ax * x1 - ay * y1 - az * z1;\n  return dq;\n}\n/**\r\n * Creates a dual quat from a quaternion and a translation\r\n *\r\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\r\n * @param {ReadonlyQuat} q a normalized quaternion\r\n * @param {ReadonlyVec3} t tranlation vector\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\n\nexport function fromRotationTranslation(out, q, t) {\n  var ax = t[0] * 0.5,\n      ay = t[1] * 0.5,\n      az = t[2] * 0.5,\n      bx = q[0],\n      by = q[1],\n      bz = q[2],\n      bw = q[3];\n  out[0] = bx;\n  out[1] = by;\n  out[2] = bz;\n  out[3] = bw;\n  out[4] = ax * bw + ay * bz - az * by;\n  out[5] = ay * bw + az * bx - ax * bz;\n  out[6] = az * bw + ax * by - ay * bx;\n  out[7] = -ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\r\n * Creates a dual quat from a translation\r\n *\r\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\r\n * @param {ReadonlyVec3} t translation vector\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\n\nexport function fromTranslation(out, t) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = t[0] * 0.5;\n  out[5] = t[1] * 0.5;\n  out[6] = t[2] * 0.5;\n  out[7] = 0;\n  return out;\n}\n/**\r\n * Creates a dual quat from a quaternion\r\n *\r\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\r\n * @param {ReadonlyQuat} q the quaternion\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\n\nexport function fromRotation(out, q) {\n  out[0] = q[0];\n  out[1] = q[1];\n  out[2] = q[2];\n  out[3] = q[3];\n  out[4] = 0;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  return out;\n}\n/**\r\n * Creates a new dual quat from a matrix (4x4)\r\n *\r\n * @param {quat2} out the dual quaternion\r\n * @param {ReadonlyMat4} a the matrix\r\n * @returns {quat2} dual quat receiving operation result\r\n * @function\r\n */\n\nexport function fromMat4(out, a) {\n  //TODO Optimize this\n  var outer = quat.create();\n  mat4.getRotation(outer, a);\n  var t = new glMatrix.ARRAY_TYPE(3);\n  mat4.getTranslation(t, a);\n  fromRotationTranslation(out, outer, t);\n  return out;\n}\n/**\r\n * Copy the values from one dual quat to another\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the source dual quaternion\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  return out;\n}\n/**\r\n * Set a dual quat to the identity dual quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @returns {quat2} out\r\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  return out;\n}\n/**\r\n * Set the components of a dual quat to the given values\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component\r\n * @param {Number} y2 Y component\r\n * @param {Number} z2 Z component\r\n * @param {Number} w2 W component\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function set(out, x1, y1, z1, w1, x2, y2, z2, w2) {\n  out[0] = x1;\n  out[1] = y1;\n  out[2] = z1;\n  out[3] = w1;\n  out[4] = x2;\n  out[5] = y2;\n  out[6] = z2;\n  out[7] = w2;\n  return out;\n}\n/**\r\n * Gets the real part of a dual quat\r\n * @param  {quat} out real part\r\n * @param  {ReadonlyQuat2} a Dual Quaternion\r\n * @return {quat} real part\r\n */\n\nexport var getReal = quat.copy;\n/**\r\n * Gets the dual part of a dual quat\r\n * @param  {quat} out dual part\r\n * @param  {ReadonlyQuat2} a Dual Quaternion\r\n * @return {quat} dual part\r\n */\n\nexport function getDual(out, a) {\n  out[0] = a[4];\n  out[1] = a[5];\n  out[2] = a[6];\n  out[3] = a[7];\n  return out;\n}\n/**\r\n * Set the real component of a dual quat to the given quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {ReadonlyQuat} q a quaternion representing the real part\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport var setReal = quat.copy;\n/**\r\n * Set the dual component of a dual quat to the given quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {ReadonlyQuat} q a quaternion representing the dual part\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function setDual(out, q) {\n  out[4] = q[0];\n  out[5] = q[1];\n  out[6] = q[2];\n  out[7] = q[3];\n  return out;\n}\n/**\r\n * Gets the translation of a normalized dual quat\r\n * @param  {vec3} out translation\r\n * @param  {ReadonlyQuat2} a Dual Quaternion to be decomposed\r\n * @return {vec3} translation\r\n */\n\nexport function getTranslation(out, a) {\n  var ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3];\n  out[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n  out[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n  out[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  return out;\n}\n/**\r\n * Translates a dual quat by the given vector\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the dual quaternion to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {quat2} out\r\n */\n\nexport function translate(out, a, v) {\n  var ax1 = a[0],\n      ay1 = a[1],\n      az1 = a[2],\n      aw1 = a[3],\n      bx1 = v[0] * 0.5,\n      by1 = v[1] * 0.5,\n      bz1 = v[2] * 0.5,\n      ax2 = a[4],\n      ay2 = a[5],\n      az2 = a[6],\n      aw2 = a[7];\n  out[0] = ax1;\n  out[1] = ay1;\n  out[2] = az1;\n  out[3] = aw1;\n  out[4] = aw1 * bx1 + ay1 * bz1 - az1 * by1 + ax2;\n  out[5] = aw1 * by1 + az1 * bx1 - ax1 * bz1 + ay2;\n  out[6] = aw1 * bz1 + ax1 * by1 - ay1 * bx1 + az2;\n  out[7] = -ax1 * bx1 - ay1 * by1 - az1 * bz1 + aw2;\n  return out;\n}\n/**\r\n * Rotates a dual quat around the X axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateX(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\r\n * Rotates a dual quat around the Y axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateY(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\r\n * Rotates a dual quat around the Z axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateZ(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\r\n * Rotates a dual quat by a given quaternion (a * q)\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\r\n * @param {ReadonlyQuat} q quaternion to rotate by\r\n * @returns {quat2} out\r\n */\n\nexport function rotateByQuatAppend(out, a, q) {\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3],\n      ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  out[0] = ax * qw + aw * qx + ay * qz - az * qy;\n  out[1] = ay * qw + aw * qy + az * qx - ax * qz;\n  out[2] = az * qw + aw * qz + ax * qy - ay * qx;\n  out[3] = aw * qw - ax * qx - ay * qy - az * qz;\n  ax = a[4];\n  ay = a[5];\n  az = a[6];\n  aw = a[7];\n  out[4] = ax * qw + aw * qx + ay * qz - az * qy;\n  out[5] = ay * qw + aw * qy + az * qx - ax * qz;\n  out[6] = az * qw + aw * qz + ax * qy - ay * qx;\n  out[7] = aw * qw - ax * qx - ay * qy - az * qz;\n  return out;\n}\n/**\r\n * Rotates a dual quat by a given quaternion (q * a)\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat} q quaternion to rotate by\r\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\r\n * @returns {quat2} out\r\n */\n\nexport function rotateByQuatPrepend(out, q, a) {\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3],\n      bx = a[0],\n      by = a[1],\n      bz = a[2],\n      bw = a[3];\n  out[0] = qx * bw + qw * bx + qy * bz - qz * by;\n  out[1] = qy * bw + qw * by + qz * bx - qx * bz;\n  out[2] = qz * bw + qw * bz + qx * by - qy * bx;\n  out[3] = qw * bw - qx * bx - qy * by - qz * bz;\n  bx = a[4];\n  by = a[5];\n  bz = a[6];\n  bw = a[7];\n  out[4] = qx * bw + qw * bx + qy * bz - qz * by;\n  out[5] = qy * bw + qw * by + qz * bx - qx * bz;\n  out[6] = qz * bw + qw * bz + qx * by - qy * bx;\n  out[7] = qw * bw - qx * bx - qy * by - qz * bz;\n  return out;\n}\n/**\r\n * Rotates a dual quat around a given axis. Does the normalisation automatically\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @param {Number} rad how far the rotation should be\r\n * @returns {quat2} out\r\n */\n\nexport function rotateAroundAxis(out, a, axis, rad) {\n  //Special case for rad = 0\n  if (Math.abs(rad) < glMatrix.EPSILON) {\n    return copy(out, a);\n  }\n\n  var axisLength = Math.hypot(axis[0], axis[1], axis[2]);\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  var bx = s * axis[0] / axisLength;\n  var by = s * axis[1] / axisLength;\n  var bz = s * axis[2] / axisLength;\n  var bw = Math.cos(rad);\n  var ax1 = a[0],\n      ay1 = a[1],\n      az1 = a[2],\n      aw1 = a[3];\n  out[0] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[1] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[2] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[3] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  var ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  out[4] = ax * bw + aw * bx + ay * bz - az * by;\n  out[5] = ay * bw + aw * by + az * bx - ax * bz;\n  out[6] = az * bw + aw * bz + ax * by - ay * bx;\n  out[7] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\r\n * Adds two dual quat's\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the first operand\r\n * @param {ReadonlyQuat2} b the second operand\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  return out;\n}\n/**\r\n * Multiplies two dual quat's\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the first operand\r\n * @param {ReadonlyQuat2} b the second operand\r\n * @returns {quat2} out\r\n */\n\nexport function multiply(out, a, b) {\n  var ax0 = a[0],\n      ay0 = a[1],\n      az0 = a[2],\n      aw0 = a[3],\n      bx1 = b[4],\n      by1 = b[5],\n      bz1 = b[6],\n      bw1 = b[7],\n      ax1 = a[4],\n      ay1 = a[5],\n      az1 = a[6],\n      aw1 = a[7],\n      bx0 = b[0],\n      by0 = b[1],\n      bz0 = b[2],\n      bw0 = b[3];\n  out[0] = ax0 * bw0 + aw0 * bx0 + ay0 * bz0 - az0 * by0;\n  out[1] = ay0 * bw0 + aw0 * by0 + az0 * bx0 - ax0 * bz0;\n  out[2] = az0 * bw0 + aw0 * bz0 + ax0 * by0 - ay0 * bx0;\n  out[3] = aw0 * bw0 - ax0 * bx0 - ay0 * by0 - az0 * bz0;\n  out[4] = ax0 * bw1 + aw0 * bx1 + ay0 * bz1 - az0 * by1 + ax1 * bw0 + aw1 * bx0 + ay1 * bz0 - az1 * by0;\n  out[5] = ay0 * bw1 + aw0 * by1 + az0 * bx1 - ax0 * bz1 + ay1 * bw0 + aw1 * by0 + az1 * bx0 - ax1 * bz0;\n  out[6] = az0 * bw1 + aw0 * bz1 + ax0 * by1 - ay0 * bx1 + az1 * bw0 + aw1 * bz0 + ax1 * by0 - ay1 * bx0;\n  out[7] = aw0 * bw1 - ax0 * bx1 - ay0 * by1 - az0 * bz1 + aw1 * bw0 - ax1 * bx0 - ay1 * by0 - az1 * bz0;\n  return out;\n}\n/**\r\n * Alias for {@link quat2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Scales a dual quat by a scalar number\r\n *\r\n * @param {quat2} out the receiving dual quat\r\n * @param {ReadonlyQuat2} a the dual quat to scale\r\n * @param {Number} b amount to scale the dual quat by\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  return out;\n}\n/**\r\n * Calculates the dot product of two dual quat's (The dot product of the real parts)\r\n *\r\n * @param {ReadonlyQuat2} a the first operand\r\n * @param {ReadonlyQuat2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\n\nexport var dot = quat.dot;\n/**\r\n * Performs a linear interpolation between two dual quats's\r\n * NOTE: The resulting dual quaternions won't always be normalized (The error is most noticeable when t = 0.5)\r\n *\r\n * @param {quat2} out the receiving dual quat\r\n * @param {ReadonlyQuat2} a the first operand\r\n * @param {ReadonlyQuat2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var mt = 1 - t;\n  if (dot(a, b) < 0) t = -t;\n  out[0] = a[0] * mt + b[0] * t;\n  out[1] = a[1] * mt + b[1] * t;\n  out[2] = a[2] * mt + b[2] * t;\n  out[3] = a[3] * mt + b[3] * t;\n  out[4] = a[4] * mt + b[4] * t;\n  out[5] = a[5] * mt + b[5] * t;\n  out[6] = a[6] * mt + b[6] * t;\n  out[7] = a[7] * mt + b[7] * t;\n  return out;\n}\n/**\r\n * Calculates the inverse of a dual quat. If they are normalized, conjugate is cheaper\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a dual quat to calculate inverse of\r\n * @returns {quat2} out\r\n */\n\nexport function invert(out, a) {\n  var sqlen = squaredLength(a);\n  out[0] = -a[0] / sqlen;\n  out[1] = -a[1] / sqlen;\n  out[2] = -a[2] / sqlen;\n  out[3] = a[3] / sqlen;\n  out[4] = -a[4] / sqlen;\n  out[5] = -a[5] / sqlen;\n  out[6] = -a[6] / sqlen;\n  out[7] = a[7] / sqlen;\n  return out;\n}\n/**\r\n * Calculates the conjugate of a dual quat\r\n * If the dual quaternion is normalized, this function is faster than quat2.inverse and produces the same result.\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {ReadonlyQuat2} a quat to calculate conjugate of\r\n * @returns {quat2} out\r\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  out[4] = -a[4];\n  out[5] = -a[5];\n  out[6] = -a[6];\n  out[7] = a[7];\n  return out;\n}\n/**\r\n * Calculates the length of a dual quat\r\n *\r\n * @param {ReadonlyQuat2} a dual quat to calculate length of\r\n * @returns {Number} length of a\r\n * @function\r\n */\n\nexport var length = quat.length;\n/**\r\n * Alias for {@link quat2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Calculates the squared length of a dual quat\r\n *\r\n * @param {ReadonlyQuat2} a dual quat to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\n\nexport var squaredLength = quat.squaredLength;\n/**\r\n * Alias for {@link quat2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Normalize a dual quat\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a dual quaternion to normalize\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function normalize(out, a) {\n  var magnitude = squaredLength(a);\n\n  if (magnitude > 0) {\n    magnitude = Math.sqrt(magnitude);\n    var a0 = a[0] / magnitude;\n    var a1 = a[1] / magnitude;\n    var a2 = a[2] / magnitude;\n    var a3 = a[3] / magnitude;\n    var b0 = a[4];\n    var b1 = a[5];\n    var b2 = a[6];\n    var b3 = a[7];\n    var a_dot_b = a0 * b0 + a1 * b1 + a2 * b2 + a3 * b3;\n    out[0] = a0;\n    out[1] = a1;\n    out[2] = a2;\n    out[3] = a3;\n    out[4] = (b0 - a0 * a_dot_b) / magnitude;\n    out[5] = (b1 - a1 * a_dot_b) / magnitude;\n    out[6] = (b2 - a2 * a_dot_b) / magnitude;\n    out[7] = (b3 - a3 * a_dot_b) / magnitude;\n  }\n\n  return out;\n}\n/**\r\n * Returns a string representation of a dual quatenion\r\n *\r\n * @param {ReadonlyQuat2} a dual quaternion to represent as a string\r\n * @returns {String} string representation of the dual quat\r\n */\n\nexport function str(a) {\n  return \"quat2(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \")\";\n}\n/**\r\n * Returns whether or not the dual quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyQuat2} a the first dual quaternion.\r\n * @param {ReadonlyQuat2} b the second dual quaternion.\r\n * @returns {Boolean} true if the dual quaternions are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7];\n}\n/**\r\n * Returns whether or not the dual quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyQuat2} a the first dual quat.\r\n * @param {ReadonlyQuat2} b the second dual quat.\r\n * @returns {Boolean} true if the dual quats are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7));\n}","import * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {ReadonlyVec2} a The vec2 point to rotate\r\n * @param {ReadonlyVec2} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {ReadonlyVec2} a The first operand\r\n * @param {ReadonlyVec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import { vec3, vec4, quat, mat4 } from 'gl-matrix';\r\n\r\nexport const VEC3_UNIT_X = vec3.fromValues(1, 0, 0);\r\nexport const VEC3_UNIT_Y = vec3.fromValues(0, 1, 0);\r\nexport const VEC3_UNIT_Z = vec3.fromValues(0, 0, 1);\r\nexport const VEC3_ZERO = vec3.create();\r\nexport const VEC3_ONE = vec3.fromValues(1, 1, 1);\r\nexport const QUAT_ZERO = quat.fromValues(0, 0, 0, 0);\r\nexport const QUAT_DEFAULT = quat.create();\r\n\r\nconst vec4Heap = vec4.create();\r\n\r\nexport function unproject(out: vec3, v: vec3, inverseMatrix: mat4, viewport: vec4): vec3 {\r\n  const x = 2 * (v[0] - viewport[0]) / viewport[2] - 1;\r\n  const y = 1 - 2 * (v[1] - viewport[1]) / viewport[3];\r\n  const z = 2 * v[2] - 1;\r\n\r\n  vec4.set(vec4Heap, x, y, z, 1);\r\n  vec4.transformMat4(vec4Heap, vec4Heap, inverseMatrix);\r\n  vec3.set(out, vec4Heap[0] / vec4Heap[3], vec4Heap[1] / vec4Heap[3], vec4Heap[2] / vec4Heap[3]);\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Get the distance of a point from a plane.\r\n * \r\n *     dot(plane, vec4(point, 1))\r\n */\r\nexport function distanceToPlane(plane: vec4, point: vec3): number {\r\n  return plane[0] * point[0] + plane[1] * point[1] + plane[2] * point[2] + plane[3];\r\n}\r\n\r\n/**\r\n * Get the distance of a point from a plane.\r\n * \r\n *     dot(plane, vec4(x, y, 0, 1))\r\n */\r\nexport function distanceToPlane2(plane: vec4, x: number, y: number): number {\r\n  return plane[0] * x + plane[1] * y + plane[3];\r\n}\r\n\r\n/**\r\n * Get the distance of a point from a plane.\r\n * \r\n *     dot(plane, vec4(x, y, z, 1))\r\n */\r\nexport function distanceToPlane3(plane: vec4, x: number, y: number, z: number): number {\r\n  return plane[0] * x + plane[1] * y + plane[2] * z + plane[3];\r\n}\r\n\r\n/**\r\n * Test if a sphere with the given center and radius intersects the given planes.\r\n * If it doesn't, the index of the first plane that proved this is returned.\r\n * Otherwise returns -1.\r\n *\r\n * If first is given, the test will begin from the plane at that index.\r\n */\r\nexport function testSphere(planes: vec4[], x: number, y: number, z: number, r: number, first: number): number {\r\n  if (first === -1) {\r\n    first = 0;\r\n  }\r\n\r\n  for (let i = 0; i < 6; i++) {\r\n    const index = (first + i) % 6;\r\n\r\n    if (distanceToPlane3(planes[index], x, y, z) <= -r) {\r\n      return index;\r\n    }\r\n  }\r\n\r\n  return -1;\r\n}\r\n\r\n/**\r\n * Test if a cell with the given coordinates intersects the given planes.\r\n * If it doesn't, the index of the first plane that proved this is returned.\r\n * Otherwise returns -1.\r\n *\r\n * If first is given, the test will begin from the plane at that index.\r\n */\r\nexport function testCell(planes: vec4[], left: number, right: number, bottom: number, top: number, first: number): number {\r\n  if (first === -1) {\r\n    first = 0;\r\n  }\r\n\r\n  for (let i = 0; i < 6; i++) {\r\n    const index = (first + i) % 6;\r\n    const plane = planes[index];\r\n\r\n    if (distanceToPlane2(plane, left, bottom) < 0 &&\r\n      distanceToPlane2(plane, left, top) < 0 &&\r\n      distanceToPlane2(plane, right, top) < 0 &&\r\n      distanceToPlane2(plane, right, bottom) < 0) {\r\n      return index;\r\n    }\r\n  }\r\n\r\n  return -1;\r\n}\r\n\r\nexport function planeLength(plane: vec4): number {\r\n  return Math.hypot(plane[0], plane[1], plane[2]);\r\n}\r\n\r\n/**\r\n * Normalize a plane.\r\n * \r\n * Note that this is not the same as normalizing a vec4.\r\n */\r\nexport function normalizePlane(out: vec4, plane: vec4): void {\r\n  const len = planeLength(plane);\r\n\r\n  out[0] = plane[0] / len;\r\n  out[1] = plane[1] / len;\r\n  out[2] = plane[2] / len;\r\n  out[3] = plane[3] / len;\r\n}\r\n\r\n/**\r\n * Unpacks a matrix's planes.\r\n */\r\nexport function unpackPlanes(planes: vec4[], m: mat4): void {\r\n  // eslint-disable-next-line one-var\r\n  const a00 = m[0], a01 = m[4], a02 = m[8], a03 = m[12],\r\n    a10 = m[1], a11 = m[5], a12 = m[9], a13 = m[13],\r\n    a20 = m[2], a21 = m[6], a22 = m[10], a23 = m[14],\r\n    a30 = m[3], a31 = m[7], a32 = m[11], a33 = m[15];\r\n  let plane;\r\n\r\n  // Left clipping plane\r\n  plane = planes[0];\r\n  plane[0] = a30 + a00;\r\n  plane[1] = a31 + a01;\r\n  plane[2] = a32 + a02;\r\n  plane[3] = a33 + a03;\r\n\r\n  // Right clipping plane\r\n  plane = planes[1];\r\n  plane[0] = a30 - a00;\r\n  plane[1] = a31 - a01;\r\n  plane[2] = a32 - a02;\r\n  plane[3] = a33 - a03;\r\n\r\n  // Top clipping plane\r\n  plane = planes[2];\r\n  plane[0] = a30 - a10;\r\n  plane[1] = a31 - a11;\r\n  plane[2] = a32 - a12;\r\n  plane[3] = a33 - a13;\r\n\r\n  // Bottom clipping plane\r\n  plane = planes[3];\r\n  plane[0] = a30 + a10;\r\n  plane[1] = a31 + a11;\r\n  plane[2] = a32 + a12;\r\n  plane[3] = a33 + a13;\r\n\r\n  // Near clipping plane\r\n  plane = planes[4];\r\n  plane[0] = a30 + a20;\r\n  plane[1] = a31 + a21;\r\n  plane[2] = a32 + a22;\r\n  plane[3] = a33 + a23;\r\n\r\n  // Far clipping plane\r\n  plane = planes[5];\r\n  plane[0] = a30 - a20;\r\n  plane[1] = a31 - a21;\r\n  plane[2] = a32 - a22;\r\n  plane[3] = a33 - a23;\r\n\r\n  normalizePlane(planes[0], planes[0]);\r\n  normalizePlane(planes[1], planes[1]);\r\n  normalizePlane(planes[2], planes[2]);\r\n  normalizePlane(planes[3], planes[3]);\r\n  normalizePlane(planes[4], planes[4]);\r\n  normalizePlane(planes[5], planes[5]);\r\n}\r\n\r\nconst F = vec3.create();\r\nconst R = vec3.create();\r\nconst U = vec3.create();\r\n\r\n/**\r\n * A look-at matrix, but for quaternions.\r\n * \r\n * See https://stackoverflow.com/a/52551983/2503048\r\n */\r\nexport function quatLookAt(out: quat, from: vec3, to: vec3, worldUp: vec3): quat {\r\n  vec3.normalize(F, vec3.sub(F, to, from));\r\n  vec3.normalize(R, vec3.cross(R, worldUp, F));\r\n  vec3.cross(U, R, F);\r\n\r\n  const trace = R[0] + U[2] + F[1];\r\n\r\n  if (trace > 0.0) {\r\n    const s = 0.5 / Math.sqrt(trace + 1.0);\r\n\r\n    out[3] = 0.25 / s;\r\n    out[0] = (U[1] - F[2]) * s;\r\n    out[2] = (F[0] - R[1]) * s;\r\n    out[1] = (R[2] - U[0]) * s;\r\n  } else {\r\n    if (R[0] > U[2] && R[0] > F[1]) {\r\n      const s = 2.0 * Math.sqrt(1.0 + R[0] - U[2] - F[1]);\r\n\r\n      out[3] = (U[1] - F[2]) / s;\r\n      out[0] = 0.25 * s;\r\n      out[2] = (U[0] + R[2]) / s;\r\n      out[1] = (F[0] + R[1]) / s;\r\n    } else if (U[2] > F[1]) {\r\n      const s = 2.0 * Math.sqrt(1.0 + U[2] - R[0] - F[1]);\r\n\r\n      out[3] = (F[0] - R[1]) / s;\r\n      out[0] = (U[0] + R[2]) / s;\r\n      out[2] = 0.25 * s;\r\n      out[1] = (F[2] + U[1]) / s;\r\n    } else {\r\n      const s = 2.0 * Math.sqrt(1.0 + F[1] - R[0] - U[2]);\r\n\r\n      out[3] = (R[2] - U[0]) / s;\r\n      out[0] = (F[0] + R[1]) / s;\r\n      out[2] = (F[2] + U[1]) / s;\r\n      out[1] = 0.25 * s;\r\n    }\r\n  }\r\n\r\n  return out;\r\n}\r\n","/**\r\n * Convert from degrees to radians.\r\n */\r\nexport function degToRad(degrees: number): number {\r\n  return degrees * (Math.PI / 180);\r\n}\r\n\r\n/**\r\n * Convert from radians to degrees.\r\n */\r\nexport function radToDeg(radians: number): number {\r\n  return radians * (180 / Math.PI);\r\n}\r\n\r\n/**\r\n * Gets a random number between a range.\r\n */\r\nexport function randomInRange(a: number, b: number): number {\r\n  return a + Math.random() * (b - a);\r\n}\r\n\r\n/**\r\n * Clamp a number in a range.\r\n */\r\nexport function clamp(x: number, minVal: number, maxVal: number): number {\r\n  return Math.min(Math.max(x, minVal), maxVal);\r\n}\r\n\r\n/**\r\n * Linear interpolation.\r\n */\r\nexport function lerp(a: number, b: number, t: number): number {\r\n  return a + t * (b - a);\r\n}\r\n\r\n/**\r\n * Hermite interpolation.\r\n */\r\nexport function hermite(a: number, b: number, c: number, d: number, t: number): number {\r\n  const factorTimes2 = t * t;\r\n  const factor1 = factorTimes2 * (2 * t - 3) + 1;\r\n  const factor2 = factorTimes2 * (t - 2) + t;\r\n  const factor3 = factorTimes2 * (t - 1);\r\n  const factor4 = factorTimes2 * (3 - 2 * t);\r\n\r\n  return (a * factor1) + (b * factor2) + (c * factor3) + (d * factor4);\r\n}\r\n\r\n/**\r\n * Bezier interpolation.\r\n */\r\nexport function bezier(a: number, b: number, c: number, d: number, t: number): number {\r\n  const invt = 1 - t;\r\n  const factorTimes2 = t * t;\r\n  const inverseFactorTimesTwo = invt * invt;\r\n  const factor1 = inverseFactorTimesTwo * invt;\r\n  const factor2 = 3 * t * inverseFactorTimesTwo;\r\n  const factor3 = 3 * factorTimes2 * invt;\r\n  const factor4 = factorTimes2 * t;\r\n\r\n  return (a * factor1) + (b * factor2) + (c * factor3) + (d * factor4);\r\n}\r\n\r\n/**\r\n * Copies the sign of one number onto another.\r\n */\r\nexport function copysign(x: number, y: number): number {\r\n  const signy = Math.sign(y);\r\n\r\n  if (signy === 0) {\r\n    return 0;\r\n  }\r\n\r\n  const signx = Math.sign(x);\r\n\r\n  if (signx !== signy) {\r\n    return -x;\r\n  }\r\n\r\n  return x;\r\n}\r\n\r\n/**\r\n * Gets the closest power of two bigger or equal to the given number.\r\n */\r\nexport function powerOfTwo(x: number): number {\r\n  x--;\r\n  x |= x >> 1;\r\n  x |= x >> 2;\r\n  x |= x >> 4;\r\n  x |= x >> 8;\r\n  x |= x >> 16;\r\n  x++;\r\n\r\n  return x;\r\n}\r\n\r\n/**\r\n * Is this number a power of two?\r\n */\r\nexport function isPowerOfTwo(x: number): boolean {\r\n  if (x === 0) {\r\n    return false;\r\n  }\r\n\r\n  return ((x & (x - 1)) === 0);\r\n}\r\n","let canvas: HTMLCanvasElement;\r\nlet ctx: CanvasRenderingContext2D;\r\nlet canvas2: HTMLCanvasElement;\r\nlet ctx2: CanvasRenderingContext2D;\r\n\r\n// Only create the canvases and contexts in browsers.\r\nif (typeof window === 'object') {\r\n  canvas = document.createElement('canvas');\r\n  ctx = <CanvasRenderingContext2D>canvas.getContext('2d');\r\n  canvas2 = document.createElement('canvas');\r\n  ctx2 = <CanvasRenderingContext2D>canvas2.getContext('2d');\r\n}\r\n\r\nexport function blobToImage(blob: Blob): Promise<HTMLImageElement> {\r\n  return new Promise<HTMLImageElement>((resolve,  reject) => {\r\n    const url = URL.createObjectURL(blob);\r\n    const image = new Image();\r\n\r\n    image.onload = (): void => {\r\n      resolve(image);\r\n    };\r\n\r\n    image.onerror = (e): void => {\r\n      reject(e);\r\n    };\r\n\r\n    image.src = url;\r\n  });\r\n}\r\n\r\nexport function blobToImageData(blob: Blob): Promise<ImageData> {\r\n  return new Promise<ImageData>((resolve, reject) => {\r\n    const url = URL.createObjectURL(blob);\r\n    const image = new Image();\r\n\r\n    image.onload = (): void => {\r\n      URL.revokeObjectURL(url);\r\n\r\n      canvas.width = image.width;\r\n      canvas.height = image.height;\r\n\r\n      ctx.drawImage(image, 0, 0);\r\n\r\n      resolve(ctx.getImageData(0, 0, image.width, image.height));\r\n    };\r\n\r\n    image.onerror = (e): void => {\r\n      reject(e);\r\n    };\r\n\r\n    image.src = url;\r\n  });\r\n}\r\n\r\nexport function imageDataToBlob(imageData: ImageData): Promise<Blob | null> {\r\n  return new Promise((resolve: BlobCallback) => {\r\n    canvas.width = imageData.width;\r\n    canvas.height = imageData.height;\r\n\r\n    ctx.putImageData(imageData, 0, 0);\r\n\r\n    canvas.toBlob((blob) => {\r\n      resolve(blob);\r\n    });\r\n  });\r\n}\r\n\r\nexport function imageDataToDataUrl(imageData: ImageData): string {\r\n  canvas.width = imageData.width;\r\n  canvas.height = imageData.height;\r\n\r\n  ctx.putImageData(imageData, 0, 0);\r\n\r\n  return canvas.toDataURL();\r\n}\r\n\r\nexport function imageDataToImage(imageData: ImageData): HTMLImageElement {\r\n  const image = new Image();\r\n\r\n  image.src = imageDataToDataUrl(imageData);\r\n\r\n  return image;\r\n}\r\n\r\nexport function imageToImageData(image: TexImageSource): ImageData {\r\n  const width = image.width;\r\n  const height = image.height;\r\n\r\n  canvas.width = width;\r\n  canvas.height = height;\r\n\r\n  ctx.drawImage(<CanvasImageSource>image, 0, 0);\r\n\r\n  return ctx.getImageData(0, 0, width, height);\r\n}\r\n\r\nexport function resizeImageData(data: TexImageSource, width: number, height: number): ImageData {\r\n  if (data instanceof ImageData) {\r\n    canvas.width = data.width;\r\n    canvas.height = data.height;\r\n\r\n    ctx.putImageData(data, 0, 0);\r\n\r\n    canvas2.width = width;\r\n    canvas2.height = height;\r\n\r\n    ctx2.drawImage(canvas, 0, 0, width, height);\r\n\r\n    return ctx2.getImageData(0, 0, width, height);\r\n  } else {\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n\r\n    ctx.drawImage(data, 0, 0, width, height);\r\n\r\n    return ctx.getImageData(0, 0, width, height);\r\n  }\r\n}\r\n","const decoder = new TextDecoder();\r\nconst encoder = new TextEncoder();\r\n\r\n/**\r\n * Decode bytes as a UTF8 string.\r\n */\r\nexport function decodeUtf8(buffer: ArrayBuffer | Uint8Array): string {\r\n  return decoder.decode(buffer);\r\n}\r\n\r\n/**\r\n * Encode a UTF8 string to bytes.\r\n */\r\nexport function encodeUtf8(utf8: string): Uint8Array {\r\n  return encoder.encode(utf8);\r\n}\r\n\r\n/**\r\n * Get the byte length of a UTF8 string.\r\n * \r\n * @see https://stackoverflow.com/a/23329386\r\n */\r\nexport function byteLengthUtf8(str: string): number {\r\n  // returns the byte length of an utf8 string\r\n  let s = str.length;\r\n  for (let i = str.length - 1; i >= 0; i--) {\r\n    const code = str.charCodeAt(i);\r\n    if (code > 0x7f && code <= 0x7ff) s++;\r\n    else if (code > 0x7ff && code <= 0xffff) s += 2;\r\n    if (code >= 0xDC00 && code <= 0xDFFF) i--; //trail surrogate\r\n  }\r\n  return s;\r\n}\r\n\r\n/**\r\n * Splits the given string into an array of strings.\r\n * \r\n * Each string will have a byte length smaller or equal to chunkBytelength when encoded as UTF8.\r\n * \r\n * @see https://stackoverflow.com/a/18729931\r\n */\r\nexport function splitUtf8ByteLength(str: string, chunkBytelength: number): string[] {\r\n  const chunks = [];\r\n  let pos = 0;\r\n  let bytes = 0;\r\n\r\n  for (let i = 0, l = str.length; i < l; i++) {\r\n    const code = str.charCodeAt(i);\r\n\r\n    if (code < 0x80) {\r\n      bytes += 1;\r\n    } else if (code < 0x800) {\r\n      bytes += 2;\r\n    } else if (code < 0xd800 || code >= 0xe000) {\r\n      bytes += 3;\r\n    } else {\r\n      i++;\r\n      bytes += 4;\r\n    }\r\n\r\n    if (bytes >= chunkBytelength - 3) {\r\n      chunks.push(str.substr(pos, i));\r\n\r\n      pos += i;\r\n      bytes = 0;\r\n    }\r\n  }\r\n\r\n  if (bytes > 0) {\r\n    chunks.push(str.substr(pos));\r\n  }\r\n\r\n  return chunks;\r\n}\r\n","import { encodeUtf8 } from './utf8';\r\n\r\n/**\r\n * Return the given buffer as a Uint8Array.\r\n * \r\n * Strings are encoded as UTF8.\r\n */\r\nexport function bytesOf(buffer: ArrayBuffer | Uint8Array | string | number[]): Uint8Array {\r\n  if (buffer instanceof Uint8Array) {\r\n    return buffer;\r\n  } else if (typeof buffer === 'string') {\r\n    return encodeUtf8(buffer);\r\n  } else {\r\n    return new Uint8Array(buffer);\r\n  }\r\n}\r\n","export function isStringInBytes(buffer: Uint8Array, target: string, offset = 0, length = Infinity): boolean {\r\n  const start = Math.max(offset, 0);\r\n  const end = Math.min(start + length, buffer.length);\r\n  let whichByte = 0;\r\n  let targetByte = target.charCodeAt(0);\r\n\r\n  for (let i = start; i < end; i++) {\r\n    const byte = buffer[i];\r\n\r\n    if (byte === targetByte) {\r\n      whichByte += 1;\r\n\r\n      if (whichByte === target.length) {\r\n        return true;\r\n      }\r\n\r\n      targetByte = target.charCodeAt(whichByte);\r\n    } else if (whichByte > 0) {\r\n      whichByte = 0;\r\n      targetByte = target.charCodeAt(0);\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nexport function isStringInString(buffer: string, target: string, offset = 0, length = Infinity): boolean {\r\n  const start = Math.max(offset, 0);\r\n  const end = Math.min(start + length, buffer.length);\r\n  let whichByte = 0;\r\n  let targetByte = target[0];\r\n\r\n  for (let i = start; i < end; i++) {\r\n    const byte = buffer[i];\r\n\r\n    if (byte === targetByte) {\r\n      whichByte += 1;\r\n\r\n      if (whichByte === target.length) {\r\n        return true;\r\n      }\r\n\r\n      targetByte = target[whichByte];\r\n    } else if (whichByte > 0) {\r\n      whichByte = 0;\r\n      targetByte = target[0];\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nexport function boundIndexOf(buffer: Uint8Array, target: number, offset = 0, length = Infinity): number {\r\n  const start = Math.max(offset, 0);\r\n  const end = Math.min(start + length, buffer.length);\r\n\r\n  for (let i = start; i < end; i++) {\r\n    if (buffer[i] === target) {\r\n      return i;\r\n    }\r\n  }\r\n\r\n  return -1;\r\n}\r\n","const buffer = new ArrayBuffer(8);\r\nconst int8 = new Int8Array(buffer);\r\nconst int16 = new Int16Array(buffer);\r\nconst int32 = new Int32Array(buffer);\r\nconst uint8 = new Uint8Array(buffer);\r\nconst uint16 = new Uint16Array(buffer);\r\nconst uint32 = new Uint32Array(buffer);\r\nconst float32 = new Float32Array(buffer);\r\nconst float64 = new Float64Array(buffer);\r\n\r\n/**\r\n * Typecast a 8 bit unsigned integer to a 8 bits signed integer.\r\n */\r\nexport function uint8ToInt8(a: number): number {\r\n  uint8[0] = a;\r\n\r\n  return int8[0];\r\n}\r\n\r\n/**\r\n * Typecast two 8 bit unsigned integers to a 16 bits signed integer.\r\n */\r\nexport function uint8ToInt16(a: number, b: number): number {\r\n  uint8[0] = a;\r\n  uint8[1] = b;\r\n\r\n  return int16[0];\r\n}\r\n\r\n/**\r\n * Typecast three 8 bit unsigned integers to a 24 bits signed integer.\r\n */\r\nexport function uint8ToInt24(a: number, b: number, c: number): number {\r\n  uint8[0] = a;\r\n  uint8[1] = b;\r\n  uint8[2] = c;\r\n  uint8[3] = 0;\r\n\r\n  return int32[0];\r\n}\r\n\r\n/**\r\n * Typecast four 8 bit unsigned integers to a 32 bits signed integer.\r\n */\r\nexport function uint8ToInt32(a: number, b: number, c: number, d: number): number {\r\n  uint8[0] = a;\r\n  uint8[1] = b;\r\n  uint8[2] = c;\r\n  uint8[3] = d;\r\n\r\n  return int32[0];\r\n}\r\n\r\n/**\r\n * Typecast two 8 bit unsigned integers to a 16 bits unsigned integer.\r\n */\r\nexport function uint8ToUint16(a: number, b: number): number {\r\n  uint8[0] = a;\r\n  uint8[1] = b;\r\n\r\n  return uint16[0];\r\n}\r\n\r\n/**\r\n * Typecast three 8 bit unsigned integers to a 24 bits unsigned integer.\r\n */\r\nexport function uint8ToUint24(a: number, b: number, c: number): number {\r\n  uint8[0] = a;\r\n  uint8[1] = b;\r\n  uint8[2] = c;\r\n  uint8[3] = 0;\r\n\r\n  return uint32[0];\r\n}\r\n\r\n/**\r\n * Typecast four 8 bit unsigned integers to a 32 bits unsigned integer.\r\n */\r\nexport function uint8ToUint32(a: number, b: number, c: number, d: number): number {\r\n  uint8[0] = a;\r\n  uint8[1] = b;\r\n  uint8[2] = c;\r\n  uint8[3] = d;\r\n\r\n  return uint32[0];\r\n}\r\n\r\n/**\r\n * Typecast four 8 bit unsigned integers to a 32 bits IEEE float.\r\n */\r\nexport function uint8ToFloat32(a: number, b: number, c: number, d: number): number {\r\n  uint8[0] = a;\r\n  uint8[1] = b;\r\n  uint8[2] = c;\r\n  uint8[3] = d;\r\n\r\n  return float32[0];\r\n}\r\n\r\n/**\r\n * Typecast eight 8 bit unsigned integers to a 64 bits IEEE float.\r\n */\r\nexport function uint8ToFloat64(a: number, b: number, c: number, d: number, e: number, f: number, g: number, h: number): number {\r\n  uint8[0] = a;\r\n  uint8[1] = b;\r\n  uint8[2] = c;\r\n  uint8[3] = d;\r\n  uint8[4] = e;\r\n  uint8[5] = f;\r\n  uint8[6] = g;\r\n  uint8[7] = h;\r\n\r\n  return float64[0];\r\n}\r\n\r\n/**\r\n * Typecast a 8 bit signed integer to a 8 bit unsigned integer.\r\n */\r\nexport function int8ToUint8(a: number): number {\r\n  uint8[0] = a;\r\n\r\n  return int8[0];\r\n}\r\n\r\n/**\r\n * Typecast a 16 bit signed integer to two 8 bit unsigned integers.\r\n * \r\n * The result is stored in out.\r\n */\r\nexport function int16ToUint8(out: Uint8Array, a: number): Uint8Array {\r\n  int16[0] = a;\r\n\r\n  out[0] = uint8[0];\r\n  out[1] = uint8[1];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Typecast a 24 bit signed integer to three 8 bit unsigned integers.\r\n * \r\n * The result is stored in out.\r\n */\r\nexport function int24ToUint8(out: Uint8Array, a: number): Uint8Array {\r\n  int32[0] = a;\r\n\r\n  out[0] = uint8[0];\r\n  out[1] = uint8[1];\r\n  out[2] = uint8[2];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Typecast a 32 bit signed integer to four 8 bit unsigned integers.\r\n * \r\n * The result is stored in out.\r\n */\r\nexport function int32ToUint8(out: Uint8Array, a: number): Uint8Array {\r\n  int32[0] = a;\r\n\r\n  out[0] = uint8[0];\r\n  out[1] = uint8[1];\r\n  out[2] = uint8[2];\r\n  out[3] = uint8[3];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Typecast a 16 bit unsigned integer to two 8 bit unsigned integers.\r\n * \r\n * The result is stored in out.\r\n */\r\nexport function uint16ToUint8(out: Uint8Array, a: number): Uint8Array {\r\n  uint16[0] = a;\r\n\r\n  out[0] = uint8[0];\r\n  out[1] = uint8[1];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Typecast a 24 bit unsigned integer to three 8 bit unsigned integers.\r\n * \r\n * The result is stored in out.\r\n */\r\nexport function uint24ToUint8(out: Uint8Array, a: number): Uint8Array {\r\n  uint32[0] = a;\r\n\r\n  out[0] = uint8[0];\r\n  out[1] = uint8[1];\r\n  out[2] = uint8[2];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Typecast a 32 bit unsigned integer to four 8 bit unsigned integers.\r\n * \r\n * The result is stored in out.\r\n */\r\nexport function uint32ToUint8(out: Uint8Array, a: number): Uint8Array {\r\n  uint32[0] = a;\r\n\r\n  out[0] = uint8[0];\r\n  out[1] = uint8[1];\r\n  out[2] = uint8[2];\r\n  out[3] = uint8[3];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Typecast a 32 bit IEEE float to four 8 bit unsigned integers.\r\n * \r\n * The result is stored in out.\r\n */\r\nexport function float32ToUint8(out: Uint8Array, a: number): Uint8Array {\r\n  float32[0] = a;\r\n\r\n  out[0] = uint8[0];\r\n  out[1] = uint8[1];\r\n  out[2] = uint8[2];\r\n  out[3] = uint8[3];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Typecast a 64 bit IEEE float to eight 8 bit unsigned integers.\r\n * \r\n * The result is stored in out.\r\n */\r\nexport function float64ToUint8(out: Uint8Array, a: number): Uint8Array {\r\n  float64[0] = a;\r\n\r\n  out[0] = uint8[0];\r\n  out[1] = uint8[1];\r\n  out[2] = uint8[2];\r\n  out[3] = uint8[3];\r\n  out[4] = uint8[4];\r\n  out[5] = uint8[5];\r\n  out[6] = uint8[6];\r\n  out[7] = uint8[7];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Typecast a normal JavaScript number to a 32 bits unsigned integer.\r\n */\r\nexport function numberToUint32(number: number): number {\r\n  uint32[0] = number;\r\n\r\n  return uint32[0];\r\n}\r\n\r\n/**\r\n * Interperts a string as a base 256 number.\r\n */\r\nexport function stringToBase256(string: string): number {\r\n  let number = 0;\r\n\r\n  for (const c of string) {\r\n    number = number * 256 + c.charCodeAt(0);\r\n  }\r\n\r\n  return number;\r\n}\r\n\r\n/**\r\n * Interperts a number as a base 256 string.\r\n */\r\nexport function base256ToString(number: number): string {\r\n  const array = [];\r\n\r\n  while (number > 0) {\r\n    array.push(String.fromCharCode(number % 256));\r\n    number = Math.floor(number / 256);\r\n  }\r\n\r\n  return array.reverse().join('');\r\n}\r\n","import { bytesOf } from './bytesof';\r\nimport { boundIndexOf } from './searches';\r\nimport { uint8ToInt8, uint8ToInt16, uint8ToInt32, uint8ToUint16, uint8ToUint32, uint8ToFloat32, uint8ToFloat64, int8ToUint8, int16ToUint8, int32ToUint8, uint16ToUint8, uint32ToUint8, float32ToUint8, float64ToUint8 } from './typecast';\r\nimport { decodeUtf8, encodeUtf8 } from './utf8';\r\n\r\n// Memory for all of the xxxToUint type casts.\r\nconst uint8 = new Uint8Array(8);\r\n\r\n/**\r\n * A binary stream.\r\n */\r\nexport default class BinaryStream {\r\n  buffer: ArrayBuffer;\r\n  uint8array: Uint8Array;\r\n  index = 0;\r\n  byteLength: number;\r\n  remaining: number;\r\n\r\n  constructor(buffer: ArrayBuffer | Uint8Array, byteOffset?: number, byteLength?: number) {\r\n    const bytes = bytesOf(buffer);\r\n\r\n    // For browsers not supporting the spec.\r\n    // Once upon a time I reported this issue on the Firefox tracker.\r\n    // Seems like Safari needs an issue report too.\r\n    byteOffset = byteOffset || 0;\r\n    byteLength = byteLength || bytes.length;\r\n\r\n    this.buffer = buffer;\r\n    this.uint8array = bytes.subarray(byteOffset, byteOffset + byteLength);\r\n    this.byteLength = byteLength;\r\n    this.remaining = byteLength;\r\n  }\r\n\r\n  /**\r\n   * Create a subreader of this reader, at its position, with the given byte length.\r\n   */\r\n  substream(byteLength: number): BinaryStream {\r\n    if (this.remaining < byteLength) {\r\n      throw new Error(`ByteStream: substream: want ${byteLength} bytes but have ${this.remaining}`);\r\n    }\r\n\r\n    const index = this.index;\r\n\r\n    this.index += byteLength;\r\n\r\n    return new BinaryStream(this.uint8array.subarray(index, index + byteLength));\r\n  }\r\n\r\n  /**\r\n   * Skip a number of bytes.\r\n   */\r\n  skip(bytes: number): void {\r\n    if (this.remaining < bytes) {\r\n      throw new Error(`ByteStream: skip: premature end - want ${bytes} bytes but have ${this.remaining}`);\r\n    }\r\n\r\n    this.index += bytes;\r\n    this.remaining -= bytes;\r\n  }\r\n\r\n  /**\r\n   * Set the reader's index.\r\n   */\r\n  seek(index: number): void {\r\n    this.index = index;\r\n    this.remaining = this.byteLength - index;\r\n  }\r\n\r\n  /**\r\n   * Read a UTF8 string with the given number of bytes.\r\n   * \r\n   * The entire size will be read, however the string returned is NULL terminated in its memory block.\r\n   * \r\n   * For example, the MDX format has many strings that have a constant maximum size, where any bytes after the string are NULLs.\r\n   * Such strings will be loaded correctly given the maximum size.\r\n   */\r\n  read(bytes: number): string {\r\n    if (this.remaining < bytes) {\r\n      throw new Error(`ByteStream: read: premature end - want ${bytes} bytes but have ${this.remaining}`);\r\n    }\r\n\r\n    const uint8array = this.uint8array;\r\n    const start = this.index;\r\n    let end = boundIndexOf(uint8array, 0, start, bytes);\r\n\r\n    if (end === -1) {\r\n      end = start + bytes;\r\n    }\r\n\r\n    this.index += bytes;\r\n    this.remaining -= bytes;\r\n\r\n    return decodeUtf8(uint8array.subarray(start, end));\r\n  }\r\n\r\n  /**\r\n   * Read a UTF8 NULL terminated string.\r\n   */\r\n  readNull(): string {\r\n    if (this.remaining < 1) {\r\n      throw new Error(`ByteStream: readNull: premature end - want at least 1 byte but have 0`);\r\n    }\r\n\r\n    const uint8array = this.uint8array;\r\n    const start = this.index;\r\n    let end = uint8array.indexOf(0, start);\r\n\r\n    if (end === -1) {\r\n      end = uint8array.length - 1;\r\n    }\r\n\r\n    const bytes = end - start + 1;\r\n\r\n    this.index += bytes;\r\n    this.remaining -= bytes;\r\n\r\n    return decodeUtf8(uint8array.subarray(start, end));\r\n  }\r\n\r\n  /**\r\n   * Read a binary string with the given number of bytes.\r\n   */\r\n  readBinary(bytes: number): string {\r\n    if (this.remaining < bytes) {\r\n      throw new Error(`ByteStream: readBinary: premature end - want ${bytes} bytes but have ${this.remaining}`);\r\n    }\r\n\r\n    const uint8array = this.uint8array;\r\n    const index = this.index;\r\n    let data = '';\r\n\r\n    for (let i = 0; i < bytes; i++) {\r\n      data += String.fromCharCode(uint8array[index + i]);\r\n    }\r\n\r\n    this.index += bytes;\r\n    this.remaining -= bytes;\r\n\r\n    return data;\r\n  }\r\n\r\n  /**\r\n   * Read a 8 bit signed integer.\r\n   */\r\n  readInt8(): number {\r\n    if (this.remaining < 1) {\r\n      throw new Error(`ByteStream: readInt8: premature end - want 1 byte but have ${this.remaining}`);\r\n    }\r\n\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n    const data = uint8ToInt8(uint8array[index]);\r\n\r\n    this.index += 1;\r\n    this.remaining -= 1;\r\n\r\n    return data;\r\n  }\r\n\r\n  /**\r\n   * Read a 16 bit signed integer.\r\n   */\r\n  readInt16(): number {\r\n    if (this.remaining < 2) {\r\n      throw new Error(`ByteStream: readInt16: premature end - want 2 bytes but have ${this.remaining}`);\r\n    }\r\n\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n    const data = uint8ToInt16(uint8array[index], uint8array[index + 1]);\r\n\r\n    this.index += 2;\r\n    this.remaining -= 2;\r\n\r\n    return data;\r\n  }\r\n\r\n  /**\r\n   * Read a 32 bit signed integer.\r\n   */\r\n  readInt32(): number {\r\n    if (this.remaining < 4) {\r\n      throw new Error(`ByteStream: readInt32: premature end - want 4 bytes but have ${this.remaining}`);\r\n    }\r\n\r\n\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n    const data = uint8ToInt32(uint8array[index], uint8array[index + 1], uint8array[index + 2], uint8array[index + 3]);\r\n\r\n    this.index += 4;\r\n    this.remaining -= 4;\r\n\r\n    return data;\r\n  }\r\n\r\n  /**\r\n   * Read a 8 bit unsigned integer.\r\n   */\r\n  readUint8(): number {\r\n    if (this.remaining < 1) {\r\n      throw new Error(`ByteStream: readUint8: premature end - want 1 byte but have ${this.remaining}`);\r\n    }\r\n\r\n    const data = this.uint8array[this.index];\r\n\r\n    this.index += 1;\r\n    this.remaining -= 1;\r\n\r\n    return data;\r\n  }\r\n\r\n  /**\r\n   * Read a 16 bit unsigned integer.\r\n   */\r\n  readUint16(): number {\r\n    if (this.remaining < 2) {\r\n      throw new Error(`ByteStream: readUint16: premature end - want 2 bytes but have ${this.remaining}`);\r\n    }\r\n\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n    const data = uint8ToUint16(uint8array[index], uint8array[index + 1]);\r\n\r\n    this.index += 2;\r\n    this.remaining -= 2;\r\n\r\n    return data;\r\n  }\r\n\r\n  /**\r\n   * Read a 32 bit unsigned integer.\r\n   */\r\n  readUint32(): number {\r\n    if (this.remaining < 4) {\r\n      throw new Error(`ByteStream: readUint32: premature end - want 4 bytes but have ${this.remaining}`);\r\n    }\r\n\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n    const data = uint8ToUint32(uint8array[index], uint8array[index + 1], uint8array[index + 2], uint8array[index + 3]);\r\n\r\n    this.index += 4;\r\n    this.remaining -= 4;\r\n\r\n    return data;\r\n  }\r\n\r\n  /**\r\n   * Read a 32 bit float.\r\n   */\r\n  readFloat32(): number {\r\n    if (this.remaining < 4) {\r\n      throw new Error(`ByteStream: readFloat32: premature end - want 4 bytes but have ${this.remaining}`);\r\n    }\r\n\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n    const data = uint8ToFloat32(uint8array[index], uint8array[index + 1], uint8array[index + 2], uint8array[index + 3]);\r\n\r\n    this.index += 4;\r\n    this.remaining -= 4;\r\n\r\n    return data;\r\n  }\r\n\r\n  /**\r\n   * Read a 64 bit float.\r\n   */\r\n  readFloat64(): number {\r\n    if (this.remaining < 8) {\r\n      throw new Error(`ByteStream: readFloat64: premature end - want 8 bytes but have ${this.remaining}`);\r\n    }\r\n\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n    const data = uint8ToFloat64(uint8array[index], uint8array[index + 1], uint8array[index + 2], uint8array[index + 3], uint8array[index + 4], uint8array[index + 5], uint8array[index + 6], uint8array[index + 7]);\r\n\r\n    this.index += 8;\r\n    this.remaining -= 8;\r\n\r\n    return data;\r\n  }\r\n\r\n  /**\r\n   * Read an array of 8 bit signed integers.\r\n   */\r\n  readInt8Array(view: number | Int8Array): Int8Array {\r\n    if (!ArrayBuffer.isView(view)) {\r\n      view = new Int8Array(view);\r\n    }\r\n\r\n    if (this.remaining < view.byteLength) {\r\n      throw new Error(`ByteStream: readInt8Array: premature end - want ${view.byteLength} bytes but have ${this.remaining}`);\r\n    }\r\n\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    for (let i = 0, l = view.length; i < l; i++) {\r\n      view[i] = uint8ToInt8(uint8array[index + i]);\r\n    }\r\n\r\n    this.index += view.byteLength;\r\n    this.remaining -= view.byteLength;\r\n\r\n    return view;\r\n  }\r\n\r\n  /**\r\n   * Read an array of 16 bit signed integers.\r\n   */\r\n  readInt16Array(view: number | Int16Array): Int16Array {\r\n    if (!ArrayBuffer.isView(view)) {\r\n      view = new Int16Array(view);\r\n    }\r\n\r\n    if (this.remaining < view.byteLength) {\r\n      throw new Error(`ByteStream: readInt16Array: premature end - want ${view.byteLength} bytes but have ${this.remaining}`);\r\n    }\r\n\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    for (let i = 0, l = view.length; i < l; i++) {\r\n      const offset = index + i * 2;\r\n\r\n      view[i] = uint8ToInt16(uint8array[offset], uint8array[offset + 1]);\r\n    }\r\n\r\n    this.index += view.byteLength;\r\n    this.remaining -= view.byteLength;\r\n\r\n    return view;\r\n  }\r\n\r\n  /**\r\n   * Read an array of 32 bit signed integers.\r\n   */\r\n  readInt32Array(view: number | Int32Array): Int32Array {\r\n    if (!ArrayBuffer.isView(view)) {\r\n      view = new Int32Array(view);\r\n    }\r\n\r\n    if (this.remaining < view.byteLength) {\r\n      throw new Error(`ByteStream: readInt32Array: premature end - want ${view.byteLength} bytes but have ${this.remaining}`);\r\n    }\r\n\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    for (let i = 0, l = view.length; i < l; i++) {\r\n      const offset = index + i * 4;\r\n\r\n      view[i] = uint8ToInt32(uint8array[offset], uint8array[offset + 1], uint8array[offset + 2], uint8array[offset + 3]);\r\n    }\r\n\r\n    this.index += view.byteLength;\r\n    this.remaining -= view.byteLength;\r\n\r\n    return view;\r\n  }\r\n\r\n  /**\r\n   * Read an array of 8 bit unsigned integers.\r\n   */\r\n  readUint8Array(view: number | Uint8Array): Uint8Array {\r\n    if (!ArrayBuffer.isView(view)) {\r\n      view = new Uint8Array(view);\r\n    }\r\n\r\n    if (this.remaining < view.byteLength) {\r\n      throw new Error(`ByteStream: readUint8Array: premature end - want ${view.byteLength} bytes but have ${this.remaining}`);\r\n    }\r\n\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    for (let i = 0, l = view.length; i < l; i++) {\r\n      view[i] = uint8array[index + i];\r\n    }\r\n\r\n    this.index += view.byteLength;\r\n    this.remaining -= view.byteLength;\r\n\r\n    return view;\r\n  }\r\n\r\n  /**\r\n   * Read an array of 16 bit unsigned integers.\r\n   */\r\n  readUint16Array(view: number | Uint16Array): Uint16Array {\r\n    if (!ArrayBuffer.isView(view)) {\r\n      view = new Uint16Array(view);\r\n    }\r\n\r\n    if (this.remaining < view.byteLength) {\r\n      throw new Error(`ByteStream: readUint16Array: premature end - want ${view.byteLength} bytes but have ${this.remaining}`);\r\n    }\r\n\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    for (let i = 0, l = view.length; i < l; i++) {\r\n      const offset = index + i * 2;\r\n\r\n      view[i] = uint8ToUint16(uint8array[offset], uint8array[offset + 1]);\r\n    }\r\n\r\n    this.index += view.byteLength;\r\n    this.remaining -= view.byteLength;\r\n\r\n    return view;\r\n  }\r\n\r\n  /**\r\n   * Read an array of 32 bit unsigned integers.\r\n   */\r\n  readUint32Array(view: number | Uint32Array): Uint32Array {\r\n    if (!ArrayBuffer.isView(view)) {\r\n      view = new Uint32Array(view);\r\n    }\r\n\r\n    if (this.remaining < view.byteLength) {\r\n      throw new Error(`ByteStream: readUint32Array: premature end - want ${view.byteLength} bytes but have ${this.remaining}`);\r\n    }\r\n\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    for (let i = 0, l = view.length; i < l; i++) {\r\n      const offset = index + i * 4;\r\n\r\n      view[i] = uint8ToUint32(uint8array[offset], uint8array[offset + 1], uint8array[offset + 2], uint8array[offset + 3]);\r\n    }\r\n\r\n    this.index += view.byteLength;\r\n    this.remaining -= view.byteLength;\r\n\r\n    return view;\r\n  }\r\n\r\n  /**\r\n   * Read an array of 32 bit floats.\r\n   */\r\n  readFloat32Array(view: number | Float32Array): Float32Array {\r\n    if (!ArrayBuffer.isView(view)) {\r\n      view = new Float32Array(view);\r\n    }\r\n\r\n    if (this.remaining < view.byteLength) {\r\n      throw new Error(`ByteStream: readFloat32Array: premature end - want ${view.byteLength} bytes but have ${this.remaining}`);\r\n    }\r\n\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    for (let i = 0, l = view.length; i < l; i++) {\r\n      const offset = index + i * 4;\r\n\r\n      view[i] = uint8ToFloat32(uint8array[offset], uint8array[offset + 1], uint8array[offset + 2], uint8array[offset + 3]);\r\n    }\r\n\r\n    this.index += view.byteLength;\r\n    this.remaining -= view.byteLength;\r\n\r\n    return view;\r\n  }\r\n\r\n  /**\r\n   * Read an array of 64 bit floats.\r\n   */\r\n  readFloat64Array(view: number | Float64Array): Float64Array {\r\n    if (!ArrayBuffer.isView(view)) {\r\n      view = new Float64Array(view);\r\n    }\r\n\r\n    if (this.remaining < view.byteLength) {\r\n      throw new Error(`ByteStream: readFloat64Array: premature end - want ${view.byteLength} bytes but have ${this.remaining}`);\r\n    }\r\n\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    for (let i = 0, l = view.length; i < l; i++) {\r\n      const offset = index + i * 8;\r\n\r\n      view[i] = uint8ToFloat64(uint8array[offset], uint8array[offset + 1], uint8array[offset + 2], uint8array[offset + 3], uint8array[offset + 4], uint8array[offset + 5], uint8array[offset + 6], uint8array[offset + 7]);\r\n    }\r\n\r\n    this.index += view.byteLength;\r\n    this.remaining -= view.byteLength;\r\n\r\n    return view;\r\n  }\r\n\r\n  /**\r\n   * Write a UTF8 string.\r\n   * \r\n   * Returns the number of bytes that were written,\r\n   */\r\n  write(utf8: string): number {\r\n    const bytes = encodeUtf8(utf8);\r\n\r\n    this.writeUint8Array(bytes);\r\n\r\n    return bytes.length;\r\n  }\r\n\r\n  /**\r\n   * Write a UTF8 string as a NULL terminated string.\r\n   * \r\n   * Returns the number of bytes that were written, including the terminating NULL.\r\n   */\r\n  writeNull(utf8: string): number {\r\n    const bytes = this.write(utf8);\r\n\r\n    this.index++;\r\n    this.remaining--;\r\n\r\n    return bytes + 1;\r\n  }\r\n\r\n  /**\r\n   * Write a binary string.\r\n   */\r\n  writeBinary(value: string): void {\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n    const count = value.length;\r\n\r\n    for (let i = 0; i < count; i++) {\r\n      uint8array[index + i] = value.charCodeAt(i);\r\n    }\r\n\r\n    this.index += count;\r\n  }\r\n\r\n  /**\r\n   * Write a 8 bit signed integer.\r\n   */\r\n  writeInt8(value: number): void {\r\n    this.uint8array[this.index] = int8ToUint8(value);\r\n    this.index += 1;\r\n  }\r\n\r\n  /**\r\n   * Write a 16 bit signed integer.\r\n   */\r\n  writeInt16(value: number): void {\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    int16ToUint8(uint8, value);\r\n\r\n    uint8array[index] = uint8[0];\r\n    uint8array[index + 1] = uint8[1];\r\n\r\n    this.index += 2;\r\n  }\r\n\r\n  /**\r\n   * Write a 32 bit signed integer.\r\n   */\r\n  writeInt32(value: number): void {\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    int32ToUint8(uint8, value);\r\n\r\n    uint8array[index] = uint8[0];\r\n    uint8array[index + 1] = uint8[1];\r\n    uint8array[index + 2] = uint8[2];\r\n    uint8array[index + 3] = uint8[3];\r\n\r\n    this.index += 4;\r\n  }\r\n\r\n  /**\r\n   * Write a 8 bit unsigned integer.\r\n   */\r\n  writeUint8(value: number): void {\r\n    this.uint8array[this.index] = value;\r\n    this.index += 1;\r\n  }\r\n\r\n  /**\r\n   * Write a 16 bit unsigned integer.\r\n   */\r\n  writeUint16(value: number): void {\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    uint16ToUint8(uint8, value);\r\n\r\n    uint8array[index] = uint8[0];\r\n    uint8array[index + 1] = uint8[1];\r\n\r\n    this.index += 2;\r\n  }\r\n\r\n  /**\r\n   * Write a 32 bit unsigned integer.\r\n   */\r\n  writeUint32(value: number): void {\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    uint32ToUint8(uint8, value);\r\n\r\n    uint8array[index] = uint8[0];\r\n    uint8array[index + 1] = uint8[1];\r\n    uint8array[index + 2] = uint8[2];\r\n    uint8array[index + 3] = uint8[3];\r\n\r\n    this.index += 4;\r\n  }\r\n\r\n  /**\r\n   * Write a 32 bit float.\r\n   */\r\n  writeFloat32(value: number): void {\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    float32ToUint8(uint8, value);\r\n\r\n    uint8array[index] = uint8[0];\r\n    uint8array[index + 1] = uint8[1];\r\n    uint8array[index + 2] = uint8[2];\r\n    uint8array[index + 3] = uint8[3];\r\n\r\n    this.index += 4;\r\n  }\r\n\r\n  /**\r\n   * Write a 64 bit float.\r\n   */\r\n  writeFloat64(value: number): void {\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    float64ToUint8(uint8, value);\r\n\r\n    uint8array[index] = uint8[0];\r\n    uint8array[index + 1] = uint8[1];\r\n    uint8array[index + 2] = uint8[2];\r\n    uint8array[index + 3] = uint8[3];\r\n    uint8array[index + 4] = uint8[4];\r\n    uint8array[index + 5] = uint8[5];\r\n    uint8array[index + 6] = uint8[6];\r\n    uint8array[index + 7] = uint8[7];\r\n\r\n    this.index += 8;\r\n  }\r\n\r\n  /**\r\n   * Write an array of 8 bit signed integers.\r\n   */\r\n  writeInt8Array(view: Int8Array): void {\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    for (let i = 0, l = view.length; i < l; i++) {\r\n      uint8array[index + i] = int8ToUint8(view[i]);\r\n    }\r\n\r\n    this.index += view.byteLength;\r\n  }\r\n\r\n  /**\r\n   * Write an array of 16 bit signed integers.\r\n   */\r\n  writeInt16Array(view: Int16Array): void {\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    for (let i = 0, l = view.length; i < l; i++) {\r\n      const offset = index + i * 2;\r\n\r\n      int16ToUint8(uint8, view[i]);\r\n\r\n      uint8array[offset] = uint8[0];\r\n      uint8array[offset + 1] = uint8[1];\r\n    }\r\n\r\n    this.index += view.byteLength;\r\n  }\r\n\r\n  /**\r\n   * Write an array of 32 bit signed integers.\r\n   */\r\n  writeInt32Array(view: Int32Array): void {\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    for (let i = 0, l = view.length; i < l; i++) {\r\n      const offset = index + i * 4;\r\n\r\n      int32ToUint8(uint8, view[i]);\r\n\r\n      uint8array[offset] = uint8[0];\r\n      uint8array[offset + 1] = uint8[1];\r\n      uint8array[offset + 2] = uint8[2];\r\n      uint8array[offset + 3] = uint8[3];\r\n    }\r\n\r\n    this.index += view.byteLength;\r\n  }\r\n\r\n  /**\r\n   * Write an array of 8 bit unsigned integers.\r\n   */\r\n  writeUint8Array(view: Uint8Array): void {\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    for (let i = 0, l = view.length; i < l; i++) {\r\n      uint8array[index + i] = view[i];\r\n    }\r\n\r\n    this.index += view.byteLength;\r\n  }\r\n\r\n  /**\r\n   * Write an array of 16 bit unsigned integers.\r\n   */\r\n  writeUint16Array(view: Uint16Array): void {\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    for (let i = 0, l = view.length; i < l; i++) {\r\n      const offset = index + i * 2;\r\n\r\n      uint16ToUint8(uint8, view[i]);\r\n\r\n      uint8array[offset] = uint8[0];\r\n      uint8array[offset + 1] = uint8[1];\r\n    }\r\n\r\n    this.index += view.byteLength;\r\n  }\r\n\r\n  /**\r\n   * Write an array of 32 bit unsigned integers.\r\n   */\r\n  writeUint32Array(view: Uint32Array): void {\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    for (let i = 0, l = view.length; i < l; i++) {\r\n      const offset = index + i * 4;\r\n\r\n      uint32ToUint8(uint8, view[i]);\r\n\r\n      uint8array[offset] = uint8[0];\r\n      uint8array[offset + 1] = uint8[1];\r\n      uint8array[offset + 2] = uint8[2];\r\n      uint8array[offset + 3] = uint8[3];\r\n    }\r\n\r\n    this.index += view.byteLength;\r\n  }\r\n\r\n  /**\r\n   * Write an array of 32 bit floats.\r\n   */\r\n  writeFloat32Array(view: Float32Array): void {\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    for (let i = 0, l = view.length; i < l; i++) {\r\n      const offset = index + i * 4;\r\n\r\n      float32ToUint8(uint8, view[i]);\r\n\r\n      uint8array[offset] = uint8[0];\r\n      uint8array[offset + 1] = uint8[1];\r\n      uint8array[offset + 2] = uint8[2];\r\n      uint8array[offset + 3] = uint8[3];\r\n    }\r\n\r\n    this.index += view.byteLength;\r\n  }\r\n\r\n  /**\r\n   * Write an array of 64 bit floats.\r\n   */\r\n  writeFloat64Array(view: Float64Array): void {\r\n    const index = this.index;\r\n    const uint8array = this.uint8array;\r\n\r\n    for (let i = 0, l = view.length; i < l; i++) {\r\n      const offset = index + i * 8;\r\n\r\n      float64ToUint8(uint8, view[i]);\r\n\r\n      uint8array[offset] = uint8[0];\r\n      uint8array[offset + 1] = uint8[1];\r\n      uint8array[offset + 2] = uint8[2];\r\n      uint8array[offset + 3] = uint8[3];\r\n      uint8array[offset + 4] = uint8[4];\r\n      uint8array[offset + 5] = uint8[5];\r\n      uint8array[offset + 6] = uint8[6];\r\n      uint8array[offset + 7] = uint8[7];\r\n    }\r\n\r\n    this.index += view.byteLength;\r\n  }\r\n}\r\n","import { bytesOf } from './bytesof';\r\n\r\n/**\r\n * A bit stream.\r\n */\r\nexport default class BitStream {\r\n  buffer: ArrayBuffer;\r\n  uint8array: Uint8Array;\r\n  index = 0;\r\n  byteLength: number;\r\n  bitBuffer = 0;\r\n  bits = 0;\r\n\r\n  constructor(buffer: ArrayBuffer | Uint8Array, byteOffset?: number, byteLength?: number) {\r\n    const bytes = bytesOf(buffer);\r\n\r\n    // For browsers not supporting the spec.\r\n    // Once upon a time I reported this issue on the Firefox tracker.\r\n    // Seems like Safari needs an issue report too.\r\n    byteOffset = byteOffset || 0;\r\n    byteLength = byteLength || bytes.length;\r\n\r\n    this.buffer = buffer;\r\n    this.uint8array = bytes.subarray(byteOffset, byteOffset + byteLength);\r\n    this.byteLength = buffer.byteLength;\r\n  }\r\n\r\n  /**\r\n   * Peek a number of bits.\r\n   */\r\n  peekBits(bits: number): number {\r\n    this.loadBits(bits);\r\n\r\n    return this.bitBuffer & ((1 << bits) - 1);\r\n  }\r\n\r\n  /**\r\n   * Read a number of bits.\r\n   */\r\n  readBits(bits: number): number {\r\n    const data = this.peekBits(bits);\r\n\r\n    this.bitBuffer >>>= bits;\r\n    this.bits -= bits;\r\n\r\n    return data;\r\n  }\r\n\r\n  /**\r\n   * Skip a number of bits.\r\n   */\r\n  skipBits(bits: number): void {\r\n    this.loadBits(bits);\r\n\r\n    this.bitBuffer >>>= bits;\r\n    this.bits -= bits;\r\n  }\r\n\r\n  /**\r\n   * Load more bits into the buffer.\r\n   */\r\n  loadBits(bits: number): void {\r\n    while (this.bits < bits) {\r\n      this.bitBuffer += this.uint8array[this.index] << this.bits;\r\n      this.bits += 8;\r\n      this.index += 1;\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Returns the base name of a file path.\r\n * \r\n * Path/To/My/File.ext => File.ext\r\n */\r\nexport function basename(path: string): string {\r\n  if (path && path.length) {\r\n    let index = path.lastIndexOf('/');\r\n\r\n    if (index !== -1) {\r\n      path = path.slice(index + 1);\r\n    }\r\n\r\n    index = path.lastIndexOf('\\\\');\r\n\r\n    if (index !== -1) {\r\n      path = path.slice(index + 1);\r\n    }\r\n\r\n    return path;\r\n  }\r\n\r\n  return '';\r\n}\r\n\r\n/**\r\n * Returns the extension name of a file path.\r\n * \r\n * Path/To/My/File.ext => .ext\r\n */\r\nexport function extname(path: string): string {\r\n  if (path && path.length) {\r\n    const index = path.lastIndexOf('.');\r\n\r\n    if (index !== -1) {\r\n      path = path.slice(index).toLowerCase();\r\n    }\r\n\r\n    return path;\r\n  }\r\n\r\n  return '';\r\n}\r\n\r\n/**\r\n * Returns the base name of a file path without the extension.\r\n * \r\n * Path/To/My/File.ext => File\r\n */\r\nexport function filename(path: string): string {\r\n  path = basename(path);\r\n\r\n  const index = path.lastIndexOf('.');\r\n\r\n  if (index !== -1) {\r\n    path = path.slice(0, index);\r\n  }\r\n\r\n  return path;\r\n}\r\n","/**\r\n * Detects if the given object is a PNG source.\r\n * \r\n * PNG starts with [89 50 4E 47 0D 0A 1A 0A]\r\n */\r\nexport function isPng(bytes: unknown): boolean {\r\n  if (bytes instanceof ArrayBuffer) {\r\n    bytes = new Uint8Array(bytes);\r\n  }\r\n\r\n  if (bytes instanceof Uint8Array) {\r\n    if (bytes[0] === 0x89 && bytes[1] === 0x50 && bytes[2] === 0x4e && bytes[3] === 0x47 && bytes[4] === 0x0d && bytes[5] === 0x0a && bytes[6] === 0x1a && bytes[7] === 0x0a) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n/**\r\n * Detects if the given object is a JPG source.\r\n * \r\n * JPG starts with [FF D8] and ends with [FF D9]\r\n */\r\nexport function isJpeg(bytes: unknown): boolean {\r\n  if (bytes instanceof ArrayBuffer) {\r\n    bytes = new Uint8Array(bytes);\r\n  }\r\n\r\n  if (bytes instanceof Uint8Array) {\r\n    if (bytes[0] === 0xff && bytes[1] === 0xd8 && bytes[bytes.length - 2] === 0xff && bytes[bytes.length - 1] === 0xd9) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n/**\r\n * Detects if the given object is a GIF source.\r\n * \r\n * GIF starts with [47 49 46 38 37 61] or [47 49 46 38 39 61]\r\n */\r\nexport function isGif(bytes: unknown): boolean {\r\n  if (bytes instanceof ArrayBuffer) {\r\n    bytes = new Uint8Array(bytes);\r\n  }\r\n\r\n  if (bytes instanceof Uint8Array) {\r\n    if (bytes[0] === 0x47 && bytes[1] === 0x49 && bytes[2] === 0x46 && bytes[3] === 0x38 && (bytes[4] === 0x37 || bytes[4] === 0x39) && bytes[5] === 0x61) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n/**\r\n * Detects if the given object is a WebP source.\r\n * \r\n * WebP starts with [52 49 46 46] followed by the file size - 8 followed by [57 45 42 50]\r\n */\r\nexport function isWebP(bytes: unknown): boolean {\r\n  if (bytes instanceof ArrayBuffer) {\r\n    bytes = new Uint8Array(bytes);\r\n  }\r\n\r\n  if (bytes instanceof Uint8Array) {\r\n    if (bytes[0] === 0x52 && bytes[1] === 0x49 && bytes[2] === 0x46 && bytes[3] === 0x46 && bytes[8] === 0x57 && bytes[9] === 0x45 && bytes[10] === 0x42 && bytes[11] === 0x50) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n","import * as glMatrix from 'gl-matrix';\r\nimport * as glMatrixAddon from './gl-matrix-addon';\r\nimport * as math from './math';\r\nimport * as canvas from './canvas';\r\nimport BinaryStream from './binarystream';\r\nimport BitStream from './bitstream';\r\nimport urlWithParams from './urlwithparams';\r\nimport * as path from './path';\r\nimport { isPng, isJpeg, isGif, isWebP } from './isformat';\r\n\r\nexport default {\r\n  glMatrix,\r\n  glMatrixAddon,\r\n  math,\r\n  canvas,\r\n  BinaryStream,\r\n  BitStream,\r\n  urlWithParams,\r\n  path,\r\n  isPng,\r\n  isJpeg,\r\n  isGif,\r\n  isWebP,\r\n};\r\n","/**\r\n * Appends url parameters given in params to the url given in src.\r\n * \r\n * The source url can have url parameters already in it.\r\n */\r\nexport default function urlWithParams(src: string, params: {[key: string]: string }): string {\r\n  if (params) {\r\n    const entries = Object.entries(params);\r\n\r\n    if (entries.length) {\r\n      const encodedParams = entries.map(([key, value]) => `${key}=${value}`).join('&');\r\n      let separator = '&';\r\n\r\n      if (src.indexOf('?') === -1) {\r\n        separator = '?';\r\n      }\r\n\r\n      return `${src}${separator}${encodedParams}`;\r\n    }\r\n  }\r\n\r\n  return src;\r\n}\r\n","/**\r\n * An INI section.\r\n */\r\nexport type IniSection = Map<string, string>;\r\n\r\n/**\r\n * An INI file.\r\n */\r\nexport class IniFile {\r\n  properties: Map<string, string> = new Map();\r\n  sections: Map<string, IniSection> = new Map();\r\n\r\n  load(buffer: string): void {\r\n    // All properties added until a section is reached are added to the properties map.\r\n    // Once a section is reached, any further properties will be added to it until matching another section, etc.\r\n    let section: IniSection | null = this.properties;\r\n    const sections = this.sections;\r\n\r\n    for (const line of buffer.split('\\r\\n')) {\r\n      // INI defines comments as starting with a semicolon ';'.\r\n      // However, Warcraft 3 INI files use normal C comments '//'.\r\n      // In addition, Warcraft 3 files have empty lines.\r\n      // Therefore, ignore any line matching any of these conditions.\r\n      if (line.length && !line.startsWith('//') && !line.startsWith(';')) {\r\n        let match = line.match(/^\\[(.+?)\\]/);\r\n\r\n        if (match) {\r\n          const name = match[1].trim();\r\n\r\n          section = <IniSection | null>sections.get(name);\r\n\r\n          if (!section) {\r\n            section = new Map();\r\n\r\n            sections.set(name, section);\r\n          }\r\n        } else {\r\n          match = line.match(/^(.+?)=(.*?)$/);\r\n\r\n          if (match) {\r\n            let value = match[2];\r\n\r\n            if (value[0] === '\"') {\r\n              value = value.slice(1, -1);\r\n            }\r\n\r\n            section.set(match[1], value);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  save(): string {\r\n    const lines = [];\r\n\r\n    for (const [key, value] of this.properties) {\r\n      lines.push(`${key}=${value}`);\r\n    }\r\n\r\n    for (const [name, section] of this.sections) {\r\n      lines.push(`[${name}]`);\r\n\r\n      for (const [key, value] of section) {\r\n        lines.push(`${key}=${value}`);\r\n      }\r\n    }\r\n\r\n    return lines.join('\\r\\n');\r\n  }\r\n\r\n  getSection(name: string): IniSection | undefined {\r\n    return this.sections.get(name);\r\n  }\r\n}\r\n","import { IniFile as File } from './file';\r\n\r\nexport default {\r\n  File,\r\n};\r\n","/**\r\n * A SLK table file.\r\n */\r\nexport default class SlkFile {\r\n  rows: string[][] = [];\r\n\r\n  load(buffer: string): void {\r\n    if (!buffer.startsWith('ID')) {\r\n      throw new Error('WrongMagicNumber');\r\n    }\r\n\r\n    const rows = this.rows;\r\n    let x = 0;\r\n    let y = 0;\r\n\r\n    for (const line of buffer.split('\\n')) {\r\n      // The B command is supposed to define the total number of columns and rows, however in UbetSplatData.slk it gives wrong information\r\n      // Therefore, just ignore it, since JavaScript arrays grow as they want either way\r\n      if (line[0] !== 'B') {\r\n        for (const token of line.split(';')) {\r\n          const op = token[0];\r\n          const valueString = token.substring(1).trim();\r\n          let value;\r\n\r\n          if (op === 'X') {\r\n            x = parseInt(valueString, 10) - 1;\r\n          } else if (op === 'Y') {\r\n            y = parseInt(valueString, 10) - 1;\r\n          } else if (op === 'K') {\r\n            if (!rows[y]) {\r\n              rows[y] = [];\r\n            }\r\n\r\n            if (valueString[0] === '\"') {\r\n              value = valueString.slice(1, -1);\r\n            } else {\r\n              value = valueString;\r\n            }\r\n\r\n            rows[y][x] = value;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  save(): string {\r\n    const rows = this.rows;\r\n    const rowCount = rows.length;\r\n    const lines = [];\r\n    let biggestColumn = 0;\r\n\r\n    for (let y = 0; y < rowCount; y++) {\r\n      const row = rows[y];\r\n      const columnCount = row.length;\r\n\r\n      if (columnCount > biggestColumn) {\r\n        biggestColumn = columnCount;\r\n      }\r\n\r\n      let firstOfRow = true;\r\n\r\n      for (let x = 0; x < columnCount; x++) {\r\n        const value = row[x];\r\n\r\n        if (value !== undefined) {\r\n          let encoded;\r\n\r\n          if (typeof value === 'string') {\r\n            encoded = `\"${value}\"`;\r\n          } else if (typeof value === 'boolean') {\r\n            if (value) {\r\n              encoded = 'TRUE';\r\n            } else {\r\n              encoded = 'FALSE';\r\n            }\r\n          } else {\r\n            encoded = `${value}`;\r\n          }\r\n\r\n          if (firstOfRow) {\r\n            firstOfRow = false;\r\n\r\n            lines.push(`C;X${x + 1};Y${y + 1};K${encoded}`);\r\n          } else {\r\n            lines.push(`C;X${x + 1};K${encoded}`);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return `ID;P\\r\\nB;X${biggestColumn};Y${rowCount}\\r\\n${lines.join('\\r\\n')}\\r\\nE`;\r\n  }\r\n}\r\n","import File from './file';\r\n\r\nexport default {\r\n  File,\r\n};\r\n","/**\r\n * Reverses a string.\r\n */\r\nexport default function reverse(s: string): string {\r\n  return [...s].reverse().join('');\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport IndexEntry, { EntryType, SingleEntryType } from './indexentry';\r\n\r\n/**\r\n * A reference.\r\n */\r\nexport default class Reference {\r\n  index: IndexEntry[] | null = null;\r\n  entries = 0;\r\n  id = 0;\r\n  flags = 0;\r\n\r\n  load(stream: BinaryStream, index: IndexEntry[]): void {\r\n    this.index = index;\r\n    this.entries = stream.readUint32();\r\n    this.id = stream.readUint32();\r\n    this.flags = stream.readUint32();\r\n  }\r\n\r\n  /**\r\n   * Get the entries this index entry references.\r\n   */\r\n  get(): EntryType | undefined {\r\n    if (this.index && this.id !== 0 && this.entries !== 0) {\r\n      return this.index[this.id].entries;\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Get the first entry this index entry references.\r\n   */\r\n  first(): SingleEntryType | undefined {\r\n    const entries = this.get();\r\n\r\n    if (entries) {\r\n      return entries[0];\r\n    }\r\n\r\n    return;\r\n  }\r\n}\r\n","import reverse from '../../common/stringreverse';\r\nimport BinaryStream from '../../common/binarystream';\r\nimport IndexEntry from './indexentry';\r\nimport Reference from './reference';\r\n\r\n/**\r\n * The M3 header.\r\n */\r\nexport default class Md34 {\r\n  version = -1;\r\n  tag = '';\r\n  offset = 0;\r\n  entries = 0;\r\n  model = new Reference();\r\n\r\n  load(stream: BinaryStream, version: number, index: IndexEntry[]): void {\r\n    this.version = version;\r\n    this.tag = reverse(stream.readBinary(4));\r\n    this.offset = stream.readUint32();\r\n    this.entries = stream.readUint32();\r\n    this.model.load(stream, index);\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\n\r\n/**\r\n * A bounding sphere.\r\n */\r\nexport default class BoundingSphere {\r\n  min = new Float32Array(3);\r\n  max = new Float32Array(3);\r\n  radius = 0;\r\n\r\n  load(stream: BinaryStream): void {\r\n    stream.readFloat32Array(this.min);\r\n    stream.readFloat32Array(this.max);\r\n    this.radius = stream.readFloat32();\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\n\r\n/**\r\n * A bounding shape.\r\n */\r\nexport default class BoundingShape {\r\n  shape = -1;\r\n  bone = -1;\r\n  unknown0 = 0;\r\n  matrix = new Float32Array(16);\r\n  unknown1 = 0;\r\n  unknown2 = 0;\r\n  unknown3 = 0;\r\n  unknown4 = 0;\r\n  unknown5 = 0;\r\n  unknown6 = 0;\r\n  size = new Float32Array(3);\r\n\r\n  load(stream: BinaryStream): void {\r\n    this.shape = stream.readUint32();\r\n    this.bone = stream.readInt16();\r\n    this.unknown0 = stream.readUint16();\r\n    stream.readFloat32Array(this.matrix);\r\n    this.unknown1 = stream.readUint32();\r\n    this.unknown2 = stream.readUint32();\r\n    this.unknown3 = stream.readUint32();\r\n    this.unknown4 = stream.readUint32();\r\n    this.unknown5 = stream.readUint32();\r\n    this.unknown6 = stream.readUint32();\r\n    stream.readFloat32Array(this.size);\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\n\r\n/**\r\n * The base class to all animation references.\r\n */\r\nexport abstract class AnimationReference {\r\n  interpolationType = 0;\r\n  animFlags = 0;\r\n  animId = -1;\r\n  initValue: number | Uint8Array | Float32Array | null = null;\r\n  nullValue: number | Uint8Array | Float32Array | null = null;\r\n\r\n  abstract readInitNullValues(stream: BinaryStream): void;\r\n\r\n  load(stream: BinaryStream): void {\r\n    this.interpolationType = stream.readUint16();\r\n    this.animFlags = stream.readUint16();\r\n    this.animId = stream.readUint32();\r\n\r\n    this.readInitNullValues(stream);\r\n\r\n    stream.skip(4); // ?\r\n  }\r\n}\r\n\r\n/**\r\n * A pixel animation reference.\r\n */\r\nexport class PixelAnimationReference extends AnimationReference {\r\n  readInitNullValues(stream: BinaryStream): void {\r\n    this.initValue = stream.readUint8Array(4);\r\n    this.nullValue = stream.readUint8Array(4);\r\n  }\r\n}\r\n\r\n/**\r\n * A uint16 animation reference.\r\n */\r\nexport class Uint16AnimationReference extends AnimationReference {\r\n  readInitNullValues(stream: BinaryStream): void {\r\n    this.initValue = stream.readUint16();\r\n    this.nullValue = stream.readUint16();\r\n  }\r\n}\r\n\r\n/**\r\n * A uint32 animation reference.\r\n */\r\nexport class Uint32AnimationReference extends AnimationReference {\r\n  readInitNullValues(stream: BinaryStream): void {\r\n    this.initValue = stream.readUint32();\r\n    this.nullValue = stream.readUint32();\r\n  }\r\n}\r\n\r\n/**\r\n * A float32 animation reference.\r\n */\r\nexport class Float32AnimationReference extends AnimationReference {\r\n  readInitNullValues(stream: BinaryStream): void {\r\n    this.initValue = stream.readFloat32();\r\n    this.nullValue = stream.readFloat32();\r\n  }\r\n}\r\n\r\n/**\r\n * A vec2 animation reference.\r\n */\r\nexport class Vector2AnimationReference extends AnimationReference {\r\n  readInitNullValues(stream: BinaryStream): void {\r\n    this.initValue = stream.readFloat32Array(2);\r\n    this.nullValue = stream.readFloat32Array(2);\r\n  }\r\n}\r\n\r\n/**\r\n * A vec3 animation reference.\r\n */\r\nexport class Vector3AnimationReference extends AnimationReference {\r\n  readInitNullValues(stream: BinaryStream): void {\r\n    this.initValue = stream.readFloat32Array(3);\r\n    this.nullValue = stream.readFloat32Array(3);\r\n  }\r\n}\r\n\r\n/**\r\n * A quat animation reference.\r\n */\r\nexport class Vector4AnimationReference extends AnimationReference {\r\n  readInitNullValues(stream: BinaryStream): void {\r\n    this.initValue = stream.readFloat32Array(4);\r\n    this.nullValue = stream.readFloat32Array(4);\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport IndexEntry from './indexentry';\r\nimport Reference from './reference';\r\n\r\n/**\r\n * Sequence data.\r\n */\r\nexport default class Sd {\r\n  version = -1;\r\n  keys = new Reference();\r\n  flags = 0;\r\n  biggestKey = -1;\r\n  values = new Reference();\r\n\r\n  load(stream: BinaryStream, version: number, index: IndexEntry[]): void {\r\n    this.version = version;\r\n    this.keys.load(stream, index);\r\n    this.flags = stream.readUint32();\r\n    this.biggestKey = stream.readUint32();\r\n    this.values.load(stream, index);\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport IndexEntry from './indexentry';\r\n\r\n/**\r\n * An unsupported entry.\r\n * \r\n * This is used for entries that have known structures (or at least sizes), but this parser isn't going to actually parse.\r\n * The entry will contain its own reader and version, in case the client code wants to do anything with it.\r\n */\r\nexport default class UnsupportedEntry {\r\n  stream: BinaryStream;\r\n  version: number;\r\n  index: IndexEntry[];\r\n\r\n  constructor(stream: BinaryStream, version: number, index: IndexEntry[]) {\r\n    this.stream = stream;\r\n    this.version = version;\r\n    this.index = index;\r\n  }\r\n}\r\n","import reverse from '../../common/stringreverse';\r\nimport BinaryStream from '../../common/binarystream';\r\nimport Md34 from './md34';\r\nimport ModelHeader from './modelheader';\r\nimport Sequence from './sequence';\r\nimport Stc from './stc';\r\nimport Stg from './stg';\r\nimport Sts from './sts';\r\nimport Bone from './bone';\r\nimport Division from './division';\r\nimport Region from './region';\r\nimport Batch from './batch';\r\nimport MaterialReference from './materialreference';\r\nimport StandardMaterial from './standardmaterial';\r\nimport Layer from './layer';\r\nimport Event from './event';\r\nimport BoundingSphere from './boundingsphere';\r\nimport AttachmentPoint from './attachmentpoint';\r\nimport Camera from './camera';\r\nimport Sd from './sd';\r\nimport UnsupportedEntry from './unsupportedentry';\r\n\r\n\r\n// Mapping from entry tags, to their constructors and known version->size values.\r\nconst tagMapping = {\r\n  // Objects\r\n  MD34: [Md34, { 11: 24 }],\r\n  MODL: [ModelHeader, { 23: 784, 25: 808, 26: 820, 28: 844, 29: 856 }],\r\n  SEQS: [Sequence, { 1: 96, 2: 92 }],\r\n  STC_: [Stc, { 4: 204 }],\r\n  STG_: [Stg, { 0: 24 }],\r\n  STS_: [Sts, { 0: 28 }],\r\n  BONE: [Bone, { 1: 160 }],\r\n  DIV_: [Division, { 2: 52 }],\r\n  REGN: [Region, { 3: 36, 4: 40, 5: 48 }],\r\n  BAT_: [Batch, { 1: 14 }],\r\n  MATM: [MaterialReference, { 0: 8 }],\r\n  MAT_: [StandardMaterial, { 15: 268, 16: 280, 17: 280, 18: 280, 19: 340 }],\r\n  LAYR: [Layer, { 22: 356, 24: 436, 25: 468, 26: 464 }],\r\n  EVNT: [Event, { 0: 96, 1: 104, 2: 108 }],\r\n  BNDS: [BoundingSphere, { 0: 28 }],\r\n  ATT_: [AttachmentPoint, { 1: 20 }],\r\n  CAM_: [Camera, { 3: 180, 5: 264 }],\r\n  SDEV: [Sd, { 0: 32 }],\r\n  SDU6: [Sd, { 0: 32 }],\r\n  SDFG: [Sd, { 0: 32 }],\r\n  SDS6: [Sd, { 0: 32 }],\r\n  SDR3: [Sd, { 0: 32 }],\r\n  SD2V: [Sd, { 0: 32 }],\r\n  SD3V: [Sd, { 0: 32 }],\r\n  SD4Q: [Sd, { 0: 32 }],\r\n  SDCC: [Sd, { 0: 32 }],\r\n  SDMB: [Sd, { 0: 32 }],\r\n  FLAG: [Sd, { 0: 32 }],\r\n  // Unsupported entries\r\n  MSEC: [UnsupportedEntry, { 1: 72 }],\r\n  LITE: [UnsupportedEntry, { 7: 212 }],\r\n  ATVL: [UnsupportedEntry, { 0: 116 }],\r\n  PATU: [UnsupportedEntry, { 4: 152 }],\r\n  TRGD: [UnsupportedEntry, { 0: 24 }],\r\n  DIS_: [UnsupportedEntry, { 4: 68 }],\r\n  CMS_: [UnsupportedEntry, { 0: 24 }],\r\n  CMP_: [UnsupportedEntry, { 2: 28 }],\r\n  TER_: [UnsupportedEntry, { 0: 24, 1: 28 }],\r\n  VOL_: [UnsupportedEntry, { 0: 84 }],\r\n  VON_: [UnsupportedEntry, { 0: 268 }],\r\n  CREP: [UnsupportedEntry, { 0: 24, 1: 28 }],\r\n  STBM: [UnsupportedEntry, { 0: 48 }],\r\n  LFSB: [UnsupportedEntry, { 2: 56 }],\r\n  LFLR: [UnsupportedEntry, { 2: 80, 3: 152 }],\r\n  PAR_: [UnsupportedEntry, { 12: 1316, 17: 1460, 18: 1464, 19: 1464, 21: 1464, 22: 1484, 23: 1492, 24: 1496 }],\r\n  PARC: [UnsupportedEntry, { 0: 40 }],\r\n  PROJ: [UnsupportedEntry, { 4: 388, 5: 382 }],\r\n  PHYJ: [UnsupportedEntry, { 0: 180 }],\r\n  PHCC: [UnsupportedEntry, { 0: 76 }],\r\n  PHAC: [UnsupportedEntry, { 0: 32 }],\r\n  PHCL: [UnsupportedEntry, { 2: 128 }],\r\n  FOR_: [UnsupportedEntry, { 1: 104, 2: 104 }],\r\n  DMSE: [UnsupportedEntry, { 0: 4 }],\r\n  PHSH: [UnsupportedEntry, { 1: 132, 3: 300 }],\r\n  PHRB: [UnsupportedEntry, { 2: 104, 4: 80 }],\r\n  SSGS: [UnsupportedEntry, { 1: 108 }],\r\n  BBSC: [UnsupportedEntry, { 0: 48 }],\r\n  SRIB: [UnsupportedEntry, { 0: 272 }],\r\n  RIB_: [UnsupportedEntry, { 6: 748, 8: 756, 9: 760 }],\r\n  IKJT: [UnsupportedEntry, { 0: 32 }],\r\n  SHBX: [UnsupportedEntry, { 0: 64 }],\r\n  WRP_: [UnsupportedEntry, { 1: 132 }],\r\n};\r\n\r\nexport type EntryType = Md34[] | ModelHeader[] | Sequence[] | Stc[] | Stg[] | Sts[] | Bone[] | Division[] | Region[] | Batch[] | MaterialReference[] | StandardMaterial[] | Layer[] | Event[] | BoundingSphere[] | AttachmentPoint[] | Camera[] | Sd[] | UnsupportedEntry[] | string | Int16Array | Int32Array | Uint8Array | Uint16Array | Uint32Array | Float32Array | Float32Array[];\r\nexport type SingleEntryType = Md34 | ModelHeader | Sequence | Stc | Stg | Sts | Bone | Division | Region | Batch | MaterialReference | StandardMaterial | Layer | Event | BoundingSphere | AttachmentPoint | Camera | Sd | UnsupportedEntry | string | number | Float32Array;\r\n\r\n/**\r\n * An index entry.\r\n */\r\nexport default class IndexEntry {\r\n  index: IndexEntry[];\r\n  tag: string;\r\n  offset: number;\r\n  version: number;\r\n  entries: EntryType;\r\n\r\n  constructor(stream: BinaryStream, index: IndexEntry[]) {\r\n    const tag = reverse(stream.readBinary(4));\r\n    const offset = stream.readUint32();\r\n    const entriesCount = stream.readUint32();\r\n    const version = stream.readUint32();\r\n\r\n    this.index = index;\r\n    this.tag = tag;\r\n    this.offset = offset;\r\n    this.version = version;\r\n\r\n    const mapping = tagMapping[tag];\r\n    const readerOffset = stream.index;\r\n\r\n    stream.seek(offset);\r\n\r\n    // This is an object\r\n    if (mapping) {\r\n      const constructor = mapping[0];\r\n      const entrySize = mapping[1][version];\r\n\r\n      if (!entrySize) {\r\n        // Yey found a new version!\r\n        throw new Error(': Unsupported object version - tag ' + tag + ' and version ' + version);\r\n      }\r\n\r\n      this.entries = [];\r\n\r\n      for (let i = 0, l = entriesCount; i < l; i++) {\r\n        // A sub stream is given for each object constructor.\r\n        // This allows for parsing to work consistently, even if we don't quite know exactly how the structures look.\r\n        // If some bytes aren't read, the error will not carry to the next object.\r\n        // Since new versions of objects usually add data to the end, this allows the parser to work, even if trying to load newer versions.\r\n        // Of course, the new version size needs to be added to IndexEntry.tagMapping, when finding one.\r\n        if (constructor === UnsupportedEntry) {\r\n          this.entries[i] = new UnsupportedEntry(stream.substream(entrySize), version, index);\r\n        } else {\r\n          const entry = new constructor();\r\n\r\n          entry.load(stream.substream(entrySize), version, index);\r\n\r\n          this.entries[i] = entry;\r\n        }\r\n      }\r\n      // This is maybe a typed array?\r\n    } else if (tag === 'CHAR' || tag === 'SCHR') {\r\n      this.entries = stream.read(entriesCount);\r\n    } else if (tag === 'U8__') {\r\n      this.entries = stream.readUint8Array(entriesCount);\r\n    } else if (tag === 'U16_') {\r\n      this.entries = stream.readUint16Array(entriesCount);\r\n    } else if (tag === 'U32_') {\r\n      this.entries = stream.readUint32Array(entriesCount);\r\n    } else if (tag === 'I16_') {\r\n      this.entries = stream.readInt16Array(entriesCount);\r\n    } else if (tag === 'I32_') {\r\n      this.entries = stream.readInt32Array(entriesCount);\r\n    } else if (tag === 'REAL') {\r\n      this.entries = stream.readFloat32Array(entriesCount);\r\n    } else if (tag === 'VEC2') {\r\n      this.entries = [];\r\n\r\n      for (let i = 0; i < entriesCount; i++) {\r\n        this.entries[i] = stream.readFloat32Array(2);\r\n      }\r\n    } else if (tag === 'VEC3' || tag === 'SVC3') {\r\n      this.entries = [];\r\n\r\n      for (let i = 0; i < entriesCount; i++) {\r\n        this.entries[i] = stream.readFloat32Array(3);\r\n      }\r\n    } else if (tag === 'VEC4' || tag === 'QUAT') {\r\n      this.entries = [];\r\n\r\n      for (let i = 0; i < entriesCount; i++) {\r\n        this.entries[i] = stream.readFloat32Array(4);\r\n      }\r\n    } else if (tag === 'IREF') {\r\n      this.entries = [];\r\n\r\n      for (let i = 0; i < entriesCount; i++) {\r\n        this.entries[i] = stream.readFloat32Array(16);\r\n      }\r\n    } else {\r\n      this.entries = [];\r\n\r\n      throw new Error(': Unsupported object tag - tag ' + tag + ' and version ' + version);\r\n    }\r\n\r\n    stream.seek(readerOffset);\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport IndexEntry from './indexentry';\r\nimport Reference from './reference';\r\nimport BoundingSphere from './boundingsphere';\r\nimport BoundingShape from './boundingshape';\r\n\r\n/**\r\n * The model information structure.\r\n */\r\nexport default class ModelHeader {\r\n  version = -1;\r\n  modelName = new Reference();\r\n  flags = 0;\r\n  sequences = new Reference();\r\n  stc = new Reference();\r\n  stg = new Reference();\r\n  unknown0 = 0;\r\n  unknown1 = 0;\r\n  unknown2 = 0;\r\n  unknown3 = 0;\r\n  sts = new Reference();\r\n  bones = new Reference();\r\n  numberOfBonesToCheckForSkin = 0;\r\n  vertexFlags = 0;\r\n  vertices = new Reference();\r\n  divisions = new Reference();\r\n  boneLookup = new Reference();\r\n  boundings = new BoundingSphere();\r\n  unknown4To20 = new Uint32Array(16);\r\n  attachmentPoints = new Reference();\r\n  attachmentPointAddons = new Reference();\r\n  ligts = new Reference();\r\n  shbxData = new Reference();\r\n  cameras = new Reference();\r\n  unknown21 = new Reference();\r\n  materialReferences = new Reference();\r\n  materials: Reference[] = [];\r\n  particleEmitters = new Reference();\r\n  particleEmitterCopies = new Reference();\r\n  ribbonEmitters = new Reference();\r\n  projections = new Reference();\r\n  forces = new Reference();\r\n  warps = new Reference();\r\n  unknown22 = new Reference();\r\n  rigidBodies = new Reference();\r\n  unknown23 = new Reference();\r\n  physicsJoints = new Reference();\r\n  clothBehavior = new Reference();\r\n  unknown24 = new Reference();\r\n  ikjtData = new Reference();\r\n  unknown25 = new Reference();\r\n  unknown26 = new Reference();\r\n  partsOfTurrentBehaviors = new Reference();\r\n  turrentBehaviors = new Reference();\r\n  absoluteInverseBoneRestPositions = new Reference();\r\n  tightHitTest = new BoundingShape();\r\n  fuzzyHitTestObjects = new Reference();\r\n  attachmentVolumes = new Reference();\r\n  attachmentVolumesAddon0 = new Reference();\r\n  attachmentVolumesAddon1 = new Reference();\r\n  billboardBehaviors = new Reference();\r\n  tmdData = new Reference();\r\n  unknown27 = 0;\r\n  unknown28 = new Reference();\r\n\r\n  constructor() {\r\n    for (let i = 0; i < 11; i++) {\r\n      this.materials[i] = new Reference();\r\n    }\r\n  }\r\n\r\n  load(stream: BinaryStream, version: number, index: IndexEntry[]): void {\r\n    this.version = version;\r\n    this.modelName.load(stream, index);\r\n    this.flags = stream.readUint32();\r\n    this.sequences.load(stream, index);\r\n    this.stc.load(stream, index);\r\n    this.stg.load(stream, index);\r\n    this.unknown0 = stream.readFloat32();\r\n    this.unknown1 = stream.readFloat32();\r\n    this.unknown2 = stream.readFloat32();\r\n    this.unknown3 = stream.readFloat32();\r\n    this.sts.load(stream, index);\r\n    this.bones.load(stream, index);\r\n    this.numberOfBonesToCheckForSkin = stream.readUint32();\r\n    this.vertexFlags = stream.readUint32();\r\n    this.vertices.load(stream, index);\r\n    this.divisions.load(stream, index);\r\n    this.boneLookup.load(stream, index);\r\n    this.boundings.load(stream);\r\n    stream.readUint32Array(this.unknown4To20);\r\n    this.attachmentPoints.load(stream, index);\r\n    this.attachmentPointAddons.load(stream, index);\r\n    this.ligts.load(stream, index);\r\n    this.shbxData.load(stream, index);\r\n    this.cameras.load(stream, index);\r\n    this.unknown21.load(stream, index);\r\n    this.materialReferences.load(stream, index);\r\n\r\n    for (let i = 0; i < 7; i++) {\r\n      this.materials[i].load(stream, index); // Standard, Displacement, Composite, Terrain, Volume, ?, Creep\r\n    }\r\n\r\n    if (version > 24) {\r\n      this.materials[7].load(stream, index); // Volume noise\r\n    }\r\n\r\n    if (version > 25) {\r\n      this.materials[8].load(stream, index); // Splat terrain bake\r\n    }\r\n\r\n    if (version > 27) {\r\n      this.materials[9].load(stream, index); // ?\r\n    }\r\n\r\n    if (version > 28) {\r\n      this.materials[10].load(stream, index); // Lens flare\r\n    }\r\n\r\n    this.particleEmitters.load(stream, index);\r\n    this.particleEmitterCopies.load(stream, index);\r\n    this.ribbonEmitters.load(stream, index);\r\n    this.projections.load(stream, index);\r\n    this.forces.load(stream, index);\r\n    this.warps.load(stream, index);\r\n    this.unknown22.load(stream, index); // ?\r\n    this.rigidBodies.load(stream, index);\r\n    this.unknown23.load(stream, index); // ?\r\n    this.physicsJoints.load(stream, index);\r\n\r\n    if (version > 27) {\r\n      this.clothBehavior.load(stream, index);\r\n    }\r\n\r\n    this.unknown24.load(stream, index); // ?\r\n    this.ikjtData.load(stream, index);\r\n    this.unknown25.load(stream, index); // ?\r\n\r\n    if (version > 24) {\r\n      this.unknown26.load(stream, index); // ?\r\n    }\r\n\r\n    this.partsOfTurrentBehaviors.load(stream, index);\r\n    this.turrentBehaviors.load(stream, index);\r\n    this.absoluteInverseBoneRestPositions.load(stream, index);\r\n    this.tightHitTest.load(stream);\r\n    this.fuzzyHitTestObjects.load(stream, index);\r\n    this.attachmentVolumes.load(stream, index);\r\n    this.attachmentVolumesAddon0.load(stream, index);\r\n    this.attachmentVolumesAddon1.load(stream, index);\r\n    this.billboardBehaviors.load(stream, index);\r\n    this.tmdData.load(stream, index);\r\n    this.unknown27 = stream.readUint32(); // ?\r\n    this.unknown28.load(stream, index); // ?\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport IndexEntry from './indexentry';\r\nimport Reference from './reference';\r\nimport BoundingSphere from './boundingsphere';\r\n\r\n/**\r\n * A sequence.\r\n */\r\nexport default class Sequence {\r\n  version = -1;\r\n  name = new Reference();\r\n  interval = new Uint32Array(2);\r\n  movementSpeed = 0;\r\n  flags = 0;\r\n  frequency = 0;\r\n  boundingSphere = new BoundingSphere();\r\n\r\n  load(stream: BinaryStream, version: number, index: IndexEntry[]): void {\r\n    this.version = version;\r\n\r\n    stream.skip(8); // ?\r\n\r\n    this.name.load(stream, index);\r\n    stream.readUint32Array(this.interval);\r\n    this.movementSpeed = stream.readFloat32();\r\n    this.flags = stream.readUint32();\r\n    this.frequency = stream.readUint32();\r\n\r\n    stream.skip(12); // ?\r\n\r\n    if (version < 2) {\r\n      stream.skip(4); // ?\r\n    }\r\n\r\n    this.boundingSphere.load(stream);\r\n\r\n    stream.skip(12); // ?\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport IndexEntry from './indexentry';\r\nimport Reference from './reference';\r\n\r\n/**\r\n * An animation timeline.\r\n */\r\nexport default class Stc {\r\n  version = -1;\r\n  name = new Reference();\r\n  runsConcurrent = 0;\r\n  priority = 0;\r\n  stsIndex = -1;\r\n  stsIndexCopy = -1;\r\n  animIds = new Reference();\r\n  animRefs = new Reference();\r\n  sd: Reference[] = [];\r\n\r\n  constructor() {\r\n    for (let i = 0; i < 13; i++) {\r\n      this.sd[i] = new Reference();\r\n    }\r\n  }\r\n\r\n  load(stream: BinaryStream, version: number, index: IndexEntry[]): void {\r\n    this.version = version;\r\n    this.name.load(stream, index);\r\n    this.runsConcurrent = stream.readUint16();\r\n    this.priority = stream.readUint16();\r\n    this.stsIndex = stream.readUint16();\r\n    this.stsIndexCopy = stream.readUint16(); // ?\r\n    this.animIds.load(stream, index);\r\n    this.animRefs.load(stream, index);\r\n\r\n    stream.skip(4); // ?\r\n\r\n    for (let i = 0; i < 13; i++) {\r\n      this.sd[i].load(stream, index);\r\n    }\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport IndexEntry from './indexentry';\r\nimport Reference from './reference';\r\n\r\n/**\r\n * An animation getter.\r\n */\r\nexport default class Stg {\r\n  version = -1;\r\n  name = new Reference();\r\n  stcIndices = new Reference();\r\n\r\n  load(stream: BinaryStream, version: number, index: IndexEntry[]): void {\r\n    this.version = version;\r\n    this.name.load(stream, index);\r\n    this.stcIndices.load(stream, index);\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport IndexEntry from './indexentry';\r\nimport Reference from './reference';\r\n\r\n/**\r\n * An animation validator.\r\n */\r\nexport default class Sts {\r\n  version = -1;\r\n  animIds = new Reference();\r\n\r\n  load(reader: BinaryStream, version: number, index: IndexEntry[]): void {\r\n    this.version = version;\r\n    this.animIds.load(reader, index);\r\n\r\n    reader.skip(16); // ?\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport IndexEntry from './indexentry';\r\nimport Reference from './reference';\r\nimport { Uint32AnimationReference, Vector3AnimationReference, Vector4AnimationReference } from './animationreference';\r\n\r\n/**\r\n * A bone.\r\n */\r\nexport default class Bone {\r\n  version = -1;\r\n  unknown0 = 0;\r\n  name = new Reference();\r\n  flags = 0;\r\n  parent = -1;\r\n  unknown1 = 0;\r\n  location = new Vector3AnimationReference();\r\n  rotation = new Vector4AnimationReference();\r\n  scale = new Vector3AnimationReference();\r\n  visibility = new Uint32AnimationReference();\r\n\r\n  load(stream: BinaryStream, version: number, index: IndexEntry[]): void {\r\n    this.version = version;\r\n    this.unknown0 = stream.readInt32();\r\n    this.name.load(stream, index);\r\n    this.flags = stream.readUint32();\r\n    this.parent = stream.readInt16();\r\n    this.unknown1 = stream.readUint16();\r\n    this.location.load(stream);\r\n    this.rotation.load(stream);\r\n    this.scale.load(stream);\r\n    this.visibility.load(stream);\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport IndexEntry from './indexentry';\r\nimport Reference from './reference';\r\n\r\n/**\r\n * A division.\r\n */\r\nexport default class Division {\r\n  version = -1;\r\n  triangles = new Reference();\r\n  regions = new Reference();\r\n  batches = new Reference();\r\n  MSEC = new Reference();\r\n  unknown0 = 0;\r\n\r\n  load(stream: BinaryStream, version: number, index: IndexEntry[]): void {\r\n    this.version = version;\r\n    this.triangles.load(stream, index);\r\n    this.regions.load(stream, index);\r\n    this.batches.load(stream, index);\r\n    this.MSEC.load(stream, index);\r\n    this.unknown0 = stream.readUint32();\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport IndexEntry from './indexentry';\r\n\r\n/**\r\n * A region.\r\n */\r\nexport default class Region {\r\n  version = -1;\r\n  unknown0 = 0;\r\n  unknown1 = 0;\r\n  firstVertexIndex = -1;\r\n  verticesCount = 0;\r\n  firstTriangleIndex = -1;\r\n  triangleIndicesCount = 0;\r\n  bonesCount = 0;\r\n  firstBoneLookupIndex = -1;\r\n  boneLookupIndicesCount = 0;\r\n  unknown2 = 0;\r\n  boneWeightPairsCount = 0;\r\n  unknown3 = 0;\r\n  rootBoneIndex = -1;\r\n  unknown4 = 0;\r\n  unknown5 = new Uint8Array(8);\r\n\r\n  load(stream: BinaryStream, version: number, _index: IndexEntry[]): void {\r\n    this.version = version;\r\n    this.unknown0 = stream.readUint32();\r\n    this.unknown1 = stream.readUint32();\r\n    this.firstVertexIndex = stream.readUint32();\r\n    this.verticesCount = stream.readUint32();\r\n    this.firstTriangleIndex = stream.readUint32();\r\n    this.triangleIndicesCount = stream.readUint32();\r\n    this.bonesCount = stream.readUint16();\r\n    this.firstBoneLookupIndex = stream.readUint16();\r\n    this.boneLookupIndicesCount = stream.readUint16();\r\n    this.unknown2 = stream.readUint16();\r\n    this.boneWeightPairsCount = stream.readUint8();\r\n    this.unknown3 = stream.readUint8();\r\n    this.rootBoneIndex = stream.readUint16();\r\n\r\n    if (version > 3) {\r\n      this.unknown4 = stream.readUint32();\r\n    }\r\n\r\n    if (version > 4) {\r\n      stream.readUint8Array(this.unknown5);\r\n    }\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport IndexEntry from './indexentry';\r\n\r\n/**\r\n * A batch.\r\n */\r\nexport default class Batch {\r\n  version = -1;\r\n  unknown0 = 0;\r\n  regionIndex = -1;\r\n  unknown1 = 0;\r\n  materialReferenceIndex = -1;\r\n  unknown2 = 0;\r\n\r\n  load(stream: BinaryStream, version: number, _index: IndexEntry[]): void {\r\n    this.version = version;\r\n    this.unknown0 = stream.readUint32();\r\n    this.regionIndex = stream.readUint16();\r\n    this.unknown1 = stream.readUint32();\r\n    this.materialReferenceIndex = stream.readUint16();\r\n    this.unknown2 = stream.readUint16();\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport IndexEntry from './indexentry';\r\n\r\n/**\r\n * A material reference.\r\n */\r\nexport default class MaterialReference {\r\n  version = -1;\r\n  materialType = 0;\r\n  materialIndex = -1;\r\n\r\n  load(stream: BinaryStream, version: number, _index: IndexEntry[]): void {\r\n    this.version = version;\r\n    this.materialType = stream.readUint32();\r\n    this.materialIndex = stream.readUint32();\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport IndexEntry from './indexentry';\r\nimport Reference from './reference';\r\nimport { Float32AnimationReference, Uint32AnimationReference } from './animationreference';\r\n\r\n/**\r\n * A standard material.\r\n */\r\nexport default class StandardMaterial {\r\n  version = -1;\r\n  name = new Reference();\r\n  additionalFlags = 0;\r\n  flags = 0;\r\n  blendMode = 0;\r\n  priority = 0;\r\n  usedRTTChannels = 0;\r\n  specularity = 0;\r\n  depthBlendFalloff = 0;\r\n  cutoutThreshold = 0;\r\n  unknown1 = 0;\r\n  unknown2 = 0;\r\n  unknown3 = 0;\r\n  specMult = 0;\r\n  emisMult = 0;\r\n  diffuseLayer = new Reference();\r\n  decalLayer = new Reference();\r\n  specularLayer = new Reference();\r\n  glossLayer = new Reference();\r\n  emissiveLayer = new Reference();\r\n  emissive2Layer = new Reference();\r\n  evioLayer = new Reference();\r\n  evioMaskLayer = new Reference();\r\n  alphaMaskLayer = new Reference();\r\n  alphaMask2Layer = new Reference();\r\n  normalLayer = new Reference();\r\n  heightLayer = new Reference();\r\n  lightMapLayer = new Reference();\r\n  ambientOcclusionLayer = new Reference();\r\n  unknown4 = new Reference();\r\n  unknown5 = new Reference();\r\n  unknown6 = new Reference();\r\n  unknown7 = new Reference();\r\n  unknown8 = 0;\r\n  layerBlendType = 0;\r\n  emisBlendType = 0;\r\n  emisMode = 0;\r\n  specType = 0;\r\n  unknown9 = new Float32AnimationReference();\r\n  unknown10 = new Uint32AnimationReference();\r\n  unknown11 = new Uint8Array(12);\r\n\r\n  load(stream: BinaryStream, version: number, index: IndexEntry[]): void {\r\n    this.version = version;\r\n    this.name.load(stream, index);\r\n    this.additionalFlags = stream.readUint32();\r\n    this.flags = stream.readUint32();\r\n    this.blendMode = stream.readUint32();\r\n    this.priority = stream.readInt32();\r\n    this.usedRTTChannels = stream.readUint32();\r\n    this.specularity = stream.readFloat32();\r\n    this.depthBlendFalloff = stream.readFloat32();\r\n    this.cutoutThreshold = stream.readUint8();\r\n    this.unknown1 = stream.readUint8(); // ?\r\n    this.unknown2 = stream.readUint8(); // ?\r\n    this.unknown3 = stream.readUint8(); // ?\r\n    this.specMult = stream.readFloat32();\r\n    this.emisMult = stream.readFloat32();\r\n    this.diffuseLayer.load(stream, index);\r\n    this.decalLayer.load(stream, index);\r\n    this.specularLayer.load(stream, index);\r\n\r\n    if (version > 15) {\r\n      this.glossLayer.load(stream, index);\r\n    }\r\n\r\n    this.emissiveLayer.load(stream, index);\r\n    this.emissive2Layer.load(stream, index);\r\n    this.evioLayer.load(stream, index);\r\n    this.evioMaskLayer.load(stream, index);\r\n    this.alphaMaskLayer.load(stream, index);\r\n    this.alphaMask2Layer.load(stream, index);\r\n    this.normalLayer.load(stream, index);\r\n    this.heightLayer.load(stream, index);\r\n    this.lightMapLayer.load(stream, index);\r\n    this.ambientOcclusionLayer.load(stream, index);\r\n\r\n    if (version > 18) {\r\n      this.unknown4.load(stream, index); // Unknown layer\r\n      this.unknown5.load(stream, index); // Unknown layer\r\n      this.unknown6.load(stream, index); // Unknown layer\r\n      this.unknown7.load(stream, index); // Unknown layer\r\n    }\r\n\r\n    this.unknown8 = stream.readUint32(); // ?\r\n    this.layerBlendType = stream.readUint32();\r\n    this.emisBlendType = stream.readUint32();\r\n    this.emisMode = stream.readUint32();\r\n    this.specType = stream.readUint32();\r\n\r\n    this.unknown9.load(stream); // ?\r\n    this.unknown10.load(stream); // ?\r\n\r\n    if (version > 18) {\r\n      this.unknown11 = stream.readUint8Array(this.unknown11); // ?\r\n    }\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport IndexEntry from './indexentry';\r\nimport Reference from './reference';\r\nimport { PixelAnimationReference, Uint16AnimationReference, Uint32AnimationReference, Float32AnimationReference, Vector2AnimationReference, Vector3AnimationReference } from './animationreference';\r\n\r\n/**\r\n * A layer.\r\n */\r\nexport default class Layer {\r\n  version = -1;\r\n  unknown0 = 0;\r\n  imagePath = new Reference();\r\n  color = new PixelAnimationReference();\r\n  flags = 0;\r\n  uvSource = -1;\r\n  colorChannelSetting = 0;\r\n  brightMult = new Float32AnimationReference();\r\n  midtoneOffset = new Float32AnimationReference();\r\n  unknown1 = 0;\r\n  noiseAmp = 0;\r\n  noiseFreq = 0;\r\n  rttChannel = 0;\r\n  videoFrameRate = 0;\r\n  videoStartFrame = 0;\r\n  videoEndFrame = 0;\r\n  videoMode = 0;\r\n  videoSyncTiming = 0;\r\n  videoPlay = new Uint32AnimationReference();\r\n  videoRestart = new Uint32AnimationReference();\r\n  flipBookRows = 0;\r\n  flipBookColumns = 0;\r\n  flipBookFrame = new Uint16AnimationReference();\r\n  uvOffset = new Vector2AnimationReference();\r\n  uvAngle = new Vector3AnimationReference();\r\n  uvTiling = new Vector2AnimationReference();\r\n  unknown2 = new Uint32AnimationReference();\r\n  unknown3 = new Float32AnimationReference();\r\n  brightness = new Float32AnimationReference();\r\n  triPlanarOffset = new Vector3AnimationReference();\r\n  triPlanarScale = new Vector3AnimationReference();\r\n  unknown4 = 0;\r\n  fresnelType = 0;\r\n  fresnelExponent = 0;\r\n  fresnelMin = 0;\r\n  fresnelMaxOffset = 0;\r\n  unknown5 = 0;\r\n  unknown6 = new Uint8Array(8);\r\n  fresnelInvertedMaskX = 0;\r\n  fresnelInvertedMaskY = 0;\r\n  fresnelInvertedMaskZ = 0;\r\n  fresnelRotationYaw = 0;\r\n  fresnelRotationPitch = 0;\r\n  unknown7 = 0;\r\n\r\n  load(stream: BinaryStream, version: number, index: IndexEntry[]): void {\r\n    this.version = version;\r\n    this.unknown0 = stream.readUint32();\r\n    this.imagePath.load(stream, index);\r\n    this.color.load(stream);\r\n    this.flags = stream.readUint32();\r\n    this.uvSource = stream.readUint32();\r\n    this.colorChannelSetting = stream.readUint32();\r\n    this.brightMult.load(stream);\r\n    this.midtoneOffset.load(stream);\r\n    this.unknown1 = stream.readUint32();\r\n\r\n    if (version > 23) {\r\n      this.noiseAmp = stream.readFloat32();\r\n      this.noiseFreq = stream.readFloat32();\r\n    }\r\n\r\n    this.rttChannel = stream.readInt32();\r\n    this.videoFrameRate = stream.readUint32();\r\n    this.videoStartFrame = stream.readUint32();\r\n    this.videoEndFrame = stream.readInt32();\r\n    this.videoMode = stream.readUint32();\r\n    this.videoSyncTiming = stream.readUint32();\r\n    this.videoPlay.load(stream);\r\n    this.videoRestart.load(stream);\r\n    this.flipBookRows = stream.readUint32();\r\n    this.flipBookColumns = stream.readUint32();\r\n    this.flipBookFrame.load(stream);\r\n    this.uvOffset.load(stream);\r\n    this.uvAngle.load(stream);\r\n    this.uvTiling.load(stream);\r\n    this.unknown2.load(stream);\r\n    this.unknown3.load(stream);\r\n    this.brightness.load(stream);\r\n\r\n    if (version > 23) {\r\n      this.triPlanarOffset.load(stream);\r\n      this.triPlanarScale.load(stream);\r\n    }\r\n\r\n    this.unknown4 = stream.readInt32();\r\n    this.fresnelType = stream.readUint32();\r\n    this.fresnelExponent = stream.readFloat32();\r\n    this.fresnelMin = stream.readFloat32();\r\n    this.fresnelMaxOffset = stream.readFloat32();\r\n    this.unknown5 = stream.readFloat32();\r\n\r\n    if (version > 24) {\r\n      this.unknown6 = stream.readUint8Array(8);\r\n      this.fresnelInvertedMaskX = stream.readFloat32();\r\n      this.fresnelInvertedMaskY = stream.readFloat32();\r\n      this.fresnelInvertedMaskZ = stream.readFloat32();\r\n      this.fresnelRotationYaw = stream.readFloat32();\r\n      this.fresnelRotationPitch = stream.readFloat32();\r\n      this.unknown7 = stream.readUint32();\r\n    }\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport IndexEntry from './indexentry';\r\nimport Reference from './reference';\r\n\r\n/**\r\n * An event.\r\n */\r\nexport default class Event {\r\n  version = -1;\r\n  name = new Reference();\r\n  unknown0 = 0;\r\n  unknown1 = 0;\r\n  unknown2 = 0;\r\n  matrix = new Float32Array(16);\r\n  unknown3 = 0;\r\n  unknown4 = 0;\r\n  unknown5 = 0;\r\n  unknown6 = 0;\r\n  unknown7 = 0;\r\n  unknown8 = 0;\r\n\r\n  load(stream: BinaryStream, version: number, index: IndexEntry[]): void {\r\n    this.version = version;\r\n    this.name.load(stream, index);\r\n    this.unknown0 = stream.readInt32();\r\n    this.unknown1 = stream.readInt16();\r\n    this.unknown2 = stream.readUint16();\r\n    stream.readFloat32Array(this.matrix);\r\n    this.unknown3 = stream.readInt32();\r\n    this.unknown4 = stream.readInt32();\r\n    this.unknown5 = stream.readInt32();\r\n\r\n    if (version > 0) {\r\n      this.unknown6 = stream.readInt32();\r\n      this.unknown7 = stream.readInt32();\r\n    }\r\n\r\n    if (version > 1) {\r\n      this.unknown8 = stream.readInt32();\r\n    }\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport IndexEntry from './indexentry';\r\nimport Reference from './reference';\r\n\r\n/**\r\n * An attachment point.\r\n */\r\nexport default class AttachmentPoint {\r\n  version = -1;\r\n  unknown = 0;\r\n  name = new Reference();\r\n  bone = -1;\r\n\r\n  load(stream: BinaryStream, version: number, index: IndexEntry[]): void {\r\n    this.version = version;\r\n    this.unknown = stream.readInt32();\r\n    this.name.load(stream, index);\r\n    this.bone = stream.readUint32();\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport IndexEntry from './indexentry';\r\nimport Reference from './reference';\r\nimport { Float32AnimationReference } from './animationreference';\r\n\r\n/**\r\n * A camera.\r\n */\r\nexport default class Camera {\r\n  version = -1;\r\n  bone = -1;\r\n  name = new Reference();\r\n  fieldOfView = new Float32AnimationReference();\r\n  unknown0 = 0;\r\n  farClip = new Float32AnimationReference();\r\n  nearClip = new Float32AnimationReference();\r\n  clip2 = new Float32AnimationReference();\r\n  focalDepth = new Float32AnimationReference();\r\n  falloffStart = new Float32AnimationReference();\r\n  falloffEnd = new Float32AnimationReference();\r\n  depthOfField = new Float32AnimationReference();\r\n\r\n  load(stream: BinaryStream, version: number, index: IndexEntry[]): void {\r\n    this.version = version;\r\n    this.bone = stream.readUint32();\r\n    this.name.load(stream, index);\r\n    this.fieldOfView.load(stream);\r\n    this.unknown0 = stream.readUint32();\r\n    this.farClip.load(stream);\r\n    this.nearClip.load(stream);\r\n    this.clip2.load(stream);\r\n    this.focalDepth.load(stream);\r\n    this.falloffStart.load(stream);\r\n    this.falloffEnd.load(stream);\r\n    this.depthOfField.load(stream);\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport IndexEntry from './indexentry';\r\nimport Md34 from './md34';\r\nimport ModelHeader from './modelheader';\r\n\r\n/**\r\n * A model.\r\n */\r\nexport default class Model {\r\n  index: IndexEntry[] = [];\r\n  model: ModelHeader | null = null;\r\n\r\n  load(src: ArrayBuffer | Uint8Array): void {\r\n    const stream = new BinaryStream(src);\r\n    const header = new Md34();\r\n\r\n    header.load(stream, 11, this.index);\r\n\r\n    if (header.tag !== 'MD34') {\r\n      throw new Error('WrongMagicNumber');\r\n    }\r\n\r\n    stream.seek(header.offset);\r\n\r\n    // Read the index entries\r\n    for (let i = 0, l = header.entries; i < l; i++) {\r\n      this.index[i] = new IndexEntry(stream, this.index);\r\n    }\r\n\r\n    const modelEntries = this.index[header.model.id].entries;\r\n\r\n    if (modelEntries) {\r\n      this.model = <ModelHeader>modelEntries[0];\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Detects if the given object is an M3 source.\r\n */\r\nexport default function isM3(bytes: unknown): boolean {\r\n  if (bytes instanceof ArrayBuffer) {\r\n    bytes = new Uint8Array(bytes);\r\n  }\r\n\r\n  if (bytes instanceof Uint8Array) {\r\n    if (bytes[0] === 0x34 && bytes[1] === 0x33 && bytes[2] === 0x44 && bytes[3] === 0x4d) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n","import Model from './model';\r\nimport isM3 from './isformat';\r\n\r\nexport default {\r\n  Model,\r\n  isM3,\r\n};\r\n","/**\r\n * Used to read and write MDL tokens.\r\n */\r\nexport default class TokenStream {\r\n  buffer: string;\r\n  index = 0;\r\n  ident = 0;\r\n  indentSpaces = 4;\r\n  precision = 1000000; // 6 digits after the decimal point.\r\n\r\n  constructor(buffer?: string) {\r\n    this.buffer = buffer || '';\r\n  }\r\n\r\n  /**\r\n   * Clear the stream from whatever buffer it had.\r\n   */\r\n  clear(): void {\r\n    this.buffer = '';\r\n    this.index = 0;\r\n    this.ident = 0;\r\n  }\r\n\r\n  /**\r\n   * Reads the next token in the stream.\r\n   * Whitespaces are ignored outside of strings in the form of \"\".\r\n   * Comments in the form of // are ignored.\r\n   * Commas and colons are ignored as well.\r\n   * Curly braces are used as separators, generally to denote text blocks.\r\n   *\r\n   * For example, given the following string:\r\n   *\r\n   *     Header \"A String\" {\r\n   *         Name Value, // A Comment\r\n   *     }\r\n   *\r\n   * Read will return the values in order:\r\n   *\r\n   *     Header\r\n   *     \"A String\"\r\n   *     {\r\n   *     Name\r\n   *     Value\r\n   *     }\r\n   *\r\n   * There are wrappers around read, below, that help to read structured code, check them out!\r\n   */\r\n  readToken(): string | undefined {\r\n    const buffer = this.buffer;\r\n    const length = buffer.length;\r\n    let inComment = false;\r\n    let inString = false;\r\n    let token = '';\r\n\r\n    while (this.index < length) {\r\n      const c = buffer[this.index++];\r\n\r\n      if (inComment) {\r\n        if (c === '\\n') {\r\n          inComment = false;\r\n        }\r\n      } else if (inString) {\r\n        if (c === '\\\\') {\r\n          token += c + buffer[this.index++];\r\n        } else if (c === '\\n') {\r\n          token += '\\\\n';\r\n        } else if (c === '\\r') {\r\n          token += '\\\\r';\r\n        } else if (c === '\"') {\r\n          return token;\r\n        } else {\r\n          token += c;\r\n        }\r\n      } else if (c === ' ' || c === ',' || c === '\\t' || c === '\\n' || c === ':' || c === '\\r') {\r\n        if (token.length) {\r\n          return token;\r\n        }\r\n      } else if (c === '{' || c === '}') {\r\n        if (token.length) {\r\n          this.index--;\r\n          return token;\r\n        } else {\r\n          return c;\r\n        }\r\n      } else if (c === '/' && buffer[this.index] === '/') {\r\n        if (token.length) {\r\n          this.index--;\r\n          return token;\r\n        } else {\r\n          inComment = true;\r\n        }\r\n      } else if (c === '\"') {\r\n        if (token.length) {\r\n          this.index--;\r\n          return token;\r\n        } else {\r\n          inString = true;\r\n        }\r\n      } else {\r\n        token += c;\r\n      }\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Same as readToken, but if the end of the stream was encountered, an exception will be thrown.\r\n   */\r\n  read(): string {\r\n    const value = this.readToken();\r\n\r\n    if (value === undefined) {\r\n      throw new Error('End of stream reached prematurely');\r\n    }\r\n\r\n    return value;\r\n  }\r\n\r\n  /**\r\n   * Reads the next token without advancing the stream.\r\n   */\r\n  peek(): string {\r\n    const index = this.index;\r\n    const value = this.read();\r\n\r\n    this.index = index;\r\n\r\n    return value;\r\n  }\r\n\r\n  /**\r\n   * Reads the next token, and parses it as an integer.\r\n   */\r\n  readInt(): number {\r\n    return parseInt(this.read());\r\n  }\r\n\r\n  /**\r\n   * Reads the next token, and parses it as a float.\r\n   */\r\n  readFloat(): number {\r\n    return parseFloat(this.read());\r\n  }\r\n\r\n  /**\r\n   * { Number0, Number1, ..., NumberN }\r\n   */\r\n  readVector<T extends Uint8Array | Uint16Array | Uint32Array | Float32Array>(view: T): T {\r\n    this.read(); // {\r\n\r\n    for (let i = 0, l = view.length; i < l; i++) {\r\n      view[i] = this.readFloat();\r\n    }\r\n\r\n    this.read(); // }\r\n\r\n    return view;\r\n  }\r\n\r\n  /**\r\n   * {\r\n   *     { Value1, Value2, ..., ValueSize },\r\n   *     { Value1, Value2, ..., ValueSize },\r\n   *     ...\r\n   * }\r\n   */\r\n  readVectorsBlock<T extends Uint16Array | Float32Array>(view: T, size: number): T {\r\n    this.read(); // {\r\n\r\n    for (let i = 0, l = view.length; i < l; i += size) {\r\n      this.readVector(view.subarray(i, i + size));\r\n    }\r\n\r\n    this.read(); // }\r\n\r\n    return view;\r\n  }\r\n\r\n  /**\r\n   * Reads a color in the form:\r\n   *\r\n   *      { R, G, B }\r\n   *\r\n   * The color is sizzled to BGR.\r\n   */\r\n  readColor(view: Float32Array): Float32Array {\r\n    this.read(); // {\r\n\r\n    view[2] = this.readFloat();\r\n    view[1] = this.readFloat();\r\n    view[0] = this.readFloat();\r\n\r\n    this.read(); // }\r\n\r\n    return view;\r\n  }\r\n\r\n  /**\r\n   * Helper generator for block reading.\r\n   * Let's say we have a block like so:\r\n   * \r\n   *     {\r\n   *         Key1 Value1\r\n   *         Key2 Value2\r\n   *         ...\r\n   *         KeyN ValueN\r\n   *     }\r\n   * \r\n   * The generator yields the keys one by one, and the caller needs to read the values based on the keys.\r\n   * It is used for most MDL blocks.\r\n   */\r\n  * readBlock(): Generator<string> {\r\n    this.read(); // {\r\n\r\n    let token = this.read();\r\n\r\n    while (token !== '}') {\r\n      yield token;\r\n\r\n      token = this.read();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds the given string to the buffer.\r\n   * The current indentation level is prepended, and the stream goes to the next line after the write.\r\n   */\r\n  writeLine(line: string): void {\r\n    this.buffer += `${' '.repeat(this.ident * this.indentSpaces)}${line}\\n`;\r\n  }\r\n\r\n  /**\r\n   * Flag,\r\n   */\r\n  writeFlag(flag: string): void {\r\n    this.writeLine(`${flag},`);\r\n  }\r\n\r\n  /**\r\n   * Name Flag,\r\n   */\r\n  writeFlagAttrib(name: string, flag: string): void {\r\n    this.writeLine(`${name} ${flag},`);\r\n  }\r\n\r\n  /**\r\n   * Name Value,\r\n   */\r\n  writeNumberAttrib(name: string, value: number): void {\r\n    this.writeLine(`${name} ${this.floatDecimals(value)},`);\r\n  }\r\n\r\n  /**\r\n   * Name \"Value\",\r\n   */\r\n  writeStringAttrib(name: string, value: string): void {\r\n    this.writeLine(`${name} \"${value}\",`);\r\n  }\r\n\r\n  /**\r\n   * Name { Value0, Value1, ..., ValueN }\r\n   */\r\n  writeVectorAttrib(name: string, value: Uint8Array | Uint32Array | Float32Array): void {\r\n    this.writeLine(`${name} { ${this.floatArrayDecimals(value)} },`);\r\n  }\r\n\r\n  /**\r\n   * Writes a color in the form:\r\n   *\r\n   *      { B, G, R }\r\n   *\r\n   * The color is sizzled to RGB.\r\n   * The name can be either \"Color\" or \"static Color\", depending on the context.\r\n   */\r\n  writeColor(name: string, value: Float32Array): void {\r\n    const b = this.floatDecimals(value[0]);\r\n    const g = this.floatDecimals(value[1]);\r\n    const r = this.floatDecimals(value[2]);\r\n\r\n    this.writeLine(`${name} { ${r}, ${g}, ${b} },`);\r\n  }\r\n\r\n  /**\r\n   * { Value0, Value1, ..., ValueN },\r\n   */\r\n  writeVector(value: Uint16Array | Float32Array): void {\r\n    this.writeLine(`{ ${this.floatArrayDecimals(value)} },`);\r\n  }\r\n\r\n  /**\r\n   * Name Vectors {\r\n   *     { Value1, Value2, ..., ValueSize },\r\n   *     { Value1, Value2, ..., ValueSize },\r\n   *     ...\r\n   * }\r\n   */\r\n  writeVectorArrayBlock(name: string, view: Float32Array, size: number): void {\r\n    this.startBlock(name, view.length / size);\r\n\r\n    for (let i = 0, l = view.length; i < l; i += size) {\r\n      this.writeVector(view.subarray(i, i + size));\r\n    }\r\n\r\n    this.endBlock();\r\n  }\r\n\r\n  /**\r\n   * Starts a new block in the form:\r\n   *\r\n   *      Header1 Header2 ... HeaderN {\r\n   *          ...\r\n   *      }\r\n   */\r\n  startBlock(name: string, ...headers: (string | number)[]): void {\r\n    if (headers.length) {\r\n      name = `${name} ${headers.join(' ')}`;\r\n    }\r\n\r\n    this.writeLine(`${name} {`);\r\n    this.ident += 1;\r\n  }\r\n\r\n  /**\r\n   * Starts a new block in the form:\r\n   *\r\n   *      Header \"Name\" {\r\n   *          ...\r\n   *      }\r\n   */\r\n  startObjectBlock(header: string, name: string): void {\r\n    // Turns out you can have quotation marks in object names.\r\n    this.writeLine(`${header} \"${name.replace(/\"/g, '\\\\\"')}\" {`);\r\n    this.ident += 1;\r\n  }\r\n\r\n  /**\r\n   * Ends a previously started block, and handles the indentation.\r\n   */\r\n  endBlock(): void {\r\n    this.ident -= 1;\r\n    this.writeLine('}');\r\n  }\r\n\r\n  /**\r\n   * Ends a previously started block, and handles the indentation.\r\n   * Adds a comma after the block end.\r\n   */\r\n  endBlockComma(): void {\r\n    this.ident -= 1;\r\n    this.writeLine('},');\r\n  }\r\n\r\n  /**\r\n   * Increases the indentation level for following line writes.\r\n   */\r\n  indent(): void {\r\n    this.ident += 1;\r\n  }\r\n\r\n  /**\r\n   * Decreases the indentation level for following line writes.\r\n   */\r\n  unindent(): void {\r\n    this.ident -= 1;\r\n  }\r\n\r\n  /**\r\n * Given a number, truncates digits after the decimal point.\r\n * The given precision should be in base 10.\r\n * E.g. for a precision of two digits after the decimal point, the precision should be 100.\r\n * The result is returned as a string.\r\n */\r\n  floatDecimals(value: number): string {\r\n    return `${Math.trunc(value * this.precision) / this.precision}`;\r\n  }\r\n\r\n  /**\r\n   * Uses floatDecimals on a typed array, and returns its string representation. \r\n   */\r\n  floatArrayDecimals(value: Uint8Array | Uint16Array | Uint32Array | Float32Array): string {\r\n    if (value instanceof Float32Array) {\r\n      const array = [];\r\n\r\n      for (let i = 0, l = value.length; i < l; i++) {\r\n        array[i] = this.floatDecimals(value[i]);\r\n      }\r\n\r\n      return array.join(', ');\r\n    } else {\r\n      return value.join(', ');\r\n    }\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\n\r\n/**\r\n * An extent.\r\n */\r\nexport default class Extent {\r\n  boundsRadius = 0;\r\n  min = new Float32Array(3);\r\n  max = new Float32Array(3);\r\n\r\n  readMdx(stream: BinaryStream): void {\r\n    this.boundsRadius = stream.readFloat32();\r\n    stream.readFloat32Array(this.min);\r\n    stream.readFloat32Array(this.max);\r\n  }\r\n\r\n  writeMdx(stream: BinaryStream): void {\r\n    stream.writeFloat32(this.boundsRadius);\r\n    stream.writeFloat32Array(this.min);\r\n    stream.writeFloat32Array(this.max);\r\n  }\r\n\r\n  writeMdl(stream: TokenStream): void {\r\n    if (this.min[0] !== 0 || this.min[1] !== 0 || this.min[2] !== 0) {\r\n      stream.writeVectorAttrib('MinimumExtent', this.min);\r\n    }\r\n\r\n    if (this.max[0] !== 0 || this.max[1] !== 0 || this.max[2] !== 0) {\r\n      stream.writeVectorAttrib('MaximumExtent', this.max);\r\n    }\r\n\r\n    if (this.boundsRadius !== 0) {\r\n      stream.writeNumberAttrib('BoundsRadius', this.boundsRadius);\r\n    }\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\nimport Extent from './extent';\r\n\r\n/**\r\n * A sequence.\r\n */\r\nexport default class Sequence {\r\n  name = '';\r\n  interval = new Uint32Array(2);\r\n  moveSpeed = 0;\r\n  nonLooping = 0;\r\n  rarity = 0;\r\n  syncPoint = 0;\r\n  extent = new Extent();\r\n\r\n  readMdx(stream: BinaryStream): void {\r\n    this.name = stream.read(80);\r\n    stream.readUint32Array(this.interval);\r\n    this.moveSpeed = stream.readFloat32();\r\n    this.nonLooping = stream.readUint32();\r\n    this.rarity = stream.readFloat32();\r\n    this.syncPoint = stream.readUint32();\r\n    this.extent.readMdx(stream);\r\n  }\r\n\r\n  writeMdx(stream: BinaryStream): void {\r\n    stream.skip(80 - stream.write(this.name));\r\n    stream.writeUint32Array(this.interval);\r\n    stream.writeFloat32(this.moveSpeed);\r\n    stream.writeUint32(this.nonLooping);\r\n    stream.writeFloat32(this.rarity);\r\n    stream.writeUint32(this.syncPoint);\r\n    this.extent.writeMdx(stream);\r\n  }\r\n\r\n  readMdl(stream: TokenStream): void {\r\n    this.name = stream.read();\r\n\r\n    for (const token of stream.readBlock()) {\r\n      if (token === 'Interval') {\r\n        stream.readVector(this.interval);\r\n      } else if (token === 'NonLooping') {\r\n        this.nonLooping = 1;\r\n      } else if (token === 'MoveSpeed') {\r\n        this.moveSpeed = stream.readFloat();\r\n      } else if (token === 'Rarity') {\r\n        this.rarity = stream.readFloat();\r\n      } else if (token === 'MinimumExtent') {\r\n        stream.readVector(this.extent.min);\r\n      } else if (token === 'MaximumExtent') {\r\n        stream.readVector(this.extent.max);\r\n      } else if (token === 'BoundsRadius') {\r\n        this.extent.boundsRadius = stream.readFloat();\r\n      } else {\r\n        throw new Error(`Unknown token in Sequence: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeMdl(stream: TokenStream): void {\r\n    stream.startObjectBlock('Anim', this.name);\r\n    stream.writeVectorAttrib('Interval', this.interval);\r\n\r\n    if (this.nonLooping === 1) {\r\n      stream.writeFlag('NonLooping');\r\n    }\r\n\r\n    if (this.moveSpeed !== 0) {\r\n      stream.writeNumberAttrib('MoveSpeed', this.moveSpeed);\r\n    }\r\n\r\n    if (this.rarity !== 0) {\r\n      stream.writeNumberAttrib('Rarity', this.rarity);\r\n    }\r\n\r\n    this.extent.writeMdl(stream);\r\n    stream.endBlock();\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\n\r\nexport const enum InterpolationType {\r\n  DontInterp = 0,\r\n  Linear = 1,\r\n  Hermite = 2,\r\n  Bezier = 3,\r\n}\r\n/**\r\n * An animation.\r\n */\r\nexport abstract class Animation {\r\n  name = '';\r\n  interpolationType = InterpolationType.DontInterp;\r\n  globalSequenceId = -1;\r\n  frames: number[] = [];\r\n  values: (Uint32Array | Float32Array)[] = [];\r\n  inTans: (Uint32Array | Float32Array)[] = [];\r\n  outTans: (Uint32Array | Float32Array)[] = [];\r\n\r\n  abstract readMdxValue(stream: BinaryStream): Uint32Array | Float32Array;\r\n  abstract writeMdxValue(stream: BinaryStream, value: Uint32Array | Float32Array): void;\r\n  abstract readMdlValue(stream: TokenStream): Uint32Array | Float32Array;\r\n  abstract writeMdlValue(stream: TokenStream, name: string, value: Uint32Array | Float32Array): void;\r\n\r\n  readMdx(stream: BinaryStream, name: string): void {\r\n    const frames = this.frames;\r\n    const values = this.values;\r\n    const inTans = this.inTans;\r\n    const outTans = this.outTans;\r\n    const tracksCount = stream.readUint32();\r\n    const interpolationType = stream.readUint32();\r\n\r\n    this.name = name;\r\n    this.interpolationType = interpolationType;\r\n    this.globalSequenceId = stream.readInt32();\r\n\r\n    for (let i = 0; i < tracksCount; i++) {\r\n      frames.push(stream.readInt32());\r\n      values.push(this.readMdxValue(stream));\r\n\r\n      if (interpolationType > 1) {\r\n        inTans.push(this.readMdxValue(stream));\r\n        outTans.push(this.readMdxValue(stream));\r\n      }\r\n    }\r\n  }\r\n\r\n  writeMdx(stream: BinaryStream): void {\r\n    const interpolationType = this.interpolationType;\r\n    const frames = this.frames;\r\n    const values = this.values;\r\n    const inTans = this.inTans;\r\n    const outTans = this.outTans;\r\n    const tracksCount = frames.length;\r\n\r\n    stream.writeBinary(this.name);\r\n    stream.writeUint32(tracksCount);\r\n    stream.writeUint32(interpolationType);\r\n    stream.writeInt32(this.globalSequenceId);\r\n\r\n    for (let i = 0; i < tracksCount; i++) {\r\n      stream.writeInt32(frames[i]);\r\n      this.writeMdxValue(stream, values[i]);\r\n\r\n      if (interpolationType > InterpolationType.Linear) {\r\n        this.writeMdxValue(stream, inTans[i]);\r\n        this.writeMdxValue(stream, outTans[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  readMdl(stream: TokenStream, name: string): void {\r\n    const frames = this.frames;\r\n    const values = this.values;\r\n    const inTans = this.inTans;\r\n    const outTans = this.outTans;\r\n\r\n    this.name = name;\r\n\r\n    const tracksCount = stream.readInt();\r\n\r\n    stream.read(); // {\r\n\r\n    let interpolationType = 0;\r\n    const token = stream.read();\r\n\r\n    if (token === 'DontInterp') {\r\n      interpolationType = InterpolationType.DontInterp;\r\n    } else if (token === 'Linear') {\r\n      interpolationType = InterpolationType.Linear;\r\n    } else if (token === 'Hermite') {\r\n      interpolationType = InterpolationType.Hermite;\r\n    } else if (token === 'Bezier') {\r\n      interpolationType = InterpolationType.Bezier;\r\n    }\r\n\r\n    this.interpolationType = interpolationType;\r\n\r\n    // GlobalSeqId only exists if it's not -1.\r\n    if (stream.peek() === 'GlobalSeqId') {\r\n      stream.read();\r\n\r\n      this.globalSequenceId = stream.readInt();\r\n    }\r\n\r\n    for (let i = 0; i < tracksCount; i++) {\r\n      frames[i] = stream.readInt();\r\n      values[i] = this.readMdlValue(stream);\r\n\r\n      if (interpolationType > InterpolationType.Linear) {\r\n        stream.read(); // InTan\r\n        inTans[i] = this.readMdlValue(stream);\r\n        stream.read(); // OutTan\r\n        outTans[i] = this.readMdlValue(stream);\r\n      }\r\n    }\r\n\r\n    stream.read(); // }\r\n  }\r\n\r\n  writeMdl(stream: TokenStream, name: string): void {\r\n    const interpolationType = this.interpolationType;\r\n    const frames = this.frames;\r\n    const values = this.values;\r\n    const inTans = this.inTans;\r\n    const outTans = this.outTans;\r\n    const tracksCount = frames.length;\r\n\r\n    stream.startBlock(name, this.frames.length);\r\n\r\n    let token = '';\r\n\r\n    if (this.interpolationType === InterpolationType.DontInterp) {\r\n      token = 'DontInterp';\r\n    } else if (this.interpolationType === InterpolationType.Linear) {\r\n      token = 'Linear';\r\n    } else if (this.interpolationType === InterpolationType.Hermite) {\r\n      token = 'Hermite';\r\n    } else if (this.interpolationType === InterpolationType.Bezier) {\r\n      token = 'Bezier';\r\n    }\r\n\r\n    stream.writeFlag(token);\r\n\r\n    if (this.globalSequenceId !== -1) {\r\n      stream.writeNumberAttrib('GlobalSeqId', this.globalSequenceId);\r\n    }\r\n\r\n    for (let i = 0; i < tracksCount; i++) {\r\n      this.writeMdlValue(stream, `${frames[i]}:`, values[i]);\r\n\r\n      if (interpolationType > InterpolationType.Linear) {\r\n        stream.indent();\r\n        this.writeMdlValue(stream, 'InTan', inTans[i]);\r\n        this.writeMdlValue(stream, 'OutTan', outTans[i]);\r\n        stream.unindent();\r\n      }\r\n    }\r\n\r\n    stream.endBlock();\r\n  }\r\n\r\n  getByteLength(): number {\r\n    const tracksCount = this.frames.length;\r\n    let size = 16;\r\n\r\n    if (tracksCount) {\r\n      const bytesPerValue = this.values[0].byteLength;\r\n      let valuesPerTrack = 1;\r\n\r\n      if (this.interpolationType > InterpolationType.Linear) {\r\n        valuesPerTrack = 3;\r\n      }\r\n\r\n      size += (4 + valuesPerTrack * bytesPerValue) * tracksCount;\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n\r\n/**\r\n * A uint animation.\r\n */\r\nexport class UintAnimation extends Animation {\r\n  readMdxValue(stream: BinaryStream): Uint32Array {\r\n    return stream.readUint32Array(1);\r\n  }\r\n\r\n  writeMdxValue(stream: BinaryStream, value: Uint32Array): void {\r\n    stream.writeUint32(value[0]);\r\n  }\r\n\r\n  readMdlValue(stream: TokenStream): Uint32Array {\r\n    return new Uint32Array([stream.readInt()]);\r\n  }\r\n\r\n  writeMdlValue(stream: TokenStream, name: string, value: Uint32Array): void {\r\n    stream.writeNumberAttrib(name, value[0]);\r\n  }\r\n}\r\n\r\n/**\r\n * A float animation\r\n */\r\nexport class FloatAnimation extends Animation {\r\n  readMdxValue(stream: BinaryStream): Float32Array {\r\n    return stream.readFloat32Array(1);\r\n  }\r\n\r\n  writeMdxValue(stream: BinaryStream, value: Float32Array): void {\r\n    stream.writeFloat32(value[0]);\r\n  }\r\n\r\n  readMdlValue(stream: TokenStream): Float32Array {\r\n    return new Float32Array([stream.readFloat()]);\r\n  }\r\n\r\n  writeMdlValue(stream: TokenStream, name: string, value: Float32Array): void {\r\n    stream.writeNumberAttrib(name, value[0]);\r\n  }\r\n}\r\n\r\n/**\r\n * A vector 3 animation.\r\n */\r\nexport class Vector3Animation extends Animation {\r\n  readMdxValue(stream: BinaryStream): Float32Array {\r\n    return stream.readFloat32Array(3);\r\n  }\r\n\r\n  writeMdxValue(stream: BinaryStream, value: Float32Array): void {\r\n    stream.writeFloat32Array(value);\r\n  }\r\n\r\n  readMdlValue(stream: TokenStream): Float32Array {\r\n    return stream.readVector(new Float32Array(3));\r\n  }\r\n\r\n  writeMdlValue(stream: TokenStream, name: string, value: Float32Array): void {\r\n    stream.writeVectorAttrib(name, value);\r\n  }\r\n}\r\n\r\n/**\r\n * A vector 4 animation.\r\n */\r\nexport class Vector4Animation extends Animation {\r\n  readMdxValue(stream: BinaryStream): Float32Array {\r\n    return stream.readFloat32Array(4);\r\n  }\r\n\r\n  writeMdxValue(stream: BinaryStream, value: Float32Array): void {\r\n    stream.writeFloat32Array(value);\r\n  }\r\n\r\n  readMdlValue(stream: TokenStream): Float32Array {\r\n    return stream.readVector(new Float32Array(4));\r\n  }\r\n\r\n  writeMdlValue(stream: TokenStream, name: string, value: Float32Array): void {\r\n    stream.writeVectorAttrib(name, value);\r\n  }\r\n}\r\n","import { UintAnimation, FloatAnimation, Vector3Animation, Vector4Animation } from './animations';\r\n\r\n// A map from MDX animation tags to their equivalent MDL tokens, and the implementation objects.\r\nexport default {\r\n  // Layer\r\n  KMTF: ['TextureID', UintAnimation],\r\n  KMTA: ['Alpha', FloatAnimation],\r\n  KMTE: ['EmissiveGain', FloatAnimation],\r\n  KFC3: ['FresnelColor', Vector3Animation],\r\n  KFCA: ['FresnelOpacity', FloatAnimation],\r\n  KFTC: ['FresnelTeamColor', UintAnimation],\r\n  // TextureAnimation\r\n  KTAT: ['Translation', Vector3Animation],\r\n  KTAR: ['Rotation', Vector4Animation],\r\n  KTAS: ['Scaling', Vector3Animation],\r\n  // GeosetAnimation\r\n  KGAO: ['Alpha', FloatAnimation],\r\n  KGAC: ['Color', Vector3Animation],\r\n  // GenericObject\r\n  KGTR: ['Translation', Vector3Animation],\r\n  KGRT: ['Rotation', Vector4Animation],\r\n  KGSC: ['Scaling', Vector3Animation],\r\n  // Light\r\n  KLAS: ['AttenuationStart', FloatAnimation],\r\n  KLAE: ['AttenuationEnd', FloatAnimation],\r\n  KLAC: ['Color', Vector3Animation],\r\n  KLAI: ['Intensity', FloatAnimation],\r\n  KLBI: ['AmbIntensity', FloatAnimation],\r\n  KLBC: ['AmbColor', Vector3Animation],\r\n  KLAV: ['Visibility', FloatAnimation],\r\n  // Attachment\r\n  KATV: ['Visibility', FloatAnimation],\r\n  // ParticleEmitter\r\n  KPEE: ['EmissionRate', FloatAnimation],\r\n  KPEG: ['Gravity', FloatAnimation],\r\n  KPLN: ['Longitude', FloatAnimation],\r\n  KPLT: ['Latitude', FloatAnimation],\r\n  KPEL: ['LifeSpan', FloatAnimation],\r\n  KPES: ['InitVelocity', FloatAnimation],\r\n  KPEV: ['Visibility', FloatAnimation],\r\n  // ParticleEmitter2\r\n  KP2S: ['Speed', FloatAnimation],\r\n  KP2R: ['Variation', FloatAnimation],\r\n  KP2L: ['Latitude', FloatAnimation],\r\n  KP2G: ['Gravity', FloatAnimation],\r\n  KP2E: ['EmissionRate', FloatAnimation],\r\n  KP2N: ['Width', FloatAnimation],\r\n  KP2W: ['Length', FloatAnimation],\r\n  KP2V: ['Visibility', FloatAnimation],\r\n  // ParticleEmitterCorn\r\n  KPPA: ['Alpha', FloatAnimation],\r\n  KPPC: ['Color', Vector3Animation],\r\n  KPPE: ['EmissionRate', FloatAnimation],\r\n  KPPL: ['LifeSpan', FloatAnimation],\r\n  KPPS: ['Speed', FloatAnimation],\r\n  KPPV: ['Visibility', FloatAnimation],\r\n  // RibbonEmitter\r\n  KRHA: ['HeightAbove', FloatAnimation],\r\n  KRHB: ['HeightBelow', FloatAnimation],\r\n  KRAL: ['Alpha', FloatAnimation],\r\n  KRCO: ['Color', Vector3Animation],\r\n  KRTX: ['TextureSlot', UintAnimation],\r\n  KRVS: ['Visibility', FloatAnimation],\r\n  // Camera\r\n  KCTR: ['Translation', Vector3Animation],\r\n  KTTR: ['Translation', Vector3Animation],\r\n  KCRL: ['Rotation', FloatAnimation],\r\n};\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\nimport { Animation } from './animations';\r\nimport animationMap from './animationmap';\r\n\r\n/**\r\n * The parent class for all objects that have animated data in them.\r\n */\r\nexport default class AnimatedObject {\r\n  animations: Animation[] = [];\r\n\r\n  readAnimations(stream: BinaryStream, size: number): void {\r\n    const end = stream.index + size;\r\n\r\n    while (stream.index < end) {\r\n      const name = stream.readBinary(4);\r\n      const animation = new animationMap[name][1]();\r\n\r\n      animation.readMdx(stream, name);\r\n\r\n      this.animations.push(animation);\r\n    }\r\n  }\r\n\r\n  writeAnimations(stream: BinaryStream): void {\r\n    for (const animation of this.animations) {\r\n      animation.writeMdx(stream);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * A wrapper around readBlock() which merges static tokens.\r\n   * E.g.: static Color\r\n   * This makes the condition blocks in the parent objects linear and simple.\r\n   */\r\n  * readAnimatedBlock(stream: TokenStream): Generator<string> {\r\n    for (const token of stream.readBlock()) {\r\n      if (token === 'static') {\r\n        yield `static ${stream.read()}`;\r\n      } else {\r\n        yield token;\r\n      }\r\n    }\r\n  }\r\n\r\n  readAnimation(stream: TokenStream, name: string): void {\r\n    const animation = new animationMap[name][1]();\r\n\r\n    animation.readMdl(stream, name);\r\n\r\n    this.animations.push(animation);\r\n  }\r\n\r\n  writeAnimation(stream: TokenStream, name: string): boolean {\r\n    for (const animation of this.animations) {\r\n      if (animation.name === name) {\r\n        animation.writeMdl(stream, animationMap[name][0]);\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * AnimatedObject itself doesn't care about versions, however objects that inherit it do.\r\n   */\r\n  getByteLength(_version = 0): number {\r\n    let size = 0;\r\n\r\n    for (const animation of this.animations) {\r\n      size += animation.getByteLength();\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\nimport AnimatedObject from './animatedobject';\r\n\r\nexport const enum FilterMode {\r\n  None = 0,\r\n  Transparent = 1,\r\n  Blend = 2,\r\n  Additive = 3,\r\n  AddAlpha = 4,\r\n  Modulate = 5,\r\n  Modulate2x = 6,\r\n}\r\n\r\nexport const enum Flags {\r\n  None = 0x0,\r\n  Unshaded = 0x1,\r\n  SphereEnvMap = 0x2,\r\n  TwoSided = 0x10,\r\n  Unfogged = 0x20,\r\n  NoDepthTest = 0x40,\r\n  NoDepthSet = 0x80,\r\n  Unlit = 0x100,\r\n}\r\n\r\n// These two functions are needed because I am using const enums, which lets TS completely remove them from the output.\r\n// I think it's worth it for the price of these two functions that effectively were always here either way.\r\nfunction stringToMode(s: string): FilterMode {\r\n  if (s === 'None') return FilterMode.None;\r\n  if (s === 'Transparent') return FilterMode.Transparent;\r\n  if (s === 'Blend') return FilterMode.Blend;\r\n  if (s === 'Additive') return FilterMode.Additive;\r\n  if (s === 'AddAlpha') return FilterMode.AddAlpha;\r\n  if (s === 'Modulate') return FilterMode.Modulate;\r\n  if (s === 'Modulate2x') return FilterMode.Modulate2x;\r\n  return FilterMode.None;\r\n}\r\n\r\nfunction modeToString(m: FilterMode): string {\r\n  if (m === FilterMode.None) return 'None';\r\n  if (m === FilterMode.Transparent) return 'Transparent';\r\n  if (m === FilterMode.Blend) return 'Blend';\r\n  if (m === FilterMode.Additive) return 'Additive';\r\n  if (m === FilterMode.AddAlpha) return 'AddAlpha';\r\n  if (m === FilterMode.Modulate) return 'Modulate';\r\n  if (m === FilterMode.Modulate2x) return 'Modulate2x';\r\n  return 'None';\r\n}\r\n\r\n/**\r\n * A layer.\r\n */\r\nexport default class Layer extends AnimatedObject {\r\n  filterMode = FilterMode.None;\r\n  flags = Flags.None;\r\n  textureId = -1;\r\n  textureAnimationId = -1;\r\n  coordId = 0;\r\n  alpha = 1;\r\n  /** \r\n   * @since 900\r\n   */\r\n  emissiveGain = 1;\r\n  /** \r\n   * @since 1000\r\n   */\r\n  fresnelColor = new Float32Array([1, 1, 1]);\r\n  /** \r\n   * @since 1000\r\n   */\r\n  fresnelOpacity = 0;\r\n  /** \r\n   * @since 1000\r\n   */\r\n  fresnelTeamColor = 0;\r\n\r\n  readMdx(stream: BinaryStream, version: number): void {\r\n    const start = stream.index;\r\n    const size = stream.readUint32();\r\n\r\n    this.filterMode = stream.readUint32();\r\n    this.flags = stream.readUint32();\r\n    this.textureId = stream.readInt32();\r\n    this.textureAnimationId = stream.readInt32();\r\n    this.coordId = stream.readUint32();\r\n    this.alpha = stream.readFloat32();\r\n\r\n    // Note that even though these fields were introduced in versions 900 and 1000 separately, the game does not offer backwards compatibility.\r\n    if (version > 800) {\r\n      this.emissiveGain = stream.readFloat32();\r\n      stream.readFloat32Array(this.fresnelColor);\r\n      this.fresnelOpacity = stream.readFloat32();\r\n      this.fresnelTeamColor = stream.readFloat32();\r\n    }\r\n\r\n    this.readAnimations(stream, size - (stream.index - start));\r\n  }\r\n\r\n  writeMdx(stream: BinaryStream, version: number): void {\r\n    stream.writeUint32(this.getByteLength(version));\r\n    stream.writeUint32(this.filterMode);\r\n    stream.writeUint32(this.flags);\r\n    stream.writeInt32(this.textureId);\r\n    stream.writeInt32(this.textureAnimationId);\r\n    stream.writeUint32(this.coordId);\r\n    stream.writeFloat32(this.alpha);\r\n\r\n    // See note above in readMdx.\r\n    if (version > 800) {\r\n      stream.writeFloat32(this.emissiveGain);\r\n      stream.writeFloat32Array(this.fresnelColor);\r\n      stream.writeFloat32(this.fresnelOpacity);\r\n      stream.writeFloat32(this.fresnelTeamColor);\r\n    }\r\n\r\n    this.writeAnimations(stream);\r\n  }\r\n\r\n  readMdl(stream: TokenStream): void {\r\n    for (const token of super.readAnimatedBlock(stream)) {\r\n      if (token === 'FilterMode') {\r\n        this.filterMode = stringToMode(stream.read());\r\n      } else if (token === 'Unshaded') {\r\n        this.flags |= Flags.Unshaded;\r\n      } else if (token === 'SphereEnvMap') {\r\n        this.flags |= Flags.SphereEnvMap;\r\n      } else if (token === 'TwoSided') {\r\n        this.flags |= Flags.TwoSided;\r\n      } else if (token === 'Unfogged') {\r\n        this.flags |= Flags.Unfogged;\r\n      } else if (token === 'NoDepthTest') {\r\n        this.flags |= Flags.NoDepthTest;\r\n      } else if (token === 'NoDepthSet') {\r\n        this.flags |= Flags.NoDepthSet;\r\n      } else if (token === 'Unlit') {\r\n        this.flags |= Flags.Unlit;\r\n      } else if (token === 'static TextureID') {\r\n        this.textureId = stream.readInt();\r\n      } else if (token === 'TextureID') {\r\n        this.readAnimation(stream, 'KMTF');\r\n      } else if (token === 'TVertexAnimId') {\r\n        this.textureAnimationId = stream.readInt();\r\n      } else if (token === 'CoordId') {\r\n        this.coordId = stream.readInt();\r\n      } else if (token === 'static Alpha') {\r\n        this.alpha = stream.readFloat();\r\n      } else if (token === 'Alpha') {\r\n        this.readAnimation(stream, 'KMTA');\r\n      } else if (token === 'static EmissiveGain') {\r\n        this.emissiveGain = stream.readFloat();\r\n      } else if (token === 'EmissiveGain') {\r\n        this.readAnimation(stream, 'KMTE');\r\n      } else if (token === 'static FresnelColor') {\r\n        stream.readVector(this.fresnelColor);\r\n      } else if (token === 'FresnelColor') {\r\n        this.readAnimation(stream, 'KFC3');\r\n      } else if (token === 'static FresnelOpacity') {\r\n        this.fresnelOpacity = stream.readFloat();\r\n      } else if (token === 'FresnelOpacity') {\r\n        this.readAnimation(stream, 'KFCA');\r\n      } else if (token === 'static FresnelTeamColor') {\r\n        this.fresnelTeamColor = stream.readFloat();\r\n      } else if (token === 'FresnelTeamColor') {\r\n        this.readAnimation(stream, 'KFTC');\r\n      } else {\r\n        throw new Error(`Unknown token in Layer: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeMdl(stream: TokenStream, version: number): void {\r\n    stream.startBlock('Layer');\r\n\r\n    stream.writeFlagAttrib('FilterMode', modeToString(this.filterMode));\r\n\r\n    if (this.flags & Flags.Unshaded) {\r\n      stream.writeFlag('Unshaded');\r\n    }\r\n\r\n    if (this.flags & Flags.SphereEnvMap) {\r\n      stream.writeFlag('SphereEnvMap');\r\n    }\r\n\r\n    if (this.flags & Flags.TwoSided) {\r\n      stream.writeFlag('TwoSided');\r\n    }\r\n\r\n    if (this.flags & Flags.Unfogged) {\r\n      stream.writeFlag('Unfogged');\r\n    }\r\n\r\n    if (this.flags & Flags.NoDepthTest) {\r\n      stream.writeFlag('NoDepthTest');\r\n    }\r\n\r\n    if (this.flags & Flags.NoDepthSet) {\r\n      stream.writeFlag('NoDepthSet');\r\n    }\r\n\r\n    if (version > 800) {\r\n      if (this.flags & Flags.Unlit) {\r\n        stream.writeFlag('Unlit');\r\n      }\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KMTF')) {\r\n      stream.writeNumberAttrib('static TextureID', this.textureId);\r\n    }\r\n\r\n    if (this.textureAnimationId !== -1) {\r\n      stream.writeNumberAttrib('TVertexAnimId', this.textureAnimationId);\r\n    }\r\n\r\n    if (this.coordId !== 0) {\r\n      stream.writeNumberAttrib('CoordId', this.coordId);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KMTA') && this.alpha !== 1) {\r\n      stream.writeNumberAttrib('static Alpha', this.alpha);\r\n    }\r\n\r\n    if (version > 800) {\r\n      if (!this.writeAnimation(stream, 'KMTE') && this.emissiveGain !== 1) {\r\n        stream.writeNumberAttrib('static EmissiveGain', this.emissiveGain);\r\n      }\r\n\r\n      if (!this.writeAnimation(stream, 'KFC3') && (this.fresnelColor[0] !== 1 || this.fresnelColor[1] !== 1 || this.fresnelColor[2] !== 1)) {\r\n        stream.writeVectorAttrib('static FresnelColor', this.fresnelColor);\r\n      }\r\n\r\n      if (!this.writeAnimation(stream, 'KFCA') && this.fresnelOpacity !== 0) {\r\n        stream.writeNumberAttrib('static FresnelOpacity', this.fresnelOpacity);\r\n      }\r\n\r\n      if (!this.writeAnimation(stream, 'KFTC') && this.fresnelTeamColor !== 0) {\r\n        stream.writeNumberAttrib('static FresnelTeamColor', this.fresnelTeamColor);\r\n      }\r\n    }\r\n\r\n    stream.endBlock();\r\n  }\r\n\r\n  override getByteLength(version: number): number {\r\n    let size = 28 + super.getByteLength();\r\n\r\n    // See note above in readMdx.\r\n    if (version > 800) {\r\n      size += 24;\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\nimport Layer from './layer';\r\n\r\nexport const enum Flags {\r\n  None = 0x0,\r\n  ConstantColor = 0x1,\r\n  TwoSided = 0x2,\r\n  SortPrimsNearZ = 0x8,\r\n  SortPrimsFarZ = 0x10,\r\n  FullResolution = 0x20,\r\n}\r\n\r\n/**\r\n * A material.\r\n */\r\nexport default class Material {\r\n  priorityPlane = 0;\r\n  flags = Flags.None;\r\n  /** \r\n   * @since 900\r\n   */\r\n  shader = '';\r\n  layers: Layer[] = [];\r\n\r\n  readMdx(stream: BinaryStream, version: number): void {\r\n    stream.readUint32(); // Don't care about the size.\r\n\r\n    this.priorityPlane = stream.readInt32();\r\n    this.flags = stream.readUint32();\r\n\r\n    if (version > 800) {\r\n      this.shader = stream.read(80);\r\n    }\r\n\r\n    stream.skip(4); // LAYS\r\n\r\n    for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n      const layer = new Layer();\r\n\r\n      layer.readMdx(stream, version);\r\n\r\n      this.layers.push(layer);\r\n    }\r\n  }\r\n\r\n  writeMdx(stream: BinaryStream, version: number): void {\r\n    stream.writeUint32(this.getByteLength(version));\r\n    stream.writeInt32(this.priorityPlane);\r\n    stream.writeUint32(this.flags);\r\n\r\n    if (version > 800) {\r\n      stream.skip(80 - stream.write(this.shader));\r\n    }\r\n\r\n    stream.writeBinary('LAYS');\r\n    stream.writeUint32(this.layers.length);\r\n\r\n    for (const layer of this.layers) {\r\n      layer.writeMdx(stream, version);\r\n    }\r\n  }\r\n\r\n  readMdl(stream: TokenStream): void {\r\n    for (const token of stream.readBlock()) {\r\n      if (token === 'ConstantColor') {\r\n        this.flags |= Flags.ConstantColor;\r\n      } else if (token === 'TwoSided') {\r\n        this.flags |= Flags.TwoSided;\r\n      } else if (token === 'SortPrimsNearZ') {\r\n        this.flags |= Flags.SortPrimsNearZ;\r\n      } else if (token === 'SortPrimsFarZ') {\r\n        this.flags |= Flags.SortPrimsFarZ;\r\n      } else if (token === 'FullResolution') {\r\n        this.flags |= Flags.FullResolution;\r\n      } else if (token === 'PriorityPlane') {\r\n        this.priorityPlane = stream.readInt();\r\n      } else if (token === 'Shader') {\r\n        this.shader = stream.read();\r\n      } else if (token === 'Layer') {\r\n        const layer = new Layer();\r\n\r\n        layer.readMdl(stream);\r\n\r\n        this.layers.push(layer);\r\n      } else {\r\n        throw new Error(`Unknown token in Material: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeMdl(stream: TokenStream, version: number): void {\r\n    stream.startBlock('Material');\r\n\r\n    if (this.flags & Flags.ConstantColor) {\r\n      stream.writeFlag('ConstantColor');\r\n    }\r\n\r\n    if (version > 800) {\r\n      if (this.flags & Flags.TwoSided) {\r\n        stream.writeFlag('TwoSided');\r\n      }\r\n    }\r\n\r\n    if (this.flags & Flags.SortPrimsNearZ) {\r\n      stream.writeFlag('SortPrimsNearZ');\r\n    }\r\n\r\n    if (this.flags & Flags.SortPrimsFarZ) {\r\n      stream.writeFlag('SortPrimsFarZ');\r\n    }\r\n\r\n    if (this.flags & Flags.FullResolution) {\r\n      stream.writeFlag('FullResolution');\r\n    }\r\n\r\n    if (this.priorityPlane !== 0) {\r\n      stream.writeNumberAttrib('PriorityPlane', this.priorityPlane);\r\n    }\r\n\r\n    if (version > 800) {\r\n      stream.writeStringAttrib('Shader', this.shader);\r\n    }\r\n\r\n    for (const layer of this.layers) {\r\n      layer.writeMdl(stream, version);\r\n    }\r\n\r\n    stream.endBlock();\r\n  }\r\n\r\n  getByteLength(version: number): number {\r\n    let size = 20;\r\n\r\n    if (version > 800) {\r\n      size += 80;\r\n    }\r\n\r\n    for (const layer of this.layers) {\r\n      size += layer.getByteLength(version);\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\n\r\nexport const enum WrapMode {\r\n  RepeatBoth = 0,\r\n  WrapWidth = 1,\r\n  WrapHeight = 2,\r\n  WrapBoth = 3,\r\n}\r\n\r\n/**\r\n * A texture.\r\n */\r\nexport default class Texture {\r\n  replaceableId = 0;\r\n  path = '';\r\n  wrapMode = WrapMode.RepeatBoth;\r\n\r\n  readMdx(stream: BinaryStream): void {\r\n    this.replaceableId = stream.readUint32();\r\n    this.path = stream.read(260);\r\n    this.wrapMode = stream.readUint32();\r\n  }\r\n\r\n  writeMdx(stream: BinaryStream): void {\r\n    stream.writeUint32(this.replaceableId);\r\n    stream.skip(260 - stream.write(this.path));\r\n    stream.writeUint32(this.wrapMode);\r\n  }\r\n\r\n  readMdl(stream: TokenStream): void {\r\n    for (const token of stream.readBlock()) {\r\n      if (token === 'Image') {\r\n        this.path = stream.read();\r\n      } else if (token === 'ReplaceableId') {\r\n        this.replaceableId = stream.readInt();\r\n      } else if (token === 'WrapWidth') {\r\n        this.wrapMode |= WrapMode.WrapWidth;\r\n      } else if (token === 'WrapHeight') {\r\n        this.wrapMode |= WrapMode.WrapHeight;\r\n      } else {\r\n        throw new Error(`Unknown token in Texture: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeMdl(stream: TokenStream): void {\r\n    stream.startBlock('Bitmap');\r\n\r\n    if (this.path.length) {\r\n      stream.writeStringAttrib('Image', this.path);\r\n    }\r\n\r\n    if (this.replaceableId !== 0) {\r\n      stream.writeNumberAttrib('ReplaceableId', this.replaceableId);\r\n    }\r\n\r\n    if (this.wrapMode & WrapMode.WrapWidth) {\r\n      stream.writeFlag(`WrapWidth`);\r\n    }\r\n\r\n    if (this.wrapMode & WrapMode.WrapHeight) {\r\n      stream.writeFlag(`WrapHeight`);\r\n    }\r\n\r\n    stream.endBlock();\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\nimport AnimatedObject from './animatedobject';\r\n\r\n/**\r\n * A texture animation.\r\n */\r\nexport default class TextureAnimation extends AnimatedObject {\r\n  readMdx(stream: BinaryStream): void {\r\n    const size = stream.readUint32();\r\n\r\n    this.readAnimations(stream, size - 4);\r\n  }\r\n\r\n  writeMdx(stream: BinaryStream): void {\r\n    stream.writeUint32(this.getByteLength());\r\n    this.writeAnimations(stream);\r\n  }\r\n\r\n  readMdl(stream: TokenStream): void {\r\n    for (const token of stream.readBlock()) {\r\n      if (token === 'Translation') {\r\n        this.readAnimation(stream, 'KTAT');\r\n      } else if (token === 'Rotation') {\r\n        this.readAnimation(stream, 'KTAR');\r\n      } else if (token === 'Scaling') {\r\n        this.readAnimation(stream, 'KTAS');\r\n      } else {\r\n        throw new Error(`Unknown token in TextureAnimation: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeMdl(stream: TokenStream): void {\r\n    stream.startBlock('TVertexAnim ');\r\n    this.writeAnimation(stream, 'KTAT');\r\n    this.writeAnimation(stream, 'KTAR');\r\n    this.writeAnimation(stream, 'KTAS');\r\n    stream.endBlock();\r\n  }\r\n\r\n  override getByteLength(): number {\r\n    return 4 + super.getByteLength();\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\nimport Extent from './extent';\r\n\r\n/**\r\n * A geoset.\r\n */\r\nexport default class Geoset {\r\n  vertices = new Float32Array(0);\r\n  normals = new Float32Array(0);\r\n  faceTypeGroups = new Uint32Array(0);\r\n  faceGroups = new Uint32Array(0);\r\n  faces = new Uint16Array(0);\r\n  vertexGroups = new Uint8Array(0);\r\n  matrixGroups = new Uint32Array(0);\r\n  matrixIndices = new Uint32Array(0);\r\n  materialId = 0;\r\n  selectionGroup = 0;\r\n  selectionFlags = 0;\r\n  /** \r\n   * @since 900\r\n   */\r\n  lod = -1;\r\n  /** \r\n   * @since 900\r\n   */\r\n  lodName = '';\r\n  extent = new Extent();\r\n  sequenceExtents: Extent[] = [];\r\n  /** \r\n   * @since 900\r\n   */\r\n  tangents = new Float32Array(0);\r\n  /**\r\n   * An array of bone indices and weights.\r\n   * Every 8 consecutive elements describe the following:\r\n   *    [B0, B1, B2, B3, W0, W1, W2, W3]\r\n   * Where:\r\n   *     Bn is a bone index.\r\n   *     Wn is a weight, which can be normalized with Wn/255.\r\n   *\r\n   * @since 900\r\n   */\r\n  skin = new Uint8Array(0);\r\n  uvSets: Float32Array[] = [];\r\n\r\n  readMdx(stream: BinaryStream, version: number): void {\r\n    stream.readUint32(); // Don't care about the size.\r\n\r\n    stream.skip(4); // VRTX\r\n    this.vertices = stream.readFloat32Array(stream.readUint32() * 3);\r\n    stream.skip(4); // NRMS\r\n    this.normals = stream.readFloat32Array(stream.readUint32() * 3);\r\n    stream.skip(4); // PTYP\r\n    this.faceTypeGroups = stream.readUint32Array(stream.readUint32());\r\n    stream.skip(4); // PCNT\r\n    this.faceGroups = stream.readUint32Array(stream.readUint32());\r\n    stream.skip(4); // PVTX\r\n    this.faces = stream.readUint16Array(stream.readUint32());\r\n    stream.skip(4); // GNDX\r\n    this.vertexGroups = stream.readUint8Array(stream.readUint32());\r\n    stream.skip(4); // MTGC\r\n    this.matrixGroups = stream.readUint32Array(stream.readUint32());\r\n    stream.skip(4); // MATS\r\n    this.matrixIndices = stream.readUint32Array(stream.readUint32());\r\n    this.materialId = stream.readUint32();\r\n    this.selectionGroup = stream.readUint32();\r\n    this.selectionFlags = stream.readUint32();\r\n\r\n    if (version > 800) {\r\n      this.lod = stream.readInt32();\r\n      this.lodName = stream.read(80);\r\n    }\r\n\r\n    this.extent.readMdx(stream);\r\n\r\n    for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n      const extent = new Extent();\r\n\r\n      extent.readMdx(stream);\r\n\r\n      this.sequenceExtents.push(extent);\r\n    }\r\n\r\n    // Non-reforged models that come with reforged are saved with version >800, however they don't have TANG and SKIN.\r\n    if (version > 800) {\r\n      if (stream.readBinary(4) === 'TANG') {\r\n        this.tangents = stream.readFloat32Array(stream.readUint32() * 4);\r\n      } else {\r\n        stream.skip(-4);\r\n      }\r\n\r\n      if (stream.readBinary(4) === 'SKIN') {\r\n        this.skin = stream.readUint8Array(stream.readUint32());\r\n      } else {\r\n        stream.skip(-4);\r\n      }\r\n    }\r\n\r\n    stream.skip(4); // UVAS\r\n\r\n    for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n      stream.skip(4); // UVBS\r\n      this.uvSets.push(stream.readFloat32Array(stream.readUint32() * 2));\r\n    }\r\n  }\r\n\r\n  writeMdx(stream: BinaryStream, version: number): void {\r\n    stream.writeUint32(this.getByteLength(version));\r\n    stream.writeBinary('VRTX');\r\n    stream.writeUint32(this.vertices.length / 3);\r\n    stream.writeFloat32Array(this.vertices);\r\n    stream.writeBinary('NRMS');\r\n    stream.writeUint32(this.normals.length / 3);\r\n    stream.writeFloat32Array(this.normals);\r\n    stream.writeBinary('PTYP');\r\n    stream.writeUint32(this.faceTypeGroups.length);\r\n    stream.writeUint32Array(this.faceTypeGroups);\r\n    stream.writeBinary('PCNT');\r\n    stream.writeUint32(this.faceGroups.length);\r\n    stream.writeUint32Array(this.faceGroups);\r\n    stream.writeBinary('PVTX');\r\n    stream.writeUint32(this.faces.length);\r\n    stream.writeUint16Array(this.faces);\r\n    stream.writeBinary('GNDX');\r\n    stream.writeUint32(this.vertexGroups.length);\r\n    stream.writeUint8Array(this.vertexGroups);\r\n    stream.writeBinary('MTGC');\r\n    stream.writeUint32(this.matrixGroups.length);\r\n    stream.writeUint32Array(this.matrixGroups);\r\n    stream.writeBinary('MATS');\r\n    stream.writeUint32(this.matrixIndices.length);\r\n    stream.writeUint32Array(this.matrixIndices);\r\n    stream.writeUint32(this.materialId);\r\n    stream.writeUint32(this.selectionGroup);\r\n    stream.writeUint32(this.selectionFlags);\r\n\r\n    if (version > 800) {\r\n      stream.writeInt32(this.lod);\r\n      stream.skip(80 - stream.write(this.lodName));\r\n    }\r\n\r\n    this.extent.writeMdx(stream);\r\n\r\n    stream.writeUint32(this.sequenceExtents.length);\r\n\r\n    for (const sequenceExtent of this.sequenceExtents) {\r\n      sequenceExtent.writeMdx(stream);\r\n    }\r\n\r\n    if (version > 800) {\r\n      if (this.tangents.length) {\r\n        stream.writeBinary('TANG');\r\n        stream.writeUint32(this.tangents.length / 4);\r\n        stream.writeFloat32Array(this.tangents);\r\n      }\r\n\r\n      if (this.skin.length) {\r\n        stream.writeBinary('SKIN');\r\n        stream.writeUint32(this.skin.length);\r\n        stream.writeUint8Array(this.skin);\r\n      }\r\n    }\r\n\r\n    stream.writeBinary('UVAS');\r\n    stream.writeUint32(this.uvSets.length);\r\n\r\n    for (const uvSet of this.uvSets) {\r\n      stream.writeBinary('UVBS');\r\n      stream.writeUint32(uvSet.length / 2);\r\n      stream.writeFloat32Array(uvSet);\r\n    }\r\n  }\r\n\r\n  readMdl(stream: TokenStream): void {\r\n    for (let token of stream.readBlock()) {\r\n      if (token === 'Vertices') {\r\n        this.vertices = stream.readVectorsBlock(new Float32Array(stream.readInt() * 3), 3);\r\n      } else if (token === 'Normals') {\r\n        this.normals = stream.readVectorsBlock(new Float32Array(stream.readInt() * 3), 3);\r\n      } else if (token === 'TVertices') {\r\n        this.uvSets.push(stream.readVectorsBlock(new Float32Array(stream.readInt() * 2), 2));\r\n      } else if (token === 'VertexGroup') {\r\n        // Vertex groups are stored in a block with no count, can't allocate the buffer yet.\r\n        const vertexGroups = [];\r\n\r\n        for (const vertexGroup of stream.readBlock()) {\r\n          vertexGroups.push(parseInt(vertexGroup));\r\n        }\r\n\r\n        this.vertexGroups = new Uint8Array(vertexGroups);\r\n      } else if (token === 'Tangents') {\r\n        this.tangents = stream.readVectorsBlock(new Float32Array(stream.readInt() * 4), 4);\r\n      } else if (token === 'SkinWeights') {\r\n        this.skin = stream.readVector(new Uint8Array(stream.readInt() * 8));\r\n      } else if (token === 'Faces') {\r\n        // For now hardcoded for triangles, until I see a model with something different.\r\n        this.faceTypeGroups = new Uint32Array([4]);\r\n\r\n        // Number of vectors the indices are spread over.\r\n        const vectors = stream.readInt();\r\n\r\n        // Total number of indices.\r\n        const count = stream.readInt();\r\n\r\n        stream.read(); // {\r\n        stream.read(); // Triangles\r\n\r\n        this.faces = stream.readVectorsBlock(new Uint16Array(count), count / vectors);\r\n\r\n        // Declare that all of the faces are in one group to conform with MDX.\r\n        this.faceGroups = new Uint32Array([count]);\r\n\r\n        stream.read(); // }\r\n      } else if (token === 'Groups') {\r\n        const indices = [];\r\n        const groups = [];\r\n\r\n        stream.readInt(); // matrices count\r\n        stream.readInt(); // total indices\r\n\r\n        for (const _ of stream.readBlock()) {\r\n          let size = 0;\r\n\r\n          for (const index of stream.readBlock()) {\r\n            indices.push(parseInt(index));\r\n            size += 1;\r\n          }\r\n\r\n          groups.push(size);\r\n        }\r\n\r\n        this.matrixIndices = new Uint32Array(indices);\r\n        this.matrixGroups = new Uint32Array(groups);\r\n      } else if (token === 'MinimumExtent') {\r\n        stream.readVector(this.extent.min);\r\n      } else if (token === 'MaximumExtent') {\r\n        stream.readVector(this.extent.max);\r\n      } else if (token === 'BoundsRadius') {\r\n        this.extent.boundsRadius = stream.readFloat();\r\n      } else if (token === 'Anim') {\r\n        const extent = new Extent();\r\n\r\n        for (token of stream.readBlock()) {\r\n          if (token === 'MinimumExtent') {\r\n            stream.readVector(extent.min);\r\n          } else if (token === 'MaximumExtent') {\r\n            stream.readVector(extent.max);\r\n          } else if (token === 'BoundsRadius') {\r\n            extent.boundsRadius = stream.readFloat();\r\n          }\r\n        }\r\n\r\n        this.sequenceExtents.push(extent);\r\n      } else if (token === 'MaterialID') {\r\n        this.materialId = stream.readInt();\r\n      } else if (token === 'SelectionGroup') {\r\n        this.selectionGroup = stream.readInt();\r\n      } else if (token === 'Unselectable') {\r\n        this.selectionFlags = 4;\r\n      } else if (token === 'LevelOfDetail') {\r\n        this.lod = stream.readInt();\r\n      } else if (token === 'Name') {\r\n        this.lodName = stream.read();\r\n      } else {\r\n        throw new Error(`Unknown token in Geoset: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeMdl(stream: TokenStream, version: number): void {\r\n    stream.startBlock('Geoset');\r\n\r\n    stream.writeVectorArrayBlock('Vertices', this.vertices, 3);\r\n    stream.writeVectorArrayBlock('Normals', this.normals, 3);\r\n\r\n    for (const uvSet of this.uvSets) {\r\n      stream.writeVectorArrayBlock('TVertices', uvSet, 2);\r\n    }\r\n\r\n    if (version > 800 && this.tangents.length) {\r\n      stream.writeVectorArrayBlock('Tangents', this.tangents, 4);\r\n    }\r\n\r\n    // Always write vertex groups if they exist.\r\n    if (this.vertexGroups.length) {\r\n      stream.startBlock('VertexGroup');\r\n\r\n      for (let i = 0, l = this.vertexGroups.length; i < l; i++) {\r\n        stream.writeLine(`${this.vertexGroups[i]},`);\r\n      }\r\n\r\n      stream.endBlock();\r\n    }\r\n\r\n    // If this is a Reforged HD geoset, write the skin.\r\n    if (version > 800 && this.skin.length) {\r\n      stream.startBlock('SkinWeights', this.skin.length / 8);\r\n\r\n      for (let i = 0, l = this.skin.length; i < l; i += 8) {\r\n        stream.writeLine(`${this.skin.subarray(i, i + 8).join(', ')},`);\r\n      }\r\n\r\n      stream.endBlock();\r\n    }\r\n\r\n    // For now hardcoded for triangles, until I see a model with something different.\r\n    stream.startBlock('Faces', 1, this.faces.length);\r\n    stream.startBlock('Triangles');\r\n    stream.writeVector(this.faces);\r\n    stream.endBlock();\r\n    stream.endBlock();\r\n\r\n    stream.startBlock('Groups', this.matrixGroups.length, this.matrixIndices.length);\r\n    let index = 0;\r\n    for (const groupSize of this.matrixGroups) {\r\n      stream.writeVectorAttrib('Matrices', this.matrixIndices.subarray(index, index + groupSize));\r\n      index += groupSize;\r\n    }\r\n    stream.endBlock();\r\n\r\n    this.extent.writeMdl(stream);\r\n\r\n    for (const sequenceExtent of this.sequenceExtents) {\r\n      stream.startBlock('Anim');\r\n      sequenceExtent.writeMdl(stream);\r\n      stream.endBlock();\r\n    }\r\n\r\n    stream.writeNumberAttrib('MaterialID', this.materialId);\r\n    stream.writeNumberAttrib('SelectionGroup', this.selectionGroup);\r\n\r\n    if (this.selectionFlags === 4) {\r\n      stream.writeFlag('Unselectable');\r\n    }\r\n\r\n    if (version > 800) {\r\n      stream.writeNumberAttrib('LevelOfDetail', this.lod);\r\n\r\n      if (this.lodName.length) {\r\n        stream.writeStringAttrib('Name', this.lodName);\r\n      }\r\n    }\r\n\r\n    stream.endBlock();\r\n  }\r\n\r\n  getByteLength(version: number): number {\r\n    let size = 120 + this.vertices.byteLength + this.normals.byteLength + this.faceTypeGroups.byteLength + this.faceGroups.byteLength + this.faces.byteLength + this.vertexGroups.byteLength + this.matrixGroups.byteLength + this.matrixIndices.byteLength + this.sequenceExtents.length * 28;\r\n\r\n    if (version > 800) {\r\n      size += 84;\r\n\r\n      if (this.tangents.length) {\r\n        size += 8 + this.tangents.byteLength;\r\n      }\r\n\r\n      if (this.skin.length) {\r\n        size += 8 + this.skin.byteLength;\r\n      }\r\n    }\r\n\r\n    for (const uvSet of this.uvSets) {\r\n      size += 8 + uvSet.byteLength;\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\nimport AnimatedObject from './animatedobject';\r\n\r\n/**\r\n * A geoset animation.\r\n */\r\nexport default class GeosetAnimation extends AnimatedObject {\r\n  alpha = 1;\r\n  flags = 0;\r\n  color = new Float32Array([1, 1, 1]);\r\n  geosetId = -1;\r\n\r\n  readMdx(stream: BinaryStream): void {\r\n    const size = stream.readUint32();\r\n\r\n    this.alpha = stream.readFloat32();\r\n    this.flags = stream.readUint32();\r\n    stream.readFloat32Array(this.color);\r\n    this.geosetId = stream.readInt32();\r\n\r\n    this.readAnimations(stream, size - 28);\r\n  }\r\n\r\n  writeMdx(stream: BinaryStream): void {\r\n    stream.writeUint32(this.getByteLength());\r\n    stream.writeFloat32(this.alpha);\r\n    stream.writeUint32(this.flags);\r\n    stream.writeFloat32Array(this.color);\r\n    stream.writeInt32(this.geosetId);\r\n\r\n    this.writeAnimations(stream);\r\n  }\r\n\r\n  readMdl(stream: TokenStream): void {\r\n    for (const token of super.readAnimatedBlock(stream)) {\r\n      if (token === 'DropShadow') {\r\n        this.flags |= 0x1;\r\n      } else if (token === 'static Alpha') {\r\n        this.alpha = stream.readFloat();\r\n      } else if (token === 'Alpha') {\r\n        this.readAnimation(stream, 'KGAO');\r\n      } else if (token === 'static Color') {\r\n        this.flags |= 0x2;\r\n        stream.readColor(this.color);\r\n      } else if (token === 'Color') {\r\n        this.flags |= 0x2;\r\n        this.readAnimation(stream, 'KGAC');\r\n      } else if (token === 'GeosetId') {\r\n        this.geosetId = stream.readInt();\r\n      } else {\r\n        throw new Error(`Unknown token in GeosetAnimation: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeMdl(stream: TokenStream): void {\r\n    stream.startBlock('GeosetAnim');\r\n\r\n    if (this.flags & 0x1) {\r\n      stream.writeFlag('DropShadow');\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KGAO')) {\r\n      stream.writeNumberAttrib('static Alpha', this.alpha);\r\n    }\r\n\r\n    if (this.flags & 0x2) {\r\n      if (!this.writeAnimation(stream, 'KGAC') && (this.color[0] !== 1 || this.color[1] !== 1 || this.color[2] !== 1)) {\r\n        stream.writeColor('static Color ', this.color);\r\n      }\r\n    }\r\n\r\n    stream.writeNumberAttrib('GeosetId', this.geosetId);\r\n\r\n    stream.endBlock();\r\n  }\r\n\r\n  override getByteLength(): number {\r\n    return 28 + super.getByteLength();\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\nimport AnimatedObject from './animatedobject';\r\nimport { Animation } from './animations';\r\n\r\nexport const enum Flags {\r\n  None = 0x0,\r\n  DontInheritTranslation = 0x1,\r\n  DontInheritScaling = 0x2,\r\n  DontInheritRotation = 0x4,\r\n  Billboarded = 0x8,\r\n  BillboardedLockX = 0x10,\r\n  BillboardedLockY = 0x20,\r\n  BillboardedLockZ = 0x40,\r\n  CameraAnchored = 0x80,\r\n}\r\n\r\n/**\r\n * A generic object.\r\n *\r\n * The parent class for all objects that exist in the world, and may contain spatial animations.\r\n * This includes bones, particle emitters, and many other things.\r\n */\r\nexport default abstract class GenericObject extends AnimatedObject {\r\n  name = '';\r\n  objectId = -1;\r\n  parentId = -1;\r\n  flags: Flags;\r\n\r\n  constructor(flags = Flags.None) {\r\n    super();\r\n\r\n    this.flags = flags;\r\n  }\r\n\r\n  readMdx(stream: BinaryStream): void {\r\n    const size = stream.readUint32();\r\n\r\n    this.name = stream.read(80);\r\n    this.objectId = stream.readInt32();\r\n    this.parentId = stream.readInt32();\r\n    this.flags = stream.readUint32();\r\n\r\n    this.readAnimations(stream, size - 96);\r\n  }\r\n\r\n  writeMdx(stream: BinaryStream): void {\r\n    stream.writeUint32(this.getGenericByteLength());\r\n    stream.skip(80 - stream.write(this.name));\r\n    stream.writeInt32(this.objectId);\r\n    stream.writeInt32(this.parentId);\r\n    stream.writeUint32(this.flags);\r\n\r\n    for (const animation of this.eachAnimation(true)) {\r\n      animation.writeMdx(stream);\r\n    }\r\n  }\r\n\r\n  writeNonGenericAnimationChunks(stream: BinaryStream): void {\r\n    for (const animation of this.eachAnimation(false)) {\r\n      animation.writeMdx(stream);\r\n    }\r\n  }\r\n\r\n  * readGenericBlock(stream: TokenStream): Generator<string> {\r\n    this.name = stream.read();\r\n\r\n    for (let token of this.readAnimatedBlock(stream)) {\r\n      if (token === 'ObjectId') {\r\n        this.objectId = stream.readInt();\r\n      } else if (token === 'Parent') {\r\n        this.parentId = stream.readInt();\r\n      } else if (token === 'BillboardedLockZ') {\r\n        this.flags |= Flags.BillboardedLockZ;\r\n      } else if (token === 'BillboardedLockY') {\r\n        this.flags |= Flags.BillboardedLockY;\r\n      } else if (token === 'BillboardedLockX') {\r\n        this.flags |= Flags.BillboardedLockX;\r\n      } else if (token === 'Billboarded') {\r\n        this.flags |= Flags.Billboarded;\r\n      } else if (token === 'CameraAnchored') {\r\n        this.flags |= Flags.CameraAnchored;\r\n      } else if (token === 'DontInherit') {\r\n        for (token of stream.readBlock()) {\r\n          if (token === 'Rotation') {\r\n            this.flags |= Flags.DontInheritRotation;\r\n          } else if (token === 'Translation') {\r\n            this.flags |= Flags.DontInheritTranslation;\r\n          } else if (token === 'Scaling') {\r\n            this.flags |= Flags.DontInheritScaling;\r\n          }\r\n        }\r\n      } else if (token === 'Translation') {\r\n        this.readAnimation(stream, 'KGTR');\r\n      } else if (token === 'Rotation') {\r\n        this.readAnimation(stream, 'KGRT');\r\n      } else if (token === 'Scaling') {\r\n        this.readAnimation(stream, 'KGSC');\r\n      } else {\r\n        yield token;\r\n      }\r\n    }\r\n  }\r\n\r\n  writeGenericHeader(stream: TokenStream): void {\r\n    stream.writeNumberAttrib('ObjectId', this.objectId);\r\n\r\n    if (this.parentId !== -1) {\r\n      stream.writeNumberAttrib('Parent', this.parentId);\r\n    }\r\n\r\n    if (this.flags & Flags.BillboardedLockZ) {\r\n      stream.writeFlag('BillboardedLockZ');\r\n    }\r\n\r\n    if (this.flags & Flags.BillboardedLockY) {\r\n      stream.writeFlag('BillboardedLockY');\r\n    }\r\n\r\n    if (this.flags & Flags.BillboardedLockX) {\r\n      stream.writeFlag('BillboardedLockX');\r\n    }\r\n\r\n    if (this.flags & Flags.Billboarded) {\r\n      stream.writeFlag('Billboarded');\r\n    }\r\n\r\n    if (this.flags & Flags.CameraAnchored) {\r\n      stream.writeFlag('CameraAnchored');\r\n    }\r\n\r\n    if (this.flags & Flags.DontInheritRotation) {\r\n      stream.writeFlag(`DontInherit { Rotation }`);\r\n    }\r\n\r\n    if (this.flags & Flags.DontInheritTranslation) {\r\n      stream.writeFlag(`DontInherit { Translation }`);\r\n    }\r\n\r\n    if (this.flags & Flags.DontInheritScaling) {\r\n      stream.writeFlag(`DontInherit { Scaling }`);\r\n    }\r\n  }\r\n\r\n  writeGenericAnimations(stream: TokenStream): void {\r\n    this.writeAnimation(stream, 'KGTR');\r\n    this.writeAnimation(stream, 'KGRT');\r\n    this.writeAnimation(stream, 'KGSC');\r\n  }\r\n\r\n  /**\r\n   * Allows to easily iterate either the GenericObject animations or the parent object animations.\r\n   */\r\n  * eachAnimation(wantGeneric: boolean): Generator<Animation> {\r\n    for (const animation of this.animations) {\r\n      const name = animation.name;\r\n      const isGeneric = (name === 'KGTR' || name === 'KGRT' || name === 'KGSC');\r\n\r\n      if ((wantGeneric && isGeneric) || (!wantGeneric && !isGeneric)) {\r\n        yield animation;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gets the byte length of the GenericObject part of whatever this object this.\r\n   * \r\n   * This is needed because only the KGTR, KGRT, and KGSC animations actually belong to it.\r\n   */\r\n  getGenericByteLength(): number {\r\n    let size = 96;\r\n\r\n    for (const animation of this.eachAnimation(true)) {\r\n      size += animation.getByteLength();\r\n    }\r\n\r\n    return size;\r\n  }\r\n\r\n  override getByteLength(): number {\r\n    return 96 + super.getByteLength();\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\nimport GenericObject from './genericobject';\r\n\r\n/**\r\n * A bone.\r\n */\r\nexport default class Bone extends GenericObject {\r\n  geosetId = -1;\r\n  geosetAnimationId = -1;\r\n\r\n  constructor() {\r\n    super(0x100);\r\n  }\r\n\r\n  override readMdx(stream: BinaryStream): void {\r\n    super.readMdx(stream);\r\n\r\n    this.geosetId = stream.readInt32();\r\n    this.geosetAnimationId = stream.readInt32();\r\n  }\r\n\r\n  override writeMdx(stream: BinaryStream): void {\r\n    super.writeMdx(stream);\r\n\r\n    stream.writeInt32(this.geosetId);\r\n    stream.writeInt32(this.geosetAnimationId);\r\n  }\r\n\r\n  readMdl(stream: TokenStream): void {\r\n    for (let token of super.readGenericBlock(stream)) {\r\n      if (token === 'GeosetId') {\r\n        token = stream.read();\r\n\r\n        if (token === 'Multiple') {\r\n          this.geosetId = -1;\r\n        } else {\r\n          this.geosetId = parseInt(token);\r\n        }\r\n      } else if (token === 'GeosetAnimId') {\r\n        token = stream.read();\r\n\r\n        if (token === 'None') {\r\n          this.geosetAnimationId = -1;\r\n        } else {\r\n          this.geosetAnimationId = parseInt(token);\r\n        }\r\n      } else {\r\n        throw new Error(`Unknown token in Bone ${this.name}: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeMdl(stream: TokenStream): void {\r\n    stream.startObjectBlock('Bone', this.name);\r\n    this.writeGenericHeader(stream);\r\n\r\n    if (this.geosetId === -1) {\r\n      stream.writeFlagAttrib('GeosetId', 'Multiple');\r\n    } else {\r\n      stream.writeNumberAttrib('GeosetId', this.geosetId);\r\n    }\r\n\r\n    if (this.geosetAnimationId === -1) {\r\n      stream.writeFlagAttrib('GeosetAnimId', 'None');\r\n    } else {\r\n      stream.writeNumberAttrib('GeosetAnimId', this.geosetAnimationId);\r\n    }\r\n\r\n    this.writeGenericAnimations(stream);\r\n    stream.endBlock();\r\n  }\r\n\r\n  override getByteLength(): number {\r\n    return 8 + super.getByteLength();\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\nimport GenericObject from './genericobject';\r\n\r\nexport const enum LightType {\r\n  None = -1,\r\n  Omnidirectional = 0,\r\n  Directional = 1,\r\n  Ambient = 2,\r\n}\r\n\r\n/**\r\n * A light.\r\n */\r\nexport default class Light extends GenericObject {\r\n  type = LightType.None;\r\n  attenuation = new Float32Array(2);\r\n  color = new Float32Array(3);\r\n  intensity = 0;\r\n  ambientColor = new Float32Array(3);\r\n  ambientIntensity = 0;\r\n\r\n  constructor() {\r\n    super(0x200);\r\n  }\r\n\r\n  override readMdx(stream: BinaryStream): void {\r\n    const start = stream.index;\r\n    const size = stream.readUint32();\r\n\r\n    super.readMdx(stream);\r\n\r\n    this.type = stream.readUint32();\r\n    stream.readFloat32Array(this.attenuation);\r\n    stream.readFloat32Array(this.color);\r\n    this.intensity = stream.readFloat32();\r\n    stream.readFloat32Array(this.ambientColor);\r\n    this.ambientIntensity = stream.readFloat32();\r\n\r\n    this.readAnimations(stream, size - (stream.index - start));\r\n  }\r\n\r\n  override writeMdx(stream: BinaryStream): void {\r\n    stream.writeUint32(this.getByteLength());\r\n\r\n    super.writeMdx(stream);\r\n\r\n    stream.writeUint32(this.type);\r\n    stream.writeFloat32Array(this.attenuation);\r\n    stream.writeFloat32Array(this.color);\r\n    stream.writeFloat32(this.intensity);\r\n    stream.writeFloat32Array(this.ambientColor);\r\n    stream.writeFloat32(this.ambientIntensity);\r\n\r\n    this.writeNonGenericAnimationChunks(stream);\r\n  }\r\n\r\n  readMdl(stream: TokenStream): void {\r\n    for (const token of super.readGenericBlock(stream)) {\r\n      if (token === 'Omnidirectional') {\r\n        this.type = LightType.Omnidirectional;\r\n      } else if (token === 'Directional') {\r\n        this.type = LightType.Directional;\r\n      } else if (token === 'Ambient') {\r\n        this.type = LightType.Ambient;\r\n      } else if (token === 'static AttenuationStart') {\r\n        this.attenuation[0] = stream.readFloat();\r\n      } else if (token === 'AttenuationStart') {\r\n        this.readAnimation(stream, 'KLAS');\r\n      } else if (token === 'static AttenuationEnd') {\r\n        this.attenuation[1] = stream.readFloat();\r\n      } else if (token === 'AttenuationEnd') {\r\n        this.readAnimation(stream, 'KLAE');\r\n      } else if (token === 'static Intensity') {\r\n        this.intensity = stream.readFloat();\r\n      } else if (token === 'Intensity') {\r\n        this.readAnimation(stream, 'KLAI');\r\n      } else if (token === 'static Color') {\r\n        stream.readColor(this.color);\r\n      } else if (token === 'Color') {\r\n        this.readAnimation(stream, 'KLAC');\r\n      } else if (token === 'static AmbIntensity') {\r\n        this.ambientIntensity = stream.readFloat();\r\n      } else if (token === 'AmbIntensity') {\r\n        this.readAnimation(stream, 'KLBI');\r\n      } else if (token === 'static AmbColor') {\r\n        stream.readColor(this.ambientColor);\r\n      } else if (token === 'AmbColor') {\r\n        this.readAnimation(stream, 'KLBC');\r\n      } else if (token === 'Visibility') {\r\n        this.readAnimation(stream, 'KLAV');\r\n      } else {\r\n        throw new Error(`Unknown token in Light: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeMdl(stream: TokenStream): void {\r\n    stream.startObjectBlock('Light', this.name);\r\n    this.writeGenericHeader(stream);\r\n\r\n    if (this.type === LightType.Omnidirectional) {\r\n      stream.writeFlag('Omnidirectional');\r\n    } else if (this.type === LightType.Directional) {\r\n      stream.writeFlag('Directional');\r\n    } else if (this.type === LightType.Ambient) {\r\n      stream.writeFlag('Ambient');\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KLAS')) {\r\n      stream.writeNumberAttrib('static AttenuationStart', this.attenuation[0]);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KLAE')) {\r\n      stream.writeNumberAttrib('static AttenuationEnd', this.attenuation[1]);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KLAI')) {\r\n      stream.writeNumberAttrib('static Intensity', this.intensity);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KLAC')) {\r\n      stream.writeColor('static Color', this.color);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KLBI')) {\r\n      stream.writeNumberAttrib('static AmbIntensity', this.ambientIntensity);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KLBC')) {\r\n      stream.writeColor('static AmbColor', this.ambientColor);\r\n    }\r\n\r\n    this.writeAnimation(stream, 'KLAV');\r\n\r\n    this.writeGenericAnimations(stream);\r\n    stream.endBlock();\r\n  }\r\n\r\n  override getByteLength(): number {\r\n    return 48 + super.getByteLength();\r\n  }\r\n}\r\n\r\n","import TokenStream from './tokenstream';\r\nimport GenericObject from './genericobject';\r\n\r\n/**\r\n * A helper.\r\n */\r\nexport default class Helper extends GenericObject {\r\n  readMdl(stream: TokenStream): void {\r\n    for (const token of super.readGenericBlock(stream)) {\r\n      throw new Error(`Unknown token in Helper: \"${token}\"`);\r\n    }\r\n  }\r\n\r\n  writeMdl(stream: TokenStream): void {\r\n    stream.startObjectBlock('Helper', this.name);\r\n    this.writeGenericHeader(stream);\r\n    this.writeGenericAnimations(stream);\r\n    stream.endBlock();\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\nimport GenericObject from './genericobject';\r\n\r\n/**\r\n * An attachment.\r\n */\r\nexport default class Attachment extends GenericObject {\r\n  path = '';\r\n  attachmentId = 0;\r\n\r\n  constructor() {\r\n    super(0x800);\r\n  }\r\n\r\n  override readMdx(stream: BinaryStream): void {\r\n    const start = stream.index;\r\n    const size = stream.readUint32();\r\n\r\n    super.readMdx(stream);\r\n\r\n    this.path = stream.read(260);\r\n    this.attachmentId = stream.readInt32();\r\n\r\n    this.readAnimations(stream, size - (stream.index - start));\r\n  }\r\n\r\n  override writeMdx(stream: BinaryStream): void {\r\n    stream.writeUint32(this.getByteLength());\r\n\r\n    super.writeMdx(stream);\r\n\r\n    stream.skip(260 - stream.write(this.path));\r\n    stream.writeInt32(this.attachmentId);\r\n\r\n    this.writeNonGenericAnimationChunks(stream);\r\n  }\r\n\r\n  readMdl(stream: TokenStream): void {\r\n    for (const token of super.readGenericBlock(stream)) {\r\n      if (token === 'AttachmentID') {\r\n        this.attachmentId = stream.readInt();\r\n      } else if (token === 'Path') {\r\n        this.path = stream.read();\r\n      } else if (token === 'Visibility') {\r\n        this.readAnimation(stream, 'KATV');\r\n      } else {\r\n        throw new Error(`Unknown token in Attachment ${this.name}: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeMdl(stream: TokenStream): void {\r\n    stream.startObjectBlock('Attachment', this.name);\r\n    this.writeGenericHeader(stream);\r\n\r\n    stream.writeNumberAttrib('AttachmentID', this.attachmentId); // Is this needed? MDX supplies it, but MdlxConv does not use it.\r\n\r\n    if (this.path.length) {\r\n      stream.writeStringAttrib('Path', this.path);\r\n    }\r\n\r\n    this.writeAnimation(stream, 'KATV');\r\n\r\n    this.writeGenericAnimations(stream);\r\n    stream.endBlock();\r\n  }\r\n\r\n  override getByteLength(): number {\r\n    return 268 + super.getByteLength();\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\nimport GenericObject from './genericobject';\r\n\r\nexport const enum Flags {\r\n  EmitterUsesMDL = 0x8000,\r\n  EmitterUsesTGA = 0x10000,\r\n}\r\n\r\n/**\r\n * A particle emitter.\r\n */\r\nexport default class ParticleEmitter extends GenericObject {\r\n  emissionRate = 0;\r\n  gravity = 0;\r\n  longitude = 0;\r\n  latitude = 0;\r\n  path = '';\r\n  lifeSpan = 0;\r\n  speed = 0;\r\n\r\n  constructor() {\r\n    super(0x1000);\r\n  }\r\n\r\n  override readMdx(stream: BinaryStream): void {\r\n    const start = stream.index;\r\n    const size = stream.readUint32();\r\n\r\n    super.readMdx(stream);\r\n\r\n    this.emissionRate = stream.readFloat32();\r\n    this.gravity = stream.readFloat32();\r\n    this.longitude = stream.readFloat32();\r\n    this.latitude = stream.readFloat32();\r\n    this.path = stream.read(260);\r\n    this.lifeSpan = stream.readFloat32();\r\n    this.speed = stream.readFloat32();\r\n\r\n    this.readAnimations(stream, size - (stream.index - start));\r\n  }\r\n\r\n  override writeMdx(stream: BinaryStream): void {\r\n    stream.writeUint32(this.getByteLength());\r\n\r\n    super.writeMdx(stream);\r\n\r\n    stream.writeFloat32(this.emissionRate);\r\n    stream.writeFloat32(this.gravity);\r\n    stream.writeFloat32(this.longitude);\r\n    stream.writeFloat32(this.latitude);\r\n    stream.skip(260 - stream.write(this.path));\r\n    stream.writeFloat32(this.lifeSpan);\r\n    stream.writeFloat32(this.speed);\r\n\r\n    this.writeNonGenericAnimationChunks(stream);\r\n  }\r\n\r\n  readMdl(stream: TokenStream): void {\r\n    for (let token of super.readGenericBlock(stream)) {\r\n      if (token === 'EmitterUsesMDL') {\r\n        this.flags |= Flags.EmitterUsesMDL;\r\n      } else if (token === 'EmitterUsesTGA') {\r\n        this.flags |= Flags.EmitterUsesTGA;\r\n      } else if (token === 'static EmissionRate') {\r\n        this.emissionRate = stream.readFloat();\r\n      } else if (token === 'EmissionRate') {\r\n        this.readAnimation(stream, 'KPEE');\r\n      } else if (token === 'static Gravity') {\r\n        this.gravity = stream.readFloat();\r\n      } else if (token === 'Gravity') {\r\n        this.readAnimation(stream, 'KPEG');\r\n      } else if (token === 'static Longitude') {\r\n        this.longitude = stream.readFloat();\r\n      } else if (token === 'Longitude') {\r\n        this.readAnimation(stream, 'KPLN');\r\n      } else if (token === 'static Latitude') {\r\n        this.latitude = stream.readFloat();\r\n      } else if (token === 'Latitude') {\r\n        this.readAnimation(stream, 'KPLT');\r\n      } else if (token === 'Visibility') {\r\n        this.readAnimation(stream, 'KPEV');\r\n      } else if (token === 'Particle') {\r\n        for (token of this.readAnimatedBlock(stream)) {\r\n          if (token === 'static LifeSpan') {\r\n            this.lifeSpan = stream.readFloat();\r\n          } else if (token === 'LifeSpan') {\r\n            this.readAnimation(stream, 'KPEL');\r\n          } else if (token === 'static InitVelocity') {\r\n            this.speed = stream.readFloat();\r\n          } else if (token === 'InitVelocity') {\r\n            this.readAnimation(stream, 'KPES');\r\n          } else if (token === 'Path') {\r\n            this.path = stream.read();\r\n          }\r\n        }\r\n      } else {\r\n        throw new Error(`Unknown token in ParticleEmitter: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeMdl(stream: TokenStream): void {\r\n    stream.startObjectBlock('ParticleEmitter', this.name);\r\n    this.writeGenericHeader(stream);\r\n\r\n    if (this.flags & Flags.EmitterUsesMDL) {\r\n      stream.writeFlag('EmitterUsesMDL');\r\n    }\r\n\r\n    if (this.flags & Flags.EmitterUsesTGA) {\r\n      stream.writeFlag('EmitterUsesTGA');\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KPEE')) {\r\n      stream.writeNumberAttrib('static EmissionRate', this.emissionRate);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KPEG')) {\r\n      stream.writeNumberAttrib('static Gravity', this.gravity);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KPLN')) {\r\n      stream.writeNumberAttrib('static Longitude', this.longitude);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KPLT')) {\r\n      stream.writeNumberAttrib('static Latitude', this.latitude);\r\n    }\r\n\r\n    this.writeAnimation(stream, 'KPEV');\r\n\r\n    stream.startBlock('Particle');\r\n\r\n    if (!this.writeAnimation(stream, 'KPEL')) {\r\n      stream.writeNumberAttrib('static LifeSpan', this.lifeSpan);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KPES')) {\r\n      stream.writeNumberAttrib('static InitVelocity', this.speed);\r\n    }\r\n\r\n    if ((this.flags & Flags.EmitterUsesMDL) || (this.flags & Flags.EmitterUsesTGA)) {\r\n      stream.writeStringAttrib('Path', this.path);\r\n    }\r\n\r\n    stream.endBlock();\r\n\r\n    this.writeGenericAnimations(stream);\r\n    stream.endBlock();\r\n  }\r\n\r\n  override getByteLength(): number {\r\n    return 288 + super.getByteLength();\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\nimport GenericObject from './genericobject';\r\n\r\nexport const enum Flags {\r\n  Unshaded = 0x8000,\r\n  SortPrimsFarZ = 0x10000,\r\n  LineEmitter = 0x20000,\r\n  Unfogged = 0x40000,\r\n  ModelSpace = 0x80000,\r\n  XYQuad = 0x100000,\r\n}\r\n\r\nexport const enum FilterMode {\r\n  Blend = 0,\r\n  Additive = 1,\r\n  Modulate = 2,\r\n  Modulate2x = 3,\r\n  AlphaKey = 4,\r\n}\r\n\r\nexport const enum HeadOrTail {\r\n  Head = 0,\r\n  Tail = 1,\r\n  Both = 2,\r\n}\r\n\r\n/**\r\n * A particle emitter type 2.\r\n */\r\nexport default class ParticleEmitter2 extends GenericObject {\r\n  speed = 0;\r\n  variation = 0;\r\n  latitude = 0;\r\n  gravity = 0;\r\n  lifeSpan = 0;\r\n  emissionRate = 0;\r\n  width = 0;\r\n  length = 0;\r\n  filterMode = FilterMode.Blend;\r\n  rows = 0;\r\n  columns = 0;\r\n  headOrTail = HeadOrTail.Head;\r\n  tailLength = 0;\r\n  timeMiddle = 0;\r\n  segmentColors: Float32Array[] = [new Float32Array(3), new Float32Array(3), new Float32Array(3)];\r\n  segmentAlphas = new Uint8Array(3);\r\n  segmentScaling = new Float32Array(3);\r\n  headIntervals: Uint32Array[] = [new Uint32Array(3), new Uint32Array(3)];\r\n  tailIntervals: Uint32Array[] = [new Uint32Array(3), new Uint32Array(3)];\r\n  textureId = -1;\r\n  squirt = 0;\r\n  priorityPlane = 0;\r\n  replaceableId = 0;\r\n\r\n  override readMdx(stream: BinaryStream): void {\r\n    const start = stream.index;\r\n    const size = stream.readUint32();\r\n\r\n    super.readMdx(stream);\r\n\r\n    this.speed = stream.readFloat32();\r\n    this.variation = stream.readFloat32();\r\n    this.latitude = stream.readFloat32();\r\n    this.gravity = stream.readFloat32();\r\n    this.lifeSpan = stream.readFloat32();\r\n    this.emissionRate = stream.readFloat32();\r\n    this.width = stream.readFloat32();\r\n    this.length = stream.readFloat32();\r\n    this.filterMode = stream.readUint32();\r\n    this.rows = stream.readUint32();\r\n    this.columns = stream.readUint32();\r\n    this.headOrTail = stream.readUint32();\r\n    this.tailLength = stream.readFloat32();\r\n    this.timeMiddle = stream.readFloat32();\r\n    stream.readFloat32Array(this.segmentColors[0]);\r\n    stream.readFloat32Array(this.segmentColors[1]);\r\n    stream.readFloat32Array(this.segmentColors[2]);\r\n    stream.readUint8Array(this.segmentAlphas);\r\n    stream.readFloat32Array(this.segmentScaling);\r\n    stream.readUint32Array(this.headIntervals[0]);\r\n    stream.readUint32Array(this.headIntervals[1]);\r\n    stream.readUint32Array(this.tailIntervals[0]);\r\n    stream.readUint32Array(this.tailIntervals[1]);\r\n    this.textureId = stream.readInt32();\r\n    this.squirt = stream.readUint32();\r\n    this.priorityPlane = stream.readInt32();\r\n    this.replaceableId = stream.readUint32();\r\n\r\n    this.readAnimations(stream, size - (stream.index - start));\r\n  }\r\n\r\n  override writeMdx(stream: BinaryStream): void {\r\n    stream.writeUint32(this.getByteLength());\r\n\r\n    super.writeMdx(stream);\r\n\r\n    stream.writeFloat32(this.speed);\r\n    stream.writeFloat32(this.variation);\r\n    stream.writeFloat32(this.latitude);\r\n    stream.writeFloat32(this.gravity);\r\n    stream.writeFloat32(this.lifeSpan);\r\n    stream.writeFloat32(this.emissionRate);\r\n    stream.writeFloat32(this.width);\r\n    stream.writeFloat32(this.length);\r\n    stream.writeUint32(this.filterMode);\r\n    stream.writeUint32(this.rows);\r\n    stream.writeUint32(this.columns);\r\n    stream.writeUint32(this.headOrTail);\r\n    stream.writeFloat32(this.tailLength);\r\n    stream.writeFloat32(this.timeMiddle);\r\n    stream.writeFloat32Array(this.segmentColors[0]);\r\n    stream.writeFloat32Array(this.segmentColors[1]);\r\n    stream.writeFloat32Array(this.segmentColors[2]);\r\n    stream.writeUint8Array(this.segmentAlphas);\r\n    stream.writeFloat32Array(this.segmentScaling);\r\n    stream.writeUint32Array(this.headIntervals[0]);\r\n    stream.writeUint32Array(this.headIntervals[1]);\r\n    stream.writeUint32Array(this.tailIntervals[0]);\r\n    stream.writeUint32Array(this.tailIntervals[1]);\r\n    stream.writeInt32(this.textureId);\r\n    stream.writeUint32(this.squirt);\r\n    stream.writeInt32(this.priorityPlane);\r\n    stream.writeUint32(this.replaceableId);\r\n\r\n    this.writeNonGenericAnimationChunks(stream);\r\n  }\r\n\r\n  readMdl(stream: TokenStream): void {\r\n    for (const token of super.readGenericBlock(stream)) {\r\n      if (token === 'SortPrimsFarZ') {\r\n        this.flags |= Flags.SortPrimsFarZ;\r\n      } else if (token === 'Unshaded') {\r\n        this.flags |= Flags.Unshaded;\r\n      } else if (token === 'LineEmitter') {\r\n        this.flags |= Flags.LineEmitter;\r\n      } else if (token === 'Unfogged') {\r\n        this.flags |= Flags.Unfogged;\r\n      } else if (token === 'ModelSpace') {\r\n        this.flags |= Flags.ModelSpace;\r\n      } else if (token === 'XYQuad') {\r\n        this.flags |= Flags.XYQuad;\r\n      } else if (token === 'static Speed') {\r\n        this.speed = stream.readFloat();\r\n      } else if (token === 'Speed') {\r\n        this.readAnimation(stream, 'KP2S');\r\n      } else if (token === 'static Variation') {\r\n        this.variation = stream.readFloat();\r\n      } else if (token === 'Variation') {\r\n        this.readAnimation(stream, 'KP2R');\r\n      } else if (token === 'static Latitude') {\r\n        this.latitude = stream.readFloat();\r\n      } else if (token === 'Latitude') {\r\n        this.readAnimation(stream, 'KP2L');\r\n      } else if (token === 'static Gravity') {\r\n        this.gravity = stream.readFloat();\r\n      } else if (token === 'Gravity') {\r\n        this.readAnimation(stream, 'KP2G');\r\n      } else if (token === 'Visibility') {\r\n        this.readAnimation(stream, 'KP2V');\r\n      } else if (token === 'Squirt') {\r\n        this.squirt = 1;\r\n      } else if (token === 'LifeSpan') {\r\n        this.lifeSpan = stream.readFloat();\r\n      } else if (token === 'static EmissionRate') {\r\n        this.emissionRate = stream.readFloat();\r\n      } else if (token === 'EmissionRate') {\r\n        this.readAnimation(stream, 'KP2E');\r\n      } else if (token === 'static Width') {\r\n        this.width = stream.readFloat();\r\n      } else if (token === 'Width') {\r\n        this.readAnimation(stream, 'KP2N');\r\n      } else if (token === 'static Length') {\r\n        this.length = stream.readFloat();\r\n      } else if (token === 'Length') {\r\n        this.readAnimation(stream, 'KP2W');\r\n      } else if (token === 'Blend') {\r\n        this.filterMode = FilterMode.Blend;\r\n      } else if (token === 'Additive') {\r\n        this.filterMode = FilterMode.Additive;\r\n      } else if (token === 'Modulate') {\r\n        this.filterMode = FilterMode.Modulate;\r\n      } else if (token === 'Modulate2x') {\r\n        this.filterMode = FilterMode.Modulate2x;\r\n      } else if (token === 'AlphaKey') {\r\n        this.filterMode = FilterMode.AlphaKey;\r\n      } else if (token === 'Rows') {\r\n        this.rows = stream.readInt();\r\n      } else if (token === 'Columns') {\r\n        this.columns = stream.readInt();\r\n      } else if (token === 'Head') {\r\n        this.headOrTail = HeadOrTail.Head;\r\n      } else if (token === 'Tail') {\r\n        this.headOrTail = HeadOrTail.Tail;\r\n      } else if (token === 'Both') {\r\n        this.headOrTail = HeadOrTail.Both;\r\n      } else if (token === 'TailLength') {\r\n        this.tailLength = stream.readFloat();\r\n      } else if (token === 'Time') {\r\n        this.timeMiddle = stream.readFloat();\r\n      } else if (token === 'SegmentColor') {\r\n        stream.read(); // {\r\n\r\n        for (let i = 0; i < 3; i++) {\r\n          stream.read(); // Color\r\n          stream.readColor(this.segmentColors[i]);\r\n        }\r\n\r\n        stream.read(); // }\r\n      } else if (token === 'Alpha') {\r\n        stream.readVector(this.segmentAlphas);\r\n      } else if (token === 'ParticleScaling') {\r\n        stream.readVector(this.segmentScaling);\r\n      } else if (token === 'LifeSpanUVAnim') {\r\n        stream.readVector(this.headIntervals[0]);\r\n      } else if (token === 'DecayUVAnim') {\r\n        stream.readVector(this.headIntervals[1]);\r\n      } else if (token === 'TailUVAnim') {\r\n        stream.readVector(this.tailIntervals[0]);\r\n      } else if (token === 'TailDecayUVAnim') {\r\n        stream.readVector(this.tailIntervals[1]);\r\n      } else if (token === 'TextureID') {\r\n        this.textureId = stream.readInt();\r\n      } else if (token === 'ReplaceableId') {\r\n        this.replaceableId = stream.readInt();\r\n      } else if (token === 'PriorityPlane') {\r\n        this.priorityPlane = stream.readInt();\r\n      } else {\r\n        throw new Error(`Unknown token in ParticleEmitter2: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeMdl(stream: TokenStream): void {\r\n    stream.startObjectBlock('ParticleEmitter2', this.name);\r\n    this.writeGenericHeader(stream);\r\n\r\n    if (this.flags & Flags.SortPrimsFarZ) {\r\n      stream.writeFlag('SortPrimsFarZ');\r\n    }\r\n\r\n    if (this.flags & Flags.Unshaded) {\r\n      stream.writeFlag('Unshaded');\r\n    }\r\n\r\n    if (this.flags & Flags.LineEmitter) {\r\n      stream.writeFlag('LineEmitter');\r\n    }\r\n\r\n    if (this.flags & Flags.Unfogged) {\r\n      stream.writeFlag('Unfogged');\r\n    }\r\n\r\n    if (this.flags & Flags.ModelSpace) {\r\n      stream.writeFlag('ModelSpace');\r\n    }\r\n\r\n    if (this.flags & Flags.XYQuad) {\r\n      stream.writeFlag('XYQuad');\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KP2S')) {\r\n      stream.writeNumberAttrib('static Speed', this.speed);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KP2R')) {\r\n      stream.writeNumberAttrib('static Variation', this.variation);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KP2L')) {\r\n      stream.writeNumberAttrib('static Latitude', this.latitude);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KP2G')) {\r\n      stream.writeNumberAttrib('static Gravity', this.gravity);\r\n    }\r\n\r\n    this.writeAnimation(stream, 'KP2V');\r\n\r\n    if (this.squirt) {\r\n      stream.writeFlag('Squirt');\r\n    }\r\n\r\n    stream.writeNumberAttrib('LifeSpan', this.lifeSpan);\r\n\r\n    if (!this.writeAnimation(stream, 'KP2E')) {\r\n      stream.writeNumberAttrib('static EmissionRate', this.emissionRate);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KP2N')) {\r\n      stream.writeNumberAttrib('static Width', this.width);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KP2W')) {\r\n      stream.writeNumberAttrib('static Length', this.length);\r\n    }\r\n\r\n    if (this.filterMode === FilterMode.Blend) {\r\n      stream.writeFlag('Blend');\r\n    } else if (this.filterMode === FilterMode.Additive) {\r\n      stream.writeFlag('Additive');\r\n    } else if (this.filterMode === FilterMode.Modulate) {\r\n      stream.writeFlag('Modulate');\r\n    } else if (this.filterMode === FilterMode.Modulate2x) {\r\n      stream.writeFlag('Modulate2x');\r\n    } else if (this.filterMode === FilterMode.AlphaKey) {\r\n      stream.writeFlag('AlphaKey');\r\n    }\r\n\r\n    stream.writeNumberAttrib('Rows', this.rows);\r\n    stream.writeNumberAttrib('Columns', this.columns);\r\n\r\n    if (this.headOrTail === HeadOrTail.Head) {\r\n      stream.writeFlag('Head');\r\n    } else if (this.headOrTail === HeadOrTail.Tail) {\r\n      stream.writeFlag('Tail');\r\n    } else if (this.headOrTail === HeadOrTail.Both) {\r\n      stream.writeFlag('Both');\r\n    }\r\n\r\n    stream.writeNumberAttrib('TailLength', this.tailLength);\r\n    stream.writeNumberAttrib('Time', this.timeMiddle);\r\n\r\n    stream.startBlock('SegmentColor');\r\n    stream.writeColor('Color', this.segmentColors[0]);\r\n    stream.writeColor('Color', this.segmentColors[1]);\r\n    stream.writeColor('Color', this.segmentColors[2]);\r\n    stream.endBlockComma();\r\n\r\n    stream.writeVectorAttrib('Alpha', this.segmentAlphas);\r\n    stream.writeVectorAttrib('ParticleScaling', this.segmentScaling);\r\n    stream.writeVectorAttrib('LifeSpanUVAnim', this.headIntervals[0]);\r\n    stream.writeVectorAttrib('DecayUVAnim', this.headIntervals[1]);\r\n    stream.writeVectorAttrib('TailUVAnim', this.tailIntervals[0]);\r\n    stream.writeVectorAttrib('TailDecayUVAnim', this.tailIntervals[1]);\r\n    stream.writeNumberAttrib('TextureID', this.textureId);\r\n\r\n    if (this.replaceableId !== 0) {\r\n      stream.writeNumberAttrib('ReplaceableId', this.replaceableId);\r\n    }\r\n\r\n    if (this.priorityPlane !== 0) {\r\n      stream.writeNumberAttrib('PriorityPlane', this.priorityPlane);\r\n    }\r\n\r\n    this.writeGenericAnimations(stream);\r\n    stream.endBlock();\r\n  }\r\n\r\n  override getByteLength(): number {\r\n    return 175 + super.getByteLength();\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\nimport GenericObject from './genericobject';\r\n\r\nexport const enum Flags {\r\n  Unshaded = 0x8000,\r\n  SortPrimsFarZ = 0x10000,\r\n  Unfogged = 0x40000,\r\n}\r\n\r\n/**\r\n * A popcorn particle emitter.\r\n * References a pkfx file, which is used by the PopcornFX runtime.\r\n *\r\n * @since 900\r\n */\r\nexport default class ParticleEmitterPopcorn extends GenericObject {\r\n  lifeSpan = 0;\r\n  emissionRate = 0;\r\n  speed = 0;\r\n  color = new Float32Array(3);\r\n  alpha = 1;\r\n  replaceableId = 0;\r\n  path = '';\r\n  animationVisiblityGuide = '';\r\n\r\n  override readMdx(stream: BinaryStream): void {\r\n    const start = stream.index;\r\n    const size = stream.readUint32();\r\n\r\n    super.readMdx(stream);\r\n\r\n    this.lifeSpan = stream.readFloat32();\r\n    this.emissionRate = stream.readFloat32();\r\n    this.speed = stream.readFloat32();\r\n    stream.readFloat32Array(this.color);\r\n    this.alpha = stream.readFloat32();\r\n    this.replaceableId = stream.readUint32();\r\n    this.path = stream.read(260);\r\n    this.animationVisiblityGuide = stream.read(260);\r\n\r\n    this.readAnimations(stream, size - (stream.index - start));\r\n  }\r\n\r\n  override writeMdx(stream: BinaryStream): void {\r\n    stream.writeUint32(this.getByteLength());\r\n\r\n    super.writeMdx(stream);\r\n\r\n    stream.writeFloat32(this.lifeSpan);\r\n    stream.writeFloat32(this.emissionRate);\r\n    stream.writeFloat32(this.speed);\r\n    stream.writeFloat32Array(this.color);\r\n    stream.writeFloat32(this.alpha);\r\n    stream.writeUint32(this.replaceableId);\r\n    stream.skip(260 - stream.write(this.path));\r\n    stream.skip(260 - stream.write(this.animationVisiblityGuide));\r\n\r\n    this.writeNonGenericAnimationChunks(stream);\r\n  }\r\n\r\n  readMdl(stream: TokenStream): void {\r\n    for (const token of super.readGenericBlock(stream)) {\r\n      if (token === 'SortPrimsFarZ') {\r\n        this.flags |= Flags.SortPrimsFarZ;\r\n      } else if (token === 'Unshaded') {\r\n        this.flags |= Flags.Unshaded;\r\n      } else if (token === 'Unfogged') {\r\n        this.flags |= Flags.Unfogged;\r\n      } else if (token === 'static LifeSpan') {\r\n        this.lifeSpan = stream.readFloat();\r\n      } else if (token === 'LifeSpan') {\r\n        this.readAnimation(stream, 'KPPL');\r\n      } else if (token === 'static EmissionRate') {\r\n        this.emissionRate = stream.readFloat();\r\n      } else if (token === 'EmissionRate') {\r\n        this.readAnimation(stream, 'KPPE');\r\n      } else if (token === 'static Speed') {\r\n        this.speed = stream.readFloat();\r\n      } else if (token === 'Speed') {\r\n        this.readAnimation(stream, 'KPPS');\r\n      } else if (token === 'static Color') {\r\n        stream.readVector(this.color);\r\n      } else if (token === 'Color') {\r\n        this.readAnimation(stream, 'KPPC');\r\n      } else if (token === 'static Alpha') {\r\n        this.alpha = stream.readFloat();\r\n      } else if (token === 'Alpha') {\r\n        this.readAnimation(stream, 'KPPA');\r\n      } else if (token === 'Visibility') {\r\n        this.readAnimation(stream, 'KPPV');\r\n      } else if (token === 'ReplaceableId') {\r\n        this.replaceableId = stream.readInt();\r\n      } else if (token === 'Path') {\r\n        this.path = stream.read();\r\n      } else if (token === 'AnimVisibilityGuide') {\r\n        this.animationVisiblityGuide = stream.read();\r\n      } else {\r\n        throw new Error(`Unknown token in ParticleEmitterPopcorn: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeMdl(stream: TokenStream): void {\r\n    stream.startObjectBlock('ParticleEmitterPopcorn', this.name);\r\n    this.writeGenericHeader(stream);\r\n\r\n    if (this.flags & Flags.SortPrimsFarZ) {\r\n      stream.writeFlag('SortPrimsFarZ');\r\n    }\r\n\r\n    if (this.flags & Flags.Unshaded) {\r\n      stream.writeFlag('Unshaded');\r\n    }\r\n\r\n    if (this.flags & Flags.Unfogged) {\r\n      stream.writeFlag('Unfogged');\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KPPL')) {\r\n      stream.writeNumberAttrib('static LifeSpan', this.lifeSpan);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KPPE')) {\r\n      stream.writeNumberAttrib('static EmissionRate', this.emissionRate);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KPPS')) {\r\n      stream.writeNumberAttrib('static Speed', this.speed);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KPPC')) {\r\n      stream.writeVectorAttrib('static Color', this.color);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KPPA')) {\r\n      stream.writeNumberAttrib('static Alpha', this.alpha);\r\n    }\r\n\r\n    this.writeAnimation(stream, 'KPPV');\r\n\r\n    if (this.replaceableId !== 0) {\r\n      stream.writeNumberAttrib('ReplaceableId', this.replaceableId);\r\n    }\r\n\r\n    if (this.path.length) {\r\n      stream.writeStringAttrib('Path', this.path);\r\n    }\r\n\r\n    if (this.animationVisiblityGuide.length) {\r\n      stream.writeStringAttrib('AnimVisibilityGuide', this.animationVisiblityGuide);\r\n    }\r\n\r\n    this.writeGenericAnimations(stream);\r\n    stream.endBlock();\r\n  }\r\n\r\n  override getByteLength(): number {\r\n    return 556 + super.getByteLength();\r\n  }\r\n}\r\n\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\nimport GenericObject from './genericobject';\r\n\r\n/**\r\n * A ribbon emitter.\r\n */\r\nexport default class RibbonEmitter extends GenericObject {\r\n  heightAbove = 0;\r\n  heightBelow = 0;\r\n  alpha = 0;\r\n  color = new Float32Array(3);\r\n  lifeSpan = 0;\r\n  textureSlot = 0;\r\n  emissionRate = 0;\r\n  rows = 0;\r\n  columns = 0;\r\n  materialId = 0;\r\n  gravity = 0;\r\n\r\n  constructor() {\r\n    super(0x4000);\r\n  }\r\n\r\n  override readMdx(stream: BinaryStream): void {\r\n    const start = stream.index;\r\n    const size = stream.readUint32();\r\n\r\n    super.readMdx(stream);\r\n\r\n    this.heightAbove = stream.readFloat32();\r\n    this.heightBelow = stream.readFloat32();\r\n    this.alpha = stream.readFloat32();\r\n    stream.readFloat32Array(this.color);\r\n    this.lifeSpan = stream.readFloat32();\r\n    this.textureSlot = stream.readUint32();\r\n    this.emissionRate = stream.readUint32();\r\n    this.rows = stream.readUint32();\r\n    this.columns = stream.readUint32();\r\n    this.materialId = stream.readInt32();\r\n    this.gravity = stream.readFloat32();\r\n\r\n    this.readAnimations(stream, size - (stream.index - start));\r\n  }\r\n\r\n  override writeMdx(stream: BinaryStream): void {\r\n    stream.writeUint32(this.getByteLength());\r\n\r\n    super.writeMdx(stream);\r\n\r\n    stream.writeFloat32(this.heightAbove);\r\n    stream.writeFloat32(this.heightBelow);\r\n    stream.writeFloat32(this.alpha);\r\n    stream.writeFloat32Array(this.color);\r\n    stream.writeFloat32(this.lifeSpan);\r\n    stream.writeUint32(this.textureSlot);\r\n    stream.writeUint32(this.emissionRate);\r\n    stream.writeUint32(this.rows);\r\n    stream.writeUint32(this.columns);\r\n    stream.writeInt32(this.materialId);\r\n    stream.writeFloat32(this.gravity);\r\n\r\n    this.writeNonGenericAnimationChunks(stream);\r\n  }\r\n\r\n  readMdl(stream: TokenStream): void {\r\n    for (const token of super.readGenericBlock(stream)) {\r\n      if (token === 'static HeightAbove') {\r\n        this.heightAbove = stream.readFloat();\r\n      } else if (token === 'HeightAbove') {\r\n        this.readAnimation(stream, 'KRHA');\r\n      } else if (token === 'static HeightBelow') {\r\n        this.heightBelow = stream.readFloat();\r\n      } else if (token === 'HeightBelow') {\r\n        this.readAnimation(stream, 'KRHB');\r\n      } else if (token === 'static Alpha') {\r\n        this.alpha = stream.readFloat();\r\n      } else if (token === 'Alpha') {\r\n        this.readAnimation(stream, 'KRAL');\r\n      } else if (token === 'static Color') {\r\n        stream.readColor(this.color);\r\n      } else if (token === 'Color') {\r\n        this.readAnimation(stream, 'KRCO');\r\n      } else if (token === 'static TextureSlot') {\r\n        this.textureSlot = stream.readInt();\r\n      } else if (token === 'TextureSlot') {\r\n        this.readAnimation(stream, 'KRTX');\r\n      } else if (token === 'Visibility') {\r\n        this.readAnimation(stream, 'KRVS');\r\n      } else if (token === 'EmissionRate') {\r\n        this.emissionRate = stream.readInt();\r\n      } else if (token === 'LifeSpan') {\r\n        this.lifeSpan = stream.readFloat();\r\n      } else if (token === 'Gravity') {\r\n        this.gravity = stream.readFloat();\r\n      } else if (token === 'Rows') {\r\n        this.rows = stream.readInt();\r\n      } else if (token === 'Columns') {\r\n        this.columns = stream.readInt();\r\n      } else if (token === 'MaterialID') {\r\n        this.materialId = stream.readInt();\r\n      } else {\r\n        throw new Error(`Unknown token in RibbonEmitter: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeMdl(stream: TokenStream): void {\r\n    stream.startObjectBlock('RibbonEmitter', this.name);\r\n    this.writeGenericHeader(stream);\r\n\r\n    if (!this.writeAnimation(stream, 'KRHA')) {\r\n      stream.writeNumberAttrib('static HeightAbove', this.heightAbove);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KRHB')) {\r\n      stream.writeNumberAttrib('static HeightBelow', this.heightBelow);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KRAL')) {\r\n      stream.writeNumberAttrib('static Alpha', this.alpha);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KRCO')) {\r\n      stream.writeColor('static Color', this.color);\r\n    }\r\n\r\n    if (!this.writeAnimation(stream, 'KRTX')) {\r\n      stream.writeNumberAttrib('static TextureSlot', this.textureSlot);\r\n    }\r\n\r\n    this.writeAnimation(stream, 'KRVS');\r\n\r\n    stream.writeNumberAttrib('EmissionRate', this.emissionRate);\r\n    stream.writeNumberAttrib('LifeSpan', this.lifeSpan);\r\n\r\n    if (this.gravity !== 0) {\r\n      stream.writeNumberAttrib('Gravity', this.gravity);\r\n    }\r\n\r\n    stream.writeNumberAttrib('Rows', this.rows);\r\n    stream.writeNumberAttrib('Columns', this.columns);\r\n    stream.writeNumberAttrib('MaterialID', this.materialId);\r\n\r\n    this.writeGenericAnimations(stream);\r\n    stream.endBlock();\r\n  }\r\n\r\n  override getByteLength(): number {\r\n    return 56 + super.getByteLength();\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\nimport AnimatedObject from './animatedobject';\r\n\r\n/**\r\n * A camera.\r\n */\r\nexport default class Camera extends AnimatedObject {\r\n  name = '';\r\n  position = new Float32Array(3);\r\n  fieldOfView = 0;\r\n  farClippingPlane = 0;\r\n  nearClippingPlane = 0;\r\n  targetPosition = new Float32Array(3);\r\n\r\n  readMdx(stream: BinaryStream): void {\r\n    const size = stream.readUint32();\r\n\r\n    this.name = stream.read(80);\r\n    stream.readFloat32Array(this.position);\r\n    this.fieldOfView = stream.readFloat32();\r\n    this.farClippingPlane = stream.readFloat32();\r\n    this.nearClippingPlane = stream.readFloat32();\r\n    stream.readFloat32Array(this.targetPosition);\r\n\r\n    this.readAnimations(stream, size - 120);\r\n  }\r\n\r\n  writeMdx(stream: BinaryStream): void {\r\n    stream.writeUint32(this.getByteLength());\r\n    stream.skip(80 - stream.write(this.name));\r\n    stream.writeFloat32Array(this.position);\r\n    stream.writeFloat32(this.fieldOfView);\r\n    stream.writeFloat32(this.farClippingPlane);\r\n    stream.writeFloat32(this.nearClippingPlane);\r\n    stream.writeFloat32Array(this.targetPosition);\r\n\r\n    this.writeAnimations(stream);\r\n  }\r\n\r\n  readMdl(stream: TokenStream): void {\r\n    this.name = stream.read();\r\n\r\n    for (let token of stream.readBlock()) {\r\n      if (token === 'Position') {\r\n        stream.readVector(this.position);\r\n      } else if (token === 'Translation') {\r\n        this.readAnimation(stream, 'KCTR');\r\n      } else if (token === 'Rotation') {\r\n        this.readAnimation(stream, 'KCRL');\r\n      } else if (token === 'FieldOfView') {\r\n        this.fieldOfView = stream.readFloat();\r\n      } else if (token === 'FarClip') {\r\n        this.farClippingPlane = stream.readFloat();\r\n      } else if (token === 'NearClip') {\r\n        this.nearClippingPlane = stream.readFloat();\r\n      } else if (token === 'Target') {\r\n        for (token of stream.readBlock()) {\r\n          if (token === 'Position') {\r\n            stream.readVector(this.targetPosition);\r\n          } else if (token === 'Translation') {\r\n            this.readAnimation(stream, 'KTTR');\r\n          } else {\r\n            throw new Error(`Unknown token in Camera ${this.name}'s Target: \"${token}\"`);\r\n          }\r\n        }\r\n      } else {\r\n        throw new Error(`Unknown token in Camera ${this.name}: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeMdl(stream: TokenStream): void {\r\n    stream.startObjectBlock('Camera', this.name);\r\n\r\n    stream.writeVectorAttrib('Position', this.position);\r\n    this.writeAnimation(stream, 'KCTR');\r\n    this.writeAnimation(stream, 'KCRL');\r\n    stream.writeNumberAttrib('FieldOfView', this.fieldOfView);\r\n    stream.writeNumberAttrib('FarClip', this.farClippingPlane);\r\n    stream.writeNumberAttrib('NearClip', this.nearClippingPlane);\r\n\r\n    stream.startBlock('Target');\r\n    stream.writeVectorAttrib('Position', this.targetPosition);\r\n    this.writeAnimation(stream, 'KTTR');\r\n    stream.endBlock();\r\n\r\n    stream.endBlock();\r\n  }\r\n\r\n  override getByteLength(): number {\r\n    return 120 + super.getByteLength();\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\nimport GenericObject from './genericobject';\r\n\r\n/**\r\n * An event object.\r\n */\r\nexport default class EventObject extends GenericObject {\r\n  globalSequenceId = -1;\r\n  tracks = new Uint32Array(0);\r\n\r\n  constructor() {\r\n    super(0x400);\r\n  }\r\n\r\n  override readMdx(stream: BinaryStream): void {\r\n    super.readMdx(stream);\r\n\r\n    stream.skip(4); // KEVT\r\n\r\n    const count = stream.readUint32();\r\n\r\n    this.globalSequenceId = stream.readInt32();\r\n    this.tracks = stream.readUint32Array(count);\r\n  }\r\n\r\n  override writeMdx(stream: BinaryStream): void {\r\n    super.writeMdx(stream);\r\n    stream.writeBinary('KEVT');\r\n    stream.writeUint32(this.tracks.length);\r\n    stream.writeInt32(this.globalSequenceId);\r\n    stream.writeUint32Array(this.tracks);\r\n  }\r\n\r\n  readMdl(stream: TokenStream): void {\r\n    for (const token of super.readGenericBlock(stream)) {\r\n      if (token === 'EventTrack') {\r\n        const count = stream.readInt();\r\n\r\n        this.tracks = new Uint32Array(count);\r\n\r\n        stream.read(); // {\r\n\r\n        if (stream.peek() === 'GlobalSeqId') {\r\n          stream.read();\r\n\r\n          this.globalSequenceId = stream.readInt();\r\n        }\r\n\r\n        for (let i = 0; i < count; i++) {\r\n          this.tracks[i] = stream.readInt();\r\n        }\r\n\r\n        stream.read(); // }\r\n      } else {\r\n        throw new Error(`Unknown token in EventObject: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeMdl(stream: TokenStream): void {\r\n    stream.startObjectBlock('EventObject', this.name);\r\n    this.writeGenericHeader(stream);\r\n\r\n    stream.startBlock('EventTrack', this.tracks.length);\r\n\r\n    if (this.globalSequenceId !== -1) {\r\n      stream.writeNumberAttrib('GlobalSeqId', this.globalSequenceId);\r\n    }\r\n\r\n    for (const track of this.tracks) {\r\n      stream.writeFlag(`${track}`);\r\n    }\r\n\r\n    stream.endBlock();\r\n\r\n    this.writeGenericAnimations(stream);\r\n    stream.endBlock();\r\n  }\r\n\r\n  override getByteLength(): number {\r\n    return 12 + this.tracks.byteLength + super.getByteLength();\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\nimport GenericObject from './genericobject';\r\n\r\nexport const enum Shape {\r\n  Box = 0,\r\n  Plane = 1,\r\n  Sphere = 2,\r\n  Cylinder = 3,\r\n}\r\n\r\n/**\r\n * A collision shape.\r\n */\r\nexport default class CollisionShape extends GenericObject {\r\n  type = Shape.Box;\r\n  vertices: Float32Array[] = [new Float32Array(3), new Float32Array(3)];\r\n  boundsRadius = 0;\r\n\r\n  constructor() {\r\n    super(0x2000);\r\n  }\r\n\r\n  override readMdx(stream: BinaryStream): void {\r\n    super.readMdx(stream);\r\n\r\n    this.type = stream.readUint32();\r\n\r\n    stream.readFloat32Array(this.vertices[0]);\r\n\r\n    if (this.type !== Shape.Sphere) {\r\n      stream.readFloat32Array(this.vertices[1]);\r\n    }\r\n\r\n    if (this.type === Shape.Sphere || this.type === Shape.Cylinder) {\r\n      this.boundsRadius = stream.readFloat32();\r\n    }\r\n  }\r\n\r\n  override writeMdx(stream: BinaryStream): void {\r\n    super.writeMdx(stream);\r\n\r\n    stream.writeUint32(this.type);\r\n    stream.writeFloat32Array(this.vertices[0]);\r\n\r\n    if (this.type !== Shape.Sphere) {\r\n      stream.writeFloat32Array(this.vertices[1]);\r\n    }\r\n\r\n    if (this.type === Shape.Sphere || this.type === Shape.Cylinder) {\r\n      stream.writeFloat32(this.boundsRadius);\r\n    }\r\n  }\r\n\r\n  readMdl(stream: TokenStream): void {\r\n    for (const token of super.readGenericBlock(stream)) {\r\n      if (token === 'Box') {\r\n        this.type = Shape.Box;\r\n      } else if (token === 'Plane') {\r\n        this.type = Shape.Plane;\r\n      } else if (token === 'Sphere') {\r\n        this.type = Shape.Sphere;\r\n      } else if (token === 'Cylinder') {\r\n        this.type = Shape.Cylinder;\r\n      } else if (token === 'Vertices') {\r\n        const count = stream.readInt();\r\n\r\n        stream.read(); // {\r\n\r\n        stream.readVector(this.vertices[0]);\r\n\r\n        if (count === 2) {\r\n          stream.readVector(this.vertices[1]);\r\n        }\r\n\r\n        stream.read(); // }\r\n      } else if (token === 'BoundsRadius') {\r\n        this.boundsRadius = stream.readFloat();\r\n      } else {\r\n        throw new Error(`Unknown token in CollisionShape: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeMdl(stream: TokenStream): void {\r\n    stream.startObjectBlock('CollisionShape', this.name);\r\n    this.writeGenericHeader(stream);\r\n\r\n    let type = '';\r\n    let vertices = 2;\r\n    let boundsRadius = false;\r\n\r\n    if (this.type === Shape.Box) {\r\n      type = 'Box';\r\n    } else if (this.type === Shape.Plane) {\r\n      type = 'Plane';\r\n    } else if (this.type === Shape.Sphere) {\r\n      type = 'Sphere';\r\n      vertices = 1;\r\n      boundsRadius = true;\r\n    } else if (this.type === Shape.Cylinder) {\r\n      type = 'Cylinder';\r\n      boundsRadius = true;\r\n    }\r\n\r\n    stream.writeFlag(type);\r\n    stream.startBlock('Vertices', vertices);\r\n    stream.writeVector(this.vertices[0]);\r\n\r\n    if (vertices === 2) {\r\n      stream.writeVector(this.vertices[1]);\r\n    }\r\n\r\n    stream.endBlock();\r\n\r\n    if (boundsRadius) {\r\n      stream.writeNumberAttrib('BoundsRadius', this.boundsRadius);\r\n    }\r\n\r\n    this.writeGenericAnimations(stream);\r\n    stream.endBlock();\r\n  }\r\n\r\n  override getByteLength(): number {\r\n    let size = 16 + super.getByteLength();\r\n\r\n    if (this.type !== Shape.Sphere) {\r\n      size += 12;\r\n    }\r\n\r\n    if (this.type === Shape.Sphere || this.type === Shape.Cylinder) {\r\n      size += 4;\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport TokenStream from './tokenstream';\r\n\r\n/**\r\n * A face effect.\r\n */\r\nexport default class FaceEffect {\r\n  type = '';\r\n  path = '';\r\n\r\n  readMdx(stream: BinaryStream): void {\r\n    this.type = stream.read(80);\r\n    this.path = stream.read(260);\r\n  }\r\n\r\n  writeMdx(stream: BinaryStream): void {\r\n    stream.skip(80 - stream.write(this.type));\r\n    stream.skip(260 - stream.write(this.path));\r\n  }\r\n\r\n  readMdl(stream: TokenStream): void {\r\n    this.type = stream.read();\r\n\r\n    for (const token of stream.readBlock()) {\r\n      if (token === 'Path') {\r\n        this.path = stream.read();\r\n      } else {\r\n        throw new Error(`Unknown token in FaceEffect: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeMdl(stream: TokenStream): void {\r\n    stream.startObjectBlock('FaceFX', this.type);\r\n    stream.writeStringAttrib('Path', this.path);\r\n    stream.endBlock();\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\n\r\n/**\r\n * An unknown chunk.\r\n */\r\nexport default class UnknownChunk {\r\n  tag: string;\r\n  chunk: Uint8Array;\r\n\r\n  constructor(stream: BinaryStream, size: number, tag: string) {\r\n    this.tag = tag;\r\n    this.chunk = stream.readUint8Array(new Uint8Array(size));\r\n  }\r\n\r\n  writeMdx(stream: BinaryStream): void {\r\n    stream.writeBinary(this.tag);\r\n    stream.writeUint32(this.chunk.byteLength);\r\n    stream.writeUint8Array(this.chunk);\r\n  }\r\n\r\n  getByteLength(): number {\r\n    return 8 + this.chunk.byteLength;\r\n  }\r\n}\r\n","import { isStringInBytes, isStringInString } from '../../common/searches';\r\n\r\n/**\r\n * Detects if the given object is an MDX source.\r\n */\r\nexport function isMdx(bytes: unknown): boolean {\r\n  if (bytes instanceof ArrayBuffer) {\r\n    bytes = new Uint8Array(bytes);\r\n  }\r\n\r\n  if (bytes instanceof Uint8Array) {\r\n    if (bytes[0] === 0x4d && bytes[1] === 0x44 && bytes[2] === 0x4c && bytes[3] === 0x58) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  if (typeof bytes === 'string' && bytes.startsWith('MDLX')) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n/**\r\n * Detects if the given object is an MDL source.\r\n */\r\nexport function isMdl(bytes: unknown): boolean {\r\n  if (bytes instanceof ArrayBuffer) {\r\n    bytes = new Uint8Array(bytes);\r\n  }\r\n\r\n  // Look for FormatVersion in the first 4KB.\r\n  if (bytes instanceof Uint8Array && isStringInBytes(bytes, 'FormatVersion', 0, 4096)) {\r\n    return true;\r\n  }\r\n\r\n  // If the source is a string, look for FormatVersion same as above.\r\n  if (typeof bytes === 'string' && isStringInString(bytes, 'FormatVersion', 0, 4096)) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport { decodeUtf8, encodeUtf8 } from '../../common/utf8';\r\nimport TokenStream from './tokenstream';\r\nimport Extent from './extent';\r\nimport Sequence from './sequence';\r\nimport Material from './material';\r\nimport Texture from './texture';\r\nimport TextureAnimation from './textureanimation';\r\nimport Geoset from './geoset';\r\nimport GeosetAnimation from './geosetanimation';\r\nimport GenericObject from './genericobject';\r\nimport Bone from './bone';\r\nimport Light from './light';\r\nimport Helper from './helper';\r\nimport Attachment from './attachment';\r\nimport ParticleEmitter from './particleemitter';\r\nimport ParticleEmitter2 from './particleemitter2';\r\nimport ParticleEmitterPopcorn from './particleemitterpopcorn';\r\nimport RibbonEmitter from './ribbonemitter';\r\nimport Camera from './camera';\r\nimport EventObject from './eventobject';\r\nimport CollisionShape from './collisionshape';\r\nimport FaceEffect from './faceeffect';\r\nimport UnknownChunk from './unknownchunk';\r\nimport { isMdl, isMdx } from './isformat';\r\n\r\n// Used below to get proper typings for the generic methods.\r\ntype MdxStaticObject = Sequence | Texture | FaceEffect;\r\ntype MdxDynamicObject = Material | TextureAnimation | Geoset | GeosetAnimation | Bone | Light | Helper | Attachment | ParticleEmitter | ParticleEmitter2 | RibbonEmitter | Camera | EventObject | CollisionShape | ParticleEmitterPopcorn;\r\ntype MdlNumberedObject = Sequence | Texture | Material | TextureAnimation;\r\ntype MdlObject = Geoset | GeosetAnimation | Bone | Light | Helper | Attachment | ParticleEmitter | ParticleEmitter2 | RibbonEmitter | Camera | EventObject | CollisionShape | FaceEffect;\r\n\r\n/**\r\n * A Warcraft 3 model.\r\n * Supports loading from and saving to both the binary MDX and text MDL file formats.\r\n */\r\nexport default class Model {\r\n  /**\r\n   * 800 for Warcraft 3: RoC and TFT.\r\n   * >800 for Warcraft 3: Reforged.\r\n   */\r\n  version = 800;\r\n  name = '';\r\n  /**\r\n   * To the best of my knowledge, this should always be left empty.\r\n   */\r\n  animationFile = '';\r\n  extent = new Extent();\r\n  /**\r\n   * This is only used by the now-defunct previewer that came with Art Tools.\r\n   */\r\n  blendTime = 0;\r\n  sequences: Sequence[] = [];\r\n  globalSequences: number[] = [];\r\n  materials: Material[] = [];\r\n  textures: Texture[] = [];\r\n  textureAnimations: TextureAnimation[] = [];\r\n  geosets: Geoset[] = [];\r\n  geosetAnimations: GeosetAnimation[] = [];\r\n  bones: Bone[] = [];\r\n  lights: Light[] = [];\r\n  helpers: Helper[] = [];\r\n  attachments: Attachment[] = [];\r\n  pivotPoints: Float32Array[] = [];\r\n  particleEmitters: ParticleEmitter[] = [];\r\n  particleEmitters2: ParticleEmitter2[] = [];\r\n  /**\r\n   * @since 900\r\n   */\r\n  particleEmittersPopcorn: ParticleEmitterPopcorn[] = [];\r\n  ribbonEmitters: RibbonEmitter[] = [];\r\n  cameras: Camera[] = [];\r\n  eventObjects: EventObject[] = [];\r\n  collisionShapes: CollisionShape[] = [];\r\n  /**\r\n   * @since 900\r\n   */\r\n  faceEffects: FaceEffect[] = [];\r\n  /**\r\n   * @since 900\r\n   */\r\n  bindPose: Float32Array[] = [];\r\n  /**\r\n   * The MDX format is chunk based, and Warcraft 3 does not mind there being unknown chunks in there.\r\n   * Some 3rd party tools use this to attach metadata to models.\r\n   * When an unknown chunk is encountered, it will be added here.\r\n   * These chunks will be saved when saving as MDX.\r\n   */\r\n  unknownChunks: UnknownChunk[] = [];\r\n\r\n  /**\r\n   * Load the model from MDX or MDL.\r\n   * The format is detected automatically.\r\n   */\r\n  load(buffer: ArrayBuffer | Uint8Array | string): void {\r\n    if (isMdx(buffer)) {\r\n      if (typeof buffer === 'string') {\r\n        buffer = encodeUtf8(buffer);\r\n      }\r\n\r\n      this.loadMdx(buffer);\r\n    } else if (isMdl(buffer)) {\r\n      if (typeof buffer !== 'string') {\r\n        buffer = decodeUtf8(buffer);\r\n      }\r\n\r\n      this.loadMdl(buffer);\r\n    } else {\r\n      throw new Error('Not a valid MDX/MDL buffer');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Load the model from MDX.\r\n   */\r\n  loadMdx(buffer: ArrayBuffer | Uint8Array): void {\r\n    const stream = new BinaryStream(buffer);\r\n    let tag;\r\n    let size;\r\n\r\n    stream.skip(4); // MDLX\r\n\r\n    while (stream.remaining > 0) {\r\n      tag = stream.readBinary(4);\r\n      size = stream.readUint32();\r\n\r\n      if (tag === 'VERS') {\r\n        this.loadVersionChunk(stream);\r\n      } else if (tag === 'MODL') {\r\n        this.loadModelChunk(stream);\r\n      } else if (tag === 'SEQS') {\r\n        this.loadStaticObjects(this.sequences, Sequence, stream, size / 132);\r\n      } else if (tag === 'GLBS') {\r\n        this.loadGlobalSequenceChunk(stream, size);\r\n      } else if (tag === 'MTLS') {\r\n        this.loadDynamicObjects(this.materials, Material, stream, size);\r\n      } else if (tag === 'TEXS') {\r\n        this.loadStaticObjects(this.textures, Texture, stream, size / 268);\r\n      } else if (tag === 'TXAN') {\r\n        this.loadDynamicObjects(this.textureAnimations, TextureAnimation, stream, size);\r\n      } else if (tag === 'GEOS') {\r\n        this.loadDynamicObjects(this.geosets, Geoset, stream, size);\r\n      } else if (tag === 'GEOA') {\r\n        this.loadDynamicObjects(this.geosetAnimations, GeosetAnimation, stream, size);\r\n      } else if (tag === 'BONE') {\r\n        this.loadDynamicObjects(this.bones, Bone, stream, size);\r\n      } else if (tag === 'LITE') {\r\n        this.loadDynamicObjects(this.lights, Light, stream, size);\r\n      } else if (tag === 'HELP') {\r\n        this.loadDynamicObjects(this.helpers, Helper, stream, size);\r\n      } else if (tag === 'ATCH') {\r\n        this.loadDynamicObjects(this.attachments, Attachment, stream, size);\r\n      } else if (tag === 'PIVT') {\r\n        this.loadPivotPointChunk(stream, size);\r\n      } else if (tag === 'PREM') {\r\n        this.loadDynamicObjects(this.particleEmitters, ParticleEmitter, stream, size);\r\n      } else if (tag === 'PRE2') {\r\n        this.loadDynamicObjects(this.particleEmitters2, ParticleEmitter2, stream, size);\r\n      } else if (tag === 'CORN') {\r\n        this.loadDynamicObjects(this.particleEmittersPopcorn, ParticleEmitterPopcorn, stream, size);\r\n      } else if (tag === 'RIBB') {\r\n        this.loadDynamicObjects(this.ribbonEmitters, RibbonEmitter, stream, size);\r\n      } else if (tag === 'CAMS') {\r\n        this.loadDynamicObjects(this.cameras, Camera, stream, size);\r\n      } else if (tag === 'EVTS') {\r\n        this.loadDynamicObjects(this.eventObjects, EventObject, stream, size);\r\n      } else if (tag === 'CLID') {\r\n        this.loadDynamicObjects(this.collisionShapes, CollisionShape, stream, size);\r\n      } else if (tag === 'FAFX') {\r\n        this.loadStaticObjects(this.faceEffects, FaceEffect, stream, size / 340);\r\n      } else if (tag === 'BPOS') {\r\n        this.loadBindPoseChunk(stream, size);\r\n      } else {\r\n        this.unknownChunks.push(new UnknownChunk(stream, size, tag));\r\n      }\r\n    }\r\n  }\r\n\r\n  loadVersionChunk(stream: BinaryStream): void {\r\n    this.version = stream.readUint32();\r\n  }\r\n\r\n  loadModelChunk(stream: BinaryStream): void {\r\n    this.name = stream.read(80);\r\n    this.animationFile = stream.read(260);\r\n    this.extent.readMdx(stream);\r\n    this.blendTime = stream.readUint32();\r\n  }\r\n\r\n  loadStaticObjects<T extends MdxStaticObject>(out: T[], constructor: new () => T, stream: BinaryStream, count: number): void {\r\n    for (let i = 0; i < count; i++) {\r\n      const object = new constructor();\r\n\r\n      object.readMdx(stream);\r\n\r\n      out.push(object);\r\n    }\r\n  }\r\n\r\n  loadGlobalSequenceChunk(stream: BinaryStream, size: number): void {\r\n    for (let i = 0, l = size / 4; i < l; i++) {\r\n      this.globalSequences.push(stream.readUint32());\r\n    }\r\n  }\r\n\r\n  loadDynamicObjects<T extends MdxDynamicObject>(out: T[], constructor: new () => T, stream: BinaryStream, size: number): void {\r\n    const end = stream.index + size;\r\n\r\n    while (stream.index < end) {\r\n      const object = new constructor();\r\n\r\n      object.readMdx(stream, this.version);\r\n\r\n      out.push(object);\r\n    }\r\n  }\r\n\r\n  loadPivotPointChunk(stream: BinaryStream, size: number): void {\r\n    for (let i = 0, l = size / 12; i < l; i++) {\r\n      this.pivotPoints.push(stream.readFloat32Array(3));\r\n    }\r\n  }\r\n\r\n  loadBindPoseChunk(stream: BinaryStream, _size: number): void {\r\n    for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n      this.bindPose[i] = stream.readFloat32Array(12);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Save the model as MDX.\r\n   */\r\n  saveMdx(): Uint8Array {\r\n    const stream = new BinaryStream(new ArrayBuffer(this.getByteLength()));\r\n\r\n    stream.writeBinary('MDLX');\r\n    this.saveVersionChunk(stream);\r\n    this.saveModelChunk(stream);\r\n    this.saveStaticObjectChunk(stream, 'SEQS', this.sequences, 132);\r\n    this.saveGlobalSequenceChunk(stream);\r\n    this.saveDynamicObjectChunk(stream, 'MTLS', this.materials);\r\n    this.saveStaticObjectChunk(stream, 'TEXS', this.textures, 268);\r\n    this.saveDynamicObjectChunk(stream, 'TXAN', this.textureAnimations);\r\n    this.saveDynamicObjectChunk(stream, 'GEOS', this.geosets);\r\n    this.saveDynamicObjectChunk(stream, 'GEOA', this.geosetAnimations);\r\n    this.saveDynamicObjectChunk(stream, 'BONE', this.bones);\r\n    this.saveDynamicObjectChunk(stream, 'LITE', this.lights);\r\n    this.saveDynamicObjectChunk(stream, 'HELP', this.helpers);\r\n    this.saveDynamicObjectChunk(stream, 'ATCH', this.attachments);\r\n    this.savePivotPointChunk(stream);\r\n    this.saveDynamicObjectChunk(stream, 'PREM', this.particleEmitters);\r\n    this.saveDynamicObjectChunk(stream, 'PRE2', this.particleEmitters2);\r\n\r\n    if (this.version > 800) {\r\n      this.saveDynamicObjectChunk(stream, 'CORN', this.particleEmittersPopcorn);\r\n    }\r\n\r\n    this.saveDynamicObjectChunk(stream, 'RIBB', this.ribbonEmitters);\r\n    this.saveDynamicObjectChunk(stream, 'CAMS', this.cameras);\r\n    this.saveDynamicObjectChunk(stream, 'EVTS', this.eventObjects);\r\n    this.saveDynamicObjectChunk(stream, 'CLID', this.collisionShapes);\r\n\r\n    if (this.version > 800) {\r\n      this.saveStaticObjectChunk(stream, 'FAFX', this.faceEffects, 340);\r\n      this.saveBindPoseChunk(stream);\r\n    }\r\n\r\n    for (const chunk of this.unknownChunks) {\r\n      chunk.writeMdx(stream);\r\n    }\r\n\r\n    return stream.uint8array;\r\n  }\r\n\r\n  saveVersionChunk(stream: BinaryStream): void {\r\n    stream.writeBinary('VERS');\r\n    stream.writeUint32(4);\r\n    stream.writeUint32(this.version);\r\n  }\r\n\r\n  saveModelChunk(stream: BinaryStream): void {\r\n    stream.writeBinary('MODL');\r\n    stream.writeUint32(372);\r\n    stream.skip(80 - stream.write(this.name));\r\n    stream.skip(260 - stream.write(this.animationFile));\r\n    this.extent.writeMdx(stream);\r\n    stream.writeUint32(this.blendTime);\r\n  }\r\n\r\n  saveStaticObjectChunk(stream: BinaryStream, name: string, objects: (Sequence | Texture | FaceEffect)[], size: number): void {\r\n    if (objects.length) {\r\n      stream.writeBinary(name);\r\n      stream.writeUint32(objects.length * size);\r\n\r\n      for (const object of objects) {\r\n        object.writeMdx(stream);\r\n      }\r\n    }\r\n  }\r\n\r\n  saveGlobalSequenceChunk(stream: BinaryStream): void {\r\n    if (this.globalSequences.length) {\r\n      stream.writeBinary('GLBS');\r\n      stream.writeUint32(this.globalSequences.length * 4);\r\n\r\n      for (const globalSequence of this.globalSequences) {\r\n        stream.writeUint32(globalSequence);\r\n      }\r\n    }\r\n  }\r\n\r\n  saveDynamicObjectChunk(stream: BinaryStream, name: string, objects: (Material | TextureAnimation | Geoset | GeosetAnimation | GenericObject | Camera)[]): void {\r\n    if (objects.length) {\r\n      stream.writeBinary(name);\r\n      stream.writeUint32(this.getObjectsByteLength(objects));\r\n\r\n      for (const object of objects) {\r\n        object.writeMdx(stream, this.version);\r\n      }\r\n    }\r\n  }\r\n\r\n  savePivotPointChunk(stream: BinaryStream): void {\r\n    if (this.pivotPoints.length) {\r\n      stream.writeBinary('PIVT');\r\n      stream.writeUint32(this.pivotPoints.length * 12);\r\n\r\n      for (const pivotPoint of this.pivotPoints) {\r\n        stream.writeFloat32Array(pivotPoint);\r\n      }\r\n    }\r\n  }\r\n\r\n  saveBindPoseChunk(stream: BinaryStream): void {\r\n    if (this.bindPose.length) {\r\n      stream.writeBinary('BPOS');\r\n      stream.writeUint32(4 + this.bindPose.length * 48);\r\n      stream.writeUint32(this.bindPose.length);\r\n\r\n      for (const matrix of this.bindPose) {\r\n        stream.writeFloat32Array(matrix);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Load the model from MDL.\r\n   */\r\n  loadMdl(buffer: string): void {\r\n    let token: string;\r\n    const stream = new TokenStream(buffer);\r\n\r\n    while ((token = <string>stream.readToken())) {\r\n      if (token === 'Version') {\r\n        this.loadVersionBlock(stream);\r\n      } else if (token === 'Model') {\r\n        this.loadModelBlock(stream);\r\n      } else if (token === 'Sequences') {\r\n        this.loadNumberedObjectBlock(this.sequences, Sequence, 'Anim', stream);\r\n      } else if (token === 'GlobalSequences') {\r\n        this.loadGlobalSequenceBlock(stream);\r\n      } else if (token === 'Textures') {\r\n        this.loadNumberedObjectBlock(this.textures, Texture, 'Bitmap', stream);\r\n      } else if (token === 'Materials') {\r\n        this.loadNumberedObjectBlock(this.materials, Material, 'Material', stream);\r\n      } else if (token === 'TextureAnims') {\r\n        this.loadNumberedObjectBlock(this.textureAnimations, TextureAnimation, 'TVertexAnim', stream);\r\n      } else if (token === 'Geoset') {\r\n        this.loadObject(this.geosets, Geoset, stream);\r\n      } else if (token === 'GeosetAnim') {\r\n        this.loadObject(this.geosetAnimations, GeosetAnimation, stream);\r\n      } else if (token === 'Bone') {\r\n        this.loadObject(this.bones, Bone, stream);\r\n      } else if (token === 'Light') {\r\n        this.loadObject(this.lights, Light, stream);\r\n      } else if (token === 'Helper') {\r\n        this.loadObject(this.helpers, Helper, stream);\r\n      } else if (token === 'Attachment') {\r\n        this.loadObject(this.attachments, Attachment, stream);\r\n      } else if (token === 'PivotPoints') {\r\n        this.loadPivotPointBlock(stream);\r\n      } else if (token === 'ParticleEmitter') {\r\n        this.loadObject(this.particleEmitters, ParticleEmitter, stream);\r\n      } else if (token === 'ParticleEmitter2') {\r\n        this.loadObject(this.particleEmitters2, ParticleEmitter2, stream);\r\n      } else if (token === 'ParticleEmitterPopcorn') {\r\n        this.loadObject(this.particleEmittersPopcorn, ParticleEmitterPopcorn, stream);\r\n      } else if (token === 'RibbonEmitter') {\r\n        this.loadObject(this.ribbonEmitters, RibbonEmitter, stream);\r\n      } else if (token === 'Camera') {\r\n        this.loadObject(this.cameras, Camera, stream);\r\n      } else if (token === 'EventObject') {\r\n        this.loadObject(this.eventObjects, EventObject, stream);\r\n      } else if (token === 'CollisionShape') {\r\n        this.loadObject(this.collisionShapes, CollisionShape, stream);\r\n      } else if (token === 'FaceFX') {\r\n        this.loadObject(this.faceEffects, FaceEffect, stream);\r\n      } else if (token === 'BindPose') {\r\n        this.loadBindPoseBlock(stream);\r\n      } else {\r\n        throw new Error(`Unsupported block: ${token}`);\r\n      }\r\n    }\r\n  }\r\n\r\n  loadVersionBlock(stream: TokenStream): void {\r\n    for (const token of stream.readBlock()) {\r\n      if (token === 'FormatVersion') {\r\n        this.version = stream.readInt();\r\n      } else {\r\n        throw new Error(`Unknown token in Version: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  loadModelBlock(stream: TokenStream): void {\r\n    this.name = stream.read();\r\n\r\n    for (const token of stream.readBlock()) {\r\n      if (token.startsWith('Num')) {\r\n        // Don't care about the number of things, the arrays will grow as they wish.\r\n        // This includes:\r\n        //      NumGeosets\r\n        //      NumGeosetAnims\r\n        //      NumHelpers\r\n        //      NumLights\r\n        //      NumBones\r\n        //      NumSoundEmitters (deprecated)\r\n        //      NumAttachments\r\n        //      NumParticleEmitters\r\n        //      NumParticleEmitters2\r\n        //      NumParticleEmittersPopcorn (>800)\r\n        //      NumRibbonEmitters\r\n        //      NumEvents\r\n        //      NumFaceFX (>800)\r\n        stream.read();\r\n      } else if (token === 'BlendTime') {\r\n        this.blendTime = stream.readInt();\r\n      } else if (token === 'MinimumExtent') {\r\n        stream.readVector(this.extent.min);\r\n      } else if (token === 'MaximumExtent') {\r\n        stream.readVector(this.extent.max);\r\n      } else if (token === 'BoundsRadius') {\r\n        this.extent.boundsRadius = stream.readFloat();\r\n      } else if (token === 'AnimationFile') {\r\n        this.animationFile = stream.read();\r\n      } else {\r\n        throw new Error(`Unknown token in Model: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  loadNumberedObjectBlock<T extends MdlNumberedObject>(out: T[], constructor: new () => T, name: string, stream: TokenStream): void {\r\n    stream.read(); // Don't care about the number, the array will grow.\r\n\r\n    for (const token of stream.readBlock()) {\r\n      if (token === name) {\r\n        const object = new constructor();\r\n\r\n        object.readMdl(stream);\r\n\r\n        out.push(object);\r\n      } else {\r\n        throw new Error(`Unknown token in ${name}: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  loadGlobalSequenceBlock(stream: TokenStream): void {\r\n    stream.read(); // Don't care about the number, the array will grow.\r\n\r\n    for (const token of stream.readBlock()) {\r\n      if (token === 'Duration') {\r\n        this.globalSequences.push(stream.readInt());\r\n      } else {\r\n        throw new Error(`Unknown token in GlobalSequences: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  loadObject<T extends MdlObject>(out: T[], constructor: new () => T, stream: TokenStream): void {\r\n    const object = new constructor();\r\n\r\n    object.readMdl(stream);\r\n\r\n    out.push(object);\r\n  }\r\n\r\n  loadPivotPointBlock(stream: TokenStream): void {\r\n    const count = stream.readInt();\r\n\r\n    stream.read(); // {\r\n\r\n    for (let i = 0; i < count; i++) {\r\n      this.pivotPoints.push(stream.readVector(new Float32Array(3)));\r\n    }\r\n\r\n    stream.read(); // }\r\n  }\r\n\r\n  loadBindPoseBlock(stream: TokenStream): void {\r\n    for (const token of stream.readBlock()) {\r\n      if (token === 'Matrices') {\r\n        const matrices = stream.readInt();\r\n\r\n        stream.read(); // {\r\n\r\n        for (let i = 0; i < matrices; i++) {\r\n          this.bindPose[i] = stream.readVector(new Float32Array(12));\r\n        }\r\n\r\n        stream.read(); // }\r\n      } else {\r\n        throw new Error(`Unknown token in BindPose: \"${token}\"`);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Save the model as MDL.\r\n   */\r\n  saveMdl(): string {\r\n    const stream = new TokenStream();\r\n\r\n    this.saveVersionBlock(stream);\r\n    this.saveModelBlock(stream);\r\n    this.saveStaticObjectsBlock(stream, 'Sequences', this.sequences);\r\n    this.saveGlobalSequenceBlock(stream);\r\n    this.saveStaticObjectsBlock(stream, 'Textures', this.textures);\r\n    this.saveStaticObjectsBlock(stream, 'Materials', this.materials);\r\n    this.saveStaticObjectsBlock(stream, 'TextureAnims', this.textureAnimations);\r\n    this.saveObjects(stream, this.geosets);\r\n    this.saveObjects(stream, this.geosetAnimations);\r\n    this.saveObjects(stream, this.bones);\r\n    this.saveObjects(stream, this.lights);\r\n    this.saveObjects(stream, this.helpers);\r\n    this.saveObjects(stream, this.attachments);\r\n    this.savePivotPointBlock(stream);\r\n    this.saveObjects(stream, this.particleEmitters);\r\n    this.saveObjects(stream, this.particleEmitters2);\r\n\r\n    if (this.version > 800) {\r\n      this.saveObjects(stream, this.particleEmittersPopcorn);\r\n    }\r\n\r\n    this.saveObjects(stream, this.ribbonEmitters);\r\n    this.saveObjects(stream, this.cameras);\r\n    this.saveObjects(stream, this.eventObjects);\r\n    this.saveObjects(stream, this.collisionShapes);\r\n\r\n    if (this.version > 800) {\r\n      this.saveObjects(stream, this.faceEffects);\r\n      this.saveBindPoseBlock(stream);\r\n    }\r\n\r\n    return stream.buffer;\r\n  }\r\n\r\n  saveVersionBlock(stream: TokenStream): void {\r\n    stream.startBlock('Version');\r\n    stream.writeNumberAttrib('FormatVersion', this.version);\r\n    stream.endBlock();\r\n  }\r\n\r\n  saveModelBlock(stream: TokenStream): void {\r\n    stream.startObjectBlock('Model', this.name);\r\n    stream.writeNumberAttrib('BlendTime', this.blendTime);\r\n\r\n    this.extent.writeMdl(stream);\r\n\r\n    if (this.animationFile.length) {\r\n      stream.writeStringAttrib('AnimationFile', this.animationFile);\r\n    }\r\n\r\n    stream.endBlock();\r\n  }\r\n\r\n  saveStaticObjectsBlock(stream: TokenStream, name: string, objects: (Sequence | Texture | Material | TextureAnimation)[]): void {\r\n    if (objects.length) {\r\n      stream.startBlock(name, objects.length);\r\n\r\n      for (const object of objects) {\r\n        object.writeMdl(stream, this.version);\r\n      }\r\n\r\n      stream.endBlock();\r\n    }\r\n  }\r\n\r\n  saveGlobalSequenceBlock(stream: TokenStream): void {\r\n    if (this.globalSequences.length) {\r\n      stream.startBlock('GlobalSequences', this.globalSequences.length);\r\n\r\n      for (const globalSequence of this.globalSequences) {\r\n        stream.writeNumberAttrib('Duration', globalSequence);\r\n      }\r\n\r\n      stream.endBlock();\r\n    }\r\n  }\r\n\r\n  saveObjects(stream: TokenStream, objects: (Geoset | GeosetAnimation | Bone | Light | Helper | Attachment | ParticleEmitter | ParticleEmitter2 | RibbonEmitter | Camera | EventObject | CollisionShape | FaceEffect)[]): void {\r\n    for (const object of objects) {\r\n      object.writeMdl(stream, this.version);\r\n    }\r\n  }\r\n\r\n  savePivotPointBlock(stream: TokenStream): void {\r\n    if (this.pivotPoints.length) {\r\n      stream.startBlock('PivotPoints', this.pivotPoints.length);\r\n\r\n      for (const pivotPoint of this.pivotPoints) {\r\n        stream.writeVector(pivotPoint);\r\n      }\r\n\r\n      stream.endBlock();\r\n    }\r\n  }\r\n\r\n  saveBindPoseBlock(stream: TokenStream): void {\r\n    if (this.bindPose.length) {\r\n      stream.startBlock('BindPose');\r\n\r\n      stream.startBlock('Matrices', this.bindPose.length);\r\n\r\n      for (const matrix of this.bindPose) {\r\n        stream.writeVector(matrix);\r\n      }\r\n\r\n      stream.endBlock();\r\n\r\n      stream.endBlock();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Calculate the size of the model as MDX.\r\n   */\r\n  getByteLength(): number {\r\n    let size = 396;\r\n\r\n    size += this.getStaticObjectsChunkByteLength(this.sequences, 132);\r\n    size += this.getStaticObjectsChunkByteLength(this.globalSequences, 4);\r\n    size += this.getDynamicObjectsChunkByteLength(this.materials);\r\n    size += this.getStaticObjectsChunkByteLength(this.textures, 268);\r\n    size += this.getDynamicObjectsChunkByteLength(this.textureAnimations);\r\n    size += this.getDynamicObjectsChunkByteLength(this.geosets);\r\n    size += this.getDynamicObjectsChunkByteLength(this.geosetAnimations);\r\n    size += this.getDynamicObjectsChunkByteLength(this.bones);\r\n    size += this.getDynamicObjectsChunkByteLength(this.lights);\r\n    size += this.getDynamicObjectsChunkByteLength(this.helpers);\r\n    size += this.getDynamicObjectsChunkByteLength(this.attachments);\r\n    size += this.getStaticObjectsChunkByteLength(this.pivotPoints, 12);\r\n    size += this.getDynamicObjectsChunkByteLength(this.particleEmitters);\r\n    size += this.getDynamicObjectsChunkByteLength(this.particleEmitters2);\r\n\r\n    if (this.version > 800) {\r\n      size += this.getDynamicObjectsChunkByteLength(this.particleEmittersPopcorn);\r\n    }\r\n\r\n    size += this.getDynamicObjectsChunkByteLength(this.ribbonEmitters);\r\n    size += this.getDynamicObjectsChunkByteLength(this.cameras);\r\n    size += this.getDynamicObjectsChunkByteLength(this.eventObjects);\r\n    size += this.getDynamicObjectsChunkByteLength(this.collisionShapes);\r\n\r\n    if (this.version > 800) {\r\n      size += this.getStaticObjectsChunkByteLength(this.faceEffects, 340);\r\n      size += this.getBindPoseChunkByteLength();\r\n    }\r\n\r\n    size += this.getObjectsByteLength(this.unknownChunks);\r\n\r\n    return size;\r\n  }\r\n\r\n  getObjectsByteLength(objects: (Material | TextureAnimation | Geoset | GeosetAnimation | GenericObject | Camera | UnknownChunk)[]): number {\r\n    let size = 0;\r\n\r\n    for (const object of objects) {\r\n      size += object.getByteLength(this.version);\r\n    }\r\n\r\n    return size;\r\n  }\r\n\r\n  getDynamicObjectsChunkByteLength(objects: (Material | TextureAnimation | Geoset | GeosetAnimation | GenericObject | Camera | UnknownChunk)[]): number {\r\n    if (objects.length) {\r\n      return 8 + this.getObjectsByteLength(objects);\r\n    }\r\n\r\n    return 0;\r\n  }\r\n\r\n  getStaticObjectsChunkByteLength(objects: (Sequence | number | Texture | Float32Array | FaceEffect)[], size: number): number {\r\n    if (objects.length) {\r\n      return 8 + objects.length * size;\r\n    }\r\n\r\n    return 0;\r\n  }\r\n\r\n  getBindPoseChunkByteLength(): number {\r\n    if (this.bindPose.length) {\r\n      return 12 + this.bindPose.length * 48;\r\n    }\r\n\r\n    return 0;\r\n  }\r\n}\r\n","import Model from './model';\r\nimport Sequence from './sequence';\r\nimport Material from './material';\r\nimport Layer from './layer';\r\nimport Texture from './texture';\r\nimport TextureAnimation from './textureanimation';\r\nimport Geoset from './geoset';\r\nimport GeosetAnimation from './geosetanimation';\r\nimport Bone from './bone';\r\nimport Light from './light';\r\nimport Helper from './helper';\r\nimport Attachment from './attachment';\r\nimport ParticleEmitter from './particleemitter';\r\nimport ParticleEmitter2 from './particleemitter2';\r\nimport ParticleEmitterPopcorn from './particleemitterpopcorn';\r\nimport RibbonEmitter from './ribbonemitter';\r\nimport Camera from './camera';\r\nimport EventObject from './eventobject';\r\nimport CollisionShape from './collisionshape';\r\nimport UnknownChunk from './unknownchunk';\r\nimport TokenStream from './tokenstream';\r\nimport { isMdx, isMdl } from './isformat';\r\n\r\nexport default {\r\n  Model,\r\n  Sequence,\r\n  Material,\r\n  Layer,\r\n  Texture,\r\n  TextureAnimation,\r\n  Geoset,\r\n  GeosetAnimation,\r\n  Bone,\r\n  Light,\r\n  Helper,\r\n  Attachment,\r\n  ParticleEmitter,\r\n  ParticleEmitter2,\r\n  ParticleEmitterPopcorn,\r\n  RibbonEmitter,\r\n  Camera,\r\n  EventObject,\r\n  CollisionShape,\r\n  UnknownChunk,\r\n  TokenStream,\r\n  isMdx,\r\n  isMdl,\r\n};\r\n","/**\r\n * A block.\r\n */\r\nexport default class Block {\r\n  offset = 0;\r\n  compressedSize = 0;\r\n  normalSize = 0;\r\n  flags = 0;\r\n\r\n  load(bytes: Uint32Array): void {\r\n    this.offset = bytes[0];\r\n    this.compressedSize = bytes[1];\r\n    this.normalSize = bytes[2];\r\n    this.flags = bytes[3];\r\n  }\r\n\r\n  save(bytes: Uint32Array): void {\r\n    bytes[0] = this.offset;\r\n    bytes[1] = this.compressedSize;\r\n    bytes[2] = this.normalSize;\r\n    bytes[3] = this.flags;\r\n  }\r\n}\r\n","export const MAGIC = 0x1A51504D; // MPQ\\x1A reversed\r\nexport const HASH_TABLE_KEY = 0xC3AF3770; // Hash of (hashtable)\r\nexport const HASH_TABLE_INDEX = 0;\r\nexport const HASH_NAME_A = 1;\r\nexport const HASH_NAME_B = 2;\r\nexport const HASH_FILE_KEY = 3;\r\nexport const HASH_ENTRY_DELETED = 0xFFFFFFFE;\r\nexport const HASH_ENTRY_EMPTY = 0xFFFFFFFF;\r\nexport const BLOCK_TABLE_KEY = 0xEC83B3A3; // Hash of (blocktable)\r\nexport const FILE_IMPLODE = 0x00000100;\r\nexport const FILE_COMPRESSED = 0x00000200;\r\nexport const FILE_ENCRYPTED = 0x00010000;\r\nexport const FILE_OFFSET_ADJUSTED_KEY = 0x00020000;\r\nexport const FILE_PATCH_FILE = 0x00100000;\r\nexport const FILE_SINGLE_UNIT = 0x01000000;\r\nexport const FILE_DELETE_MARKER = 0x02000000;\r\nexport const FILE_SECTOR_CRC = 0x04000000;\r\nexport const FILE_EXISTS = 0x80000000;\r\nexport const COMPRESSION_HUFFMAN = 0x01;\r\nexport const COMPRESSION_DEFLATE = 0x02;\r\nexport const COMPRESSION_IMPLODE = 0x08;\r\nexport const COMPRESSION_BZIP2 = 0x10;\r\nexport const COMPRESSION_ADPCM_MONO = 0x40;\r\nexport const COMPRESSION_ADPCM_STEREO = 0x80;\r\n","import MpqCrypto from './crypto';\r\nimport MpqBlock from './block';\r\nimport { BLOCK_TABLE_KEY } from './constants';\r\n\r\n/**\r\n * A block table.\r\n */\r\nexport default class BlockTable {\r\n  c: MpqCrypto;\r\n  entries: MpqBlock[];\r\n\r\n  constructor(c: MpqCrypto) {\r\n    this.c = c;\r\n    this.entries = [];\r\n  }\r\n\r\n  add(buffer: ArrayBuffer): MpqBlock {\r\n    const block = new MpqBlock();\r\n\r\n    block.normalSize = buffer.byteLength;\r\n\r\n    this.entries.push(block);\r\n\r\n    return block;\r\n  }\r\n\r\n  clear(): void {\r\n    this.entries.length = 0;\r\n  }\r\n\r\n  addEmpties(howMany: number): void {\r\n    for (let i = 0; i < howMany; i++) {\r\n      this.entries.push(new MpqBlock());\r\n    }\r\n  }\r\n\r\n  load(bytes: Uint8Array): void {\r\n    const entriesCount = bytes.byteLength / 16;\r\n    const uint32array = new Uint32Array(this.c.decryptBlock(bytes, BLOCK_TABLE_KEY).buffer);\r\n    let offset = 0;\r\n\r\n    // Clear the table and add the needed empties.\r\n    this.clear();\r\n    this.addEmpties(entriesCount);\r\n\r\n    for (const block of this.entries) {\r\n      block.load(uint32array.subarray(offset, offset + 4));\r\n\r\n      offset += 4;\r\n    }\r\n  }\r\n\r\n  save(bytes: Uint8Array): void {\r\n    const uint32array = new Uint32Array(this.entries.length * 4);\r\n    let offset = 0;\r\n\r\n    for (const block of this.entries) {\r\n      block.save(uint32array.subarray(offset, offset + 4));\r\n\r\n      offset += 4;\r\n    }\r\n\r\n    const uint8array = new Uint8Array(uint32array.buffer);\r\n\r\n    this.c.encryptBlock(uint8array, BLOCK_TABLE_KEY);\r\n\r\n    bytes.set(uint8array);\r\n  }\r\n}\r\n","import MpqBlock from './block';\r\nimport { HASH_FILE_KEY, FILE_OFFSET_ADJUSTED_KEY } from './constants';\r\n\r\n// Global variables for this module.\r\nconst bytesHeap = new Uint8Array(4);\r\nconst longHeap = new Uint32Array(bytesHeap.buffer);\r\n\r\n/**\r\n * MPQ crypto.\r\n */\r\nexport default class MpqCrypto {\r\n  cryptTable = new Uint32Array(0x500);\r\n\r\n  constructor() {\r\n    let seed = 0x00100001;\r\n    let temp1 = 0;\r\n    let temp2 = 0;\r\n\r\n    for (let index1 = 0; index1 < 0x100; index1++) {\r\n      for (let index2 = index1, i = 0; i < 5; i += 1, index2 += 0x100) {\r\n        seed = (seed * 125 + 3) % 0x2AAAAB;\r\n        temp1 = (seed & 0xFFFF) << 0x10;\r\n\r\n        seed = (seed * 125 + 3) % 0x2AAAAB;\r\n        temp2 = (seed & 0xFFFF);\r\n\r\n        this.cryptTable[index2] = temp1 | temp2;\r\n      }\r\n    }\r\n  }\r\n\r\n  hash(name: string, key: number): number {\r\n    const cryptTable = this.cryptTable;\r\n    let seed1 = 0x7FED7FED;\r\n    let seed2 = 0xEEEEEEEE;\r\n\r\n    name = name.toUpperCase();\r\n\r\n    for (let i = 0; i < name.length; i++) {\r\n      const ch = name.charCodeAt(i);\r\n\r\n      seed1 = cryptTable[(key << 8) + ch] ^ (seed1 + seed2);\r\n      seed2 = ch + seed1 + seed2 + (seed2 << 5) + 3;\r\n    }\r\n\r\n    // Convert the seed to an unsigned integer\r\n    return seed1 >>> 0;\r\n  }\r\n\r\n  decryptBlock<T extends Uint8Array | Uint32Array>(data: T, key: number): T {\r\n    const cryptTable = this.cryptTable;\r\n    let seed = 0xEEEEEEEE;\r\n    const bytes = new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\r\n\r\n    for (let i = 0, l = data.byteLength >>> 2; i < l; i++) {\r\n      // Update the seed.\r\n      seed += cryptTable[0x400 + (key & 0xFF)];\r\n\r\n      // Get 4 encrypted bytes.\r\n      bytesHeap[0] = bytes[i * 4];\r\n      bytesHeap[1] = bytes[i * 4 + 1];\r\n      bytesHeap[2] = bytes[i * 4 + 2];\r\n      bytesHeap[3] = bytes[i * 4 + 3];\r\n\r\n      // Decrypted 32bit integer.\r\n      longHeap[0] ^= (key + seed);\r\n\r\n      // Update the seed.\r\n      key = ((~key << 0x15) + 0x11111111) | (key >>> 0x0B);\r\n      seed = longHeap[0] + seed + (seed << 5) + 3;\r\n\r\n      // Set 4 decryped bytes.\r\n      bytes[i * 4] = bytesHeap[0];\r\n      bytes[i * 4 + 1] = bytesHeap[1];\r\n      bytes[i * 4 + 2] = bytesHeap[2];\r\n      bytes[i * 4 + 3] = bytesHeap[3];\r\n    }\r\n\r\n    return data;\r\n  }\r\n\r\n  encryptBlock<T extends Uint8Array | Uint32Array>(data: T, key: number): T {\r\n    const cryptTable = this.cryptTable;\r\n    let seed = 0xEEEEEEEE;\r\n    const bytes = new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\r\n\r\n    for (let i = 0, l = data.byteLength >>> 2; i < l; i++) {\r\n      // Update the seed.\r\n      seed += cryptTable[0x400 + (key & 0xFF)];\r\n\r\n      // Get 4 decrypted bytes.\r\n      bytesHeap[0] = bytes[i * 4];\r\n      bytesHeap[1] = bytes[i * 4 + 1];\r\n      bytesHeap[2] = bytes[i * 4 + 2];\r\n      bytesHeap[3] = bytes[i * 4 + 3];\r\n\r\n      // Decrypted 32bit integer.\r\n      const decrypted = longHeap[0];\r\n\r\n      // Encrypted 32bit integer.\r\n      longHeap[0] ^= (key + seed);\r\n\r\n      // Update the seed.\r\n      key = ((~key << 0x15) + 0x11111111) | (key >>> 0x0B);\r\n      seed = decrypted + seed + (seed << 5) + 3;\r\n\r\n      // Set 4 encrypted bytes.\r\n      bytes[i * 4] = bytesHeap[0];\r\n      bytes[i * 4 + 1] = bytesHeap[1];\r\n      bytes[i * 4 + 2] = bytesHeap[2];\r\n      bytes[i * 4 + 3] = bytesHeap[3];\r\n    }\r\n\r\n    return data;\r\n  }\r\n\r\n  computeFileKey(name: string, block: MpqBlock): number {\r\n    const sepIndex = name.lastIndexOf('\\\\');\r\n    const pathlessName = name.substring(sepIndex + 1);\r\n    let encryptionKey = this.hash(pathlessName, HASH_FILE_KEY);\r\n\r\n    if (block.flags & FILE_OFFSET_ADJUSTED_KEY) {\r\n      encryptionKey = (encryptionKey + block.offset) ^ block.normalSize;\r\n    }\r\n\r\n    return encryptionKey;\r\n  }\r\n}\r\n","\n/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n/* eslint-disable space-unary-ops */\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n//const Z_FILTERED          = 1;\n//const Z_HUFFMAN_ONLY      = 2;\n//const Z_RLE               = 3;\nconst Z_FIXED$1               = 4;\n//const Z_DEFAULT_STRATEGY  = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\nconst Z_BINARY              = 0;\nconst Z_TEXT                = 1;\n//const Z_ASCII             = 1; // = Z_TEXT\nconst Z_UNKNOWN$1             = 2;\n\n/*============================================================================*/\n\n\nfunction zero$1(buf) { let len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n// From zutil.h\n\nconst STORED_BLOCK = 0;\nconst STATIC_TREES = 1;\nconst DYN_TREES    = 2;\n/* The three kinds of block type */\n\nconst MIN_MATCH$1    = 3;\nconst MAX_MATCH$1    = 258;\n/* The minimum and maximum match lengths */\n\n// From deflate.h\n/* ===========================================================================\n * Internal compression state.\n */\n\nconst LENGTH_CODES$1  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\n\nconst LITERALS$1      = 256;\n/* number of literal bytes 0..255 */\n\nconst L_CODES$1       = LITERALS$1 + 1 + LENGTH_CODES$1;\n/* number of Literal or Length codes, including the END_BLOCK code */\n\nconst D_CODES$1       = 30;\n/* number of distance codes */\n\nconst BL_CODES$1      = 19;\n/* number of codes used to transfer the bit lengths */\n\nconst HEAP_SIZE$1     = 2 * L_CODES$1 + 1;\n/* maximum heap size */\n\nconst MAX_BITS$1      = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nconst Buf_size      = 16;\n/* size of bit buffer in bi_buf */\n\n\n/* ===========================================================================\n * Constants\n */\n\nconst MAX_BL_BITS = 7;\n/* Bit length codes must not exceed MAX_BL_BITS bits */\n\nconst END_BLOCK   = 256;\n/* end of block literal code */\n\nconst REP_3_6     = 16;\n/* repeat previous bit length 3-6 times (2 bits of repeat count) */\n\nconst REPZ_3_10   = 17;\n/* repeat a zero length 3-10 times  (3 bits of repeat count) */\n\nconst REPZ_11_138 = 18;\n/* repeat a zero length 11-138 times  (7 bits of repeat count) */\n\n/* eslint-disable comma-spacing,array-bracket-spacing */\nconst extra_lbits =   /* extra bits for each length code */\n  new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]);\n\nconst extra_dbits =   /* extra bits for each distance code */\n  new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);\n\nconst extra_blbits =  /* extra bits for each bit length code */\n  new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]);\n\nconst bl_order =\n  new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);\n/* eslint-enable comma-spacing,array-bracket-spacing */\n\n/* The lengths of the bit length codes are sent in order of decreasing\n * probability, to avoid transmitting the lengths for unused bit length codes.\n */\n\n/* ===========================================================================\n * Local data. These are initialized only once.\n */\n\n// We pre-fill arrays with 0 to avoid uninitialized gaps\n\nconst DIST_CODE_LEN = 512; /* see definition of array dist_code below */\n\n// !!!! Use flat array instead of structure, Freq = i*2, Len = i*2+1\nconst static_ltree  = new Array((L_CODES$1 + 2) * 2);\nzero$1(static_ltree);\n/* The static literal tree. Since the bit lengths are imposed, there is no\n * need for the L_CODES extra codes used during heap construction. However\n * The codes 286 and 287 are needed to build a canonical tree (see _tr_init\n * below).\n */\n\nconst static_dtree  = new Array(D_CODES$1 * 2);\nzero$1(static_dtree);\n/* The static distance tree. (Actually a trivial tree since all codes use\n * 5 bits.)\n */\n\nconst _dist_code    = new Array(DIST_CODE_LEN);\nzero$1(_dist_code);\n/* Distance codes. The first 256 values correspond to the distances\n * 3 .. 258, the last 256 values correspond to the top 8 bits of\n * the 15 bit distances.\n */\n\nconst _length_code  = new Array(MAX_MATCH$1 - MIN_MATCH$1 + 1);\nzero$1(_length_code);\n/* length code for each normalized match length (0 == MIN_MATCH) */\n\nconst base_length   = new Array(LENGTH_CODES$1);\nzero$1(base_length);\n/* First normalized length for each code (0 = MIN_MATCH) */\n\nconst base_dist     = new Array(D_CODES$1);\nzero$1(base_dist);\n/* First normalized distance for each code (0 = distance of 1) */\n\n\nfunction StaticTreeDesc(static_tree, extra_bits, extra_base, elems, max_length) {\n\n  this.static_tree  = static_tree;  /* static tree or NULL */\n  this.extra_bits   = extra_bits;   /* extra bits for each code or NULL */\n  this.extra_base   = extra_base;   /* base index for extra_bits */\n  this.elems        = elems;        /* max number of elements in the tree */\n  this.max_length   = max_length;   /* max bit length for the codes */\n\n  // show if `static_tree` has data or dummy - needed for monomorphic objects\n  this.has_stree    = static_tree && static_tree.length;\n}\n\n\nlet static_l_desc;\nlet static_d_desc;\nlet static_bl_desc;\n\n\nfunction TreeDesc(dyn_tree, stat_desc) {\n  this.dyn_tree = dyn_tree;     /* the dynamic tree */\n  this.max_code = 0;            /* largest code with non zero frequency */\n  this.stat_desc = stat_desc;   /* the corresponding static tree */\n}\n\n\n\nconst d_code = (dist) => {\n\n  return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];\n};\n\n\n/* ===========================================================================\n * Output a short LSB first on the stream.\n * IN assertion: there is enough room in pendingBuf.\n */\nconst put_short = (s, w) => {\n//    put_byte(s, (uch)((w) & 0xff));\n//    put_byte(s, (uch)((ush)(w) >> 8));\n  s.pending_buf[s.pending++] = (w) & 0xff;\n  s.pending_buf[s.pending++] = (w >>> 8) & 0xff;\n};\n\n\n/* ===========================================================================\n * Send a value on a given number of bits.\n * IN assertion: length <= 16 and value fits in length bits.\n */\nconst send_bits = (s, value, length) => {\n\n  if (s.bi_valid > (Buf_size - length)) {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    put_short(s, s.bi_buf);\n    s.bi_buf = value >> (Buf_size - s.bi_valid);\n    s.bi_valid += length - Buf_size;\n  } else {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    s.bi_valid += length;\n  }\n};\n\n\nconst send_code = (s, c, tree) => {\n\n  send_bits(s, tree[c * 2]/*.Code*/, tree[c * 2 + 1]/*.Len*/);\n};\n\n\n/* ===========================================================================\n * Reverse the first len bits of a code, using straightforward code (a faster\n * method would use a table)\n * IN assertion: 1 <= len <= 15\n */\nconst bi_reverse = (code, len) => {\n\n  let res = 0;\n  do {\n    res |= code & 1;\n    code >>>= 1;\n    res <<= 1;\n  } while (--len > 0);\n  return res >>> 1;\n};\n\n\n/* ===========================================================================\n * Flush the bit buffer, keeping at most 7 bits in it.\n */\nconst bi_flush = (s) => {\n\n  if (s.bi_valid === 16) {\n    put_short(s, s.bi_buf);\n    s.bi_buf = 0;\n    s.bi_valid = 0;\n\n  } else if (s.bi_valid >= 8) {\n    s.pending_buf[s.pending++] = s.bi_buf & 0xff;\n    s.bi_buf >>= 8;\n    s.bi_valid -= 8;\n  }\n};\n\n\n/* ===========================================================================\n * Compute the optimal bit lengths for a tree and update the total bit length\n * for the current block.\n * IN assertion: the fields freq and dad are set, heap[heap_max] and\n *    above are the tree nodes sorted by increasing frequency.\n * OUT assertions: the field len is set to the optimal bit length, the\n *     array bl_count contains the frequencies for each bit length.\n *     The length opt_len is updated; static_len is also updated if stree is\n *     not null.\n */\nconst gen_bitlen = (s, desc) => {\n//    deflate_state *s;\n//    tree_desc *desc;    /* the tree descriptor */\n\n  const tree            = desc.dyn_tree;\n  const max_code        = desc.max_code;\n  const stree           = desc.stat_desc.static_tree;\n  const has_stree       = desc.stat_desc.has_stree;\n  const extra           = desc.stat_desc.extra_bits;\n  const base            = desc.stat_desc.extra_base;\n  const max_length      = desc.stat_desc.max_length;\n  let h;              /* heap index */\n  let n, m;           /* iterate over the tree elements */\n  let bits;           /* bit length */\n  let xbits;          /* extra bits */\n  let f;              /* frequency */\n  let overflow = 0;   /* number of elements with bit length too large */\n\n  for (bits = 0; bits <= MAX_BITS$1; bits++) {\n    s.bl_count[bits] = 0;\n  }\n\n  /* In a first pass, compute the optimal bit lengths (which may\n   * overflow in the case of the bit length tree).\n   */\n  tree[s.heap[s.heap_max] * 2 + 1]/*.Len*/ = 0; /* root of the heap */\n\n  for (h = s.heap_max + 1; h < HEAP_SIZE$1; h++) {\n    n = s.heap[h];\n    bits = tree[tree[n * 2 + 1]/*.Dad*/ * 2 + 1]/*.Len*/ + 1;\n    if (bits > max_length) {\n      bits = max_length;\n      overflow++;\n    }\n    tree[n * 2 + 1]/*.Len*/ = bits;\n    /* We overwrite tree[n].Dad which is no longer needed */\n\n    if (n > max_code) { continue; } /* not a leaf node */\n\n    s.bl_count[bits]++;\n    xbits = 0;\n    if (n >= base) {\n      xbits = extra[n - base];\n    }\n    f = tree[n * 2]/*.Freq*/;\n    s.opt_len += f * (bits + xbits);\n    if (has_stree) {\n      s.static_len += f * (stree[n * 2 + 1]/*.Len*/ + xbits);\n    }\n  }\n  if (overflow === 0) { return; }\n\n  // Tracev((stderr,\"\\nbit length overflow\\n\"));\n  /* This happens for example on obj2 and pic of the Calgary corpus */\n\n  /* Find the first bit length which could increase: */\n  do {\n    bits = max_length - 1;\n    while (s.bl_count[bits] === 0) { bits--; }\n    s.bl_count[bits]--;      /* move one leaf down the tree */\n    s.bl_count[bits + 1] += 2; /* move one overflow item as its brother */\n    s.bl_count[max_length]--;\n    /* The brother of the overflow item also moves one step up,\n     * but this does not affect bl_count[max_length]\n     */\n    overflow -= 2;\n  } while (overflow > 0);\n\n  /* Now recompute all bit lengths, scanning in increasing frequency.\n   * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n   * lengths instead of fixing only the wrong ones. This idea is taken\n   * from 'ar' written by Haruhiko Okumura.)\n   */\n  for (bits = max_length; bits !== 0; bits--) {\n    n = s.bl_count[bits];\n    while (n !== 0) {\n      m = s.heap[--h];\n      if (m > max_code) { continue; }\n      if (tree[m * 2 + 1]/*.Len*/ !== bits) {\n        // Tracev((stderr,\"code %d bits %d->%d\\n\", m, tree[m].Len, bits));\n        s.opt_len += (bits - tree[m * 2 + 1]/*.Len*/) * tree[m * 2]/*.Freq*/;\n        tree[m * 2 + 1]/*.Len*/ = bits;\n      }\n      n--;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Generate the codes for a given tree and bit counts (which need not be\n * optimal).\n * IN assertion: the array bl_count contains the bit length statistics for\n * the given tree and the field len is set for all tree elements.\n * OUT assertion: the field code is set for all tree elements of non\n *     zero code length.\n */\nconst gen_codes = (tree, max_code, bl_count) => {\n//    ct_data *tree;             /* the tree to decorate */\n//    int max_code;              /* largest code with non zero frequency */\n//    ushf *bl_count;            /* number of codes at each bit length */\n\n  const next_code = new Array(MAX_BITS$1 + 1); /* next code value for each bit length */\n  let code = 0;              /* running code value */\n  let bits;                  /* bit index */\n  let n;                     /* code index */\n\n  /* The distribution counts are first used to generate the code values\n   * without bit reversal.\n   */\n  for (bits = 1; bits <= MAX_BITS$1; bits++) {\n    code = (code + bl_count[bits - 1]) << 1;\n    next_code[bits] = code;\n  }\n  /* Check that the bit counts in bl_count are consistent. The last code\n   * must be all ones.\n   */\n  //Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n  //        \"inconsistent bit counts\");\n  //Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n\n  for (n = 0;  n <= max_code; n++) {\n    let len = tree[n * 2 + 1]/*.Len*/;\n    if (len === 0) { continue; }\n    /* Now reverse the bits */\n    tree[n * 2]/*.Code*/ = bi_reverse(next_code[len]++, len);\n\n    //Tracecv(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n    //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));\n  }\n};\n\n\n/* ===========================================================================\n * Initialize the various 'constant' tables.\n */\nconst tr_static_init = () => {\n\n  let n;        /* iterates over tree elements */\n  let bits;     /* bit counter */\n  let length;   /* length value */\n  let code;     /* code value */\n  let dist;     /* distance index */\n  const bl_count = new Array(MAX_BITS$1 + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  // do check in _tr_init()\n  //if (static_init_done) return;\n\n  /* For some embedded targets, global variables are not initialized: */\n/*#ifdef NO_INIT_GLOBAL_POINTERS\n  static_l_desc.static_tree = static_ltree;\n  static_l_desc.extra_bits = extra_lbits;\n  static_d_desc.static_tree = static_dtree;\n  static_d_desc.extra_bits = extra_dbits;\n  static_bl_desc.extra_bits = extra_blbits;\n#endif*/\n\n  /* Initialize the mapping length (0..255) -> length code (0..28) */\n  length = 0;\n  for (code = 0; code < LENGTH_CODES$1 - 1; code++) {\n    base_length[code] = length;\n    for (n = 0; n < (1 << extra_lbits[code]); n++) {\n      _length_code[length++] = code;\n    }\n  }\n  //Assert (length == 256, \"tr_static_init: length != 256\");\n  /* Note that the length 255 (match length 258) can be represented\n   * in two different ways: code 284 + 5 bits or code 285, so we\n   * overwrite length_code[255] to use the best encoding:\n   */\n  _length_code[length - 1] = code;\n\n  /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n  dist = 0;\n  for (code = 0; code < 16; code++) {\n    base_dist[code] = dist;\n    for (n = 0; n < (1 << extra_dbits[code]); n++) {\n      _dist_code[dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: dist != 256\");\n  dist >>= 7; /* from now on, all distances are divided by 128 */\n  for (; code < D_CODES$1; code++) {\n    base_dist[code] = dist << 7;\n    for (n = 0; n < (1 << (extra_dbits[code] - 7)); n++) {\n      _dist_code[256 + dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: 256+dist != 512\");\n\n  /* Construct the codes of the static literal tree */\n  for (bits = 0; bits <= MAX_BITS$1; bits++) {\n    bl_count[bits] = 0;\n  }\n\n  n = 0;\n  while (n <= 143) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  while (n <= 255) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 9;\n    n++;\n    bl_count[9]++;\n  }\n  while (n <= 279) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 7;\n    n++;\n    bl_count[7]++;\n  }\n  while (n <= 287) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  /* Codes 286 and 287 do not exist, but we must include them in the\n   * tree construction to get a canonical Huffman tree (longest code\n   * all ones)\n   */\n  gen_codes(static_ltree, L_CODES$1 + 1, bl_count);\n\n  /* The static distance tree is trivial: */\n  for (n = 0; n < D_CODES$1; n++) {\n    static_dtree[n * 2 + 1]/*.Len*/ = 5;\n    static_dtree[n * 2]/*.Code*/ = bi_reverse(n, 5);\n  }\n\n  // Now data ready and we can init static trees\n  static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS$1 + 1, L_CODES$1, MAX_BITS$1);\n  static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0,          D_CODES$1, MAX_BITS$1);\n  static_bl_desc = new StaticTreeDesc(new Array(0), extra_blbits, 0,         BL_CODES$1, MAX_BL_BITS);\n\n  //static_init_done = true;\n};\n\n\n/* ===========================================================================\n * Initialize a new block.\n */\nconst init_block = (s) => {\n\n  let n; /* iterates over tree elements */\n\n  /* Initialize the trees. */\n  for (n = 0; n < L_CODES$1;  n++) { s.dyn_ltree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < D_CODES$1;  n++) { s.dyn_dtree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < BL_CODES$1; n++) { s.bl_tree[n * 2]/*.Freq*/ = 0; }\n\n  s.dyn_ltree[END_BLOCK * 2]/*.Freq*/ = 1;\n  s.opt_len = s.static_len = 0;\n  s.sym_next = s.matches = 0;\n};\n\n\n/* ===========================================================================\n * Flush the bit buffer and align the output on a byte boundary\n */\nconst bi_windup = (s) =>\n{\n  if (s.bi_valid > 8) {\n    put_short(s, s.bi_buf);\n  } else if (s.bi_valid > 0) {\n    //put_byte(s, (Byte)s->bi_buf);\n    s.pending_buf[s.pending++] = s.bi_buf;\n  }\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n};\n\n/* ===========================================================================\n * Compares to subtrees, using the tree depth as tie breaker when\n * the subtrees have equal frequency. This minimizes the worst case length.\n */\nconst smaller = (tree, n, m, depth) => {\n\n  const _n2 = n * 2;\n  const _m2 = m * 2;\n  return (tree[_n2]/*.Freq*/ < tree[_m2]/*.Freq*/ ||\n         (tree[_n2]/*.Freq*/ === tree[_m2]/*.Freq*/ && depth[n] <= depth[m]));\n};\n\n/* ===========================================================================\n * Restore the heap property by moving down the tree starting at node k,\n * exchanging a node with the smallest of its two sons if necessary, stopping\n * when the heap property is re-established (each father smaller than its\n * two sons).\n */\nconst pqdownheap = (s, tree, k) => {\n//    deflate_state *s;\n//    ct_data *tree;  /* the tree to restore */\n//    int k;               /* node to move down */\n\n  const v = s.heap[k];\n  let j = k << 1;  /* left son of k */\n  while (j <= s.heap_len) {\n    /* Set j to the smallest of the two sons: */\n    if (j < s.heap_len &&\n      smaller(tree, s.heap[j + 1], s.heap[j], s.depth)) {\n      j++;\n    }\n    /* Exit if v is smaller than both sons */\n    if (smaller(tree, v, s.heap[j], s.depth)) { break; }\n\n    /* Exchange v with the smallest son */\n    s.heap[k] = s.heap[j];\n    k = j;\n\n    /* And continue down the tree, setting j to the left son of k */\n    j <<= 1;\n  }\n  s.heap[k] = v;\n};\n\n\n// inlined manually\n// const SMALLEST = 1;\n\n/* ===========================================================================\n * Send the block data compressed using the given Huffman trees\n */\nconst compress_block = (s, ltree, dtree) => {\n//    deflate_state *s;\n//    const ct_data *ltree; /* literal tree */\n//    const ct_data *dtree; /* distance tree */\n\n  let dist;           /* distance of matched string */\n  let lc;             /* match length or unmatched char (if dist == 0) */\n  let sx = 0;         /* running index in sym_buf */\n  let code;           /* the code to send */\n  let extra;          /* number of extra bits to send */\n\n  if (s.sym_next !== 0) {\n    do {\n      dist = s.pending_buf[s.sym_buf + sx++] & 0xff;\n      dist += (s.pending_buf[s.sym_buf + sx++] & 0xff) << 8;\n      lc = s.pending_buf[s.sym_buf + sx++];\n      if (dist === 0) {\n        send_code(s, lc, ltree); /* send a literal byte */\n        //Tracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n      } else {\n        /* Here, lc is the match length - MIN_MATCH */\n        code = _length_code[lc];\n        send_code(s, code + LITERALS$1 + 1, ltree); /* send the length code */\n        extra = extra_lbits[code];\n        if (extra !== 0) {\n          lc -= base_length[code];\n          send_bits(s, lc, extra);       /* send the extra length bits */\n        }\n        dist--; /* dist is now the match distance - 1 */\n        code = d_code(dist);\n        //Assert (code < D_CODES, \"bad d_code\");\n\n        send_code(s, code, dtree);       /* send the distance code */\n        extra = extra_dbits[code];\n        if (extra !== 0) {\n          dist -= base_dist[code];\n          send_bits(s, dist, extra);   /* send the extra distance bits */\n        }\n      } /* literal or match pair ? */\n\n      /* Check that the overlay between pending_buf and sym_buf is ok: */\n      //Assert(s->pending < s->lit_bufsize + sx, \"pendingBuf overflow\");\n\n    } while (sx < s.sym_next);\n  }\n\n  send_code(s, END_BLOCK, ltree);\n};\n\n\n/* ===========================================================================\n * Construct one Huffman tree and assigns the code bit strings and lengths.\n * Update the total bit length for the current block.\n * IN assertion: the field freq is set for all tree elements.\n * OUT assertions: the fields len and code are set to the optimal bit length\n *     and corresponding code. The length opt_len is updated; static_len is\n *     also updated if stree is not null. The field max_code is set.\n */\nconst build_tree = (s, desc) => {\n//    deflate_state *s;\n//    tree_desc *desc; /* the tree descriptor */\n\n  const tree     = desc.dyn_tree;\n  const stree    = desc.stat_desc.static_tree;\n  const has_stree = desc.stat_desc.has_stree;\n  const elems    = desc.stat_desc.elems;\n  let n, m;          /* iterate over heap elements */\n  let max_code = -1; /* largest code with non zero frequency */\n  let node;          /* new node being created */\n\n  /* Construct the initial heap, with least frequent element in\n   * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n   * heap[0] is not used.\n   */\n  s.heap_len = 0;\n  s.heap_max = HEAP_SIZE$1;\n\n  for (n = 0; n < elems; n++) {\n    if (tree[n * 2]/*.Freq*/ !== 0) {\n      s.heap[++s.heap_len] = max_code = n;\n      s.depth[n] = 0;\n\n    } else {\n      tree[n * 2 + 1]/*.Len*/ = 0;\n    }\n  }\n\n  /* The pkzip format requires that at least one distance code exists,\n   * and that at least one bit should be sent even if there is only one\n   * possible code. So to avoid special checks later on we force at least\n   * two codes of non zero frequency.\n   */\n  while (s.heap_len < 2) {\n    node = s.heap[++s.heap_len] = (max_code < 2 ? ++max_code : 0);\n    tree[node * 2]/*.Freq*/ = 1;\n    s.depth[node] = 0;\n    s.opt_len--;\n\n    if (has_stree) {\n      s.static_len -= stree[node * 2 + 1]/*.Len*/;\n    }\n    /* node is 0 or 1 so it does not have extra bits */\n  }\n  desc.max_code = max_code;\n\n  /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n   * establish sub-heaps of increasing lengths:\n   */\n  for (n = (s.heap_len >> 1/*int /2*/); n >= 1; n--) { pqdownheap(s, tree, n); }\n\n  /* Construct the Huffman tree by repeatedly combining the least two\n   * frequent nodes.\n   */\n  node = elems;              /* next internal node of the tree */\n  do {\n    //pqremove(s, tree, n);  /* n = node of least frequency */\n    /*** pqremove ***/\n    n = s.heap[1/*SMALLEST*/];\n    s.heap[1/*SMALLEST*/] = s.heap[s.heap_len--];\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n    /***/\n\n    m = s.heap[1/*SMALLEST*/]; /* m = node of next least frequency */\n\n    s.heap[--s.heap_max] = n; /* keep the nodes sorted by frequency */\n    s.heap[--s.heap_max] = m;\n\n    /* Create a new node father of n and m */\n    tree[node * 2]/*.Freq*/ = tree[n * 2]/*.Freq*/ + tree[m * 2]/*.Freq*/;\n    s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;\n    tree[n * 2 + 1]/*.Dad*/ = tree[m * 2 + 1]/*.Dad*/ = node;\n\n    /* and insert the new node in the heap */\n    s.heap[1/*SMALLEST*/] = node++;\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n\n  } while (s.heap_len >= 2);\n\n  s.heap[--s.heap_max] = s.heap[1/*SMALLEST*/];\n\n  /* At this point, the fields freq and dad are set. We can now\n   * generate the bit lengths.\n   */\n  gen_bitlen(s, desc);\n\n  /* The field len is now set, we can generate the bit codes */\n  gen_codes(tree, max_code, s.bl_count);\n};\n\n\n/* ===========================================================================\n * Scan a literal or distance tree to determine the frequencies of the codes\n * in the bit length tree.\n */\nconst scan_tree = (s, tree, max_code) => {\n//    deflate_state *s;\n//    ct_data *tree;   /* the tree to be scanned */\n//    int max_code;    /* and its largest code of non zero frequency */\n\n  let n;                     /* iterates over all tree elements */\n  let prevlen = -1;          /* last emitted length */\n  let curlen;                /* length of current code */\n\n  let nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  let count = 0;             /* repeat count of the current code */\n  let max_count = 7;         /* max repeat count */\n  let min_count = 4;         /* min repeat count */\n\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n  tree[(max_code + 1) * 2 + 1]/*.Len*/ = 0xffff; /* guard */\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      s.bl_tree[curlen * 2]/*.Freq*/ += count;\n\n    } else if (curlen !== 0) {\n\n      if (curlen !== prevlen) { s.bl_tree[curlen * 2]/*.Freq*/++; }\n      s.bl_tree[REP_3_6 * 2]/*.Freq*/++;\n\n    } else if (count <= 10) {\n      s.bl_tree[REPZ_3_10 * 2]/*.Freq*/++;\n\n    } else {\n      s.bl_tree[REPZ_11_138 * 2]/*.Freq*/++;\n    }\n\n    count = 0;\n    prevlen = curlen;\n\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Send a literal or distance tree in compressed form, using the codes in\n * bl_tree.\n */\nconst send_tree = (s, tree, max_code) => {\n//    deflate_state *s;\n//    ct_data *tree; /* the tree to be scanned */\n//    int max_code;       /* and its largest code of non zero frequency */\n\n  let n;                     /* iterates over all tree elements */\n  let prevlen = -1;          /* last emitted length */\n  let curlen;                /* length of current code */\n\n  let nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  let count = 0;             /* repeat count of the current code */\n  let max_count = 7;         /* max repeat count */\n  let min_count = 4;         /* min repeat count */\n\n  /* tree[max_code+1].Len = -1; */  /* guard already set */\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      do { send_code(s, curlen, s.bl_tree); } while (--count !== 0);\n\n    } else if (curlen !== 0) {\n      if (curlen !== prevlen) {\n        send_code(s, curlen, s.bl_tree);\n        count--;\n      }\n      //Assert(count >= 3 && count <= 6, \" 3_6?\");\n      send_code(s, REP_3_6, s.bl_tree);\n      send_bits(s, count - 3, 2);\n\n    } else if (count <= 10) {\n      send_code(s, REPZ_3_10, s.bl_tree);\n      send_bits(s, count - 3, 3);\n\n    } else {\n      send_code(s, REPZ_11_138, s.bl_tree);\n      send_bits(s, count - 11, 7);\n    }\n\n    count = 0;\n    prevlen = curlen;\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Construct the Huffman tree for the bit lengths and return the index in\n * bl_order of the last bit length code to send.\n */\nconst build_bl_tree = (s) => {\n\n  let max_blindex;  /* index of last bit length code of non zero freq */\n\n  /* Determine the bit length frequencies for literal and distance trees */\n  scan_tree(s, s.dyn_ltree, s.l_desc.max_code);\n  scan_tree(s, s.dyn_dtree, s.d_desc.max_code);\n\n  /* Build the bit length tree: */\n  build_tree(s, s.bl_desc);\n  /* opt_len now includes the length of the tree representations, except\n   * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n   */\n\n  /* Determine the number of bit length codes to send. The pkzip format\n   * requires that at least 4 bit length codes be sent. (appnote.txt says\n   * 3 but the actual value used is 4.)\n   */\n  for (max_blindex = BL_CODES$1 - 1; max_blindex >= 3; max_blindex--) {\n    if (s.bl_tree[bl_order[max_blindex] * 2 + 1]/*.Len*/ !== 0) {\n      break;\n    }\n  }\n  /* Update opt_len to include the bit length tree and counts */\n  s.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;\n  //Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n  //        s->opt_len, s->static_len));\n\n  return max_blindex;\n};\n\n\n/* ===========================================================================\n * Send the header for a block using dynamic Huffman trees: the counts, the\n * lengths of the bit length codes, the literal tree and the distance tree.\n * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n */\nconst send_all_trees = (s, lcodes, dcodes, blcodes) => {\n//    deflate_state *s;\n//    int lcodes, dcodes, blcodes; /* number of codes for each tree */\n\n  let rank;                    /* index in bl_order */\n\n  //Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n  //Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n  //        \"too many codes\");\n  //Tracev((stderr, \"\\nbl counts: \"));\n  send_bits(s, lcodes - 257, 5); /* not +255 as stated in appnote.txt */\n  send_bits(s, dcodes - 1,   5);\n  send_bits(s, blcodes - 4,  4); /* not -3 as stated in appnote.txt */\n  for (rank = 0; rank < blcodes; rank++) {\n    //Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n    send_bits(s, s.bl_tree[bl_order[rank] * 2 + 1]/*.Len*/, 3);\n  }\n  //Tracev((stderr, \"\\nbl tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_ltree, lcodes - 1); /* literal tree */\n  //Tracev((stderr, \"\\nlit tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_dtree, dcodes - 1); /* distance tree */\n  //Tracev((stderr, \"\\ndist tree: sent %ld\", s->bits_sent));\n};\n\n\n/* ===========================================================================\n * Check if the data type is TEXT or BINARY, using the following algorithm:\n * - TEXT if the two conditions below are satisfied:\n *    a) There are no non-portable control characters belonging to the\n *       \"block list\" (0..6, 14..25, 28..31).\n *    b) There is at least one printable character belonging to the\n *       \"allow list\" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).\n * - BINARY otherwise.\n * - The following partially-portable control characters form a\n *   \"gray list\" that is ignored in this detection algorithm:\n *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).\n * IN assertion: the fields Freq of dyn_ltree are set.\n */\nconst detect_data_type = (s) => {\n  /* block_mask is the bit mask of block-listed bytes\n   * set bits 0..6, 14..25, and 28..31\n   * 0xf3ffc07f = binary 11110011111111111100000001111111\n   */\n  let block_mask = 0xf3ffc07f;\n  let n;\n\n  /* Check for non-textual (\"block-listed\") bytes. */\n  for (n = 0; n <= 31; n++, block_mask >>>= 1) {\n    if ((block_mask & 1) && (s.dyn_ltree[n * 2]/*.Freq*/ !== 0)) {\n      return Z_BINARY;\n    }\n  }\n\n  /* Check for textual (\"allow-listed\") bytes. */\n  if (s.dyn_ltree[9 * 2]/*.Freq*/ !== 0 || s.dyn_ltree[10 * 2]/*.Freq*/ !== 0 ||\n      s.dyn_ltree[13 * 2]/*.Freq*/ !== 0) {\n    return Z_TEXT;\n  }\n  for (n = 32; n < LITERALS$1; n++) {\n    if (s.dyn_ltree[n * 2]/*.Freq*/ !== 0) {\n      return Z_TEXT;\n    }\n  }\n\n  /* There are no \"block-listed\" or \"allow-listed\" bytes:\n   * this stream either is empty or has tolerated (\"gray-listed\") bytes only.\n   */\n  return Z_BINARY;\n};\n\n\nlet static_init_done = false;\n\n/* ===========================================================================\n * Initialize the tree data structures for a new zlib stream.\n */\nconst _tr_init$1 = (s) =>\n{\n\n  if (!static_init_done) {\n    tr_static_init();\n    static_init_done = true;\n  }\n\n  s.l_desc  = new TreeDesc(s.dyn_ltree, static_l_desc);\n  s.d_desc  = new TreeDesc(s.dyn_dtree, static_d_desc);\n  s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);\n\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n\n  /* Initialize the first block of the first file: */\n  init_block(s);\n};\n\n\n/* ===========================================================================\n * Send a stored block\n */\nconst _tr_stored_block$1 = (s, buf, stored_len, last) => {\n//DeflateState *s;\n//charf *buf;       /* input block */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n\n  send_bits(s, (STORED_BLOCK << 1) + (last ? 1 : 0), 3);    /* send block type */\n  bi_windup(s);        /* align on byte boundary */\n  put_short(s, stored_len);\n  put_short(s, ~stored_len);\n  if (stored_len) {\n    s.pending_buf.set(s.window.subarray(buf, buf + stored_len), s.pending);\n  }\n  s.pending += stored_len;\n};\n\n\n/* ===========================================================================\n * Send one empty static block to give enough lookahead for inflate.\n * This takes 10 bits, of which 7 may remain in the bit buffer.\n */\nconst _tr_align$1 = (s) => {\n  send_bits(s, STATIC_TREES << 1, 3);\n  send_code(s, END_BLOCK, static_ltree);\n  bi_flush(s);\n};\n\n\n/* ===========================================================================\n * Determine the best encoding for the current block: dynamic trees, static\n * trees or store, and write out the encoded block.\n */\nconst _tr_flush_block$1 = (s, buf, stored_len, last) => {\n//DeflateState *s;\n//charf *buf;       /* input block, or NULL if too old */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n\n  let opt_lenb, static_lenb;  /* opt_len and static_len in bytes */\n  let max_blindex = 0;        /* index of last bit length code of non zero freq */\n\n  /* Build the Huffman trees unless a stored block is forced */\n  if (s.level > 0) {\n\n    /* Check if the file is binary or text */\n    if (s.strm.data_type === Z_UNKNOWN$1) {\n      s.strm.data_type = detect_data_type(s);\n    }\n\n    /* Construct the literal and distance trees */\n    build_tree(s, s.l_desc);\n    // Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n\n    build_tree(s, s.d_desc);\n    // Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n    /* At this point, opt_len and static_len are the total bit lengths of\n     * the compressed block data, excluding the tree representations.\n     */\n\n    /* Build the bit length tree for the above two trees, and get the index\n     * in bl_order of the last bit length code to send.\n     */\n    max_blindex = build_bl_tree(s);\n\n    /* Determine the best encoding. Compute the block lengths in bytes. */\n    opt_lenb = (s.opt_len + 3 + 7) >>> 3;\n    static_lenb = (s.static_len + 3 + 7) >>> 3;\n\n    // Tracev((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u \",\n    //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,\n    //        s->sym_next / 3));\n\n    if (static_lenb <= opt_lenb) { opt_lenb = static_lenb; }\n\n  } else {\n    // Assert(buf != (char*)0, \"lost buf\");\n    opt_lenb = static_lenb = stored_len + 5; /* force a stored block */\n  }\n\n  if ((stored_len + 4 <= opt_lenb) && (buf !== -1)) {\n    /* 4: two words for the lengths */\n\n    /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n     * Otherwise we can't have processed more than WSIZE input bytes since\n     * the last block flush, because compression would have been\n     * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n     * transform a block into a stored block.\n     */\n    _tr_stored_block$1(s, buf, stored_len, last);\n\n  } else if (s.strategy === Z_FIXED$1 || static_lenb === opt_lenb) {\n\n    send_bits(s, (STATIC_TREES << 1) + (last ? 1 : 0), 3);\n    compress_block(s, static_ltree, static_dtree);\n\n  } else {\n    send_bits(s, (DYN_TREES << 1) + (last ? 1 : 0), 3);\n    send_all_trees(s, s.l_desc.max_code + 1, s.d_desc.max_code + 1, max_blindex + 1);\n    compress_block(s, s.dyn_ltree, s.dyn_dtree);\n  }\n  // Assert (s->compressed_len == s->bits_sent, \"bad compressed size\");\n  /* The above check is made mod 2^32, for files larger than 512 MB\n   * and uLong implemented on 32 bits.\n   */\n  init_block(s);\n\n  if (last) {\n    bi_windup(s);\n  }\n  // Tracev((stderr,\"\\ncomprlen %lu(%lu) \", s->compressed_len>>3,\n  //       s->compressed_len-7*last));\n};\n\n/* ===========================================================================\n * Save the match info and tally the frequency counts. Return true if\n * the current block must be flushed.\n */\nconst _tr_tally$1 = (s, dist, lc) => {\n//    deflate_state *s;\n//    unsigned dist;  /* distance of matched string */\n//    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */\n\n  s.pending_buf[s.sym_buf + s.sym_next++] = dist;\n  s.pending_buf[s.sym_buf + s.sym_next++] = dist >> 8;\n  s.pending_buf[s.sym_buf + s.sym_next++] = lc;\n  if (dist === 0) {\n    /* lc is the unmatched char */\n    s.dyn_ltree[lc * 2]/*.Freq*/++;\n  } else {\n    s.matches++;\n    /* Here, lc is the match length - MIN_MATCH */\n    dist--;             /* dist = match distance - 1 */\n    //Assert((ush)dist < (ush)MAX_DIST(s) &&\n    //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n    //       (ush)d_code(dist) < (ush)D_CODES,  \"_tr_tally: bad match\");\n\n    s.dyn_ltree[(_length_code[lc] + LITERALS$1 + 1) * 2]/*.Freq*/++;\n    s.dyn_dtree[d_code(dist) * 2]/*.Freq*/++;\n  }\n\n  return (s.sym_next === s.sym_end);\n};\n\nvar _tr_init_1  = _tr_init$1;\nvar _tr_stored_block_1 = _tr_stored_block$1;\nvar _tr_flush_block_1  = _tr_flush_block$1;\nvar _tr_tally_1 = _tr_tally$1;\nvar _tr_align_1 = _tr_align$1;\n\nvar trees = {\n\t_tr_init: _tr_init_1,\n\t_tr_stored_block: _tr_stored_block_1,\n\t_tr_flush_block: _tr_flush_block_1,\n\t_tr_tally: _tr_tally_1,\n\t_tr_align: _tr_align_1\n};\n\n// Note: adler32 takes 12% for level 0 and 2% for level 6.\n// It isn't worth it to make additional optimizations as in original.\n// Small size is preferable.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst adler32 = (adler, buf, len, pos) => {\n  let s1 = (adler & 0xffff) |0,\n      s2 = ((adler >>> 16) & 0xffff) |0,\n      n = 0;\n\n  while (len !== 0) {\n    // Set limit ~ twice less than 5552, to keep\n    // s2 in 31-bits, because we force signed ints.\n    // in other case %= will fail.\n    n = len > 2000 ? 2000 : len;\n    len -= n;\n\n    do {\n      s1 = (s1 + buf[pos++]) |0;\n      s2 = (s2 + s1) |0;\n    } while (--n);\n\n    s1 %= 65521;\n    s2 %= 65521;\n  }\n\n  return (s1 | (s2 << 16)) |0;\n};\n\n\nvar adler32_1 = adler32;\n\n// Note: we can't get significant speed boost here.\n// So write code to minimize size - no pregenerated tables\n// and array tools dependencies.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// Use ordinary array, since untyped makes no boost here\nconst makeTable = () => {\n  let c, table = [];\n\n  for (var n = 0; n < 256; n++) {\n    c = n;\n    for (var k = 0; k < 8; k++) {\n      c = ((c & 1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n    }\n    table[n] = c;\n  }\n\n  return table;\n};\n\n// Create table on load. Just 255 signed longs. Not a problem.\nconst crcTable = new Uint32Array(makeTable());\n\n\nconst crc32 = (crc, buf, len, pos) => {\n  const t = crcTable;\n  const end = pos + len;\n\n  crc ^= -1;\n\n  for (let i = pos; i < end; i++) {\n    crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];\n  }\n\n  return (crc ^ (-1)); // >>> 0;\n};\n\n\nvar crc32_1 = crc32;\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar messages = {\n  2:      'need dictionary',     /* Z_NEED_DICT       2  */\n  1:      'stream end',          /* Z_STREAM_END      1  */\n  0:      '',                    /* Z_OK              0  */\n  '-1':   'file error',          /* Z_ERRNO         (-1) */\n  '-2':   'stream error',        /* Z_STREAM_ERROR  (-2) */\n  '-3':   'data error',          /* Z_DATA_ERROR    (-3) */\n  '-4':   'insufficient memory', /* Z_MEM_ERROR     (-4) */\n  '-5':   'buffer error',        /* Z_BUF_ERROR     (-5) */\n  '-6':   'incompatible version' /* Z_VERSION_ERROR (-6) */\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar constants$2 = {\n\n  /* Allowed flush values; see deflate() and inflate() below for details */\n  Z_NO_FLUSH:         0,\n  Z_PARTIAL_FLUSH:    1,\n  Z_SYNC_FLUSH:       2,\n  Z_FULL_FLUSH:       3,\n  Z_FINISH:           4,\n  Z_BLOCK:            5,\n  Z_TREES:            6,\n\n  /* Return codes for the compression/decompression functions. Negative values\n  * are errors, positive values are used for special but normal events.\n  */\n  Z_OK:               0,\n  Z_STREAM_END:       1,\n  Z_NEED_DICT:        2,\n  Z_ERRNO:           -1,\n  Z_STREAM_ERROR:    -2,\n  Z_DATA_ERROR:      -3,\n  Z_MEM_ERROR:       -4,\n  Z_BUF_ERROR:       -5,\n  //Z_VERSION_ERROR: -6,\n\n  /* compression levels */\n  Z_NO_COMPRESSION:         0,\n  Z_BEST_SPEED:             1,\n  Z_BEST_COMPRESSION:       9,\n  Z_DEFAULT_COMPRESSION:   -1,\n\n\n  Z_FILTERED:               1,\n  Z_HUFFMAN_ONLY:           2,\n  Z_RLE:                    3,\n  Z_FIXED:                  4,\n  Z_DEFAULT_STRATEGY:       0,\n\n  /* Possible values of the data_type field (though see inflate()) */\n  Z_BINARY:                 0,\n  Z_TEXT:                   1,\n  //Z_ASCII:                1, // = Z_TEXT (deprecated)\n  Z_UNKNOWN:                2,\n\n  /* The deflate compression method */\n  Z_DEFLATED:               8\n  //Z_NULL:                 null // Use -1 or null inline, depending on var type\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst { _tr_init, _tr_stored_block, _tr_flush_block, _tr_tally, _tr_align } = trees;\n\n\n\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH: Z_NO_FLUSH$2, Z_PARTIAL_FLUSH, Z_FULL_FLUSH: Z_FULL_FLUSH$1, Z_FINISH: Z_FINISH$3, Z_BLOCK: Z_BLOCK$1,\n  Z_OK: Z_OK$3, Z_STREAM_END: Z_STREAM_END$3, Z_STREAM_ERROR: Z_STREAM_ERROR$2, Z_DATA_ERROR: Z_DATA_ERROR$2, Z_BUF_ERROR: Z_BUF_ERROR$1,\n  Z_DEFAULT_COMPRESSION: Z_DEFAULT_COMPRESSION$1,\n  Z_FILTERED, Z_HUFFMAN_ONLY, Z_RLE, Z_FIXED, Z_DEFAULT_STRATEGY: Z_DEFAULT_STRATEGY$1,\n  Z_UNKNOWN,\n  Z_DEFLATED: Z_DEFLATED$2\n} = constants$2;\n\n/*============================================================================*/\n\n\nconst MAX_MEM_LEVEL = 9;\n/* Maximum value for memLevel in deflateInit2 */\nconst MAX_WBITS$1 = 15;\n/* 32K LZ77 window */\nconst DEF_MEM_LEVEL = 8;\n\n\nconst LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\nconst LITERALS      = 256;\n/* number of literal bytes 0..255 */\nconst L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\nconst D_CODES       = 30;\n/* number of distance codes */\nconst BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\nconst HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\nconst MAX_BITS  = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nconst MIN_MATCH = 3;\nconst MAX_MATCH = 258;\nconst MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);\n\nconst PRESET_DICT = 0x20;\n\nconst INIT_STATE    =  42;    /* zlib header -> BUSY_STATE */\n//#ifdef GZIP\nconst GZIP_STATE    =  57;    /* gzip header -> BUSY_STATE | EXTRA_STATE */\n//#endif\nconst EXTRA_STATE   =  69;    /* gzip extra block -> NAME_STATE */\nconst NAME_STATE    =  73;    /* gzip file name -> COMMENT_STATE */\nconst COMMENT_STATE =  91;    /* gzip comment -> HCRC_STATE */\nconst HCRC_STATE    = 103;    /* gzip header CRC -> BUSY_STATE */\nconst BUSY_STATE    = 113;    /* deflate -> FINISH_STATE */\nconst FINISH_STATE  = 666;    /* stream complete */\n\nconst BS_NEED_MORE      = 1; /* block not completed, need more input or more output */\nconst BS_BLOCK_DONE     = 2; /* block flush performed */\nconst BS_FINISH_STARTED = 3; /* finish started, need only more output at next deflate */\nconst BS_FINISH_DONE    = 4; /* finish done, accept no more input or output */\n\nconst OS_CODE = 0x03; // Unix :) . Don't detect, use this default.\n\nconst err = (strm, errorCode) => {\n  strm.msg = messages[errorCode];\n  return errorCode;\n};\n\nconst rank = (f) => {\n  return ((f) * 2) - ((f) > 4 ? 9 : 0);\n};\n\nconst zero = (buf) => {\n  let len = buf.length; while (--len >= 0) { buf[len] = 0; }\n};\n\n/* ===========================================================================\n * Slide the hash table when sliding the window down (could be avoided with 32\n * bit values at the expense of memory usage). We slide even when level == 0 to\n * keep the hash table consistent if we switch back to level > 0 later.\n */\nconst slide_hash = (s) => {\n  let n, m;\n  let p;\n  let wsize = s.w_size;\n\n  n = s.hash_size;\n  p = n;\n  do {\n    m = s.head[--p];\n    s.head[p] = (m >= wsize ? m - wsize : 0);\n  } while (--n);\n  n = wsize;\n//#ifndef FASTEST\n  p = n;\n  do {\n    m = s.prev[--p];\n    s.prev[p] = (m >= wsize ? m - wsize : 0);\n    /* If n is not on any hash chain, prev[n] is garbage but\n     * its value will never be used.\n     */\n  } while (--n);\n//#endif\n};\n\n/* eslint-disable new-cap */\nlet HASH_ZLIB = (s, prev, data) => ((prev << s.hash_shift) ^ data) & s.hash_mask;\n// This hash causes less collisions, https://github.com/nodeca/pako/issues/135\n// But breaks binary compatibility\n//let HASH_FAST = (s, prev, data) => ((prev << 8) + (prev >> 8) + (data << 4)) & s.hash_mask;\nlet HASH = HASH_ZLIB;\n\n\n/* =========================================================================\n * Flush as much pending output as possible. All deflate() output, except for\n * some deflate_stored() output, goes through this function so some\n * applications may wish to modify it to avoid allocating a large\n * strm->next_out buffer and copying into it. (See also read_buf()).\n */\nconst flush_pending = (strm) => {\n  const s = strm.state;\n\n  //_tr_flush_bits(s);\n  let len = s.pending;\n  if (len > strm.avail_out) {\n    len = strm.avail_out;\n  }\n  if (len === 0) { return; }\n\n  strm.output.set(s.pending_buf.subarray(s.pending_out, s.pending_out + len), strm.next_out);\n  strm.next_out  += len;\n  s.pending_out  += len;\n  strm.total_out += len;\n  strm.avail_out -= len;\n  s.pending      -= len;\n  if (s.pending === 0) {\n    s.pending_out = 0;\n  }\n};\n\n\nconst flush_block_only = (s, last) => {\n  _tr_flush_block(s, (s.block_start >= 0 ? s.block_start : -1), s.strstart - s.block_start, last);\n  s.block_start = s.strstart;\n  flush_pending(s.strm);\n};\n\n\nconst put_byte = (s, b) => {\n  s.pending_buf[s.pending++] = b;\n};\n\n\n/* =========================================================================\n * Put a short in the pending buffer. The 16-bit value is put in MSB order.\n * IN assertion: the stream state is correct and there is enough room in\n * pending_buf.\n */\nconst putShortMSB = (s, b) => {\n\n  //  put_byte(s, (Byte)(b >> 8));\n//  put_byte(s, (Byte)(b & 0xff));\n  s.pending_buf[s.pending++] = (b >>> 8) & 0xff;\n  s.pending_buf[s.pending++] = b & 0xff;\n};\n\n\n/* ===========================================================================\n * Read a new buffer from the current input stream, update the adler32\n * and total number of bytes read.  All deflate() input goes through\n * this function so some applications may wish to modify it to avoid\n * allocating a large strm->input buffer and copying from it.\n * (See also flush_pending()).\n */\nconst read_buf = (strm, buf, start, size) => {\n\n  let len = strm.avail_in;\n\n  if (len > size) { len = size; }\n  if (len === 0) { return 0; }\n\n  strm.avail_in -= len;\n\n  // zmemcpy(buf, strm->next_in, len);\n  buf.set(strm.input.subarray(strm.next_in, strm.next_in + len), start);\n  if (strm.state.wrap === 1) {\n    strm.adler = adler32_1(strm.adler, buf, len, start);\n  }\n\n  else if (strm.state.wrap === 2) {\n    strm.adler = crc32_1(strm.adler, buf, len, start);\n  }\n\n  strm.next_in += len;\n  strm.total_in += len;\n\n  return len;\n};\n\n\n/* ===========================================================================\n * Set match_start to the longest match starting at the given string and\n * return its length. Matches shorter or equal to prev_length are discarded,\n * in which case the result is equal to prev_length and match_start is\n * garbage.\n * IN assertions: cur_match is the head of the hash chain for the current\n *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n * OUT assertion: the match length is not greater than s->lookahead.\n */\nconst longest_match = (s, cur_match) => {\n\n  let chain_length = s.max_chain_length;      /* max hash chain length */\n  let scan = s.strstart; /* current string */\n  let match;                       /* matched string */\n  let len;                           /* length of current match */\n  let best_len = s.prev_length;              /* best match length so far */\n  let nice_match = s.nice_match;             /* stop if match long enough */\n  const limit = (s.strstart > (s.w_size - MIN_LOOKAHEAD)) ?\n      s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0/*NIL*/;\n\n  const _win = s.window; // shortcut\n\n  const wmask = s.w_mask;\n  const prev  = s.prev;\n\n  /* Stop when cur_match becomes <= limit. To simplify the code,\n   * we prevent matches with the string of window index 0.\n   */\n\n  const strend = s.strstart + MAX_MATCH;\n  let scan_end1  = _win[scan + best_len - 1];\n  let scan_end   = _win[scan + best_len];\n\n  /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.\n   * It is easy to get rid of this optimization if necessary.\n   */\n  // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, \"Code too clever\");\n\n  /* Do not waste too much time if we already have a good match: */\n  if (s.prev_length >= s.good_match) {\n    chain_length >>= 2;\n  }\n  /* Do not look for matches beyond the end of the input. This is necessary\n   * to make deflate deterministic.\n   */\n  if (nice_match > s.lookahead) { nice_match = s.lookahead; }\n\n  // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, \"need lookahead\");\n\n  do {\n    // Assert(cur_match < s->strstart, \"no future\");\n    match = cur_match;\n\n    /* Skip to next match if the match length cannot increase\n     * or if the match length is less than 2.  Note that the checks below\n     * for insufficient lookahead only occur occasionally for performance\n     * reasons.  Therefore uninitialized memory will be accessed, and\n     * conditional jumps will be made that depend on those values.\n     * However the length of the match is limited to the lookahead, so\n     * the output of deflate is not affected by the uninitialized values.\n     */\n\n    if (_win[match + best_len]     !== scan_end  ||\n        _win[match + best_len - 1] !== scan_end1 ||\n        _win[match]                !== _win[scan] ||\n        _win[++match]              !== _win[scan + 1]) {\n      continue;\n    }\n\n    /* The check at best_len-1 can be removed because it will be made\n     * again later. (This heuristic is not always a win.)\n     * It is not necessary to compare scan[2] and match[2] since they\n     * are always equal when the other bytes match, given that\n     * the hash keys are equal and that HASH_BITS >= 8.\n     */\n    scan += 2;\n    match++;\n    // Assert(*scan == *match, \"match[2]?\");\n\n    /* We check for insufficient lookahead only every 8th comparison;\n     * the 256th check will be made at strstart+258.\n     */\n    do {\n      /*jshint noempty:false*/\n    } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             scan < strend);\n\n    // Assert(scan <= s->window+(unsigned)(s->window_size-1), \"wild scan\");\n\n    len = MAX_MATCH - (strend - scan);\n    scan = strend - MAX_MATCH;\n\n    if (len > best_len) {\n      s.match_start = cur_match;\n      best_len = len;\n      if (len >= nice_match) {\n        break;\n      }\n      scan_end1  = _win[scan + best_len - 1];\n      scan_end   = _win[scan + best_len];\n    }\n  } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);\n\n  if (best_len <= s.lookahead) {\n    return best_len;\n  }\n  return s.lookahead;\n};\n\n\n/* ===========================================================================\n * Fill the window when the lookahead becomes insufficient.\n * Updates strstart and lookahead.\n *\n * IN assertion: lookahead < MIN_LOOKAHEAD\n * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\n *    At least one byte has been read, or avail_in == 0; reads are\n *    performed for at least two bytes (required for the zip translate_eol\n *    option -- not supported here).\n */\nconst fill_window = (s) => {\n\n  const _w_size = s.w_size;\n  let n, more, str;\n\n  //Assert(s->lookahead < MIN_LOOKAHEAD, \"already enough lookahead\");\n\n  do {\n    more = s.window_size - s.lookahead - s.strstart;\n\n    // JS ints have 32 bit, block below not needed\n    /* Deal with !@#$% 64K limit: */\n    //if (sizeof(int) <= 2) {\n    //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {\n    //        more = wsize;\n    //\n    //  } else if (more == (unsigned)(-1)) {\n    //        /* Very unlikely, but possible on 16 bit machine if\n    //         * strstart == 0 && lookahead == 1 (input done a byte at time)\n    //         */\n    //        more--;\n    //    }\n    //}\n\n\n    /* If the window is almost full and there is insufficient lookahead,\n     * move the upper half to the lower one to make room in the upper half.\n     */\n    if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {\n\n      s.window.set(s.window.subarray(_w_size, _w_size + _w_size - more), 0);\n      s.match_start -= _w_size;\n      s.strstart -= _w_size;\n      /* we now have strstart >= MAX_DIST */\n      s.block_start -= _w_size;\n      if (s.insert > s.strstart) {\n        s.insert = s.strstart;\n      }\n      slide_hash(s);\n      more += _w_size;\n    }\n    if (s.strm.avail_in === 0) {\n      break;\n    }\n\n    /* If there was no sliding:\n     *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\n     *    more == window_size - lookahead - strstart\n     * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\n     * => more >= window_size - 2*WSIZE + 2\n     * In the BIG_MEM or MMAP case (not yet supported),\n     *   window_size == input_size + MIN_LOOKAHEAD  &&\n     *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\n     * Otherwise, window_size == 2*WSIZE so more >= 2.\n     * If there was sliding, more >= WSIZE. So in all cases, more >= 2.\n     */\n    //Assert(more >= 2, \"more < 2\");\n    n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);\n    s.lookahead += n;\n\n    /* Initialize the hash value now that we have some input: */\n    if (s.lookahead + s.insert >= MIN_MATCH) {\n      str = s.strstart - s.insert;\n      s.ins_h = s.window[str];\n\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */\n      s.ins_h = HASH(s, s.ins_h, s.window[str + 1]);\n//#if MIN_MATCH != 3\n//        Call update_hash() MIN_MATCH-3 more times\n//#endif\n      while (s.insert) {\n        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n        s.ins_h = HASH(s, s.ins_h, s.window[str + MIN_MATCH - 1]);\n\n        s.prev[str & s.w_mask] = s.head[s.ins_h];\n        s.head[s.ins_h] = str;\n        str++;\n        s.insert--;\n        if (s.lookahead + s.insert < MIN_MATCH) {\n          break;\n        }\n      }\n    }\n    /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,\n     * but this is not important since only literal bytes will be emitted.\n     */\n\n  } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);\n\n  /* If the WIN_INIT bytes after the end of the current data have never been\n   * written, then zero those bytes in order to avoid memory check reports of\n   * the use of uninitialized (or uninitialised as Julian writes) bytes by\n   * the longest match routines.  Update the high water mark for the next\n   * time through here.  WIN_INIT is set to MAX_MATCH since the longest match\n   * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.\n   */\n//  if (s.high_water < s.window_size) {\n//    const curr = s.strstart + s.lookahead;\n//    let init = 0;\n//\n//    if (s.high_water < curr) {\n//      /* Previous high water mark below current data -- zero WIN_INIT\n//       * bytes or up to end of window, whichever is less.\n//       */\n//      init = s.window_size - curr;\n//      if (init > WIN_INIT)\n//        init = WIN_INIT;\n//      zmemzero(s->window + curr, (unsigned)init);\n//      s->high_water = curr + init;\n//    }\n//    else if (s->high_water < (ulg)curr + WIN_INIT) {\n//      /* High water mark at or above current data, but below current data\n//       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up\n//       * to end of window, whichever is less.\n//       */\n//      init = (ulg)curr + WIN_INIT - s->high_water;\n//      if (init > s->window_size - s->high_water)\n//        init = s->window_size - s->high_water;\n//      zmemzero(s->window + s->high_water, (unsigned)init);\n//      s->high_water += init;\n//    }\n//  }\n//\n//  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,\n//    \"not enough room for search\");\n};\n\n/* ===========================================================================\n * Copy without compression as much as possible from the input stream, return\n * the current block state.\n *\n * In case deflateParams() is used to later switch to a non-zero compression\n * level, s->matches (otherwise unused when storing) keeps track of the number\n * of hash table slides to perform. If s->matches is 1, then one hash table\n * slide will be done when switching. If s->matches is 2, the maximum value\n * allowed here, then the hash table will be cleared, since two or more slides\n * is the same as a clear.\n *\n * deflate_stored() is written to minimize the number of times an input byte is\n * copied. It is most efficient with large input and output buffers, which\n * maximizes the opportunites to have a single copy from next_in to next_out.\n */\nconst deflate_stored = (s, flush) => {\n\n  /* Smallest worthy block size when not flushing or finishing. By default\n   * this is 32K. This can be as small as 507 bytes for memLevel == 1. For\n   * large input and output buffers, the stored block size will be larger.\n   */\n  let min_block = s.pending_buf_size - 5 > s.w_size ? s.w_size : s.pending_buf_size - 5;\n\n  /* Copy as many min_block or larger stored blocks directly to next_out as\n   * possible. If flushing, copy the remaining available input to next_out as\n   * stored blocks, if there is enough space.\n   */\n  let len, left, have, last = 0;\n  let used = s.strm.avail_in;\n  do {\n    /* Set len to the maximum size block that we can copy directly with the\n     * available input data and output space. Set left to how much of that\n     * would be copied from what's left in the window.\n     */\n    len = 65535/* MAX_STORED */;     /* maximum deflate stored block length */\n    have = (s.bi_valid + 42) >> 3;     /* number of header bytes */\n    if (s.strm.avail_out < have) {         /* need room for header */\n      break;\n    }\n      /* maximum stored block length that will fit in avail_out: */\n    have = s.strm.avail_out - have;\n    left = s.strstart - s.block_start;  /* bytes left in window */\n    if (len > left + s.strm.avail_in) {\n      len = left + s.strm.avail_in;   /* limit len to the input */\n    }\n    if (len > have) {\n      len = have;             /* limit len to the output */\n    }\n\n    /* If the stored block would be less than min_block in length, or if\n     * unable to copy all of the available input when flushing, then try\n     * copying to the window and the pending buffer instead. Also don't\n     * write an empty block when flushing -- deflate() does that.\n     */\n    if (len < min_block && ((len === 0 && flush !== Z_FINISH$3) ||\n                        flush === Z_NO_FLUSH$2 ||\n                        len !== left + s.strm.avail_in)) {\n      break;\n    }\n\n    /* Make a dummy stored block in pending to get the header bytes,\n     * including any pending bits. This also updates the debugging counts.\n     */\n    last = flush === Z_FINISH$3 && len === left + s.strm.avail_in ? 1 : 0;\n    _tr_stored_block(s, 0, 0, last);\n\n    /* Replace the lengths in the dummy stored block with len. */\n    s.pending_buf[s.pending - 4] = len;\n    s.pending_buf[s.pending - 3] = len >> 8;\n    s.pending_buf[s.pending - 2] = ~len;\n    s.pending_buf[s.pending - 1] = ~len >> 8;\n\n    /* Write the stored block header bytes. */\n    flush_pending(s.strm);\n\n//#ifdef ZLIB_DEBUG\n//    /* Update debugging counts for the data about to be copied. */\n//    s->compressed_len += len << 3;\n//    s->bits_sent += len << 3;\n//#endif\n\n    /* Copy uncompressed bytes from the window to next_out. */\n    if (left) {\n      if (left > len) {\n        left = len;\n      }\n      //zmemcpy(s->strm->next_out, s->window + s->block_start, left);\n      s.strm.output.set(s.window.subarray(s.block_start, s.block_start + left), s.strm.next_out);\n      s.strm.next_out += left;\n      s.strm.avail_out -= left;\n      s.strm.total_out += left;\n      s.block_start += left;\n      len -= left;\n    }\n\n    /* Copy uncompressed bytes directly from next_in to next_out, updating\n     * the check value.\n     */\n    if (len) {\n      read_buf(s.strm, s.strm.output, s.strm.next_out, len);\n      s.strm.next_out += len;\n      s.strm.avail_out -= len;\n      s.strm.total_out += len;\n    }\n  } while (last === 0);\n\n  /* Update the sliding window with the last s->w_size bytes of the copied\n   * data, or append all of the copied data to the existing window if less\n   * than s->w_size bytes were copied. Also update the number of bytes to\n   * insert in the hash tables, in the event that deflateParams() switches to\n   * a non-zero compression level.\n   */\n  used -= s.strm.avail_in;    /* number of input bytes directly copied */\n  if (used) {\n    /* If any input was used, then no unused input remains in the window,\n     * therefore s->block_start == s->strstart.\n     */\n    if (used >= s.w_size) {  /* supplant the previous history */\n      s.matches = 2;     /* clear hash */\n      //zmemcpy(s->window, s->strm->next_in - s->w_size, s->w_size);\n      s.window.set(s.strm.input.subarray(s.strm.next_in - s.w_size, s.strm.next_in), 0);\n      s.strstart = s.w_size;\n      s.insert = s.strstart;\n    }\n    else {\n      if (s.window_size - s.strstart <= used) {\n        /* Slide the window down. */\n        s.strstart -= s.w_size;\n        //zmemcpy(s->window, s->window + s->w_size, s->strstart);\n        s.window.set(s.window.subarray(s.w_size, s.w_size + s.strstart), 0);\n        if (s.matches < 2) {\n          s.matches++;   /* add a pending slide_hash() */\n        }\n        if (s.insert > s.strstart) {\n          s.insert = s.strstart;\n        }\n      }\n      //zmemcpy(s->window + s->strstart, s->strm->next_in - used, used);\n      s.window.set(s.strm.input.subarray(s.strm.next_in - used, s.strm.next_in), s.strstart);\n      s.strstart += used;\n      s.insert += used > s.w_size - s.insert ? s.w_size - s.insert : used;\n    }\n    s.block_start = s.strstart;\n  }\n  if (s.high_water < s.strstart) {\n    s.high_water = s.strstart;\n  }\n\n  /* If the last block was written to next_out, then done. */\n  if (last) {\n    return BS_FINISH_DONE;\n  }\n\n  /* If flushing and all input has been consumed, then done. */\n  if (flush !== Z_NO_FLUSH$2 && flush !== Z_FINISH$3 &&\n    s.strm.avail_in === 0 && s.strstart === s.block_start) {\n    return BS_BLOCK_DONE;\n  }\n\n  /* Fill the window with any remaining input. */\n  have = s.window_size - s.strstart;\n  if (s.strm.avail_in > have && s.block_start >= s.w_size) {\n    /* Slide the window down. */\n    s.block_start -= s.w_size;\n    s.strstart -= s.w_size;\n    //zmemcpy(s->window, s->window + s->w_size, s->strstart);\n    s.window.set(s.window.subarray(s.w_size, s.w_size + s.strstart), 0);\n    if (s.matches < 2) {\n      s.matches++;       /* add a pending slide_hash() */\n    }\n    have += s.w_size;      /* more space now */\n    if (s.insert > s.strstart) {\n      s.insert = s.strstart;\n    }\n  }\n  if (have > s.strm.avail_in) {\n    have = s.strm.avail_in;\n  }\n  if (have) {\n    read_buf(s.strm, s.window, s.strstart, have);\n    s.strstart += have;\n    s.insert += have > s.w_size - s.insert ? s.w_size - s.insert : have;\n  }\n  if (s.high_water < s.strstart) {\n    s.high_water = s.strstart;\n  }\n\n  /* There was not enough avail_out to write a complete worthy or flushed\n   * stored block to next_out. Write a stored block to pending instead, if we\n   * have enough input for a worthy block, or if flushing and there is enough\n   * room for the remaining input as a stored block in the pending buffer.\n   */\n  have = (s.bi_valid + 42) >> 3;     /* number of header bytes */\n    /* maximum stored block length that will fit in pending: */\n  have = s.pending_buf_size - have > 65535/* MAX_STORED */ ? 65535/* MAX_STORED */ : s.pending_buf_size - have;\n  min_block = have > s.w_size ? s.w_size : have;\n  left = s.strstart - s.block_start;\n  if (left >= min_block ||\n     ((left || flush === Z_FINISH$3) && flush !== Z_NO_FLUSH$2 &&\n     s.strm.avail_in === 0 && left <= have)) {\n    len = left > have ? have : left;\n    last = flush === Z_FINISH$3 && s.strm.avail_in === 0 &&\n         len === left ? 1 : 0;\n    _tr_stored_block(s, s.block_start, len, last);\n    s.block_start += len;\n    flush_pending(s.strm);\n  }\n\n  /* We've done all we can with the available input and output. */\n  return last ? BS_FINISH_STARTED : BS_NEED_MORE;\n};\n\n\n/* ===========================================================================\n * Compress as much as possible from the input stream, return the current\n * block state.\n * This function does not perform lazy evaluation of matches and inserts\n * new strings in the dictionary only for unmatched strings or for short\n * matches. It is used only for the fast compression options.\n */\nconst deflate_fast = (s, flush) => {\n\n  let hash_head;        /* head of the hash chain */\n  let bflush;           /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH$2) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) {\n        break; /* flush the current block */\n      }\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     * At this point we have always match_length < MIN_MATCH\n     */\n    if (hash_head !== 0/*NIL*/ && ((s.strstart - hash_head) <= (s.w_size - MIN_LOOKAHEAD))) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n    }\n    if (s.match_length >= MIN_MATCH) {\n      // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only\n\n      /*** _tr_tally_dist(s, s.strstart - s.match_start,\n                     s.match_length - MIN_MATCH, bflush); ***/\n      bflush = _tr_tally(s, s.strstart - s.match_start, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n\n      /* Insert new strings in the hash table only if the match length\n       * is not too large. This saves time but degrades compression.\n       */\n      if (s.match_length <= s.max_lazy_match/*max_insert_length*/ && s.lookahead >= MIN_MATCH) {\n        s.match_length--; /* string at strstart already in table */\n        do {\n          s.strstart++;\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n          /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n           * always MIN_MATCH bytes ahead.\n           */\n        } while (--s.match_length !== 0);\n        s.strstart++;\n      } else\n      {\n        s.strstart += s.match_length;\n        s.match_length = 0;\n        s.ins_h = s.window[s.strstart];\n        /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */\n        s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + 1]);\n\n//#if MIN_MATCH != 3\n//                Call UPDATE_HASH() MIN_MATCH-3 more times\n//#endif\n        /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not\n         * matter since it will be recomputed at next deflate call.\n         */\n      }\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s.window[s.strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = _tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = ((s.strstart < (MIN_MATCH - 1)) ? s.strstart : MIN_MATCH - 1);\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.sym_next) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* ===========================================================================\n * Same as above, but achieves better compression. We use a lazy\n * evaluation for matches: a match is finally adopted only if there is\n * no better match at the next window position.\n */\nconst deflate_slow = (s, flush) => {\n\n  let hash_head;          /* head of hash chain */\n  let bflush;              /* set if current block must be flushed */\n\n  let max_insert;\n\n  /* Process the input block. */\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH$2) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     */\n    s.prev_length = s.match_length;\n    s.prev_match = s.match_start;\n    s.match_length = MIN_MATCH - 1;\n\n    if (hash_head !== 0/*NIL*/ && s.prev_length < s.max_lazy_match &&\n        s.strstart - hash_head <= (s.w_size - MIN_LOOKAHEAD)/*MAX_DIST(s)*/) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n\n      if (s.match_length <= 5 &&\n         (s.strategy === Z_FILTERED || (s.match_length === MIN_MATCH && s.strstart - s.match_start > 4096/*TOO_FAR*/))) {\n\n        /* If prev_match is also MIN_MATCH, match_start is garbage\n         * but we will ignore the current match anyway.\n         */\n        s.match_length = MIN_MATCH - 1;\n      }\n    }\n    /* If there was a match at the previous step and the current\n     * match is not better, output the previous match:\n     */\n    if (s.prev_length >= MIN_MATCH && s.match_length <= s.prev_length) {\n      max_insert = s.strstart + s.lookahead - MIN_MATCH;\n      /* Do not insert strings in hash table beyond this. */\n\n      //check_match(s, s.strstart-1, s.prev_match, s.prev_length);\n\n      /***_tr_tally_dist(s, s.strstart - 1 - s.prev_match,\n                     s.prev_length - MIN_MATCH, bflush);***/\n      bflush = _tr_tally(s, s.strstart - 1 - s.prev_match, s.prev_length - MIN_MATCH);\n      /* Insert in hash table all strings up to the end of the match.\n       * strstart-1 and strstart are already inserted. If there is not\n       * enough lookahead, the last two strings are not inserted in\n       * the hash table.\n       */\n      s.lookahead -= s.prev_length - 1;\n      s.prev_length -= 2;\n      do {\n        if (++s.strstart <= max_insert) {\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n        }\n      } while (--s.prev_length !== 0);\n      s.match_available = 0;\n      s.match_length = MIN_MATCH - 1;\n      s.strstart++;\n\n      if (bflush) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n      }\n\n    } else if (s.match_available) {\n      /* If there was no match at the previous position, output a\n       * single literal. If there was a match but the current match\n       * is longer, truncate the previous match to a single literal.\n       */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n      /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n      bflush = _tr_tally(s, 0, s.window[s.strstart - 1]);\n\n      if (bflush) {\n        /*** FLUSH_BLOCK_ONLY(s, 0) ***/\n        flush_block_only(s, false);\n        /***/\n      }\n      s.strstart++;\n      s.lookahead--;\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n    } else {\n      /* There is no previous match to compare with, wait for\n       * the next step to decide.\n       */\n      s.match_available = 1;\n      s.strstart++;\n      s.lookahead--;\n    }\n  }\n  //Assert (flush != Z_NO_FLUSH, \"no flush?\");\n  if (s.match_available) {\n    //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n    /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n    bflush = _tr_tally(s, 0, s.window[s.strstart - 1]);\n\n    s.match_available = 0;\n  }\n  s.insert = s.strstart < MIN_MATCH - 1 ? s.strstart : MIN_MATCH - 1;\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.sym_next) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_BLOCK_DONE;\n};\n\n\n/* ===========================================================================\n * For Z_RLE, simply look for runs of bytes, generate matches only of distance\n * one.  Do not maintain a hash table.  (It will be regenerated if this run of\n * deflate switches away from Z_RLE.)\n */\nconst deflate_rle = (s, flush) => {\n\n  let bflush;            /* set if current block must be flushed */\n  let prev;              /* byte at distance one to match */\n  let scan, strend;      /* scan goes up to strend for length of run */\n\n  const _win = s.window;\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the longest run, plus one for the unrolled loop.\n     */\n    if (s.lookahead <= MAX_MATCH) {\n      fill_window(s);\n      if (s.lookahead <= MAX_MATCH && flush === Z_NO_FLUSH$2) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* See how many times the previous byte repeats */\n    s.match_length = 0;\n    if (s.lookahead >= MIN_MATCH && s.strstart > 0) {\n      scan = s.strstart - 1;\n      prev = _win[scan];\n      if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {\n        strend = s.strstart + MAX_MATCH;\n        do {\n          /*jshint noempty:false*/\n        } while (prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 scan < strend);\n        s.match_length = MAX_MATCH - (strend - scan);\n        if (s.match_length > s.lookahead) {\n          s.match_length = s.lookahead;\n        }\n      }\n      //Assert(scan <= s->window+(uInt)(s->window_size-1), \"wild scan\");\n    }\n\n    /* Emit match if have run of MIN_MATCH or longer, else emit literal */\n    if (s.match_length >= MIN_MATCH) {\n      //check_match(s, s.strstart, s.strstart - 1, s.match_length);\n\n      /*** _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ***/\n      bflush = _tr_tally(s, 1, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n      s.strstart += s.match_length;\n      s.match_length = 0;\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = _tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.sym_next) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* ===========================================================================\n * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.\n * (It will be regenerated if this run of deflate switches away from Huffman.)\n */\nconst deflate_huff = (s, flush) => {\n\n  let bflush;             /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we have a literal to write. */\n    if (s.lookahead === 0) {\n      fill_window(s);\n      if (s.lookahead === 0) {\n        if (flush === Z_NO_FLUSH$2) {\n          return BS_NEED_MORE;\n        }\n        break;      /* flush the current block */\n      }\n    }\n\n    /* Output a literal byte */\n    s.match_length = 0;\n    //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n    /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n    bflush = _tr_tally(s, 0, s.window[s.strstart]);\n    s.lookahead--;\n    s.strstart++;\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH$3) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.sym_next) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* Values for max_lazy_match, good_match and max_chain_length, depending on\n * the desired pack level (0..9). The values given below have been tuned to\n * exclude worst case performance for pathological files. Better values may be\n * found for specific files.\n */\nfunction Config(good_length, max_lazy, nice_length, max_chain, func) {\n\n  this.good_length = good_length;\n  this.max_lazy = max_lazy;\n  this.nice_length = nice_length;\n  this.max_chain = max_chain;\n  this.func = func;\n}\n\nconst configuration_table = [\n  /*      good lazy nice chain */\n  new Config(0, 0, 0, 0, deflate_stored),          /* 0 store only */\n  new Config(4, 4, 8, 4, deflate_fast),            /* 1 max speed, no lazy matches */\n  new Config(4, 5, 16, 8, deflate_fast),           /* 2 */\n  new Config(4, 6, 32, 32, deflate_fast),          /* 3 */\n\n  new Config(4, 4, 16, 16, deflate_slow),          /* 4 lazy matches */\n  new Config(8, 16, 32, 32, deflate_slow),         /* 5 */\n  new Config(8, 16, 128, 128, deflate_slow),       /* 6 */\n  new Config(8, 32, 128, 256, deflate_slow),       /* 7 */\n  new Config(32, 128, 258, 1024, deflate_slow),    /* 8 */\n  new Config(32, 258, 258, 4096, deflate_slow)     /* 9 max compression */\n];\n\n\n/* ===========================================================================\n * Initialize the \"longest match\" routines for a new zlib stream\n */\nconst lm_init = (s) => {\n\n  s.window_size = 2 * s.w_size;\n\n  /*** CLEAR_HASH(s); ***/\n  zero(s.head); // Fill with NIL (= 0);\n\n  /* Set the default configuration parameters:\n   */\n  s.max_lazy_match = configuration_table[s.level].max_lazy;\n  s.good_match = configuration_table[s.level].good_length;\n  s.nice_match = configuration_table[s.level].nice_length;\n  s.max_chain_length = configuration_table[s.level].max_chain;\n\n  s.strstart = 0;\n  s.block_start = 0;\n  s.lookahead = 0;\n  s.insert = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  s.ins_h = 0;\n};\n\n\nfunction DeflateState() {\n  this.strm = null;            /* pointer back to this zlib stream */\n  this.status = 0;            /* as the name implies */\n  this.pending_buf = null;      /* output still pending */\n  this.pending_buf_size = 0;  /* size of pending_buf */\n  this.pending_out = 0;       /* next pending byte to output to the stream */\n  this.pending = 0;           /* nb of bytes in the pending buffer */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.gzhead = null;         /* gzip header information to write */\n  this.gzindex = 0;           /* where in extra, name, or comment */\n  this.method = Z_DEFLATED$2; /* can only be DEFLATED */\n  this.last_flush = -1;   /* value of flush param for previous deflate call */\n\n  this.w_size = 0;  /* LZ77 window size (32K by default) */\n  this.w_bits = 0;  /* log2(w_size)  (8..16) */\n  this.w_mask = 0;  /* w_size - 1 */\n\n  this.window = null;\n  /* Sliding window. Input bytes are read into the second half of the window,\n   * and move to the first half later to keep a dictionary of at least wSize\n   * bytes. With this organization, matches are limited to a distance of\n   * wSize-MAX_MATCH bytes, but this ensures that IO is always\n   * performed with a length multiple of the block size.\n   */\n\n  this.window_size = 0;\n  /* Actual size of window: 2*wSize, except when the user input buffer\n   * is directly used as sliding window.\n   */\n\n  this.prev = null;\n  /* Link to older string with same hash index. To limit the size of this\n   * array to 64K, this link is maintained only for the last 32K strings.\n   * An index in this array is thus a window index modulo 32K.\n   */\n\n  this.head = null;   /* Heads of the hash chains or NIL. */\n\n  this.ins_h = 0;       /* hash index of string to be inserted */\n  this.hash_size = 0;   /* number of elements in hash table */\n  this.hash_bits = 0;   /* log2(hash_size) */\n  this.hash_mask = 0;   /* hash_size-1 */\n\n  this.hash_shift = 0;\n  /* Number of bits by which ins_h must be shifted at each input\n   * step. It must be such that after MIN_MATCH steps, the oldest\n   * byte no longer takes part in the hash key, that is:\n   *   hash_shift * MIN_MATCH >= hash_bits\n   */\n\n  this.block_start = 0;\n  /* Window position at the beginning of the current output block. Gets\n   * negative when the window is moved backwards.\n   */\n\n  this.match_length = 0;      /* length of best match */\n  this.prev_match = 0;        /* previous match */\n  this.match_available = 0;   /* set if previous match exists */\n  this.strstart = 0;          /* start of string to insert */\n  this.match_start = 0;       /* start of matching string */\n  this.lookahead = 0;         /* number of valid bytes ahead in window */\n\n  this.prev_length = 0;\n  /* Length of the best match at previous step. Matches not greater than this\n   * are discarded. This is used in the lazy match evaluation.\n   */\n\n  this.max_chain_length = 0;\n  /* To speed up deflation, hash chains are never searched beyond this\n   * length.  A higher limit improves compression ratio but degrades the\n   * speed.\n   */\n\n  this.max_lazy_match = 0;\n  /* Attempt to find a better match only when the current match is strictly\n   * smaller than this value. This mechanism is used only for compression\n   * levels >= 4.\n   */\n  // That's alias to max_lazy_match, don't use directly\n  //this.max_insert_length = 0;\n  /* Insert new strings in the hash table only if the match length is not\n   * greater than this length. This saves time but degrades compression.\n   * max_insert_length is used only for compression levels <= 3.\n   */\n\n  this.level = 0;     /* compression level (1..9) */\n  this.strategy = 0;  /* favor or force Huffman coding*/\n\n  this.good_match = 0;\n  /* Use a faster search when the previous match is longer than this */\n\n  this.nice_match = 0; /* Stop searching when current match exceeds this */\n\n              /* used by trees.c: */\n\n  /* Didn't use ct_data typedef below to suppress compiler warning */\n\n  // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */\n  // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */\n  // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */\n\n  // Use flat array of DOUBLE size, with interleaved fata,\n  // because JS does not support effective\n  this.dyn_ltree  = new Uint16Array(HEAP_SIZE * 2);\n  this.dyn_dtree  = new Uint16Array((2 * D_CODES + 1) * 2);\n  this.bl_tree    = new Uint16Array((2 * BL_CODES + 1) * 2);\n  zero(this.dyn_ltree);\n  zero(this.dyn_dtree);\n  zero(this.bl_tree);\n\n  this.l_desc   = null;         /* desc. for literal tree */\n  this.d_desc   = null;         /* desc. for distance tree */\n  this.bl_desc  = null;         /* desc. for bit length tree */\n\n  //ush bl_count[MAX_BITS+1];\n  this.bl_count = new Uint16Array(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  //int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */\n  this.heap = new Uint16Array(2 * L_CODES + 1);  /* heap used to build the Huffman trees */\n  zero(this.heap);\n\n  this.heap_len = 0;               /* number of elements in the heap */\n  this.heap_max = 0;               /* element of largest frequency */\n  /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\n   * The same heap array is used to build all trees.\n   */\n\n  this.depth = new Uint16Array(2 * L_CODES + 1); //uch depth[2*L_CODES+1];\n  zero(this.depth);\n  /* Depth of each subtree used as tie breaker for trees of equal frequency\n   */\n\n  this.sym_buf = 0;        /* buffer for distances and literals/lengths */\n\n  this.lit_bufsize = 0;\n  /* Size of match buffer for literals/lengths.  There are 4 reasons for\n   * limiting lit_bufsize to 64K:\n   *   - frequencies can be kept in 16 bit counters\n   *   - if compression is not successful for the first block, all input\n   *     data is still in the window so we can still emit a stored block even\n   *     when input comes from standard input.  (This can also be done for\n   *     all blocks if lit_bufsize is not greater than 32K.)\n   *   - if compression is not successful for a file smaller than 64K, we can\n   *     even emit a stored file instead of a stored block (saving 5 bytes).\n   *     This is applicable only for zip (not gzip or zlib).\n   *   - creating new Huffman trees less frequently may not provide fast\n   *     adaptation to changes in the input data statistics. (Take for\n   *     example a binary file with poorly compressible code followed by\n   *     a highly compressible string table.) Smaller buffer sizes give\n   *     fast adaptation but have of course the overhead of transmitting\n   *     trees more frequently.\n   *   - I can't count above 4\n   */\n\n  this.sym_next = 0;      /* running index in sym_buf */\n  this.sym_end = 0;       /* symbol table full when sym_next reaches this */\n\n  this.opt_len = 0;       /* bit length of current block with optimal trees */\n  this.static_len = 0;    /* bit length of current block with static trees */\n  this.matches = 0;       /* number of string matches in current block */\n  this.insert = 0;        /* bytes at end of window left to insert */\n\n\n  this.bi_buf = 0;\n  /* Output buffer. bits are inserted starting at the bottom (least\n   * significant bits).\n   */\n  this.bi_valid = 0;\n  /* Number of valid bits in bi_buf.  All bits above the last valid bit\n   * are always zero.\n   */\n\n  // Used for window memory init. We safely ignore it for JS. That makes\n  // sense only for pointers and memory check tools.\n  //this.high_water = 0;\n  /* High water mark offset in window for initialized bytes -- bytes above\n   * this are set to zero in order to avoid memory check warnings when\n   * longest match routines access bytes past the input.  This is then\n   * updated to the new high water mark.\n   */\n}\n\n\n/* =========================================================================\n * Check for a valid deflate stream state. Return 0 if ok, 1 if not.\n */\nconst deflateStateCheck = (strm) => {\n\n  if (!strm) {\n    return 1;\n  }\n  const s = strm.state;\n  if (!s || s.strm !== strm || (s.status !== INIT_STATE &&\n//#ifdef GZIP\n                                s.status !== GZIP_STATE &&\n//#endif\n                                s.status !== EXTRA_STATE &&\n                                s.status !== NAME_STATE &&\n                                s.status !== COMMENT_STATE &&\n                                s.status !== HCRC_STATE &&\n                                s.status !== BUSY_STATE &&\n                                s.status !== FINISH_STATE)) {\n    return 1;\n  }\n  return 0;\n};\n\n\nconst deflateResetKeep = (strm) => {\n\n  if (deflateStateCheck(strm)) {\n    return err(strm, Z_STREAM_ERROR$2);\n  }\n\n  strm.total_in = strm.total_out = 0;\n  strm.data_type = Z_UNKNOWN;\n\n  const s = strm.state;\n  s.pending = 0;\n  s.pending_out = 0;\n\n  if (s.wrap < 0) {\n    s.wrap = -s.wrap;\n    /* was made negative by deflate(..., Z_FINISH); */\n  }\n  s.status =\n//#ifdef GZIP\n    s.wrap === 2 ? GZIP_STATE :\n//#endif\n    s.wrap ? INIT_STATE : BUSY_STATE;\n  strm.adler = (s.wrap === 2) ?\n    0  // crc32(0, Z_NULL, 0)\n  :\n    1; // adler32(0, Z_NULL, 0)\n  s.last_flush = -2;\n  _tr_init(s);\n  return Z_OK$3;\n};\n\n\nconst deflateReset = (strm) => {\n\n  const ret = deflateResetKeep(strm);\n  if (ret === Z_OK$3) {\n    lm_init(strm.state);\n  }\n  return ret;\n};\n\n\nconst deflateSetHeader = (strm, head) => {\n\n  if (deflateStateCheck(strm) || strm.state.wrap !== 2) {\n    return Z_STREAM_ERROR$2;\n  }\n  strm.state.gzhead = head;\n  return Z_OK$3;\n};\n\n\nconst deflateInit2 = (strm, level, method, windowBits, memLevel, strategy) => {\n\n  if (!strm) { // === Z_NULL\n    return Z_STREAM_ERROR$2;\n  }\n  let wrap = 1;\n\n  if (level === Z_DEFAULT_COMPRESSION$1) {\n    level = 6;\n  }\n\n  if (windowBits < 0) { /* suppress zlib wrapper */\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n\n  else if (windowBits > 15) {\n    wrap = 2;           /* write gzip wrapper instead */\n    windowBits -= 16;\n  }\n\n\n  if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED$2 ||\n    windowBits < 8 || windowBits > 15 || level < 0 || level > 9 ||\n    strategy < 0 || strategy > Z_FIXED || (windowBits === 8 && wrap !== 1)) {\n    return err(strm, Z_STREAM_ERROR$2);\n  }\n\n\n  if (windowBits === 8) {\n    windowBits = 9;\n  }\n  /* until 256-byte window bug fixed */\n\n  const s = new DeflateState();\n\n  strm.state = s;\n  s.strm = strm;\n  s.status = INIT_STATE;     /* to pass state test in deflateReset() */\n\n  s.wrap = wrap;\n  s.gzhead = null;\n  s.w_bits = windowBits;\n  s.w_size = 1 << s.w_bits;\n  s.w_mask = s.w_size - 1;\n\n  s.hash_bits = memLevel + 7;\n  s.hash_size = 1 << s.hash_bits;\n  s.hash_mask = s.hash_size - 1;\n  s.hash_shift = ~~((s.hash_bits + MIN_MATCH - 1) / MIN_MATCH);\n\n  s.window = new Uint8Array(s.w_size * 2);\n  s.head = new Uint16Array(s.hash_size);\n  s.prev = new Uint16Array(s.w_size);\n\n  // Don't need mem init magic for JS.\n  //s.high_water = 0;  /* nothing written to s->window yet */\n\n  s.lit_bufsize = 1 << (memLevel + 6); /* 16K elements by default */\n\n  /* We overlay pending_buf and sym_buf. This works since the average size\n   * for length/distance pairs over any compressed block is assured to be 31\n   * bits or less.\n   *\n   * Analysis: The longest fixed codes are a length code of 8 bits plus 5\n   * extra bits, for lengths 131 to 257. The longest fixed distance codes are\n   * 5 bits plus 13 extra bits, for distances 16385 to 32768. The longest\n   * possible fixed-codes length/distance pair is then 31 bits total.\n   *\n   * sym_buf starts one-fourth of the way into pending_buf. So there are\n   * three bytes in sym_buf for every four bytes in pending_buf. Each symbol\n   * in sym_buf is three bytes -- two for the distance and one for the\n   * literal/length. As each symbol is consumed, the pointer to the next\n   * sym_buf value to read moves forward three bytes. From that symbol, up to\n   * 31 bits are written to pending_buf. The closest the written pending_buf\n   * bits gets to the next sym_buf symbol to read is just before the last\n   * code is written. At that time, 31*(n-2) bits have been written, just\n   * after 24*(n-2) bits have been consumed from sym_buf. sym_buf starts at\n   * 8*n bits into pending_buf. (Note that the symbol buffer fills when n-1\n   * symbols are written.) The closest the writing gets to what is unread is\n   * then n+14 bits. Here n is lit_bufsize, which is 16384 by default, and\n   * can range from 128 to 32768.\n   *\n   * Therefore, at a minimum, there are 142 bits of space between what is\n   * written and what is read in the overlain buffers, so the symbols cannot\n   * be overwritten by the compressed data. That space is actually 139 bits,\n   * due to the three-bit fixed-code block header.\n   *\n   * That covers the case where either Z_FIXED is specified, forcing fixed\n   * codes, or when the use of fixed codes is chosen, because that choice\n   * results in a smaller compressed block than dynamic codes. That latter\n   * condition then assures that the above analysis also covers all dynamic\n   * blocks. A dynamic-code block will only be chosen to be emitted if it has\n   * fewer bits than a fixed-code block would for the same set of symbols.\n   * Therefore its average symbol length is assured to be less than 31. So\n   * the compressed data for a dynamic block also cannot overwrite the\n   * symbols from which it is being constructed.\n   */\n\n  s.pending_buf_size = s.lit_bufsize * 4;\n  s.pending_buf = new Uint8Array(s.pending_buf_size);\n\n  // It is offset from `s.pending_buf` (size is `s.lit_bufsize * 2`)\n  //s->sym_buf = s->pending_buf + s->lit_bufsize;\n  s.sym_buf = s.lit_bufsize;\n\n  //s->sym_end = (s->lit_bufsize - 1) * 3;\n  s.sym_end = (s.lit_bufsize - 1) * 3;\n  /* We avoid equality with lit_bufsize*3 because of wraparound at 64K\n   * on 16 bit machines and because stored blocks are restricted to\n   * 64K-1 bytes.\n   */\n\n  s.level = level;\n  s.strategy = strategy;\n  s.method = method;\n\n  return deflateReset(strm);\n};\n\nconst deflateInit = (strm, level) => {\n\n  return deflateInit2(strm, level, Z_DEFLATED$2, MAX_WBITS$1, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY$1);\n};\n\n\n/* ========================================================================= */\nconst deflate$2 = (strm, flush) => {\n\n  if (deflateStateCheck(strm) || flush > Z_BLOCK$1 || flush < 0) {\n    return strm ? err(strm, Z_STREAM_ERROR$2) : Z_STREAM_ERROR$2;\n  }\n\n  const s = strm.state;\n\n  if (!strm.output ||\n      (strm.avail_in !== 0 && !strm.input) ||\n      (s.status === FINISH_STATE && flush !== Z_FINISH$3)) {\n    return err(strm, (strm.avail_out === 0) ? Z_BUF_ERROR$1 : Z_STREAM_ERROR$2);\n  }\n\n  const old_flush = s.last_flush;\n  s.last_flush = flush;\n\n  /* Flush as much pending output as possible */\n  if (s.pending !== 0) {\n    flush_pending(strm);\n    if (strm.avail_out === 0) {\n      /* Since avail_out is 0, deflate will be called again with\n       * more output space, but possibly with both pending and\n       * avail_in equal to zero. There won't be anything to do,\n       * but this is not an error situation so make sure we\n       * return OK instead of BUF_ERROR at next call of deflate:\n       */\n      s.last_flush = -1;\n      return Z_OK$3;\n    }\n\n    /* Make sure there is something to do and avoid duplicate consecutive\n     * flushes. For repeated and useless calls with Z_FINISH, we keep\n     * returning Z_STREAM_END instead of Z_BUF_ERROR.\n     */\n  } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) &&\n    flush !== Z_FINISH$3) {\n    return err(strm, Z_BUF_ERROR$1);\n  }\n\n  /* User must not provide more input after the first FINISH: */\n  if (s.status === FINISH_STATE && strm.avail_in !== 0) {\n    return err(strm, Z_BUF_ERROR$1);\n  }\n\n  /* Write the header */\n  if (s.status === INIT_STATE && s.wrap === 0) {\n    s.status = BUSY_STATE;\n  }\n  if (s.status === INIT_STATE) {\n    /* zlib header */\n    let header = (Z_DEFLATED$2 + ((s.w_bits - 8) << 4)) << 8;\n    let level_flags = -1;\n\n    if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {\n      level_flags = 0;\n    } else if (s.level < 6) {\n      level_flags = 1;\n    } else if (s.level === 6) {\n      level_flags = 2;\n    } else {\n      level_flags = 3;\n    }\n    header |= (level_flags << 6);\n    if (s.strstart !== 0) { header |= PRESET_DICT; }\n    header += 31 - (header % 31);\n\n    putShortMSB(s, header);\n\n    /* Save the adler32 of the preset dictionary: */\n    if (s.strstart !== 0) {\n      putShortMSB(s, strm.adler >>> 16);\n      putShortMSB(s, strm.adler & 0xffff);\n    }\n    strm.adler = 1; // adler32(0L, Z_NULL, 0);\n    s.status = BUSY_STATE;\n\n    /* Compression must start with an empty pending buffer */\n    flush_pending(strm);\n    if (s.pending !== 0) {\n      s.last_flush = -1;\n      return Z_OK$3;\n    }\n  }\n//#ifdef GZIP\n  if (s.status === GZIP_STATE) {\n    /* gzip header */\n    strm.adler = 0;  //crc32(0L, Z_NULL, 0);\n    put_byte(s, 31);\n    put_byte(s, 139);\n    put_byte(s, 8);\n    if (!s.gzhead) { // s->gzhead == Z_NULL\n      put_byte(s, 0);\n      put_byte(s, 0);\n      put_byte(s, 0);\n      put_byte(s, 0);\n      put_byte(s, 0);\n      put_byte(s, s.level === 9 ? 2 :\n                  (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                   4 : 0));\n      put_byte(s, OS_CODE);\n      s.status = BUSY_STATE;\n\n      /* Compression must start with an empty pending buffer */\n      flush_pending(strm);\n      if (s.pending !== 0) {\n        s.last_flush = -1;\n        return Z_OK$3;\n      }\n    }\n    else {\n      put_byte(s, (s.gzhead.text ? 1 : 0) +\n                  (s.gzhead.hcrc ? 2 : 0) +\n                  (!s.gzhead.extra ? 0 : 4) +\n                  (!s.gzhead.name ? 0 : 8) +\n                  (!s.gzhead.comment ? 0 : 16)\n      );\n      put_byte(s, s.gzhead.time & 0xff);\n      put_byte(s, (s.gzhead.time >> 8) & 0xff);\n      put_byte(s, (s.gzhead.time >> 16) & 0xff);\n      put_byte(s, (s.gzhead.time >> 24) & 0xff);\n      put_byte(s, s.level === 9 ? 2 :\n                  (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                   4 : 0));\n      put_byte(s, s.gzhead.os & 0xff);\n      if (s.gzhead.extra && s.gzhead.extra.length) {\n        put_byte(s, s.gzhead.extra.length & 0xff);\n        put_byte(s, (s.gzhead.extra.length >> 8) & 0xff);\n      }\n      if (s.gzhead.hcrc) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending, 0);\n      }\n      s.gzindex = 0;\n      s.status = EXTRA_STATE;\n    }\n  }\n  if (s.status === EXTRA_STATE) {\n    if (s.gzhead.extra/* != Z_NULL*/) {\n      let beg = s.pending;   /* start of bytes to update crc */\n      let left = (s.gzhead.extra.length & 0xffff) - s.gzindex;\n      while (s.pending + left > s.pending_buf_size) {\n        let copy = s.pending_buf_size - s.pending;\n        // zmemcpy(s.pending_buf + s.pending,\n        //    s.gzhead.extra + s.gzindex, copy);\n        s.pending_buf.set(s.gzhead.extra.subarray(s.gzindex, s.gzindex + copy), s.pending);\n        s.pending = s.pending_buf_size;\n        //--- HCRC_UPDATE(beg) ---//\n        if (s.gzhead.hcrc && s.pending > beg) {\n          strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n        }\n        //---//\n        s.gzindex += copy;\n        flush_pending(strm);\n        if (s.pending !== 0) {\n          s.last_flush = -1;\n          return Z_OK$3;\n        }\n        beg = 0;\n        left -= copy;\n      }\n      // JS specific: s.gzhead.extra may be TypedArray or Array for backward compatibility\n      //              TypedArray.slice and TypedArray.from don't exist in IE10-IE11\n      let gzhead_extra = new Uint8Array(s.gzhead.extra);\n      // zmemcpy(s->pending_buf + s->pending,\n      //     s->gzhead->extra + s->gzindex, left);\n      s.pending_buf.set(gzhead_extra.subarray(s.gzindex, s.gzindex + left), s.pending);\n      s.pending += left;\n      //--- HCRC_UPDATE(beg) ---//\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      //---//\n      s.gzindex = 0;\n    }\n    s.status = NAME_STATE;\n  }\n  if (s.status === NAME_STATE) {\n    if (s.gzhead.name/* != Z_NULL*/) {\n      let beg = s.pending;   /* start of bytes to update crc */\n      let val;\n      do {\n        if (s.pending === s.pending_buf_size) {\n          //--- HCRC_UPDATE(beg) ---//\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          //---//\n          flush_pending(strm);\n          if (s.pending !== 0) {\n            s.last_flush = -1;\n            return Z_OK$3;\n          }\n          beg = 0;\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.name.length) {\n          val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n      //--- HCRC_UPDATE(beg) ---//\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      //---//\n      s.gzindex = 0;\n    }\n    s.status = COMMENT_STATE;\n  }\n  if (s.status === COMMENT_STATE) {\n    if (s.gzhead.comment/* != Z_NULL*/) {\n      let beg = s.pending;   /* start of bytes to update crc */\n      let val;\n      do {\n        if (s.pending === s.pending_buf_size) {\n          //--- HCRC_UPDATE(beg) ---//\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          //---//\n          flush_pending(strm);\n          if (s.pending !== 0) {\n            s.last_flush = -1;\n            return Z_OK$3;\n          }\n          beg = 0;\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.comment.length) {\n          val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n      //--- HCRC_UPDATE(beg) ---//\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      //---//\n    }\n    s.status = HCRC_STATE;\n  }\n  if (s.status === HCRC_STATE) {\n    if (s.gzhead.hcrc) {\n      if (s.pending + 2 > s.pending_buf_size) {\n        flush_pending(strm);\n        if (s.pending !== 0) {\n          s.last_flush = -1;\n          return Z_OK$3;\n        }\n      }\n      put_byte(s, strm.adler & 0xff);\n      put_byte(s, (strm.adler >> 8) & 0xff);\n      strm.adler = 0; //crc32(0L, Z_NULL, 0);\n    }\n    s.status = BUSY_STATE;\n\n    /* Compression must start with an empty pending buffer */\n    flush_pending(strm);\n    if (s.pending !== 0) {\n      s.last_flush = -1;\n      return Z_OK$3;\n    }\n  }\n//#endif\n\n  /* Start a new block or continue the current one.\n   */\n  if (strm.avail_in !== 0 || s.lookahead !== 0 ||\n    (flush !== Z_NO_FLUSH$2 && s.status !== FINISH_STATE)) {\n    let bstate = s.level === 0 ? deflate_stored(s, flush) :\n                 s.strategy === Z_HUFFMAN_ONLY ? deflate_huff(s, flush) :\n                 s.strategy === Z_RLE ? deflate_rle(s, flush) :\n                 configuration_table[s.level].func(s, flush);\n\n    if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {\n      s.status = FINISH_STATE;\n    }\n    if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {\n      if (strm.avail_out === 0) {\n        s.last_flush = -1;\n        /* avoid BUF_ERROR next call, see above */\n      }\n      return Z_OK$3;\n      /* If flush != Z_NO_FLUSH && avail_out == 0, the next call\n       * of deflate should use the same flush parameter to make sure\n       * that the flush is complete. So we don't have to output an\n       * empty block here, this will be done at next call. This also\n       * ensures that for a very small output buffer, we emit at most\n       * one empty block.\n       */\n    }\n    if (bstate === BS_BLOCK_DONE) {\n      if (flush === Z_PARTIAL_FLUSH) {\n        _tr_align(s);\n      }\n      else if (flush !== Z_BLOCK$1) { /* FULL_FLUSH or SYNC_FLUSH */\n\n        _tr_stored_block(s, 0, 0, false);\n        /* For a full flush, this empty block will be recognized\n         * as a special marker by inflate_sync().\n         */\n        if (flush === Z_FULL_FLUSH$1) {\n          /*** CLEAR_HASH(s); ***/             /* forget history */\n          zero(s.head); // Fill with NIL (= 0);\n\n          if (s.lookahead === 0) {\n            s.strstart = 0;\n            s.block_start = 0;\n            s.insert = 0;\n          }\n        }\n      }\n      flush_pending(strm);\n      if (strm.avail_out === 0) {\n        s.last_flush = -1; /* avoid BUF_ERROR at next call, see above */\n        return Z_OK$3;\n      }\n    }\n  }\n\n  if (flush !== Z_FINISH$3) { return Z_OK$3; }\n  if (s.wrap <= 0) { return Z_STREAM_END$3; }\n\n  /* Write the trailer */\n  if (s.wrap === 2) {\n    put_byte(s, strm.adler & 0xff);\n    put_byte(s, (strm.adler >> 8) & 0xff);\n    put_byte(s, (strm.adler >> 16) & 0xff);\n    put_byte(s, (strm.adler >> 24) & 0xff);\n    put_byte(s, strm.total_in & 0xff);\n    put_byte(s, (strm.total_in >> 8) & 0xff);\n    put_byte(s, (strm.total_in >> 16) & 0xff);\n    put_byte(s, (strm.total_in >> 24) & 0xff);\n  }\n  else\n  {\n    putShortMSB(s, strm.adler >>> 16);\n    putShortMSB(s, strm.adler & 0xffff);\n  }\n\n  flush_pending(strm);\n  /* If avail_out is zero, the application will call deflate again\n   * to flush the rest.\n   */\n  if (s.wrap > 0) { s.wrap = -s.wrap; }\n  /* write the trailer only once! */\n  return s.pending !== 0 ? Z_OK$3 : Z_STREAM_END$3;\n};\n\n\nconst deflateEnd = (strm) => {\n\n  if (deflateStateCheck(strm)) {\n    return Z_STREAM_ERROR$2;\n  }\n\n  const status = strm.state.status;\n\n  strm.state = null;\n\n  return status === BUSY_STATE ? err(strm, Z_DATA_ERROR$2) : Z_OK$3;\n};\n\n\n/* =========================================================================\n * Initializes the compression dictionary from the given byte\n * sequence without producing any compressed output.\n */\nconst deflateSetDictionary = (strm, dictionary) => {\n\n  let dictLength = dictionary.length;\n\n  if (deflateStateCheck(strm)) {\n    return Z_STREAM_ERROR$2;\n  }\n\n  const s = strm.state;\n  const wrap = s.wrap;\n\n  if (wrap === 2 || (wrap === 1 && s.status !== INIT_STATE) || s.lookahead) {\n    return Z_STREAM_ERROR$2;\n  }\n\n  /* when using zlib wrappers, compute Adler-32 for provided dictionary */\n  if (wrap === 1) {\n    /* adler32(strm->adler, dictionary, dictLength); */\n    strm.adler = adler32_1(strm.adler, dictionary, dictLength, 0);\n  }\n\n  s.wrap = 0;   /* avoid computing Adler-32 in read_buf */\n\n  /* if dictionary would fill window, just replace the history */\n  if (dictLength >= s.w_size) {\n    if (wrap === 0) {            /* already empty otherwise */\n      /*** CLEAR_HASH(s); ***/\n      zero(s.head); // Fill with NIL (= 0);\n      s.strstart = 0;\n      s.block_start = 0;\n      s.insert = 0;\n    }\n    /* use the tail */\n    // dictionary = dictionary.slice(dictLength - s.w_size);\n    let tmpDict = new Uint8Array(s.w_size);\n    tmpDict.set(dictionary.subarray(dictLength - s.w_size, dictLength), 0);\n    dictionary = tmpDict;\n    dictLength = s.w_size;\n  }\n  /* insert dictionary into window and hash */\n  const avail = strm.avail_in;\n  const next = strm.next_in;\n  const input = strm.input;\n  strm.avail_in = dictLength;\n  strm.next_in = 0;\n  strm.input = dictionary;\n  fill_window(s);\n  while (s.lookahead >= MIN_MATCH) {\n    let str = s.strstart;\n    let n = s.lookahead - (MIN_MATCH - 1);\n    do {\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n      s.ins_h = HASH(s, s.ins_h, s.window[str + MIN_MATCH - 1]);\n\n      s.prev[str & s.w_mask] = s.head[s.ins_h];\n\n      s.head[s.ins_h] = str;\n      str++;\n    } while (--n);\n    s.strstart = str;\n    s.lookahead = MIN_MATCH - 1;\n    fill_window(s);\n  }\n  s.strstart += s.lookahead;\n  s.block_start = s.strstart;\n  s.insert = s.lookahead;\n  s.lookahead = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  strm.next_in = next;\n  strm.input = input;\n  strm.avail_in = avail;\n  s.wrap = wrap;\n  return Z_OK$3;\n};\n\n\nvar deflateInit_1 = deflateInit;\nvar deflateInit2_1 = deflateInit2;\nvar deflateReset_1 = deflateReset;\nvar deflateResetKeep_1 = deflateResetKeep;\nvar deflateSetHeader_1 = deflateSetHeader;\nvar deflate_2$1 = deflate$2;\nvar deflateEnd_1 = deflateEnd;\nvar deflateSetDictionary_1 = deflateSetDictionary;\nvar deflateInfo = 'pako deflate (from Nodeca project)';\n\n/* Not implemented\nmodule.exports.deflateBound = deflateBound;\nmodule.exports.deflateCopy = deflateCopy;\nmodule.exports.deflateGetDictionary = deflateGetDictionary;\nmodule.exports.deflateParams = deflateParams;\nmodule.exports.deflatePending = deflatePending;\nmodule.exports.deflatePrime = deflatePrime;\nmodule.exports.deflateTune = deflateTune;\n*/\n\nvar deflate_1$2 = {\n\tdeflateInit: deflateInit_1,\n\tdeflateInit2: deflateInit2_1,\n\tdeflateReset: deflateReset_1,\n\tdeflateResetKeep: deflateResetKeep_1,\n\tdeflateSetHeader: deflateSetHeader_1,\n\tdeflate: deflate_2$1,\n\tdeflateEnd: deflateEnd_1,\n\tdeflateSetDictionary: deflateSetDictionary_1,\n\tdeflateInfo: deflateInfo\n};\n\nconst _has = (obj, key) => {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n};\n\nvar assign = function (obj /*from1, from2, from3, ...*/) {\n  const sources = Array.prototype.slice.call(arguments, 1);\n  while (sources.length) {\n    const source = sources.shift();\n    if (!source) { continue; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be non-object');\n    }\n\n    for (const p in source) {\n      if (_has(source, p)) {\n        obj[p] = source[p];\n      }\n    }\n  }\n\n  return obj;\n};\n\n\n// Join array of chunks to single array.\nvar flattenChunks = (chunks) => {\n  // calculate data length\n  let len = 0;\n\n  for (let i = 0, l = chunks.length; i < l; i++) {\n    len += chunks[i].length;\n  }\n\n  // join chunks\n  const result = new Uint8Array(len);\n\n  for (let i = 0, pos = 0, l = chunks.length; i < l; i++) {\n    let chunk = chunks[i];\n    result.set(chunk, pos);\n    pos += chunk.length;\n  }\n\n  return result;\n};\n\nvar common = {\n\tassign: assign,\n\tflattenChunks: flattenChunks\n};\n\n// String encode/decode helpers\n\n\n// Quick check if we can use fast array to bin string conversion\n//\n// - apply(Array) can fail on Android 2.2\n// - apply(Uint8Array) can fail on iOS 5.1 Safari\n//\nlet STR_APPLY_UIA_OK = true;\n\ntry { String.fromCharCode.apply(null, new Uint8Array(1)); } catch (__) { STR_APPLY_UIA_OK = false; }\n\n\n// Table with utf8 lengths (calculated by first byte of sequence)\n// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\n// because max possible codepoint is 0x10ffff\nconst _utf8len = new Uint8Array(256);\nfor (let q = 0; q < 256; q++) {\n  _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);\n}\n_utf8len[254] = _utf8len[254] = 1; // Invalid sequence start\n\n\n// convert string to array (typed, when possible)\nvar string2buf = (str) => {\n  if (typeof TextEncoder === 'function' && TextEncoder.prototype.encode) {\n    return new TextEncoder().encode(str);\n  }\n\n  let buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;\n\n  // count binary size\n  for (m_pos = 0; m_pos < str_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n  }\n\n  // allocate buffer\n  buf = new Uint8Array(buf_len);\n\n  // convert\n  for (i = 0, m_pos = 0; i < buf_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    if (c < 0x80) {\n      /* one byte */\n      buf[i++] = c;\n    } else if (c < 0x800) {\n      /* two bytes */\n      buf[i++] = 0xC0 | (c >>> 6);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else if (c < 0x10000) {\n      /* three bytes */\n      buf[i++] = 0xE0 | (c >>> 12);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else {\n      /* four bytes */\n      buf[i++] = 0xf0 | (c >>> 18);\n      buf[i++] = 0x80 | (c >>> 12 & 0x3f);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    }\n  }\n\n  return buf;\n};\n\n// Helper\nconst buf2binstring = (buf, len) => {\n  // On Chrome, the arguments in a function call that are allowed is `65534`.\n  // If the length of the buffer is smaller than that, we can use this optimization,\n  // otherwise we will take a slower path.\n  if (len < 65534) {\n    if (buf.subarray && STR_APPLY_UIA_OK) {\n      return String.fromCharCode.apply(null, buf.length === len ? buf : buf.subarray(0, len));\n    }\n  }\n\n  let result = '';\n  for (let i = 0; i < len; i++) {\n    result += String.fromCharCode(buf[i]);\n  }\n  return result;\n};\n\n\n// convert array to string\nvar buf2string = (buf, max) => {\n  const len = max || buf.length;\n\n  if (typeof TextDecoder === 'function' && TextDecoder.prototype.decode) {\n    return new TextDecoder().decode(buf.subarray(0, max));\n  }\n\n  let i, out;\n\n  // Reserve max possible length (2 words per char)\n  // NB: by unknown reasons, Array is significantly faster for\n  //     String.fromCharCode.apply than Uint16Array.\n  const utf16buf = new Array(len * 2);\n\n  for (out = 0, i = 0; i < len;) {\n    let c = buf[i++];\n    // quick process ascii\n    if (c < 0x80) { utf16buf[out++] = c; continue; }\n\n    let c_len = _utf8len[c];\n    // skip 5 & 6 byte codes\n    if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len - 1; continue; }\n\n    // apply mask on first byte\n    c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;\n    // join the rest\n    while (c_len > 1 && i < len) {\n      c = (c << 6) | (buf[i++] & 0x3f);\n      c_len--;\n    }\n\n    // terminated by end of string?\n    if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }\n\n    if (c < 0x10000) {\n      utf16buf[out++] = c;\n    } else {\n      c -= 0x10000;\n      utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);\n      utf16buf[out++] = 0xdc00 | (c & 0x3ff);\n    }\n  }\n\n  return buf2binstring(utf16buf, out);\n};\n\n\n// Calculate max possible position in utf8 buffer,\n// that will not break sequence. If that's not possible\n// - (very small limits) return max size as is.\n//\n// buf[] - utf8 bytes array\n// max   - length limit (mandatory);\nvar utf8border = (buf, max) => {\n\n  max = max || buf.length;\n  if (max > buf.length) { max = buf.length; }\n\n  // go back from last position, until start of sequence found\n  let pos = max - 1;\n  while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }\n\n  // Very small and broken sequence,\n  // return max, because we should return something anyway.\n  if (pos < 0) { return max; }\n\n  // If we came to start of buffer - that means buffer is too small,\n  // return max too.\n  if (pos === 0) { return max; }\n\n  return (pos + _utf8len[buf[pos]] > max) ? pos : max;\n};\n\nvar strings = {\n\tstring2buf: string2buf,\n\tbuf2string: buf2string,\n\tutf8border: utf8border\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction ZStream() {\n  /* next input byte */\n  this.input = null; // JS specific, because we have no pointers\n  this.next_in = 0;\n  /* number of bytes available at input */\n  this.avail_in = 0;\n  /* total number of input bytes read so far */\n  this.total_in = 0;\n  /* next output byte should be put there */\n  this.output = null; // JS specific, because we have no pointers\n  this.next_out = 0;\n  /* remaining free space at output */\n  this.avail_out = 0;\n  /* total number of bytes output so far */\n  this.total_out = 0;\n  /* last error message, NULL if no error */\n  this.msg = ''/*Z_NULL*/;\n  /* not visible by applications */\n  this.state = null;\n  /* best guess about the data type: binary or text */\n  this.data_type = 2/*Z_UNKNOWN*/;\n  /* adler32 value of the uncompressed data */\n  this.adler = 0;\n}\n\nvar zstream = ZStream;\n\nconst toString$1 = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH: Z_NO_FLUSH$1, Z_SYNC_FLUSH, Z_FULL_FLUSH, Z_FINISH: Z_FINISH$2,\n  Z_OK: Z_OK$2, Z_STREAM_END: Z_STREAM_END$2,\n  Z_DEFAULT_COMPRESSION,\n  Z_DEFAULT_STRATEGY,\n  Z_DEFLATED: Z_DEFLATED$1\n} = constants$2;\n\n/* ===========================================================================*/\n\n\n/**\n * class Deflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[deflate]],\n * [[deflateRaw]] and [[gzip]].\n **/\n\n/* internal\n * Deflate.chunks -> Array\n *\n * Chunks of output data, if [[Deflate#onData]] not overridden.\n **/\n\n/**\n * Deflate.result -> Uint8Array\n *\n * Compressed result, generated by default [[Deflate#onData]]\n * and [[Deflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Deflate#push]] with `Z_FINISH` / `true` param).\n **/\n\n/**\n * Deflate.err -> Number\n *\n * Error code after deflate finished. 0 (Z_OK) on success.\n * You will not need it in real life, because deflate errors\n * are possible only on wrong options or bad `onData` / `onEnd`\n * custom handlers.\n **/\n\n/**\n * Deflate.msg -> String\n *\n * Error message, if [[Deflate.err]] != 0\n **/\n\n\n/**\n * new Deflate(options)\n * - options (Object): zlib deflate options.\n *\n * Creates new deflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `level`\n * - `windowBits`\n * - `memLevel`\n * - `strategy`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw deflate\n * - `gzip` (Boolean) - create gzip wrapper\n * - `header` (Object) - custom header for gzip\n *   - `text` (Boolean) - true if compressed data believed to be text\n *   - `time` (Number) - modification time, unix timestamp\n *   - `os` (Number) - operation system code\n *   - `extra` (Array) - array of bytes with extra data (max 65536)\n *   - `name` (String) - file name (binary string)\n *   - `comment` (String) - comment (binary string)\n *   - `hcrc` (Boolean) - true if header crc should be added\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n *   , chunk1 = new Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = new Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * const deflate = new pako.Deflate({ level: 3});\n *\n * deflate.push(chunk1, false);\n * deflate.push(chunk2, true);  // true -> last chunk\n *\n * if (deflate.err) { throw new Error(deflate.err); }\n *\n * console.log(deflate.result);\n * ```\n **/\nfunction Deflate$1(options) {\n  this.options = common.assign({\n    level: Z_DEFAULT_COMPRESSION,\n    method: Z_DEFLATED$1,\n    chunkSize: 16384,\n    windowBits: 15,\n    memLevel: 8,\n    strategy: Z_DEFAULT_STRATEGY\n  }, options || {});\n\n  let opt = this.options;\n\n  if (opt.raw && (opt.windowBits > 0)) {\n    opt.windowBits = -opt.windowBits;\n  }\n\n  else if (opt.gzip && (opt.windowBits > 0) && (opt.windowBits < 16)) {\n    opt.windowBits += 16;\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm = new zstream();\n  this.strm.avail_out = 0;\n\n  let status = deflate_1$2.deflateInit2(\n    this.strm,\n    opt.level,\n    opt.method,\n    opt.windowBits,\n    opt.memLevel,\n    opt.strategy\n  );\n\n  if (status !== Z_OK$2) {\n    throw new Error(messages[status]);\n  }\n\n  if (opt.header) {\n    deflate_1$2.deflateSetHeader(this.strm, opt.header);\n  }\n\n  if (opt.dictionary) {\n    let dict;\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      // If we need to compress text, change encoding to utf8.\n      dict = strings.string2buf(opt.dictionary);\n    } else if (toString$1.call(opt.dictionary) === '[object ArrayBuffer]') {\n      dict = new Uint8Array(opt.dictionary);\n    } else {\n      dict = opt.dictionary;\n    }\n\n    status = deflate_1$2.deflateSetDictionary(this.strm, dict);\n\n    if (status !== Z_OK$2) {\n      throw new Error(messages[status]);\n    }\n\n    this._dict_set = true;\n  }\n}\n\n/**\n * Deflate#push(data[, flush_mode]) -> Boolean\n * - data (Uint8Array|ArrayBuffer|String): input data. Strings will be\n *   converted to utf8 byte sequence.\n * - flush_mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with\n * new compressed chunks. Returns `true` on success. The last data block must\n * have `flush_mode` Z_FINISH (or `true`). That will flush internal pending\n * buffers and call [[Deflate#onEnd]].\n *\n * On fail call [[Deflate#onEnd]] with error code and return false.\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nDeflate$1.prototype.push = function (data, flush_mode) {\n  const strm = this.strm;\n  const chunkSize = this.options.chunkSize;\n  let status, _flush_mode;\n\n  if (this.ended) { return false; }\n\n  if (flush_mode === ~~flush_mode) _flush_mode = flush_mode;\n  else _flush_mode = flush_mode === true ? Z_FINISH$2 : Z_NO_FLUSH$1;\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // If we need to compress text, change encoding to utf8.\n    strm.input = strings.string2buf(data);\n  } else if (toString$1.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  for (;;) {\n    if (strm.avail_out === 0) {\n      strm.output = new Uint8Array(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    // Make sure avail_out > 6 to avoid repeating markers\n    if ((_flush_mode === Z_SYNC_FLUSH || _flush_mode === Z_FULL_FLUSH) && strm.avail_out <= 6) {\n      this.onData(strm.output.subarray(0, strm.next_out));\n      strm.avail_out = 0;\n      continue;\n    }\n\n    status = deflate_1$2.deflate(strm, _flush_mode);\n\n    // Ended => flush and finish\n    if (status === Z_STREAM_END$2) {\n      if (strm.next_out > 0) {\n        this.onData(strm.output.subarray(0, strm.next_out));\n      }\n      status = deflate_1$2.deflateEnd(this.strm);\n      this.onEnd(status);\n      this.ended = true;\n      return status === Z_OK$2;\n    }\n\n    // Flush if out buffer full\n    if (strm.avail_out === 0) {\n      this.onData(strm.output);\n      continue;\n    }\n\n    // Flush if requested and has data\n    if (_flush_mode > 0 && strm.next_out > 0) {\n      this.onData(strm.output.subarray(0, strm.next_out));\n      strm.avail_out = 0;\n      continue;\n    }\n\n    if (strm.avail_in === 0) break;\n  }\n\n  return true;\n};\n\n\n/**\n * Deflate#onData(chunk) -> Void\n * - chunk (Uint8Array): output data.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nDeflate$1.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Deflate#onEnd(status) -> Void\n * - status (Number): deflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called once after you tell deflate that the input stream is\n * complete (Z_FINISH). By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nDeflate$1.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK$2) {\n    this.result = common.flattenChunks(this.chunks);\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * deflate(data[, options]) -> Uint8Array\n * - data (Uint8Array|ArrayBuffer|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * Compress `data` with deflate algorithm and `options`.\n *\n * Supported options are:\n *\n * - level\n * - windowBits\n * - memLevel\n * - strategy\n * - dictionary\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n * const data = new Uint8Array([1,2,3,4,5,6,7,8,9]);\n *\n * console.log(pako.deflate(data));\n * ```\n **/\nfunction deflate$1(input, options) {\n  const deflator = new Deflate$1(options);\n\n  deflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (deflator.err) { throw deflator.msg || messages[deflator.err]; }\n\n  return deflator.result;\n}\n\n\n/**\n * deflateRaw(data[, options]) -> Uint8Array\n * - data (Uint8Array|ArrayBuffer|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction deflateRaw$1(input, options) {\n  options = options || {};\n  options.raw = true;\n  return deflate$1(input, options);\n}\n\n\n/**\n * gzip(data[, options]) -> Uint8Array\n * - data (Uint8Array|ArrayBuffer|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but create gzip wrapper instead of\n * deflate one.\n **/\nfunction gzip$1(input, options) {\n  options = options || {};\n  options.gzip = true;\n  return deflate$1(input, options);\n}\n\n\nvar Deflate_1$1 = Deflate$1;\nvar deflate_2 = deflate$1;\nvar deflateRaw_1$1 = deflateRaw$1;\nvar gzip_1$1 = gzip$1;\nvar constants$1 = constants$2;\n\nvar deflate_1$1 = {\n\tDeflate: Deflate_1$1,\n\tdeflate: deflate_2,\n\tdeflateRaw: deflateRaw_1$1,\n\tgzip: gzip_1$1,\n\tconstants: constants$1\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// See state defs from inflate.js\nconst BAD$1 = 16209;       /* got a data error -- remain here until reset */\nconst TYPE$1 = 16191;      /* i: waiting for type bits, including last-flag bit */\n\n/*\n   Decode literal, length, and distance codes and write out the resulting\n   literal and match bytes until either not enough input or output is\n   available, an end-of-block is encountered, or a data error is encountered.\n   When large enough input and output buffers are supplied to inflate(), for\n   example, a 16K input buffer and a 64K output buffer, more than 95% of the\n   inflate execution time is spent in this routine.\n\n   Entry assumptions:\n\n        state.mode === LEN\n        strm.avail_in >= 6\n        strm.avail_out >= 258\n        start >= strm.avail_out\n        state.bits < 8\n\n   On return, state.mode is one of:\n\n        LEN -- ran out of enough output space or enough available input\n        TYPE -- reached end of block code, inflate() to interpret next block\n        BAD -- error in block data\n\n   Notes:\n\n    - The maximum input bits used by a length/distance pair is 15 bits for the\n      length code, 5 bits for the length extra, 15 bits for the distance code,\n      and 13 bits for the distance extra.  This totals 48 bits, or six bytes.\n      Therefore if strm.avail_in >= 6, then there is enough input to avoid\n      checking for available input while decoding.\n\n    - The maximum bytes that a single length/distance pair can output is 258\n      bytes, which is the maximum length that can be coded.  inflate_fast()\n      requires strm.avail_out >= 258 for each loop to avoid checking for\n      output space.\n */\nvar inffast = function inflate_fast(strm, start) {\n  let _in;                    /* local strm.input */\n  let last;                   /* have enough input while in < last */\n  let _out;                   /* local strm.output */\n  let beg;                    /* inflate()'s initial strm.output */\n  let end;                    /* while out < end, enough space available */\n//#ifdef INFLATE_STRICT\n  let dmax;                   /* maximum distance from zlib header */\n//#endif\n  let wsize;                  /* window size or zero if not using window */\n  let whave;                  /* valid bytes in the window */\n  let wnext;                  /* window write index */\n  // Use `s_window` instead `window`, avoid conflict with instrumentation tools\n  let s_window;               /* allocated sliding window, if wsize != 0 */\n  let hold;                   /* local strm.hold */\n  let bits;                   /* local strm.bits */\n  let lcode;                  /* local strm.lencode */\n  let dcode;                  /* local strm.distcode */\n  let lmask;                  /* mask for first level of length codes */\n  let dmask;                  /* mask for first level of distance codes */\n  let here;                   /* retrieved table entry */\n  let op;                     /* code bits, operation, extra bits, or */\n                              /*  window position, window bytes to copy */\n  let len;                    /* match length, unused bytes */\n  let dist;                   /* match distance */\n  let from;                   /* where to copy match from */\n  let from_source;\n\n\n  let input, output; // JS specific, because we have no pointers\n\n  /* copy state to local variables */\n  const state = strm.state;\n  //here = state.here;\n  _in = strm.next_in;\n  input = strm.input;\n  last = _in + (strm.avail_in - 5);\n  _out = strm.next_out;\n  output = strm.output;\n  beg = _out - (start - strm.avail_out);\n  end = _out + (strm.avail_out - 257);\n//#ifdef INFLATE_STRICT\n  dmax = state.dmax;\n//#endif\n  wsize = state.wsize;\n  whave = state.whave;\n  wnext = state.wnext;\n  s_window = state.window;\n  hold = state.hold;\n  bits = state.bits;\n  lcode = state.lencode;\n  dcode = state.distcode;\n  lmask = (1 << state.lenbits) - 1;\n  dmask = (1 << state.distbits) - 1;\n\n\n  /* decode literals and length/distances until end-of-block or not enough\n     input data or output space */\n\n  top:\n  do {\n    if (bits < 15) {\n      hold += input[_in++] << bits;\n      bits += 8;\n      hold += input[_in++] << bits;\n      bits += 8;\n    }\n\n    here = lcode[hold & lmask];\n\n    dolen:\n    for (;;) { // Goto emulation\n      op = here >>> 24/*here.bits*/;\n      hold >>>= op;\n      bits -= op;\n      op = (here >>> 16) & 0xff/*here.op*/;\n      if (op === 0) {                          /* literal */\n        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n        //        \"inflate:         literal '%c'\\n\" :\n        //        \"inflate:         literal 0x%02x\\n\", here.val));\n        output[_out++] = here & 0xffff/*here.val*/;\n      }\n      else if (op & 16) {                     /* length base */\n        len = here & 0xffff/*here.val*/;\n        op &= 15;                           /* number of extra bits */\n        if (op) {\n          if (bits < op) {\n            hold += input[_in++] << bits;\n            bits += 8;\n          }\n          len += hold & ((1 << op) - 1);\n          hold >>>= op;\n          bits -= op;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", len));\n        if (bits < 15) {\n          hold += input[_in++] << bits;\n          bits += 8;\n          hold += input[_in++] << bits;\n          bits += 8;\n        }\n        here = dcode[hold & dmask];\n\n        dodist:\n        for (;;) { // goto emulation\n          op = here >>> 24/*here.bits*/;\n          hold >>>= op;\n          bits -= op;\n          op = (here >>> 16) & 0xff/*here.op*/;\n\n          if (op & 16) {                      /* distance base */\n            dist = here & 0xffff/*here.val*/;\n            op &= 15;                       /* number of extra bits */\n            if (bits < op) {\n              hold += input[_in++] << bits;\n              bits += 8;\n              if (bits < op) {\n                hold += input[_in++] << bits;\n                bits += 8;\n              }\n            }\n            dist += hold & ((1 << op) - 1);\n//#ifdef INFLATE_STRICT\n            if (dist > dmax) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD$1;\n              break top;\n            }\n//#endif\n            hold >>>= op;\n            bits -= op;\n            //Tracevv((stderr, \"inflate:         distance %u\\n\", dist));\n            op = _out - beg;                /* max distance in output */\n            if (dist > op) {                /* see if copy from window */\n              op = dist - op;               /* distance back in window */\n              if (op > whave) {\n                if (state.sane) {\n                  strm.msg = 'invalid distance too far back';\n                  state.mode = BAD$1;\n                  break top;\n                }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//                if (len <= op - whave) {\n//                  do {\n//                    output[_out++] = 0;\n//                  } while (--len);\n//                  continue top;\n//                }\n//                len -= op - whave;\n//                do {\n//                  output[_out++] = 0;\n//                } while (--op > whave);\n//                if (op === 0) {\n//                  from = _out - dist;\n//                  do {\n//                    output[_out++] = output[from++];\n//                  } while (--len);\n//                  continue top;\n//                }\n//#endif\n              }\n              from = 0; // window index\n              from_source = s_window;\n              if (wnext === 0) {           /* very common case */\n                from += wsize - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              else if (wnext < op) {      /* wrap around window */\n                from += wsize + wnext - op;\n                op -= wnext;\n                if (op < len) {         /* some from end of window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = 0;\n                  if (wnext < len) {  /* some from start of window */\n                    op = wnext;\n                    len -= op;\n                    do {\n                      output[_out++] = s_window[from++];\n                    } while (--op);\n                    from = _out - dist;      /* rest from output */\n                    from_source = output;\n                  }\n                }\n              }\n              else {                      /* contiguous in window */\n                from += wnext - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              while (len > 2) {\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                len -= 3;\n              }\n              if (len) {\n                output[_out++] = from_source[from++];\n                if (len > 1) {\n                  output[_out++] = from_source[from++];\n                }\n              }\n            }\n            else {\n              from = _out - dist;          /* copy direct from output */\n              do {                        /* minimum length is three */\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                len -= 3;\n              } while (len > 2);\n              if (len) {\n                output[_out++] = output[from++];\n                if (len > 1) {\n                  output[_out++] = output[from++];\n                }\n              }\n            }\n          }\n          else if ((op & 64) === 0) {          /* 2nd level distance code */\n            here = dcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n            continue dodist;\n          }\n          else {\n            strm.msg = 'invalid distance code';\n            state.mode = BAD$1;\n            break top;\n          }\n\n          break; // need to emulate goto via \"continue\"\n        }\n      }\n      else if ((op & 64) === 0) {              /* 2nd level length code */\n        here = lcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n        continue dolen;\n      }\n      else if (op & 32) {                     /* end-of-block */\n        //Tracevv((stderr, \"inflate:         end of block\\n\"));\n        state.mode = TYPE$1;\n        break top;\n      }\n      else {\n        strm.msg = 'invalid literal/length code';\n        state.mode = BAD$1;\n        break top;\n      }\n\n      break; // need to emulate goto via \"continue\"\n    }\n  } while (_in < last && _out < end);\n\n  /* return unused bytes (on entry, bits < 8, so in won't go too far back) */\n  len = bits >> 3;\n  _in -= len;\n  bits -= len << 3;\n  hold &= (1 << bits) - 1;\n\n  /* update state and return */\n  strm.next_in = _in;\n  strm.next_out = _out;\n  strm.avail_in = (_in < last ? 5 + (last - _in) : 5 - (_in - last));\n  strm.avail_out = (_out < end ? 257 + (end - _out) : 257 - (_out - end));\n  state.hold = hold;\n  state.bits = bits;\n  return;\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst MAXBITS = 15;\nconst ENOUGH_LENS$1 = 852;\nconst ENOUGH_DISTS$1 = 592;\n//const ENOUGH = (ENOUGH_LENS+ENOUGH_DISTS);\n\nconst CODES$1 = 0;\nconst LENS$1 = 1;\nconst DISTS$1 = 2;\n\nconst lbase = new Uint16Array([ /* Length codes 257..285 base */\n  3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,\n  35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0\n]);\n\nconst lext = new Uint8Array([ /* Length codes 257..285 extra */\n  16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,\n  19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78\n]);\n\nconst dbase = new Uint16Array([ /* Distance codes 0..29 base */\n  1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,\n  257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,\n  8193, 12289, 16385, 24577, 0, 0\n]);\n\nconst dext = new Uint8Array([ /* Distance codes 0..29 extra */\n  16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22,\n  23, 23, 24, 24, 25, 25, 26, 26, 27, 27,\n  28, 28, 29, 29, 64, 64\n]);\n\nconst inflate_table = (type, lens, lens_index, codes, table, table_index, work, opts) =>\n{\n  const bits = opts.bits;\n      //here = opts.here; /* table entry for duplication */\n\n  let len = 0;               /* a code's length in bits */\n  let sym = 0;               /* index of code symbols */\n  let min = 0, max = 0;          /* minimum and maximum code lengths */\n  let root = 0;              /* number of index bits for root table */\n  let curr = 0;              /* number of index bits for current table */\n  let drop = 0;              /* code bits to drop for sub-table */\n  let left = 0;                   /* number of prefix codes available */\n  let used = 0;              /* code entries in table used */\n  let huff = 0;              /* Huffman code */\n  let incr;              /* for incrementing code, index */\n  let fill;              /* index for replicating entries */\n  let low;               /* low bits for current root entry */\n  let mask;              /* mask for low root bits */\n  let next;             /* next available space in table */\n  let base = null;     /* base value table to use */\n//  let shoextra;    /* extra bits table to use */\n  let match;                  /* use base and extra for symbol >= match */\n  const count = new Uint16Array(MAXBITS + 1); //[MAXBITS+1];    /* number of codes of each length */\n  const offs = new Uint16Array(MAXBITS + 1); //[MAXBITS+1];     /* offsets in table for each length */\n  let extra = null;\n\n  let here_bits, here_op, here_val;\n\n  /*\n   Process a set of code lengths to create a canonical Huffman code.  The\n   code lengths are lens[0..codes-1].  Each length corresponds to the\n   symbols 0..codes-1.  The Huffman code is generated by first sorting the\n   symbols by length from short to long, and retaining the symbol order\n   for codes with equal lengths.  Then the code starts with all zero bits\n   for the first code of the shortest length, and the codes are integer\n   increments for the same length, and zeros are appended as the length\n   increases.  For the deflate format, these bits are stored backwards\n   from their more natural integer increment ordering, and so when the\n   decoding tables are built in the large loop below, the integer codes\n   are incremented backwards.\n\n   This routine assumes, but does not check, that all of the entries in\n   lens[] are in the range 0..MAXBITS.  The caller must assure this.\n   1..MAXBITS is interpreted as that code length.  zero means that that\n   symbol does not occur in this code.\n\n   The codes are sorted by computing a count of codes for each length,\n   creating from that a table of starting indices for each length in the\n   sorted table, and then entering the symbols in order in the sorted\n   table.  The sorted table is work[], with that space being provided by\n   the caller.\n\n   The length counts are used for other purposes as well, i.e. finding\n   the minimum and maximum length codes, determining if there are any\n   codes at all, checking for a valid set of lengths, and looking ahead\n   at length counts to determine sub-table sizes when building the\n   decoding tables.\n   */\n\n  /* accumulate lengths for codes (assumes lens[] all in 0..MAXBITS) */\n  for (len = 0; len <= MAXBITS; len++) {\n    count[len] = 0;\n  }\n  for (sym = 0; sym < codes; sym++) {\n    count[lens[lens_index + sym]]++;\n  }\n\n  /* bound code lengths, force root to be within code lengths */\n  root = bits;\n  for (max = MAXBITS; max >= 1; max--) {\n    if (count[max] !== 0) { break; }\n  }\n  if (root > max) {\n    root = max;\n  }\n  if (max === 0) {                     /* no symbols to code at all */\n    //table.op[opts.table_index] = 64;  //here.op = (var char)64;    /* invalid code marker */\n    //table.bits[opts.table_index] = 1;   //here.bits = (var char)1;\n    //table.val[opts.table_index++] = 0;   //here.val = (var short)0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n\n    //table.op[opts.table_index] = 64;\n    //table.bits[opts.table_index] = 1;\n    //table.val[opts.table_index++] = 0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n    opts.bits = 1;\n    return 0;     /* no symbols, but wait for decoding to report error */\n  }\n  for (min = 1; min < max; min++) {\n    if (count[min] !== 0) { break; }\n  }\n  if (root < min) {\n    root = min;\n  }\n\n  /* check for an over-subscribed or incomplete set of lengths */\n  left = 1;\n  for (len = 1; len <= MAXBITS; len++) {\n    left <<= 1;\n    left -= count[len];\n    if (left < 0) {\n      return -1;\n    }        /* over-subscribed */\n  }\n  if (left > 0 && (type === CODES$1 || max !== 1)) {\n    return -1;                      /* incomplete set */\n  }\n\n  /* generate offsets into symbol table for each length for sorting */\n  offs[1] = 0;\n  for (len = 1; len < MAXBITS; len++) {\n    offs[len + 1] = offs[len] + count[len];\n  }\n\n  /* sort symbols by length, by symbol order within each length */\n  for (sym = 0; sym < codes; sym++) {\n    if (lens[lens_index + sym] !== 0) {\n      work[offs[lens[lens_index + sym]]++] = sym;\n    }\n  }\n\n  /*\n   Create and fill in decoding tables.  In this loop, the table being\n   filled is at next and has curr index bits.  The code being used is huff\n   with length len.  That code is converted to an index by dropping drop\n   bits off of the bottom.  For codes where len is less than drop + curr,\n   those top drop + curr - len bits are incremented through all values to\n   fill the table with replicated entries.\n\n   root is the number of index bits for the root table.  When len exceeds\n   root, sub-tables are created pointed to by the root entry with an index\n   of the low root bits of huff.  This is saved in low to check for when a\n   new sub-table should be started.  drop is zero when the root table is\n   being filled, and drop is root when sub-tables are being filled.\n\n   When a new sub-table is needed, it is necessary to look ahead in the\n   code lengths to determine what size sub-table is needed.  The length\n   counts are used for this, and so count[] is decremented as codes are\n   entered in the tables.\n\n   used keeps track of how many table entries have been allocated from the\n   provided *table space.  It is checked for LENS and DIST tables against\n   the constants ENOUGH_LENS and ENOUGH_DISTS to guard against changes in\n   the initial root table size constants.  See the comments in inftrees.h\n   for more information.\n\n   sym increments through all symbols, and the loop terminates when\n   all codes of length max, i.e. all codes, have been processed.  This\n   routine permits incomplete codes, so another loop after this one fills\n   in the rest of the decoding tables with invalid code markers.\n   */\n\n  /* set up for code type */\n  // poor man optimization - use if-else instead of switch,\n  // to avoid deopts in old v8\n  if (type === CODES$1) {\n    base = extra = work;    /* dummy value--not used */\n    match = 20;\n\n  } else if (type === LENS$1) {\n    base = lbase;\n    extra = lext;\n    match = 257;\n\n  } else {                    /* DISTS */\n    base = dbase;\n    extra = dext;\n    match = 0;\n  }\n\n  /* initialize opts for loop */\n  huff = 0;                   /* starting code */\n  sym = 0;                    /* starting code symbol */\n  len = min;                  /* starting code length */\n  next = table_index;              /* current table to fill in */\n  curr = root;                /* current table index bits */\n  drop = 0;                   /* current bits to drop from code for index */\n  low = -1;                   /* trigger new sub-table when len > root */\n  used = 1 << root;          /* use root table entries */\n  mask = used - 1;            /* mask for comparing low */\n\n  /* check available table space */\n  if ((type === LENS$1 && used > ENOUGH_LENS$1) ||\n    (type === DISTS$1 && used > ENOUGH_DISTS$1)) {\n    return 1;\n  }\n\n  /* process all codes and make table entries */\n  for (;;) {\n    /* create table entry */\n    here_bits = len - drop;\n    if (work[sym] + 1 < match) {\n      here_op = 0;\n      here_val = work[sym];\n    }\n    else if (work[sym] >= match) {\n      here_op = extra[work[sym] - match];\n      here_val = base[work[sym] - match];\n    }\n    else {\n      here_op = 32 + 64;         /* end of block */\n      here_val = 0;\n    }\n\n    /* replicate for those indices with low len bits equal to huff */\n    incr = 1 << (len - drop);\n    fill = 1 << curr;\n    min = fill;                 /* save offset to next table */\n    do {\n      fill -= incr;\n      table[next + (huff >> drop) + fill] = (here_bits << 24) | (here_op << 16) | here_val |0;\n    } while (fill !== 0);\n\n    /* backwards increment the len-bit code huff */\n    incr = 1 << (len - 1);\n    while (huff & incr) {\n      incr >>= 1;\n    }\n    if (incr !== 0) {\n      huff &= incr - 1;\n      huff += incr;\n    } else {\n      huff = 0;\n    }\n\n    /* go to next symbol, update count, len */\n    sym++;\n    if (--count[len] === 0) {\n      if (len === max) { break; }\n      len = lens[lens_index + work[sym]];\n    }\n\n    /* create new sub-table if needed */\n    if (len > root && (huff & mask) !== low) {\n      /* if first time, transition to sub-tables */\n      if (drop === 0) {\n        drop = root;\n      }\n\n      /* increment past last table */\n      next += min;            /* here min is 1 << curr */\n\n      /* determine length of next table */\n      curr = len - drop;\n      left = 1 << curr;\n      while (curr + drop < max) {\n        left -= count[curr + drop];\n        if (left <= 0) { break; }\n        curr++;\n        left <<= 1;\n      }\n\n      /* check for enough space */\n      used += 1 << curr;\n      if ((type === LENS$1 && used > ENOUGH_LENS$1) ||\n        (type === DISTS$1 && used > ENOUGH_DISTS$1)) {\n        return 1;\n      }\n\n      /* point entry in root table to sub-table */\n      low = huff & mask;\n      /*table.op[low] = curr;\n      table.bits[low] = root;\n      table.val[low] = next - opts.table_index;*/\n      table[low] = (root << 24) | (curr << 16) | (next - table_index) |0;\n    }\n  }\n\n  /* fill in remaining table entry if code is incomplete (guaranteed to have\n   at most one remaining entry, since if the code is incomplete, the\n   maximum code length that was allowed to get this far is one bit) */\n  if (huff !== 0) {\n    //table.op[next + huff] = 64;            /* invalid code marker */\n    //table.bits[next + huff] = len - drop;\n    //table.val[next + huff] = 0;\n    table[next + huff] = ((len - drop) << 24) | (64 << 16) |0;\n  }\n\n  /* set return parameters */\n  //opts.table_index += used;\n  opts.bits = root;\n  return 0;\n};\n\n\nvar inftrees = inflate_table;\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n\n\n\n\n\nconst CODES = 0;\nconst LENS = 1;\nconst DISTS = 2;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_FINISH: Z_FINISH$1, Z_BLOCK, Z_TREES,\n  Z_OK: Z_OK$1, Z_STREAM_END: Z_STREAM_END$1, Z_NEED_DICT: Z_NEED_DICT$1, Z_STREAM_ERROR: Z_STREAM_ERROR$1, Z_DATA_ERROR: Z_DATA_ERROR$1, Z_MEM_ERROR: Z_MEM_ERROR$1, Z_BUF_ERROR,\n  Z_DEFLATED\n} = constants$2;\n\n\n/* STATES ====================================================================*/\n/* ===========================================================================*/\n\n\nconst    HEAD = 16180;       /* i: waiting for magic header */\nconst    FLAGS = 16181;      /* i: waiting for method and flags (gzip) */\nconst    TIME = 16182;       /* i: waiting for modification time (gzip) */\nconst    OS = 16183;         /* i: waiting for extra flags and operating system (gzip) */\nconst    EXLEN = 16184;      /* i: waiting for extra length (gzip) */\nconst    EXTRA = 16185;      /* i: waiting for extra bytes (gzip) */\nconst    NAME = 16186;       /* i: waiting for end of file name (gzip) */\nconst    COMMENT = 16187;    /* i: waiting for end of comment (gzip) */\nconst    HCRC = 16188;       /* i: waiting for header crc (gzip) */\nconst    DICTID = 16189;    /* i: waiting for dictionary check value */\nconst    DICT = 16190;      /* waiting for inflateSetDictionary() call */\nconst        TYPE = 16191;      /* i: waiting for type bits, including last-flag bit */\nconst        TYPEDO = 16192;    /* i: same, but skip check to exit inflate on new block */\nconst        STORED = 16193;    /* i: waiting for stored size (length and complement) */\nconst        COPY_ = 16194;     /* i/o: same as COPY below, but only first time in */\nconst        COPY = 16195;      /* i/o: waiting for input or output to copy stored block */\nconst        TABLE = 16196;     /* i: waiting for dynamic block table lengths */\nconst        LENLENS = 16197;   /* i: waiting for code length code lengths */\nconst        CODELENS = 16198;  /* i: waiting for length/lit and distance code lengths */\nconst            LEN_ = 16199;      /* i: same as LEN below, but only first time in */\nconst            LEN = 16200;       /* i: waiting for length/lit/eob code */\nconst            LENEXT = 16201;    /* i: waiting for length extra bits */\nconst            DIST = 16202;      /* i: waiting for distance code */\nconst            DISTEXT = 16203;   /* i: waiting for distance extra bits */\nconst            MATCH = 16204;     /* o: waiting for output space to copy string */\nconst            LIT = 16205;       /* o: waiting for output space to write literal */\nconst    CHECK = 16206;     /* i: waiting for 32-bit check value */\nconst    LENGTH = 16207;    /* i: waiting for 32-bit length (gzip) */\nconst    DONE = 16208;      /* finished check, done -- remain here until reset */\nconst    BAD = 16209;       /* got a data error -- remain here until reset */\nconst    MEM = 16210;       /* got an inflate() memory error -- remain here until reset */\nconst    SYNC = 16211;      /* looking for synchronization bytes to restart inflate() */\n\n/* ===========================================================================*/\n\n\n\nconst ENOUGH_LENS = 852;\nconst ENOUGH_DISTS = 592;\n//const ENOUGH =  (ENOUGH_LENS+ENOUGH_DISTS);\n\nconst MAX_WBITS = 15;\n/* 32K LZ77 window */\nconst DEF_WBITS = MAX_WBITS;\n\n\nconst zswap32 = (q) => {\n\n  return  (((q >>> 24) & 0xff) +\n          ((q >>> 8) & 0xff00) +\n          ((q & 0xff00) << 8) +\n          ((q & 0xff) << 24));\n};\n\n\nfunction InflateState() {\n  this.strm = null;           /* pointer back to this zlib stream */\n  this.mode = 0;              /* current inflate mode */\n  this.last = false;          /* true if processing last block */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip,\n                                 bit 2 true to validate check value */\n  this.havedict = false;      /* true if dictionary provided */\n  this.flags = 0;             /* gzip header method and flags (0 if zlib), or\n                                 -1 if raw or no header yet */\n  this.dmax = 0;              /* zlib header max distance (INFLATE_STRICT) */\n  this.check = 0;             /* protected copy of check value */\n  this.total = 0;             /* protected copy of output count */\n  // TODO: may be {}\n  this.head = null;           /* where to save gzip header information */\n\n  /* sliding window */\n  this.wbits = 0;             /* log base 2 of requested window size */\n  this.wsize = 0;             /* window size or zero if not using window */\n  this.whave = 0;             /* valid bytes in the window */\n  this.wnext = 0;             /* window write index */\n  this.window = null;         /* allocated sliding window, if needed */\n\n  /* bit accumulator */\n  this.hold = 0;              /* input bit accumulator */\n  this.bits = 0;              /* number of bits in \"in\" */\n\n  /* for string and stored block copying */\n  this.length = 0;            /* literal or length of data to copy */\n  this.offset = 0;            /* distance back to copy string from */\n\n  /* for table and code decoding */\n  this.extra = 0;             /* extra bits needed */\n\n  /* fixed and dynamic code tables */\n  this.lencode = null;          /* starting table for length/literal codes */\n  this.distcode = null;         /* starting table for distance codes */\n  this.lenbits = 0;           /* index bits for lencode */\n  this.distbits = 0;          /* index bits for distcode */\n\n  /* dynamic table building */\n  this.ncode = 0;             /* number of code length code lengths */\n  this.nlen = 0;              /* number of length code lengths */\n  this.ndist = 0;             /* number of distance code lengths */\n  this.have = 0;              /* number of code lengths in lens[] */\n  this.next = null;              /* next available space in codes[] */\n\n  this.lens = new Uint16Array(320); /* temporary storage for code lengths */\n  this.work = new Uint16Array(288); /* work area for code table building */\n\n  /*\n   because we don't have pointers in js, we use lencode and distcode directly\n   as buffers so we don't need codes\n  */\n  //this.codes = new Int32Array(ENOUGH);       /* space for code tables */\n  this.lendyn = null;              /* dynamic table for length/literal codes (JS specific) */\n  this.distdyn = null;             /* dynamic table for distance codes (JS specific) */\n  this.sane = 0;                   /* if false, allow invalid distance too far */\n  this.back = 0;                   /* bits back of last unprocessed length/lit */\n  this.was = 0;                    /* initial length of match */\n}\n\n\nconst inflateStateCheck = (strm) => {\n\n  if (!strm) {\n    return 1;\n  }\n  const state = strm.state;\n  if (!state || state.strm !== strm ||\n    state.mode < HEAD || state.mode > SYNC) {\n    return 1;\n  }\n  return 0;\n};\n\n\nconst inflateResetKeep = (strm) => {\n\n  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n  strm.total_in = strm.total_out = state.total = 0;\n  strm.msg = ''; /*Z_NULL*/\n  if (state.wrap) {       /* to support ill-conceived Java test suite */\n    strm.adler = state.wrap & 1;\n  }\n  state.mode = HEAD;\n  state.last = 0;\n  state.havedict = 0;\n  state.flags = -1;\n  state.dmax = 32768;\n  state.head = null/*Z_NULL*/;\n  state.hold = 0;\n  state.bits = 0;\n  //state.lencode = state.distcode = state.next = state.codes;\n  state.lencode = state.lendyn = new Int32Array(ENOUGH_LENS);\n  state.distcode = state.distdyn = new Int32Array(ENOUGH_DISTS);\n\n  state.sane = 1;\n  state.back = -1;\n  //Tracev((stderr, \"inflate: reset\\n\"));\n  return Z_OK$1;\n};\n\n\nconst inflateReset = (strm) => {\n\n  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n  state.wsize = 0;\n  state.whave = 0;\n  state.wnext = 0;\n  return inflateResetKeep(strm);\n\n};\n\n\nconst inflateReset2 = (strm, windowBits) => {\n  let wrap;\n\n  /* get the state */\n  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n\n  /* extract wrap request from windowBits parameter */\n  if (windowBits < 0) {\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n  else {\n    wrap = (windowBits >> 4) + 5;\n    if (windowBits < 48) {\n      windowBits &= 15;\n    }\n  }\n\n  /* set number of window bits, free window if different */\n  if (windowBits && (windowBits < 8 || windowBits > 15)) {\n    return Z_STREAM_ERROR$1;\n  }\n  if (state.window !== null && state.wbits !== windowBits) {\n    state.window = null;\n  }\n\n  /* update state and reset the rest of it */\n  state.wrap = wrap;\n  state.wbits = windowBits;\n  return inflateReset(strm);\n};\n\n\nconst inflateInit2 = (strm, windowBits) => {\n\n  if (!strm) { return Z_STREAM_ERROR$1; }\n  //strm.msg = Z_NULL;                 /* in case we return an error */\n\n  const state = new InflateState();\n\n  //if (state === Z_NULL) return Z_MEM_ERROR;\n  //Tracev((stderr, \"inflate: allocated\\n\"));\n  strm.state = state;\n  state.strm = strm;\n  state.window = null/*Z_NULL*/;\n  state.mode = HEAD;     /* to pass state test in inflateReset2() */\n  const ret = inflateReset2(strm, windowBits);\n  if (ret !== Z_OK$1) {\n    strm.state = null/*Z_NULL*/;\n  }\n  return ret;\n};\n\n\nconst inflateInit = (strm) => {\n\n  return inflateInit2(strm, DEF_WBITS);\n};\n\n\n/*\n Return state with length and distance decoding tables and index sizes set to\n fixed code decoding.  Normally this returns fixed tables from inffixed.h.\n If BUILDFIXED is defined, then instead this routine builds the tables the\n first time it's called, and returns those tables the first time and\n thereafter.  This reduces the size of the code by about 2K bytes, in\n exchange for a little execution time.  However, BUILDFIXED should not be\n used for threaded applications, since the rewriting of the tables and virgin\n may not be thread-safe.\n */\nlet virgin = true;\n\nlet lenfix, distfix; // We have no pointers in JS, so keep tables separate\n\n\nconst fixedtables = (state) => {\n\n  /* build fixed huffman tables if first call (may not be thread safe) */\n  if (virgin) {\n    lenfix = new Int32Array(512);\n    distfix = new Int32Array(32);\n\n    /* literal/length table */\n    let sym = 0;\n    while (sym < 144) { state.lens[sym++] = 8; }\n    while (sym < 256) { state.lens[sym++] = 9; }\n    while (sym < 280) { state.lens[sym++] = 7; }\n    while (sym < 288) { state.lens[sym++] = 8; }\n\n    inftrees(LENS,  state.lens, 0, 288, lenfix,   0, state.work, { bits: 9 });\n\n    /* distance table */\n    sym = 0;\n    while (sym < 32) { state.lens[sym++] = 5; }\n\n    inftrees(DISTS, state.lens, 0, 32,   distfix, 0, state.work, { bits: 5 });\n\n    /* do this just once */\n    virgin = false;\n  }\n\n  state.lencode = lenfix;\n  state.lenbits = 9;\n  state.distcode = distfix;\n  state.distbits = 5;\n};\n\n\n/*\n Update the window with the last wsize (normally 32K) bytes written before\n returning.  If window does not exist yet, create it.  This is only called\n when a window is already in use, or when output has been written during this\n inflate call, but the end of the deflate stream has not been reached yet.\n It is also called to create a window for dictionary data when a dictionary\n is loaded.\n\n Providing output buffers larger than 32K to inflate() should provide a speed\n advantage, since only the last 32K of output is copied to the sliding window\n upon return from inflate(), and since all distances after the first 32K of\n output will fall in the output data, making match copies simpler and faster.\n The advantage may be dependent on the size of the processor's data caches.\n */\nconst updatewindow = (strm, src, end, copy) => {\n\n  let dist;\n  const state = strm.state;\n\n  /* if it hasn't been done already, allocate space for the window */\n  if (state.window === null) {\n    state.wsize = 1 << state.wbits;\n    state.wnext = 0;\n    state.whave = 0;\n\n    state.window = new Uint8Array(state.wsize);\n  }\n\n  /* copy state->wsize or less output bytes into the circular window */\n  if (copy >= state.wsize) {\n    state.window.set(src.subarray(end - state.wsize, end), 0);\n    state.wnext = 0;\n    state.whave = state.wsize;\n  }\n  else {\n    dist = state.wsize - state.wnext;\n    if (dist > copy) {\n      dist = copy;\n    }\n    //zmemcpy(state->window + state->wnext, end - copy, dist);\n    state.window.set(src.subarray(end - copy, end - copy + dist), state.wnext);\n    copy -= dist;\n    if (copy) {\n      //zmemcpy(state->window, end - copy, copy);\n      state.window.set(src.subarray(end - copy, end), 0);\n      state.wnext = copy;\n      state.whave = state.wsize;\n    }\n    else {\n      state.wnext += dist;\n      if (state.wnext === state.wsize) { state.wnext = 0; }\n      if (state.whave < state.wsize) { state.whave += dist; }\n    }\n  }\n  return 0;\n};\n\n\nconst inflate$2 = (strm, flush) => {\n\n  let state;\n  let input, output;          // input/output buffers\n  let next;                   /* next input INDEX */\n  let put;                    /* next output INDEX */\n  let have, left;             /* available input and output */\n  let hold;                   /* bit buffer */\n  let bits;                   /* bits in bit buffer */\n  let _in, _out;              /* save starting available input and output */\n  let copy;                   /* number of stored or match bytes to copy */\n  let from;                   /* where to copy match bytes from */\n  let from_source;\n  let here = 0;               /* current decoding table entry */\n  let here_bits, here_op, here_val; // paked \"here\" denormalized (JS specific)\n  //let last;                   /* parent table entry */\n  let last_bits, last_op, last_val; // paked \"last\" denormalized (JS specific)\n  let len;                    /* length to copy for repeats, bits to drop */\n  let ret;                    /* return code */\n  const hbuf = new Uint8Array(4);    /* buffer for gzip header crc calculation */\n  let opts;\n\n  let n; // temporary variable for NEED_BITS\n\n  const order = /* permutation of code lengths */\n    new Uint8Array([ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ]);\n\n\n  if (inflateStateCheck(strm) || !strm.output ||\n      (!strm.input && strm.avail_in !== 0)) {\n    return Z_STREAM_ERROR$1;\n  }\n\n  state = strm.state;\n  if (state.mode === TYPE) { state.mode = TYPEDO; }    /* skip check */\n\n\n  //--- LOAD() ---\n  put = strm.next_out;\n  output = strm.output;\n  left = strm.avail_out;\n  next = strm.next_in;\n  input = strm.input;\n  have = strm.avail_in;\n  hold = state.hold;\n  bits = state.bits;\n  //---\n\n  _in = have;\n  _out = left;\n  ret = Z_OK$1;\n\n  inf_leave: // goto emulation\n  for (;;) {\n    switch (state.mode) {\n      case HEAD:\n        if (state.wrap === 0) {\n          state.mode = TYPEDO;\n          break;\n        }\n        //=== NEEDBITS(16);\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((state.wrap & 2) && hold === 0x8b1f) {  /* gzip header */\n          if (state.wbits === 0) {\n            state.wbits = 15;\n          }\n          state.check = 0/*crc32(0L, Z_NULL, 0)*/;\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 2, 0);\n          //===//\n\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          state.mode = FLAGS;\n          break;\n        }\n        if (state.head) {\n          state.head.done = false;\n        }\n        if (!(state.wrap & 1) ||   /* check if zlib header allowed */\n          (((hold & 0xff)/*BITS(8)*/ << 8) + (hold >> 8)) % 31) {\n          strm.msg = 'incorrect header check';\n          state.mode = BAD;\n          break;\n        }\n        if ((hold & 0x0f)/*BITS(4)*/ !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n        len = (hold & 0x0f)/*BITS(4)*/ + 8;\n        if (state.wbits === 0) {\n          state.wbits = len;\n        }\n        if (len > 15 || len > state.wbits) {\n          strm.msg = 'invalid window size';\n          state.mode = BAD;\n          break;\n        }\n\n        // !!! pako patch. Force use `options.windowBits` if passed.\n        // Required to always use max window size by default.\n        state.dmax = 1 << state.wbits;\n        //state.dmax = 1 << len;\n\n        state.flags = 0;               /* indicate zlib header */\n        //Tracev((stderr, \"inflate:   zlib header ok\\n\"));\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = hold & 0x200 ? DICTID : TYPE;\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        break;\n      case FLAGS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.flags = hold;\n        if ((state.flags & 0xff) !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        if (state.flags & 0xe000) {\n          strm.msg = 'unknown header flags set';\n          state.mode = BAD;\n          break;\n        }\n        if (state.head) {\n          state.head.text = ((hold >> 8) & 1);\n        }\n        if ((state.flags & 0x0200) && (state.wrap & 4)) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = TIME;\n        /* falls through */\n      case TIME:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.time = hold;\n        }\n        if ((state.flags & 0x0200) && (state.wrap & 4)) {\n          //=== CRC4(state.check, hold)\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          hbuf[2] = (hold >>> 16) & 0xff;\n          hbuf[3] = (hold >>> 24) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 4, 0);\n          //===\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = OS;\n        /* falls through */\n      case OS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.xflags = (hold & 0xff);\n          state.head.os = (hold >> 8);\n        }\n        if ((state.flags & 0x0200) && (state.wrap & 4)) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = EXLEN;\n        /* falls through */\n      case EXLEN:\n        if (state.flags & 0x0400) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length = hold;\n          if (state.head) {\n            state.head.extra_len = hold;\n          }\n          if ((state.flags & 0x0200) && (state.wrap & 4)) {\n            //=== CRC2(state.check, hold);\n            hbuf[0] = hold & 0xff;\n            hbuf[1] = (hold >>> 8) & 0xff;\n            state.check = crc32_1(state.check, hbuf, 2, 0);\n            //===//\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        else if (state.head) {\n          state.head.extra = null/*Z_NULL*/;\n        }\n        state.mode = EXTRA;\n        /* falls through */\n      case EXTRA:\n        if (state.flags & 0x0400) {\n          copy = state.length;\n          if (copy > have) { copy = have; }\n          if (copy) {\n            if (state.head) {\n              len = state.head.extra_len - state.length;\n              if (!state.head.extra) {\n                // Use untyped array for more convenient processing later\n                state.head.extra = new Uint8Array(state.head.extra_len);\n              }\n              state.head.extra.set(\n                input.subarray(\n                  next,\n                  // extra field is limited to 65536 bytes\n                  // - no need for additional size check\n                  next + copy\n                ),\n                /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/\n                len\n              );\n              //zmemcpy(state.head.extra + len, next,\n              //        len + copy > state.head.extra_max ?\n              //        state.head.extra_max - len : copy);\n            }\n            if ((state.flags & 0x0200) && (state.wrap & 4)) {\n              state.check = crc32_1(state.check, input, copy, next);\n            }\n            have -= copy;\n            next += copy;\n            state.length -= copy;\n          }\n          if (state.length) { break inf_leave; }\n        }\n        state.length = 0;\n        state.mode = NAME;\n        /* falls through */\n      case NAME:\n        if (state.flags & 0x0800) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            // TODO: 2 or 1 bytes?\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.name_max*/)) {\n              state.head.name += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n\n          if ((state.flags & 0x0200) && (state.wrap & 4)) {\n            state.check = crc32_1(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.name = null;\n        }\n        state.length = 0;\n        state.mode = COMMENT;\n        /* falls through */\n      case COMMENT:\n        if (state.flags & 0x1000) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.comm_max*/)) {\n              state.head.comment += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n          if ((state.flags & 0x0200) && (state.wrap & 4)) {\n            state.check = crc32_1(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.comment = null;\n        }\n        state.mode = HCRC;\n        /* falls through */\n      case HCRC:\n        if (state.flags & 0x0200) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if ((state.wrap & 4) && hold !== (state.check & 0xffff)) {\n            strm.msg = 'header crc mismatch';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        if (state.head) {\n          state.head.hcrc = ((state.flags >> 9) & 1);\n          state.head.done = true;\n        }\n        strm.adler = state.check = 0;\n        state.mode = TYPE;\n        break;\n      case DICTID:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        strm.adler = state.check = zswap32(hold);\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = DICT;\n        /* falls through */\n      case DICT:\n        if (state.havedict === 0) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          return Z_NEED_DICT$1;\n        }\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = TYPE;\n        /* falls through */\n      case TYPE:\n        if (flush === Z_BLOCK || flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case TYPEDO:\n        if (state.last) {\n          //--- BYTEBITS() ---//\n          hold >>>= bits & 7;\n          bits -= bits & 7;\n          //---//\n          state.mode = CHECK;\n          break;\n        }\n        //=== NEEDBITS(3); */\n        while (bits < 3) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.last = (hold & 0x01)/*BITS(1)*/;\n        //--- DROPBITS(1) ---//\n        hold >>>= 1;\n        bits -= 1;\n        //---//\n\n        switch ((hold & 0x03)/*BITS(2)*/) {\n          case 0:                             /* stored block */\n            //Tracev((stderr, \"inflate:     stored block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = STORED;\n            break;\n          case 1:                             /* fixed block */\n            fixedtables(state);\n            //Tracev((stderr, \"inflate:     fixed codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = LEN_;             /* decode codes */\n            if (flush === Z_TREES) {\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n              break inf_leave;\n            }\n            break;\n          case 2:                             /* dynamic block */\n            //Tracev((stderr, \"inflate:     dynamic codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = TABLE;\n            break;\n          case 3:\n            strm.msg = 'invalid block type';\n            state.mode = BAD;\n        }\n        //--- DROPBITS(2) ---//\n        hold >>>= 2;\n        bits -= 2;\n        //---//\n        break;\n      case STORED:\n        //--- BYTEBITS() ---// /* go to byte boundary */\n        hold >>>= bits & 7;\n        bits -= bits & 7;\n        //---//\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((hold & 0xffff) !== ((hold >>> 16) ^ 0xffff)) {\n          strm.msg = 'invalid stored block lengths';\n          state.mode = BAD;\n          break;\n        }\n        state.length = hold & 0xffff;\n        //Tracev((stderr, \"inflate:       stored length %u\\n\",\n        //        state.length));\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = COPY_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case COPY_:\n        state.mode = COPY;\n        /* falls through */\n      case COPY:\n        copy = state.length;\n        if (copy) {\n          if (copy > have) { copy = have; }\n          if (copy > left) { copy = left; }\n          if (copy === 0) { break inf_leave; }\n          //--- zmemcpy(put, next, copy); ---\n          output.set(input.subarray(next, next + copy), put);\n          //---//\n          have -= copy;\n          next += copy;\n          left -= copy;\n          put += copy;\n          state.length -= copy;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       stored end\\n\"));\n        state.mode = TYPE;\n        break;\n      case TABLE:\n        //=== NEEDBITS(14); */\n        while (bits < 14) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.nlen = (hold & 0x1f)/*BITS(5)*/ + 257;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ndist = (hold & 0x1f)/*BITS(5)*/ + 1;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ncode = (hold & 0x0f)/*BITS(4)*/ + 4;\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n//#ifndef PKZIP_BUG_WORKAROUND\n        if (state.nlen > 286 || state.ndist > 30) {\n          strm.msg = 'too many length or distance symbols';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracev((stderr, \"inflate:       table sizes ok\\n\"));\n        state.have = 0;\n        state.mode = LENLENS;\n        /* falls through */\n      case LENLENS:\n        while (state.have < state.ncode) {\n          //=== NEEDBITS(3);\n          while (bits < 3) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.lens[order[state.have++]] = (hold & 0x07);//BITS(3);\n          //--- DROPBITS(3) ---//\n          hold >>>= 3;\n          bits -= 3;\n          //---//\n        }\n        while (state.have < 19) {\n          state.lens[order[state.have++]] = 0;\n        }\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        //state.next = state.codes;\n        //state.lencode = state.next;\n        // Switch to use dynamic table\n        state.lencode = state.lendyn;\n        state.lenbits = 7;\n\n        opts = { bits: state.lenbits };\n        ret = inftrees(CODES, state.lens, 0, 19, state.lencode, 0, state.work, opts);\n        state.lenbits = opts.bits;\n\n        if (ret) {\n          strm.msg = 'invalid code lengths set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       code lengths ok\\n\"));\n        state.have = 0;\n        state.mode = CODELENS;\n        /* falls through */\n      case CODELENS:\n        while (state.have < state.nlen + state.ndist) {\n          for (;;) {\n            here = state.lencode[hold & ((1 << state.lenbits) - 1)];/*BITS(state.lenbits)*/\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          if (here_val < 16) {\n            //--- DROPBITS(here.bits) ---//\n            hold >>>= here_bits;\n            bits -= here_bits;\n            //---//\n            state.lens[state.have++] = here_val;\n          }\n          else {\n            if (here_val === 16) {\n              //=== NEEDBITS(here.bits + 2);\n              n = here_bits + 2;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              if (state.have === 0) {\n                strm.msg = 'invalid bit length repeat';\n                state.mode = BAD;\n                break;\n              }\n              len = state.lens[state.have - 1];\n              copy = 3 + (hold & 0x03);//BITS(2);\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n            }\n            else if (here_val === 17) {\n              //=== NEEDBITS(here.bits + 3);\n              n = here_bits + 3;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 3 + (hold & 0x07);//BITS(3);\n              //--- DROPBITS(3) ---//\n              hold >>>= 3;\n              bits -= 3;\n              //---//\n            }\n            else {\n              //=== NEEDBITS(here.bits + 7);\n              n = here_bits + 7;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 11 + (hold & 0x7f);//BITS(7);\n              //--- DROPBITS(7) ---//\n              hold >>>= 7;\n              bits -= 7;\n              //---//\n            }\n            if (state.have + copy > state.nlen + state.ndist) {\n              strm.msg = 'invalid bit length repeat';\n              state.mode = BAD;\n              break;\n            }\n            while (copy--) {\n              state.lens[state.have++] = len;\n            }\n          }\n        }\n\n        /* handle error breaks in while */\n        if (state.mode === BAD) { break; }\n\n        /* check for end-of-block code (better have one) */\n        if (state.lens[256] === 0) {\n          strm.msg = 'invalid code -- missing end-of-block';\n          state.mode = BAD;\n          break;\n        }\n\n        /* build code tables -- note: do not change the lenbits or distbits\n           values here (9 and 6) without reading the comments in inftrees.h\n           concerning the ENOUGH constants, which depend on those values */\n        state.lenbits = 9;\n\n        opts = { bits: state.lenbits };\n        ret = inftrees(LENS, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.lenbits = opts.bits;\n        // state.lencode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid literal/lengths set';\n          state.mode = BAD;\n          break;\n        }\n\n        state.distbits = 6;\n        //state.distcode.copy(state.codes);\n        // Switch to use dynamic table\n        state.distcode = state.distdyn;\n        opts = { bits: state.distbits };\n        ret = inftrees(DISTS, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.distbits = opts.bits;\n        // state.distcode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid distances set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, 'inflate:       codes ok\\n'));\n        state.mode = LEN_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case LEN_:\n        state.mode = LEN;\n        /* falls through */\n      case LEN:\n        if (have >= 6 && left >= 258) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          inffast(strm, _out);\n          //--- LOAD() ---\n          put = strm.next_out;\n          output = strm.output;\n          left = strm.avail_out;\n          next = strm.next_in;\n          input = strm.input;\n          have = strm.avail_in;\n          hold = state.hold;\n          bits = state.bits;\n          //---\n\n          if (state.mode === TYPE) {\n            state.back = -1;\n          }\n          break;\n        }\n        state.back = 0;\n        for (;;) {\n          here = state.lencode[hold & ((1 << state.lenbits) - 1)];  /*BITS(state.lenbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if (here_bits <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if (here_op && (here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.lencode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        state.length = here_val;\n        if (here_op === 0) {\n          //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n          //        \"inflate:         literal '%c'\\n\" :\n          //        \"inflate:         literal 0x%02x\\n\", here.val));\n          state.mode = LIT;\n          break;\n        }\n        if (here_op & 32) {\n          //Tracevv((stderr, \"inflate:         end of block\\n\"));\n          state.back = -1;\n          state.mode = TYPE;\n          break;\n        }\n        if (here_op & 64) {\n          strm.msg = 'invalid literal/length code';\n          state.mode = BAD;\n          break;\n        }\n        state.extra = here_op & 15;\n        state.mode = LENEXT;\n        /* falls through */\n      case LENEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", state.length));\n        state.was = state.length;\n        state.mode = DIST;\n        /* falls through */\n      case DIST:\n        for (;;) {\n          here = state.distcode[hold & ((1 << state.distbits) - 1)];/*BITS(state.distbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if ((here_bits) <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if ((here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.distcode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        if (here_op & 64) {\n          strm.msg = 'invalid distance code';\n          state.mode = BAD;\n          break;\n        }\n        state.offset = here_val;\n        state.extra = (here_op) & 15;\n        state.mode = DISTEXT;\n        /* falls through */\n      case DISTEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.offset += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n//#ifdef INFLATE_STRICT\n        if (state.offset > state.dmax) {\n          strm.msg = 'invalid distance too far back';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracevv((stderr, \"inflate:         distance %u\\n\", state.offset));\n        state.mode = MATCH;\n        /* falls through */\n      case MATCH:\n        if (left === 0) { break inf_leave; }\n        copy = _out - left;\n        if (state.offset > copy) {         /* copy from window */\n          copy = state.offset - copy;\n          if (copy > state.whave) {\n            if (state.sane) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break;\n            }\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//          Trace((stderr, \"inflate.c too far\\n\"));\n//          copy -= state.whave;\n//          if (copy > state.length) { copy = state.length; }\n//          if (copy > left) { copy = left; }\n//          left -= copy;\n//          state.length -= copy;\n//          do {\n//            output[put++] = 0;\n//          } while (--copy);\n//          if (state.length === 0) { state.mode = LEN; }\n//          break;\n//#endif\n          }\n          if (copy > state.wnext) {\n            copy -= state.wnext;\n            from = state.wsize - copy;\n          }\n          else {\n            from = state.wnext - copy;\n          }\n          if (copy > state.length) { copy = state.length; }\n          from_source = state.window;\n        }\n        else {                              /* copy from output */\n          from_source = output;\n          from = put - state.offset;\n          copy = state.length;\n        }\n        if (copy > left) { copy = left; }\n        left -= copy;\n        state.length -= copy;\n        do {\n          output[put++] = from_source[from++];\n        } while (--copy);\n        if (state.length === 0) { state.mode = LEN; }\n        break;\n      case LIT:\n        if (left === 0) { break inf_leave; }\n        output[put++] = state.length;\n        left--;\n        state.mode = LEN;\n        break;\n      case CHECK:\n        if (state.wrap) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            // Use '|' instead of '+' to make sure that result is signed\n            hold |= input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          _out -= left;\n          strm.total_out += _out;\n          state.total += _out;\n          if ((state.wrap & 4) && _out) {\n            strm.adler = state.check =\n                /*UPDATE_CHECK(state.check, put - _out, _out);*/\n                (state.flags ? crc32_1(state.check, output, _out, put - _out) : adler32_1(state.check, output, _out, put - _out));\n\n          }\n          _out = left;\n          // NB: crc32 stored as signed 32-bit int, zswap32 returns signed too\n          if ((state.wrap & 4) && (state.flags ? hold : zswap32(hold)) !== state.check) {\n            strm.msg = 'incorrect data check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   check matches trailer\\n\"));\n        }\n        state.mode = LENGTH;\n        /* falls through */\n      case LENGTH:\n        if (state.wrap && state.flags) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if ((state.wrap & 4) && hold !== (state.total & 0xffffffff)) {\n            strm.msg = 'incorrect length check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   length matches trailer\\n\"));\n        }\n        state.mode = DONE;\n        /* falls through */\n      case DONE:\n        ret = Z_STREAM_END$1;\n        break inf_leave;\n      case BAD:\n        ret = Z_DATA_ERROR$1;\n        break inf_leave;\n      case MEM:\n        return Z_MEM_ERROR$1;\n      case SYNC:\n        /* falls through */\n      default:\n        return Z_STREAM_ERROR$1;\n    }\n  }\n\n  // inf_leave <- here is real place for \"goto inf_leave\", emulated via \"break inf_leave\"\n\n  /*\n     Return from inflate(), updating the total counts and the check value.\n     If there was no progress during the inflate() call, return a buffer\n     error.  Call updatewindow() to create and/or update the window state.\n     Note: a memory error from inflate() is non-recoverable.\n   */\n\n  //--- RESTORE() ---\n  strm.next_out = put;\n  strm.avail_out = left;\n  strm.next_in = next;\n  strm.avail_in = have;\n  state.hold = hold;\n  state.bits = bits;\n  //---\n\n  if (state.wsize || (_out !== strm.avail_out && state.mode < BAD &&\n                      (state.mode < CHECK || flush !== Z_FINISH$1))) {\n    if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) ;\n  }\n  _in -= strm.avail_in;\n  _out -= strm.avail_out;\n  strm.total_in += _in;\n  strm.total_out += _out;\n  state.total += _out;\n  if ((state.wrap & 4) && _out) {\n    strm.adler = state.check = /*UPDATE_CHECK(state.check, strm.next_out - _out, _out);*/\n      (state.flags ? crc32_1(state.check, output, _out, strm.next_out - _out) : adler32_1(state.check, output, _out, strm.next_out - _out));\n  }\n  strm.data_type = state.bits + (state.last ? 64 : 0) +\n                    (state.mode === TYPE ? 128 : 0) +\n                    (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);\n  if (((_in === 0 && _out === 0) || flush === Z_FINISH$1) && ret === Z_OK$1) {\n    ret = Z_BUF_ERROR;\n  }\n  return ret;\n};\n\n\nconst inflateEnd = (strm) => {\n\n  if (inflateStateCheck(strm)) {\n    return Z_STREAM_ERROR$1;\n  }\n\n  let state = strm.state;\n  if (state.window) {\n    state.window = null;\n  }\n  strm.state = null;\n  return Z_OK$1;\n};\n\n\nconst inflateGetHeader = (strm, head) => {\n\n  /* check state */\n  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n  if ((state.wrap & 2) === 0) { return Z_STREAM_ERROR$1; }\n\n  /* save header structure */\n  state.head = head;\n  head.done = false;\n  return Z_OK$1;\n};\n\n\nconst inflateSetDictionary = (strm, dictionary) => {\n  const dictLength = dictionary.length;\n\n  let state;\n  let dictid;\n  let ret;\n\n  /* check state */\n  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR$1; }\n  state = strm.state;\n\n  if (state.wrap !== 0 && state.mode !== DICT) {\n    return Z_STREAM_ERROR$1;\n  }\n\n  /* check for correct dictionary identifier */\n  if (state.mode === DICT) {\n    dictid = 1; /* adler32(0, null, 0)*/\n    /* dictid = adler32(dictid, dictionary, dictLength); */\n    dictid = adler32_1(dictid, dictionary, dictLength, 0);\n    if (dictid !== state.check) {\n      return Z_DATA_ERROR$1;\n    }\n  }\n  /* copy dictionary to window using updatewindow(), which will amend the\n   existing dictionary if appropriate */\n  ret = updatewindow(strm, dictionary, dictLength, dictLength);\n  if (ret) {\n    state.mode = MEM;\n    return Z_MEM_ERROR$1;\n  }\n  state.havedict = 1;\n  // Tracev((stderr, \"inflate:   dictionary set\\n\"));\n  return Z_OK$1;\n};\n\n\nvar inflateReset_1 = inflateReset;\nvar inflateReset2_1 = inflateReset2;\nvar inflateResetKeep_1 = inflateResetKeep;\nvar inflateInit_1 = inflateInit;\nvar inflateInit2_1 = inflateInit2;\nvar inflate_2$1 = inflate$2;\nvar inflateEnd_1 = inflateEnd;\nvar inflateGetHeader_1 = inflateGetHeader;\nvar inflateSetDictionary_1 = inflateSetDictionary;\nvar inflateInfo = 'pako inflate (from Nodeca project)';\n\n/* Not implemented\nmodule.exports.inflateCodesUsed = inflateCodesUsed;\nmodule.exports.inflateCopy = inflateCopy;\nmodule.exports.inflateGetDictionary = inflateGetDictionary;\nmodule.exports.inflateMark = inflateMark;\nmodule.exports.inflatePrime = inflatePrime;\nmodule.exports.inflateSync = inflateSync;\nmodule.exports.inflateSyncPoint = inflateSyncPoint;\nmodule.exports.inflateUndermine = inflateUndermine;\nmodule.exports.inflateValidate = inflateValidate;\n*/\n\nvar inflate_1$2 = {\n\tinflateReset: inflateReset_1,\n\tinflateReset2: inflateReset2_1,\n\tinflateResetKeep: inflateResetKeep_1,\n\tinflateInit: inflateInit_1,\n\tinflateInit2: inflateInit2_1,\n\tinflate: inflate_2$1,\n\tinflateEnd: inflateEnd_1,\n\tinflateGetHeader: inflateGetHeader_1,\n\tinflateSetDictionary: inflateSetDictionary_1,\n\tinflateInfo: inflateInfo\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction GZheader() {\n  /* true if compressed data believed to be text */\n  this.text       = 0;\n  /* modification time */\n  this.time       = 0;\n  /* extra flags (not used when writing a gzip file) */\n  this.xflags     = 0;\n  /* operating system */\n  this.os         = 0;\n  /* pointer to extra field or Z_NULL if none */\n  this.extra      = null;\n  /* extra field length (valid if extra != Z_NULL) */\n  this.extra_len  = 0; // Actually, we don't need it in JS,\n                       // but leave for few code modifications\n\n  //\n  // Setup limits is not necessary because in js we should not preallocate memory\n  // for inflate use constant limit in 65536 bytes\n  //\n\n  /* space at extra (only when reading header) */\n  // this.extra_max  = 0;\n  /* pointer to zero-terminated file name or Z_NULL */\n  this.name       = '';\n  /* space at name (only when reading header) */\n  // this.name_max   = 0;\n  /* pointer to zero-terminated comment or Z_NULL */\n  this.comment    = '';\n  /* space at comment (only when reading header) */\n  // this.comm_max   = 0;\n  /* true if there was or will be a header crc */\n  this.hcrc       = 0;\n  /* true when done reading gzip header (not used when writing a gzip file) */\n  this.done       = false;\n}\n\nvar gzheader = GZheader;\n\nconst toString = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH, Z_FINISH,\n  Z_OK, Z_STREAM_END, Z_NEED_DICT, Z_STREAM_ERROR, Z_DATA_ERROR, Z_MEM_ERROR\n} = constants$2;\n\n/* ===========================================================================*/\n\n\n/**\n * class Inflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[inflate]]\n * and [[inflateRaw]].\n **/\n\n/* internal\n * inflate.chunks -> Array\n *\n * Chunks of output data, if [[Inflate#onData]] not overridden.\n **/\n\n/**\n * Inflate.result -> Uint8Array|String\n *\n * Uncompressed result, generated by default [[Inflate#onData]]\n * and [[Inflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Inflate#push]] with `Z_FINISH` / `true` param).\n **/\n\n/**\n * Inflate.err -> Number\n *\n * Error code after inflate finished. 0 (Z_OK) on success.\n * Should be checked if broken data possible.\n **/\n\n/**\n * Inflate.msg -> String\n *\n * Error message, if [[Inflate.err]] != 0\n **/\n\n\n/**\n * new Inflate(options)\n * - options (Object): zlib inflate options.\n *\n * Creates new inflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `windowBits`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw inflate\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n * By default, when no options set, autodetect deflate/gzip data format via\n * wrapper header.\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n * const chunk1 = new Uint8Array([1,2,3,4,5,6,7,8,9])\n * const chunk2 = new Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * const inflate = new pako.Inflate({ level: 3});\n *\n * inflate.push(chunk1, false);\n * inflate.push(chunk2, true);  // true -> last chunk\n *\n * if (inflate.err) { throw new Error(inflate.err); }\n *\n * console.log(inflate.result);\n * ```\n **/\nfunction Inflate$1(options) {\n  this.options = common.assign({\n    chunkSize: 1024 * 64,\n    windowBits: 15,\n    to: ''\n  }, options || {});\n\n  const opt = this.options;\n\n  // Force window size for `raw` data, if not set directly,\n  // because we have no header for autodetect.\n  if (opt.raw && (opt.windowBits >= 0) && (opt.windowBits < 16)) {\n    opt.windowBits = -opt.windowBits;\n    if (opt.windowBits === 0) { opt.windowBits = -15; }\n  }\n\n  // If `windowBits` not defined (and mode not raw) - set autodetect flag for gzip/deflate\n  if ((opt.windowBits >= 0) && (opt.windowBits < 16) &&\n      !(options && options.windowBits)) {\n    opt.windowBits += 32;\n  }\n\n  // Gzip header has no info about windows size, we can do autodetect only\n  // for deflate. So, if window size not set, force it to max when gzip possible\n  if ((opt.windowBits > 15) && (opt.windowBits < 48)) {\n    // bit 3 (16) -> gzipped data\n    // bit 4 (32) -> autodetect gzip/deflate\n    if ((opt.windowBits & 15) === 0) {\n      opt.windowBits |= 15;\n    }\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm   = new zstream();\n  this.strm.avail_out = 0;\n\n  let status  = inflate_1$2.inflateInit2(\n    this.strm,\n    opt.windowBits\n  );\n\n  if (status !== Z_OK) {\n    throw new Error(messages[status]);\n  }\n\n  this.header = new gzheader();\n\n  inflate_1$2.inflateGetHeader(this.strm, this.header);\n\n  // Setup dictionary\n  if (opt.dictionary) {\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      opt.dictionary = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      opt.dictionary = new Uint8Array(opt.dictionary);\n    }\n    if (opt.raw) { //In raw mode we need to set the dictionary early\n      status = inflate_1$2.inflateSetDictionary(this.strm, opt.dictionary);\n      if (status !== Z_OK) {\n        throw new Error(messages[status]);\n      }\n    }\n  }\n}\n\n/**\n * Inflate#push(data[, flush_mode]) -> Boolean\n * - data (Uint8Array|ArrayBuffer): input data\n * - flush_mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE\n *   flush modes. See constants. Skipped or `false` means Z_NO_FLUSH,\n *   `true` means Z_FINISH.\n *\n * Sends input data to inflate pipe, generating [[Inflate#onData]] calls with\n * new output chunks. Returns `true` on success. If end of stream detected,\n * [[Inflate#onEnd]] will be called.\n *\n * `flush_mode` is not needed for normal operation, because end of stream\n * detected automatically. You may try to use it for advanced things, but\n * this functionality was not tested.\n *\n * On fail call [[Inflate#onEnd]] with error code and return false.\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nInflate$1.prototype.push = function (data, flush_mode) {\n  const strm = this.strm;\n  const chunkSize = this.options.chunkSize;\n  const dictionary = this.options.dictionary;\n  let status, _flush_mode, last_avail_out;\n\n  if (this.ended) return false;\n\n  if (flush_mode === ~~flush_mode) _flush_mode = flush_mode;\n  else _flush_mode = flush_mode === true ? Z_FINISH : Z_NO_FLUSH;\n\n  // Convert data if needed\n  if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  for (;;) {\n    if (strm.avail_out === 0) {\n      strm.output = new Uint8Array(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    status = inflate_1$2.inflate(strm, _flush_mode);\n\n    if (status === Z_NEED_DICT && dictionary) {\n      status = inflate_1$2.inflateSetDictionary(strm, dictionary);\n\n      if (status === Z_OK) {\n        status = inflate_1$2.inflate(strm, _flush_mode);\n      } else if (status === Z_DATA_ERROR) {\n        // Replace code with more verbose\n        status = Z_NEED_DICT;\n      }\n    }\n\n    // Skip snyc markers if more data follows and not raw mode\n    while (strm.avail_in > 0 &&\n           status === Z_STREAM_END &&\n           strm.state.wrap > 0 &&\n           data[strm.next_in] !== 0)\n    {\n      inflate_1$2.inflateReset(strm);\n      status = inflate_1$2.inflate(strm, _flush_mode);\n    }\n\n    switch (status) {\n      case Z_STREAM_ERROR:\n      case Z_DATA_ERROR:\n      case Z_NEED_DICT:\n      case Z_MEM_ERROR:\n        this.onEnd(status);\n        this.ended = true;\n        return false;\n    }\n\n    // Remember real `avail_out` value, because we may patch out buffer content\n    // to align utf8 strings boundaries.\n    last_avail_out = strm.avail_out;\n\n    if (strm.next_out) {\n      if (strm.avail_out === 0 || status === Z_STREAM_END) {\n\n        if (this.options.to === 'string') {\n\n          let next_out_utf8 = strings.utf8border(strm.output, strm.next_out);\n\n          let tail = strm.next_out - next_out_utf8;\n          let utf8str = strings.buf2string(strm.output, next_out_utf8);\n\n          // move tail & realign counters\n          strm.next_out = tail;\n          strm.avail_out = chunkSize - tail;\n          if (tail) strm.output.set(strm.output.subarray(next_out_utf8, next_out_utf8 + tail), 0);\n\n          this.onData(utf8str);\n\n        } else {\n          this.onData(strm.output.length === strm.next_out ? strm.output : strm.output.subarray(0, strm.next_out));\n        }\n      }\n    }\n\n    // Must repeat iteration if out buffer is full\n    if (status === Z_OK && last_avail_out === 0) continue;\n\n    // Finalize if end of stream reached.\n    if (status === Z_STREAM_END) {\n      status = inflate_1$2.inflateEnd(this.strm);\n      this.onEnd(status);\n      this.ended = true;\n      return true;\n    }\n\n    if (strm.avail_in === 0) break;\n  }\n\n  return true;\n};\n\n\n/**\n * Inflate#onData(chunk) -> Void\n * - chunk (Uint8Array|String): output data. When string output requested,\n *   each chunk will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nInflate$1.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Inflate#onEnd(status) -> Void\n * - status (Number): inflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called either after you tell inflate that the input stream is\n * complete (Z_FINISH). By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nInflate$1.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK) {\n    if (this.options.to === 'string') {\n      this.result = this.chunks.join('');\n    } else {\n      this.result = common.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * inflate(data[, options]) -> Uint8Array|String\n * - data (Uint8Array|ArrayBuffer): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Decompress `data` with inflate/ungzip and `options`. Autodetect\n * format via wrapper header by default. That's why we don't provide\n * separate `ungzip` method.\n *\n * Supported options are:\n *\n * - windowBits\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako');\n * const input = pako.deflate(new Uint8Array([1,2,3,4,5,6,7,8,9]));\n * let output;\n *\n * try {\n *   output = pako.inflate(input);\n * } catch (err) {\n *   console.log(err);\n * }\n * ```\n **/\nfunction inflate$1(input, options) {\n  const inflator = new Inflate$1(options);\n\n  inflator.push(input);\n\n  // That will never happens, if you don't cheat with options :)\n  if (inflator.err) throw inflator.msg || messages[inflator.err];\n\n  return inflator.result;\n}\n\n\n/**\n * inflateRaw(data[, options]) -> Uint8Array|String\n * - data (Uint8Array|ArrayBuffer): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * The same as [[inflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction inflateRaw$1(input, options) {\n  options = options || {};\n  options.raw = true;\n  return inflate$1(input, options);\n}\n\n\n/**\n * ungzip(data[, options]) -> Uint8Array|String\n * - data (Uint8Array|ArrayBuffer): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Just shortcut to [[inflate]], because it autodetects format\n * by header.content. Done for convenience.\n **/\n\n\nvar Inflate_1$1 = Inflate$1;\nvar inflate_2 = inflate$1;\nvar inflateRaw_1$1 = inflateRaw$1;\nvar ungzip$1 = inflate$1;\nvar constants = constants$2;\n\nvar inflate_1$1 = {\n\tInflate: Inflate_1$1,\n\tinflate: inflate_2,\n\tinflateRaw: inflateRaw_1$1,\n\tungzip: ungzip$1,\n\tconstants: constants\n};\n\nconst { Deflate, deflate, deflateRaw, gzip } = deflate_1$1;\n\nconst { Inflate, inflate, inflateRaw, ungzip } = inflate_1$1;\n\n\n\nvar Deflate_1 = Deflate;\nvar deflate_1 = deflate;\nvar deflateRaw_1 = deflateRaw;\nvar gzip_1 = gzip;\nvar Inflate_1 = Inflate;\nvar inflate_1 = inflate;\nvar inflateRaw_1 = inflateRaw;\nvar ungzip_1 = ungzip;\nvar constants_1 = constants$2;\n\nvar pako = {\n\tDeflate: Deflate_1,\n\tdeflate: deflate_1,\n\tdeflateRaw: deflateRaw_1,\n\tgzip: gzip_1,\n\tInflate: Inflate_1,\n\tinflate: inflate_1,\n\tinflateRaw: inflateRaw_1,\n\tungzip: ungzip_1,\n\tconstants: constants_1\n};\n\nexport { Deflate_1 as Deflate, Inflate_1 as Inflate, constants_1 as constants, pako as default, deflate_1 as deflate, deflateRaw_1 as deflateRaw, gzip_1 as gzip, inflate_1 as inflate, inflateRaw_1 as inflateRaw, ungzip_1 as ungzip };\n","// A near direct copy of Ladislav Zezula's C implementation.\r\n// I left the comments out - if you wish to understand the algorithm, please check the C implementation at https://github.com/ladislav-zezula/StormLib/tree/master/src/pklib\r\n//\r\n// There are three key differences:\r\n//   1) It takes in a Uint8Array, and returns a Uint8Array, rather than using abstract read/write functions.\r\n//   2) The tables are generated once the first time explode() is used.\r\n//      I am not sure why the C implementation copies all of the data and regenerates the tables on every explode().\r\n//      Further more, I am not sure why they are generated at all, unlike the rest of data.\r\n//   3) There is no output circle buffer, the output is a normal JS number array that grows as it will, wrapped at the end with a Uint8Array.\r\n//      It's simple, and I don't think anything else will perform better in JS either way.\r\n\r\nconst CMP_BINARY = 0;\r\nconst CMP_ASCII = 1;\r\n\r\nclass TDcmpStruct {\r\n  ctype = 0;\r\n  outputPos = 0;\r\n  dsize_bits = 0;\r\n  dsize_mask = 0;\r\n  bit_buff = 0;\r\n  extra_bits = 0;\r\n  in_pos = 0;\r\n  in_buff: Uint8Array;\r\n  out_buff: number[] = [];\r\n\r\n  constructor(in_buff: Uint8Array) {\r\n    this.in_buff = in_buff;\r\n  }\r\n}\r\n\r\nconst PKDCL_OK = 0;\r\nconst PKDCL_STREAM_END = 1;\r\n\r\nconst DistBits = new Uint8Array([\r\n  0x02, 0x04, 0x04, 0x05, 0x05, 0x05, 0x05, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06,\r\n  0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07,\r\n  0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07,\r\n  0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08,\r\n]);\r\n\r\nconst DistCode = new Uint8Array([\r\n  0x03, 0x0D, 0x05, 0x19, 0x09, 0x11, 0x01, 0x3E, 0x1E, 0x2E, 0x0E, 0x36, 0x16, 0x26, 0x06, 0x3A,\r\n  0x1A, 0x2A, 0x0A, 0x32, 0x12, 0x22, 0x42, 0x02, 0x7C, 0x3C, 0x5C, 0x1C, 0x6C, 0x2C, 0x4C, 0x0C,\r\n  0x74, 0x34, 0x54, 0x14, 0x64, 0x24, 0x44, 0x04, 0x78, 0x38, 0x58, 0x18, 0x68, 0x28, 0x48, 0x08,\r\n  0xF0, 0x70, 0xB0, 0x30, 0xD0, 0x50, 0x90, 0x10, 0xE0, 0x60, 0xA0, 0x20, 0xC0, 0x40, 0x80, 0x00,\r\n]);\r\n\r\nconst ExLenBits = new Uint8Array([\r\n  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08,\r\n]);\r\n\r\nconst LenBase = new Uint16Array([\r\n  0x0000, 0x0001, 0x0002, 0x0003, 0x0004, 0x0005, 0x0006, 0x0007,\r\n  0x0008, 0x000A, 0x000E, 0x0016, 0x0026, 0x0046, 0x0086, 0x0106,\r\n]);\r\n\r\nconst LenBits = new Uint8Array([\r\n  0x03, 0x02, 0x03, 0x03, 0x04, 0x04, 0x04, 0x05, 0x05, 0x05, 0x05, 0x06, 0x06, 0x06, 0x07, 0x07,\r\n]);\r\n\r\nconst LenCode = new Uint8Array([\r\n  0x05, 0x03, 0x01, 0x06, 0x0A, 0x02, 0x0C, 0x14, 0x04, 0x18, 0x08, 0x30, 0x10, 0x20, 0x40, 0x00,\r\n]);\r\n\r\nconst ChBitsAsc = new Uint8Array([\r\n  0x0B, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x08, 0x07, 0x0C, 0x0C, 0x07, 0x0C, 0x0C,\r\n  0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0D, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C,\r\n  0x04, 0x0A, 0x08, 0x0C, 0x0A, 0x0C, 0x0A, 0x08, 0x07, 0x07, 0x08, 0x09, 0x07, 0x06, 0x07, 0x08,\r\n  0x07, 0x06, 0x07, 0x07, 0x07, 0x07, 0x08, 0x07, 0x07, 0x08, 0x08, 0x0C, 0x0B, 0x07, 0x09, 0x0B,\r\n  0x0C, 0x06, 0x07, 0x06, 0x06, 0x05, 0x07, 0x08, 0x08, 0x06, 0x0B, 0x09, 0x06, 0x07, 0x06, 0x06,\r\n  0x07, 0x0B, 0x06, 0x06, 0x06, 0x07, 0x09, 0x08, 0x09, 0x09, 0x0B, 0x08, 0x0B, 0x09, 0x0C, 0x08,\r\n  0x0C, 0x05, 0x06, 0x06, 0x06, 0x05, 0x06, 0x06, 0x06, 0x05, 0x0B, 0x07, 0x05, 0x06, 0x05, 0x05,\r\n  0x06, 0x0A, 0x05, 0x05, 0x05, 0x05, 0x08, 0x07, 0x08, 0x08, 0x0A, 0x0B, 0x0B, 0x0C, 0x0C, 0x0C,\r\n  0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D,\r\n  0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D,\r\n  0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D,\r\n  0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C,\r\n  0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C,\r\n  0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C,\r\n  0x0D, 0x0C, 0x0D, 0x0D, 0x0D, 0x0C, 0x0D, 0x0D, 0x0D, 0x0C, 0x0D, 0x0D, 0x0D, 0x0D, 0x0C, 0x0D,\r\n  0x0D, 0x0D, 0x0C, 0x0C, 0x0C, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D, 0x0D,\r\n]);\r\n\r\nconst ChCodeAsc = new Uint16Array([\r\n  0x0490, 0x0FE0, 0x07E0, 0x0BE0, 0x03E0, 0x0DE0, 0x05E0, 0x09E0,\r\n  0x01E0, 0x00B8, 0x0062, 0x0EE0, 0x06E0, 0x0022, 0x0AE0, 0x02E0,\r\n  0x0CE0, 0x04E0, 0x08E0, 0x00E0, 0x0F60, 0x0760, 0x0B60, 0x0360,\r\n  0x0D60, 0x0560, 0x1240, 0x0960, 0x0160, 0x0E60, 0x0660, 0x0A60,\r\n  0x000F, 0x0250, 0x0038, 0x0260, 0x0050, 0x0C60, 0x0390, 0x00D8,\r\n  0x0042, 0x0002, 0x0058, 0x01B0, 0x007C, 0x0029, 0x003C, 0x0098,\r\n  0x005C, 0x0009, 0x001C, 0x006C, 0x002C, 0x004C, 0x0018, 0x000C,\r\n  0x0074, 0x00E8, 0x0068, 0x0460, 0x0090, 0x0034, 0x00B0, 0x0710,\r\n  0x0860, 0x0031, 0x0054, 0x0011, 0x0021, 0x0017, 0x0014, 0x00A8,\r\n  0x0028, 0x0001, 0x0310, 0x0130, 0x003E, 0x0064, 0x001E, 0x002E,\r\n  0x0024, 0x0510, 0x000E, 0x0036, 0x0016, 0x0044, 0x0030, 0x00C8,\r\n  0x01D0, 0x00D0, 0x0110, 0x0048, 0x0610, 0x0150, 0x0060, 0x0088,\r\n  0x0FA0, 0x0007, 0x0026, 0x0006, 0x003A, 0x001B, 0x001A, 0x002A,\r\n  0x000A, 0x000B, 0x0210, 0x0004, 0x0013, 0x0032, 0x0003, 0x001D,\r\n  0x0012, 0x0190, 0x000D, 0x0015, 0x0005, 0x0019, 0x0008, 0x0078,\r\n  0x00F0, 0x0070, 0x0290, 0x0410, 0x0010, 0x07A0, 0x0BA0, 0x03A0,\r\n  0x0240, 0x1C40, 0x0C40, 0x1440, 0x0440, 0x1840, 0x0840, 0x1040,\r\n  0x0040, 0x1F80, 0x0F80, 0x1780, 0x0780, 0x1B80, 0x0B80, 0x1380,\r\n  0x0380, 0x1D80, 0x0D80, 0x1580, 0x0580, 0x1980, 0x0980, 0x1180,\r\n  0x0180, 0x1E80, 0x0E80, 0x1680, 0x0680, 0x1A80, 0x0A80, 0x1280,\r\n  0x0280, 0x1C80, 0x0C80, 0x1480, 0x0480, 0x1880, 0x0880, 0x1080,\r\n  0x0080, 0x1F00, 0x0F00, 0x1700, 0x0700, 0x1B00, 0x0B00, 0x1300,\r\n  0x0DA0, 0x05A0, 0x09A0, 0x01A0, 0x0EA0, 0x06A0, 0x0AA0, 0x02A0,\r\n  0x0CA0, 0x04A0, 0x08A0, 0x00A0, 0x0F20, 0x0720, 0x0B20, 0x0320,\r\n  0x0D20, 0x0520, 0x0920, 0x0120, 0x0E20, 0x0620, 0x0A20, 0x0220,\r\n  0x0C20, 0x0420, 0x0820, 0x0020, 0x0FC0, 0x07C0, 0x0BC0, 0x03C0,\r\n  0x0DC0, 0x05C0, 0x09C0, 0x01C0, 0x0EC0, 0x06C0, 0x0AC0, 0x02C0,\r\n  0x0CC0, 0x04C0, 0x08C0, 0x00C0, 0x0F40, 0x0740, 0x0B40, 0x0340,\r\n  0x0300, 0x0D40, 0x1D00, 0x0D00, 0x1500, 0x0540, 0x0500, 0x1900,\r\n  0x0900, 0x0940, 0x1100, 0x0100, 0x1E00, 0x0E00, 0x0140, 0x1600,\r\n  0x0600, 0x1A00, 0x0E40, 0x0640, 0x0A40, 0x0A00, 0x1200, 0x0200,\r\n  0x1C00, 0x0C00, 0x1400, 0x0400, 0x1800, 0x0800, 0x1000, 0x0000,\r\n]);\r\n\r\n// Generated on the first time explode() is used.\r\nlet generatedDecodeTabs = false;\r\nconst DistPosCodes = new Uint8Array(0x100);\r\nconst LengthCodes = new Uint8Array(0x100);\r\n\r\n// Same as above.\r\nlet generatedAscTabs = false;\r\nconst offs2C34 = new Uint8Array(0x100);\r\nconst offs2D34 = new Uint8Array(0x100);\r\nconst offs2E34 = new Uint8Array(0x80);\r\nconst offs2EB4 = new Uint8Array(0x100);\r\n\r\nfunction GenDecodeTabs(positions: Uint8Array, start_indexes: Uint8Array, length_bits: Uint8Array): void {\r\n  for (let i = 0, elements = start_indexes.length; i < elements; i++) {\r\n    const length = 1 << length_bits[i];\r\n\r\n    for (let index = start_indexes[i]; index < 0x100; index += length) {\r\n      positions[index] = i;\r\n    }\r\n  }\r\n}\r\n\r\nfunction GenAscTabs(): void {\r\n  let pChCodeAsc = 0xFF;\r\n  let acc, add;\r\n\r\n  for (let count = 0x00FF; pChCodeAsc >= 0; pChCodeAsc--, count--) {\r\n    const pChBitsAsc = count;\r\n    let bits_asc = ChBitsAsc[pChBitsAsc];\r\n\r\n    if (bits_asc <= 8) {\r\n      add = (1 << bits_asc);\r\n      acc = ChCodeAsc[pChCodeAsc];\r\n\r\n      do {\r\n        offs2C34[acc] = count;\r\n        acc += add;\r\n      } while (acc < 0x100);\r\n    } else if ((acc = (ChCodeAsc[pChCodeAsc] & 0xFF)) != 0) {\r\n      offs2C34[acc] = 0xFF;\r\n\r\n      if (ChCodeAsc[pChCodeAsc] & 0x3F) {\r\n        bits_asc -= 4;\r\n        ChBitsAsc[pChBitsAsc] = bits_asc;\r\n\r\n        add = (1 << bits_asc);\r\n        acc = ChCodeAsc[pChCodeAsc] >> 4;\r\n\r\n        do {\r\n          offs2D34[acc] = count;\r\n          acc += add;\r\n        } while (acc < 0x100);\r\n      } else {\r\n        bits_asc -= 6;\r\n        ChBitsAsc[pChBitsAsc] = bits_asc;\r\n\r\n        add = (1 << bits_asc);\r\n        acc = ChCodeAsc[pChCodeAsc] >> 6;\r\n\r\n        do {\r\n          offs2E34[acc] = count;\r\n          acc += add;\r\n        } while (acc < 0x80);\r\n      }\r\n    } else {\r\n      bits_asc -= 8;\r\n      ChBitsAsc[pChBitsAsc] = bits_asc;\r\n\r\n      add = (1 << bits_asc);\r\n      acc = ChCodeAsc[pChCodeAsc] >> 8;\r\n\r\n      do {\r\n        offs2EB4[acc] = count;\r\n        acc += add;\r\n      } while (acc < 0x100);\r\n    }\r\n  }\r\n}\r\n\r\nfunction WasteBits(pWork: TDcmpStruct, nBits: number): number {\r\n  if (nBits <= pWork.extra_bits) {\r\n    pWork.extra_bits -= nBits;\r\n    pWork.bit_buff >>= nBits;\r\n\r\n    return PKDCL_OK;\r\n  }\r\n\r\n  pWork.bit_buff >>= pWork.extra_bits;\r\n\r\n  if (pWork.in_pos === pWork.in_buff.byteLength) {\r\n    return PKDCL_STREAM_END;\r\n  }\r\n\r\n  pWork.bit_buff |= (pWork.in_buff[pWork.in_pos++] << 8);\r\n  pWork.bit_buff >>= (nBits - pWork.extra_bits);\r\n  pWork.extra_bits = (pWork.extra_bits - nBits) + 8;\r\n\r\n  return PKDCL_OK;\r\n}\r\n\r\nfunction DecodeLit(pWork: TDcmpStruct): number {\r\n  if (pWork.bit_buff & 1) {\r\n    if (WasteBits(pWork, 1)) {\r\n      return 0x306;\r\n    }\r\n\r\n    let length_code = LengthCodes[pWork.bit_buff & 0xFF];\r\n\r\n    if (WasteBits(pWork, LenBits[length_code])) {\r\n      return 0x306;\r\n    }\r\n\r\n    let extra_length_bits;\r\n\r\n    if ((extra_length_bits = ExLenBits[length_code]) != 0) {\r\n      const extra_length = pWork.bit_buff & ((1 << extra_length_bits) - 1);\r\n\r\n      if (WasteBits(pWork, extra_length_bits)) {\r\n        if ((length_code + extra_length) != 0x10E) {\r\n          return 0x306;\r\n        }\r\n      }\r\n\r\n      length_code = LenBase[length_code] + extra_length;\r\n    }\r\n\r\n    return length_code + 0x100;\r\n  }\r\n\r\n  if (WasteBits(pWork, 1)) {\r\n    return 0x306;\r\n  }\r\n\r\n  if (pWork.ctype == CMP_BINARY) {\r\n    const uncompressed_byte = pWork.bit_buff & 0xFF;\r\n\r\n    if (WasteBits(pWork, 8)) {\r\n      return 0x306;\r\n    }\r\n\r\n    return uncompressed_byte;\r\n  }\r\n\r\n  let value;\r\n\r\n  if (pWork.bit_buff & 0xFF) {\r\n    value = offs2C34[pWork.bit_buff & 0xFF];\r\n\r\n    if (value == 0xFF) {\r\n      if (pWork.bit_buff & 0x3F) {\r\n        if (WasteBits(pWork, 4)) {\r\n          return 0x306;\r\n        }\r\n\r\n        value = offs2D34[pWork.bit_buff & 0xFF];\r\n      } else {\r\n        if (WasteBits(pWork, 6)) {\r\n          return 0x306;\r\n        }\r\n\r\n        value = offs2E34[pWork.bit_buff & 0x7F];\r\n      }\r\n    }\r\n  } else {\r\n    if (WasteBits(pWork, 8)) {\r\n      return 0x306;\r\n    }\r\n\r\n    value = offs2EB4[pWork.bit_buff & 0xFF];\r\n  }\r\n\r\n  return WasteBits(pWork, ChBitsAsc[value]) ? 0x306 : value;\r\n}\r\n\r\nfunction DecodeDist(pWork: TDcmpStruct, rep_length: number): number {\r\n  const dist_pos_code = DistPosCodes[pWork.bit_buff & 0xFF];\r\n  const dist_pos_bits = DistBits[dist_pos_code];\r\n\r\n  if (WasteBits(pWork, dist_pos_bits)) {\r\n    return 0;\r\n  }\r\n\r\n  let distance;\r\n\r\n  if (rep_length == 2) {\r\n    distance = (dist_pos_code << 2) | (pWork.bit_buff & 0x03);\r\n\r\n    if (WasteBits(pWork, 2)) {\r\n      return 0;\r\n    }\r\n  } else {\r\n    distance = (dist_pos_code << pWork.dsize_bits) | (pWork.bit_buff & pWork.dsize_mask);\r\n\r\n    if (WasteBits(pWork, pWork.dsize_bits)) {\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  return distance + 1;\r\n}\r\n\r\nfunction Expand(pWork: TDcmpStruct): number {\r\n  let next_literal;\r\n\r\n  while ((next_literal = DecodeLit(pWork)) < 0x305) {\r\n    if (next_literal >= 0x100) {\r\n      let rep_length = next_literal - 0xFE;\r\n      let minus_dist;\r\n\r\n      if ((minus_dist = DecodeDist(pWork, rep_length)) == 0) {\r\n        return 0x306;\r\n      }\r\n\r\n      let target = pWork.outputPos;\r\n      let source = target - minus_dist;\r\n\r\n      pWork.outputPos += rep_length;\r\n\r\n      while (rep_length-- > 0) {\r\n        pWork.out_buff[target++] = pWork.out_buff[source++];\r\n      }\r\n    } else {\r\n      pWork.out_buff[pWork.outputPos++] = next_literal;\r\n    }\r\n  }\r\n\r\n  return next_literal;\r\n}\r\n\r\nexport default function explode(bytes: Uint8Array): Uint8Array {\r\n  const pWork = new TDcmpStruct(bytes);\r\n\r\n  if (pWork.in_buff.byteLength <= 4) {\r\n    throw new Error('Bad data');\r\n  }\r\n\r\n  pWork.ctype = pWork.in_buff[0];\r\n  pWork.dsize_bits = pWork.in_buff[1];\r\n  pWork.bit_buff = pWork.in_buff[2];\r\n  pWork.extra_bits = 0;\r\n  pWork.in_pos = 3;\r\n\r\n  if (4 > pWork.dsize_bits || pWork.dsize_bits > 6) {\r\n    throw new Error('Invalid dictionary size');\r\n  }\r\n\r\n  pWork.dsize_mask = 0xFFFF >> (0x10 - pWork.dsize_bits);\r\n\r\n  if (pWork.ctype !== CMP_BINARY) {\r\n    if (pWork.ctype !== CMP_ASCII) {\r\n      throw new Error('Invalid mode');\r\n    }\r\n\r\n    if (!generatedAscTabs) {\r\n      GenAscTabs();\r\n\r\n      generatedAscTabs = true;\r\n    }\r\n  }\r\n\r\n  if (!generatedDecodeTabs) {\r\n    GenDecodeTabs(LengthCodes, LenCode, LenBits);\r\n    GenDecodeTabs(DistPosCodes, DistCode, DistBits);\r\n\r\n    generatedDecodeTabs = true;\r\n  }\r\n\r\n  if (Expand(pWork) === 0x306) {\r\n    throw new Error('Error while expanding');\r\n  }\r\n\r\n  return new Uint8Array(pWork.out_buff);\r\n}\r\n","/**\r\n * Search for the MPQ header - MPQ\\x1A.\r\n * The header can be on any 512 bytes boundry offset.\r\n */\r\nexport function searchHeader(bytes: Uint8Array): number {\r\n  let offset = -1;\r\n\r\n  for (let i = 0, l = Math.ceil(bytes.byteLength / 512); i < l; i++) {\r\n    const base = i * 512;\r\n\r\n    // Test 'MPQ\\x1A'.\r\n    if (bytes[base] === 77 && bytes[base + 1] === 80 && bytes[base + 2] === 81 && bytes[base + 3] === 26) {\r\n      offset = base;\r\n    }\r\n  }\r\n\r\n  return offset;\r\n}\r\n\r\n/**\r\n * Checks whether the given buffer is either a Warcraft 3 map or otherwise a generic MPQ archive.\r\n */\r\nexport function isArchive(bytes: Uint8Array): boolean {\r\n  // Check for the map identifier - HM3W\r\n  if (bytes[0] === 72 && bytes[1] === 77 && bytes[2] === 51 && bytes[3] === 87) {\r\n    return true;\r\n  }\r\n\r\n  // Look for an MPQ header.\r\n  return searchHeader(bytes) !== -1;\r\n}\r\n","import { deflate, inflate } from 'pako';\r\nimport { decodeUtf8 } from '../../common/utf8';\r\nimport MpqArchive from './archive';\r\nimport MpqBlock from './block';\r\nimport { COMPRESSION_ADPCM_MONO, COMPRESSION_ADPCM_STEREO, COMPRESSION_BZIP2, COMPRESSION_DEFLATE, COMPRESSION_HUFFMAN, COMPRESSION_IMPLODE, FILE_COMPRESSED, FILE_ENCRYPTED, FILE_EXISTS, FILE_IMPLODE, FILE_OFFSET_ADJUSTED_KEY, FILE_SINGLE_UNIT, HASH_ENTRY_DELETED } from './constants';\r\nimport MpqCrypto from './crypto';\r\nimport explode from './explode';\r\n// import decodeHuffman from './huffman';\r\nimport MpqHash from './hash';\r\nimport { isArchive } from './isarchive';\r\n\r\n/**\r\n * A MPQ file.\r\n */\r\nexport default class MpqFile {\r\n  archive: MpqArchive;\r\n  c: MpqCrypto;\r\n  name: string;\r\n  nameResolved: boolean;\r\n  hash: MpqHash;\r\n  block: MpqBlock;\r\n  rawBuffer: Uint8Array | null = null;\r\n  buffer: Uint8Array | null = null;\r\n\r\n  constructor(archive: MpqArchive, hash: MpqHash, block: MpqBlock, rawBuffer: Uint8Array | null, buffer: Uint8Array | null) {\r\n    const headerOffset = archive.headerOffset;\r\n\r\n    this.archive = archive;\r\n    this.c = archive.c;\r\n    this.name = `File${`${hash.blockIndex}`.padStart(8, '0')}`;\r\n    this.nameResolved = false;\r\n    this.hash = hash;\r\n    this.block = block;\r\n\r\n    if (rawBuffer) {\r\n      this.rawBuffer = rawBuffer.slice(headerOffset + block.offset, headerOffset + block.offset + block.compressedSize);\r\n    }\r\n\r\n    if (buffer) {\r\n      this.buffer = buffer;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gets this file's data as a Uint8Array.\r\n   * \r\n   * An exception will be thrown if the file needs to be decoded, and decoding fails.\r\n   */\r\n  bytes(): Uint8Array {\r\n    // Decode if needed\r\n    if (this.buffer === null) {\r\n      this.decode();\r\n    }\r\n\r\n    // If decoding failed, an exception would have been thrown, so buffer is known to exist at this point.\r\n    return <Uint8Array>this.buffer;\r\n  }\r\n\r\n  /**\r\n   * Gets this file's data as an ArrayBuffer.\r\n   * \r\n   * An exception will be thrown if the file needs to be decoded, and decoding fails.\r\n   */\r\n  arrayBuffer(): ArrayBuffer {\r\n    return this.bytes().buffer;\r\n  }\r\n\r\n  /**\r\n   * Gets this file's data as a UTF8 string.\r\n   * \r\n   * An exception will be thrown if the file needs to be decoded, and decoding fails.\r\n   */\r\n  text(): string {\r\n    return decodeUtf8(this.bytes());\r\n  }\r\n\r\n  /**\r\n   * Changes the buffer of this file.\r\n   * \r\n   * Does nothing if the archive is in readonly mode.\r\n   */\r\n  set(buffer: Uint8Array): boolean {\r\n    if (this.archive.readonly) {\r\n      return false;\r\n    }\r\n\r\n    const hash = this.hash;\r\n    const block = this.block;\r\n\r\n    // Reset the hash.\r\n    hash.locale = 0;\r\n    hash.platform = 0;\r\n\r\n    // Reset the block.\r\n    block.compressedSize = 0;\r\n    block.normalSize = buffer.byteLength;\r\n    block.flags = 0;\r\n\r\n    this.buffer = buffer;\r\n    this.rawBuffer = null;\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Deletes this file.\r\n   * \r\n   * Using the file after it was deleted will result in undefined behavior.\r\n   * \r\n   * Does nothing if the archive is in readonly mode.\r\n   */\r\n  delete(): boolean {\r\n    if (this.archive.readonly) {\r\n      return false;\r\n    }\r\n\r\n    const archive = this.archive;\r\n    const hash = this.hash;\r\n    const blockIndex = hash.blockIndex;\r\n\r\n    hash.delete();\r\n\r\n    for (const hash of archive.hashTable.entries) {\r\n      if (hash.blockIndex < HASH_ENTRY_DELETED && hash.blockIndex > blockIndex) {\r\n        hash.blockIndex -= 1;\r\n      }\r\n    }\r\n\r\n    archive.blockTable.entries.splice(blockIndex, 1);\r\n    archive.files.splice(blockIndex, 1);\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Renames this file.\r\n   * \r\n   * Note that this sets the current file's hash's status to being deleted, rather than removing it.\r\n   * This is due to the way the search algorithm works.\r\n   * \r\n   * Does nothing if the archive is in readonly mode.\r\n   */\r\n  rename(newName: string): boolean {\r\n    if (this.archive.readonly) {\r\n      return false;\r\n    }\r\n\r\n    const hash = this.hash;\r\n    const locale = hash.locale;\r\n    const platform = hash.platform;\r\n    const blockIndex = hash.blockIndex;\r\n\r\n    // First delete the current hash.\r\n    // This will allow its entry to be reused in case it's the only empty/deleted entry in the hashtable.\r\n    hash.delete();\r\n\r\n    const newHash = <MpqHash>this.archive.hashTable.add(newName, blockIndex);\r\n\r\n    newHash.locale = locale;\r\n    newHash.platform = platform;\r\n\r\n    this.name = newName;\r\n    this.nameResolved = true;\r\n    this.hash = newHash;\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Decode this file.\r\n   */\r\n  decode(): void {\r\n    if (!this.rawBuffer) {\r\n      throw new Error(`File ${this.name}: Nothing to decode`);\r\n    }\r\n\r\n    const archive = this.archive;\r\n    const block = this.block;\r\n    const c = archive.c;\r\n    const encryptionKey = c.computeFileKey(this.name, block);\r\n    const data = this.rawBuffer;\r\n    const flags = block.flags;\r\n\r\n    // One buffer of raw data.\r\n    // I don't know why having no flags means it's a chunk of memory rather than sectors.\r\n    // After all, there is no flag to say there are indeed sectors.\r\n    if (flags === FILE_EXISTS) {\r\n      this.buffer = data.slice(0, block.normalSize);\r\n    } else if (flags & FILE_SINGLE_UNIT) {\r\n      // One buffer of possibly encrypted and/or compressed data.\r\n      // Read the sector\r\n      let sector;\r\n\r\n      // If this block is encrypted, decrypt the sector.\r\n      if (flags & FILE_ENCRYPTED) {\r\n        sector = c.decryptBlock(data.slice(0, block.compressedSize), encryptionKey);\r\n      } else {\r\n        sector = data.subarray(0, block.compressedSize);\r\n      }\r\n\r\n      // If this block is compressed, decompress the sector.\r\n      // Otherwise, copy the sector as-is.\r\n      if (flags & FILE_COMPRESSED) {\r\n        sector = this.decompressSector(sector, block.normalSize);\r\n      } else {\r\n        sector = sector.slice();\r\n      }\r\n\r\n      this.buffer = sector;\r\n    } else {\r\n      // One or more sectors of possibly encrypted and/or compressed data.\r\n      const sectorCount = Math.ceil(block.normalSize / archive.sectorSize);\r\n\r\n      // Alocate a buffer for the uncompressed block size\r\n      const buffer = new Uint8Array(block.normalSize);\r\n\r\n      // Get the sector offsets\r\n      let sectorOffsets = new Uint32Array(data.buffer, 0, sectorCount + 1);\r\n\r\n      // If this file is encrypted, copy the sector offsets and decrypt them.\r\n      if (flags & FILE_ENCRYPTED) {\r\n        sectorOffsets = c.decryptBlock(sectorOffsets.slice(), encryptionKey - 1);\r\n      }\r\n\r\n      let start = sectorOffsets[0];\r\n      let end = sectorOffsets[1];\r\n      let offset = 0;\r\n\r\n      for (let i = 0; i < sectorCount; i++) {\r\n        let sector;\r\n\r\n        // If this file is encrypted, copy the sector and decrypt it.\r\n        // Otherwise a view can be used directly.\r\n        if (flags & FILE_ENCRYPTED) {\r\n          sector = c.decryptBlock(data.slice(start, end), encryptionKey + i);\r\n        } else {\r\n          sector = data.subarray(start, end);\r\n        }\r\n\r\n        // Decompress the sector\r\n        if (flags & FILE_COMPRESSED) {\r\n          let uncompressedSize = archive.sectorSize;\r\n\r\n          // If this is the last sector, its uncompressed size might not be the size of a sector.\r\n          if (block.normalSize - offset < uncompressedSize) {\r\n            uncompressedSize = block.normalSize - offset;\r\n          }\r\n\r\n          sector = this.decompressSector(sector, uncompressedSize);\r\n        }\r\n\r\n        // Some sectors have this flags instead of the compression flag + algorithm byte.\r\n        if (flags & FILE_IMPLODE) {\r\n          sector = explode(sector);\r\n        }\r\n\r\n        // Add the sector bytes to the buffer\r\n        buffer.set(sector, offset);\r\n        offset += sector.byteLength;\r\n\r\n        // Prepare for the next sector\r\n        if (i < sectorCount) {\r\n          start = end;\r\n          end = sectorOffsets[i + 2];\r\n        }\r\n      }\r\n\r\n      this.buffer = buffer;\r\n    }\r\n\r\n    // If the archive is in read-only mode, the raw buffer isn't needed anymore, so free the memory.\r\n    if (archive.readonly) {\r\n      this.rawBuffer = null;\r\n    }\r\n  }\r\n\r\n  decompressSector(bytes: Uint8Array, decompressedSize: number): Uint8Array {\r\n    // If the size of the data is the same as its decompressed size, it's not compressed.\r\n    if (bytes.byteLength === decompressedSize) {\r\n      return bytes;\r\n    } else {\r\n      const compressionMask = bytes[0];\r\n\r\n      if (compressionMask & COMPRESSION_BZIP2) {\r\n        throw new Error(`File ${this.name}: compression type 'bzip2' not supported`);\r\n      }\r\n\r\n      if (compressionMask & COMPRESSION_IMPLODE) {\r\n        try {\r\n          bytes = explode(bytes.subarray(1));\r\n        } catch (e) {\r\n          throw new Error(`File ${this.name}: failed to decompress with 'explode': ${e}`);\r\n        }\r\n      }\r\n\r\n      if (compressionMask & COMPRESSION_DEFLATE) {\r\n        try {\r\n          bytes = inflate(bytes.subarray(1));\r\n        } catch (e) {\r\n          throw new Error(`File ${this.name}: failed to decompress with 'zlib': ${e}`);\r\n        }\r\n      }\r\n\r\n      if (compressionMask & COMPRESSION_HUFFMAN) {\r\n        // try {\r\n        //   bytes = decodeHuffman(bytes.subarray(1));\r\n        // } catch (e) {\r\n        //   throw new Error(`File ${this.name}: failed to decompress with 'huffman': ${e}`);\r\n        // }\r\n        throw new Error(`File ${this.name}: compression type 'huffman' not supported`);\r\n      }\r\n\r\n      if (compressionMask & COMPRESSION_ADPCM_STEREO) {\r\n        throw new Error(`File ${this.name}: compression type 'adpcm stereo' not supported`);\r\n      }\r\n\r\n      if (compressionMask & COMPRESSION_ADPCM_MONO) {\r\n        throw new Error(`File ${this.name}: compression type 'adpcm mono' not supported`);\r\n      }\r\n\r\n      return bytes;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Encode this file.\r\n   * Archives (maps or generic MPQs) are stored uncompressed in one chunk.\r\n   * Other files are always stored in sectors, except when a file is smaller than a sector.\r\n   * Sectors themselves are always compressed, except when the result is smaller than the uncompressed data.\r\n   */\r\n  encode(): void {\r\n    if (this.buffer !== null && this.rawBuffer === null) {\r\n      const data = this.buffer;\r\n\r\n      if (isArchive(data)) {\r\n        this.rawBuffer = this.buffer;\r\n        this.block.compressedSize = this.buffer.byteLength;\r\n        this.block.flags = FILE_EXISTS;\r\n      } else {\r\n        const sectorSize = this.archive.sectorSize;\r\n        const sectorCount = Math.ceil(data.byteLength / sectorSize);\r\n        const offsets = new Uint32Array(sectorCount + 1);\r\n        let offset = offsets.byteLength;\r\n        const sectors = [];\r\n        const compression = [];\r\n\r\n        // First offset is right after the offsets list.\r\n        offsets[0] = offset;\r\n\r\n        for (let i = 0; i < sectorCount; i++) {\r\n          const sectorOffset = i * sectorSize;\r\n          let sector = data.subarray(sectorOffset, sectorOffset + sectorSize);\r\n          let size = sector.byteLength;\r\n          const compressed = deflate(sector);\r\n          let isCompressed = false;\r\n\r\n          // If the compressed size of the sector is smaller than the uncompressed, use the compressed data.\r\n          // +1 because of the compression mask byte.\r\n          if (compressed.byteLength + 1 < size) {\r\n            sector = compressed;\r\n            size = compressed.byteLength + 1;\r\n            isCompressed = true;\r\n          }\r\n\r\n          offset += size;\r\n          offsets[i + 1] = offset;\r\n          sectors[i] = sector;\r\n          compression[i] = isCompressed;\r\n        }\r\n\r\n        // Only use the compressed data if it's actually smaller than the uncompressed data.\r\n        if (offset < data.byteLength) {\r\n          const rawBuffer = new Uint8Array(offset);\r\n\r\n          // Write the offsets list.\r\n          rawBuffer.set(new Uint8Array(offsets.buffer));\r\n\r\n          offset = offsets.byteLength;\r\n\r\n          for (let i = 0; i < sectorCount; i++) {\r\n            // If this sector is compressed, set it to zlib.\r\n            if (compression[i]) {\r\n              rawBuffer[offset] = 2;\r\n              offset += 1;\r\n            }\r\n\r\n            // Write the sector.\r\n            const sector = sectors[i];\r\n\r\n            rawBuffer.set(sector, offset);\r\n            offset += sector.byteLength;\r\n          }\r\n\r\n          this.rawBuffer = rawBuffer;\r\n          this.block.compressedSize = rawBuffer.byteLength;\r\n          this.block.flags = (FILE_EXISTS | FILE_COMPRESSED) >>> 0;\r\n        } else {\r\n          this.rawBuffer = this.buffer;\r\n          this.block.compressedSize = this.buffer.byteLength;\r\n          this.block.flags = FILE_EXISTS;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Decrypt this file and encrypt it back, with a new offset in the archive.\r\n   * This is used for files that use FILE_OFFSET_ADJUSTED_KEY, which are encrypted with a key that depends on their offset.\r\n   */\r\n  reEncrypt(offset: number): boolean {\r\n    if (!this.rawBuffer) {\r\n      return false;\r\n    }\r\n\r\n    const archive = this.archive;\r\n    const block = this.block;\r\n    const c = archive.c;\r\n    const bytes = this.rawBuffer;\r\n    const flags = block.flags;\r\n    const encryptionKey = c.computeFileKey(this.name, block);\r\n\r\n    block.offset = offset;\r\n\r\n    const newEncryptionKey = c.computeFileKey(this.name, block);\r\n\r\n    if (flags & FILE_SINGLE_UNIT) {\r\n      // Decrypt the chunk with the old key.\r\n      c.decryptBlock(bytes, encryptionKey);\r\n\r\n      // Encrypt the chunk with the new key.\r\n      c.encryptBlock(bytes, newEncryptionKey);\r\n    } else {\r\n      const sectorCount = Math.ceil(block.normalSize / archive.sectorSize);\r\n\r\n      // Get the sector offsets\r\n      const sectorOffsets = new Uint32Array(bytes.buffer, 0, sectorCount + 1);\r\n\r\n      // Decrypt the sector offsets with the old key.\r\n      c.decryptBlock(sectorOffsets, encryptionKey - 1);\r\n\r\n      let start = sectorOffsets[0];\r\n      let end = sectorOffsets[1];\r\n\r\n      for (let i = 0; i < sectorCount; i++) {\r\n        const sector = bytes.subarray(start, end);\r\n\r\n        // Decrypt the chunk with the old key.\r\n        c.decryptBlock(sector, encryptionKey + i);\r\n\r\n        // Encrypt the chunk with the new key.\r\n        c.encryptBlock(sector, newEncryptionKey + i);\r\n\r\n        // Prepare for the next sector\r\n        if (i < sectorCount) {\r\n          start = end;\r\n          end = sectorOffsets[i + 2];\r\n        }\r\n      }\r\n\r\n      // Encrypt the sector offsets with the new key.\r\n      c.encryptBlock(sectorOffsets, newEncryptionKey - 1);\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * The offset of the file has been recalculated.\r\n   * If the offset is different, and this file uses FILE_OFFSET_ADJUSTED_KEY encryption, it must be re-encrypted with the new offset.\r\n   */\r\n  offsetChanged(offset: number): boolean {\r\n    const block = this.block;\r\n\r\n    if (block.offset !== offset && block.flags & FILE_OFFSET_ADJUSTED_KEY) {\r\n      if (this.nameResolved) {\r\n        return this.reEncrypt(offset);\r\n      }\r\n\r\n      return false;\r\n    }\r\n\r\n    block.offset = offset;\r\n\r\n    return true;\r\n  }\r\n}\r\n","import { HASH_ENTRY_DELETED, HASH_ENTRY_EMPTY } from './constants';\r\n\r\n/**\r\n * A MPQ hash.\r\n */\r\nexport default class MpqHash {\r\n  nameA = 0xFFFFFFFF;\r\n  nameB = 0xFFFFFFFF;\r\n  locale = 0xFFFF;\r\n  platform = 0xFFFF;\r\n  blockIndex = HASH_ENTRY_EMPTY;\r\n\r\n  load(bytes: Uint32Array): void {\r\n    const localePlatform = bytes[2];\r\n\r\n    this.nameA = bytes[0];\r\n    this.nameB = bytes[1];\r\n    this.locale = localePlatform & 0x0000FFFF;\r\n    this.platform = localePlatform >>> 16;\r\n    this.blockIndex = bytes[3];\r\n  }\r\n\r\n  copy(hash: MpqHash): void {\r\n    this.nameA = hash.nameA;\r\n    this.nameB = hash.nameB;\r\n    this.locale = hash.locale;\r\n    this.platform = hash.platform;\r\n    this.blockIndex = hash.blockIndex;\r\n  }\r\n\r\n  save(bytes: Uint32Array): void {\r\n    bytes[0] = this.nameA;\r\n    bytes[1] = this.nameB;\r\n    bytes[2] = (this.locale << 16) | this.platform;\r\n    bytes[3] = this.blockIndex;\r\n  }\r\n\r\n  delete(): void {\r\n    this.nameA = 0xFFFFFFFF;\r\n    this.nameB = 0xFFFFFFFF;\r\n    this.locale = 0xFFFF;\r\n    this.platform = 0xFFFF;\r\n    this.blockIndex = HASH_ENTRY_DELETED;\r\n  }\r\n}\r\n","import MpqCrypto from './crypto';\r\nimport MpqHash from './hash';\r\nimport { HASH_TABLE_KEY, HASH_TABLE_INDEX, HASH_NAME_A, HASH_NAME_B } from './constants';\r\n\r\n/**\r\n * A MPQ hash table.\r\n */\r\nexport default class MpqHashTable {\r\n  c: MpqCrypto;\r\n  entries: MpqHash[];\r\n\r\n  constructor(c: MpqCrypto) {\r\n    this.c = c;\r\n    this.entries = [];\r\n\r\n    // Minimum size\r\n    this.addEmpties(4);\r\n  }\r\n\r\n  clear(): void {\r\n    this.entries.length = 0;\r\n  }\r\n\r\n  addEmpties(howMany: number): void {\r\n    for (let i = 0; i < howMany; i++) {\r\n      this.entries.push(new MpqHash());\r\n    }\r\n  }\r\n\r\n  getInsertionIndex(name: string): number {\r\n    const entries = this.entries;\r\n    const offset = this.c.hash(name, HASH_TABLE_INDEX) & (entries.length - 1);\r\n\r\n    for (let i = 0, l = entries.length; i < l; i++) {\r\n      const index = (i + offset) % l;\r\n      const hash = entries[index];\r\n\r\n      if (hash.platform === 0xFFFF) {\r\n        return index;\r\n      }\r\n    }\r\n\r\n    return -1;\r\n  }\r\n\r\n  add(name: string, blockIndex: number): MpqHash | undefined {\r\n    const insertionIndex = this.getInsertionIndex(name);\r\n\r\n    if (insertionIndex !== -1) {\r\n      const hash = this.entries[insertionIndex];\r\n\r\n      hash.nameA = this.c.hash(name, HASH_NAME_A);\r\n      hash.nameB = this.c.hash(name, HASH_NAME_B);\r\n      hash.locale = 0;\r\n      hash.platform = 0;\r\n      hash.blockIndex = blockIndex;\r\n\r\n      return hash;\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  load(bytes: Uint8Array): void {\r\n    const entriesCount = bytes.byteLength / 16;\r\n    const uint32array = new Uint32Array(this.c.decryptBlock(bytes, HASH_TABLE_KEY).buffer);\r\n    let offset = 0;\r\n\r\n    // Clear the table and add the needed empties.\r\n    this.clear();\r\n    this.addEmpties(entriesCount);\r\n\r\n    for (const hash of this.entries) {\r\n      hash.load(uint32array.subarray(offset, offset + 4));\r\n\r\n      offset += 4;\r\n    }\r\n  }\r\n\r\n  save(bytes: Uint8Array): void {\r\n    const uint32array = new Uint32Array(this.entries.length * 4);\r\n    let offset = 0;\r\n\r\n    for (const hash of this.entries) {\r\n      hash.save(uint32array.subarray(offset, offset + 4));\r\n\r\n      offset += 4;\r\n    }\r\n\r\n    const uint8array = new Uint8Array(uint32array.buffer);\r\n\r\n    this.c.encryptBlock(uint8array, HASH_TABLE_KEY);\r\n\r\n    bytes.set(uint8array);\r\n  }\r\n\r\n  get(name: string): MpqHash | null {\r\n    const c = this.c;\r\n    const entries = this.entries;\r\n    const offset = c.hash(name, HASH_TABLE_INDEX) & (entries.length - 1);\r\n    const nameA = c.hash(name, HASH_NAME_A);\r\n    const nameB = c.hash(name, HASH_NAME_B);\r\n\r\n    for (let i = 0, l = entries.length; i < l; i++) {\r\n      const hash = entries[(i + offset) % l];\r\n\r\n      if (nameA === hash.nameA && nameB === hash.nameB) {\r\n        return hash;\r\n      } else if (hash.blockIndex === 0xFFFFFFFF) {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n","import { bytesOf } from '../../common/bytesof';\r\nimport { powerOfTwo } from '../../common/math';\r\nimport { numberToUint32 } from '../../common/typecast';\r\nimport MpqBlockTable from './blocktable';\r\nimport { HASH_ENTRY_DELETED, HASH_ENTRY_EMPTY, MAGIC } from './constants';\r\nimport MpqCrypto from './crypto';\r\nimport MpqFile from './file';\r\nimport MpqHashTable from './hashtable';\r\nimport { searchHeader } from './isarchive';\r\n\r\n/**\r\n * MoPaQ archive (MPQ) version 0.\r\n */\r\nexport default class MpqArchive {\r\n  headerOffset: number;\r\n  sectorSize: number;\r\n  c: MpqCrypto;\r\n  hashTable: MpqHashTable;\r\n  blockTable: MpqBlockTable;\r\n  files: MpqFile[];\r\n  readonly = false;\r\n\r\n  constructor() {\r\n    this.headerOffset = 0;\r\n    this.sectorSize = 4096;\r\n    this.c = new MpqCrypto();\r\n    this.hashTable = new MpqHashTable(this.c);\r\n    this.blockTable = new MpqBlockTable(this.c);\r\n    this.files = [];\r\n  }\r\n\r\n  /**\r\n   * Load an existing archive.\r\n   * \r\n   * Note that this clears the archive from whatever it had in it before.\r\n   */\r\n  load(buffer: ArrayBuffer | Uint8Array, readonly = false): void {\r\n    const bytes = bytesOf(buffer);\r\n\r\n    this.readonly = readonly;\r\n\r\n    // let fileSize = buffer.byteLength;\r\n    const headerOffset = searchHeader(bytes);\r\n\r\n    if (headerOffset === -1) {\r\n      throw new Error('No MPQ header');\r\n    }\r\n\r\n    // Read the header.\r\n    const uint32array = new Uint32Array(bytes.buffer, headerOffset, 8);\r\n    // let headerSize = uint32array[1];\r\n    // let archiveSize = uint32array[2];\r\n    const formatVersionSectorSize = uint32array[3];\r\n    // let formatVersion = formatVersionSectorSize & 0x0000FFFF;\r\n    const hashPos = numberToUint32(uint32array[4] + headerOffset); // Whoever thought of MoonLight, clever!\r\n    const blockPos = numberToUint32(uint32array[5] + headerOffset);\r\n    const hashSize = uint32array[6];\r\n    let blockSize = uint32array[7];\r\n\r\n    // There can only be as many or less blocks as there are hashes.\r\n    // Therefore, if the file is reporting too many blocks, cap the actual blocks read to the amount of hashes.\r\n    if (blockSize > hashSize) {\r\n      blockSize = hashSize;\r\n    }\r\n\r\n    this.headerOffset = headerOffset;\r\n    this.sectorSize = 512 * (1 << (formatVersionSectorSize >>> 16)); // Generally 4096\r\n\r\n    // Read the hash table.\r\n    // Also clears any existing entries.\r\n    // Have to copy the data, because hashPos is not guaranteed to be a multiple of 4.\r\n    this.hashTable.load(bytes.slice(hashPos, hashPos + hashSize * 16));\r\n\r\n    // Read the block table.\r\n    // Also clears any existing entries.\r\n    // Have to copy the data, because blockPos is not guaranteed to be a multiple of 4.\r\n    this.blockTable.load(bytes.slice(blockPos, blockPos + blockSize * 16));\r\n\r\n    // Clear any existing files.\r\n    this.files.length = 0;\r\n\r\n    // Read the files.\r\n    for (const hash of this.hashTable.entries) {\r\n      const blockIndex = hash.blockIndex;\r\n\r\n      // If the block index is valid, load a file.\r\n      // This isn't the case when the block is marked as deleted with HASH_ENTRY_DELETED.\r\n      // This also isn't the case for archives with fake block indices.\r\n      if (blockIndex < this.blockTable.entries.length) {\r\n        this.files[blockIndex] = new MpqFile(this, hash, this.blockTable.entries[blockIndex], bytes, null);\r\n      }\r\n    }\r\n\r\n    // If there is a listfile, use all of the file names in it.\r\n    const listfile = this.get('(listfile)');\r\n    if (listfile) {\r\n      const list = listfile.text();\r\n\r\n      if (list) {\r\n        for (const name of list.split('\\r\\n')) {\r\n          // get() internally also sets the file's name to the given one.\r\n          this.get(name);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Save this archive.\r\n   * \r\n   * Returns null when...\r\n   * \r\n   *     1) The archive is in readonly mode.\r\n   *     2) The offset of a file encrypted with FILE_OFFSET_ADJUSTED_KEY changed, and the file name is unknown.\r\n   */\r\n  save(): Uint8Array | null {\r\n    if (this.readonly) {\r\n      return null;\r\n    }\r\n\r\n    const headerSize = 32;\r\n\r\n    // Delete the internal attributes file.\r\n    // The attributes might (and do in the case of World Editor generated maps) contain CRC checksums for the internal files.\r\n    // If any of these files is edited in any way, the map will be considered corrupted.\r\n    // Therefore, delete the file, and nothing will be corrupted.\r\n    // As far as I can tell, there is no real reason to keep (and update) any of the file attributes.\r\n    // It's not like Warcraft 3 has some database of checksums that it checks against.\r\n    // I assume it does have a database for the Battle.net ladder maps.\r\n    // If at any point it becomes known to me that it is indeed needed, I will add support for (attributes).\r\n    this.delete('(attributes)');\r\n\r\n    // Some archives have empty blocks in them.\r\n    // That is, blocks that take up memory, but have no actual valid data in them (as far as the archive is concerned).\r\n    // I am not sure why they exist - maybe someone deleted a file's entry and was too lazy to rebuild the archive.\r\n    // This removes such blocks of memory from the archive.\r\n    this.saveMemory();\r\n\r\n    // Set the listfile.\r\n    this.set('(listfile)', this.getFileNames().join('\\r\\n'));\r\n\r\n    // Reset the file offsets.\r\n    let offset = headerSize;\r\n\r\n    for (const file of this.files) {\r\n      // There can be holes in the files array.\r\n      if (file) {\r\n        // If the file's offset changed, and it is encrypted with a key that depends on its offset,\r\n        // it needs to be decryped with it's current key, and encryped with the new key.\r\n        if (!file.offsetChanged(offset)) {\r\n          return null;\r\n        }\r\n\r\n        // If the file needs to be encoded, do it.\r\n        file.encode();\r\n\r\n        offset += file.block.compressedSize;\r\n      }\r\n    }\r\n\r\n    const hashTable = this.hashTable;\r\n    const blockTable = this.blockTable;\r\n    const hashes = hashTable.entries.length;\r\n    const blocks = blockTable.entries.length;\r\n    const filesSize = offset - headerSize;\r\n    const archiveSize = headerSize + filesSize + hashes * 16 + blocks * 16;\r\n    const hashPos = headerSize + filesSize;\r\n    const blockPos = hashPos + hashes * 16;\r\n    const bytes = new Uint8Array(archiveSize);\r\n    const uint32array = new Uint32Array(bytes.buffer, 0, 8);\r\n\r\n    // Write the header.\r\n    uint32array[0] = MAGIC;\r\n    uint32array[1] = headerSize;\r\n    uint32array[2] = archiveSize;\r\n    uint32array[3] = Math.log2(this.sectorSize / 512) << 16; // The version is always 0, so ignore it.\r\n    uint32array[4] = hashPos;\r\n    uint32array[5] = blockPos;\r\n    uint32array[6] = hashes;\r\n    uint32array[7] = blocks;\r\n\r\n    offset = headerSize;\r\n\r\n    // Write the files.\r\n    for (const file of this.files) {\r\n      // There can be holes in the files array.\r\n      if (file) {\r\n        if (file.rawBuffer) {\r\n          bytes.set(file.rawBuffer, offset);\r\n        }\r\n\r\n        offset += file.block.compressedSize;\r\n      }\r\n    }\r\n\r\n    // Write the hash table.\r\n    hashTable.save(bytes.subarray(offset, offset + hashTable.entries.length * 16));\r\n\r\n    offset += hashTable.entries.length * 16;\r\n\r\n    // Write the block table.\r\n    blockTable.save(bytes.subarray(offset, offset + blockTable.entries.length * 16));\r\n\r\n    return bytes;\r\n  }\r\n\r\n  /**\r\n   * Some MPQs have empty memory chunks in them, left over from files that were deleted.\r\n   * This function searches for such chunks, and removes them.\r\n   * \r\n   * Note that it is called automatically by save().\r\n   * \r\n   * Does nothing if the archive is in readonly mode.\r\n   */\r\n  saveMemory(): number {\r\n    if (this.readonly) {\r\n      return 0;\r\n    }\r\n\r\n    const blocks = this.blockTable.entries;\r\n    const hashes = this.hashTable.entries;\r\n    let i = blocks.length;\r\n    let saved = 0;\r\n\r\n    while (i--) {\r\n      const block = blocks[i];\r\n\r\n      // Remove blocks with no data.\r\n      if (block.normalSize === 0) {\r\n        this.removeBlock(i);\r\n\r\n        saved += block.compressedSize;\r\n      } else {\r\n        let used = false;\r\n\r\n        for (const hash of hashes) {\r\n          if (hash.blockIndex === i) {\r\n            used = true;\r\n            break;\r\n          }\r\n        }\r\n\r\n        // Remove blocks that are not used.\r\n        if (!used) {\r\n          this.removeBlock(i);\r\n\r\n          saved += block.compressedSize;\r\n        }\r\n      }\r\n    }\r\n\r\n    return saved;\r\n  }\r\n\r\n  removeBlock(blockIndex: number): void {\r\n    for (const hash of this.hashTable.entries) {\r\n      if (hash.blockIndex < HASH_ENTRY_DELETED && hash.blockIndex > blockIndex) {\r\n        hash.blockIndex -= 1;\r\n      }\r\n    }\r\n\r\n    this.blockTable.entries.splice(blockIndex, 1);\r\n  }\r\n\r\n  /**\r\n   * Gets a list of the file names in the archive.\r\n   * \r\n   * Note that files loaded from an existing archive, without resolved names, will be named FileXXXXXXXX.\r\n   */\r\n  getFileNames(): string[] {\r\n    const names = [];\r\n\r\n    for (const file of this.files) {\r\n      if (file && file.name !== '') {\r\n        names.push(file.name);\r\n      }\r\n    }\r\n\r\n    return names;\r\n  }\r\n\r\n  /**\r\n   * Count the files with unresolved names.\r\n   */\r\n  countUnresolved(): number {\r\n    let unresolved = 0;\r\n\r\n    for (const file of this.files) {\r\n      if (!file.nameResolved) {\r\n        unresolved++;\r\n      }\r\n    }\r\n\r\n    return unresolved;\r\n  }\r\n\r\n  /**\r\n   * Given an iterable of file names, attempt to resolve the archive files with them.\r\n   */\r\n  applyListfile(listfile: Iterable<string>): void {\r\n    for (const file of listfile) {\r\n      this.get(file);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds a file to this archive.\r\n   * If the file already exists, its buffer will be set.\r\n   * \r\n   * Does nothing if the archive is in readonly mode.\r\n   */\r\n  set(name: string, buffer: ArrayBuffer | Uint8Array | string): boolean {\r\n    if (this.readonly) {\r\n      return false;\r\n    }\r\n\r\n    const bytes = bytesOf(buffer);\r\n    let file = this.get(name);\r\n\r\n    // If the file already exists, change the data.\r\n    if (file) {\r\n      file.set(bytes);\r\n    } else {\r\n      const blockIndex = this.blockTable.entries.length;\r\n      const hash = this.hashTable.add(name, blockIndex);\r\n\r\n      if (!hash) {\r\n        return false;\r\n      }\r\n\r\n      const block = this.blockTable.add(bytes);\r\n\r\n      file = new MpqFile(this, hash, block, null, bytes);\r\n      file.name = name;\r\n      file.nameResolved = true;\r\n\r\n      this.files[blockIndex] = file;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Gets a file from this archive.\r\n   * If the file doesn't exist, null is returned.\r\n   */\r\n  get(name: string): MpqFile | null {\r\n    const hash = this.hashTable.get(name);\r\n\r\n    if (hash) {\r\n      const blockIndex = hash.blockIndex;\r\n\r\n      // Check if the block exists.\r\n      if (blockIndex < HASH_ENTRY_DELETED) {\r\n        const file = this.files[blockIndex];\r\n\r\n        if (file) {\r\n          // Save the name in case it wasn't already resolved.\r\n          file.name = name;\r\n          file.nameResolved = true;\r\n\r\n          return file;\r\n        }\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Checks if a file exists.\r\n   * \r\n   * Prefer to use get() if you are going to use get() afterwards anyway.\r\n   */\r\n  has(name: string): boolean {\r\n    return !!this.get(name);\r\n  }\r\n\r\n  /**\r\n   * Deletes a file from this archive.\r\n   * \r\n   * Does nothing if...\r\n   * \r\n   *     1) The archive is in readonly mode.\r\n   *     2) The file does not exist.\r\n   */\r\n  delete(name: string): boolean {\r\n    if (this.readonly) {\r\n      return false;\r\n    }\r\n\r\n    const file = this.get(name);\r\n\r\n    if (!file) {\r\n      return false;\r\n    }\r\n\r\n    file.delete();\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Renames a file.\r\n   * \r\n   * Does nothing if...\r\n   * \r\n   *     1) The archive is in readonly mode.\r\n   *     2) The file does not exist.\r\n   * \r\n   * Note that this sets the current file's hash's status to being deleted, rather than removing it.\r\n   * This is due to the way the search algorithm works.\r\n   */\r\n  rename(name: string, newName: string): boolean {\r\n    if (this.readonly) {\r\n      return false;\r\n    }\r\n\r\n    const file = this.get(name);\r\n\r\n    if (!file) {\r\n      return false;\r\n    }\r\n\r\n    file.rename(newName);\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Resizes the hashtable to the nearest power of two equal to or bigger than the given size.\r\n   * \r\n   * Generally speaking, the bigger the hashtable is, the quicker insertions/searches are, at the cost of added memory.\r\n   * \r\n   * Does nothing if...\r\n   * \r\n   *     1) The archive is in readonly mode.\r\n   *     2) The calculated size is smaller than the amount of files in the archive.\r\n   *     3) Not all of the file names in the archive are resolved.\r\n   */\r\n  resizeHashtable(size: number): boolean {\r\n    if (this.readonly) {\r\n      return false;\r\n    }\r\n\r\n    size = Math.max(4, powerOfTwo(size));\r\n\r\n    const files = this.files;\r\n\r\n    // Can't resize to a size smaller than the existing files.\r\n    if (files.length > size) {\r\n      return false;\r\n    }\r\n\r\n    // If not all file names are known, don't resize.\r\n    // The insertion algorithm depends on the names.\r\n    for (const file of files) {\r\n      if (!file.nameResolved) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    const hashTable = this.hashTable;\r\n    const entries = hashTable.entries;\r\n    const oldEntries = entries.slice();\r\n\r\n    // Clear the entries.\r\n    hashTable.clear();\r\n\r\n    // Add empty entries.\r\n    hashTable.addEmpties(size);\r\n\r\n    // Go over all of the old entries, and copy them into the new entries.\r\n    for (const hash of oldEntries) {\r\n      if (hash.blockIndex !== HASH_ENTRY_EMPTY) {\r\n        const file = files[hash.blockIndex];\r\n        const insertionIndex = hashTable.getInsertionIndex(file.name);\r\n\r\n        entries[insertionIndex].copy(hash);\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n}\r\n","import Archive from './archive';\r\nimport Crypto from './crypto';\r\nimport HashTable from './hashtable';\r\nimport Hash from './hash';\r\nimport BlockTable from './blocktable';\r\nimport Block from './block';\r\nimport File from './file';\r\nimport { isArchive } from './isarchive';\r\n\r\nexport default {\r\n  Archive,\r\n  Crypto,\r\n  HashTable,\r\n  Hash,\r\n  BlockTable,\r\n  Block,\r\n  File,\r\n  isArchive,\r\n};\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\n\r\n/**\r\n * An import.\r\n */\r\nexport default class Import {\r\n  isCustom = 0;\r\n  path = '';\r\n\r\n  load(stream: BinaryStream): void {\r\n    this.isCustom = stream.readUint8();\r\n    this.path = stream.readNull();\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeUint8(this.isCustom);\r\n    stream.writeNull(this.path);\r\n  }\r\n\r\n  getByteLength(): number {\r\n    return 2 + byteLengthUtf8(this.path);\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport Import from './import';\r\n\r\n/**\r\n * war3map.imp - the import file.\r\n */\r\nexport default class War3MapImp {\r\n  version = 1;\r\n  entries: Map<string, Import> = new Map();\r\n\r\n  load(buffer: ArrayBuffer | Uint8Array): void {\r\n    const stream = new BinaryStream(buffer);\r\n\r\n    this.version = stream.readUint32();\r\n\r\n    for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n      const entry = new Import();\r\n\r\n      entry.load(stream);\r\n\r\n      if (entry.isCustom) {\r\n        this.entries.set(entry.path, entry);\r\n      } else {\r\n        this.entries.set(`war3mapimported\\\\${entry.path}`, entry);\r\n      }\r\n    }\r\n  }\r\n\r\n  save(): Uint8Array {\r\n    const stream = new BinaryStream(new ArrayBuffer(this.getByteLength()));\r\n\r\n    stream.writeUint32(this.version);\r\n    stream.writeUint32(this.entries.size);\r\n\r\n    for (const entry of this.entries.values()) {\r\n      entry.save(stream);\r\n    }\r\n\r\n    return stream.uint8array;\r\n  }\r\n\r\n  getByteLength(): number {\r\n    let size = 8;\r\n\r\n    for (const entry of this.entries.values()) {\r\n      size += entry.getByteLength();\r\n    }\r\n\r\n    return size;\r\n  }\r\n\r\n  set(path: string): boolean {\r\n    if (!this.entries.has(path)) {\r\n      const entry = new Import();\r\n\r\n      entry.isCustom = 10;\r\n      entry.path = path;\r\n\r\n      this.entries.set(path, entry);\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  has(path: string): boolean {\r\n    return this.entries.has(path);\r\n  }\r\n\r\n  delete(path: string): boolean {\r\n    return this.entries.delete(path);\r\n  }\r\n\r\n  rename(path: string, newPath: string): boolean {\r\n    const entry = this.entries.get(path);\r\n\r\n    if (entry) {\r\n      entry.isCustom = 10;\r\n      entry.path = newPath;\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\n\r\n/**\r\n * A modification.\r\n */\r\nexport default class Modification {\r\n  id = '\\0\\0\\0\\0';\r\n  variableType = 0;\r\n  levelOrVariation = 0;\r\n  dataPointer = 0;\r\n  value: number | string = 0;\r\n  u1 = 0;\r\n\r\n  load(stream: BinaryStream, useOptionalInts: boolean): void {\r\n    this.id = stream.readBinary(4);\r\n    this.variableType = stream.readInt32();\r\n\r\n    if (useOptionalInts) {\r\n      this.levelOrVariation = stream.readInt32();\r\n      this.dataPointer = stream.readInt32();\r\n    }\r\n\r\n    if (this.variableType === 0) {\r\n      this.value = stream.readInt32();\r\n    } else if (this.variableType === 1 || this.variableType === 2) {\r\n      this.value = stream.readFloat32();\r\n    } else if (this.variableType === 3) {\r\n      this.value = stream.readNull();\r\n    } else {\r\n      throw new Error(`Modification: unknown variable type ${this.variableType}`);\r\n    }\r\n\r\n    this.u1 = stream.readInt32();\r\n  }\r\n\r\n  save(stream: BinaryStream, useOptionalInts: boolean): void {\r\n    stream.writeBinary(this.id);\r\n    stream.writeInt32(this.variableType);\r\n\r\n    if (useOptionalInts) {\r\n      stream.writeInt32(this.levelOrVariation);\r\n      stream.writeInt32(this.dataPointer);\r\n    }\r\n\r\n    if (this.variableType === 0) {\r\n      stream.writeInt32(<number>this.value);\r\n    } else if (this.variableType === 1 || this.variableType === 2) {\r\n      stream.writeFloat32(<number>this.value);\r\n    } else if (this.variableType === 3) {\r\n      stream.writeNull(<string>this.value);\r\n    } else {\r\n      throw new Error(`Modification: unknown variable type ${this.variableType}`);\r\n    }\r\n\r\n    stream.writeInt32(this.u1);\r\n  }\r\n\r\n  getByteLength(useOptionalInts: boolean): number {\r\n    let size = 12;\r\n\r\n    if (useOptionalInts) {\r\n      size += 8;\r\n    }\r\n\r\n    if (this.variableType === 3) {\r\n      size += byteLengthUtf8(<string>this.value) + 1;\r\n    } else {\r\n      size += 4;\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from \"../../../common/binarystream\";\r\nimport Modification from \"./modification\";\r\n\r\n/**\r\n * A modified object.\r\n */\r\nexport default class ModifiedObject {\r\n  oldId = \"\\0\\0\\0\\0\";\r\n  newId = \"\\0\\0\\0\\0\";\r\n  sets = 1;\r\n  setsFlag: number[] = [];\r\n  modifications: Modification[] = [];\r\n\r\n  load(\r\n    stream: BinaryStream,\r\n    useOptionalInts: boolean,\r\n    formatVersion: number\r\n  ): void {\r\n    this.oldId = stream.readBinary(4);\r\n    this.newId = stream.readBinary(4);\r\n\r\n    if (formatVersion >= 3) {\r\n      this.sets = stream.readUint32();\r\n    }\r\n\r\n    for (let set = 0; set < this.sets; set++) {\r\n      if (formatVersion >= 3) {\r\n        this.setsFlag[set] = stream.readUint32();\r\n      }\r\n\r\n      for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n        const modification = new Modification();\r\n\r\n        modification.load(stream, useOptionalInts);\r\n\r\n        this.modifications[i] = modification;\r\n      }\r\n    }\r\n  }\r\n\r\n  save(\r\n    stream: BinaryStream,\r\n    useOptionalInts: boolean,\r\n    formatVersion: number\r\n  ): void {\r\n    if (this.oldId !== \"\\0\\0\\0\\0\") {\r\n      stream.writeBinary(this.oldId);\r\n    } else {\r\n      stream.writeUint32(0);\r\n    }\r\n\r\n    if (this.newId !== \"\\0\\0\\0\\0\") {\r\n      stream.writeBinary(this.newId);\r\n    } else {\r\n      stream.writeUint32(0);\r\n    }\r\n\r\n    if (formatVersion >= 3) {\r\n      stream.writeUint32(this.sets);\r\n    }\r\n\r\n    stream.writeUint32(this.modifications.length);\r\n\r\n    for (let set = 0; set < this.sets; set++) {\r\n      if (formatVersion >= 3) {\r\n        stream.writeUint32(this.setsFlag[set]);\r\n      }\r\n      for (const modification of this.modifications) {\r\n        modification.save(stream, useOptionalInts);\r\n      }\r\n    }\r\n  }\r\n\r\n  getByteLength(useOptionalInts: boolean, formatVersion: number): number {\r\n    let size = formatVersion >= 3 ? 16 : 12;\r\n\r\n    for (let set = 0; set < this.sets; set++) {\r\n      if (formatVersion >= 3) {\r\n        size += 4;\r\n      }\r\n      for (const modification of this.modifications) {\r\n        size += modification.getByteLength(useOptionalInts);\r\n      }\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from \"../../../common/binarystream\";\r\nimport ModifiedObject from \"./modifiedobject\";\r\n\r\n/**\r\n * A modification table.\r\n */\r\nexport default class ModificationTable {\r\n  objects: ModifiedObject[] = [];\r\n\r\n  load(\r\n    stream: BinaryStream,\r\n    useOptionalInts: boolean,\r\n    formatVersion: number\r\n  ): void {\r\n    for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n      const object = new ModifiedObject();\r\n\r\n      object.load(stream, useOptionalInts, formatVersion);\r\n\r\n      this.objects[i] = object;\r\n    }\r\n  }\r\n\r\n  save(\r\n    stream: BinaryStream,\r\n    useOptionalInts: boolean,\r\n    formatVersion: number\r\n  ): void {\r\n    stream.writeUint32(this.objects.length);\r\n\r\n    for (const object of this.objects) {\r\n      object.save(stream, useOptionalInts, formatVersion);\r\n    }\r\n  }\r\n\r\n  getByteLength(useOptionalInts: boolean, formatVersion: number): number {\r\n    let size = 4;\r\n\r\n    for (const object of this.objects) {\r\n      size += object.getByteLength(useOptionalInts, formatVersion);\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from \"../../../common/binarystream\";\r\nimport ModificationTable from \"../w3u/modificationtable\";\r\n\r\n/**\r\n * war3map.w3d - the doodad modification file.\r\n *\r\n * Also used for war3map.w3a (abilities), and war3map.w3q (upgrades).\r\n */\r\nexport default class War3MapW3d {\r\n  version = 0;\r\n  originalTable = new ModificationTable();\r\n  customTable = new ModificationTable();\r\n\r\n  load(bufferOrStream: ArrayBuffer | Uint8Array | BinaryStream): void {\r\n    let stream;\r\n\r\n    if (bufferOrStream instanceof BinaryStream) {\r\n      stream = bufferOrStream;\r\n    } else {\r\n      stream = new BinaryStream(bufferOrStream);\r\n    }\r\n\r\n    this.version = stream.readInt32();\r\n    this.originalTable.load(stream, true, this.version);\r\n    this.customTable.load(stream, true, this.version);\r\n  }\r\n\r\n  save(): Uint8Array {\r\n    const stream = new BinaryStream(new ArrayBuffer(this.getByteLength()));\r\n\r\n    stream.writeInt32(this.version);\r\n    this.originalTable.save(stream, true, this.version);\r\n    this.customTable.save(stream, true, this.version);\r\n\r\n    return stream.uint8array;\r\n  }\r\n\r\n  getByteLength(): number {\r\n    return (\r\n      4 +\r\n      this.originalTable.getByteLength(true, this.version) +\r\n      this.customTable.getByteLength(true, this.version)\r\n    );\r\n  }\r\n}\r\n","import BinaryStream from \"../../../common/binarystream\";\r\nimport ModificationTable from \"./modificationtable\";\r\n\r\n/**\r\n * war3map.w3u - the unit modification file.\r\n *\r\n * Also used for war3map.w3t (items), war3map.w3b (destructibles), and war3map.w3h (buffs).\r\n */\r\nexport default class War3MapW3u {\r\n  version = 0;\r\n  originalTable = new ModificationTable();\r\n  customTable = new ModificationTable();\r\n\r\n  load(bufferOrStream: ArrayBuffer | Uint8Array | BinaryStream): void {\r\n    let stream;\r\n\r\n    if (bufferOrStream instanceof BinaryStream) {\r\n      stream = bufferOrStream;\r\n    } else {\r\n      stream = new BinaryStream(bufferOrStream);\r\n    }\r\n\r\n    this.version = stream.readInt32();\r\n    this.originalTable.load(stream, false, this.version);\r\n    this.customTable.load(stream, false, this.version);\r\n  }\r\n\r\n  save(): Uint8Array {\r\n    const stream = new BinaryStream(new ArrayBuffer(this.getByteLength()));\r\n\r\n    stream.writeInt32(this.version);\r\n    this.originalTable.save(stream, false, this.version);\r\n    this.customTable.save(stream, false, this.version);\r\n\r\n    return stream.uint8array;\r\n  }\r\n\r\n  getByteLength(): number {\r\n    return (\r\n      4 +\r\n      this.originalTable.getByteLength(false, this.version) +\r\n      this.customTable.getByteLength(false, this.version)\r\n    );\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\n\r\n/**\r\n * A custom text trigger.\r\n */\r\nexport default class CustomTextTrigger {\r\n  text = '';\r\n\r\n  load(stream: BinaryStream): void {\r\n    const textLength = stream.readInt32();\r\n\r\n    if (textLength) {\r\n      this.text = stream.read(textLength - 1);\r\n      stream.skip(1);\r\n    }\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    if (this.text.length) {\r\n      stream.writeInt32(byteLengthUtf8(this.text) + 1);\r\n      stream.write(this.text);\r\n      stream.skip(1);\r\n    } else {\r\n      stream.writeInt32(0);\r\n    }\r\n  }\r\n\r\n  getByteLength(): number {\r\n    let size = 4;\r\n\r\n    if (this.text.length) {\r\n      size += byteLengthUtf8(this.text) + 1;\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\nimport CustomTextTrigger from './customtexttrigger';\r\n\r\n/**\r\n * war3map.wct - the custom text (jass) trigger file.\r\n */\r\nexport default class War3MapWct {\r\n  version = 0;\r\n  comment = '';\r\n  trigger = new CustomTextTrigger();\r\n  triggers: CustomTextTrigger[] = [];\r\n\r\n  load(buffer: ArrayBuffer | Uint8Array): void {\r\n    const stream = new BinaryStream(buffer);\r\n\r\n    this.version = stream.readInt32();\r\n\r\n    if (this.version === 1) {\r\n      this.comment = stream.readNull();\r\n\r\n      this.trigger.load(stream);\r\n    }\r\n\r\n    for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n      const trigger = new CustomTextTrigger();\r\n\r\n      trigger.load(stream);\r\n\r\n      this.triggers[i] = trigger;\r\n    }\r\n  }\r\n\r\n  save(): Uint8Array {\r\n    const stream = new BinaryStream(new ArrayBuffer(this.getByteLength()));\r\n\r\n    stream.writeInt32(this.version);\r\n\r\n    if (this.version === 1) {\r\n      stream.writeNull(this.comment);\r\n\r\n      this.trigger.save(stream);\r\n    }\r\n\r\n    stream.writeUint32(this.triggers.length);\r\n\r\n    for (const trigger of this.triggers) {\r\n      trigger.save(stream);\r\n    }\r\n\r\n    return stream.uint8array;\r\n  }\r\n\r\n  getByteLength(): number {\r\n    let size = 8;\r\n\r\n    if (this.version === 1) {\r\n      size += byteLengthUtf8(this.comment) + 1 + this.trigger.getByteLength();\r\n    }\r\n\r\n    for (const trigger of this.triggers) {\r\n      size += trigger.getByteLength();\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\n\r\n/**\r\n * A Trigger category.\r\n * \r\n * Used to scope triggers together in a Folder-like hierarchy.\r\n */\r\nexport default class TriggerCategory {\r\n  id = 0;\r\n  name = '';\r\n  isComment = 0;\r\n\r\n  load(stream: BinaryStream, version: number): void {\r\n    this.id = stream.readInt32();\r\n    this.name = stream.readNull();\r\n\r\n    if (version === 7) {\r\n      this.isComment = stream.readInt32();\r\n    }\r\n  }\r\n\r\n  save(stream: BinaryStream, version: number): void {\r\n    stream.writeInt32(this.id);\r\n    stream.writeNull(this.name);\r\n\r\n    if (version === 7) {\r\n      stream.writeInt32(this.isComment);\r\n    }\r\n  }\r\n\r\n  getByteLength(version: number): number {\r\n    let size = 5 + byteLengthUtf8(this.name);\r\n\r\n    if (version === 7) {\r\n      size += 4;\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\n\r\n/**\r\n * A global variable.\r\n */\r\nexport default class Variable {\r\n  name = '';\r\n  type = '';\r\n  u1 = 0;\r\n  isArray = 0;\r\n  arraySize = 0;\r\n  isInitialized = 0;\r\n  initialValue = '';\r\n\r\n  load(stream: BinaryStream, version: number): void {\r\n    this.name = stream.readNull();\r\n    this.type = stream.readNull();\r\n    this.u1 = stream.readInt32();\r\n    this.isArray = stream.readInt32();\r\n\r\n    if (version === 7) {\r\n      this.arraySize = stream.readInt32();\r\n    }\r\n\r\n    this.isInitialized = stream.readInt32();\r\n    this.initialValue = stream.readNull();\r\n  }\r\n\r\n  save(stream: BinaryStream, version: number): void {\r\n    stream.writeNull(this.name);\r\n    stream.writeNull(this.type);\r\n    stream.writeInt32(this.u1);\r\n    stream.writeInt32(this.isArray);\r\n\r\n    if (version === 7) {\r\n      stream.writeInt32(this.arraySize);\r\n    }\r\n\r\n    stream.writeInt32(this.isInitialized);\r\n    stream.writeNull(this.initialValue);\r\n  }\r\n\r\n  getByteLength(version: number): number {\r\n    let size = 15 + byteLengthUtf8(this.name) + byteLengthUtf8(this.type) + byteLengthUtf8(this.initialValue);\r\n\r\n    if (version === 7) {\r\n      size += 4;\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\nimport Parameter from './parameter';\r\nimport { TriggerData } from './triggerdata';\r\n\r\n/**\r\n * A function call in an expression.\r\n */\r\nexport default class SubParameters {\r\n  type = 0;\r\n  name = '';\r\n  beginParameters = 0;\r\n  parameters: Parameter[] = [];\r\n\r\n  load(stream: BinaryStream, version: number, triggerData: TriggerData): void {\r\n    this.type = stream.readInt32();\r\n\r\n    if (this.type < 0 || this.type > 3) {\r\n      throw new Error(`SubParameters: Bad type: ${this.type}`);\r\n    }\r\n\r\n    this.name = stream.readNull();\r\n\r\n    if (this.name.length === 0) {\r\n      throw new Error(`SubParameters: Empty name`);\r\n    }\r\n\r\n    this.beginParameters = stream.readInt32();\r\n\r\n    if (this.beginParameters) {\r\n      const signature = triggerData.getFunction(this.type, this.name);\r\n\r\n      if (!signature) {\r\n        throw new Error(`SubParameters \"${this.name}:${this.type}\": Unknown signature`);\r\n      }\r\n\r\n      const args = signature.args;\r\n\r\n      for (let i = 0, l = args.length; i < l; i++) {\r\n        const parameter = new Parameter();\r\n\r\n        try {\r\n          parameter.load(stream, version, triggerData);\r\n        } catch (e) {\r\n          throw new Error(`SubParameters \"${this.name}\": Parameter ${i}: ${e}`);\r\n        }\r\n\r\n        this.parameters[i] = parameter;\r\n      }\r\n    }\r\n  }\r\n\r\n  save(stream: BinaryStream, version: number): void {\r\n    stream.writeInt32(this.type);\r\n    stream.writeNull(this.name);\r\n    stream.writeInt32(this.beginParameters);\r\n\r\n    for (const parameter of this.parameters) {\r\n      parameter.save(stream, version);\r\n    }\r\n  }\r\n\r\n  getByteLength(version: number): number {\r\n    let size = 9 + byteLengthUtf8(this.name);\r\n\r\n    if (this.parameters.length) {\r\n      for (const parameter of this.parameters) {\r\n        size += parameter.getByteLength(version);\r\n      }\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\nimport SubParameters from './subparameters';\r\nimport { TriggerData } from './triggerdata';\r\n\r\n/**\r\n * A function parameter. Can be a function itself, in which case it will have a SubParameters structure.\r\n */\r\nexport default class Parameter {\r\n  type = 0;\r\n  value = '';\r\n  subParameters: SubParameters | null = null;\r\n  u1 = 0;\r\n  isArray = 0;\r\n  arrayIndex: Parameter | null = null;\r\n\r\n  load(stream: BinaryStream, version: number, triggerData: TriggerData): void {\r\n    this.type = stream.readInt32();\r\n\r\n    if (this.type < -1 || this.type > 3) {\r\n      throw new Error(`Parameter: Bad type: ${this.type}`);\r\n    }\r\n\r\n    this.value = stream.readNull();\r\n\r\n    if (stream.readInt32()) {\r\n      const subParameters = new SubParameters();\r\n\r\n      try {\r\n        subParameters.load(stream, version, triggerData);\r\n      } catch (e) {\r\n        throw new Error(`Parameter \"${this.value}\": SubParameters ${e}`);\r\n      }\r\n\r\n      this.subParameters = subParameters;\r\n    }\r\n\r\n    if ((version === 4 && this.type === 2) || (version === 7 && this.subParameters)) {\r\n      this.u1 = stream.readInt32();\r\n    }\r\n\r\n    if ((version === 4 && this.type !== 2) || version === 7) {\r\n      this.isArray = stream.readInt32();\r\n    }\r\n\r\n    if (this.isArray) {\r\n      const arrayIndex = new Parameter();\r\n\r\n      try {\r\n        arrayIndex.load(stream, version, triggerData);\r\n      } catch (e) {\r\n        throw new Error(`Parameter \"${this.value}\": ArrayIndex: ${e}`);\r\n      }\r\n\r\n      this.arrayIndex = arrayIndex;\r\n    }\r\n  }\r\n\r\n  save(stream: BinaryStream, version: number): void {\r\n    stream.writeInt32(this.type);\r\n    stream.writeNull(this.value);\r\n\r\n    if (this.subParameters) {\r\n      stream.writeInt32(1);\r\n      this.subParameters.save(stream, version);\r\n    } else {\r\n      stream.writeInt32(0);\r\n    }\r\n\r\n    if ((version === 4 && this.type === 2) || (version === 7 && this.subParameters)) {\r\n      stream.writeInt32(this.u1);\r\n    }\r\n\r\n    if ((version === 4 && this.type !== 2) || version === 7) {\r\n      stream.writeInt32(this.isArray);\r\n    }\r\n\r\n    if (this.isArray && this.arrayIndex) {\r\n      this.arrayIndex.save(stream, version);\r\n    }\r\n  }\r\n\r\n  getByteLength(version: number): number {\r\n    let size = 9 + byteLengthUtf8(this.value);\r\n\r\n    if (this.subParameters) {\r\n      size += this.subParameters.getByteLength(version);\r\n    }\r\n\r\n    if ((version === 4 && this.type === 2) || (version === 7 && this.subParameters)) {\r\n      size += 4;\r\n    }\r\n\r\n    if ((version === 4 && this.type !== 2) || version === 7) {\r\n      size += 4;\r\n    }\r\n\r\n    if (this.isArray && this.arrayIndex) {\r\n      size += this.arrayIndex.getByteLength(version);\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\nimport Parameter from './parameter';\r\nimport { TriggerData } from './triggerdata';\r\n\r\n/**\r\n * An Event/Condition/Action.\r\n */\r\nexport default class ECA {\r\n  type = -1;\r\n  group = -1;\r\n  name = '';\r\n  isEnabled = 0;\r\n  parameters: Parameter[] = [];\r\n  ecas: ECA[] = [];\r\n\r\n  load(stream: BinaryStream, version: number, isChildECA: boolean, triggerData: TriggerData): void {\r\n    this.type = stream.readInt32();\r\n\r\n    if (this.type < 0 || this.type > 3) {\r\n      throw new Error(`ECA: Bad type: ${this.type}`);\r\n    }\r\n\r\n    if (isChildECA) {\r\n      this.group = stream.readUint32();\r\n    }\r\n\r\n    this.name = stream.readNull();\r\n\r\n    if (this.name.length === 0) {\r\n      throw new Error('ECA: Empty name');\r\n    }\r\n\r\n    this.isEnabled = stream.readInt32();\r\n\r\n    const signature = triggerData.getFunction(this.type, this.name);\r\n\r\n    if (!signature) {\r\n      throw new Error(`ECA \"${this.name}:${this.type}\": Unknown signature`);\r\n    }\r\n\r\n    const args = signature.args;\r\n\r\n    for (let i = 0, l = args.length; i < l; i++) {\r\n      const parameter = new Parameter();\r\n\r\n      try {\r\n        parameter.load(stream, version, triggerData);\r\n      } catch (e) {\r\n        throw new Error(`ECA \"${this.name}\": Parameter ${i}: ${e}`);\r\n      }\r\n\r\n      this.parameters[i] = parameter;\r\n    }\r\n\r\n    if (version === 7) {\r\n      for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n        const eca = new ECA();\r\n\r\n        try {\r\n          eca.load(stream, version, true, triggerData);\r\n        } catch (e) {\r\n          throw new Error(`ECA \"${this.name}\": Child ECA ${i} ${e}`);\r\n        }\r\n\r\n        this.ecas[i] = eca;\r\n      }\r\n    }\r\n  }\r\n\r\n  save(stream: BinaryStream, version: number): void {\r\n    stream.writeInt32(this.type);\r\n\r\n    if (this.group !== -1) {\r\n      stream.writeInt32(this.group);\r\n    }\r\n\r\n    stream.writeNull(this.name);\r\n    stream.writeInt32(this.isEnabled);\r\n\r\n    for (const parameter of this.parameters) {\r\n      parameter.save(stream, version);\r\n    }\r\n\r\n    if (version === 7) {\r\n      stream.writeUint32(this.ecas.length);\r\n\r\n      for (const eca of this.ecas) {\r\n        eca.save(stream, version);\r\n      }\r\n    }\r\n  }\r\n\r\n  getByteLength(version: number): number {\r\n    let size = 9 + byteLengthUtf8(this.name);\r\n\r\n    if (this.group !== -1) {\r\n      size += 4;\r\n    }\r\n\r\n    for (const parameter of this.parameters) {\r\n      size += parameter.getByteLength(version);\r\n    }\r\n\r\n    if (version === 7) {\r\n      size += 4;\r\n\r\n      for (const eca of this.ecas) {\r\n        size += eca.getByteLength(version);\r\n      }\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\nimport ECA from './eca';\r\nimport { TriggerData } from './triggerdata';\r\n\r\n/**\r\n * A GUI Trigger.\r\n */\r\nexport default class Trigger {\r\n  name = '';\r\n  description = '';\r\n  isComment = 0;\r\n  isEnabled = 0;\r\n  isCustom = 0;\r\n  isInitiallyOff = 0;\r\n  runOnInitialization = 0;\r\n  category = 0;\r\n  ecas: ECA[] = [];\r\n\r\n  load(stream: BinaryStream, version: number, triggerData: TriggerData): void {\r\n    this.name = stream.readNull();\r\n    this.description = stream.readNull();\r\n\r\n    if (version === 7) {\r\n      this.isComment = stream.readInt32();\r\n    }\r\n\r\n    this.isEnabled = stream.readInt32();\r\n    this.isCustom = stream.readInt32();\r\n    this.isInitiallyOff = stream.readInt32();\r\n    this.runOnInitialization = stream.readInt32();\r\n    this.category = stream.readInt32();\r\n\r\n    for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n      const eca = new ECA();\r\n\r\n      try {\r\n        eca.load(stream, version, false, triggerData);\r\n      } catch (e) {\r\n        throw new Error(`Trigger \"${this.name}\": ECA ${i}: ${e}`);\r\n      }\r\n\r\n      this.ecas[i] = eca;\r\n    }\r\n  }\r\n\r\n  save(stream: BinaryStream, version: number): void {\r\n    stream.writeNull(this.name);\r\n    stream.writeNull(this.description);\r\n\r\n    if (version === 7) {\r\n      stream.writeInt32(this.isComment);\r\n    }\r\n\r\n    stream.writeInt32(this.isEnabled);\r\n    stream.writeInt32(this.isCustom);\r\n    stream.writeInt32(this.isInitiallyOff);\r\n    stream.writeInt32(this.runOnInitialization);\r\n    stream.writeInt32(this.category);\r\n    stream.writeUint32(this.ecas.length);\r\n\r\n    for (const eca of this.ecas) {\r\n      eca.save(stream, version);\r\n    }\r\n  }\r\n\r\n  getByteLength(version: number): number {\r\n    let size = 26 + byteLengthUtf8(this.name) + byteLengthUtf8(this.description);\r\n\r\n    if (version === 7) {\r\n      size += 4;\r\n    }\r\n\r\n    for (const eca of this.ecas) {\r\n      size += eca.getByteLength(version);\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport TriggerCategory from './triggercategory';\r\nimport Variable from './variable';\r\nimport Trigger from './trigger';\r\nimport { TriggerData } from './triggerdata';\r\n\r\n/**\r\n * war3map.wtg - the trigger file.\r\n */\r\nexport default class War3MapWtg {\r\n  version = 0;\r\n  categories: TriggerCategory[] = [];\r\n  u1 = 0;\r\n  variables: Variable[] = [];\r\n  triggers: Trigger[] = [];\r\n\r\n  load(buffer: ArrayBuffer | Uint8Array, triggerData: TriggerData): void {\r\n    const stream = new BinaryStream(buffer);\r\n\r\n    if (stream.readBinary(4) !== 'WTG!') {\r\n      throw new Error('Not a WTG file');\r\n    }\r\n\r\n    this.version = stream.readInt32();\r\n\r\n    for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n      const category = new TriggerCategory();\r\n\r\n      category.load(stream, this.version);\r\n\r\n      this.categories[i] = category;\r\n    }\r\n\r\n    this.u1 = stream.readInt32();\r\n\r\n    for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n      const variable = new Variable();\r\n\r\n      variable.load(stream, this.version);\r\n\r\n      this.variables[i] = variable;\r\n    }\r\n\r\n    for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n      const trigger = new Trigger();\r\n\r\n      try {\r\n        trigger.load(stream, this.version, triggerData);\r\n      } catch (e) {\r\n        throw new Error(`Trigger ${i}: ${e}`);\r\n      }\r\n\r\n      this.triggers[i] = trigger;\r\n    }\r\n  }\r\n\r\n  save(): Uint8Array {\r\n    const stream = new BinaryStream(new ArrayBuffer(this.getByteLength()));\r\n\r\n    stream.writeBinary('WTG!');\r\n    stream.writeInt32(this.version);\r\n    stream.writeUint32(this.categories.length);\r\n\r\n    for (const category of this.categories) {\r\n      category.save(stream, this.version);\r\n    }\r\n\r\n    stream.writeInt32(this.u1);\r\n    stream.writeUint32(this.variables.length);\r\n\r\n    for (const variable of this.variables) {\r\n      variable.save(stream, this.version);\r\n    }\r\n\r\n    stream.writeUint32(this.triggers.length);\r\n\r\n    for (const trigger of this.triggers) {\r\n      trigger.save(stream, this.version);\r\n    }\r\n\r\n    return stream.uint8array;\r\n  }\r\n\r\n  getByteLength(): number {\r\n    let size = 24;\r\n    const version = this.version;\r\n\r\n    for (const category of this.categories) {\r\n      size += category.getByteLength(version);\r\n    }\r\n\r\n    for (const variable of this.variables) {\r\n      size += variable.getByteLength(version);\r\n    }\r\n\r\n    for (const trigger of this.triggers) {\r\n      size += trigger.getByteLength(version);\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import TokenStream from '../../mdlx/tokenstream';\r\n\r\n/**\r\n * war3map.wts - the string table file.\r\n *\r\n * Contains a map of number->string.\r\n * When other map data like triggers use the string TRIGSTR_XXX, where XXX is a number, the value will be fetched from the table.\r\n */\r\nexport default class War3MapWts {\r\n  stringMap: Map<number, string> = new Map();\r\n\r\n  load(buffer: string): void {\r\n    const stream = new TokenStream(buffer);\r\n    let token;\r\n\r\n    // Find the first instance of \"STRING\".\r\n    // There are some weird war3map.wts files that begin with the bytes \"ï»¿\", and this causes the tokenizer to see the first token as \"ï»¿STRING\".\r\n    // Going to the first \"STRING\" means we can ignore any weird bytes that happened to be before.\r\n    const start = buffer.indexOf('STRING');\r\n\r\n    // Can war3map.wts have no entries? I don't know, might as well add a condition.\r\n    if (start === -1) {\r\n      throw new Error('Not a valid war3map.wts buffer');\r\n    }\r\n\r\n    stream.index = start;\r\n\r\n    while ((token = stream.readToken())) {\r\n      if (token === 'STRING') {\r\n        const index = stream.readInt();\r\n\r\n        stream.read(); // {\r\n\r\n        const end = buffer.indexOf('}', stream.index);\r\n\r\n        // For broken files, keep whatever data can be kept, and throw an exception.\r\n        if (end === -1) {\r\n          this.stringMap.set(index, buffer.slice(stream.index, buffer.length).trim());\r\n\r\n          throw new Error(`WTS: missing data in string ${this.stringMap.size} (and maybe more)`);\r\n        }\r\n\r\n        this.stringMap.set(index, buffer.slice(stream.index, end).trim());\r\n\r\n        stream.index = end;\r\n      }\r\n    }\r\n  }\r\n\r\n  save(): string {\r\n    let buffer = '';\r\n\r\n    for (const [key, value] of this.stringMap) {\r\n      buffer += `STRING ${key}\\r\\n{\\r\\n${value}\\r\\n}\\r\\n\\r\\n`;\r\n    }\r\n\r\n    return buffer;\r\n  }\r\n\r\n  /**\r\n   * Get the string at the given index.\r\n   * \r\n   * Strings in the form \"TRIGSTR_nnn\" are also supported.\r\n   */\r\n  getString(index: number | string): string | undefined {\r\n    if (typeof index === 'string') {\r\n      if (index.startsWith('TRIGSTR_')) {\r\n        return this.stringMap.get(parseInt(index.slice(8)));\r\n      }\r\n    } else {\r\n      return this.stringMap.get(index);\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Set the string at the given index.\r\n   * \r\n   * Strings in the form \"TRIGSTR_nnn\" are also supported.\r\n   */\r\n  setString(index: number | string, value: string): void {\r\n    if (typeof index === 'string') {\r\n      if (index.startsWith('TRIGSTR_')) {\r\n        this.stringMap.set(parseInt(index.slice(8)), value);\r\n      }\r\n    } else {\r\n      this.stringMap.set(index, value);\r\n    }\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\n\r\n/**\r\n * A force.\r\n */\r\nexport default class Force {\r\n  flags = 0;\r\n  playerMasks = 0;\r\n  name = '';\r\n\r\n  load(stream: BinaryStream): void {\r\n    this.flags = stream.readUint32();\r\n    this.playerMasks = stream.readUint32();\r\n    this.name = stream.readNull();\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeUint32(this.flags);\r\n    stream.writeUint32(this.playerMasks);\r\n    stream.writeNull(this.name);\r\n  }\r\n\r\n  getByteLength(): number {\r\n    return 9 + byteLengthUtf8(this.name);\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\n\r\n/**\r\n * A player.\r\n */\r\nexport default class Player {\r\n  id = 0;\r\n  type = 0;\r\n  race = 0;\r\n  isFixedStartPosition = 0;\r\n  name = '';\r\n  startLocation = new Float32Array(2);\r\n  allyLowPriorities = 0;\r\n  allyHighPriorities = 0;\r\n  unknown1 = new Uint8Array(8);\r\n\r\n  load(stream: BinaryStream, version: number): void {\r\n    this.id = stream.readInt32();\r\n    this.type = stream.readInt32();\r\n    this.race = stream.readInt32();\r\n    this.isFixedStartPosition = stream.readInt32();\r\n    this.name = stream.readNull();\r\n    stream.readFloat32Array(this.startLocation);\r\n    this.allyLowPriorities = stream.readUint32();\r\n    this.allyHighPriorities = stream.readUint32();\r\n    if (version > 30) {\r\n      stream.readUint8Array(this.unknown1);\r\n    }\r\n  }\r\n\r\n  save(stream: BinaryStream, version: number): void {\r\n    stream.writeInt32(this.id);\r\n    stream.writeInt32(this.type);\r\n    stream.writeInt32(this.race);\r\n    stream.writeInt32(this.isFixedStartPosition);\r\n    stream.writeNull(this.name);\r\n    stream.writeFloat32Array(this.startLocation);\r\n    stream.writeUint32(this.allyLowPriorities);\r\n    stream.writeUint32(this.allyHighPriorities);\r\n    if (version > 30) {\r\n      stream.writeUint8Array(this.unknown1);\r\n    }\r\n  }\r\n\r\n  getByteLength(version: number): number {\r\n    let size = 33 + byteLengthUtf8(this.name);\r\n\r\n    if (version > 30) {\r\n      size += 8;\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\n\r\n/**\r\n * A random item.\r\n */\r\nexport default class RandomItem {\r\n  chance = 0;\r\n  id = '\\0\\0\\0\\0';\r\n\r\n  load(stream: BinaryStream): void {\r\n    this.chance = stream.readInt32();\r\n    this.id = stream.readBinary(4);\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeInt32(this.chance);\r\n    stream.writeBinary(this.id);\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport RandomItem from './randomitem';\r\n\r\n/**\r\n * A random item set.\r\n */\r\nexport default class RandomItemSet {\r\n  items: RandomItem[] = [];\r\n\r\n  load(stream: BinaryStream): void {\r\n    for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n      const item = new RandomItem();\r\n\r\n      item.load(stream);\r\n\r\n      this.items[i] = item;\r\n    }\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeUint32(this.items.length);\r\n\r\n    for (const item of this.items) {\r\n      item.save(stream);\r\n    }\r\n  }\r\n\r\n  getByteLength(): number {\r\n    return 4 + this.items.length * 8;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\nimport RandomItemSet from './randomitemset';\r\n\r\n/**\r\n * A random item table.\r\n */\r\nexport default class RandomItemTable {\r\n  id = 0;\r\n  name = '';\r\n  sets: RandomItemSet[] = [];\r\n\r\n  load(stream: BinaryStream): void {\r\n    this.id = stream.readInt32();\r\n    this.name = stream.readNull();\r\n\r\n    for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n      const set = new RandomItemSet();\r\n\r\n      set.load(stream);\r\n\r\n      this.sets[i] = set;\r\n    }\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeInt32(this.id);\r\n    stream.writeNull(this.name);\r\n    stream.writeUint32(this.sets.length);\r\n\r\n    for (const set of this.sets) {\r\n      set.save(stream);\r\n    }\r\n  }\r\n\r\n  getByteLength(): number {\r\n    let size = 9 + byteLengthUtf8(this.name);\r\n\r\n    for (const set of this.sets) {\r\n      size += set.getByteLength();\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\n\r\n/**\r\n * A random unit.\r\n */\r\nexport default class RandomUnit {\r\n  chance = 0;\r\n  ids: string[] = [];\r\n\r\n  load(stream: BinaryStream, positions: number): void {\r\n    this.chance = stream.readInt32();\r\n\r\n    for (let i = 0; i < positions; i++) {\r\n      this.ids[i] = stream.readBinary(4);\r\n    }\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeInt32(this.chance);\r\n\r\n    for (const id of this.ids) {\r\n      stream.writeBinary(id);\r\n    }\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\nimport RandomUnit from './randomunit';\r\n\r\n/**\r\n * A random unit table.\r\n */\r\nexport default class RandomUnitTable {\r\n  id = 0;\r\n  name = '';\r\n  positions = 0;\r\n  columnTypes = new Int32Array(0);\r\n  units: RandomUnit[] = [];\r\n\r\n  load(stream: BinaryStream): void {\r\n    this.id = stream.readInt32();\r\n    this.name = stream.readNull();\r\n    this.positions = stream.readInt32();\r\n    this.columnTypes = stream.readInt32Array(this.positions);\r\n\r\n    for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n      const unit = new RandomUnit();\r\n\r\n      unit.load(stream, this.positions);\r\n\r\n      this.units[i] = unit;\r\n    }\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeInt32(this.id);\r\n    stream.writeNull(this.name);\r\n    stream.writeInt32(this.positions);\r\n    stream.writeInt32Array(this.columnTypes);\r\n    stream.writeUint32(this.units.length);\r\n\r\n    for (const unit of this.units) {\r\n      unit.save(stream);\r\n    }\r\n  }\r\n\r\n  getByteLength(): number {\r\n    return 13 + byteLengthUtf8(this.name) + this.columnTypes.byteLength + (this.units.length * (4 + 4 * this.positions));\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\n\r\n/**\r\n * A tech availablity change.\r\n */\r\nexport default class TechAvailabilityChange {\r\n  playerFlags = 0;\r\n  id = '\\0\\0\\0\\0';\r\n\r\n  load(stream: BinaryStream): void {\r\n    this.playerFlags = stream.readUint32();\r\n    this.id = stream.readBinary(4);\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeUint32(this.playerFlags);\r\n    stream.writeBinary(this.id);\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\n\r\n/**\r\n * An upgrade availability change.\r\n */\r\nexport default class UpgradeAvailabilityChange {\r\n  playerFlags = 0;\r\n  id = '\\0\\0\\0\\0';\r\n  levelAffected = 0;\r\n  availability = 0;\r\n\r\n  load(stream: BinaryStream): void {\r\n    this.playerFlags = stream.readUint32();\r\n    this.id = stream.readBinary(4);\r\n    this.levelAffected = stream.readInt32();\r\n    this.availability = stream.readInt32();\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeUint32(this.playerFlags);\r\n    stream.writeBinary(this.id);\r\n    stream.writeInt32(this.levelAffected);\r\n    stream.writeInt32(this.availability);\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\nimport Force from './force';\r\nimport Player from './player';\r\nimport RandomItemTable from './randomitemtable';\r\nimport RandomUnitTable from './randomunittable';\r\nimport TechAvailabilityChange from './techavailabilitychange';\r\nimport UpgradeAvailabilityChange from './upgradeavailabilitychange';\r\n\r\n/**\r\n * war3map.w3i - the general information file.\r\n */\r\nexport default class War3MapW3i {\r\n  version = 0;\r\n  saves = 0;\r\n  editorVersion = 0;\r\n  buildVersion = new Uint32Array(4);\r\n  name = '';\r\n  author = '';\r\n  description = '';\r\n  recommendedPlayers = '';\r\n  cameraBounds = new Float32Array(8);\r\n  cameraBoundsComplements = new Int32Array(4);\r\n  playableSize = new Int32Array(2);\r\n  flags = 0;\r\n  tileset = 'A';\r\n  campaignBackground = 0;\r\n  loadingScreenModel = '';\r\n  loadingScreenText = '';\r\n  loadingScreenTitle = '';\r\n  loadingScreenSubtitle = '';\r\n  loadingScreen = 0;\r\n  prologueScreenModel = '';\r\n  prologueScreenText = '';\r\n  prologueScreenTitle = '';\r\n  prologueScreenSubtitle = '';\r\n  useTerrainFog = 0;\r\n  fogHeight = new Float32Array(2);\r\n  fogDensity = 0;\r\n  fogColor = new Uint8Array(4);\r\n  globalWeather = 0;\r\n  soundEnvironment = '';\r\n  lightEnvironmentTileset = '\\0';\r\n  waterVertexColor = new Uint8Array(4);\r\n  scriptMode = 0;\r\n  graphicsMode = 0;\r\n  players: Player[] = [];\r\n  forces: Force[] = [];\r\n  upgradeAvailabilityChanges: UpgradeAvailabilityChange[] = [];\r\n  techAvailabilityChanges: TechAvailabilityChange[] = [];\r\n  randomUnitTables: RandomUnitTable[] = [];\r\n  randomItemTables: RandomItemTable[] = [];\r\n  unknown1 = 0;\r\n\r\n  load(buffer: ArrayBuffer | Uint8Array): void {\r\n    const stream = new BinaryStream(buffer);\r\n\r\n    this.version = stream.readInt32();\r\n    this.saves = stream.readInt32();\r\n    this.editorVersion = stream.readInt32();\r\n\r\n    if (this.version > 27) {\r\n      stream.readUint32Array(this.buildVersion);\r\n    }\r\n\r\n    this.name = stream.readNull();\r\n    this.author = stream.readNull();\r\n    this.description = stream.readNull();\r\n    this.recommendedPlayers = stream.readNull();\r\n    stream.readFloat32Array(this.cameraBounds);\r\n    stream.readInt32Array(this.cameraBoundsComplements);\r\n    stream.readInt32Array(this.playableSize);\r\n    this.flags = stream.readUint32();\r\n    this.tileset = stream.readBinary(1);\r\n    this.campaignBackground = stream.readInt32();\r\n\r\n    if (this.version > 24) {\r\n      this.loadingScreenModel = stream.readNull();\r\n    }\r\n\r\n    this.loadingScreenText = stream.readNull();\r\n    this.loadingScreenTitle = stream.readNull();\r\n    this.loadingScreenSubtitle = stream.readNull();\r\n    this.loadingScreen = stream.readInt32();\r\n\r\n    if (this.version > 24) {\r\n      this.prologueScreenModel = stream.readNull();\r\n    }\r\n\r\n    this.prologueScreenText = stream.readNull();\r\n    this.prologueScreenTitle = stream.readNull();\r\n    this.prologueScreenSubtitle = stream.readNull();\r\n\r\n    if (this.version > 24) {\r\n      this.useTerrainFog = stream.readInt32();\r\n      stream.readFloat32Array(this.fogHeight);\r\n      this.fogDensity = stream.readFloat32();\r\n      stream.readUint8Array(this.fogColor);\r\n      this.globalWeather = stream.readInt32();\r\n      this.soundEnvironment = stream.readNull();\r\n      this.lightEnvironmentTileset = stream.readBinary(1);\r\n      stream.readUint8Array(this.waterVertexColor);\r\n    }\r\n\r\n    if (this.version > 27) {\r\n      this.scriptMode = stream.readUint32();\r\n    }\r\n\r\n    if (this.version > 30) {\r\n      this.graphicsMode = stream.readUint32();\r\n      this.unknown1 = stream.readUint32();\r\n    }\r\n\r\n    for (let i = 0, l = stream.readInt32(); i < l; i++) {\r\n      const player = new Player();\r\n\r\n      player.load(stream, this.version);\r\n\r\n      this.players[i] = player;\r\n    }\r\n\r\n    for (let i = 0, l = stream.readInt32(); i < l; i++) {\r\n      const force = new Force();\r\n\r\n      force.load(stream);\r\n\r\n      this.forces[i] = force;\r\n    }\r\n\r\n    for (let i = 0, l = stream.readInt32(); i < l; i++) {\r\n      const upgradeAvailabilityChange = new UpgradeAvailabilityChange();\r\n\r\n      upgradeAvailabilityChange.load(stream);\r\n\r\n      this.upgradeAvailabilityChanges[i] = upgradeAvailabilityChange;\r\n    }\r\n\r\n    for (let i = 0, l = stream.readInt32(); i < l; i++) {\r\n      const techAvailabilityChange = new TechAvailabilityChange();\r\n\r\n      techAvailabilityChange.load(stream);\r\n\r\n      this.techAvailabilityChanges[i] = techAvailabilityChange;\r\n    }\r\n\r\n    for (let i = 0, l = stream.readInt32(); i < l; i++) {\r\n      const randomUnitTable = new RandomUnitTable();\r\n\r\n      randomUnitTable.load(stream);\r\n\r\n      this.randomUnitTables[i] = randomUnitTable;\r\n    }\r\n\r\n    if (this.version > 24) {\r\n      for (let i = 0, l = stream.readInt32(); i < l; i++) {\r\n        const randomItemTable = new RandomItemTable();\r\n\r\n        randomItemTable.load(stream);\r\n\r\n        this.randomItemTables[i] = randomItemTable;\r\n      }\r\n    }\r\n  }\r\n\r\n  save(): Uint8Array {\r\n    const stream = new BinaryStream(new ArrayBuffer(this.getByteLength()));\r\n\r\n    stream.writeInt32(this.version);\r\n    stream.writeInt32(this.saves);\r\n    stream.writeInt32(this.editorVersion);\r\n\r\n    if (this.version > 27) {\r\n      stream.writeUint32Array(this.buildVersion);\r\n    }\r\n\r\n    stream.writeNull(this.name);\r\n    stream.writeNull(this.author);\r\n    stream.writeNull(this.description);\r\n    stream.writeNull(this.recommendedPlayers);\r\n    stream.writeFloat32Array(this.cameraBounds);\r\n    stream.writeInt32Array(this.cameraBoundsComplements);\r\n    stream.writeInt32Array(this.playableSize);\r\n    stream.writeUint32(this.flags);\r\n    stream.writeBinary(this.tileset);\r\n    stream.writeInt32(this.campaignBackground);\r\n\r\n    if (this.version > 24) {\r\n      stream.writeNull(this.loadingScreenModel);\r\n    }\r\n\r\n    stream.writeNull(this.loadingScreenText);\r\n    stream.writeNull(this.loadingScreenTitle);\r\n    stream.writeNull(this.loadingScreenSubtitle);\r\n    stream.writeInt32(this.loadingScreen);\r\n\r\n    if (this.version > 24) {\r\n      stream.writeNull(this.prologueScreenModel);\r\n    }\r\n\r\n    stream.writeNull(this.prologueScreenText);\r\n    stream.writeNull(this.prologueScreenTitle);\r\n    stream.writeNull(this.prologueScreenSubtitle);\r\n\r\n    if (this.version > 24) {\r\n      stream.writeInt32(this.useTerrainFog);\r\n      stream.writeFloat32Array(this.fogHeight);\r\n      stream.writeFloat32(this.fogDensity);\r\n      stream.writeUint8Array(this.fogColor);\r\n      stream.writeInt32(this.globalWeather);\r\n      stream.writeNull(this.soundEnvironment);\r\n      stream.writeBinary(this.lightEnvironmentTileset);\r\n      stream.writeUint8Array(this.waterVertexColor);\r\n    }\r\n\r\n    if (this.version > 27) {\r\n      stream.writeUint32(this.scriptMode);\r\n    }\r\n\r\n    if (this.version > 30) {\r\n      stream.writeUint32(this.graphicsMode);\r\n      stream.writeUint32(this.unknown1);\r\n    }\r\n\r\n    stream.writeUint32(this.players.length);\r\n\r\n    for (const player of this.players) {\r\n      player.save(stream, this.version);\r\n    }\r\n\r\n    stream.writeUint32(this.forces.length);\r\n\r\n    for (const force of this.forces) {\r\n      force.save(stream);\r\n    }\r\n\r\n    stream.writeUint32(this.upgradeAvailabilityChanges.length);\r\n\r\n    for (const change of this.upgradeAvailabilityChanges) {\r\n      change.save(stream);\r\n    }\r\n\r\n    stream.writeUint32(this.techAvailabilityChanges.length);\r\n\r\n    for (const change of this.techAvailabilityChanges) {\r\n      change.save(stream);\r\n    }\r\n\r\n    stream.writeUint32(this.randomUnitTables.length);\r\n\r\n    for (const table of this.randomUnitTables) {\r\n      table.save(stream);\r\n    }\r\n\r\n    if (this.version > 24) {\r\n      stream.writeUint32(this.randomItemTables.length);\r\n\r\n      for (const table of this.randomItemTables) {\r\n        table.save(stream);\r\n      }\r\n    }\r\n\r\n    return stream.uint8array;\r\n  }\r\n\r\n  getByteLength(): number {\r\n    let size = 111 + byteLengthUtf8(this.name) + byteLengthUtf8(this.author) + byteLengthUtf8(this.description) + byteLengthUtf8(this.recommendedPlayers) + byteLengthUtf8(this.loadingScreenText) + byteLengthUtf8(this.loadingScreenTitle) + byteLengthUtf8(this.loadingScreenSubtitle) + byteLengthUtf8(this.prologueScreenText) + byteLengthUtf8(this.prologueScreenTitle) + byteLengthUtf8(this.prologueScreenSubtitle);\r\n\r\n    for (const player of this.players) {\r\n      size += player.getByteLength(this.version);\r\n    }\r\n\r\n    for (const force of this.forces) {\r\n      size += force.getByteLength();\r\n    }\r\n\r\n    size += this.upgradeAvailabilityChanges.length * 16;\r\n\r\n    size += this.techAvailabilityChanges.length * 8;\r\n\r\n    for (const table of this.randomUnitTables) {\r\n      size += table.getByteLength();\r\n    }\r\n\r\n    if (this.version > 24) {\r\n      size += 36 + byteLengthUtf8(this.loadingScreenModel) + byteLengthUtf8(this.prologueScreenModel) + byteLengthUtf8(this.soundEnvironment);\r\n\r\n      for (const table of this.randomItemTables) {\r\n        size += table.getByteLength();\r\n      }\r\n    }\r\n\r\n    if (this.version > 27) {\r\n      size += 20;\r\n    }\r\n\r\n    if (this.version > 30) {\r\n      size += 8;\r\n    }\r\n\r\n    return size;\r\n  }\r\n\r\n  /**\r\n   * Returns the build version as major+minor.\r\n   * \r\n   * For example version 1.31.X will return 131.\r\n   * \r\n   * Note that this will always return 0 for any version below 1.31.\r\n   */\r\n  getBuildVersion(): number {\r\n    return this.buildVersion[0] * 100 + this.buildVersion[1];\r\n  }\r\n}\r\n","import BinaryStream from '../../common/binarystream';\r\nimport MpqArchive from '../mpq/archive';\r\nimport War3MapImp from './imp/file';\r\nimport War3MapW3d from './w3d/file';\r\nimport War3MapW3u from './w3u/file';\r\nimport War3MapWct from './wct/file';\r\nimport War3MapWtg from './wtg/file';\r\nimport War3MapWts from './wts/file';\r\nimport { TriggerData } from './wtg/triggerdata';\r\nimport War3MapW3i from './w3i/file';\r\nimport MpqFile from '../mpq/file';\r\n\r\ntype War3MapModificationNames = 'w3a' | 'w3b' | 'w3d' | 'w3h' | 'w3q' | 'w3t' | 'w3u';\r\n\r\ninterface War3MapModifications {\r\n  w3a?: War3MapW3d;\r\n  w3b?: War3MapW3u;\r\n  w3d?: War3MapW3d;\r\n  w3h?: War3MapW3u;\r\n  w3q?: War3MapW3d;\r\n  w3t?: War3MapW3u;\r\n  w3u?: War3MapW3u;\r\n}\r\n\r\n/**\r\n * Warcraft 3 map (W3X and W3M).\r\n */\r\nexport default class War3Map {\r\n  u1 = 0;\r\n  name = '';\r\n  flags = 0;\r\n  maxPlayers = 0;\r\n\r\n  archive = new MpqArchive();\r\n  imports = new War3MapImp();\r\n  readonly = false;\r\n\r\n  /**\r\n   * Load an existing map.\r\n   * \r\n   * Note that this clears the map from whatever it had in it before.\r\n   */\r\n  load(buffer: ArrayBuffer | Uint8Array, readonly = false): void {\r\n    const stream = new BinaryStream(buffer);\r\n\r\n    // The header no longer exists since some 1.3X.X patch?\r\n    if (stream.readBinary(4) === 'HM3W') {\r\n      this.u1 = stream.readUint32();\r\n      this.name = stream.readNull();\r\n      this.flags = stream.readUint32();\r\n      this.maxPlayers = stream.readUint32();\r\n    }\r\n\r\n    this.readonly = readonly;\r\n\r\n    // Read the archive.\r\n    this.archive.load(buffer, readonly);\r\n\r\n    // Read in the imports file if there is one.\r\n    this.readImports();\r\n  }\r\n\r\n  /**\r\n   * Save this map.\r\n   * If the archive is in readonly mode, returns null.\r\n   */\r\n  save(): Uint8Array {\r\n    // Update the imports if needed.\r\n    this.setImportsFile();\r\n\r\n    const archiveBuffer = this.archive.save();\r\n\r\n    if (!archiveBuffer) {\r\n      throw Error('Failed to save the map MPQ archive');\r\n    }\r\n\r\n    const information = this.getMapInformation();\r\n\r\n    // If this is a pre-1.31 map, or we don't know what the version is, save also the map header.\r\n    if (!information || information.getBuildVersion() < 131) {\r\n      const bytes = new Uint8Array(512 + archiveBuffer.byteLength);\r\n      const stream = new BinaryStream(bytes);\r\n\r\n      // Write the header.\r\n      stream.writeBinary('HM3W');\r\n      stream.writeUint32(this.u1);\r\n      stream.writeNull(this.name);\r\n      stream.writeUint32(this.flags);\r\n      stream.writeUint32(this.maxPlayers);\r\n\r\n      bytes.set(archiveBuffer, 512);\r\n\r\n      return bytes;\r\n    } else {\r\n      return archiveBuffer;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * A shortcut to the internal archive function.\r\n   */\r\n  getFileNames(): string[] {\r\n    return this.archive.getFileNames();\r\n  }\r\n\r\n  /**\r\n   * Gets a list of the file names imported in this map.\r\n   */\r\n  getImportNames(): string[] {\r\n    const names = [];\r\n\r\n    for (const entry of this.imports.entries.values()) {\r\n      const isCustom = entry.isCustom;\r\n\r\n      if (isCustom === 10 || isCustom === 13) {\r\n        names.push(entry.path);\r\n      } else {\r\n        names.push(`war3mapImported\\\\${entry.path}`);\r\n      }\r\n    }\r\n\r\n    return names;\r\n  }\r\n\r\n  /**\r\n   * Sets the imports file with all of the imports.\r\n   * \r\n   * Does nothing if the archive is in readonly mode.\r\n   */\r\n  setImportsFile(): boolean {\r\n    if (this.readonly) {\r\n      return false;\r\n    }\r\n\r\n    if (this.imports.entries.size > 0) {\r\n      return this.set('war3map.imp', this.imports.save());\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Imports a file to this archive.\r\n   * \r\n   * If the file already exists, its buffer will be set.\r\n   * \r\n   * Files added to the archive but not to the imports list will be deleted by the World Editor automatically.\r\n   * This of course doesn't apply to internal map files.\r\n   * \r\n   * Does nothing if the archive is in readonly mode.\r\n   */\r\n  import(name: string, buffer: ArrayBuffer | string): boolean {\r\n    if (this.readonly) {\r\n      return false;\r\n    }\r\n\r\n    if (this.archive.set(name, buffer)) {\r\n      this.imports.set(name);\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * A shortcut to the internal archive function.\r\n   */\r\n  set(name: string, buffer: ArrayBuffer | string): boolean {\r\n    if (this.readonly) {\r\n      return false;\r\n    }\r\n\r\n    return this.archive.set(name, buffer);\r\n  }\r\n\r\n  /**\r\n   * A shortcut to the internal archive function.\r\n   */\r\n  get(name: string): MpqFile | null {\r\n    return this.archive.get(name);\r\n  }\r\n\r\n  /**\r\n   * Get the map's script.\r\n   */\r\n  getScriptFile(): MpqFile | null {\r\n    return this.get('war3map.j') || this.get('scripts\\\\war3map.j') || this.get('war3map.lua') || this.get('scripts\\\\war3map.lua');\r\n  }\r\n\r\n  /**\r\n   * A shortcut to the internal archive function.\r\n   */\r\n  has(name: string): boolean {\r\n    return this.archive.has(name);\r\n  }\r\n\r\n  /**\r\n   * Deletes a file from the internal archive.\r\n   * \r\n   * Note that if the file is in the imports list, it will be removed from it too.\r\n   * \r\n   * Use this rather than the internal archive's delete.\r\n   */\r\n  delete(name: string): boolean {\r\n    if (this.readonly) {\r\n      return false;\r\n    }\r\n\r\n    // If this file is in the import list, remove it.\r\n    this.imports.delete(name);\r\n\r\n    return this.archive.delete(name);\r\n  }\r\n\r\n  /**\r\n   * A shortcut to the internal archive function.\r\n   */\r\n  rename(name: string, newName: string): boolean {\r\n    if (this.readonly) {\r\n      return false;\r\n    }\r\n\r\n    if (this.archive.rename(name, newName)) {\r\n      // If the file was actually renamed, and it is an import, rename also the import entry.\r\n      this.imports.rename(name, newName);\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  getMapInformation(): War3MapW3i {\r\n    const file = this.archive.get('war3map.w3i');\r\n\r\n    if (!file) {\r\n      throw new Error('File does not exist');\r\n    }\r\n\r\n    const parser = new War3MapW3i();\r\n\r\n    parser.load(file.bytes());\r\n\r\n    return parser;\r\n  }\r\n\r\n  readImports(): void {\r\n    const file = this.archive.get('war3map.imp');\r\n\r\n    if (file) {\r\n      const buffer = file.arrayBuffer();\r\n\r\n      if (buffer) {\r\n        this.imports.load(buffer);\r\n      }\r\n    }\r\n  }\r\n\r\n  readTriggers(triggerData: TriggerData): War3MapWtg | undefined {\r\n    const file = this.archive.get('war3map.wtg');\r\n\r\n    if (file) {\r\n      const buffer = file.arrayBuffer();\r\n\r\n      if (buffer) {\r\n        const object = new War3MapWtg();\r\n\r\n        object.load(buffer, triggerData);\r\n\r\n        return object;\r\n      }\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Read and parse the custom text trigger file.\r\n   */\r\n  readCustomTextTriggers(): War3MapWct | undefined {\r\n    const file = this.archive.get('war3map.wct');\r\n\r\n    if (file) {\r\n      const buffer = file.arrayBuffer();\r\n\r\n      if (buffer) {\r\n        const object = new War3MapWct();\r\n\r\n        object.load(buffer);\r\n\r\n        return object;\r\n      }\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Read and parse the string table file.\r\n   */\r\n  readStringTable(): War3MapWts | undefined {\r\n    const file = this.archive.get('war3map.wts');\r\n\r\n    if (file) {\r\n      const buffer = file.text();\r\n\r\n      if (buffer) {\r\n        const object = new War3MapWts();\r\n\r\n        object.load(buffer);\r\n\r\n        return object;\r\n      }\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Read and parse all of the modification tables.\r\n   */\r\n  readModifications(): War3MapModifications {\r\n    const modifications: War3MapModifications = {};\r\n\r\n    // useOptionalInts:\r\n    //      w3u: no (units)\r\n    //      w3t: no (items)\r\n    //      w3b: no (destructables)\r\n    //      w3d: yes (doodads)\r\n    //      w3a: yes (abilities)\r\n    //      w3h: no (buffs)\r\n    //      w3q: yes (upgrades)\r\n    const fileNames: War3MapModificationNames[] = ['w3u', 'w3t', 'w3b', 'w3d', 'w3a', 'w3h', 'w3q'];\r\n    const useOptionalInts = [false, false, false, true, true, false, true];\r\n\r\n    for (let i = 0, l = fileNames.length; i < l; i++) {\r\n      const file = this.archive.get(`war3map.${fileNames[i]}`);\r\n\r\n      if (file) {\r\n        const buffer = file.arrayBuffer();\r\n\r\n        if (buffer) {\r\n          let modification;\r\n\r\n          if (useOptionalInts[i]) {\r\n            modification = new War3MapW3d();\r\n          } else {\r\n            modification = new War3MapW3u();\r\n          }\r\n\r\n          modification.load(buffer);\r\n\r\n          modifications[fileNames[i]] = modification;\r\n        }\r\n      }\r\n    }\r\n\r\n    return modifications;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\n\r\n/**\r\n * A random item.\r\n */\r\nexport default class RandomItem {\r\n  id = '\\0\\0\\0\\0';\r\n  chance = 0;\r\n\r\n  load(stream: BinaryStream): void {\r\n    this.id = stream.readBinary(4);\r\n    this.chance = stream.readInt32();\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeBinary(this.id);\r\n    stream.writeInt32(this.chance);\r\n  }\r\n}\r\n","import RandomItem from './randomitem';\r\nimport BinaryStream from '../../../common/binarystream';\r\n\r\n/**\r\n * A random item set.\r\n */\r\nexport default class RandomItemSet {\r\n  items: RandomItem[] = [];\r\n\r\n  load(stream: BinaryStream): void {\r\n    for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n      const item = new RandomItem();\r\n\r\n      item.load(stream);\r\n\r\n      this.items.push(item);\r\n    }\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeUint32(this.items.length);\r\n\r\n    for (const item of this.items) {\r\n      item.save(stream);\r\n    }\r\n  }\r\n\r\n  getByteLength(): number {\r\n    return 4 + this.items.length * 8;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport RandomItemSet from './randomitemset';\r\n\r\n/**\r\n * A doodad.\r\n */\r\nexport default class Doodad {\r\n  id = '\\0\\0\\0\\0';\r\n  variation = 0;\r\n  location = new Float32Array(3);\r\n  angle = 0;\r\n  scale = new Float32Array([1, 1, 1]);\r\n  /**\r\n   * @since Game version 1.32\r\n   */\r\n  skin = '\\0\\0\\0\\0';\r\n  flags = 0;\r\n  life = 0;\r\n  itemTable = -1;\r\n  itemSets: RandomItemSet[] = [];\r\n  editorId = 0;\r\n  u1 = new Uint8Array(8);\r\n\r\n  load(stream: BinaryStream, version: number, buildVersion: number): void {\r\n    this.id = stream.readBinary(4);\r\n    this.variation = stream.readInt32();\r\n    stream.readFloat32Array(this.location);\r\n    this.angle = stream.readFloat32();\r\n    stream.readFloat32Array(this.scale);\r\n\r\n    if (buildVersion > 131) {\r\n      this.skin = stream.readBinary(4);\r\n    }\r\n\r\n    this.flags = stream.readUint8();\r\n    this.life = stream.readUint8();\r\n\r\n    if (version > 7) {\r\n      this.itemTable = stream.readUint32();\r\n\r\n      for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n        const itemSet = new RandomItemSet();\r\n\r\n        itemSet.load(stream);\r\n\r\n        this.itemSets.push(itemSet);\r\n      }\r\n    }\r\n\r\n    this.editorId = stream.readInt32();\r\n  }\r\n\r\n  save(stream: BinaryStream, version: number, buildVersion: number): void {\r\n    stream.writeBinary(this.id);\r\n    stream.writeInt32(this.variation);\r\n    stream.writeFloat32Array(this.location);\r\n    stream.writeFloat32(this.angle);\r\n    stream.writeFloat32Array(this.scale);\r\n\r\n    if (buildVersion > 131) {\r\n      stream.writeBinary(this.skin);\r\n    }\r\n\r\n    stream.writeUint8(this.flags);\r\n    stream.writeUint8(this.life);\r\n\r\n    if (version > 7) {\r\n      stream.writeUint32(this.itemTable);\r\n      stream.writeUint32(this.itemSets.length);\r\n\r\n      for (const itemSet of this.itemSets) {\r\n        itemSet.save(stream);\r\n      }\r\n    }\r\n\r\n    stream.writeInt32(this.editorId);\r\n  }\r\n\r\n  getByteLength(version: number, buildVersion: number): number {\r\n    let size = 42;\r\n\r\n    if (buildVersion > 131) {\r\n      size += 4;\r\n    }\r\n\r\n    if (version > 7) {\r\n      size += 8;\r\n\r\n      for (const itemSet of this.itemSets) {\r\n        size += itemSet.getByteLength();\r\n      }\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\n\r\n/**\r\n * A terrain doodad.\r\n *\r\n * This type of doodad works much like cliffs.\r\n * It uses the height of the terrain, and gets affected by the ground heightmap.\r\n * It cannot be manipulated in any way in the World Editor once placed.\r\n * Indeed, the only way to change it is to remove it by changing cliffs around it.\r\n */\r\nexport default class TerrainDoodad {\r\n  id = '\\0\\0\\0\\0';\r\n  u1 = 0;\r\n  location = new Uint32Array(2);\r\n\r\n  load(stream: BinaryStream, _version: number): void {\r\n    this.id = stream.readBinary(4);\r\n    this.u1 = stream.readUint32();\r\n    stream.readUint32Array(this.location);\r\n  }\r\n\r\n  save(stream: BinaryStream, _version: number): void {\r\n    stream.writeBinary(this.id);\r\n    stream.writeUint32(this.u1);\r\n    stream.writeUint32Array(this.location);\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport Doodad from './doodad';\r\nimport TerrainDoodad from './terraindoodad';\r\n\r\n/**\r\n * war3map.doo - the doodad and destructible file.\r\n */\r\nexport default class War3MapDoo {\r\n  version = 0;\r\n  u1 = new Uint8Array(4);\r\n  doodads: Doodad[] = [];\r\n  u2 = new Uint8Array(4);\r\n  terrainDoodads: TerrainDoodad[] = [];\r\n\r\n  load(buffer: ArrayBuffer | Uint8Array, buildVersion: number): void {\r\n    const stream = new BinaryStream(buffer);\r\n\r\n    if (stream.readBinary(4) !== 'W3do') {\r\n      throw new Error('Not a valid war3map.doo buffer');\r\n    }\r\n\r\n    this.version = stream.readInt32();\r\n    stream.readUint8Array(this.u1);\r\n\r\n    for (let i = 0, l = stream.readInt32(); i < l; i++) {\r\n      const doodad = new Doodad();\r\n\r\n      doodad.load(stream, this.version, buildVersion);\r\n\r\n      this.doodads.push(doodad);\r\n    }\r\n\r\n    stream.readUint8Array(this.u2);\r\n\r\n    for (let i = 0, l = stream.readInt32(); i < l; i++) {\r\n      const terrainDoodad = new TerrainDoodad();\r\n\r\n      terrainDoodad.load(stream, this.version);\r\n\r\n      this.terrainDoodads.push(terrainDoodad);\r\n    }\r\n  }\r\n\r\n  save(buildVersion: number): Uint8Array {\r\n    const stream = new BinaryStream(new ArrayBuffer(this.getByteLength(buildVersion)));\r\n\r\n    stream.writeBinary('W3do');\r\n    stream.writeInt32(this.version);\r\n    stream.writeUint8Array(this.u1);\r\n    stream.writeUint32(this.doodads.length);\r\n\r\n    for (const doodad of this.doodads) {\r\n      doodad.save(stream, this.version, buildVersion);\r\n    }\r\n\r\n    stream.writeUint8Array(this.u2);\r\n    stream.writeUint32(this.terrainDoodads.length);\r\n\r\n    for (const terrainDoodad of this.terrainDoodads) {\r\n      terrainDoodad.save(stream, this.version);\r\n    }\r\n\r\n    return stream.uint8array;\r\n  }\r\n\r\n  getByteLength(buildVersion: number): number {\r\n    let size = 24 + this.terrainDoodads.length * 16;\r\n\r\n    for (const doodad of this.doodads) {\r\n      size += doodad.getByteLength(this.version, buildVersion);\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import File from './file';\r\nimport Doodad from './doodad';\r\nimport RandomItemSet from './randomitemset';\r\nimport RandomItem from './randomitem';\r\nimport TerrainDoodad from './terraindoodad';\r\n\r\nexport default {\r\n  File,\r\n  Doodad,\r\n  RandomItemSet,\r\n  RandomItem,\r\n  TerrainDoodad,\r\n};\r\n","import File from './file';\r\nimport Import from './import';\r\n\r\nexport default {\r\n  File,\r\n  Import,\r\n};\r\n","import BinaryStream from '../../../common/binarystream';\r\n\r\n/**\r\n * A minimap icon.\r\n */\r\nexport default class MinimapIcon {\r\n  type = 0;\r\n  location = new Int32Array(2);\r\n  /**\r\n   * Stored as BGRA.\r\n   */\r\n  color = new Uint8Array(4);\r\n\r\n  load(stream: BinaryStream): void {\r\n    this.type = stream.readInt32();\r\n    stream.readInt32Array(this.location);\r\n    stream.readUint8Array(this.color);\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeInt32(this.type);\r\n    stream.writeInt32Array(this.location);\r\n    stream.writeUint8Array(this.color);\r\n  }\r\n}\r\n","import File from './file';\r\nimport MinimapIcon from './minimapicon';\r\n\r\nexport default {\r\n  File,\r\n  MinimapIcon,\r\n};\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport MinimapIcon from './minimapicon';\r\n\r\n/**\r\n * war3map.mmp - the minimap icon file.\r\n */\r\nexport default class War3MapMmp {\r\n  u1 = 0;\r\n  icons: MinimapIcon[] = [];\r\n\r\n  load(buffer: ArrayBuffer | Uint8Array): void {\r\n    const stream = new BinaryStream(buffer);\r\n\r\n    this.u1 = stream.readInt32();\r\n\r\n    for (let i = 0, l = stream.readInt32(); i < l; i++) {\r\n      const icon = new MinimapIcon();\r\n\r\n      icon.load(stream);\r\n\r\n      this.icons[i] = icon;\r\n    }\r\n  }\r\n\r\n  save(): Uint8Array {\r\n    const stream = new BinaryStream(new ArrayBuffer(this.getByteLength()));\r\n\r\n    stream.writeInt32(this.u1);\r\n    stream.writeUint32(this.icons.length);\r\n\r\n    for (const icon of this.icons) {\r\n      icon.save(stream);\r\n    }\r\n\r\n    return stream.uint8array;\r\n  }\r\n\r\n  getByteLength(): number {\r\n    return 8 + this.icons.length * 16;\r\n  }\r\n}\r\n","import File from './file';\r\n\r\nexport default {\r\n  File,\r\n};\r\n","/**\r\n * war3map.shd - the shadow file.\r\n */\r\nexport default class War3MapShd {\r\n  shadows = new Uint8Array(0);\r\n\r\n  load(buffer: ArrayBuffer | Uint8Array, width: number, height: number): void {\r\n    this.shadows = new Uint8Array(buffer.slice(0, width * height * 16));\r\n  }\r\n\r\n  save(): Uint8Array {\r\n    return this.shadows.slice();\r\n  }\r\n\r\n  getByteLength(): number {\r\n    return this.shadows.length;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\n\r\n/**\r\n * A camera.\r\n */\r\nexport default class Camera {\r\n  targetLocation = new Float32Array(3);\r\n  rotation = 0;\r\n  angleOfAttack = 0;\r\n  distance = 0;\r\n  roll = 0;\r\n  fieldOfView = 0;\r\n  farClippingPlane = 0;\r\n  nearClippingPlane = 0;\r\n  cinematicName = '';\r\n  /**\r\n   * @since Game version 1.32\r\n   */\r\n  localPitch = 0;\r\n  /**\r\n   * @since Game version 1.32\r\n   */\r\n  localYaw = 0;\r\n  /**\r\n   * @since Game version 1.32\r\n   */\r\n  localRoll = 0;\r\n\r\n  load(stream: BinaryStream, buildVersion: number): void {\r\n    stream.readFloat32Array(this.targetLocation);\r\n    this.rotation = stream.readFloat32(); // in degrees\r\n    this.angleOfAttack = stream.readFloat32(); // in degrees\r\n    this.distance = stream.readFloat32();\r\n    this.roll = stream.readFloat32();\r\n    this.fieldOfView = stream.readFloat32(); // in degrees\r\n    this.farClippingPlane = stream.readFloat32();\r\n    this.nearClippingPlane = stream.readFloat32();\r\n    this.cinematicName = stream.readNull();\r\n\r\n    if (buildVersion > 131) {\r\n      this.localPitch = stream.readFloat32();\r\n      this.localYaw = stream.readFloat32();\r\n      this.localRoll = stream.readFloat32();\r\n    }\r\n  }\r\n\r\n  save(stream: BinaryStream, buildVersion: number): void {\r\n    stream.writeFloat32Array(this.targetLocation);\r\n    stream.writeFloat32(this.rotation);\r\n    stream.writeFloat32(this.angleOfAttack);\r\n    stream.writeFloat32(this.distance);\r\n    stream.writeFloat32(this.roll);\r\n    stream.writeFloat32(this.fieldOfView);\r\n    stream.writeFloat32(this.farClippingPlane);\r\n    stream.writeFloat32(this.nearClippingPlane);\r\n    stream.writeNull(this.cinematicName);\r\n\r\n    if (buildVersion > 131) {\r\n      stream.writeFloat32(this.localPitch);\r\n      stream.writeFloat32(this.localYaw);\r\n      stream.writeFloat32(this.localRoll);\r\n    }\r\n  }\r\n\r\n  getByteLength(buildVersion: number): number {\r\n    let size = 41 + byteLengthUtf8(this.cinematicName);\r\n\r\n    if (buildVersion > 131) {\r\n      size += 12;\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import File from './file';\r\nimport Camera from './camera';\r\n\r\nexport default {\r\n  File,\r\n  Camera,\r\n};\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport Camera from './camera';\r\n\r\n/**\r\n * war3map.w3c - the camera file.\r\n */\r\nexport default class War3MapW3c {\r\n  version = 0;\r\n  cameras: Camera[] = [];\r\n\r\n  load(buffer: ArrayBuffer | Uint8Array, buildVersion: number): void {\r\n    const stream = new BinaryStream(buffer);\r\n\r\n    this.version = stream.readInt32();\r\n\r\n    for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n      const camera = new Camera();\r\n\r\n      camera.load(stream, buildVersion);\r\n\r\n      this.cameras[i] = camera;\r\n    }\r\n  }\r\n\r\n  save(buildVersion: number): Uint8Array {\r\n    const stream = new BinaryStream(new ArrayBuffer(this.getByteLength(buildVersion)));\r\n\r\n    stream.writeInt32(this.version);\r\n    stream.writeUint32(this.cameras.length);\r\n\r\n    for (const camera of this.cameras) {\r\n      camera.save(stream, buildVersion);\r\n    }\r\n\r\n    return stream.uint8array;\r\n  }\r\n\r\n  getByteLength(buildVersion: number): number {\r\n    let size = 8;\r\n\r\n    for (const camera of this.cameras) {\r\n      size += camera.getByteLength(buildVersion);\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import File from './file';\r\n\r\nexport default {\r\n  File,\r\n};\r\n","import BinaryStream from '../../../common/binarystream';\r\n\r\n/**\r\n * A tile corner.\r\n */\r\nexport default class Corner {\r\n  groundHeight = 0;\r\n  waterHeight = 0;\r\n  mapEdge = 0;\r\n  ramp = 0;\r\n  blight = 0;\r\n  water = 0;\r\n  boundary = 0;\r\n  groundTexture = 0;\r\n  cliffVariation = 0;\r\n  groundVariation = 0;\r\n  cliffTexture = 0;\r\n  layerHeight = 0;\r\n\r\n  load(stream: BinaryStream): void {\r\n    this.groundHeight = (stream.readInt16() - 8192) / 512;\r\n\r\n    const waterAndEdge = stream.readInt16();\r\n\r\n    this.waterHeight = ((waterAndEdge & 0x3FFF) - 8192) / 512;\r\n    this.mapEdge = waterAndEdge & 0x4000;\r\n\r\n    const textureAndFlags = stream.readUint8();\r\n\r\n    this.ramp = textureAndFlags & 0b00010000;\r\n    this.blight = textureAndFlags & 0b00100000;\r\n    this.water = textureAndFlags & 0b01000000;\r\n    this.boundary = textureAndFlags & 0b10000000;\r\n\r\n    this.groundTexture = textureAndFlags & 0b00001111;\r\n\r\n    const variation = stream.readUint8();\r\n\r\n    this.cliffVariation = (variation & 0b11100000) >>> 5;\r\n    this.groundVariation = variation & 0b00011111;\r\n\r\n    const cliffTextureAndLayer = stream.readUint8();\r\n\r\n    this.cliffTexture = (cliffTextureAndLayer & 0b11110000) >>> 4;\r\n    this.layerHeight = cliffTextureAndLayer & 0b00001111;\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeInt16(this.groundHeight * 512 + 8192);\r\n    stream.writeInt16(this.waterHeight * 512 + 8192 + this.mapEdge << 14);\r\n    stream.writeUint8((this.ramp << 4) | (this.blight << 5) | (this.water << 6) | (this.boundary << 7) | this.groundTexture);\r\n    stream.writeUint8((this.cliffVariation << 5) | this.groundVariation);\r\n    stream.writeUint8((this.cliffTexture << 4) + this.layerHeight);\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport Corner from './corner';\r\n\r\n/**\r\n * war3map.w3e - the environment file.\r\n */\r\nexport default class War3MapW3e {\r\n  version = 0;\r\n  tileset = 'A';\r\n  haveCustomTileset = 0;\r\n  groundTilesets: string[] = [];\r\n  cliffTilesets: string[] = [];\r\n  mapSize = new Int32Array(2);\r\n  centerOffset = new Float32Array(2);\r\n  corners: Corner[][] = [];\r\n\r\n  load(buffer: ArrayBuffer | Uint8Array): void {\r\n    const stream = new BinaryStream(buffer);\r\n\r\n    if (stream.readBinary(4) !== 'W3E!') {\r\n      return;\r\n    }\r\n\r\n    this.version = stream.readInt32();\r\n    this.tileset = stream.readBinary(1);\r\n    this.haveCustomTileset = stream.readInt32();\r\n\r\n    for (let i = 0, l = stream.readInt32(); i < l; i++) {\r\n      this.groundTilesets[i] = stream.readBinary(4);\r\n    }\r\n\r\n    for (let i = 0, l = stream.readInt32(); i < l; i++) {\r\n      this.cliffTilesets[i] = stream.readBinary(4);\r\n    }\r\n\r\n    stream.readInt32Array(this.mapSize);\r\n    stream.readFloat32Array(this.centerOffset);\r\n\r\n    for (let row = 0, rows = this.mapSize[1]; row < rows; row++) {\r\n      this.corners[row] = [];\r\n\r\n      for (let column = 0, columns = this.mapSize[0]; column < columns; column++) {\r\n        const corner = new Corner();\r\n\r\n        corner.load(stream);\r\n\r\n        this.corners[row][column] = corner;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  save(): Uint8Array {\r\n    const stream = new BinaryStream(new ArrayBuffer(this.getByteLength()));\r\n\r\n    stream.writeBinary('W3E!');\r\n    stream.writeInt32(this.version);\r\n    stream.writeBinary(this.tileset);\r\n    stream.writeInt32(this.haveCustomTileset);\r\n    stream.writeUint32(this.groundTilesets.length);\r\n\r\n    for (const groundTileset of this.groundTilesets) {\r\n      stream.writeBinary(groundTileset);\r\n    }\r\n\r\n    stream.writeUint32(this.cliffTilesets.length);\r\n\r\n    for (const cliffTileset of this.cliffTilesets) {\r\n      stream.writeBinary(cliffTileset);\r\n    }\r\n\r\n    stream.writeInt32Array(this.mapSize);\r\n    stream.writeFloat32Array(this.centerOffset);\r\n\r\n    for (const row of this.corners) {\r\n      for (const corner of row) {\r\n        corner.save(stream);\r\n      }\r\n    }\r\n\r\n    return stream.uint8array;\r\n  }\r\n\r\n  getByteLength(): number {\r\n    return 37 + (this.groundTilesets.length * 4) + (this.cliffTilesets.length * 4) + (this.mapSize[0] * this.mapSize[1] * 7);\r\n  }\r\n}\r\n","import File from './file';\r\nimport Corner from './corner';\r\n\r\nexport default {\r\n  File,\r\n  Corner,\r\n};\r\n","import File from './file';\r\nimport Player from './player';\r\nimport Force from './force';\r\nimport UpgradeAvailabilityChange from './upgradeavailabilitychange';\r\nimport TechAvailabilityChange from './techavailabilitychange';\r\nimport RandomUnitTable from './randomunittable';\r\nimport RandomUnit from './randomunit';\r\nimport RandomItemTable from './randomitemtable';\r\nimport RandomItemSet from './randomitemset';\r\nimport RandomItem from './randomitem';\r\n\r\nexport default {\r\n  File,\r\n  Player,\r\n  Force,\r\n  UpgradeAvailabilityChange,\r\n  TechAvailabilityChange,\r\n  RandomUnitTable,\r\n  RandomUnit,\r\n  RandomItemTable,\r\n  RandomItemSet,\r\n  RandomItem,\r\n};\r\n","import File from './file';\r\n\r\nexport default {\r\n  File,\r\n};\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport War3MapW3u from '../w3u/file';\r\nimport War3MapW3d from '../w3d/file';\r\n\r\n/**\r\n * war3map.w3o - the combined modification file.\r\n *\r\n * Contains all of the modifications of a map.\r\n * Can be exported and imported via the World Editor.\r\n */\r\nexport default class War3MapW3o {\r\n  version = 0;\r\n  units: War3MapW3u | null = null;\r\n  items: War3MapW3u | null = null;\r\n  destructables: War3MapW3u | null = null;\r\n  doodads: War3MapW3d | null = null;\r\n  abilities: War3MapW3d | null = null;\r\n  buffs: War3MapW3u | null = null;\r\n  upgrades: War3MapW3d | null = null;\r\n\r\n  load(buffer: ArrayBuffer | Uint8Array): void {\r\n    const stream = new BinaryStream(buffer);\r\n\r\n    this.version = stream.readInt32();\r\n\r\n    if (stream.readInt32()) {\r\n      this.units = new War3MapW3u();\r\n      this.units.load(stream);\r\n    }\r\n\r\n    if (stream.readInt32()) {\r\n      this.items = new War3MapW3u();\r\n      this.items.load(stream);\r\n    }\r\n\r\n    if (stream.readInt32()) {\r\n      this.destructables = new War3MapW3u();\r\n      this.destructables.load(stream);\r\n    }\r\n\r\n    if (stream.readInt32()) {\r\n      this.doodads = new War3MapW3d();\r\n      this.doodads.load(stream);\r\n    }\r\n\r\n    if (stream.readInt32()) {\r\n      this.abilities = new War3MapW3d();\r\n      this.abilities.load(stream);\r\n    }\r\n\r\n    if (stream.readInt32()) {\r\n      this.buffs = new War3MapW3u();\r\n      this.buffs.load(stream);\r\n    }\r\n\r\n    if (stream.readInt32()) {\r\n      this.upgrades = new War3MapW3d();\r\n      this.upgrades.load(stream);\r\n    }\r\n  }\r\n\r\n  save(): Uint8Array {\r\n    const stream = new BinaryStream(new ArrayBuffer(this.getByteLength()));\r\n\r\n    stream.writeInt32(this.version);\r\n\r\n    if (this.units) {\r\n      stream.writeInt32(1);\r\n      stream.writeUint8Array(this.units.save());\r\n    } else {\r\n      stream.writeInt32(0);\r\n    }\r\n\r\n    if (this.items) {\r\n      stream.writeInt32(1);\r\n      stream.writeUint8Array(this.items.save());\r\n    } else {\r\n      stream.writeInt32(0);\r\n    }\r\n\r\n    if (this.destructables) {\r\n      stream.writeInt32(1);\r\n      stream.writeUint8Array(this.destructables.save());\r\n    } else {\r\n      stream.writeInt32(0);\r\n    }\r\n\r\n    if (this.doodads) {\r\n      stream.writeInt32(1);\r\n      stream.writeUint8Array(this.doodads.save());\r\n    } else {\r\n      stream.writeInt32(0);\r\n    }\r\n\r\n    if (this.abilities) {\r\n      stream.writeInt32(1);\r\n      stream.writeUint8Array(this.abilities.save());\r\n    } else {\r\n      stream.writeInt32(0);\r\n    }\r\n\r\n    if (this.buffs) {\r\n      stream.writeInt32(1);\r\n      stream.writeUint8Array(this.buffs.save());\r\n    } else {\r\n      stream.writeInt32(0);\r\n    }\r\n\r\n    if (this.upgrades) {\r\n      stream.writeInt32(1);\r\n      stream.writeUint8Array(this.upgrades.save());\r\n    } else {\r\n      stream.writeInt32(0);\r\n    }\r\n\r\n    return stream.uint8array;\r\n  }\r\n\r\n  getByteLength(): number {\r\n    let size = 32;\r\n\r\n    if (this.units) {\r\n      size += this.units.getByteLength();\r\n    }\r\n\r\n    if (this.items) {\r\n      size += this.items.getByteLength();\r\n    }\r\n\r\n    if (this.destructables) {\r\n      size += this.destructables.getByteLength();\r\n    }\r\n\r\n    if (this.doodads) {\r\n      size += this.doodads.getByteLength();\r\n    }\r\n\r\n    if (this.abilities) {\r\n      size += this.abilities.getByteLength();\r\n    }\r\n\r\n    if (this.buffs) {\r\n      size += this.buffs.getByteLength();\r\n    }\r\n\r\n    if (this.upgrades) {\r\n      size += this.upgrades.getByteLength();\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\n\r\n/**\r\n * A region.\r\n */\r\nexport default class Region {\r\n  left = 0;\r\n  right = 0;\r\n  bottom = 0;\r\n  top = 0;\r\n  name = '';\r\n  creationNumber = 0;\r\n  weatherEffectId = '\\0\\0\\0\\0';\r\n  ambientSound = '';\r\n  color = new Uint8Array(4);\r\n\r\n  load(stream: BinaryStream): void {\r\n    this.left = stream.readFloat32();\r\n    this.right = stream.readFloat32();\r\n    this.bottom = stream.readFloat32();\r\n    this.top = stream.readFloat32();\r\n    this.name = stream.readNull();\r\n    this.creationNumber = stream.readUint32();\r\n    this.weatherEffectId = stream.readBinary(4);\r\n    this.ambientSound = stream.readNull();\r\n    stream.readUint8Array(this.color);\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeFloat32(this.left);\r\n    stream.writeFloat32(this.right);\r\n    stream.writeFloat32(this.bottom);\r\n    stream.writeFloat32(this.top);\r\n    stream.writeNull(this.name);\r\n    stream.writeUint32(this.creationNumber);\r\n\r\n    if (this.weatherEffectId) {\r\n      stream.writeBinary(this.weatherEffectId);\r\n    } else {\r\n      stream.writeUint32(0);\r\n    }\r\n\r\n    stream.writeNull(this.ambientSound);\r\n    stream.writeUint8Array(this.color);\r\n  }\r\n\r\n  getByteLength(): number {\r\n    return 30 + byteLengthUtf8(this.name) + byteLengthUtf8(this.ambientSound);\r\n  }\r\n}\r\n","import File from './file';\r\nimport Region from './region';\r\n\r\nexport default {\r\n  File,\r\n  Region,\r\n};\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport Region from './region';\r\n\r\n/**\r\n * war3map.w3r - the region file.\r\n */\r\nexport default class War3MapW3r {\r\n  version = 0;\r\n  regions: Region[] = [];\r\n\r\n  load(buffer: ArrayBuffer | Uint8Array): void {\r\n    const stream = new BinaryStream(buffer);\r\n\r\n    this.version = stream.readInt32();\r\n\r\n    for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n      const region = new Region();\r\n\r\n      region.load(stream);\r\n\r\n      this.regions[i] = region;\r\n    }\r\n  }\r\n\r\n  save(): Uint8Array {\r\n    const stream = new BinaryStream(new ArrayBuffer(this.getByteLength()));\r\n\r\n    stream.writeInt32(this.version);\r\n    stream.writeUint32(this.regions.length);\r\n\r\n    for (const region of this.regions) {\r\n      region.save(stream);\r\n    }\r\n\r\n    return stream.uint8array;\r\n  }\r\n\r\n  getByteLength(): number {\r\n    let size = 8;\r\n\r\n    for (const region of this.regions) {\r\n      size += region.getByteLength();\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\n\r\n/**\r\n * A sound.\r\n */\r\nexport default class Sound {\r\n  name = '';\r\n  file = '';\r\n  eaxEffect = '';\r\n  flags = 0;\r\n  fadeInRate = 0;\r\n  fadeOutRate = 0;\r\n  volume = 0;\r\n  pitch = 0;\r\n  pitchVariance = 0;\r\n  priority = 0;\r\n  channel = 0;\r\n  minDistance = 0;\r\n  maxDistance = 0;\r\n  distanceCutoff = 0;\r\n  coneInside = 0;\r\n  coneOutside = 0;\r\n  coneOutsideVolume = 0;\r\n  coneOrientationX = 0;\r\n  coneOrientationY = 0;\r\n  coneOrientationZ = 0;\r\n\r\n  load(stream: BinaryStream, version: number): void {\r\n    this.name = stream.readNull();\r\n    this.file = stream.readNull();\r\n    this.eaxEffect = stream.readNull();\r\n    this.flags = stream.readUint32();\r\n    this.fadeInRate = stream.readInt32();\r\n    this.fadeOutRate = stream.readInt32();\r\n    this.volume = stream.readInt32();\r\n    this.pitch = stream.readFloat32();\r\n    this.pitchVariance = stream.readFloat32();\r\n    this.priority = stream.readInt32();\r\n    this.channel = stream.readInt32();\r\n    this.minDistance = stream.readFloat32();\r\n    this.maxDistance = stream.readFloat32();\r\n    this.distanceCutoff = stream.readFloat32();\r\n    this.coneInside = stream.readFloat32();\r\n    this.coneOutside = stream.readFloat32();\r\n    this.coneOutsideVolume = stream.readInt32();\r\n    this.coneOrientationX = stream.readFloat32();\r\n    this.coneOrientationY = stream.readFloat32();\r\n    this.coneOrientationZ = stream.readFloat32();\r\n\r\n    if (version > 1) {\r\n\r\n      if (version > 2) {\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  save(stream: BinaryStream, version: number): void {\r\n    stream.writeNull(this.name);\r\n    stream.writeNull(this.file);\r\n    stream.writeNull(this.eaxEffect);\r\n    stream.writeUint32(this.flags);\r\n    stream.writeUint32(this.fadeInRate);\r\n    stream.writeUint32(this.fadeOutRate);\r\n    stream.writeUint32(this.volume);\r\n    stream.writeFloat32(this.pitch);\r\n    stream.writeFloat32(this.pitchVariance);\r\n    stream.writeInt32(this.priority);\r\n    stream.writeInt32(this.channel);\r\n    stream.writeFloat32(this.minDistance);\r\n    stream.writeFloat32(this.maxDistance);\r\n    stream.writeFloat32(this.distanceCutoff);\r\n    stream.writeFloat32(this.coneInside);\r\n    stream.writeFloat32(this.coneOutside);\r\n    stream.writeInt32(this.coneOutsideVolume);\r\n    stream.writeFloat32(this.coneOrientationX);\r\n    stream.writeFloat32(this.coneOrientationY);\r\n    stream.writeFloat32(this.coneOrientationZ);\r\n\r\n    if (version > 1) {\r\n\r\n      if (version > 2) {\r\n        \r\n      }\r\n    }\r\n  }\r\n\r\n  getByteLength(version: number): number {\r\n    const size = 71 + byteLengthUtf8(this.name) + byteLengthUtf8(this.file) + byteLengthUtf8(this.eaxEffect);\r\n\r\n    if (version > 1) {\r\n\r\n      if (version > 2) {\r\n        \r\n      }\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport Sound from './sound';\r\n\r\n/**\r\n * war3map.w3s - the sound file.\r\n */\r\nexport default class War3MapW3s {\r\n  version = 0;\r\n  sounds: Sound[] = [];\r\n\r\n  load(buffer: ArrayBuffer | Uint8Array): void {\r\n    const stream = new BinaryStream(buffer);\r\n\r\n    this.version = stream.readInt32();\r\n\r\n    for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n      const sound = new Sound();\r\n\r\n      sound.load(stream, this.version);\r\n\r\n      this.sounds[i] = sound;\r\n    }\r\n  }\r\n\r\n  save(): Uint8Array {\r\n    const stream = new BinaryStream(new ArrayBuffer(this.getByteLength()));\r\n\r\n    stream.writeInt32(this.version);\r\n    stream.writeUint32(this.sounds.length);\r\n\r\n    for (const sound of this.sounds) {\r\n      sound.save(stream, this.version);\r\n    }\r\n\r\n    return stream.uint8array;\r\n  }\r\n\r\n  getByteLength(): number {\r\n    let size = 8;\r\n\r\n    for (const sound of this.sounds) {\r\n      size += sound.getByteLength(this.version);\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import File from './file';\r\nimport Sound from './sound';\r\n\r\nexport default {\r\n  File,\r\n  Sound,\r\n};\r\n","import File from './file';\r\nimport ModificationTable from './modificationtable';\r\nimport ModificationObject from './modifiedobject';\r\nimport Modification from './modification';\r\n\r\nexport default {\r\n  File,\r\n  ModificationTable,\r\n  ModificationObject,\r\n  Modification,\r\n};\r\n","import File from './file';\r\nimport CustomTextTrigger from './customtexttrigger';\r\n\r\nexport default {\r\n  File,\r\n  CustomTextTrigger,\r\n};\r\n","import File from './file';\r\n\r\nexport default {\r\n  File,\r\n};\r\n","import BinaryStream from '../../../common/binarystream';\r\n\r\n/**\r\n * war3map.wpm - the pathing file.\r\n */\r\nexport default class War3MapWpm {\r\n  version = 0;\r\n  size = new Int32Array(2);\r\n  pathing = new Uint8Array(0);\r\n\r\n  load(buffer: ArrayBuffer | Uint8Array): void {\r\n    const stream = new BinaryStream(buffer);\r\n\r\n    if (stream.readBinary(4) !== 'MP3W') {\r\n      return;\r\n    }\r\n\r\n    this.version = stream.readInt32();\r\n    stream.readInt32Array(this.size);\r\n    this.pathing = stream.readUint8Array(this.size[0] * this.size[1]);\r\n  }\r\n\r\n  save(): Uint8Array {\r\n    const stream = new BinaryStream(new ArrayBuffer(this.getByteLength()));\r\n\r\n    stream.writeBinary('MP3W');\r\n    stream.writeInt32(this.version);\r\n    stream.writeInt32Array(this.size);\r\n    stream.writeUint8Array(this.pathing);\r\n\r\n    return stream.uint8array;\r\n  }\r\n\r\n  getByteLength(): number {\r\n    return 16 + (this.size[0] * this.size[1]);\r\n  }\r\n}\r\n","import { stringToBase256 } from '../../common/typecast';\r\n\r\nexport default class TokenStream {\r\n  buffer: string;\r\n  index: number;\r\n\r\n  constructor(buffer: string) {\r\n    this.buffer = buffer;\r\n    this.index = 0;\r\n  }\r\n\r\n  read(): string | undefined {\r\n    const buffer = this.buffer;\r\n    const length = buffer.length;\r\n    let inComment = false;\r\n    let inString = false;\r\n    let inIdString = false;\r\n    let token = '';\r\n\r\n    while (this.index < length) {\r\n      const c = buffer[this.index++];\r\n\r\n      if (inComment) {\r\n        if (c === '\\n') {\r\n          inComment = false;\r\n          this.index--;\r\n        }\r\n      } else if (inString) {\r\n        if (c === '\\\\') {\r\n          token += c + buffer[this.index++];\r\n        } else if (c === '\\n') {\r\n          token += '\\\\n';\r\n        } else if (c === '\\r') {\r\n          token += '\\\\r';\r\n        } else {\r\n          token += c;\r\n        }\r\n\r\n        if (c === '\"') {\r\n          return token;\r\n        }\r\n      } else if (inIdString) {\r\n        token += c;\r\n\r\n        if (c === \"'\") {\r\n          return token;\r\n        }\r\n      } else if (c === ' ' || c === '\\t') {\r\n        if (token.length) {\r\n          return token;\r\n        }\r\n      } else if (c === '(' || c === ')' || c === '[' || c === ']' || c === '=' || c === '\\r' || c === '\\n' || c === ',' || c === '!' || c === '-' || c === '<' || c === '>' || c === '+' || c === '*' || c === '/') {\r\n        if (token.length) {\r\n          this.index--;\r\n          return token;\r\n        } else {\r\n          const c2 = buffer[this.index];\r\n\r\n          if (c === '=' && c2 === '=') {\r\n            this.index++;\r\n            return '==';\r\n          } else if (c === '\\r') {\r\n            if (c2 === '\\n') {\r\n              this.index++;\r\n            }\r\n\r\n            return '\\n';\r\n          } else if (c === '!' && c2 === '=') {\r\n            this.index++;\r\n            return '!=';\r\n          } else if (c === '/' && c2 === '/') {\r\n            if (token.length) {\r\n              this.index--;\r\n              return token;\r\n            } else {\r\n              inComment = true;\r\n            }\r\n          } else {\r\n            return c;\r\n          }\r\n        }\r\n      } else if (c === '\"') {\r\n        if (token.length) {\r\n          this.index--;\r\n          return token;\r\n        } else {\r\n          token += c;\r\n          inString = true;\r\n        }\r\n      } else if (c === \"'\") {\r\n        if (token.length) {\r\n          this.index--;\r\n          return token;\r\n        } else {\r\n          token += c;\r\n          inIdString = true;\r\n        }\r\n      } else {\r\n        token += c;\r\n      }\r\n\r\n      if (this.index === length) {\r\n        return token;\r\n      }\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Reads the next token without advancing the stream.\r\n   */\r\n  peek(): string | undefined {\r\n    const index = this.index;\r\n    const value = this.read();\r\n\r\n    this.index = index;\r\n\r\n    return value;\r\n  }\r\n\r\n  readSafe(): string {\r\n    const token = this.read();\r\n\r\n    if (token === undefined) {\r\n      throw new Error('Premature end of stream reached');\r\n    }\r\n\r\n    if (token === 'null') {\r\n      return 'nil';\r\n    } else if (token === '!=') {\r\n      return '~=';\r\n    } else if (token[0] === \"'\") {\r\n      return `${stringToBase256(token.slice(1, token.indexOf(\"'\", 1)))}`;\r\n    } else if (token === 'break' || token === 'do' || token === 'end' || token === 'for' || token === 'goto' || token === 'in' || token === 'nil' || token === 'repeat' || token === 'until' || token === 'while') { // Lua reserved keywords\r\n      return token + '_';\r\n    } else if (token === 'and' || token === 'or') {\r\n      return ' ' + token + ' ';\r\n    } else if (token[0] === '$') {\r\n      return '0x' + token.slice(1);\r\n    }\r\n\r\n    return token;\r\n  }\r\n\r\n  readUntil(delimiter: string): string {\r\n    let tokens = '';\r\n    let token;\r\n\r\n    while ((token = this.readSafe()) !== delimiter) {\r\n      tokens += token;\r\n    }\r\n\r\n    return tokens;\r\n  }\r\n}\r\n","import File from './file';\r\nimport TriggerCategory from './triggercategory';\r\nimport Variable from './variable';\r\nimport Trigger from './trigger';\r\nimport ECA from './eca';\r\nimport Parameter from './parameter';\r\nimport SubParameters from './subparameters';\r\nimport { TriggerData } from './triggerdata';\r\n\r\nexport default {\r\n  File,\r\n  TriggerCategory,\r\n  Variable,\r\n  Trigger,\r\n  ECA,\r\n  Parameter,\r\n  SubParameters,\r\n  TriggerData,\r\n};\r\n","import TokenStream from '../../../utils/jass2/tokenstream';\r\nimport { IniSection, IniFile } from '../../ini/file';\r\n\r\n/**\r\n * A standard object mapping strings to strings.\r\n */\r\nexport type StringObject = {[key: string]: string };\r\n\r\n\r\nexport type FunctionSignature = { args: string[], scriptName: string | null, returnType: string | null };\r\n\r\n/**\r\n * A standard object mapping strings to function signatures and an optional Jass name.\r\n */\r\nexport type FunctionObject = {[key: string]: FunctionSignature };\r\n\r\n/**\r\n * Trigger data needed to load a WTG file.\r\n */\r\nexport class TriggerData {\r\n  types: StringObject = {};\r\n  functions: FunctionObject[] = [{}, {}, {}, {}];\r\n  presets: StringObject = {};\r\n  externalTypes: StringObject = {};\r\n  externalFunctions: FunctionObject[] = [{}, {}, {}, {}];\r\n  externalPresets: StringObject = {};\r\n\r\n  addTriggerData(buffer: string, isExternal: boolean): void {\r\n    let types = this.types;\r\n    let functions = this.functions;\r\n    let presets = this.presets;\r\n\r\n    if (isExternal) {\r\n      types = this.externalTypes;\r\n      functions = this.externalFunctions;\r\n      presets = this.externalPresets;\r\n    }\r\n\r\n    const triggerData = new IniFile();\r\n\r\n    triggerData.load(buffer);\r\n\r\n    let section = triggerData.getSection('TriggerTypes');\r\n    if (section) {\r\n      this.addTriggerTypes(types, section);\r\n    }\r\n\r\n    section = triggerData.getSection('TriggerEvents');\r\n    if (section) {\r\n      this.addTriggerDataFunctions(functions[0], section, 1);\r\n    }\r\n\r\n    section = triggerData.getSection('TriggerConditions');\r\n    if (section) {\r\n      this.addTriggerDataFunctions(functions[1], section, 1);\r\n    }\r\n\r\n    section = triggerData.getSection('TriggerActions');\r\n    if (section) {\r\n      this.addTriggerDataFunctions(functions[2], section, 1);\r\n    }\r\n\r\n    section = triggerData.getSection('TriggerCalls');\r\n    if (section) {\r\n      this.addTriggerDataFunctions(functions[3], section, 3);\r\n    }\r\n\r\n    section = triggerData.getSection('TriggerParams');\r\n    if (section) {\r\n      this.addTriggerDataPresets(presets, section);\r\n    }\r\n  }\r\n\r\n  addTriggerTypes(types: StringObject, section: IniSection): void {\r\n    for (const [key, value] of section) {\r\n      // We know the values are going to be strings.\r\n      const tokens = value.split(',');\r\n\r\n      types[key.toLowerCase()] = tokens[4] || '';\r\n    }\r\n  }\r\n\r\n  addTriggerDataFunctions(functions: FunctionObject, section: IniSection, skipped: number): void {\r\n    for (const [key, value] of section) {\r\n      // We don't care about metadata lines.\r\n      if (key[0] !== '_') {\r\n        // We know the values are going to be strings.\r\n        const tokens = value.split(',');\r\n        const args = [];\r\n\r\n        // Can be used by actions to make aliases.\r\n        const scriptName = <string>section.get(`_${key}_scriptname`) || null;\r\n\r\n        let returnType = null;\r\n\r\n        // TriggerCalls have a return type.\r\n        if (skipped === 3) {\r\n          returnType = tokens[2];\r\n        }\r\n\r\n        for (let i = skipped, l = tokens.length; i < l; i++) {\r\n          const token = tokens[i];\r\n\r\n          // We don't care about constants.\r\n          if (Number.isNaN(parseFloat(token)) && token !== 'nothing' && token !== '') {\r\n            args.push(token);\r\n          }\r\n        }\r\n\r\n        functions[key.toLowerCase()] = { args, scriptName, returnType };\r\n      }\r\n    }\r\n  }\r\n\r\n  addTriggerDataPresets(presets: StringObject, section: IniSection): void {\r\n    for (const [key, value] of section) {\r\n      // We know the values are going to be strings.\r\n      const tokens = value.split(',');\r\n\r\n      // Note that the operators are enclosed by \"\" for some reason.\r\n      // Note that string literals are enclosed by backticks.\r\n      presets[key.toLowerCase()] = tokens[2].replace(/\"/g, '').replace(/`/g, '\"');\r\n    }\r\n  }\r\n\r\n  addJassFunctions(jass: string): void {\r\n    const stream = new TokenStream(jass);\r\n    let token;\r\n\r\n    while ((token = stream.read()) !== undefined) {\r\n      if (token === 'native' || token === 'function') {\r\n        const scriptName = stream.read();\r\n\r\n        if (scriptName) {\r\n          token = stream.read();\r\n\r\n          if (token === 'takes') {\r\n            const args = [];\r\n            const token = stream.readSafe(); // nothing or type\r\n\r\n            if (token !== 'nothing') {\r\n              args.push(token);\r\n              stream.readSafe();\r\n\r\n              while (stream.read() === ',') {\r\n                args.push(stream.readSafe());\r\n                stream.readSafe();\r\n              }\r\n            } else {\r\n              stream.read(); // returns\r\n            }\r\n\r\n            let returnType: string | null = stream.readSafe();\r\n\r\n            if (returnType === 'nothing') {\r\n              returnType = null;\r\n            }\r\n\r\n            const name = scriptName.toLowerCase();\r\n            const signature = { args, scriptName, returnType };\r\n\r\n            // There is no way to know if this signature could be used as a TriggerAction or TriggerCall.\r\n            // So try to always add to TriggerAction...\r\n            this.externalFunctions[2][name] = signature;\r\n\r\n            // ...and if there is a return type, add also to TriggerCall.\r\n            if (returnType !== 'nothing') {\r\n              this.externalFunctions[3][name] = signature;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Given a type, return its base type.\r\n   * \r\n   * Returns the given type if its not a child type.\r\n   */\r\n  getBaseType(type: string): string {\r\n    type = type.toLowerCase();\r\n\r\n    let base = this.types[type];\r\n\r\n    if (base === undefined) {\r\n      base = this.externalTypes[type];\r\n    }\r\n\r\n    // Same as !base, but be explicit to be clearer.\r\n    if (base === '' || base === undefined) {\r\n      return type;\r\n    }\r\n\r\n    return base;\r\n  }\r\n\r\n  isBaseFunction(type: number, name: string): boolean {\r\n    name = name.toLowerCase();\r\n\r\n    if (this.functions[type][name]) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Gets the signature of the given function.\r\n   */\r\n  getFunction(type: number, name: string): FunctionSignature {\r\n    name = name.toLowerCase();\r\n\r\n    let args = this.functions[type][name];\r\n\r\n    if (!args) {\r\n      args = this.externalFunctions[type][name];\r\n    }\r\n\r\n    return args;\r\n  }\r\n\r\n  /**\r\n   * Get the type of a function given its name.\r\n   * Returns -1 if the function isn't recognized.\r\n   */\r\n  getFunctionType(name: string): number {\r\n    name = name.toLowerCase();\r\n\r\n    const functions = this.functions;\r\n\r\n    for (let i = 0; i < 4; i++) {\r\n      if (functions[i][name]) {\r\n        return i;\r\n      }\r\n    }\r\n\r\n    return -1;\r\n  }\r\n\r\n  /**\r\n   * Gets a preset value.\r\n   */\r\n  getPreset(name: string): string {\r\n    name = name.toLowerCase();\r\n\r\n    let preset = this.presets[name];\r\n\r\n    if (preset === undefined) {\r\n      preset = this.externalPresets[name];\r\n    }\r\n\r\n    return preset;\r\n  }\r\n\r\n  /**\r\n   * Is the given preset a custom or standard one?\r\n   */\r\n  isCustomPreset(name: string): boolean {\r\n    name = name.toLowerCase();\r\n\r\n    if (this.presets[name] !== undefined) {\r\n      return false;\r\n    }\r\n\r\n    if (this.externalPresets[name] !== undefined) {\r\n      return true;\r\n    }\r\n\r\n    throw new Error(`Failed to find a preset: ${name}`);\r\n  }\r\n}\r\n","import File from './file';\r\n\r\nexport default {\r\n  File,\r\n};\r\n","import BinaryStream from '../../../common/binarystream';\r\n\r\n/**\r\n * A dropped item.\r\n */\r\nexport default class DroppedItem {\r\n  id = '\\0\\0\\0\\0';\r\n  chance = 0;\r\n\r\n  load(stream: BinaryStream): void {\r\n    this.id = stream.readBinary(4);\r\n    this.chance = stream.readInt32();\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeBinary(this.id);\r\n    stream.writeInt32(this.chance);\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport DroppedItem from './droppeditem';\r\n\r\n/**\r\n * A dropped item set.\r\n */\r\nexport default class DroppedItemSet {\r\n  items: DroppedItem[] = [];\r\n\r\n  load(stream: BinaryStream): void {\r\n    for (let i = 0, l = stream.readInt32(); i < l; i++) {\r\n      const item = new DroppedItem();\r\n\r\n      item.load(stream);\r\n\r\n      this.items[i] = item;\r\n    }\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeInt32(this.items.length);\r\n\r\n    for (const item of this.items) {\r\n      item.save(stream);\r\n    }\r\n  }\r\n\r\n  getByteLength(): number {\r\n    return 4 + this.items.length * 8;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\n\r\n/**\r\n * An inventory item.\r\n */\r\nexport default class InventoryItem {\r\n  slot = 0;\r\n  id = '\\0\\0\\0\\0';\r\n\r\n  load(stream: BinaryStream): void {\r\n    this.slot = stream.readInt32();\r\n    this.id = stream.readBinary(4);\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeInt32(this.slot);\r\n    stream.writeBinary(this.id);\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\n\r\n/**\r\n * A modified ability.\r\n */\r\nexport default class ModifiedAbility {\r\n  id = '\\0\\0\\0\\0';\r\n  activeForAutocast = 0;\r\n  heroLevel = 1;\r\n\r\n  load(stream: BinaryStream): void {\r\n    this.id = stream.readBinary(4);\r\n    this.activeForAutocast = stream.readInt32();\r\n    this.heroLevel = stream.readInt32();\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeBinary(this.id);\r\n    stream.writeInt32(this.activeForAutocast);\r\n    stream.writeInt32(this.heroLevel);\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\n\r\n/**\r\n * A random unit.\r\n */\r\nexport default class RandomUnit {\r\n  id = '\\0\\0\\0\\0';\r\n  chance = 0;\r\n\r\n  load(stream: BinaryStream): void {\r\n    this.id = stream.readBinary(4);\r\n    this.chance = stream.readInt32();\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeBinary(this.id);\r\n    stream.writeInt32(this.chance);\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport DroppedItemSet from './droppeditemset';\r\nimport InventoryItem from './inventoryitem';\r\nimport ModifiedAbility from './modifiedability';\r\nimport RandomUnit from './randomunit';\r\n\r\n/**\r\n * A unit.\r\n */\r\nexport default class Unit {\r\n  id = '\\0\\0\\0\\0';\r\n  variation = 0;\r\n  location = new Float32Array(3);\r\n  angle = 0;\r\n  scale = new Float32Array([1, 1, 1]);\r\n  /**\r\n   * @since Game version 1.32\r\n   */\r\n  skin = '\\0\\0\\0\\0';\r\n  flags = 0;\r\n  player = 0;\r\n  unknown = 0;\r\n  hitpoints = -1;\r\n  mana = -1;\r\n  /**\r\n   * @since 8\r\n   */\r\n  droppedItemTable = 0;\r\n  droppedItemSets: DroppedItemSet[] = [];\r\n  goldAmount = 0;\r\n  targetAcquisition = 0;\r\n  heroLevel = 0;\r\n  /**\r\n   * @since 8\r\n   */\r\n  heroStrength = 0;\r\n  /**\r\n   * @since 8\r\n   */\r\n  heroAgility = 0;\r\n  /**\r\n   * @since 8\r\n   */\r\n  heroIntelligence = 0;\r\n  itemsInInventory: InventoryItem[] = [];\r\n  modifiedAbilities: ModifiedAbility[] = [];\r\n  randomFlag = 0;\r\n  level = new Uint8Array(3);\r\n  itemClass = 0;\r\n  unitGroup = 0;\r\n  positionInGroup = 0;\r\n  randomUnitTables: RandomUnit[] = [];\r\n  customTeamColor = 0;\r\n  waygate = 0;\r\n  creationNumber = 0;\r\n\r\n  load(stream: BinaryStream, version: number, subversion: number, buildVersion: number): void {\r\n    this.id = stream.readBinary(4);\r\n    this.variation = stream.readInt32();\r\n    stream.readFloat32Array(this.location);\r\n    this.angle = stream.readFloat32();\r\n    stream.readFloat32Array(this.scale);\r\n\r\n    if (buildVersion > 131) {\r\n      this.skin = stream.readBinary(4);\r\n    }\r\n\r\n    this.flags = stream.readUint8();\r\n    this.player = stream.readInt32();\r\n    this.unknown = stream.readUint16();\r\n    this.hitpoints = stream.readInt32();\r\n    this.mana = stream.readInt32();\r\n\r\n    if (subversion > 10) {\r\n      this.droppedItemTable = stream.readInt32();\r\n    }\r\n\r\n    for (let i = 0, l = stream.readInt32(); i < l; i++) {\r\n      const set = new DroppedItemSet();\r\n\r\n      set.load(stream);\r\n\r\n      this.droppedItemSets[i] = set;\r\n    }\r\n\r\n    this.goldAmount = stream.readInt32();\r\n    this.targetAcquisition = stream.readFloat32();\r\n    this.heroLevel = stream.readInt32();\r\n\r\n    if (subversion > 10) {\r\n      this.heroStrength = stream.readInt32();\r\n      this.heroAgility = stream.readInt32();\r\n      this.heroIntelligence = stream.readInt32();\r\n    }\r\n\r\n    for (let i = 0, l = stream.readInt32(); i < l; i++) {\r\n      const item = new InventoryItem();\r\n\r\n      item.load(stream);\r\n\r\n      this.itemsInInventory[i] = item;\r\n    }\r\n\r\n    for (let i = 0, l = stream.readInt32(); i < l; i++) {\r\n      const modifiedAbility = new ModifiedAbility();\r\n\r\n      modifiedAbility.load(stream);\r\n\r\n      this.modifiedAbilities[i] = modifiedAbility;\r\n    }\r\n\r\n    this.randomFlag = stream.readInt32();\r\n\r\n    if (this.randomFlag === 0) {\r\n      stream.readUint8Array(this.level); // 24bit number\r\n      this.itemClass = stream.readUint8();\r\n    } else if (this.randomFlag === 1) {\r\n      this.unitGroup = stream.readUint32();\r\n      this.positionInGroup = stream.readUint32();\r\n    } else if (this.randomFlag === 2) {\r\n      for (let i = 0, l = stream.readInt32(); i < l; i++) {\r\n        const randomUnit = new RandomUnit();\r\n\r\n        randomUnit.load(stream);\r\n\r\n        this.randomUnitTables[i] = randomUnit;\r\n      }\r\n    }\r\n\r\n    this.customTeamColor = stream.readInt32();\r\n    this.waygate = stream.readInt32();\r\n    this.creationNumber = stream.readInt32();\r\n  }\r\n\r\n  save(stream: BinaryStream, version: number, subversion: number, buildVersion: number): void {\r\n    stream.writeBinary(this.id);\r\n    stream.writeInt32(this.variation);\r\n    stream.writeFloat32Array(this.location);\r\n    stream.writeFloat32(this.angle);\r\n    stream.writeFloat32Array(this.scale);\r\n\r\n    if (buildVersion > 131) {\r\n      stream.writeBinary(this.skin);\r\n    }\r\n\r\n    stream.writeUint8(this.flags);\r\n    stream.writeInt32(this.player);\r\n    stream.writeUint16(this.unknown);\r\n    stream.writeInt32(this.hitpoints);\r\n    stream.writeInt32(this.mana);\r\n\r\n    if (subversion > 10) {\r\n      stream.writeInt32(this.droppedItemTable);\r\n    }\r\n\r\n    stream.writeInt32(this.droppedItemSets.length);\r\n\r\n    for (const droppedItemSet of this.droppedItemSets) {\r\n      droppedItemSet.save(stream);\r\n    }\r\n\r\n    stream.writeInt32(this.goldAmount);\r\n    stream.writeFloat32(this.targetAcquisition);\r\n    stream.writeInt32(this.heroLevel);\r\n\r\n    if (subversion > 10) {\r\n      stream.writeInt32(this.heroStrength);\r\n      stream.writeInt32(this.heroAgility);\r\n      stream.writeInt32(this.heroIntelligence);\r\n    }\r\n\r\n    stream.writeInt32(this.itemsInInventory.length);\r\n\r\n    for (const itemInInventory of this.itemsInInventory) {\r\n      itemInInventory.save(stream);\r\n    }\r\n\r\n    stream.writeInt32(this.modifiedAbilities.length);\r\n\r\n    for (const modifiedAbility of this.modifiedAbilities) {\r\n      modifiedAbility.save(stream);\r\n    }\r\n\r\n    stream.writeInt32(this.randomFlag);\r\n\r\n    if (this.randomFlag === 0) {\r\n      stream.writeUint8Array(this.level);\r\n      stream.writeUint8(this.itemClass);\r\n    } else if (this.randomFlag === 1) {\r\n      stream.writeUint32(this.unitGroup);\r\n      stream.writeUint32(this.positionInGroup);\r\n    } else if (this.randomFlag === 2) {\r\n      stream.writeInt32(this.randomUnitTables.length);\r\n\r\n      for (const randomUnitTable of this.randomUnitTables) {\r\n        randomUnitTable.save(stream);\r\n      }\r\n    }\r\n\r\n    stream.writeInt32(this.customTeamColor);\r\n    stream.writeInt32(this.waygate);\r\n    stream.writeInt32(this.creationNumber);\r\n  }\r\n\r\n  getByteLength(version: number, subversion: number, buildVersion: number): number {\r\n    let size = 91;\r\n\r\n    if (buildVersion > 131) {\r\n      size += 4;\r\n    }\r\n\r\n    if (subversion > 10) {\r\n      size += 16;\r\n    }\r\n\r\n    for (const droppedItemSet of this.droppedItemSets) {\r\n      size += droppedItemSet.getByteLength();\r\n    }\r\n\r\n    size += this.itemsInInventory.length * 8;\r\n\r\n    size += this.modifiedAbilities.length * 12;\r\n\r\n    if (this.randomFlag === 0) {\r\n      size += 4;\r\n    } else if (this.randomFlag === 1) {\r\n      size += 8;\r\n    } else if (this.randomFlag === 2) {\r\n      size += 4 + this.randomUnitTables.length * 8;\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport Unit from './unit';\r\n\r\n/**\r\n * war3mapUnits.doo - the units and items file.\r\n */\r\nexport default class War3MapUnitsDoo {\r\n  version = 8;\r\n  subversion = 11;\r\n  units: Unit[] = [];\r\n\r\n  load(buffer: ArrayBuffer | Uint8Array, buildVersion: number): void {\r\n    const stream = new BinaryStream(buffer);\r\n\r\n    if (stream.readBinary(4) !== 'W3do') {\r\n      throw new Error('Not a valid war3mapUnits.doo buffer');\r\n    }\r\n\r\n    this.version = stream.readInt32();\r\n    this.subversion = stream.readUint32();\r\n\r\n    for (let i = 0, l = stream.readInt32(); i < l; i++) {\r\n      const unit = new Unit();\r\n\r\n      unit.load(stream, this.version, this.subversion, buildVersion);\r\n\r\n      this.units[i] = unit;\r\n    }\r\n  }\r\n\r\n  save(buildVersion: number): Uint8Array {\r\n    const stream = new BinaryStream(new ArrayBuffer(this.getByteLength(buildVersion)));\r\n\r\n    stream.writeBinary('W3do');\r\n    stream.writeInt32(this.version);\r\n    stream.writeUint32(this.subversion);\r\n    stream.writeInt32(this.units.length);\r\n\r\n    for (const unit of this.units) {\r\n      unit.save(stream, this.version, this.subversion, buildVersion);\r\n    }\r\n\r\n    return stream.uint8array;\r\n  }\r\n\r\n  getByteLength(buildVersion: number): number {\r\n    let size = 16;\r\n\r\n    for (const unit of this.units) {\r\n      size += unit.getByteLength(this.version, this.subversion, buildVersion);\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import File from './file';\r\nimport Unit from './unit';\r\nimport DroppedItemSet from './droppeditemset';\r\nimport DroppedItem from './droppeditem';\r\nimport InventoryItem from './inventoryitem';\r\nimport ModifiedAbility from './modifiedability';\r\nimport RandomUnit from './randomunit';\r\n\r\nexport default {\r\n  File,\r\n  Unit,\r\n  DroppedItemSet,\r\n  DroppedItem,\r\n  InventoryItem,\r\n  ModifiedAbility,\r\n  RandomUnit,\r\n};\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\n\r\n/**\r\n * A map title.\r\n */\r\nexport default class MapTitle {\r\n  visible = 0;\r\n  chapterTitle = '';\r\n  mapTitle = '';\r\n  path = '';\r\n\r\n  load(stream: BinaryStream): void {\r\n    this.visible = stream.readInt32();\r\n    this.chapterTitle = stream.readNull();\r\n    this.mapTitle = stream.readNull();\r\n    this.path = stream.readNull();\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeInt32(this.visible);\r\n    stream.writeNull(this.chapterTitle);\r\n    stream.writeNull(this.mapTitle);\r\n    stream.writeNull(this.path);\r\n  }\r\n\r\n  getByteLength(): number {\r\n    return 7 + byteLengthUtf8(this.chapterTitle) + byteLengthUtf8(this.mapTitle) + byteLengthUtf8(this.path);\r\n  }\r\n}\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\n\r\n/**\r\n * A map order.\r\n */\r\nexport default class MapOrder {\r\n  u1 = 0;\r\n  path = '';\r\n\r\n  load(stream: BinaryStream): void {\r\n    this.u1 = stream.readInt8();\r\n    this.path = stream.readNull();\r\n  }\r\n\r\n  save(stream: BinaryStream): void {\r\n    stream.writeInt8(this.u1);\r\n    stream.writeNull(this.path);\r\n  }\r\n\r\n  getByteLength(): number {\r\n    return 2 + byteLengthUtf8(this.path);\r\n  }\r\n}\r\n","import File from './file';\r\nimport MapTitle from './maptitle';\r\nimport MapOrder from './maporder';\r\n\r\nexport default {\r\n  File,\r\n  MapTitle,\r\n  MapOrder,\r\n};\r\n","import BinaryStream from '../../../common/binarystream';\r\nimport MapTitle from './maptitle';\r\nimport MapOrder from './maporder';\r\nimport { byteLengthUtf8 } from '../../../common/utf8';\r\n\r\n/**\r\n * war3campaign.w3f - the campaign information file.\r\n */\r\nexport default class War3CampaignW3f {\r\n  version = 0;\r\n  campaignVersion = 0;\r\n  editorVersion = 0;\r\n  name = '';\r\n  difficulty = '';\r\n  author = '';\r\n  description = '';\r\n  mode = -1; // 0: fixed difficulty, only w3m maps, 1: variable difficulty, only w3m maps, 1: fixed..., contains w3x maps, 2: variable..., contains w3xm maps.\r\n  backgroundScreen = -1; // -1 = none or custom path\r\n  backgroundScreenPath = '';\r\n  minimapImagePath = '';\r\n  ambientSound = 0; // -1 = imported, 0 = none, >0 = preset index\r\n  ambientSoundPath = '';\r\n  terrainFog = 0; // 0 = not used, >0 = index of terrain fog style\r\n  fogStartZ = 0;\r\n  fogEndZ = 0;\r\n  fogDensity = 0;\r\n  fogColor = new Uint8Array(4);\r\n  userInterface = -1; // 0 = human\r\n  mapTitles: MapTitle[] = [];\r\n  mapOrders: MapOrder[] = [];\r\n\r\n  load(buffer: ArrayBuffer | Uint8Array): void {\r\n    const stream = new BinaryStream(buffer);\r\n\r\n    this.version = stream.readInt32();\r\n    this.campaignVersion = stream.readInt32();\r\n    this.editorVersion = stream.readInt32();\r\n    this.name = stream.readNull();\r\n    this.difficulty = stream.readNull();\r\n    this.author = stream.readNull();\r\n    this.description = stream.readNull();\r\n    this.mode = stream.readInt32();\r\n    this.backgroundScreen = stream.readInt32();\r\n    this.backgroundScreenPath = stream.readNull();\r\n    this.minimapImagePath = stream.readNull();\r\n    this.ambientSound = stream.readInt32();\r\n    this.ambientSoundPath = stream.readNull();\r\n    this.terrainFog = stream.readInt32();\r\n    this.fogStartZ = stream.readFloat32();\r\n    this.fogEndZ = stream.readFloat32();\r\n    this.fogDensity = stream.readFloat32();\r\n    stream.readUint8Array(this.fogColor);\r\n    this.userInterface = stream.readInt32();\r\n\r\n    for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n      const mapTitle = new MapTitle();\r\n\r\n      mapTitle.load(stream);\r\n\r\n      this.mapTitles[i] = mapTitle;\r\n    }\r\n\r\n    for (let i = 0, l = stream.readUint32(); i < l; i++) {\r\n      const mapOrder = new MapOrder();\r\n\r\n      mapOrder.load(stream);\r\n\r\n      this.mapOrders[i] = mapOrder;\r\n    }\r\n  }\r\n\r\n  save(): Uint8Array {\r\n    const stream = new BinaryStream(new ArrayBuffer(this.getByteLength()));\r\n\r\n    stream.writeInt32(this.version);\r\n    stream.writeInt32(this.campaignVersion);\r\n    stream.writeInt32(this.editorVersion);\r\n    stream.writeNull(this.name);\r\n    stream.writeNull(this.difficulty);\r\n    stream.writeNull(this.author);\r\n    stream.writeNull(this.description);\r\n    stream.writeInt32(this.mode);\r\n    stream.writeInt32(this.backgroundScreen);\r\n    stream.writeNull(this.backgroundScreenPath);\r\n    stream.writeNull(this.minimapImagePath);\r\n    stream.writeInt32(this.ambientSound);\r\n    stream.writeNull(this.ambientSoundPath);\r\n    stream.writeInt32(this.terrainFog);\r\n    stream.writeFloat32(this.fogStartZ);\r\n    stream.writeFloat32(this.fogEndZ);\r\n    stream.writeFloat32(this.fogDensity);\r\n    stream.writeUint8Array(this.fogColor);\r\n    stream.writeInt32(this.userInterface);\r\n    stream.writeUint32(this.mapTitles.length);\r\n\r\n    for (const title of this.mapTitles) {\r\n      title.save(stream);\r\n    }\r\n\r\n    stream.writeUint32(this.mapOrders.length);\r\n\r\n    for (const order of this.mapOrders) {\r\n      order.save(stream);\r\n    }\r\n\r\n    return stream.uint8array;\r\n  }\r\n\r\n  getByteLength(): number {\r\n    let size = 63 + byteLengthUtf8(this.name) + byteLengthUtf8(this.difficulty) + byteLengthUtf8(this.author) + byteLengthUtf8(this.description) + byteLengthUtf8(this.backgroundScreenPath) + byteLengthUtf8(this.minimapImagePath) + byteLengthUtf8(this.ambientSoundPath);\r\n\r\n    for (const title of this.mapTitles) {\r\n      size += title.getByteLength();\r\n    }\r\n\r\n    for (const order of this.mapOrders) {\r\n      size += order.getByteLength();\r\n    }\r\n\r\n    return size;\r\n  }\r\n}\r\n","import Map from './map';\r\nimport doo from './doo';\r\nimport imp from './imp';\r\nimport mmp from './mmp';\r\nimport shd from './shd';\r\nimport w3c from './w3c';\r\nimport w3d from './w3d';\r\nimport w3e from './w3e';\r\nimport w3i from './w3i';\r\nimport w3o from './w3o';\r\nimport w3r from './w3r';\r\nimport w3s from './w3s';\r\nimport w3u from './w3u';\r\nimport wct from './wct';\r\nimport wpm from './wpm';\r\nimport wtg from './wtg';\r\nimport wts from './wts';\r\nimport unitsdoo from './unitsdoo';\r\nimport w3f from './w3f';\r\n\r\nexport default {\r\n  Map,\r\n  doo,\r\n  imp,\r\n  mmp,\r\n  shd,\r\n  w3c,\r\n  w3d,\r\n  w3e,\r\n  w3i,\r\n  w3o,\r\n  w3r,\r\n  w3s,\r\n  w3u,\r\n  wct,\r\n  wpm,\r\n  wtg,\r\n  wts,\r\n  unitsdoo,\r\n  w3f,\r\n};\r\n","/**\r\n * Returns a number, which when multiplied with a number of fromBits bits, will convert it to a toBits bits number.\r\n * \r\n * For example, 7 * convertBitRange(3, 8) == 255.\r\n * \r\n * In other words, if we look at the bits, 111 is the same to 3 bits as 11111111 is to 8 bits.\r\n */\r\nexport default function convertBitRange(fromBits: number, toBits: number): number {\r\n  return ((1 << toBits) - 1) / ((1 << fromBits) - 1);\r\n}\r\n","/* eslint-disable */\r\n\r\n/* Copyright 2017 Mozilla Foundation\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the 'License');\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an 'AS IS' BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\n// NOTICE: This file was edited to support loading JPEG data stored in BLP files, which use a non-standard RGBA pixel format.\r\n// NOTICE2: It has been edited more to support modern building.\r\n\r\nconst _typeof = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol' ? function (obj) {\r\n  return typeof obj;\r\n} : function (obj) {\r\n  return obj && typeof Symbol === 'function' && obj.constructor === Symbol && obj !== Symbol.prototype ? 'symbol' : typeof obj;\r\n};\r\n\r\n\r\nconst JpegError = function JpegErrorClosure() {\r\n  function JpegError(msg) {\r\n    this.message = 'JPEG error: ' + msg;\r\n  }\r\n  JpegError.prototype = new Error();\r\n  JpegError.prototype.name = 'JpegError';\r\n  JpegError.constructor = JpegError;\r\n  return JpegError;\r\n}();\r\n\r\nconst dctZigZag = new Uint8Array([0, 1, 8, 16, 9, 2, 3, 10, 17, 24, 32, 25, 18, 11, 4, 5, 12, 19, 26, 33, 40, 48, 41, 34, 27, 20, 13, 6, 7, 14, 21, 28, 35, 42, 49, 56, 57, 50, 43, 36, 29, 22, 15, 23, 30, 37, 44, 51, 58, 59, 52, 45, 38, 31, 39, 46, 53, 60, 61, 54, 47, 55, 62, 63]);\r\nconst dctCos1 = 4017;\r\nconst dctSin1 = 799;\r\nconst dctCos3 = 3406;\r\nconst dctSin3 = 2276;\r\nconst dctCos6 = 1567;\r\nconst dctSin6 = 3784;\r\nconst dctSqrt2 = 5793;\r\nconst dctSqrt1d2 = 2896;\r\n\r\nfunction buildHuffmanTable(codeLengths, values) {\r\n  let k = 0,\r\n    code = [],\r\n    i,\r\n    j,\r\n    length = 16;\r\n  while (length > 0 && !codeLengths[length - 1]) {\r\n    length--;\r\n  }\r\n  code.push({\r\n    children: [],\r\n    index: 0,\r\n  });\r\n  let p = code[0],\r\n    q;\r\n  for (i = 0; i < length; i++) {\r\n    for (j = 0; j < codeLengths[i]; j++) {\r\n      p = code.pop();\r\n      p.children[p.index] = values[k];\r\n      while (p.index > 0) {\r\n        p = code.pop();\r\n      }\r\n      p.index++;\r\n      code.push(p);\r\n      while (code.length <= i) {\r\n        code.push(q = {\r\n          children: [],\r\n          index: 0,\r\n        });\r\n        p.children[p.index] = q.children;\r\n        p = q;\r\n      }\r\n      k++;\r\n    }\r\n    if (i + 1 < length) {\r\n      code.push(q = {\r\n        children: [],\r\n        index: 0,\r\n      });\r\n      p.children[p.index] = q.children;\r\n      p = q;\r\n    }\r\n  }\r\n  return code[0].children;\r\n}\r\nfunction getBlockBufferOffset(component, row, col) {\r\n  return 64 * ((component.blocksPerLine + 1) * row + col);\r\n}\r\nfunction decodeScan(data, offset, frame, components, resetInterval, spectralStart, spectralEnd, successivePrev, successive) {\r\n  const mcusPerLine = frame.mcusPerLine;\r\n  const progressive = frame.progressive;\r\n  let startOffset = offset,\r\n    bitsData = 0,\r\n    bitsCount = 0;\r\n  function readBit() {\r\n    if (bitsCount > 0) {\r\n      bitsCount--;\r\n      return bitsData >> bitsCount & 1;\r\n    }\r\n    bitsData = data[offset++];\r\n    if (bitsData === 0xFF) {\r\n      const nextByte = data[offset++];\r\n      if (nextByte) {\r\n        throw new JpegError('unexpected marker ' + (bitsData << 8 | nextByte).toString(16));\r\n      }\r\n    }\r\n    bitsCount = 7;\r\n    return bitsData >>> 7;\r\n  }\r\n  function decodeHuffman(tree) {\r\n    let node = tree;\r\n    while (true) {\r\n      node = node[readBit()];\r\n      if (typeof node === 'number') {\r\n        return node;\r\n      }\r\n      if ((typeof node === 'undefined' ? 'undefined' : _typeof(node)) !== 'object') {\r\n        throw new JpegError('invalid huffman sequence');\r\n      }\r\n    }\r\n  }\r\n  function receive(length) {\r\n    let n = 0;\r\n    while (length > 0) {\r\n      n = n << 1 | readBit();\r\n      length--;\r\n    }\r\n    return n;\r\n  }\r\n  function receiveAndExtend(length) {\r\n    if (length === 1) {\r\n      return readBit() === 1 ? 1 : -1;\r\n    }\r\n    const n = receive(length);\r\n    if (n >= 1 << length - 1) {\r\n      return n;\r\n    }\r\n    return n + (-1 << length) + 1;\r\n  }\r\n  function decodeBaseline(component, offset) {\r\n    const t = decodeHuffman(component.huffmanTableDC);\r\n    const diff = t === 0 ? 0 : receiveAndExtend(t);\r\n    component.blockData[offset] = component.pred += diff;\r\n    let k = 1;\r\n    while (k < 64) {\r\n      const rs = decodeHuffman(component.huffmanTableAC);\r\n      const s = rs & 15,\r\n        r = rs >> 4;\r\n      if (s === 0) {\r\n        if (r < 15) {\r\n          break;\r\n        }\r\n        k += 16;\r\n        continue;\r\n      }\r\n      k += r;\r\n      const z = dctZigZag[k];\r\n      component.blockData[offset + z] = receiveAndExtend(s);\r\n      k++;\r\n    }\r\n  }\r\n  function decodeDCFirst(component, offset) {\r\n    const t = decodeHuffman(component.huffmanTableDC);\r\n    const diff = t === 0 ? 0 : receiveAndExtend(t) << successive;\r\n    component.blockData[offset] = component.pred += diff;\r\n  }\r\n  function decodeDCSuccessive(component, offset) {\r\n    component.blockData[offset] |= readBit() << successive;\r\n  }\r\n  let eobrun = 0;\r\n  function decodeACFirst(component, offset) {\r\n    if (eobrun > 0) {\r\n      eobrun--;\r\n      return;\r\n    }\r\n    let k = spectralStart,\r\n      e = spectralEnd;\r\n    while (k <= e) {\r\n      const rs = decodeHuffman(component.huffmanTableAC);\r\n      const s = rs & 15,\r\n        r = rs >> 4;\r\n      if (s === 0) {\r\n        if (r < 15) {\r\n          eobrun = receive(r) + (1 << r) - 1;\r\n          break;\r\n        }\r\n        k += 16;\r\n        continue;\r\n      }\r\n      k += r;\r\n      const z = dctZigZag[k];\r\n      component.blockData[offset + z] = receiveAndExtend(s) * (1 << successive);\r\n      k++;\r\n    }\r\n  }\r\n  let successiveACState = 0,\r\n    successiveACNextValue;\r\n  function decodeACSuccessive(component, offset) {\r\n    let k = spectralStart;\r\n    const e = spectralEnd;\r\n    let r = 0;\r\n    let s;\r\n    let rs;\r\n    while (k <= e) {\r\n      const z = dctZigZag[k];\r\n      switch (successiveACState) {\r\n        case 0:\r\n          rs = decodeHuffman(component.huffmanTableAC);\r\n          s = rs & 15;\r\n          r = rs >> 4;\r\n          if (s === 0) {\r\n            if (r < 15) {\r\n              eobrun = receive(r) + (1 << r);\r\n              successiveACState = 4;\r\n            } else {\r\n              r = 16;\r\n              successiveACState = 1;\r\n            }\r\n          } else {\r\n            if (s !== 1) {\r\n              throw new JpegError('invalid ACn encoding');\r\n            }\r\n            successiveACNextValue = receiveAndExtend(s);\r\n            successiveACState = r ? 2 : 3;\r\n          }\r\n          continue;\r\n        case 1:\r\n        case 2:\r\n          if (component.blockData[offset + z]) {\r\n            component.blockData[offset + z] += readBit() << successive;\r\n          } else {\r\n            r--;\r\n            if (r === 0) {\r\n              successiveACState = successiveACState === 2 ? 3 : 0;\r\n            }\r\n          }\r\n          break;\r\n        case 3:\r\n          if (component.blockData[offset + z]) {\r\n            component.blockData[offset + z] += readBit() << successive;\r\n          } else {\r\n            component.blockData[offset + z] = successiveACNextValue << successive;\r\n            successiveACState = 0;\r\n          }\r\n          break;\r\n        case 4:\r\n          if (component.blockData[offset + z]) {\r\n            component.blockData[offset + z] += readBit() << successive;\r\n          }\r\n          break;\r\n      }\r\n      k++;\r\n    }\r\n    if (successiveACState === 4) {\r\n      eobrun--;\r\n      if (eobrun === 0) {\r\n        successiveACState = 0;\r\n      }\r\n    }\r\n  }\r\n  function decodeMcu(component, decode, mcu, row, col) {\r\n    const mcuRow = mcu / mcusPerLine | 0;\r\n    const mcuCol = mcu % mcusPerLine;\r\n    const blockRow = mcuRow * component.v + row;\r\n    const blockCol = mcuCol * component.h + col;\r\n    const offset = getBlockBufferOffset(component, blockRow, blockCol);\r\n    decode(component, offset);\r\n  }\r\n  function decodeBlock(component, decode, mcu) {\r\n    const blockRow = mcu / component.blocksPerLine | 0;\r\n    const blockCol = mcu % component.blocksPerLine;\r\n    const offset = getBlockBufferOffset(component, blockRow, blockCol);\r\n    decode(component, offset);\r\n  }\r\n  const componentsLength = components.length;\r\n  let component, i, j, k, n;\r\n  let decodeFn;\r\n  if (progressive) {\r\n    if (spectralStart === 0) {\r\n      decodeFn = successivePrev === 0 ? decodeDCFirst : decodeDCSuccessive;\r\n    } else {\r\n      decodeFn = successivePrev === 0 ? decodeACFirst : decodeACSuccessive;\r\n    }\r\n  } else {\r\n    decodeFn = decodeBaseline;\r\n  }\r\n  let mcu = 0,\r\n    fileMarker;\r\n  let mcuExpected;\r\n  if (componentsLength === 1) {\r\n    mcuExpected = components[0].blocksPerLine * components[0].blocksPerColumn;\r\n  } else {\r\n    mcuExpected = mcusPerLine * frame.mcusPerColumn;\r\n  }\r\n  let h, v;\r\n  while (mcu < mcuExpected) {\r\n    const mcuToRead = resetInterval ? Math.min(mcuExpected - mcu, resetInterval) : mcuExpected;\r\n    for (i = 0; i < componentsLength; i++) {\r\n      components[i].pred = 0;\r\n    }\r\n    eobrun = 0;\r\n    if (componentsLength === 1) {\r\n      component = components[0];\r\n      for (n = 0; n < mcuToRead; n++) {\r\n        decodeBlock(component, decodeFn, mcu);\r\n        mcu++;\r\n      }\r\n    } else {\r\n      for (n = 0; n < mcuToRead; n++) {\r\n        for (i = 0; i < componentsLength; i++) {\r\n          component = components[i];\r\n          h = component.h;\r\n          v = component.v;\r\n          for (j = 0; j < v; j++) {\r\n            for (k = 0; k < h; k++) {\r\n              decodeMcu(component, decodeFn, mcu, j, k);\r\n            }\r\n          }\r\n        }\r\n        mcu++;\r\n      }\r\n    }\r\n    bitsCount = 0;\r\n    fileMarker = findNextFileMarker(data, offset);\r\n    if (fileMarker && fileMarker.invalid) {\r\n      // (0, _util.warn)('decodeScan - unexpected MCU data, next marker is: ' + fileMarker.invalid);\r\n      offset = fileMarker.offset;\r\n    }\r\n    const marker = fileMarker && fileMarker.marker;\r\n    if (!marker || marker <= 0xFF00) {\r\n      throw new JpegError('marker was not found');\r\n    }\r\n    if (marker >= 0xFFD0 && marker <= 0xFFD7) {\r\n      offset += 2;\r\n    } else {\r\n      break;\r\n    }\r\n  }\r\n  fileMarker = findNextFileMarker(data, offset);\r\n  if (fileMarker && fileMarker.invalid) {\r\n    // (0, _util.warn)('decodeScan - unexpected Scan data, next marker is: ' + fileMarker.invalid);\r\n    offset = fileMarker.offset;\r\n  }\r\n  return offset - startOffset;\r\n}\r\nfunction quantizeAndInverse(component, blockBufferOffset, p) {\r\n  const qt = component.quantizationTable,\r\n    blockData = component.blockData;\r\n  let v0, v1, v2, v3, v4, v5, v6, v7;\r\n  let p0, p1, p2, p3, p4, p5, p6, p7;\r\n  let t;\r\n  if (!qt) {\r\n    throw new JpegError('missing required Quantization Table.');\r\n  }\r\n  for (let row = 0; row < 64; row += 8) {\r\n    p0 = blockData[blockBufferOffset + row];\r\n    p1 = blockData[blockBufferOffset + row + 1];\r\n    p2 = blockData[blockBufferOffset + row + 2];\r\n    p3 = blockData[blockBufferOffset + row + 3];\r\n    p4 = blockData[blockBufferOffset + row + 4];\r\n    p5 = blockData[blockBufferOffset + row + 5];\r\n    p6 = blockData[blockBufferOffset + row + 6];\r\n    p7 = blockData[blockBufferOffset + row + 7];\r\n    p0 *= qt[row];\r\n    if ((p1 | p2 | p3 | p4 | p5 | p6 | p7) === 0) {\r\n      t = dctSqrt2 * p0 + 512 >> 10;\r\n      p[row] = t;\r\n      p[row + 1] = t;\r\n      p[row + 2] = t;\r\n      p[row + 3] = t;\r\n      p[row + 4] = t;\r\n      p[row + 5] = t;\r\n      p[row + 6] = t;\r\n      p[row + 7] = t;\r\n      continue;\r\n    }\r\n    p1 *= qt[row + 1];\r\n    p2 *= qt[row + 2];\r\n    p3 *= qt[row + 3];\r\n    p4 *= qt[row + 4];\r\n    p5 *= qt[row + 5];\r\n    p6 *= qt[row + 6];\r\n    p7 *= qt[row + 7];\r\n    v0 = dctSqrt2 * p0 + 128 >> 8;\r\n    v1 = dctSqrt2 * p4 + 128 >> 8;\r\n    v2 = p2;\r\n    v3 = p6;\r\n    v4 = dctSqrt1d2 * (p1 - p7) + 128 >> 8;\r\n    v7 = dctSqrt1d2 * (p1 + p7) + 128 >> 8;\r\n    v5 = p3 << 4;\r\n    v6 = p5 << 4;\r\n    v0 = v0 + v1 + 1 >> 1;\r\n    v1 = v0 - v1;\r\n    t = v2 * dctSin6 + v3 * dctCos6 + 128 >> 8;\r\n    v2 = v2 * dctCos6 - v3 * dctSin6 + 128 >> 8;\r\n    v3 = t;\r\n    v4 = v4 + v6 + 1 >> 1;\r\n    v6 = v4 - v6;\r\n    v7 = v7 + v5 + 1 >> 1;\r\n    v5 = v7 - v5;\r\n    v0 = v0 + v3 + 1 >> 1;\r\n    v3 = v0 - v3;\r\n    v1 = v1 + v2 + 1 >> 1;\r\n    v2 = v1 - v2;\r\n    t = v4 * dctSin3 + v7 * dctCos3 + 2048 >> 12;\r\n    v4 = v4 * dctCos3 - v7 * dctSin3 + 2048 >> 12;\r\n    v7 = t;\r\n    t = v5 * dctSin1 + v6 * dctCos1 + 2048 >> 12;\r\n    v5 = v5 * dctCos1 - v6 * dctSin1 + 2048 >> 12;\r\n    v6 = t;\r\n    p[row] = v0 + v7;\r\n    p[row + 7] = v0 - v7;\r\n    p[row + 1] = v1 + v6;\r\n    p[row + 6] = v1 - v6;\r\n    p[row + 2] = v2 + v5;\r\n    p[row + 5] = v2 - v5;\r\n    p[row + 3] = v3 + v4;\r\n    p[row + 4] = v3 - v4;\r\n  }\r\n  for (let col = 0; col < 8; ++col) {\r\n    p0 = p[col];\r\n    p1 = p[col + 8];\r\n    p2 = p[col + 16];\r\n    p3 = p[col + 24];\r\n    p4 = p[col + 32];\r\n    p5 = p[col + 40];\r\n    p6 = p[col + 48];\r\n    p7 = p[col + 56];\r\n    if ((p1 | p2 | p3 | p4 | p5 | p6 | p7) === 0) {\r\n      t = dctSqrt2 * p0 + 8192 >> 14;\r\n      t = t < -2040 ? 0 : t >= 2024 ? 255 : t + 2056 >> 4;\r\n      blockData[blockBufferOffset + col] = t;\r\n      blockData[blockBufferOffset + col + 8] = t;\r\n      blockData[blockBufferOffset + col + 16] = t;\r\n      blockData[blockBufferOffset + col + 24] = t;\r\n      blockData[blockBufferOffset + col + 32] = t;\r\n      blockData[blockBufferOffset + col + 40] = t;\r\n      blockData[blockBufferOffset + col + 48] = t;\r\n      blockData[blockBufferOffset + col + 56] = t;\r\n      continue;\r\n    }\r\n    v0 = dctSqrt2 * p0 + 2048 >> 12;\r\n    v1 = dctSqrt2 * p4 + 2048 >> 12;\r\n    v2 = p2;\r\n    v3 = p6;\r\n    v4 = dctSqrt1d2 * (p1 - p7) + 2048 >> 12;\r\n    v7 = dctSqrt1d2 * (p1 + p7) + 2048 >> 12;\r\n    v5 = p3;\r\n    v6 = p5;\r\n    v0 = (v0 + v1 + 1 >> 1) + 4112;\r\n    v1 = v0 - v1;\r\n    t = v2 * dctSin6 + v3 * dctCos6 + 2048 >> 12;\r\n    v2 = v2 * dctCos6 - v3 * dctSin6 + 2048 >> 12;\r\n    v3 = t;\r\n    v4 = v4 + v6 + 1 >> 1;\r\n    v6 = v4 - v6;\r\n    v7 = v7 + v5 + 1 >> 1;\r\n    v5 = v7 - v5;\r\n    v0 = v0 + v3 + 1 >> 1;\r\n    v3 = v0 - v3;\r\n    v1 = v1 + v2 + 1 >> 1;\r\n    v2 = v1 - v2;\r\n    t = v4 * dctSin3 + v7 * dctCos3 + 2048 >> 12;\r\n    v4 = v4 * dctCos3 - v7 * dctSin3 + 2048 >> 12;\r\n    v7 = t;\r\n    t = v5 * dctSin1 + v6 * dctCos1 + 2048 >> 12;\r\n    v5 = v5 * dctCos1 - v6 * dctSin1 + 2048 >> 12;\r\n    v6 = t;\r\n    p0 = v0 + v7;\r\n    p7 = v0 - v7;\r\n    p1 = v1 + v6;\r\n    p6 = v1 - v6;\r\n    p2 = v2 + v5;\r\n    p5 = v2 - v5;\r\n    p3 = v3 + v4;\r\n    p4 = v3 - v4;\r\n    p0 = p0 < 16 ? 0 : p0 >= 4080 ? 255 : p0 >> 4;\r\n    p1 = p1 < 16 ? 0 : p1 >= 4080 ? 255 : p1 >> 4;\r\n    p2 = p2 < 16 ? 0 : p2 >= 4080 ? 255 : p2 >> 4;\r\n    p3 = p3 < 16 ? 0 : p3 >= 4080 ? 255 : p3 >> 4;\r\n    p4 = p4 < 16 ? 0 : p4 >= 4080 ? 255 : p4 >> 4;\r\n    p5 = p5 < 16 ? 0 : p5 >= 4080 ? 255 : p5 >> 4;\r\n    p6 = p6 < 16 ? 0 : p6 >= 4080 ? 255 : p6 >> 4;\r\n    p7 = p7 < 16 ? 0 : p7 >= 4080 ? 255 : p7 >> 4;\r\n    blockData[blockBufferOffset + col] = p0;\r\n    blockData[blockBufferOffset + col + 8] = p1;\r\n    blockData[blockBufferOffset + col + 16] = p2;\r\n    blockData[blockBufferOffset + col + 24] = p3;\r\n    blockData[blockBufferOffset + col + 32] = p4;\r\n    blockData[blockBufferOffset + col + 40] = p5;\r\n    blockData[blockBufferOffset + col + 48] = p6;\r\n    blockData[blockBufferOffset + col + 56] = p7;\r\n  }\r\n}\r\nfunction buildComponentData(frame, component) {\r\n  const blocksPerLine = component.blocksPerLine;\r\n  const blocksPerColumn = component.blocksPerColumn;\r\n  const computationBuffer = new Int16Array(64);\r\n  for (let blockRow = 0; blockRow < blocksPerColumn; blockRow++) {\r\n    for (let blockCol = 0; blockCol < blocksPerLine; blockCol++) {\r\n      const offset = getBlockBufferOffset(component, blockRow, blockCol);\r\n      quantizeAndInverse(component, offset, computationBuffer);\r\n    }\r\n  }\r\n  return component.blockData;\r\n}\r\nfunction clamp0to255(a) {\r\n  return a <= 0 ? 0 : a >= 255 ? 255 : a;\r\n}\r\nfunction findNextFileMarker(data, currentPos, startPos) {\r\n  function peekUint16(pos) {\r\n    return data[pos] << 8 | data[pos + 1];\r\n  }\r\n  const maxPos = data.length - 1;\r\n  let newPos = startPos < currentPos ? startPos : currentPos;\r\n  if (currentPos >= maxPos) {\r\n    return null;\r\n  }\r\n  const currentMarker = peekUint16(currentPos);\r\n  if (currentMarker >= 0xFFC0 && currentMarker <= 0xFFFE) {\r\n    return {\r\n      invalid: null,\r\n      marker: currentMarker,\r\n      offset: currentPos,\r\n    };\r\n  }\r\n  let newMarker = peekUint16(newPos);\r\n  while (!(newMarker >= 0xFFC0 && newMarker <= 0xFFFE)) {\r\n    if (++newPos >= maxPos) {\r\n      return null;\r\n    }\r\n    newMarker = peekUint16(newPos);\r\n  }\r\n  return {\r\n    invalid: currentMarker.toString(16),\r\n    marker: newMarker,\r\n    offset: newPos,\r\n  };\r\n}\r\n\r\nexport class JpegImage {\r\n  constructor() {\r\n    this.decodeTransform = null;\r\n    this.colorTransform = -1;\r\n    this.width = 0;\r\n    this.height = 0;\r\n  }\r\n\r\n  parse(data) {\r\n    function readUint16() {\r\n      const value = data[offset] << 8 | data[offset + 1];\r\n      offset += 2;\r\n      return value;\r\n    }\r\n    function readDataBlock() {\r\n      const length = readUint16();\r\n      let endOffset = offset + length - 2;\r\n      const fileMarker = findNextFileMarker(data, endOffset, offset);\r\n      if (fileMarker && fileMarker.invalid) {\r\n        // (0, _util.warn)('readDataBlock - incorrect length, next marker is: ' + fileMarker.invalid);\r\n        endOffset = fileMarker.offset;\r\n      }\r\n      const array = data.subarray(offset, endOffset);\r\n      offset += array.length;\r\n      return array;\r\n    }\r\n    function prepareComponents(frame) {\r\n      const mcusPerLine = Math.ceil(frame.samplesPerLine / 8 / frame.maxH);\r\n      const mcusPerColumn = Math.ceil(frame.scanLines / 8 / frame.maxV);\r\n      for (let i = 0; i < frame.components.length; i++) {\r\n        component = frame.components[i];\r\n        const blocksPerLine = Math.ceil(Math.ceil(frame.samplesPerLine / 8) * component.h / frame.maxH);\r\n        const blocksPerColumn = Math.ceil(Math.ceil(frame.scanLines / 8) * component.v / frame.maxV);\r\n        const blocksPerLineForMcu = mcusPerLine * component.h;\r\n        const blocksPerColumnForMcu = mcusPerColumn * component.v;\r\n        const blocksBufferSize = 64 * blocksPerColumnForMcu * (blocksPerLineForMcu + 1);\r\n        component.blockData = new Int16Array(blocksBufferSize);\r\n        component.blocksPerLine = blocksPerLine;\r\n        component.blocksPerColumn = blocksPerColumn;\r\n      }\r\n      frame.mcusPerLine = mcusPerLine;\r\n      frame.mcusPerColumn = mcusPerColumn;\r\n    }\r\n    var offset = 0;\r\n    let jfif = null;\r\n    let adobe = null;\r\n    let frame, resetInterval;\r\n    const quantizationTables = [];\r\n    const huffmanTablesAC = [],\r\n      huffmanTablesDC = [];\r\n    let fileMarker = readUint16();\r\n    if (fileMarker !== 0xFFD8) {\r\n      throw new JpegError('SOI not found');\r\n    }\r\n    fileMarker = readUint16();\r\n    while (fileMarker !== 0xFFD9) {\r\n      var i, j, l;\r\n      switch (fileMarker) {\r\n        case 0xFFE0:\r\n        case 0xFFE1:\r\n        case 0xFFE2:\r\n        case 0xFFE3:\r\n        case 0xFFE4:\r\n        case 0xFFE5:\r\n        case 0xFFE6:\r\n        case 0xFFE7:\r\n        case 0xFFE8:\r\n        case 0xFFE9:\r\n        case 0xFFEA:\r\n        case 0xFFEB:\r\n        case 0xFFEC:\r\n        case 0xFFED:\r\n        case 0xFFEE:\r\n        case 0xFFEF:\r\n        case 0xFFFE:\r\n          var appData = readDataBlock();\r\n          if (fileMarker === 0xFFE0) {\r\n            if (appData[0] === 0x4A && appData[1] === 0x46 && appData[2] === 0x49 && appData[3] === 0x46 && appData[4] === 0) {\r\n              jfif = {\r\n                version: {\r\n                  major: appData[5],\r\n                  minor: appData[6],\r\n                },\r\n                densityUnits: appData[7],\r\n                xDensity: appData[8] << 8 | appData[9],\r\n                yDensity: appData[10] << 8 | appData[11],\r\n                thumbWidth: appData[12],\r\n                thumbHeight: appData[13],\r\n                thumbData: appData.subarray(14, 14 + 3 * appData[12] * appData[13]),\r\n              };\r\n            }\r\n          }\r\n          if (fileMarker === 0xFFEE) {\r\n            if (appData[0] === 0x41 && appData[1] === 0x64 && appData[2] === 0x6F && appData[3] === 0x62 && appData[4] === 0x65) {\r\n              adobe = {\r\n                version: appData[5] << 8 | appData[6],\r\n                flags0: appData[7] << 8 | appData[8],\r\n                flags1: appData[9] << 8 | appData[10],\r\n                transformCode: appData[11],\r\n              };\r\n            }\r\n          }\r\n          break;\r\n        case 0xFFDB:\r\n          var quantizationTablesLength = readUint16();\r\n          var quantizationTablesEnd = quantizationTablesLength + offset - 2;\r\n          var z;\r\n          while (offset < quantizationTablesEnd) {\r\n            const quantizationTableSpec = data[offset++];\r\n            const tableData = new Uint16Array(64);\r\n            if (quantizationTableSpec >> 4 === 0) {\r\n              for (j = 0; j < 64; j++) {\r\n                z = dctZigZag[j];\r\n                tableData[z] = data[offset++];\r\n              }\r\n            } else if (quantizationTableSpec >> 4 === 1) {\r\n              for (j = 0; j < 64; j++) {\r\n                z = dctZigZag[j];\r\n                tableData[z] = readUint16();\r\n              }\r\n            } else {\r\n              throw new JpegError('DQT - invalid table spec');\r\n            }\r\n            quantizationTables[quantizationTableSpec & 15] = tableData;\r\n          }\r\n          break;\r\n        case 0xFFC0:\r\n        case 0xFFC1:\r\n        case 0xFFC2:\r\n          if (frame) {\r\n            throw new JpegError('Only single frame JPEGs supported');\r\n          }\r\n          readUint16();\r\n          frame = {};\r\n          frame.extended = fileMarker === 0xFFC1;\r\n          frame.progressive = fileMarker === 0xFFC2;\r\n          frame.precision = data[offset++];\r\n          frame.scanLines = readUint16();\r\n          frame.samplesPerLine = readUint16();\r\n          frame.components = [];\r\n          frame.componentIds = {};\r\n          var componentsCount = data[offset++],\r\n            componentId;\r\n          var maxH = 0,\r\n            maxV = 0;\r\n          for (i = 0; i < componentsCount; i++) {\r\n            componentId = data[offset];\r\n            const h = data[offset + 1] >> 4;\r\n            const v = data[offset + 1] & 15;\r\n            if (maxH < h) {\r\n              maxH = h;\r\n            }\r\n            if (maxV < v) {\r\n              maxV = v;\r\n            }\r\n            const qId = data[offset + 2];\r\n            l = frame.components.push({\r\n              h: h,\r\n              v: v,\r\n              quantizationId: qId,\r\n              quantizationTable: null,\r\n            });\r\n            frame.componentIds[componentId] = l - 1;\r\n            offset += 3;\r\n          }\r\n          frame.maxH = maxH;\r\n          frame.maxV = maxV;\r\n          prepareComponents(frame);\r\n          break;\r\n        case 0xFFC4:\r\n          var huffmanLength = readUint16();\r\n          for (i = 2; i < huffmanLength;) {\r\n            const huffmanTableSpec = data[offset++];\r\n            const codeLengths = new Uint8Array(16);\r\n            let codeLengthSum = 0;\r\n            for (j = 0; j < 16; j++, offset++) {\r\n              codeLengthSum += codeLengths[j] = data[offset];\r\n            }\r\n            const huffmanValues = new Uint8Array(codeLengthSum);\r\n            for (j = 0; j < codeLengthSum; j++, offset++) {\r\n              huffmanValues[j] = data[offset];\r\n            }\r\n            i += 17 + codeLengthSum;\r\n            (huffmanTableSpec >> 4 === 0 ? huffmanTablesDC : huffmanTablesAC)[huffmanTableSpec & 15] = buildHuffmanTable(codeLengths, huffmanValues);\r\n          }\r\n          break;\r\n        case 0xFFDD:\r\n          readUint16();\r\n          resetInterval = readUint16();\r\n          break;\r\n        case 0xFFDA:\r\n          readUint16();\r\n          var selectorsCount = data[offset++];\r\n          var components = [],\r\n            component;\r\n          for (i = 0; i < selectorsCount; i++) {\r\n            const componentIndex = frame.componentIds[data[offset++]];\r\n            component = frame.components[componentIndex];\r\n            const tableSpec = data[offset++];\r\n            component.huffmanTableDC = huffmanTablesDC[tableSpec >> 4];\r\n            component.huffmanTableAC = huffmanTablesAC[tableSpec & 15];\r\n            components.push(component);\r\n          }\r\n          var spectralStart = data[offset++];\r\n          var spectralEnd = data[offset++];\r\n          var successiveApproximation = data[offset++];\r\n          var processed = decodeScan(data, offset, frame, components, resetInterval, spectralStart, spectralEnd, successiveApproximation >> 4, successiveApproximation & 15);\r\n          offset += processed;\r\n          break;\r\n        case 0xFFFF:\r\n          if (data[offset] !== 0xFF) {\r\n            offset--;\r\n          }\r\n          break;\r\n        default:\r\n          if (data[offset - 3] === 0xFF && data[offset - 2] >= 0xC0 && data[offset - 2] <= 0xFE) {\r\n            offset -= 3;\r\n            break;\r\n          }\r\n          throw new JpegError('unknown marker ' + fileMarker.toString(16));\r\n      }\r\n      fileMarker = readUint16();\r\n    }\r\n    this.width = frame.samplesPerLine;\r\n    this.height = frame.scanLines;\r\n    this.jfif = jfif;\r\n    this.adobe = adobe;\r\n    this.components = [];\r\n    for (i = 0; i < frame.components.length; i++) {\r\n      component = frame.components[i];\r\n      const quantizationTable = quantizationTables[component.quantizationId];\r\n      if (quantizationTable) {\r\n        component.quantizationTable = quantizationTable;\r\n      }\r\n      this.components.push({\r\n        output: buildComponentData(frame, component),\r\n        scaleX: component.h / frame.maxH,\r\n        scaleY: component.v / frame.maxV,\r\n        blocksPerLine: component.blocksPerLine,\r\n        blocksPerColumn: component.blocksPerColumn,\r\n      });\r\n    }\r\n    this.numComponents = this.components.length;\r\n  }\r\n  getData(imageData) {\r\n    const data = imageData.data;\r\n    const components = this.components;\r\n    const lineData = new Uint8Array((components[0].blocksPerLine << 3) * components[0].blocksPerColumn * 8);\r\n\r\n    // NOTICE: This forces BGR->RGB conversion without adding any costs, since really we know this is going to be a hacky BGRA BLP file.\r\n    [components[0], components[2]] = [components[2], components[0]];\r\n\r\n    for (let i = 0, numComponents = components.length; i < numComponents; i++) {\r\n      const component = components[i];\r\n      const blocksPerLine = component.blocksPerLine;\r\n      const blocksPerColumn = component.blocksPerColumn;\r\n      const samplesPerLine = blocksPerLine << 3;\r\n      var j, k, ll = 0;\r\n      var lineOffset = 0;\r\n\r\n      for (let blockRow = 0; blockRow < blocksPerColumn; blockRow++) {\r\n        const scanLine = blockRow << 3;\r\n\r\n        for (let blockCol = 0; blockCol < blocksPerLine; blockCol++) {\r\n          const bufferOffset = getBlockBufferOffset(component, blockRow, blockCol);\r\n          let offset2 = 0, sample = blockCol << 3;\r\n\r\n          for (j = 0; j < 8; j++) {\r\n            var lineOffset = (scanLine + j) * samplesPerLine;\r\n\r\n            for (k = 0; k < 8; k++) {\r\n              lineData[lineOffset + sample + k] = component.output[bufferOffset + offset2++];\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      let offset = i;\r\n\r\n      for (let y = 0; y < this.height; y++) {\r\n        for (let x = 0; x < this.width; x++) {\r\n          data[offset] = lineData[y * samplesPerLine + x];\r\n          offset += numComponents;\r\n        }\r\n      }\r\n    }\r\n\r\n    return data;\r\n  }\r\n}\r\n","import BitStream from '../../common/bitstream';\r\nimport { bytesOf } from '../../common/bytesof';\r\nimport convertBitRange from '../../common/convertbitrange';\r\nimport { JpegImage } from './jpg.js';\r\n\r\nexport const BLP1_MAGIC = 0x31504c42;\r\nexport const CONTENT_JPG = 0x0;\r\n// const CONTENT_PALLETE = 0x1;\r\n\r\n/**\r\n * A BLP1 image.\r\n */\r\nexport class BlpImage {\r\n  content = 0;\r\n  alphaBits = 0;\r\n  width = 0;\r\n  height = 0;\r\n  type = 0;\r\n  hasMipmaps = false;\r\n  mipmapOffsets = new Uint32Array(16);\r\n  mipmapSizes = new Uint32Array(16);\r\n  uint8array: Uint8Array | null = null;\r\n  /**\r\n   * Used for JPG images.\r\n   */\r\n  jpgHeader: Uint8Array | null = null;\r\n  /**\r\n   * Used for indexed images.\r\n   */\r\n  pallete: Uint8Array | null = null;\r\n\r\n  load(buffer: ArrayBuffer | Uint8Array): void {\r\n    const bytes = bytesOf(buffer);\r\n\r\n    // This includes the JPG header size, in case its a JPG image.\r\n    // Otherwise, the last element is ignored.\r\n    const header = new Int32Array(bytes.buffer, 0, 40);\r\n\r\n    if (header[0] !== BLP1_MAGIC) {\r\n      throw new Error('WrongMagicNumber');\r\n    }\r\n\r\n    this.content = header[1];\r\n    this.alphaBits = header[2];\r\n    this.width = header[3];\r\n    this.height = header[4];\r\n    this.type = header[5];\r\n    this.hasMipmaps = header[6] !== 0;\r\n\r\n    for (let i = 0; i < 16; i++) {\r\n      this.mipmapOffsets[i] = header[7 + i];\r\n      this.mipmapSizes[i] = header[23 + i];\r\n    }\r\n\r\n    this.uint8array = bytes;\r\n\r\n    if (this.content === CONTENT_JPG) {\r\n      this.jpgHeader = bytes.subarray(160, 160 + header[39]);\r\n    } else {\r\n      this.pallete = bytes.subarray(156, 156 + 1024);\r\n    }\r\n  }\r\n\r\n  getMipmap(level: number): ImageData {\r\n    const uint8array = <Uint8Array>this.uint8array;\r\n    const offset = this.mipmapOffsets[level];\r\n    const size = this.mipmapSizes[level];\r\n    let imageData: ImageData;\r\n\r\n    if (this.content === CONTENT_JPG) {\r\n      const jpgHeader = <Uint8Array>this.jpgHeader;\r\n      const data = new Uint8Array(jpgHeader.length + size);\r\n      const jpegImage = new JpegImage();\r\n\r\n      data.set(jpgHeader);\r\n      data.set(uint8array.subarray(offset, offset + size), jpgHeader.length);\r\n\r\n      jpegImage.parse(data);\r\n\r\n      // The JPG data might not actually match the correct mipmap size.\r\n      imageData = new ImageData(jpegImage.width, jpegImage.height);\r\n\r\n      jpegImage.getData(imageData);\r\n    } else {\r\n      const pallete = <Uint8Array>this.pallete;\r\n      const width = Math.max(this.width / (1 << level), 1); // max of 1 because for non-square textures one dimension will eventually be <1.\r\n      const height = Math.max(this.height / (1 << level), 1);\r\n      const size = width * height;\r\n      let alphaBits = this.alphaBits;\r\n      let bitStream;\r\n      let bitsToByte = 0;\r\n\r\n      imageData = new ImageData(width, height);\r\n\r\n      if (alphaBits > 0) {\r\n        if (alphaBits > 8) {\r\n          alphaBits = 8;\r\n        }\r\n        \r\n        bitStream = new BitStream(uint8array.buffer, offset + size, Math.ceil((size * alphaBits) / 8));\r\n        bitsToByte = convertBitRange(alphaBits, 8);\r\n      }\r\n\r\n      const data = imageData.data;\r\n\r\n      for (let i = 0; i < size; i++) {\r\n        const dataIndex = i * 4;\r\n        const paletteIndex = uint8array[offset + i] * 4;\r\n\r\n        // BGRA->RGBA\r\n        data[dataIndex] = pallete[paletteIndex + 2];\r\n        data[dataIndex + 1] = pallete[paletteIndex + 1];\r\n        data[dataIndex + 2] = pallete[paletteIndex];\r\n\r\n        if (alphaBits > 0) {\r\n          data[dataIndex + 3] = (<BitStream>bitStream).readBits(alphaBits) * bitsToByte;\r\n        } else {\r\n          data[dataIndex + 3] = 255;\r\n        }\r\n      }\r\n    }\r\n\r\n    return imageData;\r\n  }\r\n\r\n  mipmaps(): number {\r\n    let mipmaps = 0;\r\n\r\n    for (const size of this.mipmapSizes) {\r\n      if (size > 0) {\r\n        mipmaps += 1;\r\n      }\r\n    }\r\n\r\n    return mipmaps;\r\n  }\r\n\r\n  fakeMipmaps(): number {\r\n    const offsets = this.mipmapOffsets;\r\n    let mipmaps = 0;\r\n\r\n    for (let i = 0; i < 16; i++) {\r\n      const offset = offsets[i];\r\n\r\n      if (offset > 0) {\r\n        for (let j = i + 1; j < 16; j++) {\r\n          if (offset === offsets[j]) {\r\n            mipmaps += 1;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return mipmaps;\r\n  }\r\n}\r\n","import { BlpImage as Image } from './image';\r\n\r\nexport default {\r\n  Image,\r\n};\r\n","import convertBitRange from './convertbitrange';\r\n\r\nconst dxt4to8 = convertBitRange(4, 8);\r\nconst dxt5to8 = convertBitRange(5, 8);\r\nconst dxt6to8 = convertBitRange(6, 8);\r\nconst dx1colors = new Uint8Array(16);\r\nconst dx3colors = new Uint8Array(12);\r\nconst dx5alphas = new Uint8Array(8);\r\nconst red = new Uint8Array(8);\r\nconst green = new Uint8Array(8);\r\n\r\nfunction dx1Colors(out: Uint8Array, color0: number, color1: number): void {\r\n  const r0 = ((color0 >> 11) & 31) * dxt5to8;\r\n  const g0 = ((color0 >> 5) & 63) * dxt6to8;\r\n  const b0 = (color0 & 31) * dxt5to8;\r\n  const r1 = ((color1 >> 11) & 31) * dxt5to8;\r\n  const g1 = ((color1 >> 5) & 63) * dxt6to8;\r\n  const b1 = (color1 & 31) * dxt5to8;\r\n\r\n  // Minimum and maximum colors.\r\n  out[0] = r0;\r\n  out[1] = g0;\r\n  out[2] = b0;\r\n  out[3] = 255;\r\n  out[4] = r1;\r\n  out[5] = g1;\r\n  out[6] = b1;\r\n  out[7] = 255;\r\n\r\n  // Interpolated colors.\r\n  if (color0 > color1) {\r\n    out[8] = (5 * r0 + 3 * r1) >> 3;\r\n    out[9] = (5 * g0 + 3 * g1) >> 3;\r\n    out[10] = (5 * b0 + 3 * b1) >> 3;\r\n    out[11] = 255;\r\n    out[12] = (5 * r1 + 3 * r0) >> 3;\r\n    out[13] = (5 * g1 + 3 * g0) >> 3;\r\n    out[14] = (5 * b1 + 3 * b0) >> 3;\r\n    out[15] = 255;\r\n  } else {\r\n    out[8] = (r0 + r1) >> 1;\r\n    out[9] = (g0 + g1) >> 1;\r\n    out[10] = (b0 + b1) >> 1;\r\n    out[11] = 255;\r\n    out[12] = 0;\r\n    out[13] = 0;\r\n    out[14] = 0;\r\n    out[15] = 0;\r\n  }\r\n}\r\n\r\nfunction dx3Colors(out: Uint8Array, color0: number, color1: number): void {\r\n  const r0 = ((color0 >> 11) & 31) * dxt5to8;\r\n  const g0 = ((color0 >> 5) & 63) * dxt6to8;\r\n  const b0 = (color0 & 31) * dxt5to8;\r\n  const r1 = ((color1 >> 11) & 31) * dxt5to8;\r\n  const g1 = ((color1 >> 5) & 63) * dxt6to8;\r\n  const b1 = (color1 & 31) * dxt5to8;\r\n\r\n  // Minimum and maximum colors.\r\n  out[0] = r0;\r\n  out[1] = g0;\r\n  out[2] = b0;\r\n  out[3] = r1;\r\n  out[4] = g1;\r\n  out[5] = b1;\r\n\r\n  // Interpolated colors.\r\n  out[6] = (5 * r0 + 3 * r1) >> 3;\r\n  out[7] = (5 * g0 + 3 * g1) >> 3;\r\n  out[8] = (5 * b0 + 3 * b1) >> 3;\r\n  out[9] = (5 * r1 + 3 * r0) >> 3;\r\n  out[10] = (5 * g1 + 3 * g0) >> 3;\r\n  out[11] = (5 * b1 + 3 * b0) >> 3;\r\n}\r\n\r\nfunction dx5Alphas(out: Uint8Array, alpha0: number, alpha1: number): void {\r\n  // Minimum and maximum alphas.\r\n  out[0] = alpha0;\r\n  out[1] = alpha1;\r\n\r\n  // Interpolated alphas.\r\n  if (alpha0 > alpha1) {\r\n    out[2] = (54 * alpha0 + 9 * alpha1) >> 6;\r\n    out[3] = (45 * alpha0 + 18 * alpha1) >> 6;\r\n    out[4] = (36 * alpha0 + 27 * alpha1) >> 6;\r\n    out[5] = (27 * alpha0 + 36 * alpha1) >> 6;\r\n    out[6] = (18 * alpha0 + 45 * alpha1) >> 6;\r\n    out[7] = (9 * alpha0 + 54 * alpha1) >> 6;\r\n  } else {\r\n    out[2] = (12 * alpha0 + 3 * alpha1) >> 4;\r\n    out[3] = (9 * alpha0 + 6 * alpha1) >> 4;\r\n    out[4] = (6 * alpha0 + 9 * alpha1) >> 4;\r\n    out[5] = (3 * alpha0 + 12 * alpha1) >> 4;\r\n    out[6] = 0;\r\n    out[7] = 255;\r\n  }\r\n}\r\n\r\nfunction rgColors(out: Uint8Array, color0: number, color1: number): void {\r\n  // Minimum and maximum red colors.\r\n  out[0] = color0;\r\n  out[1] = color1;\r\n\r\n  // Interpolated red colors.\r\n  if (color0 > color1) {\r\n    out[2] = (6 * color0 + 1 * color1) / 7;\r\n    out[3] = (5 * color0 + 2 * color1) / 7;\r\n    out[4] = (4 * color0 + 3 * color1) / 7;\r\n    out[5] = (3 * color0 + 4 * color1) / 7;\r\n    out[6] = (2 * color0 + 5 * color1) / 7;\r\n    out[7] = (1 * color0 + 6 * color1) / 7;\r\n  } else {\r\n    out[2] = (4 * color0 + 1 * color1) / 5;\r\n    out[3] = (3 * color0 + 2 * color1) / 5;\r\n    out[4] = (2 * color0 + 3 * color1) / 5;\r\n    out[5] = (1 * color0 + 4 * color1) / 5;\r\n    out[6] = 0;\r\n    out[7] = 1;\r\n  }\r\n}\r\n\r\n/**\r\n * Decodes DXT1 data to a Uint8Array typed array with 8-8-8-8 RGBA bits.\r\n * \r\n * DXT1 is also known as BC1.\r\n */\r\nexport function decodeDxt1(src: Uint8Array, width: number, height: number): Uint8Array {\r\n  const dst = new Uint8Array(width * height * 4);\r\n\r\n  for (let blockY = 0, blockHeight = height / 4; blockY < blockHeight; blockY++) {\r\n    for (let blockX = 0, blockWidth = width / 4; blockX < blockWidth; blockX++) {\r\n      const i = 8 * (blockY * blockWidth + blockX);\r\n\r\n      // Get the color values.\r\n      dx1Colors(dx1colors, src[i] + 256 * src[i + 1], src[i + 2] + 256 * src[i + 3]);\r\n\r\n      // The offset to the first pixel in the destination.\r\n      const dstI = (blockY * 16) * width + blockX * 16;\r\n\r\n      // All 32 color bits.\r\n      const bits = src[i + 4] | (src[i + 5] << 8) | (src[i + 6] << 16) | (src[i + 7] << 24);\r\n\r\n      for (let row = 0; row < 4; row++) {\r\n        const rowOffset = row * 8;\r\n        const dstOffset = dstI + row * width * 4;\r\n\r\n        for (let column = 0; column < 4; column++) {\r\n          const dstIndex = dstOffset + column * 4;\r\n          const colorOffset = ((bits >> (rowOffset + column * 2)) & 3) * 4;\r\n\r\n          dst[dstIndex + 0] = dx1colors[colorOffset + 0];\r\n          dst[dstIndex + 1] = dx1colors[colorOffset + 1];\r\n          dst[dstIndex + 2] = dx1colors[colorOffset + 2];\r\n          dst[dstIndex + 3] = dx1colors[colorOffset + 3];\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return dst;\r\n}\r\n\r\n/**\r\n * Decodes DXT3 data to a Uint8Array typed array with 8-8-8-8 RGBA bits.\r\n * \r\n * DXT3 is also known as BC2.\r\n */\r\nexport function decodeDxt3(src: Uint8Array, width: number, height: number): Uint8Array {\r\n  const dst = new Uint8Array(width * height * 4);\r\n  const rowBytes = width * 4;\r\n\r\n  for (let blockY = 0, blockHeight = height / 4; blockY < blockHeight; blockY++) {\r\n    for (let blockX = 0, blockWidth = width / 4; blockX < blockWidth; blockX++) {\r\n      const i = 16 * (blockY * blockWidth + blockX);\r\n\r\n      // Get the color values.\r\n      dx3Colors(dx3colors, src[i + 8] + 256 * src[i + 9], src[i + 10] + 256 * src[i + 11]);\r\n\r\n      let dstI = (blockY * 16) * width + blockX * 16;\r\n\r\n      for (let row = 0; row < 4; row++) {\r\n        // Get 16 bits of alpha indices.\r\n        const alphaBits = src[i + row * 2] + 256 * src[i + 1 + row * 2];\r\n\r\n        // Get 8 bits of color indices.\r\n        const colorBits = src[i + 12 + row];\r\n\r\n        for (let column = 0; column < 4; column++) {\r\n          const dstIndex = dstI + column * 4;\r\n          const colorIndex = ((colorBits >> (column * 2)) & 3) * 3;\r\n\r\n          dst[dstIndex + 0] = dx3colors[colorIndex + 0];\r\n          dst[dstIndex + 1] = dx3colors[colorIndex + 1];\r\n          dst[dstIndex + 2] = dx3colors[colorIndex + 2];\r\n          dst[dstIndex + 3] = ((alphaBits >> (column * 4)) & 0xf) * dxt4to8;\r\n        }\r\n\r\n        dstI += rowBytes;\r\n      }\r\n    }\r\n  }\r\n\r\n  return dst;\r\n}\r\n\r\n/**\r\n * Decodes DXT5 data to a Uint8Array typed array with 8-8-8-8 RGBA bits.\r\n * \r\n * DXT5 is also known as BC3.\r\n */\r\nexport function decodeDxt5(src: Uint8Array, width: number, height: number): Uint8Array {\r\n  const dst = new Uint8Array(width * height * 4);\r\n  const rowBytes = width * 4;\r\n\r\n  for (let blockY = 0, blockHeight = height / 4; blockY < blockHeight; blockY++) {\r\n    for (let blockX = 0, blockWidth = width / 4; blockX < blockWidth; blockX++) {\r\n      const i = 16 * (blockY * blockWidth + blockX);\r\n\r\n      // Get the alpha values.\r\n      dx5Alphas(dx5alphas, src[i], src[i + 1]);\r\n\r\n      // Get the color values.\r\n      dx3Colors(dx3colors, src[i + 8] + 256 * src[i + 9], src[i + 10] + 256 * src[i + 11]);\r\n\r\n      // The offset to the first pixel in the destination.\r\n      let dstI = (blockY * 16) * width + blockX * 16;\r\n\r\n      // The outer loop is only needed because JS bitwise operators only work on 32bit integers, while the alpha flags contain 48 bits.\r\n      // Processing is instead done in two blocks, where each one handles 24 bits, or two rows of 4 pixels.\r\n      for (let block = 0; block < 2; block++) {\r\n        const alphaOffset = i + 2 + block * 3;\r\n        const colorOffset = i + 12 + block * 2;\r\n\r\n        // 24 alpha bits.\r\n        const alphaBits = src[alphaOffset] + 256 * (src[alphaOffset + 1] + 256 * src[alphaOffset + 2]);\r\n\r\n        // Go over two rows.\r\n        for (let row = 0; row < 2; row++) {\r\n          const colorBits = src[colorOffset + row];\r\n\r\n          // Go over four columns.\r\n          for (let column = 0; column < 4; column++) {\r\n            const dstIndex = dstI + column * 4;\r\n            const colorIndex = ((colorBits >> (column * 2)) & 3) * 3;\r\n            const alphaIndex = (alphaBits >> (row * 12 + column * 3)) & 7;\r\n\r\n            // Set the pixel.\r\n            dst[dstIndex + 0] = dx3colors[colorIndex + 0];\r\n            dst[dstIndex + 1] = dx3colors[colorIndex + 1];\r\n            dst[dstIndex + 2] = dx3colors[colorIndex + 2];\r\n            dst[dstIndex + 3] = dx5alphas[alphaIndex];\r\n          }\r\n\r\n          // Next row.\r\n          dstI += rowBytes;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return dst;\r\n}\r\n\r\n/**\r\n * Decodes RGTC data to a Uint8Array typed array with 8-8 RG bits.\r\n * \r\n * RGTC is also known as BC5, ATI2, and 3Dc.\r\n */\r\nexport function decodeRgtc(src: Uint8Array, width: number, height: number): Uint8Array {\r\n  const dst = new Uint8Array(width * height * 2);\r\n  const rowBytes = width * 2;\r\n\r\n  for (let blockY = 0, blockHeight = height / 4; blockY < blockHeight; blockY++) {\r\n    for (let blockX = 0, blockWidth = width / 4; blockX < blockWidth; blockX++) {\r\n      const i = 16 * (blockY * blockWidth + blockX);\r\n\r\n      // Get the red colors.\r\n      rgColors(red, src[i], src[i + 1]);\r\n\r\n      // Get the green colors.\r\n      rgColors(green, src[i + 8], src[i + 9]);\r\n\r\n      // The offset to the first pixel in the destination.\r\n      let dstI = (blockY * 8) * width + blockX * 8;\r\n\r\n      // Split to two blocks of two rows, because there are 48 color bits.\r\n      for (let block = 0; block < 2; block++) {\r\n        const blockOffset = i + block * 3;\r\n\r\n        // Get 24 bits of the color indices.\r\n        const redbits = src[blockOffset + 2] + 256 * (src[blockOffset + 3] + 256 * src[blockOffset + 4]);\r\n        const greenbits = src[blockOffset + 10] + 256 * (src[blockOffset + 11] + 256 * src[blockOffset + 12]);\r\n\r\n        for (let row = 0; row < 2; row++) {\r\n          const rowOffset = row * 4;\r\n\r\n          for (let column = 0; column < 4; column++) {\r\n            const dstOffset = dstI + column * 2;\r\n            const shifts = 3 * (rowOffset + column);\r\n\r\n            dst[dstOffset + 1] = red[(redbits >> shifts) & 7];\r\n            dst[dstOffset + 2] = green[(greenbits >> shifts) & 7];\r\n          }\r\n\r\n          // Next row.\r\n          dstI += rowBytes;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return dst;\r\n}\r\n","import { base256ToString } from '../../common/typecast';\r\nimport { decodeDxt1, decodeDxt3, decodeDxt5, decodeRgtc } from '../../common/dxt';\r\nimport { bytesOf } from '../../common/bytesof';\r\n\r\nexport const DDS_MAGIC = 0x20534444;\r\nconst DDSD_MIPMAPCOUNT = 0x20000;\r\nconst DDPF_FOURCC = 0x4;\r\n\r\nexport const FOURCC_DXT1 = 0x31545844;\r\nexport const FOURCC_DXT3 = 0x33545844;\r\nexport const FOURCC_DXT5 = 0x35545844;\r\nexport const FOURCC_ATI2 = 0x32495441;\r\n\r\nconst FOURCC_DX10 = 0x30315844;\r\nconst DXGI_FORMAT_BC1_UNORM = 0x00000047;\r\nconst DXGI_FORMAT_BC2_UNORM = 0x0000004A;\r\nconst DXGI_FORMAT_BC3_UNORM = 0x0000004D;\r\nconst DXGI_FORMAT_BC5_UNORM = 0x00000053;\r\n\r\n/**\r\n * A DDS image.\r\n */\r\nexport class DdsImage {\r\n  width = 0;\r\n  height = 0;\r\n  format = 0;\r\n  mipmapWidths: number[] = [];\r\n  mipmapHeights: number[] = [];\r\n  mipmapDatas: Uint8Array[] = [];\r\n\r\n  load(buffer: ArrayBuffer | Uint8Array): void {\r\n    const bytes = bytesOf(buffer);\r\n    const header = new Int32Array(bytes.buffer, 0, 31);\r\n    let offset = 128; // sizeof(DDS_HEADER) + 4 for the magic.\r\n\r\n    if (header[0] !== DDS_MAGIC) {\r\n      throw new Error('Wrong magic number');\r\n    }\r\n\r\n    if (!(header[20] & DDPF_FOURCC)) {\r\n      throw new Error('Not FourCC');\r\n    }\r\n\r\n    let fourCC = header[21];\r\n    \r\n    if (fourCC !== FOURCC_DXT1 && fourCC !== FOURCC_DXT3 && fourCC !== FOURCC_DXT5 && fourCC !== FOURCC_ATI2) {\r\n      if (fourCC === FOURCC_DX10) {\r\n        offset += 20; // sizeof(DDS_HEADER_DXT10)\r\n\r\n        const extendedHeader = new Int32Array(bytes.buffer, 128, 5);\r\n        const dxgiFormat = extendedHeader[0];\r\n\r\n        if (dxgiFormat === DXGI_FORMAT_BC1_UNORM) {\r\n          fourCC = FOURCC_DXT1;\r\n        } else if (dxgiFormat === DXGI_FORMAT_BC2_UNORM) {\r\n          fourCC = FOURCC_DXT3;\r\n        } else if (dxgiFormat === DXGI_FORMAT_BC3_UNORM) {\r\n          fourCC = FOURCC_DXT5;\r\n        } else if (dxgiFormat === DXGI_FORMAT_BC5_UNORM) {\r\n          fourCC = FOURCC_ATI2;\r\n        } else {\r\n          throw new Error(`Unsupported DXGI format: ${dxgiFormat}`);\r\n        }\r\n\r\n        console.log(extendedHeader);\r\n      } else {\r\n        throw new Error(`Unsupported FourCC: ${base256ToString(fourCC)}`);\r\n      }\r\n    }\r\n\r\n    this.format = fourCC;\r\n\r\n    let mipmaps = 1;\r\n\r\n    if (header[2] & DDSD_MIPMAPCOUNT) {\r\n      mipmaps = Math.max(1, header[7]);\r\n    }\r\n\r\n    let width = header[4];\r\n    let height = header[3];\r\n    let blockSize = 16;\r\n\r\n    // DXT3, DXT5, and RGTC, all have 16 bytes per block.\r\n    if (fourCC === FOURCC_DXT1) {\r\n      blockSize = 8;\r\n    }\r\n\r\n    this.width = width;\r\n    this.height = height;\r\n\r\n    for (let i = 0; i < mipmaps; i++) {\r\n      const size = Math.max(4, width) / 4 * Math.max(4, height) / 4 * blockSize;\r\n\r\n      this.mipmapWidths[i] = width;\r\n      this.mipmapHeights[i] = height;\r\n      this.mipmapDatas[i] = bytes.subarray(offset, offset + size);\r\n\r\n      offset += size;\r\n      width = Math.max(width / 2, 1);\r\n      height = Math.max(height / 2, 1);\r\n    }\r\n  }\r\n\r\n  mipmaps(): number {\r\n    return this.mipmapDatas.length;\r\n  }\r\n\r\n  getMipmap(level: number, raw = false): { width: number, height: number, data: Uint8Array } {\r\n    const width = this.mipmapWidths[level];\r\n    const height = this.mipmapHeights[level];\r\n    const data = this.mipmapDatas[level];\r\n    let mipmap: Uint16Array | Uint8Array;\r\n\r\n    if (raw) {\r\n      mipmap = data;\r\n    } else if (this.format === FOURCC_DXT1) {\r\n      mipmap = decodeDxt1(data, width, height);\r\n    } else if (this.format === FOURCC_DXT3) {\r\n      mipmap = decodeDxt3(data, width, height);\r\n    } else if (this.format === FOURCC_DXT5) {\r\n      mipmap = decodeDxt5(data, width, height);\r\n    } else {\r\n      mipmap = decodeRgtc(data, width, height);\r\n    }\r\n\r\n    return { width, height, data: mipmap };\r\n  }\r\n}\r\n","/**\r\n * Detects if the given object is a DDS source.\r\n */\r\nexport default function isDds(bytes: unknown): boolean {\r\n  if (bytes instanceof ArrayBuffer) {\r\n    bytes = new Uint8Array(bytes);\r\n  }\r\n\r\n  if (bytes instanceof Uint8Array) {\r\n    if (bytes[0] === 0x44 && bytes[1] === 0x44 && bytes[2] === 0x53 && bytes[3] === 0x20) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n","import { DdsImage as Image, FOURCC_DXT1, FOURCC_DXT3, FOURCC_DXT5, FOURCC_ATI2 } from './image';\r\nimport isDds from './isformat';\r\n\r\nexport default {\r\n  Image,\r\n  FOURCC_DXT1,\r\n  FOURCC_DXT3,\r\n  FOURCC_DXT5,\r\n  FOURCC_ATI2,\r\n  isDds,\r\n};\r\n","import TgaLoader from 'tga-js';\r\nimport { bytesOf } from '../../common/bytesof';\r\n\r\n/**\r\n * A TGA image.\r\n */\r\nexport default class TgaImage {\r\n  width = 0;\r\n  height = 0;\r\n  data: ImageData | null = null;\r\n\r\n  load(buffer: ArrayBuffer | Uint8Array): void {\r\n    const bytes = bytesOf(buffer);\r\n    const tga = new TgaLoader();\r\n\r\n    tga.load(bytes);\r\n\r\n    const header = tga.header;\r\n\r\n    this.width = header.width;\r\n    this.height = header.height;\r\n    this.data = new ImageData(header.width, header.height);\r\n\r\n    tga.getImageData(this.data);\r\n  }\r\n}\r\n","/**\n * @license tga-js 1.1.1\n * Copyright (c) 2013-2020 Vincent Thibault, Inc.\n * License: MIT\n */\nconst e=0,t=1,a=3,r=9,o=10,i=11,s=0,h=2,n=3,g=4,l=48;export default class{_checkHeader(){const t=this.header;if(t.imageType===e)throw Error(\"No data\");if(t.hasColorMap){if(t.colorMapLength>256||24!==t.colorMapDepth||1!==t.colorMapType)throw Error(\"Invalid colormap for indexed type\")}else if(t.colorMapType)throw Error(\"Why does the image contain a palette ?\");if(!t.width||!t.height)throw Error(\"Invalid image size\");if(8!==t.pixelDepth&&16!==t.pixelDepth&&24!==t.pixelDepth&&32!==t.pixelDepth)throw Error('Invalid pixel size \"'+t.pixelDepth+'\"')}_decodeRLE(e,t,a,r){const o=new Uint8Array(r),i=new Uint8Array(a);let s=0;for(;s<r;){const r=e[t++];let h=1+(127&r);if(128&r){for(let r=0;r<a;++r)i[r]=e[t+r];t+=a;for(let e=0;e<h;++e)o.set(i,s),s+=a}else{h*=a;for(let a=0;a<h;++a)o[s+a]=e[t+a];s+=h,t+=h}}return o}_getImageData8bits(e,t,a,r,o,i,s,h,n,g){for(let l=0,p=o;p!==s;p+=i)for(let o=h;o!==g;o+=n,l++){const i=t[l];e[4*(o+r*p)+3]=255,e[4*(o+r*p)+2]=a[3*i+0],e[4*(o+r*p)+1]=a[3*i+1],e[4*(o+r*p)+0]=a[3*i+2]}return e}_getImageData16bits(e,t,a,r,o,i,s,h,n,g){for(let a=0,l=o;l!==s;l+=i)for(let o=h;o!==g;o+=n,a+=2){const i=t[a+0]|t[a+1]<<8;e[4*(o+r*l)+0]=(31744&i)>>7,e[4*(o+r*l)+1]=(992&i)>>2,e[4*(o+r*l)+2]=(31&i)>>3,e[4*(o+r*l)+3]=32768&i?0:255}return e}_getImageData24bits(e,t,a,r,o,i,s,h,n,g){for(let a=0,l=o;l!==s;l+=i)for(let o=h;o!==g;o+=n,a+=3)e[4*(o+r*l)+3]=255,e[4*(o+r*l)+2]=t[a+0],e[4*(o+r*l)+1]=t[a+1],e[4*(o+r*l)+0]=t[a+2];return e}_getImageData32bits(e,t,a,r,o,i,s,h,n,g){for(let a=0,l=o;l!==s;l+=i)for(let o=h;o!==g;o+=n,a+=4)e[4*(o+r*l)+2]=t[a+0],e[4*(o+r*l)+1]=t[a+1],e[4*(o+r*l)+0]=t[a+2],e[4*(o+r*l)+3]=t[a+3];return e}_getImageDataGrey8bits(e,t,a,r,o,i,s,h,n,g){for(let a=0,l=o;l!==s;l+=i)for(let o=h;o!==g;o+=n,a++){const i=t[a];e[4*(o+r*l)+0]=i,e[4*(o+r*l)+1]=i,e[4*(o+r*l)+2]=i,e[4*(o+r*l)+3]=255}return e}_getImageDataGrey16bits(e,t,a,r,o,i,s,h,n,g){for(let a=0,l=o;l!==s;l+=i)for(let o=h;o!==g;o+=n,a+=2)e[4*(o+r*l)+0]=t[a+0],e[4*(o+r*l)+1]=t[a+0],e[4*(o+r*l)+2]=t[a+0],e[4*(o+r*l)+3]=t[a+1];return e}open(e,t){const a=new XMLHttpRequest;a.responseType=\"arraybuffer\",a.open(\"GET\",e,!0),a.onload=(()=>{200===a.status&&(this.load(new Uint8Array(a.response)),t&&t())}),a.send(null)}load(e){let s=0;if(e.length<18)throw Error(\"Not enough data to contain header\");const h={idLength:e[s++],colorMapType:e[s++],imageType:e[s++],colorMapIndex:e[s++]|e[s++]<<8,colorMapLength:e[s++]|e[s++]<<8,colorMapDepth:e[s++],offsetX:e[s++]|e[s++]<<8,offsetY:e[s++]|e[s++]<<8,width:e[s++]|e[s++]<<8,height:e[s++]|e[s++]<<8,pixelDepth:e[s++],flags:e[s++]};if(h.hasEncoding=h.imageType===r||h.imageType===o||h.imageType===i,h.hasColorMap=h.imageType===r||h.imageType===t,h.isGreyColor=h.imageType===i||h.imageType===a,this.header=h,this._checkHeader(),(s+=h.idLength)>=e.length)throw Error(\"No data\");if(h.hasColorMap){const t=h.colorMapLength*(h.colorMapDepth>>3);this.palette=e.subarray(s,s+t),s+=t}const n=h.pixelDepth>>3,g=h.width*h.height,l=g*n;h.hasEncoding?this.imageData=this._decodeRLE(e,s,n,l):this.imageData=e.subarray(s,s+(h.hasColorMap?g:l))}getImageData(e){const{width:t,height:a,flags:r,pixelDepth:o,isGreyColor:i}=this.header,p=(r&l)>>g;let c,d,m,f,D,y,u;switch(e||(e=document?document.createElement(\"canvas\").getContext(\"2d\").createImageData(t,a):{width:t,height:a,data:new Uint8ClampedArray(t*a*4)}),p===h||p===n?(f=0,D=1,y=a):(f=a-1,D=-1,y=-1),p===h||p===s?(c=0,d=1,m=t):(c=t-1,d=-1,m=-1),o){case 8:u=i?this._getImageDataGrey8bits:this._getImageData8bits;break;case 16:u=i?this._getImageDataGrey16bits:this._getImageData16bits;break;case 24:u=this._getImageData24bits;break;case 32:u=this._getImageData32bits}return u.call(this,e.data,this.imageData,this.palette,t,f,D,y,c,d,m),e}getCanvas(){const{width:e,height:t}=this.header,a=document.createElement(\"canvas\"),r=a.getContext(\"2d\"),o=r.createImageData(e,t);return a.width=e,a.height=t,r.putImageData(this.getImageData(o),0,0),a}getDataURL(e){return this.getCanvas().toDataURL(e||\"image/png\")}}\n","import { isStringInBytes } from '../../common/searches';\r\n\r\n/**\r\n * Detects if the given object is a TGA source.\r\n */\r\nexport default function isTga(bytes: unknown): boolean {\r\n  if (bytes instanceof ArrayBuffer) {\r\n    bytes = new Uint8Array(bytes);\r\n  }\r\n\r\n  if (bytes instanceof Uint8Array && isStringInBytes(bytes, 'TRUEVISION-XFILE.\\0', bytes.length - 18)) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n","import Image from './image';\r\nimport isTga from './isformat';\r\n\r\nexport default {\r\n  Image,\r\n  isTga,\r\n};\r\n","import ini from './ini';\r\nimport slk from './slk';\r\nimport m3 from './m3';\r\nimport mdlx from './mdlx';\r\nimport mpq from './mpq';\r\nimport w3x from './w3x';\r\nimport blp from './blp';\r\nimport dds from './dds';\r\nimport tga from './tga';\r\n\r\nexport default {\r\n  ini,\r\n  slk,\r\n  m3,\r\n  mdlx,\r\n  mpq,\r\n  w3x,\r\n  blp,\r\n  dds,\r\n  tga,\r\n};\r\n","/**\r\n * The valid data type names for resource fetches.\r\n */\r\nexport type FetchDataTypeName = 'image' | 'text' | 'arrayBuffer' | 'bytes' | 'blob';\r\n\r\n/**\r\n * The valid data types for resource fetches.\r\n */\r\nexport type FetchDataType = HTMLImageElement | string | ArrayBuffer | Uint8Array | Blob;\r\n\r\n/**\r\n * The structure that the promise returned by fetchDataType is resolved to.\r\n */\r\nexport interface FetchResult {\r\n  ok: boolean;\r\n  data: FetchDataType | Response | Event;\r\n  error?: string;\r\n}\r\n\r\n/**\r\n * Returns a promise that will resolve with the data from the given path.\r\n * \r\n * The data type determines the returned object:\r\n *\r\n *     \"image\" => Image\r\n *     \"text\" => string\r\n *     \"arrayBuffer\" => ArrayBuffer\r\n *     \"bytes\" => Uint8Array\r\n *     \"blob\" => Blob\r\n */\r\nexport async function fetchDataType(path: string, dataType: FetchDataTypeName): Promise<FetchResult> {\r\n  if (dataType === 'image') {\r\n    // Promise wrapper for an image load.\r\n    return new Promise<FetchResult>((resolve) => {\r\n      const image = new Image();\r\n\r\n      image.onload = (): void => {\r\n        resolve({ ok: true, data: image });\r\n      };\r\n\r\n      image.onerror = (e): void => {\r\n        resolve({ ok: false, error: 'Image Error', data: e });\r\n      };\r\n\r\n      image.src = path;\r\n    });\r\n  } else {\r\n    let response: Response;\r\n\r\n    // Fetch.\r\n    try {\r\n      response = await fetch(path);\r\n    } catch (e) {\r\n      return <FetchResult>{ ok: false, error: 'Network Error', data: e };\r\n    }\r\n\r\n    // Fetch went ok?\r\n    if (!response.ok) {\r\n      return <FetchResult>{ ok: false, error: 'Http Error', data: response };\r\n    }\r\n\r\n    // Try to get the requested data type.\r\n    try {\r\n      let data: string | ArrayBuffer | Blob | null = null;\r\n\r\n      if (dataType === 'text') {\r\n        data = await response.text();\r\n      } else if (dataType === 'arrayBuffer' || dataType === 'bytes') {\r\n        data = await response.arrayBuffer();\r\n      } else if (dataType === 'blob') {\r\n        data = await response.blob();\r\n      }\r\n\r\n      if (dataType === 'bytes') {\r\n        data = new Uint8Array(<ArrayBuffer>data);\r\n      }\r\n\r\n      return <FetchResult>{ ok: true, data };\r\n    } catch (e) {\r\n      return <FetchResult>{ ok: false, error: 'Data Error', data: e };\r\n    }\r\n  }\r\n}\r\n","/**\r\n * A buffer.\r\n */\r\nexport default class ClientBuffer {\r\n  gl: WebGLRenderingContext;\r\n  buffer: WebGLBuffer;\r\n  size = 0;\r\n  arrayBuffer: ArrayBuffer | null = null;\r\n  byteView: Uint8Array | null = null;\r\n  floatView: Float32Array | null = null;\r\n\r\n  constructor(gl: WebGLRenderingContext, size = 4) {\r\n    this.gl = gl;\r\n    this.buffer = <WebGLBuffer>gl.createBuffer();\r\n\r\n    this.reserve(size);\r\n  }\r\n\r\n  reserve(size: number): void {\r\n    if (this.size < size) {\r\n      const gl = this.gl;\r\n\r\n      // Ensure the size is on a 4 byte boundary.\r\n      this.size = Math.ceil(size / 4) * 4;\r\n\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\r\n      gl.bufferData(gl.ARRAY_BUFFER, this.size, gl.DYNAMIC_DRAW);\r\n\r\n      this.arrayBuffer = new ArrayBuffer(this.size);\r\n      this.byteView = new Uint8Array(this.arrayBuffer);\r\n      this.floatView = new Float32Array(this.arrayBuffer);\r\n    }\r\n  }\r\n\r\n  bindAndUpdate(size = this.size): void {\r\n    const gl = this.gl;\r\n    const byteView = <Uint8Array>this.byteView;\r\n\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\r\n    gl.bufferSubData(gl.ARRAY_BUFFER, 0, byteView.subarray(0, size));\r\n  }\r\n}\r\n","/**\r\n * A data texture.\r\n */\r\nexport default class ClientDataTexture {\r\n  gl: WebGLRenderingContext;\r\n  texture: WebGLTexture;\r\n  width = 0;\r\n  height = 0;\r\n  arrayBuffer = new ArrayBuffer(0);\r\n  byteView: Uint8Array | null = null;\r\n  floatView: Float32Array | null = null;\r\n\r\n  constructor(gl: WebGLRenderingContext, width = 1, height = 1) {\r\n    this.gl = gl;\r\n    this.texture = <WebGLTexture>gl.createTexture();\r\n\r\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n\r\n    this.reserve(width, height);\r\n  }\r\n\r\n  reserve(width: number, height: number): void {\r\n    if (this.width < width || this.height < height) {\r\n      const gl = this.gl;\r\n\r\n      this.width = Math.max(this.width, width);\r\n      this.height = Math.max(this.height, height);\r\n\r\n      gl.bindTexture(gl.TEXTURE_2D, this.texture);\r\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.width, this.height, 0, gl.RGBA, gl.FLOAT, null);\r\n\r\n      this.arrayBuffer = new ArrayBuffer(this.width * this.height * 16);\r\n      this.byteView = new Uint8Array(this.arrayBuffer);\r\n      this.floatView = new Float32Array(this.arrayBuffer);\r\n    }\r\n  }\r\n\r\n  bindAndUpdate(width = this.width, height = this.height): void {\r\n    const gl = this.gl;\r\n\r\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\r\n    gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, width, height, gl.RGBA, gl.FLOAT, this.byteView);\r\n  }\r\n}\r\n","/**\r\n * A data texture.\r\n */\r\nexport default class DataTexture {\r\n  gl: WebGLRenderingContext;\r\n  texture: WebGLTexture;\r\n  format: number;\r\n  width = 0;\r\n  height = 0;\r\n\r\n  constructor(gl: WebGLRenderingContext, channels = 4, width = 1, height = 1) {\r\n    this.gl = gl;\r\n    this.texture = <WebGLTexture>gl.createTexture();\r\n    this.format = (channels === 3 ? gl.RGB : gl.RGBA);\r\n\r\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n\r\n    this.reserve(width, height);\r\n  }\r\n\r\n  reserve(width: number, height: number): void {\r\n    if (this.width < width || this.height < height) {\r\n      const gl = this.gl;\r\n\r\n      this.width = Math.max(this.width, width);\r\n      this.height = Math.max(this.height, height);\r\n\r\n      gl.bindTexture(gl.TEXTURE_2D, this.texture);\r\n      gl.texImage2D(gl.TEXTURE_2D, 0, this.format, this.width, this.height, 0, this.format, gl.FLOAT, null);\r\n    }\r\n  }\r\n\r\n  bindAndUpdate(buffer: Float32Array, width = this.width, height = this.height): void {\r\n    const gl = this.gl;\r\n\r\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\r\n    gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, width, height, this.format, gl.FLOAT, buffer);\r\n  }\r\n\r\n  bind(unit: number): void {\r\n    const gl = this.gl;\r\n\r\n    gl.activeTexture(gl.TEXTURE0 + unit);\r\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\r\n  }\r\n}\r\n","import WebGL from './gl';\r\n\r\n/**\r\n * A wrapper around a WebGL shader program.\r\n */\r\nexport default class Shader {\r\n  webgl: WebGL;\r\n  program: WebGLProgram;\r\n  uniforms: {[key: string]: WebGLUniformLocation } = {};\r\n  attribs: {[key: string]: number } = {};\r\n  attribsCount = 0;\r\n\r\n  constructor(webgl: WebGL, program: WebGLProgram) {\r\n    this.webgl = webgl;\r\n    this.program = program;\r\n\r\n    const gl = webgl.gl;\r\n\r\n    for (let i = 0, l = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS); i < l; i++) {\r\n      const object = gl.getActiveUniform(program, i);\r\n\r\n      if (object) {\r\n        if (object.size === 1) {\r\n          this.uniforms[object.name] = <WebGLUniformLocation>gl.getUniformLocation(program, object.name);\r\n        } else {\r\n          const base = object.name.substr(0, object.name.length - 3);\r\n\r\n          for (let index = 0; index < object.size; index++) {\r\n            const name = base + '[' + index + ']';\r\n\r\n            this.uniforms[name] = <WebGLUniformLocation>gl.getUniformLocation(program, name);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let i = 0, l = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES); i < l; i++) {\r\n      const object = gl.getActiveAttrib(program, i);\r\n\r\n      if (object) {\r\n        this.attribsCount += object.size;\r\n\r\n        if (object.size === 1) {\r\n          this.attribs[object.name] = gl.getAttribLocation(program, object.name);\r\n        } else {\r\n          const base = object.name.substr(0, object.name.length - 3);\r\n\r\n          for (let index = 0; index < object.size; index++) {\r\n            const name = base + '[' + index + ']';\r\n\r\n            this.attribs[name] = gl.getAttribLocation(program, name);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  use(): void {\r\n    this.webgl.useShader(this);\r\n  }\r\n}\r\n","import Texture from '../texture';\r\nimport ClientBuffer from './clientbuffer';\r\nimport ClientDataTexture from './clientdatatexture';\r\nimport DataTexture from './datatexture';\r\nimport Shader from './shader';\r\n\r\n/**\r\n * A small WebGL utility class.\r\n * Makes it easier to generate shaders, textures, etc.\r\n */\r\nexport default class WebGL {\r\n  gl: WebGLRenderingContext;\r\n  currentShader: Shader | null = null;\r\n  emptyTexture: WebGLTexture;\r\n  extensions: {[key: string]: unknown } = {};\r\n\r\n  constructor(canvas: HTMLCanvasElement, options: WebGLContextAttributes = { alpha: false }) {\r\n    let gl = canvas.getContext('webgl', options);\r\n\r\n    if (!gl) {\r\n      gl = <WebGLRenderingContext | null>canvas.getContext('experimental-webgl', options);\r\n    }\r\n\r\n    if (!gl) {\r\n      throw new Error('WebGL: Failed to create a WebGL context!');\r\n    }\r\n\r\n    const twoByTwo = new Uint8ClampedArray(16).fill(255);\r\n\r\n    const emptyTexture = <WebGLTexture>gl.createTexture();\r\n    gl.bindTexture(gl.TEXTURE_2D, emptyTexture);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, gl.UNSIGNED_BYTE, twoByTwo);\r\n\r\n    this.gl = gl;\r\n    this.emptyTexture = emptyTexture;\r\n  }\r\n\r\n  /**\r\n   * Ensures that an extension is available.\r\n   * \r\n   * If it is, it will be added to `extensions`.\r\n   */\r\n  ensureExtension(name: string): boolean {\r\n    const ext = this.gl.getExtension(name);\r\n\r\n    if (ext) {\r\n      this.extensions[name] = ext;\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  createShader(vertexSource: string, fragmentSource: string): Shader {\r\n    const gl = this.gl;\r\n\r\n    const vertex = <WebGLShader>gl.createShader(gl.VERTEX_SHADER);\r\n    gl.shaderSource(vertex, vertexSource);\r\n    gl.compileShader(vertex);\r\n\r\n    const fragment = <WebGLShader>gl.createShader(gl.FRAGMENT_SHADER);\r\n    gl.shaderSource(fragment, fragmentSource);\r\n    gl.compileShader(fragment);\r\n\r\n    const program = <WebGLProgram>gl.createProgram();\r\n    gl.attachShader(program, vertex);\r\n    gl.attachShader(program, fragment);\r\n    gl.linkProgram(program);\r\n\r\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\r\n      let log = 'Shader failed to link:';\r\n\r\n      const vertexLog = gl.getShaderInfoLog(vertex);\r\n      if (vertexLog && vertexLog.length) {\r\n        log += ` Vertex shader: ${vertexLog}`;\r\n      }\r\n\r\n      const fragmentLog = gl.getShaderInfoLog(fragment);\r\n      if (fragmentLog && fragmentLog.length) {\r\n        log += ` Fragment shader: ${fragmentLog}`;\r\n      }\r\n\r\n      throw new Error(log);\r\n    }\r\n\r\n    return new Shader(this, program);\r\n  }\r\n\r\n  /**\r\n   * Enables all vertex attribs between [start, end], including start and discluding end.\r\n   */\r\n  enableVertexAttribs(start: number, end: number): void {\r\n    const gl = this.gl;\r\n\r\n    for (let i = start; i < end; i++) {\r\n      gl.enableVertexAttribArray(i);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Disables all vertex attribs between [start, end], including start and discluding end.\r\n   */\r\n  disableVertexAttribs(start: number, end: number): void {\r\n    const gl = this.gl;\r\n\r\n    for (let i = start; i < end; i++) {\r\n      gl.disableVertexAttribArray(i);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Use a shader program.\r\n   */\r\n  useShader(shader: Shader): void {\r\n    if (shader && shader !== this.currentShader) {\r\n      let oldAttribs = 0;\r\n      const newAttribs = shader.attribsCount;\r\n\r\n      if (this.currentShader) {\r\n        oldAttribs = this.currentShader.attribsCount;\r\n      }\r\n\r\n      this.gl.useProgram(shader.program);\r\n\r\n      if (newAttribs > oldAttribs) {\r\n        this.enableVertexAttribs(oldAttribs, newAttribs);\r\n      } else if (newAttribs < oldAttribs) {\r\n        this.disableVertexAttribs(newAttribs, oldAttribs);\r\n      }\r\n\r\n      this.currentShader = shader;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Bind a texture.\r\n   * \r\n   * If the given texture is invalid, a 2x2 black texture will be bound instead.\r\n   */\r\n  bindTexture(texture: Texture | undefined | null, unit: number): void {\r\n    const gl = this.gl;\r\n\r\n    gl.activeTexture(gl.TEXTURE0 + unit);\r\n\r\n    if (texture) {\r\n      gl.bindTexture(gl.TEXTURE_2D, texture.webglResource);\r\n    } else {\r\n      // Bind an empty texture in case an invalid one was given, to avoid WebGL errors.\r\n      gl.bindTexture(gl.TEXTURE_2D, this.emptyTexture);\r\n    }\r\n  }\r\n\r\n  bindTextureAndWrap(texture: Texture | undefined | null, unit: number, wrapS: number, wrapT: number): void {\r\n    const gl = this.gl;\r\n\r\n    gl.activeTexture(gl.TEXTURE0 + unit);\r\n\r\n    if (texture) {\r\n      gl.bindTexture(gl.TEXTURE_2D, texture.webglResource);\r\n    } else {\r\n      // Bind an empty texture in case an invalid one was given, to avoid WebGL errors.\r\n      gl.bindTexture(gl.TEXTURE_2D, this.emptyTexture);\r\n    }\r\n\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrapS);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrapT);\r\n  }\r\n\r\n  /**\r\n   * Set the texture wrap and filter values.\r\n   */\r\n  setTextureMode(wrapS: number, wrapT: number, magFilter: number, minFilter: number): void {\r\n    const gl = this.gl;\r\n\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrapS);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrapT);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter);\r\n  }\r\n\r\n  /**\r\n   * A shortcut for `new ClientBuffer(gl, size)`.\r\n   */\r\n  createClientBuffer(size = 4): ClientBuffer {\r\n    return new ClientBuffer(this.gl, size);\r\n  }\r\n\r\n  /**\r\n   * A shortcut for `new DataTexture(gl, channels, width, height)`.\r\n   */\r\n  createDataTexture(channels = 4, width = 1, height = 1): DataTexture {\r\n    return new DataTexture(this.gl, channels, width, height);\r\n  }\r\n\r\n  /**\r\n   * A shortcut for `new ClientDataTexture(gl, width, height)`.\r\n   */\r\n  createClientDataTexture(width = 1, height = 1): ClientDataTexture {\r\n    return new ClientDataTexture(this.gl, width, height);\r\n  }\r\n}\r\n","import { vec3, vec4, quat, mat4 } from 'gl-matrix';\r\nimport { VEC3_UNIT_Y, VEC3_UNIT_X, VEC3_UNIT_Z, unproject, unpackPlanes, quatLookAt } from '../common/gl-matrix-addon';\r\n\r\nconst vectorHeap = vec3.create();\r\nconst vectorHeap2 = vec3.create();\r\nconst vectorHeap3 = vec3.create();\r\nconst quatHeap = quat.create();\r\nconst facingCorrection = quat.setAxisAngle(quat.create(), VEC3_UNIT_X, Math.PI / 2);\r\n\r\n/**\r\n * A camera.\r\n */\r\nexport default class Camera {\r\n  isPerspective = true;\r\n  fov = 0;\r\n  aspect = 0;\r\n  isOrtho = false;\r\n  leftClipPlane = 0;\r\n  rightClipPlane = 0;\r\n  bottomClipPlane = 0;\r\n  topClipPlane = 0;\r\n  nearClipPlane = 0;\r\n  farClipPlane = 0;\r\n  location = vec3.create();\r\n  rotation = quat.create();\r\n  inverseRotation = quat.create();\r\n  /**\r\n   * World -> View.\r\n   */\r\n  viewMatrix = mat4.create();\r\n  /**\r\n   * View -> Clip.\r\n   */\r\n  projectionMatrix = mat4.create();\r\n  /**\r\n   * World -> Clip.\r\n   */\r\n  viewProjectionMatrix = mat4.create();\r\n  /**\r\n   * View -> World.\r\n   */\r\n  inverseViewMatrix = mat4.create();\r\n  /**\r\n   * Clip -> World.\r\n   */\r\n  inverseViewProjectionMatrix = mat4.create();\r\n  /**\r\n   * The X axis in camera space.\r\n   */\r\n  directionX = vec3.create();\r\n  /**\r\n   * The Y axis in camera space.\r\n   */\r\n  directionY = vec3.create();\r\n  /**\r\n   * The Z axis in camera space.\r\n   */\r\n  directionZ = vec3.create();\r\n  /**\r\n   * The four corners of a 2x2 rectangle.\r\n   */\r\n  vectors = [vec3.fromValues(-1, -1, 0), vec3.fromValues(-1, 1, 0), vec3.fromValues(1, 1, 0), vec3.fromValues(1, -1, 0), vec3.fromValues(1, 0, 0), vec3.fromValues(0, 1, 0), vec3.fromValues(0, 0, 1)];\r\n  /**\r\n   * Same as vectors, however these are all billboarded to the camera.\r\n   */\r\n  billboardedVectors = [vec3.create(), vec3.create(), vec3.create(), vec3.create(), vec3.create(), vec3.create(), vec3.create()];\r\n  /**\r\n   * The camera frustum planes in this order: left, right, top, bottom, near, far.\r\n   */\r\n  planes = [vec4.create(), vec4.create(), vec4.create(), vec4.create(), vec4.create(), vec4.create()];\r\n\r\n  /**\r\n   * Set the camera to perspective projection mode.\r\n   */\r\n  perspective(fov: number, aspect: number, near: number, far: number): void {\r\n    this.isPerspective = true;\r\n    this.isOrtho = false;\r\n    this.fov = fov;\r\n    this.aspect = aspect;\r\n    this.nearClipPlane = near;\r\n    this.farClipPlane = far;\r\n\r\n    this.update();\r\n  }\r\n\r\n  /**\r\n   * Set the camera to orthogonal projection mode.\r\n   */\r\n  ortho(left: number, right: number, bottom: number, top: number, near: number, far: number): void {\r\n    this.isPerspective = false;\r\n    this.isOrtho = true;\r\n    this.leftClipPlane = left;\r\n    this.rightClipPlane = right;\r\n    this.bottomClipPlane = bottom;\r\n    this.topClipPlane = top;\r\n    this.nearClipPlane = near;\r\n    this.farClipPlane = far;\r\n\r\n    this.update();\r\n  }\r\n\r\n  /**\r\n   * Set the camera location in world coordinates.\r\n   */\r\n  setLocation(location: vec3): void {\r\n    vec3.copy(this.location, location);\r\n\r\n    this.update();\r\n  }\r\n\r\n  /**\r\n   * Move the camera by the given offset in world coordinates.\r\n   */\r\n  move(offset: vec3): void {\r\n    vec3.add(this.location, this.location, offset);\r\n\r\n    this.update();\r\n  }\r\n\r\n  /**\r\n   * Set the camera rotation.\r\n   */\r\n  setRotation(rotation: quat): void {\r\n    quat.copy(this.rotation, rotation);\r\n\r\n    this.update();\r\n  }\r\n\r\n  /**\r\n   * Rotate the camera by the given rotation.\r\n   */\r\n  rotate(rotation: quat): void {\r\n    quat.mul(this.rotation, this.rotation, rotation);\r\n\r\n    this.update();\r\n  }\r\n\r\n  /**\r\n   * Look at `to`.\r\n   */\r\n  face(to: vec3, worldUp: vec3): void {\r\n    quat.mul(this.rotation, facingCorrection, quatLookAt(quatHeap, to, this.location, worldUp));\r\n\r\n    this.update();\r\n  }\r\n\r\n  /**\r\n   * Move to `from` and look at `to`.\r\n   */\r\n  moveToAndFace(from: vec3, to: vec3, worldUp: vec3): void {\r\n    vec3.copy(this.location, from);\r\n    this.face(to, worldUp);\r\n  }\r\n\r\n  /**\r\n   * Reset the location and angles.\r\n   */\r\n  reset(): void {\r\n    vec3.set(this.location, 0, 0, 0);\r\n    quat.identity(this.rotation);\r\n\r\n    this.update();\r\n  }\r\n\r\n  /**\r\n   * Recalculate the camera's transformation.\r\n   */\r\n  update(): void {\r\n    const location = this.location;\r\n    const rotation = this.rotation;\r\n    const inverseRotation = this.inverseRotation;\r\n    const viewMatrix = this.viewMatrix;\r\n    const projectionMatrix = this.projectionMatrix;\r\n    const viewProjectionMatrix = this.viewProjectionMatrix;\r\n    const vectors = this.vectors;\r\n    const billboardedVectors = this.billboardedVectors;\r\n\r\n    // View -> Clip.\r\n    if (this.isPerspective) {\r\n      mat4.perspective(projectionMatrix, this.fov, this.aspect, this.nearClipPlane, this.farClipPlane);\r\n    } else {\r\n      mat4.ortho(projectionMatrix, this.leftClipPlane, this.rightClipPlane, this.bottomClipPlane, this.topClipPlane, this.nearClipPlane, this.farClipPlane);\r\n    }\r\n\r\n    // World -> View.\r\n    mat4.fromQuat(viewMatrix, rotation);\r\n    mat4.translate(viewMatrix, viewMatrix, vec3.negate(vectorHeap, location));\r\n\r\n    // World -> Clip.\r\n    mat4.mul(viewProjectionMatrix, projectionMatrix, viewMatrix);\r\n\r\n    // View -> World.\r\n    mat4.invert(this.inverseViewMatrix, viewMatrix);\r\n\r\n    // Clip -> World.\r\n    mat4.invert(this.inverseViewProjectionMatrix, viewProjectionMatrix);\r\n\r\n    // Recaculate the camera's frusum planes\r\n    unpackPlanes(this.planes, viewProjectionMatrix);\r\n\r\n    quat.conjugate(inverseRotation, rotation);\r\n\r\n    // View-space axes.\r\n    vec3.transformQuat(this.directionX, VEC3_UNIT_X, inverseRotation);\r\n    vec3.transformQuat(this.directionY, VEC3_UNIT_Y, inverseRotation);\r\n    vec3.transformQuat(this.directionZ, VEC3_UNIT_Z, inverseRotation);\r\n\r\n    // View-space rectangle, aka billboarded.\r\n    for (let i = 0; i < 7; i++) {\r\n      vec3.transformQuat(billboardedVectors[i], vectors[i], inverseRotation);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Given a vector in camera space, return the vector transformed to world space.\r\n   */\r\n  cameraToWorld(out: vec3, v: vec3): vec3 {\r\n    return vec3.transformMat4(out, v, this.inverseViewMatrix);\r\n  }\r\n\r\n  /**\r\n   * Given a vector in world space, return the vector transformed to camera space.\r\n   */\r\n  worldToCamera(out: vec3, v: vec3): vec3 {\r\n    return vec3.transformMat4(out, v, this.viewMatrix);\r\n  }\r\n\r\n  /**\r\n   * Given a vector in world space, return the vector transformed to screen space.\r\n   */\r\n  worldToScreen(out: Float32Array, v: Float32Array, viewport: vec4): Float32Array {\r\n    vec3.transformMat4(vectorHeap, <vec3>v, this.viewProjectionMatrix);\r\n\r\n    out[0] = Math.round(((vectorHeap[0] + 1) / 2) * viewport[2]);\r\n    out[1] = Math.round(((vectorHeap[1] + 1) / 2) * viewport[3]);\r\n\r\n    return out;\r\n  }\r\n\r\n  /**\r\n   * Given a vector in screen space, return a ray from the near plane to the far plane.\r\n   */\r\n  screenToWorldRay(out: Float32Array, v: Float32Array, viewport: vec4): Float32Array {\r\n    const a = vectorHeap;\r\n    const b = vectorHeap2;\r\n    const c = vectorHeap3;\r\n    const x = v[0];\r\n    const y = v[1];\r\n    const inverseViewProjectionMatrix = this.inverseViewProjectionMatrix;\r\n\r\n    // Intersection on the near-plane\r\n    unproject(a, vec3.set(c, x, y, 0), inverseViewProjectionMatrix, viewport);\r\n\r\n    // Intersection on the far-plane\r\n    unproject(b, vec3.set(c, x, y, 1), inverseViewProjectionMatrix, viewport);\r\n\r\n    out.set(a, 0);\r\n    out.set(b, 3);\r\n\r\n    return out;\r\n  }\r\n}\r\n","import { testCell } from '../common/gl-matrix-addon';\r\nimport Camera from './camera';\r\nimport ModelInstance from './modelinstance';\r\n\r\n/**\r\n * A grid cell.\r\n */\r\nexport default class Cell {\r\n  left: number;\r\n  right: number;\r\n  bottom: number;\r\n  top: number;\r\n  plane = -1;\r\n  instances: ModelInstance[] = [];\r\n  visible = false;\r\n\r\n  constructor(left: number, right: number, bottom: number, top: number) {\r\n    this.left = left;\r\n    this.right = right;\r\n    this.bottom = bottom;\r\n    this.top = top;\r\n  }\r\n\r\n  add(instance: ModelInstance): void {\r\n    this.instances.push(instance);\r\n  }\r\n\r\n  remove(instance: ModelInstance): void {\r\n    const index = this.instances.indexOf(instance);\r\n\r\n    this.instances.splice(index, 1);\r\n  }\r\n\r\n  /**\r\n   * Remove all of the instances from this cell.\r\n   */\r\n  clear(): void {\r\n    this.instances.length = 0;\r\n  }\r\n\r\n  isVisible(camera: Camera): boolean {\r\n    this.plane = testCell(camera.planes, this.left, this.right, this.bottom, this.top, this.plane);\r\n\r\n    return this.plane === -1;\r\n  }\r\n}\r\n","import Cell from './cell';\r\nimport ModelInstance from './modelinstance';\r\n\r\n/**\r\n * A grid.\r\n */\r\nexport default class Grid {\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  depth: number;\r\n  cellWidth: number;\r\n  cellDepth: number;\r\n  columns: number;\r\n  rows: number;\r\n  cells: Cell[] = [];\r\n\r\n  constructor(x: number, y: number, width: number, depth: number, cellWidth: number, cellDepth: number) {\r\n    const columns = width / cellWidth;\r\n    const rows = depth / cellDepth;\r\n\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = width;\r\n    this.depth = depth;\r\n    this.cellWidth = cellWidth;\r\n    this.cellDepth = cellDepth;\r\n    this.columns = columns;\r\n    this.rows = rows;\r\n\r\n    for (let row = 0; row < rows; row++) {\r\n      for (let column = 0; column < columns; column++) {\r\n        const left = x + column * cellWidth;\r\n        const right = left + cellWidth;\r\n        const bottom = y + row * cellDepth;\r\n        const top = bottom + cellDepth;\r\n\r\n        this.cells[row * columns + column] = new Cell(left, right, bottom, top);\r\n      }\r\n    }\r\n  }\r\n\r\n  add(instance: ModelInstance): void {\r\n    const cells = this.cells;\r\n    const columns = this.columns;\r\n    const left = instance.left;\r\n    const right = instance.right + 1;\r\n    const bottom = instance.bottom;\r\n    const top = instance.top + 1;\r\n\r\n    if (left !== -1) {\r\n      for (let y = bottom; y < top; y++) {\r\n        for (let x = left; x < right; x++) {\r\n          cells[y * columns + x].add(instance);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  remove(instance: ModelInstance): void {\r\n    const cells = this.cells;\r\n    const columns = this.columns;\r\n    const left = instance.left;\r\n    const right = instance.right + 1;\r\n    const bottom = instance.bottom;\r\n    const top = instance.top + 1;\r\n\r\n    if (left !== -1) {\r\n      instance.left = -1;\r\n\r\n      for (let y = bottom; y < top; y++) {\r\n        for (let x = left; x < right; x++) {\r\n          cells[y * columns + x].remove(instance);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  moved(instance: ModelInstance): void {\r\n    const cellWidth = this.cellWidth;\r\n    const cellDepth = this.cellDepth;\r\n    const bounds = instance.model.bounds;\r\n    const x = instance.worldLocation[0] + bounds.x - this.x;\r\n    const y = instance.worldLocation[1] + bounds.y - this.y;\r\n    const r = bounds.r;\r\n    const s = instance.worldScale;\r\n    let left = Math.floor((x - r * s[0]) / cellWidth);\r\n    let right = Math.floor((x + r * s[0]) / cellWidth);\r\n    let bottom = Math.floor((y - r * s[1]) / cellDepth);\r\n    let top = Math.floor((y + r * s[1]) / cellDepth);\r\n\r\n    if (right < 0 || left > this.columns - 1 || top < 0 || bottom > this.rows - 1) {\r\n      // The instance is outside of the grid, so remove it.\r\n      this.remove(instance);\r\n    } else {\r\n      // Clamp the values so they are in the grid.\r\n      left = Math.max(left, 0);\r\n      right = Math.min(right, this.columns - 1);\r\n      bottom = Math.max(bottom, 0);\r\n      top = Math.min(top, this.rows - 1);\r\n\r\n      // If the values actually changed, update the cells.\r\n      if (left !== instance.left || right !== instance.right || bottom !== instance.bottom || top !== instance.top) {\r\n        /// TODO: This can be optimized by checking if there are shared cells.\r\n        ///       That can be done in precisely the same way as done a few lines above, i.e. simple rectangle intersection.\r\n        this.remove(instance);\r\n\r\n        instance.left = left;\r\n        instance.right = right;\r\n        instance.bottom = bottom;\r\n        instance.top = top;\r\n\r\n        this.add(instance);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Removes all of the instances from this grid.\r\n   */\r\n  clear(): void {\r\n    for (const cell of this.cells) {\r\n      cell.clear();\r\n    }\r\n  }\r\n}\r\n","import EmittedObject from './emittedobject';\r\n\r\n/**\r\n * An emitted object updater.\r\n */\r\nexport default class EmittedObjectUpdater {\r\n  objects: EmittedObject[] = [];\r\n  alive = 0;\r\n\r\n  add(object: EmittedObject): void {\r\n    this.objects[this.alive++] = object;\r\n  }\r\n\r\n  update(dt: number): void {\r\n    const objects = this.objects;\r\n\r\n    for (let i = 0; i < this.alive; i++) {\r\n      const object = objects[i];\r\n\r\n      object.update(dt * object.emitter.instance.timeScale);\r\n\r\n      if (object.health <= 0) {\r\n        this.alive -= 1;\r\n\r\n        object.emitter.kill(object);\r\n\r\n        // Swap between this object and the last living object.\r\n        // Decrement the iterator so the swapped object is updated this frame.\r\n        if (i !== this.alive) {\r\n          objects[i] = objects[this.alive];\r\n          i -= 1;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { vec3, vec4 } from 'gl-matrix';\r\nimport ModelViewer from './viewer';\r\nimport Camera from './camera';\r\nimport Grid from './grid';\r\nimport ModelInstance from './modelinstance';\r\nimport EmittedObjectUpdater from './emittedobjectupdater';\r\n\r\n/**\r\n * A scene.\r\n *\r\n * Every scene has its own list of model instances, and its own camera and viewport.\r\n *\r\n * In addition, every scene may have its own AudioContext if enableAudio() is called.\r\n * If audio is enabled, the AudioContext's listener's location will be updated automatically.\r\n * Note that due to browser policies, this may be done only after user interaction with the web page.\r\n */\r\nexport default class Scene {\r\n  viewer: ModelViewer;\r\n  camera = new Camera();\r\n  grid = new Grid(-100000, -100000, 200000, 200000, 200000, 200000);\r\n  visibleCells = 0;\r\n  visibleInstances = 0;\r\n  updatedParticles = 0;\r\n  audioEnabled = false;\r\n  audioContext: AudioContext | null = null;\r\n  instances: ModelInstance[] = [];\r\n  emittedObjectUpdater = new EmittedObjectUpdater();\r\n  /**\r\n   * Similar to WebGL's own `alpha` parameter.\r\n   * \r\n   * If false, the scene will be cleared before rendering, meaning that scenes behind it won't be visible through it.\r\n   * \r\n   * If true, alpha works as usual.\r\n   */\r\n  alpha = false;\r\n  /**\r\n   * The scene's background color.\r\n   * \r\n   * Only used if `alpha` is false.\r\n   */\r\n  color = vec3.create();\r\n  /**\r\n   * The area on the canvas in which this scene is rendered.\r\n   * \r\n   * Defaults to the entire canvas.\r\n   * \r\n   * The vector defines [x, y, width, height], sizes are in pixels, and everything is related to the bottom left corner of the canvas.\r\n   */\r\n  viewport = vec4.create();\r\n  /**\r\n   * The position of the light that is used when rendering.\r\n   * \r\n   * Affects HD MDX and M3 models.\r\n   */\r\n  lightPosition = vec3.fromValues(0, 0, 10000);\r\n\r\n  constructor(viewer: ModelViewer) {\r\n    this.viewer = viewer;\r\n\r\n    const canvas = viewer.canvas;\r\n    const width = canvas.width;\r\n    const height = canvas.height;\r\n\r\n    // Use the whole canvas by default.\r\n    this.viewport[2] = width;\r\n    this.viewport[3] = height;\r\n\r\n    // And standard perspective projection.\r\n    this.camera.perspective(Math.PI / 4, width / height, 8, 10000);\r\n  }\r\n\r\n  /**\r\n   * Creates an AudioContext if one wasn't created already, and resumes it if needed.\r\n   * \r\n   * The returned promise will resolve to whether it is actually running or not.\r\n   * \r\n   * It may stay in suspended state indefinitly until the user interacts with the page, due to browser policies.\r\n   */\r\n  async enableAudio(): Promise<boolean> {\r\n    if (typeof AudioContext === 'function') {\r\n      if (!this.audioContext) {\r\n        this.audioContext = new AudioContext();\r\n      }\r\n\r\n      if (this.audioContext.state !== 'suspended') {\r\n        await this.audioContext.resume();\r\n      }\r\n\r\n      this.audioEnabled = this.audioContext.state === 'running';\r\n\r\n      return this.audioEnabled;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Suspend the audio context.\r\n   */\r\n  disableAudio(): void {\r\n    if (this.audioContext) {\r\n      this.audioContext.suspend();\r\n    }\r\n\r\n    this.audioEnabled = false;\r\n  }\r\n\r\n  /**\r\n   * Sets the scene of the given instance.\r\n   * \r\n   * Equivalent to instance.setScene(scene).\r\n   */\r\n  addInstance(instance: ModelInstance): boolean {\r\n    if (instance.scene !== this) {\r\n      if (instance.scene) {\r\n        instance.scene.removeInstance(instance);\r\n      }\r\n\r\n      instance.scene = this;\r\n\r\n      this.grid.moved(instance);\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Remove the given instance from this scene.\r\n   * \r\n   * Equivalent to ModelInstance.detach().\r\n   */\r\n  removeInstance(instance: ModelInstance): boolean {\r\n    if (instance.scene === this) {\r\n      this.grid.remove(instance);\r\n\r\n      instance.scene = null;\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Clear this scene.\r\n   */\r\n  clear(): void {\r\n    // First remove references to this scene stored in the instances.\r\n    for (const cell of this.grid.cells) {\r\n      for (const instance of cell.instances) {\r\n        instance.scene = null;\r\n      }\r\n    }\r\n\r\n    // Then remove references to the instances.\r\n    this.grid.clear();\r\n  }\r\n\r\n  /**\r\n   * Detach this scene from the viewer.\r\n   * \r\n   * Equivalent to viewer.removeScene(scene).\r\n   */\r\n  detach(): boolean {\r\n    if (this.viewer) {\r\n      return this.viewer.removeScene(this);\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Update this scene.\r\n   */\r\n  update(dt: number): void {\r\n    const camera = this.camera;\r\n\r\n    // Update the audio context's position if it exists.\r\n    if (this.audioContext) {\r\n      const listener = this.audioContext.listener;\r\n      const position = camera.location;\r\n      const forward = camera.directionY;\r\n      const up = camera.directionZ;\r\n\r\n      listener.positionX.value = -position[0];\r\n      listener.positionY.value = -position[1];\r\n      listener.positionZ.value = -position[2];\r\n\r\n      listener.forwardX.value = forward[0];\r\n      listener.forwardY.value = forward[1];\r\n      listener.forwardZ.value = forward[2];\r\n\r\n      listener.upX.value = up[0];\r\n      listener.upY.value = up[1];\r\n      listener.upZ.value = up[2];\r\n    }\r\n\r\n    const frame = this.viewer.frame;\r\n    const instances = this.instances;\r\n\r\n    this.visibleCells = 0;\r\n    this.visibleInstances = 0;\r\n\r\n    // Update and collect all of the visible instances.\r\n    for (const cell of this.grid.cells) {\r\n      if (cell.isVisible(camera)) {\r\n        this.visibleCells += 1;\r\n\r\n        for (const instance of cell.instances) {\r\n          // If an instance is rendered, wasn't updated on this frame, and has no parent, update it.\r\n          // If the instance is visible, it will be updated, all of its children will be updated, and it will be added to the render list.\r\n          // Note that the update frame is needed because instances can exist in any number of cells at the same time.\r\n          if (instance.rendered && instance.updateFrame < frame && !instance.parent) {\r\n            instance.updateFrame = frame;\r\n            instance.update(dt);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Sort the visible instances based on depth.\r\n    instances.length = this.visibleInstances;\r\n    instances.sort((a, b) => a.depth - b.depth);\r\n\r\n    this.emittedObjectUpdater.update(dt);\r\n    this.updatedParticles = this.emittedObjectUpdater.alive;\r\n  }\r\n\r\n  renderInstance(instance: ModelInstance): void {\r\n    this.instances[this.visibleInstances++] = instance;\r\n  }\r\n\r\n  /**\r\n   * Use the scene's viewport.\r\n   * \r\n   * Should be called before `renderOpaque()` and `renderTranslucent()`.\r\n   * \r\n   * Called automatically by `render()`.\r\n   */\r\n  startFrame(): void {\r\n    const gl = this.viewer.gl;\r\n    const viewport = this.viewport;\r\n\r\n    // Set the viewport.\r\n    gl.viewport(viewport[0], viewport[1], viewport[2], viewport[3]);\r\n\r\n    // Allow to render only in the viewport.\r\n    gl.scissor(viewport[0], viewport[1], viewport[2], viewport[3]);\r\n\r\n    // If this scene doesn't want alpha, clear it.\r\n    if (!this.alpha) {\r\n      const color = this.color;\r\n\r\n      gl.depthMask(true);\r\n      gl.clearColor(color[0], color[1], color[2], 1);\r\n      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Render opaque things in this scene.\r\n   * \r\n   * They are rendered front to back.\r\n   */\r\n  renderOpaque(): void {\r\n    const instances = this.instances;\r\n\r\n    for (let i = 0, l = instances.length; i < l; i++) {\r\n      instances[i].renderOpaque();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Renders translucent things in this scene.\r\n   * \r\n   * They are rendered back to front.\r\n   */\r\n  renderTranslucent(): void {\r\n    const instances = this.instances;\r\n\r\n    for (let i = instances.length - 1; i >= 0; i--) {\r\n      instances[i].renderTranslucent();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Render this scene.\r\n   */\r\n  render(): void {\r\n    this.startFrame();\r\n    this.renderOpaque();\r\n    this.renderTranslucent();\r\n  }\r\n\r\n  /**\r\n   * Clear all of the emitted objects in this scene.\r\n   */\r\n  clearEmittedObjects(): void {\r\n    for (const object of this.emittedObjectUpdater.objects) {\r\n      object.health = 0;\r\n    }\r\n  }\r\n}\r\n","import ModelViewer from './viewer';\r\n\r\n/**\r\n * The data sent to every resource as a part of the loading process.\r\n */\r\nexport type ResourceData = { viewer: ModelViewer, fetchUrl: string };\r\n\r\n/**\r\n * A viewer resource.\r\n * \r\n * Generally speaking resources are created via viewer.load(), or viewer.loadGeneric().\r\n */\r\nexport abstract class Resource {\r\n  viewer: ModelViewer;\r\n  fetchUrl: string;\r\n  blockers: Promise<Resource | undefined>[] = [];\r\n\r\n  constructor(resourceData: ResourceData) {\r\n    this.viewer = resourceData.viewer;\r\n    this.fetchUrl = resourceData.fetchUrl;\r\n  }\r\n\r\n  /**\r\n   * Remove this resource from its viewer's cache.\r\n   * \r\n   * Equivalent to viewer.unload(resource).\r\n   */\r\n  detach(): boolean {\r\n    return this.viewer.unload(this);\r\n  }\r\n}\r\n","import { Resource, ResourceData } from './resource';\r\n\r\n/**\r\n * A generic resource.\r\n */\r\nexport default class GenericResource extends Resource {\r\n  data: unknown = null;\r\n\r\n  constructor(data: unknown, resourceData: ResourceData) {\r\n    super(resourceData);\r\n\r\n    this.data = data;\r\n  }\r\n}\r\n","import { ResourceData, Resource } from './resource';\r\n\r\n\r\nexport type SolverParams ={[key: string]: unknown };\r\n\r\n/**\r\n * A path solver used for resolving fetch paths.\r\n */\r\nexport type PathSolver = (src: unknown, params?: SolverParams) => unknown;\r\n\r\n/**\r\n * The data sent to every handler resource as part of the loading process.\r\n */\r\nexport type HandlerResourceData = ResourceData & { pathSolver?: PathSolver };\r\n\r\n/**\r\n * A viewer handler resource.\r\n * \r\n * Generally speaking handler resources are created via viewer.load().\r\n */\r\nexport abstract class HandlerResource extends Resource {\r\n  pathSolver?: PathSolver;\r\n\r\n  constructor(resourceData: HandlerResourceData) {\r\n    super(resourceData);\r\n\r\n    this.pathSolver = resourceData.pathSolver;\r\n  }\r\n}\r\n","import { HandlerResource } from './handlerresource';\r\n\r\n/**\r\n * A texture.\r\n */\r\nexport default abstract class Texture extends HandlerResource {\r\n  webglResource: WebGLTexture | null = null;\r\n  width = 0;\r\n  height = 0;\r\n}\r\n","import { isPowerOfTwo } from '../common/math';\r\nimport { isGif, isJpeg, isPng, isWebP } from '../common/isformat';\r\nimport Texture from './texture';\r\nimport { HandlerResourceData } from './handlerresource';\r\n\r\n/**\r\n * Checks if the given source is a supported image texture source.\r\n */\r\nexport function isImageSource(src: unknown): boolean {\r\n  return src instanceof ImageData || src instanceof HTMLImageElement || src instanceof HTMLCanvasElement || src instanceof HTMLVideoElement;\r\n}\r\n\r\n/**\r\n * Detects whether the given buffer is a supported format, and if so returns the mime.\r\n * The supported formats are PNG, JPEG, GIF, and WebP.\r\n */\r\nexport function detectMime(buffer: Uint8Array): string {\r\n  if (isPng(buffer)) {\r\n    return 'image/png';\r\n  }\r\n\r\n  if (isJpeg(buffer)) {\r\n    return 'image/jpeg';\r\n  }\r\n\r\n  if (isGif(buffer)) {\r\n    return 'image/gif';\r\n  }\r\n\r\n  if (isWebP(buffer)) {\r\n    return 'image/webp';\r\n  }\r\n\r\n  return '';\r\n}\r\n\r\n/**\r\n * A texture handler for image sources.\r\n */\r\nexport class ImageTexture extends Texture {\r\n  constructor(src: TexImageSource, resourceData: HandlerResourceData) {\r\n    super(resourceData);\r\n\r\n    const gl = this.viewer.gl;\r\n\r\n    this.webglResource = gl.createTexture();\r\n    gl.bindTexture(gl.TEXTURE_2D, this.webglResource);\r\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, src);\r\n\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n\r\n    if (isPowerOfTwo(src.width) && isPowerOfTwo(src.height)) {\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\r\n      gl.generateMipmap(gl.TEXTURE_2D);\r\n    } else {\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n      // Required for NPOT textures.\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n    }\r\n\r\n    this.width = src.width;\r\n    this.height = src.height;\r\n  }\r\n}\r\n","import { EventEmitter } from 'events';\r\nimport { FetchDataTypeName, FetchDataType, FetchResult, fetchDataType } from '../common/fetchdatatype';\r\nimport WebGL from './gl/gl';\r\nimport Scene from './scene';\r\nimport { Resource } from './resource';\r\nimport { PathSolver, HandlerResourceData, HandlerResource, SolverParams } from './handlerresource';\r\nimport GenericResource from './genericresource';\r\nimport ClientBuffer from './gl/clientbuffer';\r\nimport { isImageSource, ImageTexture, detectMime } from './imagetexture';\r\nimport { blobToImage } from '../common/canvas';\r\n\r\nexport enum DebugRenderMode {\r\n  None,\r\n  Diffuse,\r\n  NormalMap,\r\n  Occlusion,\r\n  Roughness,\r\n  Metallic,\r\n  TCFactor,\r\n  Emissive,\r\n  TexCoords,\r\n  Normals,\r\n  Tangents,\r\n}\r\n\r\n/**\r\n * A viewer handler.\r\n */\r\nexport interface Handler {\r\n  load?: (viewer: ModelViewer, ...args: any[]) => void;\r\n  isValidSource: (src: unknown) => boolean;\r\n  resource: new (src: any, resourceData: HandlerResourceData) => HandlerResource\r\n}\r\n\r\n/**\r\n * A model viewer.\r\n */\r\nexport default class ModelViewer extends EventEmitter {\r\n  /**\r\n   * The viewer's canvas.\r\n   */\r\n  canvas: HTMLCanvasElement;\r\n  /**\r\n   * The viewer's WebGL context.\r\n   */\r\n  gl: WebGLRenderingContext;\r\n  /**\r\n   * A wrapper around the viewer's WebGL context with utility functions.\r\n   */\r\n  webgl: WebGL;\r\n  /**\r\n   * All of the loaded resources.\r\n   */\r\n  resources: Resource[] = [];\r\n  /**\r\n   * A map from urls to their resources.\r\n   * \r\n   * Only used by fetched resources.\r\n   */\r\n  resourceMap: Map<string, Resource> = new Map();\r\n  /**\r\n   * A map from urls to the promises that load them.\r\n   * \r\n   * Only used by fetched resources.\r\n   */\r\n  promiseMap: Map<string, Promise<Resource | undefined>> = new Map();\r\n  /**\r\n   * The viewer's handlers, added with `addHandler()`.\r\n   */\r\n  handlers: Set<Handler> = new Set();\r\n  /**\r\n   * The viewer's scenes, added with `addScene()`.\r\n   */\r\n  scenes: Scene[] = [];\r\n  /**\r\n   * The current frame.\r\n   */\r\n  frame = 0;\r\n  /**\r\n   * The number of visible cells on the current frame.\r\n   */\r\n  visibleCells = 0;\r\n  /**\r\n   * The number of visible instances on the current frame.\r\n   */\r\n  visibleInstances = 0;\r\n  /**\r\n   * The number of particles being updated on the current frame.\r\n   */\r\n  updatedParticles = 0;\r\n  /**\r\n   * A viewer-wide flag.\r\n   * \r\n   * If it is false, not only will audio not run, but in fact audio files won't even be fetched in the first place.\r\n   * \r\n   * If audio is desired, this should be set to true before loading models that use audio.\r\n   * \r\n   * Note that it is preferable to call enableAudio(), which checks for the existence of AudioContext.\r\n   */\r\n  audioEnabled = false;\r\n  /**\r\n   * A resizeable buffer that can be used by any part of the library.\r\n   * \r\n   * The data it contains is temporary, and can be overwritten at any time.\r\n   */\r\n  buffer: ClientBuffer;\r\n  /**\r\n   * A cache of arbitrary data, shared between all of the handlers.\r\n   */\r\n  sharedCache: Map<unknown, unknown> = new Map();\r\n  /**\r\n   * Debug rendering mode.\r\n   * \r\n   * How it affects the rendering ultimately depends on the handlers.\r\n   */\r\n  debugRenderMode = DebugRenderMode.None;\r\n\r\n  directLoadId = 0;\r\n\r\n  constructor(canvas: HTMLCanvasElement, options?: WebGLContextAttributes) {\r\n    super();\r\n\r\n    const webgl = new WebGL(canvas, options);\r\n    const gl = webgl.gl;\r\n\r\n    this.canvas = canvas;\r\n    this.gl = gl;\r\n    this.webgl = webgl;\r\n    this.buffer = webgl.createClientBuffer();\r\n\r\n    // The only initial setup, the rest should be handled by the handlers.\r\n    gl.depthFunc(gl.LEQUAL);\r\n    gl.enable(gl.DEPTH_TEST);\r\n    gl.enable(gl.SCISSOR_TEST);\r\n  }\r\n\r\n  /**\r\n   * Enable audio if AudioContext is available.\r\n   */\r\n  enableAudio(): boolean {\r\n    if (typeof AudioContext === 'function') {\r\n      this.audioEnabled = true;\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Add an handler.\r\n   */\r\n  addHandler(handler: Handler, ...args: unknown[]): boolean {\r\n    if (handler) {\r\n      const handlers = this.handlers;\r\n\r\n      // Check to see if this handler was added already.\r\n      if (!handlers.has(handler)) {\r\n        if (!handler.isValidSource) {\r\n          this.emit('error', { viewer: this, error: 'Handler missing the isValidSource function', handler });\r\n          return false;\r\n        }\r\n\r\n        // Check if the handler has a loader, and if so load it.\r\n        if (handler.load) {\r\n          try {\r\n            handler.load(this, ...args);\r\n          } catch (e) {\r\n            this.emit('error', { viewer: this, error: `Handler failed to load`, handler, reason: e });\r\n\r\n            return false;\r\n          }\r\n        }\r\n\r\n        handlers.add(handler);\r\n\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Add a scene.\r\n   */\r\n  addScene(): Scene {\r\n    const scene = new Scene(this);\r\n\r\n    this.scenes.push(scene);\r\n\r\n    return scene;\r\n  }\r\n\r\n  /**\r\n   * Remove a scene.\r\n   */\r\n  removeScene(scene: Scene): boolean {\r\n    const scenes = this.scenes;\r\n    const index = scenes.indexOf(scene);\r\n\r\n    if (index !== -1) {\r\n      scenes.splice(index, 1);\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Removes all of the scenes in the viewer.\r\n   */\r\n  clear(): void {\r\n    this.scenes.length = 0;\r\n  }\r\n\r\n  /**\r\n   * Given a source and an optional path solver, loads a resource and returns a promise to it.\r\n   */\r\n  async load(src: unknown, pathSolver?: PathSolver, solverParams?: SolverParams): Promise<Resource | undefined> {\r\n    let finalSrc: unknown;\r\n    let fetchUrl = '';\r\n    let promise;\r\n\r\n    // Run the path solver if there is one.\r\n    if (pathSolver) {\r\n      try {\r\n        finalSrc = pathSolver(src, solverParams);\r\n      } catch (e) {\r\n        this.emit('error', { viewer: this, error: `Path solver failed`, src, reason: e, pathSolver, solverParams });\r\n\r\n        return;\r\n      }\r\n    } else {\r\n      finalSrc = src;\r\n    }\r\n\r\n    if (!finalSrc) {\r\n      return;\r\n    }\r\n\r\n    // Allow path solvers to return promises.\r\n    if (finalSrc instanceof Promise) {\r\n      finalSrc = await finalSrc;\r\n    }\r\n\r\n    // Give path solvers the option to inject resources.\r\n    if (finalSrc instanceof Resource) {\r\n      return finalSrc;\r\n    }\r\n\r\n    // If the final source is a string, and doesn't match any handler, it is assumed to be an URL to fetch.\r\n    if (typeof finalSrc === 'string' && !this.detectFormat(finalSrc)) {\r\n      fetchUrl = finalSrc;\r\n\r\n      // Check the promise cache and return a promise if one exists.\r\n      promise = this.promiseMap.get(fetchUrl);\r\n      if (promise) {\r\n        return promise;\r\n      }\r\n\r\n      // Check the fetch cache and return a resource if one exists.\r\n      const resource = this.resourceMap.get(fetchUrl);\r\n      if (resource) {\r\n        return resource;\r\n      }\r\n\r\n      // Otherwise promise to fetch the data and construct a resource.\r\n      promise = fetchDataType(fetchUrl, 'arrayBuffer')\r\n        .then((value) => {\r\n          if (value.ok) {\r\n            return value.data;\r\n          } else {\r\n            this.emit('error', { viewer: this, error: `Failed to fetch a resource: ${value.error}`, fetchUrl, reason: value.data });\r\n            return;\r\n          }\r\n        });\r\n    } else {\r\n      fetchUrl = `__DIRECT_LOAD_${this.directLoadId++}`;\r\n      promise = Promise.resolve(finalSrc);\r\n    }\r\n\r\n    promise = promise\r\n      .then(async (actualSrc) => {\r\n        // finalSrc will be undefined if this is a fetch and the fetch failed.\r\n        if (actualSrc) {\r\n          if (actualSrc instanceof ArrayBuffer) {\r\n            actualSrc = new Uint8Array(actualSrc);\r\n          }\r\n\r\n          // If the source is an image source, load it directly.\r\n          if (isImageSource(actualSrc)) {\r\n            return new ImageTexture(<TexImageSource>actualSrc, { viewer: this, fetchUrl, pathSolver });\r\n          }\r\n\r\n          // If the source is a buffer of an image, convert it to an image, and load it directly.\r\n          if (actualSrc instanceof Uint8Array) {\r\n            const type = detectMime(actualSrc);\r\n\r\n            if (type.length) {\r\n              return new ImageTexture(await blobToImage(new Blob([actualSrc.buffer], { type })), { viewer: this, fetchUrl, pathSolver });\r\n            }\r\n          }\r\n\r\n          // Attempt to match the source to a handler.\r\n          const handler = this.detectFormat(actualSrc);\r\n\r\n          if (handler) {\r\n            try {\r\n              const resource = new handler.resource(actualSrc, { viewer: this, fetchUrl, pathSolver });\r\n\r\n              // If the resource is blocked by internal resources being loaded, wait for them and then clear them.\r\n              await Promise.all(resource.blockers);\r\n              resource.blockers.length = 0;\r\n\r\n              return resource;\r\n            } catch (e) {\r\n              this.emit('error', { viewer: this, error: 'Failed to create a resource', fetchUrl, src, reason: e });\r\n            }\r\n          } else {\r\n            this.emit('error', { viewer: this, error: 'Source has no matching handler', fetchUrl, src });\r\n          }\r\n        }\r\n\r\n        return;\r\n      })\r\n      .then((resource) => {\r\n        this.promiseMap.delete(fetchUrl);\r\n\r\n        if (resource) {\r\n          this.resourceMap.set(fetchUrl, resource);\r\n          this.resources.push(resource);\r\n\r\n          this.emit('load', { viewer: this, fetchUrl, resource });\r\n        }\r\n\r\n        this.emit('loadend', { viewer: this, fetchUrl, resource });\r\n        this.checkLoadingStatus();\r\n\r\n        return resource;\r\n      });\r\n\r\n    this.promiseMap.set(fetchUrl, promise);\r\n    this.emit('loadstart', { viewer: this, fetchUrl, promise });\r\n\r\n    return promise;\r\n  }\r\n\r\n  detectFormat(src: unknown): Handler | undefined {\r\n    for (const handler of this.handlers) {\r\n      if (handler.isValidSource(src)) {\r\n        return handler;\r\n      }\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Check whether the given string maps to a resource in the cache.\r\n   */\r\n  has(key: string): boolean {\r\n    return this.resourceMap.has(key);\r\n  }\r\n\r\n  /**\r\n   * Get a resource from the cache.\r\n   */\r\n  get(key: string): Resource | undefined {\r\n    return this.resourceMap.get(key);\r\n  }\r\n\r\n  /**\r\n   * Load something generic.\r\n   * \r\n   * Unlike load(), this does not use handlers or construct any internal objects.\r\n   * \r\n   * `dataType` can be one of: `\"image\"`, `\"string\"`, `\"arrayBuffer\"`, `\"bytes\"`, `\"blob\"`.\r\n   * \r\n   * If `callback` isn't given, the resource's `data` is the fetch data, according to `dataType`.\r\n   * \r\n   * If `callback` is given, the resource's `data` is the value returned by it when called with the fetch data.\r\n   * \r\n   * If `callback` returns a promise, the resource's `data` will be whatever the promise resolved to.\r\n   */\r\n  async loadGeneric(fetchUrl: string, dataType: FetchDataTypeName, callback?: (data: FetchDataType) => unknown): Promise<GenericResource | undefined> {\r\n    // Check the promise cache and return a promise if one exists.\r\n    const promise = this.promiseMap.get(fetchUrl);\r\n    if (promise) {\r\n      return <Promise<GenericResource>>promise;\r\n    }\r\n\r\n    // Check the fetch cache and return a resource if one exists.\r\n    const resource = this.resourceMap.get(fetchUrl);\r\n    if (resource) {\r\n      return <GenericResource>resource;\r\n    }\r\n\r\n    const fetchPromise = fetchDataType(fetchUrl, dataType)\r\n      .then(async (value: FetchResult) => {\r\n        // Once the resource finished loading (successfully or not), the promise can be removed from the promise cache.\r\n        this.promiseMap.delete(fetchUrl);\r\n\r\n        let resource;\r\n\r\n        if (value.ok) {\r\n          let data: unknown = value.data;\r\n\r\n          if (callback) {\r\n            data = await callback(<FetchDataType>data);\r\n          }\r\n\r\n          resource = new GenericResource(data, { viewer: this, fetchUrl });\r\n\r\n          this.resourceMap.set(fetchUrl, resource);\r\n          this.resources.push(resource);\r\n\r\n          this.emit('load', { viewer: this, fetchUrl, resource });\r\n        } else {\r\n          this.emit('error', { viewer: this, error: 'Failed to fetch a generic resource', fetchUrl });\r\n        }\r\n\r\n        this.emit('loadend', { viewer: this, fetchUrl, resource });\r\n        this.checkLoadingStatus();\r\n\r\n        return resource;\r\n      });\r\n\r\n    this.promiseMap.set(fetchUrl, fetchPromise);\r\n    this.emit('loadstart', { viewer: this, fetchUrl });\r\n\r\n    return fetchPromise;\r\n  }\r\n\r\n  /**\r\n   * Unload a resource.\r\n   * Note that this only removes the resource from the viewer's cache.\r\n   * If it's being referenced and used e.g. by a scene, it will not be garbage collected.\r\n   */\r\n  unload(resource: Resource): boolean {\r\n    const fetchUrl = resource.fetchUrl;\r\n\r\n    if (fetchUrl !== '') {\r\n      this.resourceMap.delete(fetchUrl);\r\n    }\r\n\r\n    const resources = this.resources;\r\n    const index = resources.indexOf(resource);\r\n\r\n    if (index !== -1) {\r\n      resources.splice(index, 1);\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Starts loading a new empty resource, and returns it.\r\n   * This empty resource will block the \"idle\" event (and thus whenAllLoaded) until it's resolved.\r\n   * This is used when a resource might get loaded in the future, but it is not known what it is yet.\r\n   */\r\n  promise(): () => void {\r\n    const promise = Promise.resolve(undefined);\r\n    const key = `${performance.now()}`;\r\n\r\n    this.promiseMap.set(key, promise);\r\n\r\n    return (): void => {\r\n      this.promiseMap.delete(key);\r\n      this.checkLoadingStatus();\r\n    };\r\n  }\r\n\r\n  checkLoadingStatus(): void {\r\n    if (this.promiseMap.size === 0) {\r\n      // A timeout is used so that this event will arrive after the current frame to let everything settle.\r\n      setTimeout(() => this.emit('idle'), 0);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Wait for all of the resources to load.\r\n   * \r\n   * If a callback is given, it will be called, otherwise, a promise is returned.\r\n   */\r\n  whenAllLoaded(): Promise<ModelViewer>;\r\n  whenAllLoaded(callback: (viewer: ModelViewer) => void): void;\r\n  whenAllLoaded(callback?: (viewer: ModelViewer) => void): Promise<ModelViewer> | void {\r\n    const promise = new Promise((resolve: (viewer: ModelViewer) => void) => {\r\n      if (this.promiseMap.size === 0) {\r\n        resolve(this);\r\n      } else {\r\n        this.once('idle', () => resolve(this));\r\n      }\r\n    });\r\n\r\n    if (callback) {\r\n      promise.then(() => callback(this));\r\n    } else {\r\n      return promise;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get a blob representing the contents of the viewer's canvas.\r\n   * \r\n   * If a callback is given, it will be called, otherwise, a promise is returned.\r\n   */\r\n  toBlob(): Promise<Blob>; \r\n  toBlob(callback: BlobCallback): void;\r\n  toBlob(callback?: BlobCallback): Promise<Blob | null> | void {\r\n    const promise = new Promise((resolve: BlobCallback) => this.canvas.toBlob((blob) => resolve(blob)));\r\n\r\n    if (callback) {\r\n      promise.then((blob) => callback(blob));\r\n    } else {\r\n      return promise;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update and render a frame.\r\n   */\r\n  updateAndRender(dt = 1000 / 60): void {\r\n    this.update(dt);\r\n    this.startFrame();\r\n    this.render();\r\n  }\r\n\r\n  /**\r\n   * Update all of the scenes, which includes updating their cameras, audio context if one exists, and all of the instances they hold.\r\n   */\r\n  update(dt = 1000 / 60): void {\r\n    // Animations are in milliseconds, while particle movement and such is in seconds.\r\n    // It's easier to pass the time in seconds here, and turn it back to milliseconds for each instance, than it is to do the opposite for each particle.\r\n    dt *= 0.001;\r\n\r\n    this.frame += 1;\r\n\r\n    this.visibleCells = 0;\r\n    this.visibleInstances = 0;\r\n    this.updatedParticles = 0;\r\n\r\n    for (const scene of this.scenes) {\r\n      scene.update(dt);\r\n\r\n      this.visibleCells += scene.visibleCells;\r\n      this.visibleInstances += scene.visibleInstances;\r\n      this.updatedParticles += scene.updatedParticles;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clears the WebGL buffer.\r\n   * \r\n   * Called automatically by updateAndRender().\r\n   * \r\n   * Call this at some point before render() if you need more control.\r\n   */\r\n  startFrame(): void {\r\n    const gl = this.gl;\r\n\r\n    // See https://www.opengl.org/wiki/FAQ#Masking\r\n    gl.depthMask(true);\r\n    gl.clearColor(0, 0, 0, 1);\r\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n  }\r\n\r\n  /**\r\n   * Render.\r\n   */\r\n  render(): void {\r\n    for (const scene of this.scenes) {\r\n      scene.render();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear all of the emitted objects in this viewer.\r\n   */\r\n  clearEmittedObjects(): void {\r\n    for (const scene of this.scenes) {\r\n      scene.clearEmittedObjects();\r\n    }\r\n  }\r\n}\r\n","import { vec3, quat, mat4 } from 'gl-matrix';\r\nimport { VEC3_ZERO, VEC3_ONE, QUAT_DEFAULT, quatLookAt } from '../common/gl-matrix-addon';\r\nimport { SkeletalNode } from './skeletalnode';\r\n\r\nconst locationHeap = vec3.create();\r\nconst rotationHeap = quat.create();\r\nconst scalingHeap = vec3.create();\r\n\r\n/**\r\n * A node.\r\n */\r\nexport class Node {\r\n  pivot = vec3.create();\r\n  localLocation = vec3.create();\r\n  localRotation = quat.create();\r\n  localScale = vec3.fromValues(1, 1, 1);\r\n  worldLocation = vec3.create();\r\n  worldRotation = quat.create();\r\n  worldScale = vec3.fromValues(1, 1, 1);\r\n  inverseWorldLocation = vec3.create();\r\n  inverseWorldRotation = quat.create();\r\n  inverseWorldScale = vec3.fromValues(1, 1, 1);\r\n  localMatrix = mat4.create();\r\n  worldMatrix = mat4.create();\r\n  dontInheritTranslation = false;\r\n  dontInheritRotation = false;\r\n  dontInheritScaling = true;\r\n  parent: Node | SkeletalNode | null = null;\r\n  children: Node[] = [];\r\n\r\n  /**\r\n   * Sets the node's pivot.\r\n   */\r\n  setPivot(pivot: vec3): this {\r\n    vec3.copy(this.pivot, pivot);\r\n\r\n    this.recalculateTransformation();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the node's local location.\r\n   */\r\n  setLocation(location: vec3): this {\r\n    vec3.copy(this.localLocation, location);\r\n\r\n    this.recalculateTransformation();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the node's local rotation.\r\n   */\r\n  setRotation(rotation: quat): this {\r\n    quat.copy(this.localRotation, rotation);\r\n\r\n    this.recalculateTransformation();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the node's local scale.\r\n   */\r\n  setScale(varying: vec3): this {\r\n    vec3.copy(this.localScale, varying);\r\n\r\n    this.recalculateTransformation();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the node's local scale uniformly.\r\n   */\r\n  setUniformScale(uniform: number): this {\r\n    vec3.set(this.localScale, uniform, uniform, uniform);\r\n\r\n    this.recalculateTransformation();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the node's local location, rotation, and scale.\r\n   */\r\n  setTransformation(location: vec3, rotation: quat, scale: vec3): this {\r\n    const localLocation = this.localLocation;\r\n    const localRotation = this.localRotation;\r\n    const localScale = this.localScale;\r\n\r\n    localLocation[0] = location[0];\r\n    localLocation[1] = location[1];\r\n    localLocation[2] = location[2];\r\n    // vec3.copy(this.localLocation, location);\r\n\r\n    localRotation[0] = rotation[0];\r\n    localRotation[1] = rotation[1];\r\n    localRotation[2] = rotation[2];\r\n    localRotation[3] = rotation[3];\r\n    // quat.copy(this.localRotation, rotation);\r\n\r\n    localScale[0] = scale[0];\r\n    localScale[1] = scale[1];\r\n    localScale[2] = scale[2];\r\n    // vec3.copy(this.localScale, scale);\r\n\r\n    this.recalculateTransformation();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Resets the node's local location, pivot, rotation, and scale, to the default values.\r\n   */\r\n  resetTransformation(): this {\r\n    vec3.copy(this.pivot, VEC3_ZERO);\r\n    vec3.copy(this.localLocation, VEC3_ZERO);\r\n    quat.copy(this.localRotation, QUAT_DEFAULT);\r\n    vec3.copy(this.localScale, VEC3_ONE);\r\n\r\n    this.recalculateTransformation();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Moves the node's pivot.\r\n   */\r\n  movePivot(offset: vec3): this {\r\n    vec3.add(this.pivot, this.pivot, offset);\r\n\r\n    this.recalculateTransformation();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Moves the node's local location.\r\n   */\r\n  move(offset: vec3): this {\r\n    vec3.add(this.localLocation, this.localLocation, offset);\r\n\r\n    this.recalculateTransformation();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Rotates the node's local rotation in world space.\r\n   */\r\n  rotate(rotation: quat): this {\r\n    quat.mul(this.localRotation, this.localRotation, rotation);\r\n\r\n    this.recalculateTransformation();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Rotates the node's local rotation in local space.\r\n   */\r\n  rotateLocal(rotation: quat): this {\r\n    quat.mul(this.localRotation, rotation, this.localRotation);\r\n\r\n    this.recalculateTransformation();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Scales the node.\r\n   */\r\n  scale(scale: vec3): this {\r\n    vec3.mul(this.localScale, this.localScale, scale);\r\n\r\n    this.recalculateTransformation();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Scales the node uniformly.\r\n   */\r\n  uniformScale(scale: number): this {\r\n    vec3.scale(this.localScale, this.localScale, scale);\r\n\r\n    this.recalculateTransformation();\r\n\r\n    return this;\r\n  }\r\n\r\n  face(to: vec3, worldUp: vec3): this {\r\n    quat.conjugate(this.localRotation, quatLookAt(this.localRotation, this.localLocation, to, worldUp));\r\n\r\n    this.recalculateTransformation();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the node's parent.\r\n   */\r\n  setParent(parent?: Node | SkeletalNode): this {\r\n    // If the node already had a parent, detach from it first.\r\n    if (this.parent) {\r\n      const children = this.parent.children;\r\n      const index = children.indexOf(this);\r\n\r\n      if (index !== -1) {\r\n        children.splice(index, 1);\r\n      }\r\n    }\r\n\r\n    this.parent = parent || null;\r\n\r\n    // If the new parent is an actual thing, add this node as a child.\r\n    if (parent) {\r\n      parent.children.push(this);\r\n    }\r\n\r\n    this.recalculateTransformation();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Recalculate this node's transformation data.\r\n   */\r\n  recalculateTransformation(): void {\r\n    const parent = this.parent;\r\n    const localMatrix = this.localMatrix;\r\n    const localLocation = this.localLocation;\r\n    const localRotation = this.localRotation;\r\n    const localScale = this.localScale;\r\n    const worldMatrix = this.worldMatrix;\r\n    const worldLocation = this.worldLocation;\r\n    const worldRotation = this.worldRotation;\r\n    const worldScale = this.worldScale;\r\n    const inverseWorldLocation = this.inverseWorldLocation;\r\n    const inverseWorldRotation = this.inverseWorldRotation;\r\n    const inverseWorldScale = this.inverseWorldScale;\r\n\r\n    if (parent) {\r\n      const computedLocation = locationHeap;\r\n      const parentPivot = parent.pivot;\r\n      let computedRotation;\r\n      let computedScaling;\r\n      \r\n      computedLocation[0] = localLocation[0] + parentPivot[0];\r\n      computedLocation[1] = localLocation[1] + parentPivot[1];\r\n      computedLocation[2] = localLocation[2] + parentPivot[2];\r\n      // vec3.add(computedLocation, localLocation, parentPivot);\r\n\r\n      // If this node shouldn't inherit the parent's rotation, rotate it by the inverse.\r\n      if (this.dontInheritRotation) {\r\n        computedRotation = rotationHeap;\r\n\r\n        quat.mul(computedRotation, localRotation, parent.inverseWorldRotation);\r\n      } else {\r\n        computedRotation = localRotation;\r\n      }\r\n\r\n      // If this node shouldn't inherit the parent's translation, translate it by the inverse.\r\n      // if (this.dontInheritTranslation) {\r\n      // mat4.translate(worldMatrix, worldMatrix, parent.inverseWorldLocation);\r\n      // }\r\n\r\n      if (this.dontInheritScaling) {\r\n        computedScaling = scalingHeap;\r\n\r\n        const parentInverseScale = parent.inverseWorldScale;\r\n        computedScaling[0] = parentInverseScale[0] * localScale[0];\r\n        computedScaling[1] = parentInverseScale[1] * localScale[1];\r\n        computedScaling[2] = parentInverseScale[2] * localScale[2];\r\n        // vec3.mul(computedScaling, parent.inverseWorldScale, localScale);\r\n\r\n        worldScale[0] = localScale[0];\r\n        worldScale[1] = localScale[1];\r\n        worldScale[2] = localScale[2];\r\n        // vec3.copy(worldScale, localScale);\r\n      } else {\r\n        computedScaling = localScale;\r\n\r\n        const parentScale = parent.worldScale;\r\n        worldScale[0] = parentScale[0] * localScale[0];\r\n        worldScale[1] = parentScale[1] * localScale[1];\r\n        worldScale[2] = parentScale[2] * localScale[2];\r\n        // vec3.mul(worldScale, parentScale, localScale);\r\n      }\r\n\r\n      mat4.fromRotationTranslationScale(localMatrix, computedRotation, computedLocation, computedScaling);\r\n\r\n      mat4.mul(worldMatrix, parent.worldMatrix, localMatrix);\r\n\r\n      quat.mul(worldRotation, parent.worldRotation, computedRotation);\r\n    } else {\r\n      // Local matrix\r\n      mat4.fromRotationTranslationScale(localMatrix, localRotation, localLocation, localScale);\r\n\r\n      // World matrix\r\n      worldMatrix[0] = localMatrix[0];\r\n      worldMatrix[1] = localMatrix[1];\r\n      worldMatrix[2] = localMatrix[2];\r\n      worldMatrix[3] = localMatrix[3];\r\n      worldMatrix[4] = localMatrix[4];\r\n      worldMatrix[5] = localMatrix[5];\r\n      worldMatrix[6] = localMatrix[6];\r\n      worldMatrix[7] = localMatrix[7];\r\n      worldMatrix[8] = localMatrix[8];\r\n      worldMatrix[9] = localMatrix[9];\r\n      worldMatrix[10] = localMatrix[10];\r\n      worldMatrix[11] = localMatrix[11];\r\n      worldMatrix[12] = localMatrix[12];\r\n      worldMatrix[13] = localMatrix[13];\r\n      worldMatrix[14] = localMatrix[14];\r\n      worldMatrix[15] = localMatrix[15];\r\n      // mat4.copy(worldMatrix, localMatrix);\r\n\r\n      // World rotation\r\n      worldRotation[0] = localRotation[0];\r\n      worldRotation[1] = localRotation[1];\r\n      worldRotation[2] = localRotation[2];\r\n      worldRotation[3] = localRotation[3];\r\n      // quat.copy(worldRotation, localRotation);\r\n\r\n      // World scale\r\n      worldScale[0] = localScale[0];\r\n      worldScale[1] = localScale[1];\r\n      worldScale[2] = localScale[2];\r\n      // vec3.copy(worldScale, localScale);\r\n    }\r\n\r\n    // Inverse world rotation\r\n    inverseWorldRotation[0] = -worldRotation[0];\r\n    inverseWorldRotation[1] = -worldRotation[1];\r\n    inverseWorldRotation[2] = -worldRotation[2];\r\n    inverseWorldRotation[3] = worldRotation[3];\r\n    // quat.conjugate(inverseWorldRotation, worldRotation);\r\n\r\n    // Inverse world scale\r\n    inverseWorldScale[0] = 1 / worldScale[0];\r\n    inverseWorldScale[1] = 1 / worldScale[1];\r\n    inverseWorldScale[2] = 1 / worldScale[2];\r\n    // vec3.inverse(this.inverseWorldScale, worldScale);\r\n\r\n    // World location\r\n    worldLocation[0] = worldMatrix[12];\r\n    worldLocation[1] = worldMatrix[13];\r\n    worldLocation[2] = worldMatrix[14];\r\n\r\n    // Inverse world location\r\n    inverseWorldLocation[0] = -worldLocation[0];\r\n    inverseWorldLocation[1] = -worldLocation[1];\r\n    inverseWorldLocation[2] = -worldLocation[2];\r\n    // vec3.negate(this.inverseWorldLocation, worldLocation);\r\n\r\n    for (const child of this.children) {\r\n      child.recalculateTransformation();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update this node, and continue down the node hierarchy.\r\n   */\r\n  update(dt: number): void {\r\n    for (const child of this.children) {\r\n      child.update(dt);\r\n    }\r\n  }\r\n}\r\n","/**\r\n * An object representing both a sphere and an AABB, which is used for culling of all instances.\r\n * \r\n * By default, the size of the bounds is 0, and thus point-culling is done.\r\n */\r\nexport default class Bounds {\r\n  x = 0;\r\n  y = 0;\r\n  z = 0;\r\n  r = 0;\r\n\r\n  fromExtents(min: Float32Array, max: Float32Array): void {\r\n    const x = min[0];\r\n    const y = min[1];\r\n    const z = min[2];\r\n    const w = max[0] - x;\r\n    const d = max[1] - y;\r\n    const h = max[2] - z;\r\n\r\n    this.x = x + w / 2;\r\n    this.y = y + d / 2;\r\n    this.z = z + h / 2;\r\n\r\n    // Ensure the radius is actually 0 or bigger.\r\n    // Some models apparently have reversed extents, go figure.\r\n    this.r = Math.max(0, Math.max(w, d, h) / 2);\r\n  }\r\n}\r\n","import { HandlerResource } from './handlerresource';\r\nimport Bounds from './bounds';\r\nimport ModelInstance from './modelinstance';\r\n\r\n/**\r\n * A model.\r\n */\r\nexport default abstract class Model extends HandlerResource {\r\n  bounds = new Bounds();\r\n\r\n  /**\r\n   * Create a new instance and return it.\r\n   */\r\n  abstract addInstance(): ModelInstance;\r\n}\r\n","import { testSphere, distanceToPlane3 } from '../common/gl-matrix-addon';\r\nimport { Node } from './node';\r\nimport Model from './model';\r\nimport Scene from './scene';\r\nimport Camera from './camera';\r\nimport Texture from './texture';\r\nimport Bounds from './bounds';\r\n\r\n/**\r\n * A model instance.\r\n */\r\nexport default abstract class ModelInstance extends Node {\r\n  scene: Scene | null = null;\r\n  left = -1;\r\n  right = -1;\r\n  bottom = -1;\r\n  top = -1;\r\n  plane = -1;\r\n  depth = 0;\r\n  updateFrame = 0;\r\n  model: Model;\r\n  /**\r\n   * Allows to slow down or speed up animations of this instance, and any children.\r\n   */\r\n  timeScale = 1;\r\n  /**\r\n   * If false, this instance won't be rendered.\r\n   * \r\n   * When working with Warcraft 3 instances, it is preferable to use hide() and show().\r\n   * These hide and show also internal instances of this instance.\r\n   */\r\n  rendered = true;\r\n  textureOverrides: Map<number, Texture> = new Map();\r\n\r\n  constructor(model: Model) {\r\n    super();\r\n\r\n    this.model = model;\r\n  }\r\n\r\n  /**\r\n   * This instance should be shown.\r\n   */\r\n  show(): void {\r\n    this.rendered = true;\r\n  }\r\n\r\n  /**\r\n   * This instance should be hidden.\r\n   */\r\n  hide(): void {\r\n    this.rendered = false;\r\n  }\r\n\r\n  /**\r\n   * Should the instance be shown?\r\n   */\r\n  shown(): boolean {\r\n    return this.rendered;\r\n  }\r\n\r\n  /**\r\n   * Should the instance be hidden?\r\n   */\r\n  hidden(): boolean {\r\n    return !this.rendered;\r\n  }\r\n\r\n  /**\r\n   * Detach this instance from the scene it's in.\r\n   * \r\n   * Equivalent to scene.removeInstance(instance).\r\n   */\r\n  detach(): boolean {\r\n    if (this.scene) {\r\n      return this.scene.removeInstance(this);\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  overrideTexture(index: number, texture?: Texture): void {\r\n    if (texture) {\r\n      this.textureOverrides.set(index, texture);\r\n    } else {\r\n      this.textureOverrides.delete(index);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Called for instance culling.\r\n   */\r\n  getBounds(): Bounds {\r\n    return this.model.bounds;\r\n  }\r\n\r\n  /**\r\n   * Clears any objects that were emitted by this instance.\r\n   */\r\n  clearEmittedObjects(): void {\r\n\r\n  }\r\n\r\n  /**\r\n   * Sets the scene of this instance.\r\n   * \r\n   * This is equivalent to scene.addInstance(instance).\r\n   */\r\n  setScene(scene: Scene): boolean {\r\n    return scene.addInstance(this);\r\n  }\r\n\r\n  override recalculateTransformation(): void {\r\n    super.recalculateTransformation();\r\n\r\n    if (this.scene) {\r\n      this.scene.grid.moved(this);\r\n    }\r\n  }\r\n\r\n  override update(dt: number): void {\r\n    const scene = this.scene;\r\n\r\n    if (scene && this.rendered && this.isVisible(scene.camera)) {\r\n      // Add this instance to the render list.\r\n      scene.renderInstance(this);\r\n\r\n      // Update this instance.\r\n      this.updateAnimations(dt * this.timeScale);\r\n\r\n      // Update child nodes if there are any, such as instances parented to instances.\r\n      super.update(dt);\r\n    }\r\n  }\r\n\r\n  updateAnimations(_dt: number): void {\r\n\r\n  }\r\n\r\n  renderOpaque(): void {\r\n\r\n  }\r\n\r\n  renderTranslucent(): void {\r\n\r\n  }\r\n\r\n  isVisible(camera: Camera): boolean {\r\n    const [x, y, z] = this.worldLocation;\r\n    const [sx, sy, sz] = this.worldScale;\r\n    const bounds = this.getBounds();\r\n    const planes = camera.planes;\r\n    let biggest = sx;\r\n\r\n    // Get the biggest scaling dimension.\r\n    if (sy > biggest) {\r\n      biggest = sy;\r\n    }\r\n\r\n    if (sz > biggest) {\r\n      biggest = sz;\r\n    }\r\n\r\n    this.plane = testSphere(planes, x + bounds.x, y + bounds.y, z + bounds.z, bounds.r * biggest, this.plane);\r\n\r\n    if (this.plane === -1) {\r\n      this.depth = distanceToPlane3(planes[4], x, y, z);\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n}\r\n","import WebGL from './gl';\r\nimport Shader from './shader';\r\nimport ClientBuffer from './clientbuffer';\r\nimport DataTexture from './datatexture';\r\nimport ClientDataTexture from './clientdatatexture';\r\n\r\nexport default {\r\n  WebGL,\r\n  Shader,\r\n  ClientBuffer,\r\n  DataTexture,\r\n  ClientDataTexture,\r\n};\r\n","import { BlpImage } from '../../../parsers/blp/image';\r\nimport isBlp from '../../../parsers/blp/isformat';\r\nimport Texture from './texture';\r\n\r\nexport default {\r\n  isValidSource(object: unknown): boolean {\r\n    if (object instanceof BlpImage) {\r\n      return true;\r\n    }\r\n\r\n    return isBlp(object);\r\n  },\r\n  resource: Texture,\r\n};\r\n","/**\r\n * Detects if the given object is a BLP source.\r\n */\r\nexport default function isBlp(bytes: unknown): boolean {\r\n  if (bytes instanceof ArrayBuffer) {\r\n    bytes = new Uint8Array(bytes);\r\n  }\r\n\r\n  if (bytes instanceof Uint8Array) {\r\n    if (bytes[0] === 0x42 && bytes[1] === 0x4c && bytes[2] === 0x50 && bytes[3] === 0x31) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n","import { isPowerOfTwo } from '../../../common/math';\r\nimport { BlpImage } from '../../../parsers/blp/image';\r\nimport { HandlerResourceData } from '../../handlerresource';\r\nimport Texture from '../../texture';\r\n\r\n/**\r\n * A BLP texure handler.\r\n */\r\nexport default class BlpTexture extends Texture {\r\n  constructor(bufferOrImage: ArrayBuffer | BlpImage, resourceData: HandlerResourceData) {\r\n    super(resourceData);\r\n\r\n    let image;\r\n\r\n    if (bufferOrImage instanceof BlpImage) {\r\n      image = bufferOrImage;\r\n    } else {\r\n      image = new BlpImage();\r\n\r\n      image.load(bufferOrImage);\r\n    }\r\n\r\n    const viewer = this.viewer;\r\n    const gl = viewer.gl;\r\n\r\n    const id = gl.createTexture();\r\n    gl.bindTexture(gl.TEXTURE_2D, id);\r\n\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n\r\n    const isPOT = isPowerOfTwo(image.width) && isPowerOfTwo(image.height);\r\n\r\n    if (!isPOT) {\r\n      // Required for NPOT textures.\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n    }\r\n\r\n    const mipmaps = image.mipmaps();\r\n\r\n    // If there is one mipmap, or fake mipmaps, or it's an NPOT image, use just the first mipmap. Otherwise load all of them.\r\n    if (mipmaps === 1 || image.fakeMipmaps() || !isPOT) {\r\n      const imageData = image.getMipmap(0);\r\n\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n\r\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, imageData);\r\n    } else {\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\r\n\r\n      let width = image.width;\r\n      let height = image.height;\r\n\r\n      for (let i = 0; i < mipmaps; i++) {\r\n        const imageData = image.getMipmap(i);\r\n\r\n        // Don't use the image data dimensions directly.\r\n        // Some JPG mipmaps out there have wrong sizes.\r\n        // For example the last two mipmaps being 2x1, which messes with GL.\r\n        gl.texImage2D(gl.TEXTURE_2D, i, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, imageData.data);\r\n\r\n        width = Math.ceil(width / 2);\r\n        height = Math.ceil(height / 2);\r\n      }\r\n    }\r\n\r\n    this.width = image.width;\r\n    this.height = image.height;\r\n    this.webglResource = id;\r\n  }\r\n}\r\n","import { DdsImage } from '../../../parsers/dds/image';\r\nimport isDds from '../../../parsers/dds/isformat';\r\nimport ModelViewer from '../../viewer';\r\nimport Texture from './texture';\r\n\r\nexport default {\r\n  load(viewer: ModelViewer): void {\r\n    const webgl = viewer.webgl;\r\n\r\n    // Optionally used when decoding mipmaps.\r\n    if (!webgl.ensureExtension('WEBGL_compressed_texture_s3tc')) {\r\n      console.warn('DDS: No compressed textures support! This might reduce performance.');\r\n    }\r\n  },\r\n  isValidSource(object: unknown): boolean {\r\n    if (object instanceof DdsImage) {\r\n      return true;\r\n    }\r\n\r\n    return isDds(object);\r\n  },\r\n  resource: Texture,\r\n};\r\n","import { DdsImage, FOURCC_DXT1, FOURCC_DXT3, FOURCC_DXT5, FOURCC_ATI2 } from '../../../parsers/dds/image';\r\nimport { HandlerResourceData } from '../../handlerresource';\r\nimport Texture from '../../texture';\r\n\r\n/**\r\n * A DDS texture handler.\r\n */\r\nexport default class DdsTexture extends Texture {\r\n  constructor(bufferOrImage: ArrayBuffer | DdsImage, resourceData: HandlerResourceData) {\r\n    super(resourceData);\r\n\r\n    let image;\r\n\r\n    if (bufferOrImage instanceof DdsImage) {\r\n      image = bufferOrImage;\r\n    } else {\r\n      image = new DdsImage();\r\n\r\n      image.load(bufferOrImage);\r\n    }\r\n\r\n    const viewer = this.viewer;\r\n    const gl = viewer.gl;\r\n    const webgl = viewer.webgl;\r\n    const compressedTextures = <WEBGL_compressed_texture_s3tc>webgl.extensions['WEBGL_compressed_texture_s3tc'];\r\n    const format = image.format;\r\n    let internalFormat = 0;\r\n\r\n    if (compressedTextures) {\r\n      if (format === FOURCC_DXT1) {\r\n        internalFormat = compressedTextures.COMPRESSED_RGB_S3TC_DXT1_EXT;\r\n      } else if (format === FOURCC_DXT3) {\r\n        internalFormat = compressedTextures.COMPRESSED_RGBA_S3TC_DXT3_EXT;\r\n      } else if (format === FOURCC_DXT5) {\r\n        internalFormat = compressedTextures.COMPRESSED_RGBA_S3TC_DXT5_EXT;\r\n      }\r\n    }\r\n\r\n    const id = gl.createTexture();\r\n\r\n    this.width = image.width;\r\n    this.height = image.height;\r\n    this.webglResource = id;\r\n\r\n    gl.bindTexture(gl.TEXTURE_2D, id);\r\n\r\n    const mipmaps = image.mipmaps();\r\n\r\n    // DXT1 and ATI2 pixels are two bytes.\r\n    // This generally doesn't matter, however, when having 1x2 or 2x1 mipmaps, it does.\r\n    // Therefore set the proper alignment if needed.\r\n    if (format === FOURCC_DXT1 || format === FOURCC_ATI2) {\r\n      gl.pixelStorei(gl.UNPACK_ALIGNMENT, 2);\r\n    }\r\n\r\n    for (let i = 0; i < mipmaps; i++) {\r\n      // Let the GPU handle the compressed data if it supports it.\r\n      // Otherwise, decode the data on the client.\r\n      const { width, height, data } = image.getMipmap(i, internalFormat !== 0);\r\n\r\n      if (internalFormat) {\r\n        gl.compressedTexImage2D(gl.TEXTURE_2D, i, internalFormat, width, height, 0, data);\r\n      } else if (format === FOURCC_DXT1) {\r\n        gl.texImage2D(gl.TEXTURE_2D, i, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, data);\r\n      } else if (format === FOURCC_DXT3) {\r\n        gl.texImage2D(gl.TEXTURE_2D, i, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, data);\r\n      } else if (format === FOURCC_DXT5) {\r\n        gl.texImage2D(gl.TEXTURE_2D, i, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, data);\r\n      } else {\r\n        gl.texImage2D(gl.TEXTURE_2D, i, gl.LUMINANCE_ALPHA, width, height, 0, gl.LUMINANCE_ALPHA, gl.UNSIGNED_BYTE, data);\r\n      }\r\n    }\r\n\r\n    // Restore the alignment to the default, in case it changed.\r\n    gl.pixelStorei(gl.UNPACK_ALIGNMENT, 4);\r\n\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n\r\n    if (mipmaps > 1) {\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\r\n    } else {\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n    }\r\n  }\r\n}\r\n","import Texture from '../../texture';\r\n\r\n/**\r\n * An M3 texture.\r\n */\r\nexport default class M3Texture {\r\n  texture: Texture | null = null;\r\n  wrapS = 0x812f; // CLAMP_TO_EDGE\r\n  wrapT = 0x812f;\r\n\r\n  constructor(repeatS: boolean, repeatT: boolean) {\r\n    if (repeatS) {\r\n      this.wrapS = 0x2901; // REPEAT\r\n    }\r\n\r\n    if (repeatT) {\r\n      this.wrapT = 0x2901;\r\n    }\r\n  }\r\n}\r\n","import Reference from '../../../parsers/m3/reference';\r\nimport Layer from '../../../parsers/m3/layer';\r\nimport Texture from '../../texture';\r\nimport Shader from '../../gl/shader';\r\nimport { M3StandardMaterial, STANDARD_MATERIAL_OFFSET } from './standardmaterial';\r\nimport M3Model from './model';\r\nimport M3Texture from './texture';\r\n\r\nconst layerTypeToTextureUnit = {\r\n  diffuse: 1,\r\n  decal: 2,\r\n  specular: 3,\r\n  gloss: 4,\r\n  emissive: 5,\r\n  emissive2: 6,\r\n  evio: 7,\r\n  evioMask: 8,\r\n  alphaMask: 9,\r\n  alphaMask2: 10,\r\n  normal: 11,\r\n  heightMap: 12,\r\n  lightMap: 13,\r\n  ao: 14,\r\n};\r\n\r\n/**\r\n * An M3 layer.\r\n */\r\nexport default class M3Layer {\r\n  model: M3Model;\r\n  material: M3StandardMaterial;\r\n  index: number;\r\n  active = 0;\r\n  layer: Layer | null = null;\r\n  gl: WebGLRenderingContext;\r\n  uniformMap: { map: string; enabled: string; op: string; channels: string; teamColorMode: string; invert: string; clampResult: string; uvCoordinate: string; };\r\n  source = '';\r\n  texture: M3Texture | null = null;\r\n  flags = 0;\r\n  colorChannels = 0;\r\n  type = '';\r\n  op = 0;\r\n  uvCoordinate = 0;\r\n  textureUnit = 0;\r\n  invert = 0;\r\n  clampResult = 0;\r\n  teamColorMode = 0;\r\n\r\n  constructor(material: M3StandardMaterial, index: number, layerReference: Reference, type: string, op: number) {\r\n    const model = material.model;\r\n\r\n    this.model = model;\r\n    this.material = material;\r\n    this.gl = material.gl;\r\n    this.index = index;\r\n\r\n    const uniform = 'u_' + type;\r\n    const settings = uniform + 'LayerSettings.';\r\n\r\n    this.uniformMap = {\r\n      map: uniform + 'Map',\r\n      enabled: settings + 'enabled',\r\n      op: settings + 'op',\r\n      channels: settings + 'channels',\r\n      teamColorMode: settings + 'teamColorMode',\r\n      invert: settings + 'invert',\r\n      clampResult: settings + 'clampResult',\r\n      uvCoordinate: settings + 'uvCoordinate',\r\n    };\r\n\r\n    // Since Gloss doesn't exist in all versions\r\n    if (layerReference.entries) {\r\n      const layer = <Layer>layerReference.first();\r\n\r\n      this.layer = layer;\r\n\r\n      const pathSolver = model.pathSolver;\r\n\r\n      const path = layer.imagePath.get();\r\n\r\n      if (path) {\r\n        const source = (<string>path).toLowerCase();\r\n\r\n        if (source.length) {\r\n          this.source = source;\r\n          this.active = 1;\r\n\r\n          const uvSource = layer.uvSource;\r\n          const flags = layer.flags;\r\n\r\n          this.flags = flags;\r\n          this.colorChannels = layer.colorChannelSetting;\r\n\r\n          this.model = model;\r\n          this.type = type;\r\n          this.op = op;\r\n\r\n          let uvCoordinate = 0;\r\n\r\n          if (uvSource === 1) {\r\n            uvCoordinate = 1;\r\n          } else if (uvSource === 9) {\r\n            uvCoordinate = 2;\r\n          } else if (uvSource === 10) {\r\n            uvCoordinate = 3;\r\n          }\r\n\r\n          this.uvCoordinate = uvCoordinate;\r\n\r\n          this.textureUnit = layerTypeToTextureUnit[type];\r\n\r\n          this.invert = flags & 0x10;\r\n          this.clampResult = flags & 0x20;\r\n\r\n          // I am not sure if the emissive team color mode is even used, since so far combineColors takes care of it.\r\n          if (type === 'diffuse') {\r\n            this.teamColorMode = 1;\r\n          }\r\n\r\n          const m3Texture = new M3Texture(!!(flags & 0x4), !!(flags & 0x8));\r\n\r\n          model.viewer.load(source, pathSolver)\r\n            .then((texture) => {\r\n              if (texture) {\r\n                m3Texture.texture = <Texture>texture;\r\n              }\r\n            });\r\n\r\n          this.texture = m3Texture;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  bind(shader: Shader, textureOverrides: Map<number, Texture>): void {\r\n    const gl = this.gl;\r\n    const uniformMap = this.uniformMap;\r\n    const uniforms = shader.uniforms;\r\n    const active = this.active;\r\n\r\n    gl.uniform1f(uniforms[uniformMap.enabled], active);\r\n\r\n    if (active) {\r\n      const m3Texture = <M3Texture>this.texture;\r\n      const texture = textureOverrides.get(this.material.index * STANDARD_MATERIAL_OFFSET + this.index) || m3Texture.texture;\r\n      const textureUnit = this.textureUnit;\r\n\r\n      gl.uniform1i(uniforms[uniformMap.map], textureUnit);\r\n\r\n      this.model.viewer.webgl.bindTextureAndWrap(texture, textureUnit, m3Texture.wrapS, m3Texture.wrapT);\r\n\r\n      gl.uniform1f(uniforms[uniformMap.op], this.op);\r\n      gl.uniform1f(uniforms[uniformMap.channels], this.colorChannels);\r\n      gl.uniform1f(uniforms[uniformMap.teamColorMode], this.teamColorMode);\r\n\r\n      // Alpha is probably unknown12. Can this be confirmed?\r\n      // Many of these flags seem to be incorrect\r\n      // gl.setParameter(uniform + 'multAddAlpha', [this.model.getValue(this.rgbMultiply, sequence, frame), this.model.getValue(this.rgbAdd, sequence, frame), 0]);\r\n      // gl.setParameter(uniform + 'useAlphaFactor', 0);\r\n\r\n      gl.uniform1f(uniforms[uniformMap.invert], this.invert);\r\n\r\n      // gl.setParameter(uniform + 'multColor', 0);\r\n      // gl.setParameter(uniform + 'addColor', 0);\r\n\r\n      gl.uniform1f(uniforms[uniformMap.clampResult], this.clampResult);\r\n\r\n      // gl.setParameter(uniform + 'useConstantColor', this.flags && 0x400);\r\n      // gl.setParameter(uniform + 'constantColor', this.model.getValue(this.color, sequence, frame));\r\n      // gl.setParameter(settings + 'uvSource', this.uvSource);\r\n\r\n      gl.uniform1f(uniforms[uniformMap.uvCoordinate], this.uvCoordinate);\r\n    }\r\n  }\r\n\r\n  unbind(shader: Shader): void {\r\n    if (this.active) {\r\n      this.gl.uniform1f(shader.uniforms[this.uniformMap.enabled], 0);\r\n    }\r\n  }\r\n}\r\n","import M3ParserStandardMaterial from '../../../parsers/m3/standardmaterial';\r\nimport Shader from '../../gl/shader';\r\nimport Texture from '../../texture';\r\nimport M3Model from './model';\r\nimport M3Layer from './layer';\r\n\r\n\r\nexport const STANDARD_MATERIAL_OFFSET = 100;\r\n\r\n/**\r\n * An M3 standard material.\r\n */\r\nexport class M3StandardMaterial {\r\n  model: M3Model;\r\n  gl: WebGLRenderingContext;\r\n  index: number;\r\n  name: string;\r\n  flags: number;\r\n  blendMode: number;\r\n  priority: number;\r\n  specularity: number;\r\n  specMult: number;\r\n  emisMult: number;\r\n  layerBlendType: number;\r\n  emisBlendType: number;\r\n  emisMode: number;\r\n  doubleSided: number;\r\n  layers: M3Layer[];\r\n\r\n  constructor(model: M3Model, index: number, material: M3ParserStandardMaterial) {\r\n    this.model = model;\r\n    this.gl = model.viewer.gl;\r\n    this.index = index;\r\n    this.name = <string>material.name.get();\r\n    this.flags = material.flags;\r\n    this.blendMode = material.blendMode;\r\n    this.priority = material.priority;\r\n    this.specularity = material.specularity;\r\n    this.specMult = material.specMult;\r\n    this.emisMult = material.emisMult;\r\n    this.layerBlendType = material.layerBlendType;\r\n    this.emisBlendType = material.emisBlendType;\r\n    this.emisMode = material.emisMode;\r\n    this.doubleSided = material.flags & 0x8;\r\n\r\n    this.layers = [\r\n      new M3Layer(this, 0, material.diffuseLayer, 'diffuse', 2),\r\n      new M3Layer(this, 1, material.decalLayer, 'decal', 2),\r\n      new M3Layer(this, 2, material.specularLayer, 'specular', 2),\r\n      new M3Layer(this, 3, material.glossLayer, 'gloss', 2),\r\n      new M3Layer(this, 4, material.emissiveLayer, 'emissive', material.emisBlendType),\r\n      new M3Layer(this, 5, material.emissive2Layer, 'emissive2', material.emisMode),\r\n      new M3Layer(this, 6, material.evioLayer, 'evio', 2),\r\n      new M3Layer(this, 7, material.evioMaskLayer, 'evioMask', 2),\r\n      new M3Layer(this, 8, material.alphaMaskLayer, 'alphaMask', 2),\r\n      new M3Layer(this, 9, material.alphaMask2Layer, 'alphaMask2', 2),\r\n      new M3Layer(this, 10, material.normalLayer, 'normal', 2),\r\n      new M3Layer(this, 11, material.heightLayer, 'heightMap', 2),\r\n      new M3Layer(this, 12, material.lightMapLayer, 'lightMap', 2),\r\n      new M3Layer(this, 13, material.ambientOcclusionLayer, 'ao', 2),\r\n    ];\r\n  }\r\n\r\n  bindCommon(): void {\r\n    const gl = this.gl;\r\n\r\n    if (this.blendMode === 1) {\r\n      gl.enable(gl.BLEND);\r\n      gl.blendFunc(gl.ONE, gl.ONE);\r\n    } else if (this.blendMode === 2) {\r\n      gl.enable(gl.BLEND);\r\n      gl.blendFunc(gl.ONE, gl.ONE);\r\n    } else {\r\n      gl.disable(gl.BLEND);\r\n    }\r\n\r\n    if (this.doubleSided) {\r\n      gl.disable(gl.CULL_FACE);\r\n    } else {\r\n      gl.enable(gl.CULL_FACE);\r\n    }\r\n\r\n    // Flags somewhere?\r\n    // Per layer?\r\n    gl.enable(gl.DEPTH_TEST);\r\n    gl.depthMask(true);\r\n  }\r\n\r\n  bind(shader: Shader, textureOverrides: Map<number, Texture>): void {\r\n    const gl = this.gl;\r\n\r\n    this.bindCommon();\r\n\r\n    gl.uniform1f(shader.uniforms['u_specularity'], this.specularity);\r\n    gl.uniform1f(shader.uniforms['u_specMult'], this.specMult);\r\n    gl.uniform1f(shader.uniforms['u_emisMult'], this.emisMult);\r\n    gl.uniform4f(shader.uniforms['u_lightAmbient'], 0.02, 0.02, 0.02, 0);\r\n\r\n    const layers = this.layers;\r\n\r\n    layers[0].bind(shader, textureOverrides);\r\n    layers[1].bind(shader, textureOverrides);\r\n    layers[2].bind(shader, textureOverrides);\r\n    layers[4].bind(shader, textureOverrides);\r\n    layers[5].bind(shader, textureOverrides);\r\n    layers[10].bind(shader, textureOverrides);\r\n    layers[12].bind(shader, textureOverrides);\r\n  }\r\n\r\n  unbind(shader: Shader): void {\r\n    const gl = this.gl;\r\n\r\n    gl.disable(gl.BLEND);\r\n    gl.enable(gl.CULL_FACE);\r\n\r\n    const layers = this.layers;\r\n\r\n    layers[0].unbind(shader);\r\n    layers[1].unbind(shader);\r\n    layers[2].unbind(shader);\r\n    layers[4].unbind(shader);\r\n    layers[5].unbind(shader);\r\n    layers[10].unbind(shader);\r\n    layers[12].unbind(shader);\r\n  }\r\n}\r\n","import Bone from '../../../parsers/m3/bone';\r\nimport { Uint32AnimationReference, Vector3AnimationReference, Vector4AnimationReference } from '../../../parsers/m3/animationreference';\r\n\r\n/**\r\n * An M3 bone.\r\n */\r\nexport default class M3Bone {\r\n  name: string;\r\n  parent: number;\r\n  location: Vector3AnimationReference;\r\n  rotation: Vector4AnimationReference;\r\n  scale: Vector3AnimationReference;\r\n  visibility: Uint32AnimationReference;\r\n  inhertTranslation: number;\r\n  inheritScale: number;\r\n  inheritRotation: number;\r\n  billboard1: number;\r\n  billboard2: number;\r\n  twoDProjection: number;\r\n  animated: number;\r\n  inverseKinematics: number;\r\n  skinned: number;\r\n  real: number;\r\n\r\n  constructor(bone: Bone) {\r\n    const flags = bone.flags;\r\n\r\n    this.name = <string>bone.name.get();\r\n    this.parent = bone.parent;\r\n    this.location = bone.location;\r\n    this.rotation = bone.rotation;\r\n    this.scale = bone.scale;\r\n    this.visibility = bone.visibility;\r\n    this.inhertTranslation = flags & 0x1;\r\n    this.inheritScale = flags & 0x2;\r\n    this.inheritRotation = flags & 0x4;\r\n    this.billboard1 = flags & 0x10;\r\n    this.billboard2 = flags & 0x40;\r\n    this.twoDProjection = flags & 0x100;\r\n    this.animated = flags & 0x200;\r\n    this.inverseKinematics = flags & 0x400;\r\n    this.skinned = flags & 0x800;\r\n    this.real = flags & 0x2000;\r\n  }\r\n}\r\n","import M3ParserSequence from '../../../parsers/m3/sequence';\r\nimport M3ParserBoundingSphere from '../../../parsers/m3/boundingsphere';\r\n\r\n/**\r\n * An M3 sequence.\r\n */\r\nexport default class M3Sequence {\r\n  name: string;\r\n  interval: Uint32Array;\r\n  movementSpeed: number;\r\n  frequency: number;\r\n  boundingSphere: M3ParserBoundingSphere;\r\n  flags: number;\r\n\r\n  constructor(sequence: M3ParserSequence) {\r\n    this.name = <string>sequence.name.get();\r\n    this.interval = sequence.interval;\r\n    this.movementSpeed = sequence.movementSpeed;\r\n    this.frequency = sequence.frequency;\r\n    this.boundingSphere = sequence.boundingSphere;\r\n    this.flags = sequence.flags;\r\n  }\r\n}\r\n","import M3ParserSts from '../../../parsers/m3/sts';\r\nimport { AnimationReference } from '../../../parsers/m3/animationreference';\r\n\r\n/**\r\n * M3 animation data validator.\r\n */\r\nexport default class M3Sts {\r\n  animIds = new Map<number, number>();\r\n\r\n  constructor(sts: M3ParserSts) {\r\n    const animIds = <Uint32Array>sts.animIds.get();\r\n\r\n    // Allows direct checks instead of loops\r\n    for (let i = 0, l = animIds.length; i < l; i++) {\r\n      this.animIds.set(animIds[i], i);\r\n    }\r\n  }\r\n\r\n  hasData(animRef: AnimationReference): boolean {\r\n    return this.animIds.has(animRef.animId);\r\n  }\r\n}\r\n","import { vec3, quat } from 'gl-matrix';\r\nimport { clamp, lerp } from '../../../common/math';\r\nimport { AnimationReference } from '../../../parsers/m3/animationreference';\r\nimport M3ParserSd from '../../../parsers/m3/sd';\r\n\r\nconst vectorHeap = vec3.create();\r\nconst quatHeap = quat.create();\r\n\r\n/**\r\n * Sequence data.\r\n */\r\nclass M3Sd {\r\n  keys: Int32Array;\r\n  values: vec3[] | quat[] | number[];\r\n  biggestKey: number;\r\n\r\n  constructor(sd: M3ParserSd) {\r\n    this.keys = <Int32Array>sd.keys.get();\r\n    this.values = <vec3[]>sd.values.get(); // Fake typecasting to avoid a TS error.\r\n    this.biggestKey = sd.biggestKey;\r\n  }\r\n}\r\n\r\n/**\r\n * A sequence data container.\r\n */\r\nexport default class M3SdContainer {\r\n  sd: M3Sd[] = [];\r\n\r\n  addSds(sds: M3ParserSd[]): void {\r\n    for (const sd of sds) {\r\n      this.sd.push(new M3Sd(sd));\r\n    }\r\n  }\r\n\r\n  getValueUnsafe(index: number, animationReference: AnimationReference, frame: number, runsConcurrent: number): number | vec3 | quat | Uint8Array | null {\r\n    const sd = this.sd[index];\r\n\r\n    if (runsConcurrent) {\r\n      frame = frame % sd.biggestKey;\r\n    }\r\n\r\n    const keys = sd.keys;\r\n    const values = sd.values;\r\n\r\n    // getInterval\r\n    let a = keys.length;\r\n    let b = 0;\r\n\r\n    while (b !== keys.length && frame > keys[b]) {\r\n      a = b;\r\n      b++;\r\n    }\r\n\r\n    const length = keys.length;\r\n\r\n    if (a === length) {\r\n      if (b === length) {\r\n        return animationReference.initValue;\r\n      } else {\r\n        return values[b];\r\n      }\r\n    }\r\n\r\n    if (b === length || a >= b) {\r\n      return values[a];\r\n    }\r\n\r\n    const t = clamp((frame - keys[a]) / (keys[b] - keys[a]), 0, 1);\r\n    const va = values[a];\r\n    const vb = values[b];\r\n    const interpolationType = animationReference.interpolationType;\r\n    const fakeVa = <vec3>va; /// UGLY!!!\r\n\r\n    if (fakeVa.length === 4) {\r\n      if (interpolationType === 0) {\r\n        return quat.copy(quatHeap, <quat>va);\r\n      } else {\r\n        return quat.slerp(quatHeap, <quat>va, <quat>vb, t);\r\n      }\r\n    } else if (fakeVa.length === 3) {\r\n      if (interpolationType === 0) {\r\n        return vec3.copy(vectorHeap, <vec3>va);\r\n      } else {\r\n        return vec3.lerp(vectorHeap, <vec3>va, <vec3>vb, t);\r\n      }\r\n    } else {\r\n      if (interpolationType === 0) {\r\n        return <number>va;\r\n      } else {\r\n        return lerp(<number>va, <number>vb, t);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import M3ParserStc from '../../../parsers/m3/stc';\r\nimport { AnimationReference } from '../../../parsers/m3/animationreference';\r\nimport M3ModelInstance from './modelinstance';\r\nimport M3SdContainer from './sd';\r\nimport M3ParserSd from '../../../parsers/m3/sd';\r\nimport { quat, vec3 } from 'gl-matrix';\r\n\r\n/**\r\n * M3 sequence data.\r\n */\r\nexport default class M3Stc {\r\n  name: string;\r\n  runsConcurrent: number;\r\n  priority: number;\r\n  stsIndex: number;\r\n  animRefs: number[][] = [];\r\n  sd: M3SdContainer[] = [];\r\n\r\n  constructor(stc: M3ParserStc) {\r\n    const animIds = <Uint32Array>stc.animIds.get();\r\n\r\n    this.name = <string>stc.name.get();\r\n    this.runsConcurrent = stc.runsConcurrent;\r\n    this.priority = stc.priority;\r\n    this.stsIndex = stc.stsIndex;\r\n\r\n    const uints = <Uint32Array>stc.animRefs.get();\r\n    const animRefs = new Uint16Array(uints.buffer);\r\n\r\n    // Allows direct checks instead of loops\r\n    for (let i = 0, l = animIds.length; i < l; i++) {\r\n      this.animRefs[animIds[i]] = [animRefs[i * 2 + 1], animRefs[i * 2]];\r\n    }\r\n\r\n    for (const sd of stc.sd) {\r\n      const container = new M3SdContainer();\r\n\r\n      const sds = sd.get();\r\n      if (sds) {\r\n        container.addSds(<M3ParserSd[]>sds);\r\n      }\r\n\r\n      this.sd.push(container);\r\n    }\r\n  }\r\n\r\n  getValueUnsafe(animRef: AnimationReference, instance: M3ModelInstance): number | vec3 | quat | Uint8Array | null {\r\n    const ref = this.animRefs[animRef.animId];\r\n\r\n    if (ref) {\r\n      return this.sd[ref[0]].getValueUnsafe(ref[1], animRef, instance.frame, this.runsConcurrent);\r\n    }\r\n\r\n    return animRef.initValue;\r\n  }\r\n}\r\n","import M3ParserStg from '../../../parsers/m3/stg';\r\nimport { AnimationReference } from '../../../parsers/m3/animationreference';\r\nimport M3ModelInstance from './modelinstance';\r\nimport M3Sts from './sts';\r\nimport M3Stc from './stc';\r\nimport { quat, vec3 } from 'gl-matrix';\r\n\r\n/**\r\n * M3 animation data getter.\r\n */\r\nexport default class M3Stg {\r\n  name: string;\r\n  stcIndices: Uint32Array;\r\n  sts: M3Sts[];\r\n  stc: M3Stc[];\r\n\r\n  constructor(stg: M3ParserStg, sts: M3Sts[], stc: M3Stc[]) {\r\n    this.name = <string>stg.name.get();\r\n    this.stcIndices = <Uint32Array>stg.stcIndices.get();\r\n    this.sts = sts;\r\n    this.stc = stc;\r\n  }\r\n\r\n  getValueUnsafe(animRef: AnimationReference, instance: M3ModelInstance): number | vec3 | quat | Uint8Array | null {\r\n    const stcIndices = this.stcIndices;\r\n    const stcs = this.stc;\r\n    const stss = this.sts;\r\n\r\n    for (let i = 0, l = stcIndices.length; i < l; i++) {\r\n      const stc = stcs[stcIndices[i]];\r\n      const sts = stss[stc.stsIndex];\r\n\r\n      // First check if this STC actually has data for this animation reference\r\n      if (sts.hasData(animRef)) {\r\n        // Since this STC has data for this animation reference, return it\r\n        return stc.getValueUnsafe(animRef, instance);\r\n      }\r\n    }\r\n\r\n    // No STC referenced by the STG had data for this animation reference\r\n    return animRef.initValue;\r\n  }\r\n}\r\n","import AttachmentPoint from '../../../parsers/m3/attachmentpoint';\r\n\r\n/**\r\n * An M3 attachment.\r\n */\r\nexport default class M3Attachment {\r\n  name: string;\r\n  bone: number;\r\n\r\n  constructor(attachment: AttachmentPoint) {\r\n    this.name = <string>attachment.name.get();\r\n    this.bone = attachment.bone;\r\n  }\r\n}\r\n","import Camera from '../../../parsers/m3/camera';\r\n\r\n/**\r\n * An M3 camera.\r\n */\r\nexport default class M3Camera {\r\n  bone: number;\r\n  name: string;\r\n\r\n  constructor(camera: Camera) {\r\n    this.bone = camera.bone;\r\n    this.name = <string>camera.name.get();\r\n\r\n    // / TODO: Add animated getters, much like the Mdx structures.\r\n    /*\r\n    this.fieldOfView = new AnimationReference(reader, readFloat32);\r\n    this.farClip = new AnimationReference(reader, readFloat32);\r\n    this.nearClip = new AnimationReference(reader, readFloat32);\r\n    this.clip2 = new AnimationReference(reader, readFloat32);\r\n    this.focalDepth = new AnimationReference(reader, readFloat32);\r\n    this.falloffStart = new AnimationReference(reader, readFloat32);\r\n    this.falloffEnd = new AnimationReference(reader, readFloat32);\r\n    this.depthOfField = new AnimationReference(reader, readFloat32);\r\n    */\r\n  }\r\n}\r\n","import M3ParserRegion from '../../../parsers/m3/region';\r\nimport Shader from '../../gl/shader';\r\nimport M3Model from './model';\r\n\r\n/**\r\n * An M3 region.\r\n */\r\nexport default class M3Region {\r\n  gl: WebGLRenderingContext;\r\n  firstBoneLookupIndex: number;\r\n  boneWeightPairsCount: number;\r\n  offset: number;\r\n  verticesCount: number;\r\n  elements: number;\r\n\r\n  constructor(model: M3Model, region: M3ParserRegion, triangles: Uint16Array, elementArray: Uint16Array, offset: number) {\r\n    const firstVertexIndex = region.firstVertexIndex;\r\n    const triangleIndicesCount = region.triangleIndicesCount;\r\n    const firstTriangleIndex = region.firstTriangleIndex;\r\n\r\n    // Note for implementors: the one original vertex indices array could be used with access to the base-vertex draw elements function.\r\n    // See https://www.opengl.org/sdk/docs/man3/xhtml/glDrawElementsBaseVertex.xml\r\n    // firstTriangleIndex is the indices offset.\r\n    // firstVertexIndex is the base vertex.\r\n    for (let i = 0; i < triangleIndicesCount; i++) {\r\n      elementArray[offset + i] = triangles[firstTriangleIndex + i] + firstVertexIndex;\r\n    }\r\n\r\n    this.gl = model.viewer.gl;\r\n    this.firstBoneLookupIndex = region.firstBoneLookupIndex;\r\n    this.boneWeightPairsCount = region.boneWeightPairsCount;\r\n    this.offset = offset * 2;\r\n    this.verticesCount = region.verticesCount;\r\n    this.elements = triangleIndicesCount;\r\n  }\r\n\r\n  render(shader: Shader): void {\r\n    const gl = this.gl;\r\n\r\n    gl.uniform1f(shader.uniforms['u_firstBoneLookupIndex'], this.firstBoneLookupIndex);\r\n    gl.uniform1f(shader.uniforms['u_boneWeightPairsCount'], this.boneWeightPairsCount);\r\n\r\n    gl.drawElements(gl.TRIANGLES, this.elements, gl.UNSIGNED_SHORT, this.offset);\r\n  }\r\n}\r\n","import { vec3, quat, mat4 } from 'gl-matrix';\r\nimport { VEC3_UNIT_X, VEC3_UNIT_Y, VEC3_UNIT_Z } from '../common/gl-matrix-addon';\r\nimport Scene from './scene';\r\nimport { Node } from './node';\r\nimport ModelInstance from './modelinstance';\r\n\r\nconst locationHeap = vec3.create();\r\nconst rotationHeap = quat.create();\r\nconst scalingHeap = vec3.create();\r\nconst cameraRayHeap = vec3.create();\r\nconst rotationHeap2 = quat.create();\r\n\r\n/**\r\n * A skeletal node used for skeletons.\r\n * \r\n * Expected to be created with createSkeletalNodes() below.\r\n */\r\nexport class SkeletalNode {\r\n  pivot: vec3;\r\n  localLocation: vec3;\r\n  localRotation: quat;\r\n  localScale: vec3;\r\n  worldLocation: vec3;\r\n  worldRotation: quat;\r\n  worldScale: vec3;\r\n  inverseWorldLocation: vec3;\r\n  inverseWorldRotation: quat;\r\n  inverseWorldScale: vec3;\r\n  localMatrix: mat4;\r\n  worldMatrix: mat4;\r\n  dontInheritTranslation = false;\r\n  dontInheritRotation = false;\r\n  dontInheritScaling = false;\r\n  billboarded = false;\r\n  billboardedX = false;\r\n  billboardedY = false;\r\n  billboardedZ = false;\r\n  dirty = true;\r\n  wasDirty = false;\r\n  parent: SkeletalNode | Node | null = null;\r\n  children: Node[] = [];\r\n  /**\r\n   * The object associated with this node, if there is any.\r\n   */\r\n  object: unknown = null;\r\n\r\n  constructor(pivot: vec3,\r\n    localLocation: vec3, localRotation: quat, localScale: vec3,\r\n    worldLocation: vec3, worldRotation: quat, worldScale: vec3,\r\n    inverseWorldLocation: vec3, inverseWorldRotation: quat, inverseWorldScale: vec3,\r\n    localMatrix: mat4, worldMatrix: mat4) {\r\n    this.pivot = pivot;\r\n    this.localLocation = localLocation;\r\n    this.localRotation = localRotation;\r\n    this.localScale = localScale;\r\n    this.worldLocation = worldLocation;\r\n    this.worldRotation = worldRotation;\r\n    this.worldScale = worldScale;\r\n    this.inverseWorldLocation = inverseWorldLocation;\r\n    this.inverseWorldRotation = inverseWorldRotation;\r\n    this.inverseWorldScale = inverseWorldScale;\r\n    this.localMatrix = localMatrix;\r\n    this.worldMatrix = worldMatrix;\r\n\r\n    this.localRotation[3] = 1;\r\n\r\n    this.localScale.fill(1);\r\n\r\n    this.localMatrix[0] = 1;\r\n    this.localMatrix[5] = 1;\r\n    this.localMatrix[10] = 1;\r\n    this.localMatrix[15] = 1;\r\n  }\r\n\r\n  /**\r\n   * Recalculate this skeletal node.\r\n   */\r\n  recalculateTransformation(instance: ModelInstance): void {\r\n    const scene = <Scene>instance.scene;\r\n    const localMatrix = this.localMatrix;\r\n    const localLocation = this.localLocation;\r\n    const localRotation = this.localRotation;\r\n    const localScale = this.localScale;\r\n    const worldMatrix = this.worldMatrix;\r\n    const worldLocation = this.worldLocation;\r\n    const worldRotation = this.worldRotation;\r\n    const worldScale = this.worldScale;\r\n    const pivot = this.pivot;\r\n    const inverseWorldLocation = this.inverseWorldLocation;\r\n    const inverseWorldRotation = this.inverseWorldRotation;\r\n    const inverseWorldScale = this.inverseWorldScale;\r\n    const parent = <SkeletalNode | Node>this.parent;\r\n    let computedLocation;\r\n    let computedRotation;\r\n    let computedScaling;\r\n\r\n    if (this.dontInheritTranslation) {\r\n      vec3.add(locationHeap, parent.inverseWorldLocation, worldLocation);\r\n\r\n      computedLocation = vec3.add(locationHeap, locationHeap, localLocation);\r\n    } else {\r\n      computedLocation = localLocation;\r\n    }\r\n\r\n    if (this.dontInheritScaling) {\r\n      vec3.mul(locationHeap, parent.inverseWorldScale, instance.worldScale);\r\n\r\n      computedScaling = vec3.mul(locationHeap, locationHeap, localScale);\r\n    } else {\r\n      computedScaling = localScale;\r\n    }\r\n\r\n    if (this.billboarded) {\r\n      computedRotation = rotationHeap;\r\n\r\n      quat.copy(computedRotation, parent.inverseWorldRotation);\r\n      quat.mul(computedRotation, computedRotation, scene.camera.inverseRotation);\r\n\r\n      this.convertBasis(computedRotation);\r\n\r\n      quat.mul(computedRotation, computedRotation, localRotation);\r\n    } else {\r\n      const { billboardedX, billboardedY, billboardedZ } = this;\r\n\r\n      if (billboardedX || billboardedY || billboardedZ) {\r\n        if (billboardedX) {\r\n          if (computedScaling === localScale) {\r\n            computedScaling = scalingHeap;\r\n            vec3.copy(computedScaling, localScale);\r\n          }\r\n\r\n          // (Original comment from Retera's Warsmash)\r\n          // It took me many hours to deduce from playing around that this negative one\r\n          // multiplier should be here. I suggest a lot of testing before you remove it.\r\n          computedScaling[2] *= -1;\r\n        }\r\n\r\n        // Inverse that local rotation\r\n        rotationHeap2[0] = -localRotation[0];\r\n        rotationHeap2[1] = -localRotation[1];\r\n        rotationHeap2[2] = -localRotation[2];\r\n\r\n        quat.mul(rotationHeap2, rotationHeap2, parent.inverseWorldRotation);\r\n\r\n        vec3.transformQuat(cameraRayHeap, scene.camera.billboardedVectors[6], rotationHeap2);\r\n\r\n        if (billboardedX) {\r\n          quat.setAxisAngle(rotationHeap2, VEC3_UNIT_X, Math.atan2(cameraRayHeap[2], cameraRayHeap[1]));\r\n        } else if (billboardedY) {\r\n          quat.setAxisAngle(rotationHeap2, VEC3_UNIT_Y, Math.atan2(-cameraRayHeap[2], cameraRayHeap[0]));\r\n        } else {\r\n          quat.setAxisAngle(rotationHeap2, VEC3_UNIT_Z, Math.atan2(cameraRayHeap[1], cameraRayHeap[0]));\r\n        }\r\n\r\n        computedRotation = rotationHeap;\r\n\r\n        quat.mul(computedRotation, localRotation, rotationHeap2);\r\n      } else {\r\n        computedRotation = localRotation;\r\n      }\r\n    }\r\n\r\n    if (this.dontInheritRotation) {\r\n      quat.mul(rotationHeap2, parent.inverseWorldRotation, instance.worldRotation);\r\n      computedRotation = quat.mul(rotationHeap, rotationHeap2, computedRotation);\r\n    }\r\n\r\n    // Local matrix\r\n    mat4.fromRotationTranslationScaleOrigin(localMatrix, computedRotation, computedLocation, computedScaling, pivot);\r\n\r\n    // World matrix\r\n    mat4.mul(worldMatrix, parent.worldMatrix, localMatrix);\r\n\r\n    // World location\r\n    // vec3.transformMat4(worldLocation, pivot, worldMatrix);\r\n    const x = pivot[0];\r\n    const y = pivot[1];\r\n    const z = pivot[2];\r\n    worldLocation[0] = worldMatrix[0] * x + worldMatrix[4] * y + worldMatrix[8] * z + worldMatrix[12];\r\n    worldLocation[1] = worldMatrix[1] * x + worldMatrix[5] * y + worldMatrix[9] * z + worldMatrix[13];\r\n    worldLocation[2] = worldMatrix[2] * x + worldMatrix[6] * y + worldMatrix[10] * z + worldMatrix[14];\r\n\r\n    // Inverse world location\r\n    inverseWorldLocation[0] = -worldLocation[0];\r\n    inverseWorldLocation[1] = -worldLocation[1];\r\n    inverseWorldLocation[2] = -worldLocation[2];\r\n\r\n    // World rotation\r\n    quat.mul(worldRotation, parent.worldRotation, computedRotation);\r\n\r\n    // Inverse world rotation\r\n    inverseWorldRotation[0] = -worldRotation[0];\r\n    inverseWorldRotation[1] = -worldRotation[1];\r\n    inverseWorldRotation[2] = -worldRotation[2];\r\n    inverseWorldRotation[3] = worldRotation[3];\r\n\r\n    // World scale\r\n    const parentScale = parent.worldScale;\r\n    worldScale[0] = parentScale[0] * computedScaling[0];\r\n    worldScale[1] = parentScale[1] * computedScaling[1];\r\n    worldScale[2] = parentScale[2] * computedScaling[2];\r\n      \r\n    // Inverse world scale\r\n    inverseWorldScale[0] = 1 / worldScale[0];\r\n    inverseWorldScale[1] = 1 / worldScale[1];\r\n    inverseWorldScale[2] = 1 / worldScale[2];\r\n  }\r\n\r\n  /**\r\n   * Allows inherited node classes to run extra transformations when billboarding.\r\n   * \r\n   * This is needed because the different model formats are in different vector spaces.\r\n   */\r\n  convertBasis(_rotation: quat): void {\r\n\r\n  }\r\n}\r\n\r\ninterface SkeletalNodesData {\r\n  data: Float32Array;\r\n  nodes: SkeletalNode[];\r\n  pivots: Float32Array;\r\n  localLocations: Float32Array;\r\n  localRotations: Float32Array;\r\n  localScales: Float32Array;\r\n  worldLocations: Float32Array;\r\n  worldRotations: Float32Array;\r\n  worldScales: Float32Array;\r\n  inverseWorldLocations: Float32Array;\r\n  invereseWorldRotations: Float32Array;\r\n  inverseWorldScales: Float32Array;\r\n  localMatrices: Float32Array;\r\n  worldMatrices: Float32Array;\r\n}\r\n\r\nconst NODE_SHARED_SIZE = 65;\r\n\r\n/**\r\n * Creates an array of skeletal nodes with shared memory.\r\n * \r\n * The returned object contains the node array itself, the backing buffer, and all of the different shared arrays.\r\n */\r\nexport function createSkeletalNodes(count: number, Node = SkeletalNode): SkeletalNodesData {\r\n  const data = new Float32Array(count * NODE_SHARED_SIZE);\r\n  const nodes = [];\r\n  let offset = 0;\r\n  const count3 = count * 3;\r\n  const count4 = count * 4;\r\n  const count16 = count * 16;\r\n\r\n  const pivots = data.subarray(offset, offset + count3);\r\n  offset += count3;\r\n\r\n  const localLocations = data.subarray(offset, offset + count3);\r\n  offset += count3;\r\n\r\n  const localRotations = data.subarray(offset, offset + count4);\r\n  offset += count4;\r\n\r\n  const localScales = data.subarray(offset, offset + count3);\r\n  offset += count3;\r\n\r\n  const worldLocations = data.subarray(offset, offset + count3);\r\n  offset += count3;\r\n\r\n  const worldRotations = data.subarray(offset, offset + count4);\r\n  offset += count4;\r\n\r\n  const worldScales = data.subarray(offset, offset + count3);\r\n  offset += count3;\r\n\r\n  const inverseWorldLocations = data.subarray(offset, offset + count3);\r\n  offset += count3;\r\n\r\n  const invereseWorldRotations = data.subarray(offset, offset + count4);\r\n  offset += count4;\r\n\r\n  const inverseWorldScales = data.subarray(offset, offset + count3);\r\n  offset += count3;\r\n\r\n  const localMatrices = data.subarray(offset, offset + count16);\r\n  offset += count16;\r\n\r\n  const worldMatrices = data.subarray(offset, offset + count16);\r\n\r\n  for (let i = 0; i < count; i++) {\r\n    const i3 = i * 3;\r\n    const i33 = i3 + 3;\r\n    const i4 = i * 4;\r\n    const i44 = i4 + 4;\r\n    const i16 = i * 16;\r\n    const i1616 = i16 + 16;\r\n\r\n    nodes[i] = new Node(\r\n      pivots.subarray(i3, i33),\r\n      localLocations.subarray(i3, i33),\r\n      localRotations.subarray(i4, i44),\r\n      localScales.subarray(i3, i33),\r\n      worldLocations.subarray(i3, i33),\r\n      worldRotations.subarray(i4, i44),\r\n      worldScales.subarray(i3, i33),\r\n      inverseWorldLocations.subarray(i3, i33),\r\n      invereseWorldRotations.subarray(i4, i44),\r\n      inverseWorldScales.subarray(i3, i33),\r\n      localMatrices.subarray(i16, i1616),\r\n      worldMatrices.subarray(i16, i1616),\r\n    );\r\n  }\r\n\r\n  return {\r\n    data,\r\n    nodes,\r\n    pivots,\r\n    localLocations,\r\n    localRotations,\r\n    localScales,\r\n    worldLocations,\r\n    worldRotations,\r\n    worldScales,\r\n    inverseWorldLocations,\r\n    invereseWorldRotations,\r\n    inverseWorldScales,\r\n    localMatrices,\r\n    worldMatrices,\r\n  };\r\n}\r\n","import { quat } from 'gl-matrix';\r\nimport { SkeletalNode } from '../../skeletalnode';\r\n\r\n/**\r\n * An M3 node.\r\n */\r\nexport default class M3Node extends SkeletalNode {\r\n  override convertBasis(rotation: quat): void {\r\n    const halfPI = Math.PI / 2;\r\n\r\n    quat.rotateZ(rotation, rotation, halfPI);\r\n    quat.rotateY(rotation, rotation, -halfPI);\r\n  }\r\n}\r\n","import { AnimationReference } from '../../../parsers/m3/animationreference';\r\nimport { createSkeletalNodes } from '../../skeletalnode';\r\nimport M3Node from './node';\r\nimport M3ModelInstance from './modelinstance';\r\nimport M3Bone from './bone';\r\nimport M3Sts from './sts';\r\nimport M3Stc from './stc';\r\nimport M3Stg from './stg';\r\nimport M3Model from './model';\r\nimport { quat, vec3 } from 'gl-matrix';\r\n\r\n/**\r\n * M3 skeleton.\r\n */\r\nexport default class M3Skeleton {\r\n  nodes: M3Node[];\r\n  worldMatrices: Float32Array;\r\n  instance: M3ModelInstance;\r\n  modelNodes: M3Bone[];\r\n  initialReference: Float32Array[];\r\n  sts: M3Sts[];\r\n  stc: M3Stc[];\r\n  stg: M3Stg[];\r\n  boneLookup: Uint16Array;\r\n\r\n  constructor(instance: M3ModelInstance) {\r\n    const model = <M3Model>instance.model;\r\n    const bones = model.bones;\r\n    const boneLookup = model.boneLookup;\r\n    const sharedNodeData = createSkeletalNodes(bones.length, M3Node);\r\n    const nodes = sharedNodeData.nodes;\r\n\r\n    this.nodes = nodes;\r\n    this.worldMatrices = sharedNodeData.worldMatrices;\r\n    this.instance = instance;\r\n    this.modelNodes = bones;\r\n    this.initialReference = model.initialReference;\r\n    this.sts = model.sts;\r\n    this.stc = model.stc;\r\n    this.stg = model.stg;\r\n    this.boneLookup = boneLookup;\r\n\r\n    // Set the bone parent references\r\n    for (let i = 0, l = bones.length; i < l; i++) {\r\n      const bone = bones[i];\r\n\r\n      if (bone.parent === -1) {\r\n        nodes[i].parent = instance;\r\n      } else {\r\n        nodes[i].parent = nodes[bone.parent];\r\n      }\r\n\r\n      if (bone.billboard1) {\r\n        nodes[i].billboarded = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  update(dt: number): void {\r\n    const instance = this.instance;\r\n    const nodes = this.nodes;\r\n    const modelNodes = this.modelNodes;\r\n\r\n    for (let i = 0, l = nodes.length; i < l; i++) {\r\n      const node = nodes[i];\r\n      const modelNode = modelNodes[i];\r\n\r\n      this.getValue4(<Float32Array>node.localRotation, modelNode.rotation, instance);\r\n      this.getValue3(<Float32Array>node.localLocation, modelNode.location, instance);\r\n      this.getValue3(<Float32Array>node.localScale, modelNode.scale, instance);\r\n\r\n      node.recalculateTransformation(instance);\r\n\r\n      // Recalculate and update child nodes.\r\n      // Note that this only affects normal nodes such as instances, and not skeletal nodes.\r\n      for (const child of node.children) {\r\n        child.recalculateTransformation();\r\n        child.update(dt);\r\n      }\r\n    }\r\n  }\r\n\r\n  getValueUnsafe(animRef: AnimationReference, instance: M3ModelInstance): number | vec3 | quat | Uint8Array | null {\r\n    const sequence = instance.sequence;\r\n\r\n    if (sequence !== -1) {\r\n      return this.stg[sequence].getValueUnsafe(animRef, instance);\r\n    }\r\n\r\n    return animRef.initValue;\r\n  }\r\n\r\n  getValue(animRef: AnimationReference, instance: M3ModelInstance): number {\r\n    return <number>this.getValueUnsafe(animRef, instance);\r\n  }\r\n\r\n  getValue2(out: Float32Array, animRef: AnimationReference, instance: M3ModelInstance): Float32Array {\r\n    const unsafeHeap = <Float32Array>this.getValueUnsafe(animRef, instance);\r\n\r\n    out[0] = unsafeHeap[0];\r\n    out[1] = unsafeHeap[1];\r\n\r\n    return out;\r\n  }\r\n\r\n  getValue3(out: Float32Array, animRef: AnimationReference, instance: M3ModelInstance): Float32Array {\r\n    const unsafeHeap = <Float32Array>this.getValueUnsafe(animRef, instance);\r\n\r\n    out[0] = unsafeHeap[0];\r\n    out[1] = unsafeHeap[1];\r\n    out[2] = unsafeHeap[2];\r\n\r\n    return out;\r\n  }\r\n\r\n  getValue4(out: Float32Array, animRef: AnimationReference, instance: M3ModelInstance): Float32Array {\r\n    const unsafeHeap = <Float32Array>this.getValueUnsafe(animRef, instance);\r\n\r\n    out[0] = unsafeHeap[0];\r\n    out[1] = unsafeHeap[1];\r\n    out[2] = unsafeHeap[2];\r\n    out[3] = unsafeHeap[3];\r\n\r\n    return out;\r\n  }\r\n}\r\n","import { mat4 } from 'gl-matrix';\r\nimport DataTexture from '../../gl/datatexture';\r\nimport Scene from '../../scene';\r\nimport ModelInstance from '../../modelinstance';\r\nimport Texture from '../../texture';\r\nimport M3Model from './model';\r\nimport M3Skeleton from './skeleton';\r\nimport { STANDARD_MATERIAL_OFFSET } from './standardmaterial';\r\nimport { M3HandlerObject } from './handler';\r\nimport M3Node from './node';\r\n\r\nconst boneHeap = mat4.create();\r\n\r\n/**\r\n * An M3 model instance.\r\n */\r\nexport default class M3ModelInstance extends ModelInstance {\r\n  skeleton: M3Skeleton | null = null;\r\n  teamColor = 0;\r\n  vertexColor = new Float32Array([1, 1, 1, 1]);\r\n  sequence = -1;\r\n  frame = 0;\r\n  sequenceLoopMode = 0;\r\n  sequenceEnded = false;\r\n  forced = true;\r\n  boneTexture: DataTexture | null = null;\r\n\r\n  constructor(model: M3Model) {\r\n    super(model);\r\n\r\n    this.skeleton = new M3Skeleton(this);\r\n\r\n    // This takes care of calling setSequence before the model is loaded.\r\n    // In this case, this.sequence will be set, but nothing else is changed.\r\n    // Now that the model is loaded, set it again to do the real work.\r\n    if (this.sequence !== -1) {\r\n      this.setSequence(this.sequence);\r\n    }\r\n\r\n    this.boneTexture = new DataTexture(model.viewer.gl, 3, model.boneLookup.length * 4, 1);\r\n  }\r\n\r\n  /**\r\n   * Override the texture of the layer at the given index in the material at the given index.\r\n   * \r\n   * If a texture isn't given, removes the override if there was one.\r\n   */\r\n  setTexture(material: number, layer: number, texture?: Texture): void {\r\n    this.overrideTexture(material * STANDARD_MATERIAL_OFFSET + layer, texture);\r\n  }\r\n\r\n  updateSkeletonAndBoneTexture(dt: number): void {\r\n    const model = <M3Model>this.model;\r\n    const viewer = model.viewer;\r\n    const buffer = viewer.buffer;\r\n    const boneLookup = model.boneLookup;\r\n    const skeleton = <M3Skeleton>this.skeleton;\r\n    const nodes = skeleton.nodes;\r\n    const bindPose = model.initialReference;\r\n    const count = boneLookup.length;\r\n    const isAnimated = this.sequence !== -1;\r\n    const boneTexture = <DataTexture>this.boneTexture;\r\n\r\n    skeleton.update(dt);\r\n\r\n    // Ensure there is enough memory for all of the instances data.\r\n    buffer.reserve(count * 48);\r\n\r\n    const floatView = <Float32Array>buffer.floatView;\r\n    let finalMatrix;\r\n\r\n    if (isAnimated) {\r\n      finalMatrix = boneHeap;\r\n    } else {\r\n      finalMatrix = this.worldMatrix;\r\n    }\r\n\r\n    for (let i = 0; i < count; i++) {\r\n      const offset = i * 12;\r\n\r\n      if (isAnimated) {\r\n        const bone = boneLookup[i];\r\n\r\n        // Every bone has to be multiplied by its bind pose counterpart for rendering.\r\n        finalMatrix = mat4.mul(boneHeap, nodes[bone].worldMatrix, <mat4>bindPose[bone]);\r\n      }\r\n\r\n      floatView[offset + 0] = finalMatrix[0];\r\n      floatView[offset + 1] = finalMatrix[1];\r\n      floatView[offset + 2] = finalMatrix[2];\r\n      floatView[offset + 3] = finalMatrix[4];\r\n      floatView[offset + 4] = finalMatrix[5];\r\n      floatView[offset + 5] = finalMatrix[6];\r\n      floatView[offset + 6] = finalMatrix[8];\r\n      floatView[offset + 7] = finalMatrix[9];\r\n      floatView[offset + 8] = finalMatrix[10];\r\n      floatView[offset + 9] = finalMatrix[12];\r\n      floatView[offset + 10] = finalMatrix[13];\r\n      floatView[offset + 11] = finalMatrix[14];\r\n    }\r\n\r\n    boneTexture.bindAndUpdate(floatView, boneTexture.width, 1);\r\n  }\r\n\r\n  override renderOpaque(): void {\r\n    const model = <M3Model>this.model;\r\n    const batches = model.batches;\r\n\r\n    if (batches.length) {\r\n      const viewer = model.viewer;\r\n      const m3Cache = <M3HandlerObject>viewer.sharedCache.get('m3');\r\n      const gl = viewer.gl;\r\n      const vertexSize = model.vertexSize;\r\n      const uvSetCount = model.uvSetCount;\r\n      const shader = m3Cache.standardShaders[uvSetCount - 1];\r\n      const attribs = shader.attribs;\r\n      const uniforms = shader.uniforms;\r\n      const scene = <Scene>this.scene;\r\n      const camera = scene.camera;\r\n      const textureOverrides = this.textureOverrides;\r\n      const boneTexture = <DataTexture>this.boneTexture;\r\n\r\n      shader.use();\r\n\r\n      gl.uniform1f(uniforms['u_teamColor'], this.teamColor);\r\n      gl.uniform4fv(uniforms['u_vertexColor'], this.vertexColor);\r\n\r\n      gl.uniformMatrix4fv(uniforms['u_VP'], false, camera.viewProjectionMatrix);\r\n      gl.uniformMatrix4fv(uniforms['u_MV'], false, camera.viewMatrix);\r\n\r\n      gl.uniform3fv(uniforms['u_eyePos'], camera.location);\r\n      gl.uniform3fv(uniforms['u_lightPos'], scene.lightPosition);\r\n\r\n      boneTexture.bind(15);\r\n      gl.uniform1i(uniforms['u_boneMap'], 15);\r\n      gl.uniform1f(uniforms['u_vectorSize'], 1 / boneTexture.width);\r\n      gl.uniform1f(uniforms['u_rowSize'], 1);\r\n\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, model.arrayBuffer);\r\n      gl.vertexAttribPointer(attribs['a_position'], 3, gl.FLOAT, false, vertexSize, 0);\r\n      gl.vertexAttribPointer(attribs['a_weights'], 4, gl.UNSIGNED_BYTE, false, vertexSize, 12);\r\n      gl.vertexAttribPointer(attribs['a_bones'], 4, gl.UNSIGNED_BYTE, false, vertexSize, 16);\r\n      gl.vertexAttribPointer(attribs['a_normal'], 4, gl.UNSIGNED_BYTE, false, vertexSize, 20);\r\n\r\n      for (let i = 0; i < uvSetCount; i++) {\r\n        gl.vertexAttribPointer(attribs[`a_uv${i}`], 2, gl.SHORT, false, vertexSize, 24 + i * 4);\r\n      }\r\n\r\n      gl.vertexAttribPointer(attribs['a_tangent'], 4, gl.UNSIGNED_BYTE, false, vertexSize, 24 + uvSetCount * 4);\r\n\r\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, model.elementBuffer);\r\n\r\n      for (const batch of batches) {\r\n        const material = batch.material;\r\n        const region = batch.region;\r\n\r\n        material.bind(shader, textureOverrides);\r\n\r\n        region.render(shader);\r\n\r\n        material.unbind(shader); // This is required to not use by mistake layers from this material that were bound and are not overwritten by the next material\r\n      }\r\n    }\r\n  }\r\n\r\n  override updateAnimations(dt: number): void {\r\n    const sequenceId = this.sequence;\r\n\r\n    if (sequenceId !== -1) {\r\n      const model = <M3Model>this.model;\r\n      const sequence = model.sequences[sequenceId];\r\n      const interval = sequence.interval;\r\n\r\n      this.frame += dt * 1000;\r\n\r\n      if (this.frame > interval[1]) {\r\n        if ((this.sequenceLoopMode === 0 && !(sequence.flags & 0x1)) || this.sequenceLoopMode === 2) {\r\n          this.frame = interval[0];\r\n        } else {\r\n          this.frame = interval[1];\r\n        }\r\n\r\n        this.sequenceEnded = true;\r\n      } else {\r\n        this.sequenceEnded = false;\r\n      }\r\n    }\r\n\r\n    if (this.forced || sequenceId !== -1) {\r\n      this.forced = false;\r\n\r\n      this.updateSkeletonAndBoneTexture(dt);\r\n    }\r\n  }\r\n\r\n  setTeamColor(id: number): this {\r\n    this.teamColor = id;\r\n\r\n    return this;\r\n  }\r\n\r\n  setVertexColor(color: Uint8Array): this {\r\n    this.vertexColor.set(color);\r\n\r\n    return this;\r\n  }\r\n\r\n  setSequence(id: number): this {\r\n    const model = <M3Model>this.model;\r\n    this.sequence = id;\r\n    this.frame = 0;\r\n\r\n    if (id < -1 || id > model.sequences.length - 1) {\r\n      id = -1;\r\n\r\n      this.sequence = id;\r\n    }\r\n\r\n    // Do a forced update, so non-animated data can be skipped in future updates\r\n    this.forced = true;\r\n\r\n    return this;\r\n  }\r\n\r\n  setSequenceLoopMode(mode: number): this {\r\n    this.sequenceLoopMode = mode;\r\n\r\n    return this;\r\n  }\r\n\r\n  getAttachment(id: number): M3Node | undefined {\r\n    const model = <M3Model>this.model;\r\n    const attachment = model.attachments[id];\r\n\r\n    if (attachment) {\r\n      return (<M3Skeleton>this.skeleton).nodes[attachment.bone];\r\n    }\r\n\r\n    return;\r\n  }\r\n}\r\n","import M3Region from './region';\r\nimport { M3StandardMaterial } from './standardmaterial';\r\n\r\n/**\r\n * An M3 batch.\r\n */\r\nexport default class M3Batch {\r\n  region: M3Region;\r\n  material: M3StandardMaterial;\r\n\r\n  constructor(region: M3Region, material: M3StandardMaterial) {\r\n    this.region = region;\r\n    this.material = material;\r\n  }\r\n}\r\n","const shader = `\r\nuniform sampler2D u_boneMap;\r\nuniform float u_vectorSize;\r\nuniform float u_rowSize;\r\n\r\nmat4 fetchMatrix(float column, float row) {\r\n  column *= u_vectorSize * 4.0;\r\n  row *= u_rowSize;\r\n  // Add in half a texel, to sample in the middle of the texel.\r\n  // Otherwise, since the sample is directly on the boundary, floating point errors can cause the sample to get the wrong pixel.\r\n  // This is most noticeable with NPOT textures, which the bone maps are.\r\n  column += 0.5 * u_vectorSize;\r\n  row += 0.5 * u_rowSize;\r\n\r\n  return mat4(texture2D(u_boneMap, vec2(column, row)),\r\n              texture2D(u_boneMap, vec2(column + u_vectorSize, row)),\r\n              texture2D(u_boneMap, vec2(column + u_vectorSize * 2.0, row)),\r\n              texture2D(u_boneMap, vec2(column + u_vectorSize * 3.0, row)));\r\n}\r\n`;\r\n\r\nexport default shader;\r\n","import boneTexture from '../../shaders/bonetexture.glsl';\r\n\r\nconst shader = `\r\nuniform mat4 u_VP;\r\nuniform mat4 u_MV;\r\nuniform vec3 u_eyePos;\r\nuniform vec3 u_lightPos;\r\nuniform float u_firstBoneLookupIndex;\r\nuniform float u_boneWeightPairsCount;\r\nuniform vec3 u_teamColors[14];\r\nuniform float u_teamColor;\r\nuniform vec4 u_vertexColor;\r\n\r\nattribute vec3 a_position;\r\nattribute vec4 a_normal;\r\nattribute vec2 a_uv0;\r\n\r\n#ifdef EXPLICITUV1\r\nattribute vec2 a_uv1;\r\n#endif\r\n#ifdef EXPLICITUV2\r\nattribute vec2 a_uv1, a_uv2;\r\n#endif\r\n#ifdef EXPLICITUV3\r\nattribute vec2 a_uv1, a_uv2, a_uv3;\r\n#endif\r\n\r\nattribute vec4 a_tangent;\r\nattribute vec4 a_bones;\r\nattribute vec4 a_weights;\r\n\r\nvarying vec3 v_normal;\r\nvarying vec4 v_uv[2]; // Pack 4 vec2 in 2 vec4, to reduce the varyings count\r\nvarying vec3 v_lightDir;\r\n// varying vec3 v_eyeVec;\r\nvarying vec3 v_halfVec;\r\nvarying vec3 v_teamColor;\r\nvarying vec4 v_vertexColor;\r\n\r\n${boneTexture}\r\n\r\nvec3 TBN(vec3 vector, vec3 tangent, vec3 binormal, vec3 normal) {\r\n  return vec3(dot(vector, tangent), dot(vector, binormal), dot(vector, normal));\r\n}\r\n\r\nvec4 decodeVector(vec4 v) {\r\n  return ((v / 255.0) * 2.0) - 1.0;\r\n}\r\n\r\nvoid transform(inout vec3 position, inout vec3 normal, inout vec3 tangent, inout vec3 binormal, vec4 bones, vec4 weights) {\r\n  if (u_boneWeightPairsCount > 0.0) {\r\n    mat4 bone;\r\n\r\n    if (u_boneWeightPairsCount == 1.0) {\r\n      bone = fetchMatrix(bones[0], 0.0);\r\n    } else {\r\n      bone += fetchMatrix(bones[0], 0.0) * weights[0];\r\n      bone += fetchMatrix(bones[1], 0.0) * weights[1];\r\n      bone += fetchMatrix(bones[2], 0.0) * weights[2];\r\n      bone += fetchMatrix(bones[3], 0.0) * weights[3];\r\n    }\r\n\r\n    position = vec3(bone * vec4(position, 1.0));\r\n    normal = mat3(bone) * normal;\r\n    tangent = vec3(bone * vec4(tangent, 0.0));\r\n    binormal = vec3(bone * vec4(binormal, 0.0));\r\n  }\r\n}\r\n\r\nvoid main() {\r\n  vec4 decodedNormal = decodeVector(a_normal);\r\n\r\n  vec3 position = a_position;\r\n  vec3 normal = decodedNormal.xyz;\r\n  vec3 tangent = vec3(decodeVector(a_tangent));\r\n  vec3 binormal = cross(normal, tangent) * decodedNormal.w;\r\n\r\n  transform(position, normal, tangent, binormal, a_bones + u_firstBoneLookupIndex, a_weights / 255.0);\r\n\r\n  vec3 position_mv = vec3(u_MV * vec4(position, 1));\r\n\r\n  mat3 mv = mat3(u_MV);\r\n  vec3 t = normalize(mv * tangent);\r\n  vec3 b = normalize(mv * binormal);\r\n  vec3 n = normalize(mv * normal);\r\n\r\n  vec3 lightDir = normalize(u_lightPos - position_mv);\r\n\r\n  v_lightDir = normalize(TBN(lightDir, t, b, n));\r\n\r\n  vec3 eyeVec = normalize(u_eyePos - position_mv);\r\n  vec3 halfVec = normalize(eyeVec - u_lightPos);\r\n\r\n  // v_eyeVec = TBN(eyeVec, t, b, n);\r\n  v_halfVec = TBN(halfVec, t, b, n);\r\n\r\n  v_normal = n;\r\n\r\n  vec4 uv0, uv1;\r\n\r\n  uv0.xy = a_uv0 / 2048.0;\r\n\r\n  #ifdef EXPLICITUV1\r\n  uv0.zw = a_uv1 / 2048.0;\r\n  #endif\r\n\r\n  #ifdef EXPLICITUV2\r\n  uv0.zw = a_uv1 / 2048.0;\r\n  uv1.xy = a_uv2 / 2048.0;\r\n  #endif\r\n\r\n  #ifdef EXPLICITUV3\r\n  uv0.zw = a_uv1 / 2048.0;\r\n  uv1.xy = a_uv2 / 2048.0;\r\n  uv1.zw = a_uv3 / 2048.0;\r\n  #endif\r\n\r\n  v_uv[0] = uv0;\r\n  v_uv[1] = uv1;\r\n\r\n  v_teamColor = u_teamColors[int(u_teamColor)];\r\n  v_vertexColor = u_vertexColor;\r\n\r\n  gl_Position = u_VP * vec4(position, 1.0);\r\n}\r\n`;\r\n\r\nexport default shader;\r\n","// Used by all fragment shaders.\r\nconst shader = `\r\n#ifdef GL_FRAGMENT_PRECISION_HIGH\r\nprecision highp float;\r\n#else\r\nprecision mediump float;\r\n#endif\r\n`;\r\n\r\nexport default shader;\r\n","import precision from '../../shaders/precision.glsl';\r\nimport layers from './layers.glsl';\r\n\r\nconst shader = `\r\n${precision}\r\n\r\n${layers}\r\n\r\nvoid main() {\r\n  vec3 color;\r\n  vec4 final = u_lightAmbient;\r\n  vec3 normal;\r\n  vec3 lightMapDiffuse;\r\n\r\n  if (u_normalLayerSettings.enabled) {\r\n    normal = decodeNormal(u_normalMap);\r\n  } else {\r\n    normal = v_normal;\r\n  }\r\n\r\n  float lambertFactor = max(dot(normal, v_lightDir), 0.0);\r\n\r\n  if (lambertFactor > 0.0) {\r\n    if (u_diffuseLayerSettings.enabled) {\r\n      vec4 diffuseColor = computeLayerColor(u_diffuseMap, u_diffuseLayerSettings);\r\n\r\n      color = combineLayerColor(diffuseColor, color, u_diffuseLayerSettings);\r\n    }\r\n\r\n    if (u_decalLayerSettings.enabled) {\r\n      vec4 decalColor = computeLayerColor(u_decalMap, u_decalLayerSettings);\r\n\r\n      color = combineLayerColor(decalColor, color, u_decalLayerSettings);\r\n    }\r\n\r\n    vec4 specularColor = computeSpecular(u_specularMap, u_specularLayerSettings, u_specularity, u_specMult, normal);\r\n\r\n    if (u_lightMapLayerSettings.enabled) {\r\n      vec4 lightMapColor = computeLayerColor(u_lightMapMap, u_lightMapLayerSettings) * 2.0;\r\n\r\n      lightMapDiffuse = lightMapColor.rgb;\r\n    }\r\n\r\n    // final.rgb = color * lightMapDiffuse + specularColor.rgb;\r\n    final.rgb = (color + specularColor.rgb) * lambertFactor;\r\n\r\n    bool addEmissive = false;\r\n    vec3 emissiveColor;\r\n    vec4 tempColor;\r\n\r\n    if (u_emissiveLayerSettings.enabled) {\r\n      tempColor = computeLayerColor(u_emissiveMap, u_emissiveLayerSettings);\r\n\r\n      if (u_emissiveLayerSettings.op == LAYEROP_MOD || u_emissiveLayerSettings.op == LAYEROP_MOD2X || u_emissiveLayerSettings.op == LAYEROP_LERP) {\r\n        final.rgb = combineLayerColor(tempColor, final.rgb, u_emissiveLayerSettings);\r\n      } else {\r\n        emissiveColor = combineLayerColor(tempColor, emissiveColor, u_emissiveLayerSettings);\r\n        addEmissive = true;\r\n      }\r\n    }\r\n\r\n    if (u_emissive2LayerSettings.enabled) {\r\n      tempColor = computeLayerColor(u_emissive2Map, u_emissive2LayerSettings);\r\n\r\n      if (!addEmissive && (u_emissive2LayerSettings.op == LAYEROP_MOD || u_emissive2LayerSettings.op == LAYEROP_MOD2X || u_emissive2LayerSettings.op == LAYEROP_LERP)) {\r\n        final.rgb = combineLayerColor(tempColor, final.rgb, u_emissive2LayerSettings);\r\n      } else {\r\n        emissiveColor = combineLayerColor(tempColor, emissiveColor, u_emissive2LayerSettings);\r\n        addEmissive = true;\r\n      }\r\n    }\r\n\r\n    if (addEmissive) {\r\n      final.rgb += emissiveColor * u_emisMult;\r\n    }\r\n  }\r\n\r\n  gl_FragColor = final * v_vertexColor;\r\n}\r\n`;\r\n\r\nexport default shader;\r\n","import Parser from '../../../parsers/m3/model';\r\nimport isM3 from '../../../parsers/m3/isformat';\r\nimport ModelViewer from '../../viewer';\r\nimport Shader from '../../gl/shader';\r\nimport Model from './model';\r\nimport standardVert from './shaders/standard.vert';\r\nimport standardFrag from './shaders/standard.frag';\r\n\r\nexport interface M3HandlerObject {\r\n  standardShaders: Shader[];\r\n}\r\n\r\nexport default {\r\n  load(viewer: ModelViewer): void {\r\n    const gl = viewer.gl;\r\n    const webgl = viewer.webgl;\r\n    const teamColors = [[255, 3, 3], [0, 66, 255], [28, 230, 185], [84, 0, 129], [255, 252, 1], [254, 138, 14], [32, 192, 0], [229, 91, 176], [149, 150, 151], [126, 191, 241], [16, 98, 70], [78, 42, 4], [40, 40, 40], [0, 0, 0]];\r\n\r\n    // Bone textures.\r\n    if (!webgl.ensureExtension('OES_texture_float')) {\r\n      throw new Error('M3: No float texture support!');\r\n    }\r\n\r\n    const standardShaders = <Shader[]>[];\r\n\r\n    // Load shaders for 1-4 texture coordinate models.\r\n    for (let i = 0; i < 4; i++) {\r\n      const shader = webgl.createShader(`#define EXPLICITUV${i}\\n${standardVert}`, standardFrag);\r\n\r\n      // Bind the shader and set the team color uniforms.\r\n      shader.use();\r\n\r\n      for (let i = 0; i < 14; i++) {\r\n        const color = teamColors[i];\r\n\r\n        gl.uniform3f(shader.uniforms['u_teamColors[' + i + ']'], color[0] / 255, color[1] / 255, color[2] / 255);\r\n      }\r\n\r\n      standardShaders[i] = shader;\r\n    }\r\n\r\n    const handlerData: M3HandlerObject = { standardShaders };\r\n\r\n    viewer.sharedCache.set('m3', handlerData);\r\n  },\r\n  isValidSource(object: unknown): boolean {\r\n    if (object instanceof Parser) {\r\n      return true;\r\n    }\r\n\r\n    return isM3(object);\r\n  },\r\n  resource: Model,\r\n};\r\n","import Parser from '../../../parsers/m3/model';\r\nimport M3ParserModel from '../../../parsers/m3/modelheader';\r\nimport M3ParserDivision from '../../../parsers/m3/division';\r\nimport StandardMaterial from '../../../parsers/m3/standardmaterial';\r\nimport Sequence from '../../../parsers/m3/sequence';\r\nimport Region from '../../../parsers/m3/region';\r\nimport Bone from '../../../parsers/m3/bone';\r\nimport Stc from '../../../parsers/m3/stc';\r\nimport Sts from '../../../parsers/m3/sts';\r\nimport Stg from '../../../parsers/m3/stg';\r\nimport AttachmentPoint from '../../../parsers/m3/attachmentpoint';\r\nimport Camera from '../../../parsers/m3/camera';\r\nimport Model from '../../model';\r\nimport { M3StandardMaterial } from './standardmaterial';\r\nimport M3Bone from './bone';\r\nimport M3Sequence from './sequence';\r\nimport M3Sts from './sts';\r\nimport M3Stc from './stc';\r\nimport M3Stg from './stg';\r\nimport M3AttachmentPoint from './attachment';\r\nimport M3Camera from './camera';\r\nimport M3Region from './region';\r\nimport M3ModelInstance from './modelinstance';\r\nimport M3Batch from './batch';\r\nimport { HandlerResourceData } from '../../handlerresource';\r\nimport Division from '../../../parsers/m3/division';\r\nimport Batch from '../../../parsers/m3/batch';\r\nimport MaterialReference from '../../../parsers/m3/materialreference';\r\n\r\n/**\r\n * An M3 model.\r\n */\r\nexport default class M3Model extends Model {\r\n  name = '';\r\n  batches: M3Batch[] = [];\r\n  materials: [unknown[], M3StandardMaterial[]] = [[], []]; // 2D array for the possibility of adding more material types in the future\r\n  materialMaps: MaterialReference[] = [];\r\n  bones: M3Bone[] = [];\r\n  boneLookup: Uint16Array;\r\n  sequences: M3Sequence[] = [];\r\n  sts: M3Sts[] = [];\r\n  stc: M3Stc[] = [];\r\n  stg: M3Stg[] = [];\r\n  attachments: M3AttachmentPoint[] = [];\r\n  cameras: M3Camera[] = [];\r\n  regions: M3Region[] = [];\r\n  initialReference: Float32Array[] = [];\r\n  elementBuffer: WebGLBuffer | null = null;\r\n  arrayBuffer: WebGLBuffer | null = null;\r\n  vertexSize = 0;\r\n  uvSetCount = 0;\r\n\r\n  constructor(bufferOrParser: ArrayBuffer | Parser, resourceData: HandlerResourceData) {\r\n    super(resourceData);\r\n\r\n    let parser;\r\n\r\n    if (bufferOrParser instanceof Parser) {\r\n      parser = bufferOrParser;\r\n    } else {\r\n      parser = new Parser();\r\n\r\n      parser.load(bufferOrParser);\r\n    }\r\n\r\n    const model = <M3ParserModel>parser.model;\r\n    const div = <Division>model.divisions.first();\r\n\r\n    this.name = <string>model.modelName.get();\r\n\r\n    this.setupGeometry(model, div);\r\n\r\n    const materialMaps = <MaterialReference[]>model.materialReferences.get();\r\n\r\n    this.materialMaps = materialMaps;\r\n\r\n    // Create concrete material objects for standard materials\r\n\r\n    const standardMaterials = <StandardMaterial[]>model.materials[0].get();\r\n\r\n    for (let i = 0, l = standardMaterials.length; i < l; i++) {\r\n      this.materials[1].push(new M3StandardMaterial(this, i, standardMaterials[i]));\r\n    }\r\n\r\n    // Create concrete batch objects\r\n    for (const batch of <Batch[]>div.batches.get()) {\r\n      const regionId = batch.regionIndex;\r\n      const materialMap = materialMaps[batch.materialReferenceIndex];\r\n\r\n      if (materialMap.materialType === 1) {\r\n        this.batches.push(new M3Batch(this.regions[regionId], this.materials[1][materialMap.materialIndex]));\r\n      }\r\n    }\r\n\r\n    /*\r\n    var batchGroups = [[], [], [], [], [], []];\r\n\r\n    for (i = 0, l = batches.length; i < l; i++) {\r\n    var blendMode = batches[i].material.blendMode;\r\n\r\n    batchGroups[blendMode].push(batches[i]);\r\n    }\r\n\r\n    function sortByPriority(a, b) {\r\n    var a = a.material.priority;\r\n    var b = b.material.priority;\r\n\r\n    if (a < b) {\r\n    return 1;\r\n    } else if (a == b) {\r\n    return 0;\r\n    } else {\r\n    return -1;\r\n    }\r\n    }\r\n\r\n    for (i = 0; i < 6; i++) {\r\n    batchGroups[i].sort(sortByPriority);\r\n    }\r\n    */\r\n    /*\r\n    // In the EggPortrait model the batches seem to be sorted by blend mode. Is this true for every model?\r\n    this.batches.sort(function (a, b) {\r\n    var ba = a.material.blendMode;\r\n    var bb = b.material.blendMode;\r\n\r\n    if (ba < bb) {\r\n    return -1;\r\n    } else if (ba == bb) {\r\n    return 0;\r\n    } else {\r\n    return 1;\r\n    }\r\n    });\r\n    */\r\n\r\n    // this.batches = batchGroups[0].concat(batchGroups[1]).concat(batchGroups[2]).concat(batchGroups[3]).concat(batchGroups[4]).concat(batchGroups[5]);\r\n\r\n    this.initialReference = <Float32Array[]>model.absoluteInverseBoneRestPositions.get();\r\n\r\n    for (const bone of <Bone[]>model.bones.get()) {\r\n      this.bones.push(new M3Bone(bone));\r\n    }\r\n\r\n    this.boneLookup = <Uint16Array>model.boneLookup.get();\r\n\r\n    const sequences = model.sequences.get();\r\n    if (sequences) {\r\n      for (const sequence of <Sequence[]>sequences) {\r\n        this.sequences.push(new M3Sequence(sequence));\r\n      }\r\n    }\r\n\r\n    const stss = model.sts.get();\r\n    if (stss) {\r\n      for (const sts of <Sts[]>stss) {\r\n        this.sts.push(new M3Sts(sts));\r\n      }\r\n    }\r\n\r\n    const stcs = model.stc.get();\r\n    if (stcs) {\r\n      for (const stc of <Stc[]>stcs) {\r\n        this.stc.push(new M3Stc(stc));\r\n      }\r\n    }\r\n\r\n    const stgs = model.stg.get();\r\n    if (stgs) {\r\n      for (const stg of <Stg[]>stgs) {\r\n        this.stg.push(new M3Stg(stg, this.sts, this.stc));\r\n      }\r\n    }\r\n\r\n    this.addGlobalAnims();\r\n\r\n    /*\r\n    if (parser.fuzzyHitTestObjects.length > 0) {\r\n        for (i = 0, l = parser.fuzzyHitTestObjects.length; i < l; i++) {\r\n            this.boundingShapes[i] = new M3BoundingShape(parser.fuzzyHitTestObjects[i], parser.bones, gl);\r\n        }\r\n    }\r\n    */\r\n    /*\r\n    if (parser.particleEmitters.length > 0) {\r\n    this.particleEmitters = [];\r\n \r\n    for (i = 0, l = parser.particleEmitters.length; i < l; i++) {\r\n    this.particleEmitters[i] = new M3ParticleEmitter(parser.particleEmitters[i], this);\r\n    }\r\n    }\r\n    */\r\n\r\n    const attachmentPoints = model.attachmentPoints.get();\r\n    if (attachmentPoints) {\r\n      for (const attachment of <AttachmentPoint[]>attachmentPoints) {\r\n        this.attachments.push(new M3AttachmentPoint(attachment));\r\n      }\r\n    }\r\n\r\n    const cameras = model.cameras.get();\r\n    if (cameras) {\r\n      for (const camera of <Camera[]>cameras) {\r\n        this.cameras.push(new M3Camera(camera));\r\n      }\r\n    }\r\n  }\r\n\r\n  addInstance(): M3ModelInstance {\r\n    return new M3ModelInstance(this);\r\n  }\r\n\r\n  setupGeometry(parser: M3ParserModel, div: M3ParserDivision): void {\r\n    const gl = this.viewer.gl;\r\n    let uvSetCount = 1;\r\n    const vertexFlags = parser.vertexFlags;\r\n\r\n    if (vertexFlags & 0x40000) {\r\n      uvSetCount = 2;\r\n    } else if (vertexFlags & 0x80000) {\r\n      uvSetCount = 3;\r\n    } else if (vertexFlags & 0x100000) {\r\n      uvSetCount = 4;\r\n    }\r\n\r\n    const regions = <Region[]>div.regions.get();\r\n    let totalElements = 0;\r\n    const offsets = [];\r\n\r\n    for (let i = 0, l = regions.length; i < l; i++) {\r\n      offsets[i] = totalElements;\r\n      totalElements += regions[i].triangleIndicesCount;\r\n    }\r\n\r\n    const elementArray = new Uint16Array(totalElements);\r\n\r\n    const triangles = <Uint16Array>div.triangles.get();\r\n\r\n    for (let i = 0, l = regions.length; i < l; i++) {\r\n      this.regions.push(new M3Region(this, regions[i], triangles, elementArray, offsets[i]));\r\n    }\r\n\r\n    const vertices = <Uint8Array>parser.vertices.get();\r\n\r\n    this.elementBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.elementBuffer);\r\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, elementArray, gl.STATIC_DRAW);\r\n\r\n    const arrayBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, arrayBuffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\r\n\r\n    this.arrayBuffer = arrayBuffer;\r\n    this.vertexSize = (7 + uvSetCount) * 4;\r\n    this.uvSetCount = uvSetCount;\r\n  }\r\n\r\n  mapMaterial(index: number): M3StandardMaterial {\r\n    const materialMap = this.materialMaps[index];\r\n\r\n    // return this.materials[materialMap.materialType][materialMap.materialIndex];\r\n    return this.materials[1][materialMap.materialIndex];\r\n  }\r\n\r\n  addGlobalAnims(): void {\r\n    /*\r\n    var i, l;\r\n    var glbirth, glstand, gldeath;\r\n    var stgs = this.stg;\r\n    var stg, name;\r\n \r\n    for (i = 0, l = stgs.length; i < l; i++) {\r\n    stg = stgs[i];\r\n    name = stg.name.toLowerCase(); // Because obviously there will be a wrong case in some model...\r\n \r\n    if (name === 'glbirth') {\r\n    glbirth = stg;\r\n    } else if (name === 'glstand') {\r\n    glstand = stg;\r\n    } else if (name === 'gldeath') {\r\n    gldeath = stg;\r\n    }\r\n    }\r\n \r\n    for (i = 0, l = stgs.length; i < l; i++) {\r\n    stg = stgs[i];\r\n    name = stg.name.toLowerCase(); // Because obviously there will be a wrong case in some model...\r\n \r\n    if (name !== 'glbirth' && name !== 'glstand' && name !== 'gldeath') {\r\n    if (name.indexOf('birth') !== -1 && glbirth) {\r\n    stg.stcIndices = stg.stcIndices.concat(glbirth.stcIndices);\r\n    } else  if (name.indexOf('death') !== -1 && gldeath) {\r\n    stg.stcIndices = stg.stcIndices.concat(gldeath.stcIndices);\r\n    } else if (glstand) {\r\n    stg.stcIndices = stg.stcIndices.concat(glstand.stcIndices);\r\n    }\r\n    }\r\n    }\r\n    */\r\n  }\r\n\r\n  // getValue(animRef: M3ParserAnimationReference, sequence: number, frame: number) {\r\n  //   if (sequence !== -1) {\r\n  //     return this.stg[sequence].getValue(animRef, frame);\r\n  //   } else {\r\n  //     return animRef.initValue;\r\n  //   }\r\n  // }\r\n}\r\n","let audioContext: OfflineAudioContext;\r\n\r\n// Some browsers don't have OfflineAudioContext or AudioContext.\r\nif (typeof OfflineAudioContext === 'function') {\r\n  audioContext = new OfflineAudioContext(1, 1, 48000);\r\n}\r\n\r\n/**\r\n * A context-less decodeAudioData().\r\n */\r\nexport async function decodeAudioData(buffer: ArrayBuffer): Promise<AudioBuffer | undefined> {\r\n  if (audioContext) {\r\n    return audioContext.decodeAudioData(buffer);\r\n  }\r\n\r\n  return;\r\n}\r\n","import SlkFile from '../parsers/slk/file';\r\nimport { IniFile } from '../parsers/ini/file';\r\n\r\n/**\r\n * A MappedData row.\r\n */\r\nexport class MappedDataRow {\r\n  map: {[key: string]: string } = {};\r\n\r\n  set(key: string, value: string | number): void {\r\n    if (typeof value !== 'string') {\r\n      value = value.toString();\r\n    }\r\n\r\n    this.map[key.toLowerCase()] = value;\r\n  }\r\n\r\n  string(key: string): string | undefined {\r\n    return this.map[key.toLowerCase()];\r\n  }\r\n\r\n  number(key: string): number {\r\n    const string = this.string(key);\r\n\r\n    if (!string) {\r\n      return 0;\r\n    }\r\n    \r\n    return parseFloat(string);\r\n  }\r\n}\r\n\r\n/**\r\n * A structure that holds mapped data from INI and SLK files.\r\n * \r\n * In the case of SLK files, the first row is expected to hold the names of the columns.\r\n */\r\nexport class MappedData {\r\n  map: {[key: string]: MappedDataRow } = {};\r\n\r\n  constructor(buffer?: string) {\r\n    if (buffer) {\r\n      this.load(buffer);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Load data from an SLK file or an INI file.\r\n   * \r\n   * Note that this may override previous properties!\r\n   */\r\n  load(buffer: string): void {\r\n    if (buffer.startsWith('ID;')) {\r\n      const file = new SlkFile();\r\n      file.load(buffer);\r\n\r\n      const rows = file.rows;\r\n      const header = rows[0];\r\n      const map = this.map;\r\n\r\n      for (let i = 1, l = rows.length; i < l; i++) {\r\n        const row = rows[i];\r\n\r\n        // DialogueDemonBase.slk has an empty row.\r\n        if (row) {\r\n          const name = row[0];\r\n\r\n          // DialogueDemonBase.slk also has rows containing only a single underline.\r\n          if (name && name !== '_') {\r\n            if (!map[name]) {\r\n              map[name] = new MappedDataRow();\r\n            }\r\n\r\n            const mapped = map[name];\r\n\r\n            for (let j = 0, k = header.length; j < k; j++) {\r\n              let key = header[j];\r\n\r\n              // UnitBalance.slk doesn't define the name of one column.\r\n              if (key === undefined) {\r\n                key = `column${j}`;\r\n              }\r\n\r\n              mapped.map[key.toLowerCase()] = row[j];\r\n            }\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      const file = new IniFile();\r\n      file.load(buffer);\r\n\r\n      const sections = file.sections;\r\n      const map = this.map;\r\n\r\n      for (const [row, properties] of sections.entries()) {\r\n        if (!map[row]) {\r\n          map[row] = new MappedDataRow();\r\n        }\r\n\r\n        const mapped = map[row];\r\n\r\n        for (const [name, property] of properties) {\r\n          mapped.map[name.toLowerCase()] = property;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getRow(key: string): MappedDataRow | undefined {\r\n    return this.map[key];\r\n  }\r\n\r\n  getProperty(key: string, name: string): string {\r\n    return this.map[key].map[name];\r\n  }\r\n\r\n  setRow(key: string, values: MappedDataRow): void {\r\n    this.map[key] = values;\r\n  }\r\n\r\n  findRow(key: string, expectedValue: string): MappedDataRow | undefined {\r\n    for (const row of Object.values(this.map)) {\r\n      if (row.string(key) === expectedValue) {\r\n        return row;\r\n      }\r\n    }\r\n\r\n    return;\r\n  }\r\n}\r\n","import MdlxSequence from '../../../parsers/mdlx/sequence';\r\nimport Bounds from '../../bounds';\r\n\r\n/**\r\n * An MDX sequence.\r\n */\r\nexport default class Sequence {\r\n  name: string;\r\n  interval: Uint32Array;\r\n  nonLooping: number;\r\n  rarity: number;\r\n  bounds: Bounds;\r\n\r\n  constructor(sequence: MdlxSequence) {\r\n    this.name = sequence.name;\r\n    this.interval = sequence.interval;\r\n    this.nonLooping = sequence.nonLooping;\r\n    this.rarity = sequence.rarity;\r\n    this.bounds = new Bounds();\r\n\r\n    const extent = sequence.extent;\r\n    this.bounds.fromExtents(extent.min, extent.max);\r\n  }\r\n}\r\n","import { vec3, quat } from 'gl-matrix';\r\nimport { lerp, hermite, bezier } from '../../../common/math';\r\nimport { Animation, UintAnimation, FloatAnimation, Vector3Animation, InterpolationType } from '../../../parsers/mdlx/animations';\r\nimport MdxModel from './model';\r\n\r\n/**\r\n * Animated data for a specific sequence.\r\n */\r\nclass SdSequence {\r\n  sd: Sd;\r\n  start: number;\r\n  end: number;\r\n  frames: number[] = [];\r\n  values: (Uint32Array | Float32Array)[] = [];\r\n  inTans: (Uint32Array | Float32Array)[] = [];\r\n  outTans: (Uint32Array | Float32Array)[] = [];\r\n  constant = false;\r\n\r\n  constructor(sd: Sd, start: number, end: number, animation: Animation, isGlobal: boolean) {\r\n    this.sd = sd;\r\n    this.start = start;\r\n    this.end = end;\r\n\r\n    const interpolationType = sd.interpolationType;\r\n    const frames = animation.frames;\r\n    const values = animation.values;\r\n    const inTans = animation.inTans;\r\n    const outTans = animation.outTans;\r\n    const defval = sd.defval;\r\n\r\n    // When using a global sequence, where the first key is outside of the sequence's length, it becomes its constant value.\r\n    // When having one key in the sequence's range, and one key outside of it, results seem to be non-deterministic.\r\n    // Sometimes the second key is used too, sometimes not.\r\n    // It also differs depending where the model is viewed - the WE previewer, the WE itself, or the game.\r\n    // All three show different results, none of them make sense.\r\n    // Therefore, only handle the case where the first key is outside.\r\n    // This fixes problems spread over many models, e.g. HeroMountainKing (compare in WE and in Magos).\r\n    if (isGlobal && frames[0] > end) {\r\n      this.frames[0] = frames[0];\r\n      this.values[0] = values[0];\r\n    }\r\n\r\n    // Go over the keyframes, and add all of the ones that are in this sequence (start <= frame <= end).\r\n    for (let i = 0, l = frames.length; i < l; i++) {\r\n      const frame = frames[i];\r\n\r\n      if (frame >= start && frame <= end) {\r\n        this.frames.push(frame);\r\n        this.values.push(values[i]);\r\n\r\n        if (interpolationType > 1) {\r\n          this.inTans.push(inTans[i]);\r\n          this.outTans.push(outTans[i]);\r\n        }\r\n      }\r\n    }\r\n\r\n    const tracksCount = this.frames.length;\r\n\r\n    if (tracksCount === 0) {\r\n      // If there are no keys, use the default value directly.\r\n      this.constant = true;\r\n\r\n      this.frames[0] = start;\r\n      this.values[0] = defval;\r\n    } else if (tracksCount === 1) {\r\n      // If there's only one key, use it directly.\r\n      this.constant = true;\r\n    } else {\r\n      const firstValue = this.values[0];\r\n\r\n      // If all of the values in this sequence are the same, might as well make it constant.\r\n      this.constant = this.values.every((value) => firstValue.every((element: number, index: number) => element === value[index]));\r\n    }\r\n  }\r\n\r\n  getValue(out: Uint32Array | Float32Array, frame: number): number {\r\n    const frames = this.frames;\r\n    const length = frames.length;\r\n\r\n    // Fixed implementation copied directly from Retera's code. Thank you!\r\n    if (this.constant || frame < this.start) {\r\n      this.sd.copy(out, this.values[0]);\r\n\r\n      return -1;\r\n    } else {\r\n      let startFrameIndex = -1;\r\n      let endFrameIndex = -1;\r\n      const lengthLessOne = length - 1;\r\n\r\n      if ((frame < this.frames[0]) || (frame >= this.frames[lengthLessOne])) {\r\n        startFrameIndex = lengthLessOne;\r\n        endFrameIndex = 0;\r\n      } else {\r\n        for (let i = 1; i < length; i++) {\r\n          if (this.frames[i] > frame) {\r\n            startFrameIndex = i - 1;\r\n            endFrameIndex = i;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      let startFrame = this.frames[startFrameIndex];\r\n      const endFrame = this.frames[endFrameIndex];\r\n      let timeBetweenFrames = endFrame - startFrame;\r\n\r\n      if (timeBetweenFrames < 0) {\r\n        timeBetweenFrames += (this.end - this.start);\r\n\r\n        if (frame < startFrame) {\r\n          startFrame = endFrame;\r\n        }\r\n      }\r\n\r\n      const t = ((timeBetweenFrames) == 0 ? 0 : ((frame - startFrame) / timeBetweenFrames));\r\n      this.sd.interpolate(out, this.values, this.inTans, this.outTans, startFrameIndex, endFrameIndex, t);\r\n\r\n      return startFrameIndex;\r\n    }\r\n  }\r\n}\r\n\r\nconst forcedInterpMap = {\r\n  KLAV: InterpolationType.DontInterp,\r\n  KATV: InterpolationType.DontInterp,\r\n  KPEV: InterpolationType.DontInterp,\r\n  KP2V: InterpolationType.DontInterp,\r\n  KRVS: InterpolationType.DontInterp,\r\n};\r\n\r\nconst floatDefval = new Float32Array(1);\r\nconst uintDefval = new Uint32Array(1);\r\nconst visibilityDefval = new Float32Array([1]);\r\nconst translationDefval = vec3.create();\r\nconst rotationDefval = quat.create();\r\nconst scaleDefval = vec3.fromValues(1, 1, 1);\r\nconst alphaDefval = visibilityDefval;\r\nconst colorDefval = translationDefval;\r\n\r\nconst defVals = {\r\n  // LAYS\r\n  KMTF: floatDefval,\r\n  KMTA: alphaDefval,\r\n  // TXAN\r\n  KTAT: translationDefval,\r\n  KTAR: rotationDefval,\r\n  KTAS: scaleDefval,\r\n  // GEOA\r\n  KGAO: alphaDefval,\r\n  KGAC: colorDefval,\r\n  // LITE\r\n  KLAS: floatDefval,\r\n  KLAE: floatDefval,\r\n  KLAC: colorDefval,\r\n  KLAI: floatDefval,\r\n  KLBI: floatDefval,\r\n  KLBC: colorDefval,\r\n  KLAV: visibilityDefval,\r\n  // ATCH\r\n  KATV: visibilityDefval,\r\n  // PREM\r\n  KPEE: floatDefval,\r\n  KPEG: floatDefval,\r\n  KPLN: floatDefval,\r\n  KPLT: floatDefval,\r\n  KPEL: floatDefval,\r\n  KPES: floatDefval,\r\n  KPEV: visibilityDefval,\r\n  // PRE2\r\n  KP2S: floatDefval,\r\n  KP2R: floatDefval,\r\n  KP2L: floatDefval,\r\n  KP2G: floatDefval,\r\n  KP2E: floatDefval,\r\n  KP2N: floatDefval,\r\n  KP2W: floatDefval,\r\n  KP2V: visibilityDefval,\r\n  // RIBB\r\n  KRHA: floatDefval,\r\n  KRHB: floatDefval,\r\n  KRAL: new Float32Array([0]), // Ribbon emitter alphas default to 0 rather than 1.\r\n  KRCO: colorDefval,\r\n  KRTX: floatDefval,\r\n  KRVS: visibilityDefval,\r\n  // CAMS\r\n  KCTR: translationDefval,\r\n  KTTR: translationDefval,\r\n  KCRL: uintDefval,\r\n  // NODE\r\n  KGTR: translationDefval,\r\n  KGRT: rotationDefval,\r\n  KGSC: scaleDefval,\r\n};\r\n\r\n/**\r\n * Animated data.\r\n */\r\nexport abstract class Sd {\r\n  defval: Float32Array | Uint32Array;\r\n  model: MdxModel;\r\n  name: string;\r\n  globalSequence: SdSequence | null = null;\r\n  sequences: SdSequence[] = [];\r\n  interpolationType: InterpolationType;\r\n\r\n  abstract copy(out: Uint32Array | Float32Array | vec3 | quat, value: Uint32Array | Float32Array | vec3 | quat): void;\r\n  abstract interpolate(out: Uint32Array | Float32Array | vec3 | quat, values: (Uint32Array | Float32Array | vec3 | quat)[], inTans: (Uint32Array | Float32Array | vec3 | quat)[], outTans: (Uint32Array | Float32Array | vec3 | quat)[], start: number, end: number, t: number): void;\r\n\r\n  constructor(model: MdxModel, animation: Animation) {\r\n    const globalSequences = model.globalSequences;\r\n    const globalSequenceId = animation.globalSequenceId;\r\n    const forcedInterp = forcedInterpMap[animation.name];\r\n\r\n    this.model = model;\r\n    this.name = animation.name;\r\n    this.defval = defVals[animation.name];\r\n\r\n    // Allow to force an interpolation type.\r\n    // The game seems to do this with visibility tracks, where the type is forced to None.\r\n    // It came up as a bug report by a user who used the wrong interpolation type.\r\n    this.interpolationType = forcedInterp !== undefined ? forcedInterp : animation.interpolationType;\r\n\r\n    if (globalSequenceId !== -1 && globalSequences) {\r\n      this.globalSequence = new SdSequence(this, 0, globalSequences[globalSequenceId], animation, true);\r\n    } else {\r\n      for (const sequence of model.sequences) {\r\n        const interval = sequence.interval;\r\n\r\n        this.sequences.push(new SdSequence(this, interval[0], interval[1], animation, false));\r\n      }\r\n    }\r\n  }\r\n\r\n  getValue(out: Uint32Array | Float32Array, sequence: number, frame: number, counter: number): number {\r\n    if (this.globalSequence) {\r\n      return this.globalSequence.getValue(out, counter % this.globalSequence.end);\r\n    }\r\n\r\n    return this.sequences[sequence].getValue(out, frame);\r\n  }\r\n\r\n  isVariant(sequence: number): boolean {\r\n    if (this.globalSequence) {\r\n      return !this.globalSequence.constant;\r\n    } else {\r\n      return !this.sequences[sequence].constant;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * A scalar animation.\r\n */\r\nexport class ScalarSd extends Sd {\r\n  copy<T extends Uint32Array | Float32Array>(out: T, value: T): void {\r\n    out[0] = value[0];\r\n  }\r\n\r\n  interpolate<T extends Uint32Array | Float32Array>(out: T, values: T[], inTans: T[], outTans: T[], start: number, end: number, t: number): void {\r\n    const interpolationType = this.interpolationType;\r\n    const startValue = values[start][0];\r\n\r\n    if (interpolationType === InterpolationType.DontInterp) {\r\n      out[0] = startValue;\r\n    } else if (interpolationType === InterpolationType.Linear) {\r\n      out[0] = lerp(startValue, values[end][0], t);\r\n    } else if (interpolationType === InterpolationType.Hermite) {\r\n      out[0] = hermite(startValue, outTans[start][0], inTans[end][0], values[end][0], t);\r\n    } else if (interpolationType === InterpolationType.Bezier) {\r\n      out[0] = bezier(startValue, outTans[start][0], inTans[end][0], values[end][0], t);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * A vector animation.\r\n */\r\nexport class VectorSd extends Sd {\r\n  copy(out: vec3, value: vec3): void {\r\n    vec3.copy(out, value);\r\n  }\r\n\r\n  interpolate(out: vec3, values: vec3[], inTans: vec3[], outTans: vec3[], start: number, end: number, t: number): void {\r\n    const interpolationType = this.interpolationType;\r\n\r\n    if (interpolationType === InterpolationType.DontInterp) {\r\n      vec3.copy(out, values[start]);\r\n    } else if (interpolationType === InterpolationType.Linear) {\r\n      vec3.lerp(out, values[start], values[end], t);\r\n    } else if (interpolationType === InterpolationType.Hermite) {\r\n      vec3.hermite(out, values[start], outTans[start], inTans[end], values[end], t);\r\n    } else if (interpolationType === InterpolationType.Bezier) {\r\n      vec3.bezier(out, values[start], outTans[start], inTans[end], values[end], t);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * A quaternion animation.\r\n */\r\nexport class QuatSd extends Sd {\r\n  copy(out: quat, value: quat): void {\r\n    quat.copy(out, value);\r\n  }\r\n\r\n  interpolate(out: quat, values: quat[], inTans: quat[], outTans: quat[], start: number, end: number, t: number): void {\r\n    const interpolationType = this.interpolationType;\r\n\r\n    if (interpolationType === InterpolationType.DontInterp) {\r\n      quat.copy(out, values[start]);\r\n    } else if (interpolationType === InterpolationType.Linear) {\r\n      quat.slerp(out, values[start], values[end], t);\r\n    } else if (interpolationType === InterpolationType.Hermite || interpolationType === InterpolationType.Bezier) {\r\n      quat.sqlerp(out, values[start], outTans[start], inTans[end], values[end], t);\r\n    }\r\n  }\r\n}\r\n\r\nexport function createTypedSd(model: MdxModel, animation: Animation): ScalarSd | VectorSd | QuatSd {\r\n  if (animation instanceof UintAnimation || animation instanceof FloatAnimation) {\r\n    return new ScalarSd(model, animation);\r\n  } else if (animation instanceof Vector3Animation) {\r\n    return new VectorSd(model, animation);\r\n  } else {\r\n    return new QuatSd(model, animation);\r\n  }\r\n}\r\n","import MdlxAnimatedObject from '../../../parsers/mdlx/animatedobject';\r\nimport MdxModel from './model';\r\nimport { Sd, createTypedSd } from './sd';\r\n\r\n/**\r\n * An animation object.\r\n */\r\nexport default class AnimatedObject {\r\n  model: MdxModel;\r\n  animations: Map<string, Sd> = new Map();\r\n  variants: {[key: string]: Uint8Array } = {};\r\n\r\n  constructor(model: MdxModel, object: MdlxAnimatedObject) {\r\n    this.model = model;\r\n\r\n    for (const animation of object.animations) {\r\n      this.animations.set(animation.name, createTypedSd(model, animation));\r\n    }\r\n  }\r\n\r\n  getScalarValue(out: Uint32Array | Float32Array, name: string, sequence: number, frame: number, counter: number, defaultValue: number): number {\r\n    if (sequence !== -1) {\r\n      const animation = this.animations.get(name);\r\n\r\n      if (animation) {\r\n        return animation.getValue(out, sequence, frame, counter);\r\n      }\r\n    }\r\n\r\n    out[0] = defaultValue;\r\n\r\n    return -1;\r\n  }\r\n\r\n  getVectorValue(out: Float32Array, name: string, sequence: number, frame: number, counter: number, defaultValue: Float32Array): number {\r\n    if (sequence !== -1) {\r\n      const animation = this.animations.get(name);\r\n\r\n      if (animation) {\r\n        return animation.getValue(out, sequence, frame, counter);\r\n      }\r\n    }\r\n\r\n    out[0] = defaultValue[0];\r\n    out[1] = defaultValue[1];\r\n    out[2] = defaultValue[2];\r\n\r\n    return -1;\r\n  }\r\n\r\n  getQuatValue(out: Float32Array, name: string, sequence: number, frame: number, counter: number, defaultValue: Float32Array): number {\r\n    if (sequence !== -1) {\r\n      const animation = this.animations.get(name);\r\n\r\n      if (animation) {\r\n        return animation.getValue(out, sequence, frame, counter);\r\n      }\r\n    }\r\n\r\n    out[0] = defaultValue[0];\r\n    out[1] = defaultValue[1];\r\n    out[2] = defaultValue[2];\r\n    out[3] = defaultValue[3];\r\n\r\n    return -1;\r\n  }\r\n\r\n  addVariants(name: string, variantName: string): void {\r\n    const animation = this.animations.get(name);\r\n    const sequences = this.model.sequences.length;\r\n    const variants = new Uint8Array(sequences);\r\n\r\n    if (animation) {\r\n      for (let i = 0; i < sequences; i++) {\r\n        if (animation.isVariant(i)) {\r\n          variants[i] = 1;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.variants[variantName] = variants;\r\n  }\r\n\r\n  addVariantIntersection(names: string[], variantName: string): void {\r\n    const sequences = this.model.sequences.length;\r\n    const variants = new Uint8Array(sequences);\r\n\r\n    for (let i = 0; i < sequences; i++) {\r\n      for (const name of names) {\r\n        if (this.variants[name][i]) {\r\n          variants[i] = 1;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.variants[variantName] = variants;\r\n  }\r\n}\r\n","import { VEC3_ZERO, VEC3_ONE, QUAT_DEFAULT } from '../../../common/gl-matrix-addon';\r\nimport MdlxTextureAnimation from '../../../parsers/mdlx/textureanimation';\r\nimport AnimatedObject from './animatedobject';\r\nimport MdxModel from './model';\r\n\r\n/**\r\n * An MDX texture animation.\r\n */\r\nexport default class TextureAnimation extends AnimatedObject {\r\n  constructor(model: MdxModel, textureAnimation: MdlxTextureAnimation) {\r\n    super(model, textureAnimation);\r\n\r\n    this.addVariants('KTAT', 'translation');\r\n    this.addVariants('KTAR', 'rotation');\r\n    this.addVariants('KTAS', 'scale');\r\n  }\r\n\r\n  getTranslation(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getVectorValue(out, 'KTAT', sequence, frame, counter, <Float32Array>VEC3_ZERO);\r\n  }\r\n\r\n  getRotation(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getQuatValue(out, 'KTAR', sequence, frame, counter, <Float32Array>QUAT_DEFAULT);\r\n  }\r\n\r\n  getScale(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getVectorValue(out, 'KTAS', sequence, frame, counter, <Float32Array>VEC3_ONE);\r\n  }\r\n}\r\n","import { FilterMode as LayerFilterMode } from '../../../parsers/mdlx/layer';\r\nimport { FilterMode as Particle2FilterMode } from '../../../parsers/mdlx/particleemitter2';\r\n\r\nexport function layerFilterMode(filterMode: LayerFilterMode, gl: WebGLRenderingContext): number[] {\r\n  if (filterMode === LayerFilterMode.Blend) {\r\n    return [gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA];\r\n  } else if (filterMode === LayerFilterMode.Additive) {\r\n    return [gl.SRC_ALPHA, gl.ONE];\r\n  } else if (filterMode === LayerFilterMode.AddAlpha) {\r\n    return [gl.SRC_ALPHA, gl.ONE];\r\n  } else if (filterMode === LayerFilterMode.Modulate) {\r\n    return [gl.ZERO, gl.SRC_COLOR];\r\n  } else if (filterMode === LayerFilterMode.Modulate2x) {\r\n    return [gl.DST_COLOR, gl.SRC_COLOR];\r\n  } else {\r\n    return [0, 0];\r\n  }\r\n}\r\n\r\nexport function emitterFilterMode(filterMode: Particle2FilterMode, gl: WebGLRenderingContext): number[] {\r\n  if (filterMode === Particle2FilterMode.Blend) {\r\n    return [gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA];\r\n  } else if (filterMode === Particle2FilterMode.Additive) {\r\n    return [gl.SRC_ALPHA, gl.ONE];\r\n  } else if (filterMode === Particle2FilterMode.Modulate) {\r\n    return [gl.ZERO, gl.SRC_COLOR];\r\n  } else if (filterMode === Particle2FilterMode.Modulate2x) {\r\n    return [gl.DST_COLOR, gl.SRC_COLOR];\r\n  } else if (filterMode === Particle2FilterMode.AlphaKey) {\r\n    return [gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA];\r\n  } else {\r\n    return [0, 0];\r\n  }\r\n}\r\n","import MdlxLayer, { FilterMode, Flags } from '../../../parsers/mdlx/layer';\r\nimport MdxModel from './model';\r\nimport AnimatedObject from './animatedobject';\r\nimport TextureAnimation from './textureanimation';\r\nimport { layerFilterMode } from './filtermode';\r\nimport Shader from '../../gl/shader';\r\n\r\n/**\r\n * An MDX layer.\r\n */\r\nexport default class Layer extends AnimatedObject {\r\n  index: number;\r\n  priorityPlane: number;\r\n  filterMode: FilterMode;\r\n  textureId = 0;\r\n  coordId: number;\r\n  alpha: number;\r\n  unshaded: number;\r\n  sphereEnvironmentMap: number;\r\n  twoSided: number;\r\n  unfogged: number;\r\n  noDepthTest: number;\r\n  noDepthSet: number;\r\n  depthMaskValue: boolean;\r\n  blendSrc = 0;\r\n  blendDst = 0;\r\n  blended = false;\r\n  textureAnimation: TextureAnimation | null = null;\r\n\r\n  constructor(model: MdxModel, layer: MdlxLayer, layerId: number, priorityPlane: number) {\r\n    super(model, layer);\r\n\r\n    let filterMode = layer.filterMode;\r\n    const textureAnimationId = layer.textureAnimationId;\r\n    const gl = model.viewer.gl;\r\n\r\n    this.index = layerId;\r\n    this.priorityPlane = priorityPlane;\r\n\r\n    if (filterMode > FilterMode.Modulate2x) {\r\n      filterMode = FilterMode.Blend;\r\n    }\r\n\r\n    this.filterMode = filterMode;\r\n\r\n    if (layer.textureId !== -1) {\r\n      this.textureId = layer.textureId;\r\n    }\r\n\r\n    this.coordId = layer.coordId;\r\n    this.alpha = layer.alpha;\r\n\r\n    const flags = layer.flags;\r\n\r\n    this.unshaded = flags & Flags.Unshaded;\r\n    this.sphereEnvironmentMap = flags & Flags.SphereEnvMap;\r\n    this.twoSided = flags & Flags.TwoSided;\r\n    this.unfogged = flags & Flags.Unfogged;\r\n    this.noDepthTest = flags & Flags.NoDepthTest;\r\n    this.noDepthSet = flags & Flags.NoDepthSet;\r\n\r\n    this.depthMaskValue = (filterMode === FilterMode.None || filterMode === FilterMode.Transparent);\r\n\r\n    if (filterMode > FilterMode.Transparent) {\r\n      this.blended = true;\r\n      [this.blendSrc, this.blendDst] = layerFilterMode(filterMode, gl);\r\n    }\r\n\r\n    if (textureAnimationId !== -1) {\r\n      const textureAnimation = model.textureAnimations[textureAnimationId];\r\n\r\n      if (textureAnimation) {\r\n        this.textureAnimation = textureAnimation;\r\n      }\r\n    }\r\n\r\n    this.addVariants('KMTA', 'alpha');\r\n    this.addVariants('KMTF', 'textureId');\r\n  }\r\n\r\n  bind(shader: Shader): void {\r\n    const gl = this.model.viewer.gl;\r\n\r\n    // gl.uniform1f(shader.uniforms.u_unshaded, this.unshaded);\r\n    gl.uniform1f(shader.uniforms['u_filterMode'], this.filterMode);\r\n\r\n    if (this.blended) {\r\n      gl.enable(gl.BLEND);\r\n      gl.blendFunc(this.blendSrc, this.blendDst);\r\n    } else {\r\n      gl.disable(gl.BLEND);\r\n    }\r\n\r\n    if (this.twoSided) {\r\n      gl.disable(gl.CULL_FACE);\r\n    } else {\r\n      gl.enable(gl.CULL_FACE);\r\n    }\r\n\r\n    if (this.noDepthTest) {\r\n      gl.disable(gl.DEPTH_TEST);\r\n    } else {\r\n      gl.enable(gl.DEPTH_TEST);\r\n    }\r\n\r\n    if (this.noDepthSet) {\r\n      gl.depthMask(false);\r\n    } else {\r\n      gl.depthMask(this.depthMaskValue);\r\n    }\r\n  }\r\n\r\n  getAlpha(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KMTA', sequence, frame, counter, this.alpha);\r\n  }\r\n\r\n  getTextureId(out: Uint32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KMTF', sequence, frame, counter, this.textureId);\r\n  }\r\n}\r\n","import MdxModel from './model';\r\nimport Layer from './layer';\r\n\r\n/**\r\n * An MDX material.\r\n */\r\nexport default class Material {\r\n  model: MdxModel;\r\n  shader: string;\r\n  layers: Layer[];\r\n\r\n  constructor(model: MdxModel, shader: string, layers: Layer[]) {\r\n    this.model = model;\r\n    this.shader = shader;\r\n    this.layers = layers;\r\n  }\r\n}\r\n","import { vec3 } from 'gl-matrix';\r\nimport MdlxGeosetAnimation from '../../../parsers/mdlx/geosetanimation';\r\nimport AnimatedObject from './animatedobject';\r\nimport MdxModel from './model';\r\n\r\n/**\r\n * A geoset animation.\r\n */\r\nexport default class GeosetAnimation extends AnimatedObject {\r\n  alpha: number;\r\n  color: vec3;\r\n  geosetId: number;\r\n\r\n  constructor(model: MdxModel, geosetAnimation: MdlxGeosetAnimation) {\r\n    super(model, geosetAnimation);\r\n\r\n    const color = geosetAnimation.color;\r\n\r\n    this.alpha = geosetAnimation.alpha;\r\n    this.color = vec3.fromValues(color[2], color[1], color[0]); // Stored as RGB, but animated colors are stored as BGR, so sizzle.\r\n    this.geosetId = geosetAnimation.geosetId;\r\n\r\n    this.addVariants('KGAO', 'alpha');\r\n    this.addVariants('KGAC', 'color');\r\n  }\r\n\r\n  getAlpha(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KGAO', sequence, frame, counter, this.alpha);\r\n  }\r\n\r\n  getColor(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getVectorValue(out, 'KGAC', sequence, frame, counter, <Float32Array>this.color);\r\n  }\r\n}\r\n","export default {\r\n  1: 'TeamColor/TeamColor00',\r\n  2: 'TeamGlow/TeamGlow00',\r\n  11: 'Cliff/Cliff0',\r\n  21: '', // Used by all cursor models (HumanCursor, OrcCursor, UndeadCursor, NightElfCursor)\r\n  31: 'LordaeronTree/LordaeronSummerTree',\r\n  32: 'AshenvaleTree/AshenTree',\r\n  33: 'BarrensTree/BarrensTree',\r\n  34: 'NorthrendTree/NorthTree',\r\n  35: 'Mushroom/MushroomTree',\r\n  36: 'RuinsTree/RuinsTree',\r\n  37: 'OutlandMushroomTree/MushroomTree',\r\n};\r\n","import { vec3, quat } from 'gl-matrix';\r\nimport { VEC3_ZERO, VEC3_ONE, QUAT_DEFAULT } from '../../../common/gl-matrix-addon';\r\nimport MdlxGenericObject, { Flags } from '../../../parsers/mdlx/genericobject';\r\nimport AnimatedObject from './animatedobject';\r\nimport MdxModel from './model';\r\n\r\n/**\r\n * An MDX generic object.\r\n */\r\nexport default class GenericObject extends AnimatedObject {\r\n  index: number;\r\n  name: string;\r\n  objectId: number;\r\n  parentId: number;\r\n  pivot: vec3;\r\n  dontInheritTranslation: boolean;\r\n  dontInheritRotation: boolean;\r\n  dontInheritScaling: boolean;\r\n  billboarded: boolean;\r\n  billboardedX: boolean;\r\n  billboardedY: boolean;\r\n  billboardedZ: boolean;\r\n  cameraAnchored: boolean;\r\n  anyBillboarding: boolean;\r\n\r\n  constructor(model: MdxModel, object: MdlxGenericObject, index: number) {\r\n    super(model, object);\r\n\r\n    this.index = index;\r\n    this.name = object.name;\r\n    this.objectId = object.objectId;\r\n    this.parentId = object.parentId;\r\n    this.pivot = <vec3>model.pivotPoints[object.objectId] || vec3.create();\r\n\r\n    const flags = object.flags;\r\n    this.dontInheritTranslation = (flags & Flags.DontInheritTranslation) > 0;\r\n    this.dontInheritRotation = (flags & Flags.DontInheritRotation) > 0;\r\n    this.dontInheritScaling = (flags & Flags.DontInheritScaling) > 0;\r\n    this.billboarded = (flags & Flags.Billboarded) > 0;\r\n    this.billboardedX = (flags & Flags.BillboardedLockX) > 0;\r\n    this.billboardedY = (flags & Flags.BillboardedLockY) > 0;\r\n    this.billboardedZ = (flags & Flags.BillboardedLockZ) > 0;\r\n    this.cameraAnchored = (flags & Flags.CameraAnchored) > 0;\r\n    this.anyBillboarding = this.billboarded || this.billboardedX || this.billboardedY || this.billboardedZ;\r\n\r\n    if (object.objectId === object.parentId) {\r\n      this.parentId = -1;\r\n    }\r\n\r\n    this.addVariants('KGTR', 'translation');\r\n    this.addVariants('KGRT', 'rotation');\r\n    this.addVariants('KGSC', 'scale');\r\n    this.addVariantIntersection(['translation', 'rotation', 'scale'], 'generic');\r\n  }\r\n\r\n  /**\r\n   * Give a consistent visibility getter for all generic objects.\r\n   * \r\n   * Many of the generic objects have animated visibilities, and will override this.\r\n   */\r\n  getVisibility(out: Float32Array, _sequence: number, _frame: number, _counter: number): number {\r\n    out[0] = 1;\r\n\r\n    return -1;\r\n  }\r\n\r\n  getTranslation(out: vec3, sequence: number, frame: number, counter: number): number {\r\n    return this.getVectorValue(<Float32Array>out, 'KGTR', sequence, frame, counter, <Float32Array>VEC3_ZERO);\r\n  }\r\n\r\n  getRotation(out: quat, sequence: number, frame: number, counter: number): number {\r\n    return this.getQuatValue(<Float32Array>out, 'KGRT', sequence, frame, counter, <Float32Array>QUAT_DEFAULT);\r\n  }\r\n\r\n  getScale(out: vec3, sequence: number, frame: number, counter: number): number {\r\n    return this.getVectorValue(<Float32Array>out, 'KGSC', sequence, frame, counter, <Float32Array>VEC3_ONE);\r\n  }\r\n}\r\n","import MdlxBone from '../../../parsers/mdlx/bone';\r\nimport MdxModel from './model';\r\nimport GenericObject from './genericobject';\r\nimport GeosetAnimation from './geosetanimation';\r\n\r\n/**\r\n * An MDX bone.\r\n */\r\nexport default class Bone extends GenericObject {\r\n  geosetAnimation: GeosetAnimation;\r\n\r\n  constructor(model: MdxModel, bone: MdlxBone, index: number) {\r\n    super(model, bone, index);\r\n\r\n    this.geosetAnimation = model.geosetAnimations[bone.geosetAnimationId];\r\n  }\r\n\r\n  override getVisibility(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    if (this.geosetAnimation) {\r\n      return this.geosetAnimation.getAlpha(out, sequence, frame, counter);\r\n    }\r\n\r\n    out[0] = 1;\r\n\r\n    return -1;\r\n  }\r\n}\r\n","import MdlxLight, { LightType } from '../../../parsers/mdlx/light';\r\nimport MdxModel from './model';\r\nimport GenericObject from './genericobject';\r\n\r\n/**\r\n * An MDX light.\r\n */\r\nexport default class Light extends GenericObject {\r\n  type: LightType;\r\n  attenuation: Float32Array;\r\n  color: Float32Array;\r\n  intensity: number;\r\n  ambientColor: Float32Array;\r\n  ambientIntensity: number;\r\n\r\n  constructor(model: MdxModel, light: MdlxLight, index: number) {\r\n    super(model, light, index);\r\n\r\n    this.type = light.type;\r\n    this.attenuation = light.attenuation;\r\n    this.color = light.color;\r\n    this.intensity = light.intensity;\r\n    this.ambientColor = light.ambientColor;\r\n    this.ambientIntensity = light.ambientIntensity;\r\n  }\r\n\r\n  getAttenuationStart(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KLAS', sequence, frame, counter, this.attenuation[0]);\r\n  }\r\n\r\n  getAttenuationEnd(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KLAE', sequence, frame, counter, this.attenuation[1]);\r\n  }\r\n\r\n  getIntensity(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KLAI', sequence, frame, counter, this.intensity);\r\n  }\r\n\r\n  getColor(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getVectorValue(out, 'KLAC', sequence, frame, counter, this.color);\r\n  }\r\n\r\n  getAmbientIntensity(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KLBI', sequence, frame, counter, this.ambientIntensity);\r\n  }\r\n\r\n  getAmbientColor(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getVectorValue(out, 'KLBC', sequence, frame, counter, this.ambientColor);\r\n  }\r\n}\r\n","import GenericObject from './genericobject';\r\n\r\n/**\r\n * An MDX helper.\r\n */\r\nexport default class Helper extends GenericObject {}\r\n","import MdlxAttachment from '../../../parsers/mdlx/attachment';\r\nimport GenericObject from './genericobject';\r\nimport MdxModel from './model';\r\n\r\n/**\r\n * An MDX attachment.\r\n */\r\nexport default class Attachment extends GenericObject {\r\n  path: string;\r\n  attachmentId: number;\r\n  internalModel: MdxModel | null = null;\r\n\r\n  constructor(model: MdxModel, attachment: MdlxAttachment, index: number) {\r\n    super(model, attachment, index);\r\n\r\n    const path = attachment.path.replace(/\\\\/g, '/').toLowerCase().replace('.mdl', '.mdx');\r\n\r\n    this.path = path;\r\n    this.attachmentId = attachment.attachmentId;\r\n\r\n    // Second condition is against custom resources using arbitrary paths...\r\n    if (path !== '' && path.indexOf('.mdx') != -1) {\r\n      const promise = model.viewer.load(path, model.pathSolver, model.solverParams);\r\n\r\n      promise.then((model) => {\r\n        if (model) {\r\n          this.internalModel = <MdxModel>model;\r\n        }\r\n      });\r\n\r\n      model.blockers.push(promise);\r\n    }\r\n  }\r\n\r\n  override getVisibility(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KATV', sequence, frame, counter, 1);\r\n  }\r\n}\r\n","import ParticleEmitter from '../../../parsers/mdlx/particleemitter';\r\nimport MdxModel from './model';\r\nimport GenericObject from './genericobject';\r\n\r\n/**\r\n * An MDX particle emitter.\r\n */\r\nexport default class ParticleEmitterObject extends GenericObject {\r\n  internalModel: MdxModel | null = null;\r\n  speed: number;\r\n  latitude: number;\r\n  longitude: number;\r\n  lifeSpan: number;\r\n  gravity: number;\r\n  emissionRate: number;\r\n  ok = false;\r\n\r\n  constructor(model: MdxModel, emitter: ParticleEmitter, index: number) {\r\n    super(model, emitter, index);\r\n\r\n    this.speed = emitter.speed;\r\n    this.latitude = emitter.latitude;\r\n    this.longitude = emitter.longitude;\r\n    this.lifeSpan = emitter.lifeSpan;\r\n    this.gravity = emitter.gravity;\r\n    this.emissionRate = emitter.emissionRate;\r\n\r\n    model.viewer.load(emitter.path.replace(/\\\\/g, '/').toLowerCase().replace('.mdl', '.mdx'), model.pathSolver, model.solverParams)\r\n      .then((model) => {\r\n        if (model) {\r\n          this.internalModel = <MdxModel>model;\r\n          this.ok = true;\r\n        }\r\n      });\r\n  }\r\n\r\n  getSpeed(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KPES', sequence, frame, counter, this.speed);\r\n  }\r\n\r\n  getLatitude(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KPLTV', sequence, frame, counter, this.latitude);\r\n  }\r\n\r\n  getLongitude(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KPLN', sequence, frame, counter, this.longitude);\r\n  }\r\n\r\n  getLifeSpan(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KPEL', sequence, frame, counter, this.lifeSpan);\r\n  }\r\n\r\n  getGravity(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KPEG', sequence, frame, counter, this.gravity);\r\n  }\r\n\r\n  getEmissionRate(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KPEE', sequence, frame, counter, this.emissionRate);\r\n  }\r\n\r\n  override getVisibility(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KPEV', sequence, frame, counter, 1);\r\n  }\r\n}\r\n","import { vec3 } from 'gl-matrix';\r\nimport Scene from '../../scene';\r\nimport Shader from '../../gl/shader';\r\nimport ClientBuffer from '../../gl/clientbuffer';\r\nimport Texture from '../../texture';\r\nimport ParticleEmitter2Object from './particleemitter2object';\r\nimport RibbonEmitterObject from './ribbonemitterobject';\r\nimport EventObjectEmitterObject from './eventobjectemitterobject';\r\nimport MdxModelInstance from './modelinstance';\r\nimport ParticleEmitter2 from './particleemitter2';\r\nimport RibbonEmitter from './ribbonemitter';\r\nimport EventObjectSplEmitter from './eventobjectsplemitter';\r\nimport EventObjectUbrEmitter from './eventobjectubremitter';\r\nimport Particle2 from './particle2';\r\nimport Ribbon from './ribbon';\r\nimport EventObjectSplUbr from './eventobjectsplubr';\r\nimport MdxTexture from './texture';\r\nimport { HeadOrTail } from '../../../parsers/mdlx/particleemitter2';\r\nimport { MdxHandlerObject } from './handler';\r\n\r\nconst locationHeap = vec3.create();\r\nconst startHeap = vec3.create();\r\nconst endHeap = vec3.create();\r\n\r\n// The total storage that emitted objects can use.\r\n// This is enough to support all of the MDX geometry emitters.\r\n// The memory layout is the same as this C struct:\r\n//\r\n//   struct {\r\n//     float p0[3]\r\n//     float p1[3]\r\n//     float p2[3]\r\n//     float p3[3]\r\n//     float health\r\n//     byte color[4]\r\n//     byte tail\r\n//     byte leftRightTop[3]\r\n//   }\r\n//\r\nexport const BYTES_PER_OBJECT = 60;\r\nexport const FLOATS_PER_OBJECT = BYTES_PER_OBJECT >> 2;\r\n\r\n// Offsets into the emitted object structure.\r\nexport const BYTE_OFFSET_P0 = 0;\r\nexport const BYTE_OFFSET_P1 = 12;\r\nexport const BYTE_OFFSET_P2 = 24;\r\nexport const BYTE_OFFSET_P3 = 36;\r\nexport const BYTE_OFFSET_HEALTH = 48;\r\nexport const BYTE_OFFSET_COLOR = 52;\r\nexport const BYTE_OFFSET_TAIL = 56;\r\nexport const BYTE_OFFSET_LEFT_RIGHT_TOP = 57;\r\n\r\n// Offset aliases.\r\nexport const FLOAT_OFFSET_P0 = BYTE_OFFSET_P0 >> 2;\r\nexport const FLOAT_OFFSET_P1 = BYTE_OFFSET_P1 >> 2;\r\nexport const FLOAT_OFFSET_P2 = BYTE_OFFSET_P2 >> 2;\r\nexport const FLOAT_OFFSET_P3 = BYTE_OFFSET_P3 >> 2;\r\nexport const FLOAT_OFFSET_HEALTH = BYTE_OFFSET_HEALTH >> 2;\r\nexport const BYTE_OFFSET_TEAM_COLOR = BYTE_OFFSET_LEFT_RIGHT_TOP;\r\n\r\n// Emitter types\r\nexport const EMITTER_PARTICLE2 = 0;\r\nexport const EMITTER_RIBBON = 1;\r\nexport const EMITTER_SPLAT = 2;\r\nexport const EMITTER_UBERSPLAT = 3;\r\n\r\n// Offsets for overriding emitter textures using setResource().\r\nexport const EMITTER_PARTICLE2_TEXTURE_OFFSET = 1000;\r\nexport const EMITTER_EVENT_TEXTURE_OFFSET = 10000;\r\n\r\n// The game scales the emission rate of particle emitters depending on the particles setting.\r\n// High seems to double the emission.\r\nexport const SETTING_PARTICLES_HIGH = 2;\r\n\r\nexport type GeometryEmitter = ParticleEmitter2 | RibbonEmitter | EventObjectSplEmitter | EventObjectUbrEmitter;\r\nexport type GeometryEmitterObject = ParticleEmitter2Object | RibbonEmitterObject | EventObjectEmitterObject;\r\n\r\nfunction bindParticleEmitter2Buffer(emitter: ParticleEmitter2, buffer: ClientBuffer): void {\r\n  const instance = <MdxModelInstance>emitter.instance;\r\n  const objects = <Particle2[]>emitter.objects;\r\n  const byteView = <Uint8Array>buffer.byteView;\r\n  const floatView = <Float32Array>buffer.floatView;\r\n  const emitterObject = <ParticleEmitter2Object>emitter.emitterObject;\r\n  const modelSpace = emitterObject.modelSpace;\r\n  const tailLength = emitterObject.tailLength;\r\n  const node = emitter.node;\r\n  const teamColor = instance.teamColor;\r\n  let offset = 0;\r\n\r\n  for (const object of objects) {\r\n    const byteOffset = offset * BYTES_PER_OBJECT;\r\n    const floatOffset = offset * FLOATS_PER_OBJECT;\r\n    const p0Offset = floatOffset + FLOAT_OFFSET_P0;\r\n    let location = object.location;\r\n    const scale = object.scale;\r\n    const tail = object.tail;\r\n\r\n    if (tail === HeadOrTail.Head) {\r\n      // If this is a model space emitter, the location is in local space, so convert it to world space.\r\n      if (modelSpace) {\r\n        location = vec3.transformMat4(locationHeap, location, node.worldMatrix);\r\n      }\r\n\r\n      floatView[p0Offset + 0] = location[0];\r\n      floatView[p0Offset + 1] = location[1];\r\n      floatView[p0Offset + 2] = location[2];\r\n\r\n      // Used to rotate XY particles to face their velocity on the XY plane.\r\n      floatView[p0Offset + 3] = object.facing;\r\n    } else {\r\n      const velocity = object.velocity;\r\n      let start = startHeap;\r\n      let end = location;\r\n\r\n      start[0] = end[0] - tailLength * velocity[0];\r\n      start[1] = end[1] - tailLength * velocity[1];\r\n      start[2] = end[2] - tailLength * velocity[2];\r\n\r\n      // If this is a model space emitter, the start and end are in local space, so convert them to world space.\r\n      if (modelSpace) {\r\n        start = vec3.transformMat4(start, start, node.worldMatrix);\r\n        end = vec3.transformMat4(endHeap, end, node.worldMatrix);\r\n      }\r\n\r\n      floatView[p0Offset + 0] = start[0];\r\n      floatView[p0Offset + 1] = start[1];\r\n      floatView[p0Offset + 2] = start[2];\r\n      floatView[p0Offset + 3] = end[0];\r\n      floatView[p0Offset + 4] = end[1];\r\n      floatView[p0Offset + 5] = end[2];\r\n    }\r\n\r\n    floatView[p0Offset + 6] = scale[0];\r\n    floatView[p0Offset + 7] = scale[0];\r\n    floatView[p0Offset + 8] = scale[0];\r\n\r\n    floatView[floatOffset + FLOAT_OFFSET_HEALTH] = object.health;\r\n\r\n    byteView[byteOffset + BYTE_OFFSET_TAIL] = tail;\r\n    byteView[byteOffset + BYTE_OFFSET_TEAM_COLOR] = teamColor;\r\n\r\n    offset += 1;\r\n  }\r\n}\r\n\r\nfunction bindParticleEmitter2Shader(emitter: ParticleEmitter2, shader: Shader): void {\r\n  const instance = <MdxModelInstance>emitter.instance;\r\n  const textureOverrides = instance.textureOverrides;\r\n  const scene = <Scene>instance.scene;\r\n  const camera = scene.camera;\r\n  const emitterObject = <ParticleEmitter2Object>emitter.emitterObject;\r\n  const model = emitterObject.model;\r\n  const viewer = model.viewer;\r\n  const gl = viewer.gl;\r\n  const mdxCache = <MdxHandlerObject>viewer.sharedCache.get('mdx');\r\n  const uniforms = shader.uniforms;\r\n  const colors = emitterObject.colors;\r\n  const intervals = emitterObject.intervals;\r\n  const replaceable = emitterObject.replaceableId;\r\n  let vectors;\r\n  let mdxTexture = <MdxTexture>emitterObject.internalTexture;\r\n\r\n  gl.blendFunc(emitterObject.blendSrc, emitterObject.blendDst);\r\n  gl.uniform1f(uniforms['u_filterMode'], emitterObject.filterMode);\r\n\r\n  // Determine where this texture is coming from.\r\n  // This is to get the texture wrap modes.\r\n  // The texture is either a replaceable in which case it's stored internally, a team color in which case it's stored in the handler, or a reference to one of the model textures.\r\n  if (emitterObject.internalTexture) {\r\n    mdxTexture = emitterObject.internalTexture;\r\n  } else if (replaceable === 1) {\r\n    mdxTexture = mdxCache.teamColors[instance.teamColor];\r\n  } else if (replaceable === 2) {\r\n    mdxTexture = mdxCache.teamGlows[instance.teamColor];\r\n  } else {\r\n    mdxTexture = model.textures[emitterObject.textureId];\r\n  }\r\n\r\n  // Now get the actual texture itself.\r\n  // First check if there is an override for this particle emitter.\r\n  let texture: Texture | null | undefined = textureOverrides.get(EMITTER_PARTICLE2_TEXTURE_OFFSET + emitterObject.index);\r\n\r\n  if (!texture) {\r\n    // Next check if there is an override for model textures if this is one.\r\n    if (replaceable === 0) {\r\n      texture = textureOverrides.get(emitterObject.textureId);\r\n    }\r\n\r\n    // If there is still no override, get it from the existing texture object.\r\n    if (!texture) {\r\n      texture = mdxTexture.texture;\r\n    }\r\n  }\r\n\r\n  viewer.webgl.bindTextureAndWrap(texture, 0, mdxTexture.wrapS, mdxTexture.wrapT);\r\n\r\n  // Choose between a default rectangle or a billboarded one\r\n  if (emitterObject.xYQuad) {\r\n    vectors = camera.vectors;\r\n  } else {\r\n    vectors = camera.billboardedVectors;\r\n  }\r\n\r\n  gl.uniform1f(uniforms['u_lifeSpan'], emitterObject.lifeSpan);\r\n  gl.uniform1f(uniforms['u_timeMiddle'], emitterObject.timeMiddle);\r\n  gl.uniform1f(uniforms['u_columns'], emitterObject.columns);\r\n  gl.uniform1f(uniforms['u_rows'], emitterObject.rows);\r\n  gl.uniform1f(uniforms['u_teamColored'], emitterObject.teamColored);\r\n\r\n  gl.uniform3fv(uniforms['u_intervals[0]'], intervals[0]);\r\n  gl.uniform3fv(uniforms['u_intervals[1]'], intervals[1]);\r\n  gl.uniform3fv(uniforms['u_intervals[2]'], intervals[2]);\r\n  gl.uniform3fv(uniforms['u_intervals[3]'], intervals[3]);\r\n\r\n  gl.uniform4fv(uniforms['u_colors[0]'], colors[0]);\r\n  gl.uniform4fv(uniforms['u_colors[1]'], colors[1]);\r\n  gl.uniform4fv(uniforms['u_colors[2]'], colors[2]);\r\n\r\n  gl.uniform3fv(uniforms['u_scaling'], emitterObject.scaling);\r\n\r\n  if (emitterObject.head) {\r\n    gl.uniform3fv(uniforms['u_vertices[0]'], vectors[0]);\r\n    gl.uniform3fv(uniforms['u_vertices[1]'], vectors[1]);\r\n    gl.uniform3fv(uniforms['u_vertices[2]'], vectors[2]);\r\n    gl.uniform3fv(uniforms['u_vertices[3]'], vectors[3]);\r\n  }\r\n\r\n  if (emitterObject.tail) {\r\n    gl.uniform3fv(uniforms['u_cameraZ'], camera.directionZ);\r\n  }\r\n}\r\n\r\nfunction bindRibbonEmitterBuffer(emitter: RibbonEmitter, buffer: ClientBuffer): void {\r\n  let object = <Ribbon>emitter.first;\r\n  const byteView = <Uint8Array>buffer.byteView;\r\n  const floatView = <Float32Array>buffer.floatView;\r\n  const emitterObject = <RibbonEmitterObject>emitter.emitterObject;\r\n  const columns = emitterObject.columns;\r\n  const alive = emitter.alive;\r\n  const chainLengthFactor = 1 / (alive - 1);\r\n  let offset = 0;\r\n\r\n  while (object.next) {\r\n    const next = object.next.vertices;\r\n    const byteOffset = offset * BYTES_PER_OBJECT;\r\n    const floatOffset = offset * FLOATS_PER_OBJECT;\r\n    const p0Offset = floatOffset + FLOAT_OFFSET_P0;\r\n    const colorOffset = byteOffset + BYTE_OFFSET_COLOR;\r\n    const leftRightTopOffset = byteOffset + BYTE_OFFSET_LEFT_RIGHT_TOP;\r\n    const left = ((object.slot % columns) + (1 - (offset * chainLengthFactor) - chainLengthFactor)) / columns;\r\n    const top = object.slot / columns;\r\n    const right = left + chainLengthFactor;\r\n    const vertices = object.vertices;\r\n    const color = object.color;\r\n\r\n    floatView[p0Offset + 0] = vertices[0];\r\n    floatView[p0Offset + 1] = vertices[1];\r\n    floatView[p0Offset + 2] = vertices[2];\r\n    floatView[p0Offset + 3] = vertices[3];\r\n    floatView[p0Offset + 4] = vertices[4];\r\n    floatView[p0Offset + 5] = vertices[5];\r\n    floatView[p0Offset + 6] = next[3];\r\n    floatView[p0Offset + 7] = next[4];\r\n    floatView[p0Offset + 8] = next[5];\r\n    floatView[p0Offset + 9] = next[0];\r\n    floatView[p0Offset + 10] = next[1];\r\n    floatView[p0Offset + 11] = next[2];\r\n\r\n    byteView[colorOffset + 0] = color[0];\r\n    byteView[colorOffset + 1] = color[1];\r\n    byteView[colorOffset + 2] = color[2];\r\n    byteView[colorOffset + 3] = color[3];\r\n\r\n    byteView[leftRightTopOffset + 0] = left * 255;\r\n    byteView[leftRightTopOffset + 1] = right * 255;\r\n    byteView[leftRightTopOffset + 2] = top * 255;\r\n\r\n    object = object.next;\r\n    offset += 1;\r\n  }\r\n}\r\n\r\nfunction bindRibbonEmitterShader(emitter: RibbonEmitter, shader: Shader): void {\r\n  const textureOverrides = emitter.instance.textureOverrides;\r\n  const emitterObject = <RibbonEmitterObject>emitter.emitterObject;\r\n  const layer = emitterObject.layer;\r\n  const model = emitterObject.model;\r\n  const gl = model.viewer.gl;\r\n  const uniforms = shader.uniforms;\r\n  const texture = model.textures[layer.textureId];\r\n  const actualTexture = textureOverrides.get(layer.textureId) || texture.texture;\r\n\r\n  layer.bind(shader);\r\n\r\n  gl.uniform1f(uniforms['u_filterMode'], layer.filterMode);\r\n\r\n  model.viewer.webgl.bindTextureAndWrap(actualTexture, 0, texture.wrapS, texture.wrapT);\r\n\r\n  gl.uniform1f(uniforms['u_columns'], emitterObject.columns);\r\n  gl.uniform1f(uniforms['u_rows'], emitterObject.rows);\r\n}\r\n\r\nfunction bindEventObjectEmitterBuffer(emitter: EventObjectSplEmitter | EventObjectUbrEmitter, buffer: ClientBuffer): void {\r\n  const objects = <EventObjectSplUbr[]>emitter.objects;\r\n  const floatView = <Float32Array>buffer.floatView;\r\n  let offset = 0;\r\n\r\n  for (const object of objects) {\r\n    const floatOffset = offset * FLOATS_PER_OBJECT;\r\n    const p0Offset = floatOffset + FLOAT_OFFSET_P0;\r\n    const vertices = object.vertices;\r\n\r\n    floatView[p0Offset + 0] = vertices[0];\r\n    floatView[p0Offset + 1] = vertices[1];\r\n    floatView[p0Offset + 2] = vertices[2];\r\n    floatView[p0Offset + 3] = vertices[3];\r\n    floatView[p0Offset + 4] = vertices[4];\r\n    floatView[p0Offset + 5] = vertices[5];\r\n    floatView[p0Offset + 6] = vertices[6];\r\n    floatView[p0Offset + 7] = vertices[7];\r\n    floatView[p0Offset + 8] = vertices[8];\r\n    floatView[p0Offset + 9] = vertices[9];\r\n    floatView[p0Offset + 10] = vertices[10];\r\n    floatView[p0Offset + 11] = vertices[11];\r\n\r\n    floatView[floatOffset + FLOAT_OFFSET_HEALTH] = object.health;\r\n\r\n    offset += 1;\r\n  }\r\n}\r\n\r\nfunction bindEventObjectSplEmitterShader(emitter: EventObjectSplEmitter, shader: Shader): void {\r\n  const textureOverrides = emitter.instance.textureOverrides;\r\n  const emitterObject = <EventObjectEmitterObject>emitter.emitterObject;\r\n  const intervalTimes = emitterObject.intervalTimes;\r\n  const intervals = emitterObject.intervals;\r\n  const colors = emitterObject.colors;\r\n  const model = emitterObject.model;\r\n  const gl = model.viewer.gl;\r\n  const uniforms = shader.uniforms;\r\n  const texture = <MdxTexture>emitterObject.internalTexture;\r\n  const actualTexture = textureOverrides.get(EMITTER_EVENT_TEXTURE_OFFSET + emitterObject.index) || texture.texture;\r\n\r\n  gl.blendFunc(emitterObject.blendSrc, emitterObject.blendDst);\r\n\r\n  model.viewer.webgl.bindTextureAndWrap(actualTexture, 0, texture.wrapS, texture.wrapT);\r\n\r\n  gl.uniform1f(uniforms['u_lifeSpan'], emitterObject.lifeSpan);\r\n  gl.uniform1f(uniforms['u_columns'], emitterObject.columns);\r\n  gl.uniform1f(uniforms['u_rows'], emitterObject.rows);\r\n\r\n  // 3 because the uniform is shared with UBR, which has 3 values.\r\n  gl.uniform3f(uniforms['u_intervalTimes'], intervalTimes[0], intervalTimes[1], 0);\r\n\r\n  gl.uniform3fv(uniforms['u_intervals[0]'], intervals[0]);\r\n  gl.uniform3fv(uniforms['u_intervals[1]'], intervals[1]);\r\n\r\n  gl.uniform4fv(uniforms['u_colors[0]'], colors[0]);\r\n  gl.uniform4fv(uniforms['u_colors[1]'], colors[1]);\r\n  gl.uniform4fv(uniforms['u_colors[2]'], colors[2]);\r\n}\r\n\r\nfunction bindEventObjectUbrEmitterShader(emitter: EventObjectUbrEmitter, shader: Shader): void {\r\n  const textureOverrides = emitter.instance.textureOverrides;\r\n  const emitterObject = <EventObjectEmitterObject>emitter.emitterObject;\r\n  const intervalTimes = emitterObject.intervalTimes;\r\n  const colors = emitterObject.colors;\r\n  const model = emitterObject.model;\r\n  const viewer = model.viewer;\r\n  const gl = viewer.gl;\r\n  const uniforms = shader.uniforms;\r\n  const texture = <MdxTexture>emitterObject.internalTexture;\r\n  const actualTexture = textureOverrides.get(EMITTER_EVENT_TEXTURE_OFFSET + emitterObject.index) || texture.texture;\r\n\r\n  gl.blendFunc(emitterObject.blendSrc, emitterObject.blendDst);\r\n\r\n  model.viewer.webgl.bindTextureAndWrap(actualTexture, 0, texture.wrapS, texture.wrapT);\r\n\r\n  gl.uniform1f(uniforms['u_lifeSpan'], emitterObject.lifeSpan);\r\n  gl.uniform1f(uniforms['u_columns'], emitterObject.columns);\r\n  gl.uniform1f(uniforms['u_rows'], emitterObject.rows);\r\n\r\n  gl.uniform3fv(uniforms['u_intervalTimes'], intervalTimes);\r\n\r\n  gl.uniform4fv(uniforms['u_colors[0]'], colors[0]);\r\n  gl.uniform4fv(uniforms['u_colors[1]'], colors[1]);\r\n  gl.uniform4fv(uniforms['u_colors[2]'], colors[2]);\r\n}\r\n\r\nexport function renderEmitter(emitter: GeometryEmitter, shader: Shader): void {\r\n  let alive = emitter.alive;\r\n  const emitterObject = <GeometryEmitterObject>emitter.emitterObject;\r\n  const emitterType = emitterObject.geometryEmitterType;\r\n\r\n  if (emitterType === EMITTER_RIBBON) {\r\n    alive -= 1;\r\n  }\r\n\r\n  if (alive > 0) {\r\n    const viewer = emitter.instance.model.viewer;\r\n    const buffer = viewer.buffer;\r\n    const gl = viewer.gl;\r\n    const instancedArrays = <ANGLE_instanced_arrays>viewer.webgl.extensions['ANGLE_instanced_arrays'];\r\n    const size = alive * BYTES_PER_OBJECT;\r\n    const attribs = shader.attribs;\r\n\r\n    buffer.reserve(size);\r\n\r\n    if (emitterType === EMITTER_PARTICLE2) {\r\n      bindParticleEmitter2Buffer(<ParticleEmitter2>emitter, buffer);\r\n      bindParticleEmitter2Shader(<ParticleEmitter2>emitter, shader);\r\n    } else if (emitterType === EMITTER_RIBBON) {\r\n      bindRibbonEmitterBuffer(<RibbonEmitter>emitter, buffer);\r\n      bindRibbonEmitterShader(<RibbonEmitter>emitter, shader);\r\n    } else if (emitterType === EMITTER_SPLAT) {\r\n      bindEventObjectEmitterBuffer(<EventObjectSplEmitter>emitter, buffer);\r\n      bindEventObjectSplEmitterShader(<EventObjectSplEmitter>emitter, shader);\r\n    } else {\r\n      bindEventObjectEmitterBuffer(<EventObjectUbrEmitter>emitter, buffer);\r\n      bindEventObjectUbrEmitterShader(<EventObjectUbrEmitter>emitter, shader);\r\n    }\r\n\r\n    buffer.bindAndUpdate(size);\r\n\r\n    gl.uniform1i(shader.uniforms['u_emitter'], emitterType);\r\n\r\n    gl.vertexAttribPointer(attribs['a_p0'], 3, gl.FLOAT, false, BYTES_PER_OBJECT, BYTE_OFFSET_P0);\r\n    gl.vertexAttribPointer(attribs['a_p1'], 3, gl.FLOAT, false, BYTES_PER_OBJECT, BYTE_OFFSET_P1);\r\n    gl.vertexAttribPointer(attribs['a_p2'], 3, gl.FLOAT, false, BYTES_PER_OBJECT, BYTE_OFFSET_P2);\r\n    gl.vertexAttribPointer(attribs['a_p3'], 3, gl.FLOAT, false, BYTES_PER_OBJECT, BYTE_OFFSET_P3);\r\n    gl.vertexAttribPointer(attribs['a_health'], 1, gl.FLOAT, false, BYTES_PER_OBJECT, BYTE_OFFSET_HEALTH);\r\n    gl.vertexAttribPointer(attribs['a_color'], 4, gl.UNSIGNED_BYTE, true, BYTES_PER_OBJECT, BYTE_OFFSET_COLOR);\r\n    gl.vertexAttribPointer(attribs['a_tail'], 1, gl.UNSIGNED_BYTE, false, BYTES_PER_OBJECT, BYTE_OFFSET_TAIL);\r\n    gl.vertexAttribPointer(attribs['a_leftRightTop'], 3, gl.UNSIGNED_BYTE, false, BYTES_PER_OBJECT, BYTE_OFFSET_LEFT_RIGHT_TOP);\r\n\r\n    instancedArrays.drawArraysInstancedANGLE(gl.TRIANGLES, 0, 6, alive);\r\n  }\r\n}\r\n","import { WrapMode } from '../../../parsers/mdlx/texture';\r\nimport Texture from '../../texture';\r\n\r\n/**\r\n * An MDX texture.\r\n */\r\nexport default class MdxTexture {\r\n  texture: Texture | null = null;\r\n  replaceableId: number;\r\n  wrapS = 0x812f; // CLAMP_TO_EDGE\r\n  wrapT = 0x812f;\r\n\r\n  constructor(replaceableId: number, wrapMode: WrapMode) {\r\n    this.replaceableId = replaceableId;\r\n\r\n    if (wrapMode & WrapMode.WrapWidth) {\r\n      this.wrapS = 0x2901; // REPEAT\r\n    }\r\n\r\n    if (wrapMode & WrapMode.WrapHeight) {\r\n      this.wrapT = 0x2901;\r\n    }\r\n  }\r\n}\r\n","import MdlxParticleEmitter2, { Flags, HeadOrTail } from '../../../parsers/mdlx/particleemitter2';\r\nimport Texture from '../../texture';\r\nimport MdxModel from './model';\r\nimport GenericObject from './genericobject';\r\nimport { emitterFilterMode } from './filtermode';\r\nimport replaceableIds from './replaceableids';\r\nimport { EMITTER_PARTICLE2, SETTING_PARTICLES_HIGH } from './geometryemitterfuncs';\r\nimport MdxTexture from './texture';\r\nimport { WrapMode } from '../../../parsers/mdlx/texture';\r\n\r\n/**\r\n * An MDX particle emitter type 2.\r\n */\r\nexport default class ParticleEmitter2Object extends GenericObject {\r\n  geometryEmitterType = EMITTER_PARTICLE2;\r\n  width: number;\r\n  length: number;\r\n  speed: number;\r\n  latitude: number;\r\n  gravity: number;\r\n  emissionRate: number;\r\n  squirt: number;\r\n  lifeSpan: number;\r\n  variation: number;\r\n  tailLength: number;\r\n  timeMiddle: number;\r\n  columns: number;\r\n  rows: number;\r\n  teamColored = 0;\r\n  internalTexture: MdxTexture | null = null;\r\n  replaceableId: number;\r\n  textureId: number;\r\n  head: boolean;\r\n  tail: boolean;\r\n  cellWidth: number;\r\n  cellHeight: number;\r\n  colors: Float32Array[] = [];\r\n  scaling: Float32Array;\r\n  intervals: Float32Array[];\r\n  filterMode: number;\r\n  blendSrc: number;\r\n  blendDst: number;\r\n  priorityPlane: number;\r\n  lineEmitter: number;\r\n  unfogged: number;\r\n  modelSpace: number;\r\n  xYQuad: number;\r\n  /**\r\n   * Even if the internal texture isn't loaded, it's fine to run emitters based on this emitter object.\r\n   * \r\n   * The particles will simply be black.\r\n   */\r\n  ok = true;\r\n\r\n  constructor(model: MdxModel, emitter: MdlxParticleEmitter2, index: number) {\r\n    super(model, emitter, index);\r\n\r\n    this.width = emitter.width;\r\n    this.length = emitter.length;\r\n    this.speed = emitter.speed;\r\n    this.latitude = emitter.latitude;\r\n    this.gravity = emitter.gravity;\r\n    this.emissionRate = emitter.emissionRate * SETTING_PARTICLES_HIGH;\r\n    this.squirt = emitter.squirt;\r\n    this.lifeSpan = emitter.lifeSpan;\r\n    this.variation = emitter.variation;\r\n    this.tailLength = emitter.tailLength;\r\n    this.timeMiddle = emitter.timeMiddle;\r\n\r\n    const flags = emitter.flags;\r\n    this.lineEmitter = flags & Flags.LineEmitter;\r\n    this.unfogged = flags & Flags.Unfogged;\r\n    this.modelSpace = flags & Flags.ModelSpace;\r\n    this.xYQuad = flags & Flags.XYQuad;\r\n\r\n    const replaceableId = emitter.replaceableId;\r\n\r\n    this.columns = emitter.columns;\r\n    this.rows = emitter.rows;\r\n\r\n    if (replaceableId === 1 || replaceableId === 2) {\r\n      this.teamColored = 1;\r\n    } else if (replaceableId > 2) {\r\n      const texturesExt = model.reforged ? '.dds' : '.blp';\r\n\r\n      this.internalTexture = new MdxTexture(replaceableId, WrapMode.RepeatBoth);\r\n\r\n      model.viewer.load(`ReplaceableTextures\\\\${replaceableIds[replaceableId]}${texturesExt}`, model.pathSolver, model.solverParams)\r\n        .then((texture) => {\r\n          if (texture) {\r\n            (<MdxTexture>this.internalTexture).texture = <Texture>texture;\r\n          }\r\n        });\r\n    }\r\n\r\n    this.replaceableId = emitter.replaceableId;\r\n    this.textureId = emitter.textureId;\r\n\r\n    const headOrTail = emitter.headOrTail;\r\n\r\n    this.head = (headOrTail === HeadOrTail.Head || headOrTail === HeadOrTail.Both);\r\n    this.tail = (headOrTail === HeadOrTail.Tail || headOrTail === HeadOrTail.Both);\r\n\r\n    this.cellWidth = 1 / emitter.columns;\r\n    this.cellHeight = 1 / emitter.rows;\r\n\r\n    const colors = emitter.segmentColors;\r\n    const alpha = emitter.segmentAlphas;\r\n\r\n    for (let i = 0; i < 3; i++) {\r\n      const color = colors[i];\r\n\r\n      this.colors[i] = new Float32Array([color[0], color[1], color[2], alpha[i] / 255]);\r\n    }\r\n\r\n    this.scaling = emitter.segmentScaling;\r\n\r\n    const headIntervals = emitter.headIntervals;\r\n    const tailIntervals = emitter.tailIntervals;\r\n\r\n    // Change to Float32Array instead of Uint32Array to be able to pass the intervals directly using uniform3fv().\r\n    this.intervals = [\r\n      new Float32Array(headIntervals[0]),\r\n      new Float32Array(headIntervals[1]),\r\n      new Float32Array(tailIntervals[0]),\r\n      new Float32Array(tailIntervals[1]),\r\n    ];\r\n\r\n    const blendModes = emitterFilterMode(emitter.filterMode, this.model.viewer.gl);\r\n\r\n    this.filterMode = emitter.filterMode;\r\n    this.blendSrc = blendModes[0];\r\n    this.blendDst = blendModes[1];\r\n\r\n    this.priorityPlane = emitter.priorityPlane;\r\n  }\r\n\r\n  getWidth(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KP2N', sequence, frame, counter, this.width);\r\n  }\r\n\r\n  getLength(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KP2W', sequence, frame, counter, this.length);\r\n  }\r\n\r\n  getSpeed(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KP2S', sequence, frame, counter, this.speed);\r\n  }\r\n\r\n  getLatitude(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KP2L', sequence, frame, counter, this.latitude);\r\n  }\r\n\r\n  getGravity(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KP2G', sequence, frame, counter, this.gravity);\r\n  }\r\n\r\n  getEmissionRate(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KP2E', sequence, frame, counter, this.emissionRate);\r\n  }\r\n\r\n  getVariation(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KP2R', sequence, frame, counter, this.variation);\r\n  }\r\n\r\n  override getVisibility(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KP2V', sequence, frame, counter, 1);\r\n  }\r\n}\r\n","import RibbonEmitter from '../../../parsers/mdlx/ribbonemitter';\r\nimport MdxModel from './model';\r\nimport GenericObject from './genericobject';\r\nimport Layer from './layer';\r\nimport { EMITTER_RIBBON, SETTING_PARTICLES_HIGH } from './geometryemitterfuncs';\r\n\r\n/**\r\n * An MDX ribbon emitter.\r\n */\r\nexport default class RibbonEmitterObject extends GenericObject {\r\n  geometryEmitterType = EMITTER_RIBBON;\r\n  layer: Layer;\r\n  heightAbove: number;\r\n  heightBelow: number;\r\n  alpha: number;\r\n  color: Float32Array;\r\n  lifeSpan: number;\r\n  textureSlot: number;\r\n  emissionRate: number;\r\n  gravity: number;\r\n  columns: number;\r\n  rows: number;\r\n  /**\r\n   * Even if the internal texture isn't loaded, it's fine to run emitters based on this emitter object.\r\n   * \r\n   * The ribbons will simply be black.\r\n   */\r\n  ok = true;\r\n\r\n  constructor(model: MdxModel, emitter: RibbonEmitter, index: number) {\r\n    super(model, emitter, index);\r\n\r\n    this.layer = model.materials[emitter.materialId].layers[0];\r\n    this.heightAbove = emitter.heightAbove;\r\n    this.heightBelow = emitter.heightBelow;\r\n    this.alpha = emitter.alpha;\r\n    this.color = emitter.color;\r\n    this.lifeSpan = emitter.lifeSpan;\r\n    this.textureSlot = emitter.textureSlot;\r\n    this.emissionRate = emitter.emissionRate * SETTING_PARTICLES_HIGH;\r\n    this.gravity = emitter.gravity;\r\n    this.columns = emitter.columns;\r\n    this.rows = emitter.rows;\r\n  }\r\n\r\n  getHeightBelow(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KRHB', sequence, frame, counter, this.heightBelow);\r\n  }\r\n\r\n  getHeightAbove(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KRHA', sequence, frame, counter, this.heightAbove);\r\n  }\r\n\r\n  getTextureSlot(out: Uint32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KRTX', sequence, frame, counter, 0);\r\n  }\r\n\r\n  getColor(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getVectorValue(out, 'KRCO', sequence, frame, counter, this.color);\r\n  }\r\n\r\n  getAlpha(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KRAL', sequence, frame, counter, this.alpha);\r\n  }\r\n\r\n  /**\r\n   * Ribbon emitters specifically have an alpha.\r\n   * \r\n   * When this alpha is 0, naturally ribbons shouldn't be emitted.\r\n   * \r\n   * Therefore first check the alpha animation, and only if it's >0 check the visibility animation.\r\n   */\r\n  override getVisibility(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    const keyframe = this.getAlpha(out, sequence,frame,counter);\r\n    \r\n    if (out[0] === 0) {\r\n      return keyframe;\r\n    }\r\n\r\n    return this.getScalarValue(out, 'KRVS', sequence, frame, counter, 1);\r\n  }\r\n}\r\n","import { VEC3_ZERO } from '../../../common/gl-matrix-addon';\r\nimport MdlxCamera from '../../../parsers/mdlx/camera';\r\nimport AnimatedObject from './animatedobject';\r\nimport MdxModel from './model';\r\n\r\n/**\r\n * An MDX camera.\r\n */\r\nexport default class Camera extends AnimatedObject {\r\n  name: string;\r\n  position: Float32Array;\r\n  fieldOfView: number;\r\n  farClippingPlane: number;\r\n  nearClippingPlane: number;\r\n  targetPosition: Float32Array;\r\n\r\n  constructor(model: MdxModel, camera: MdlxCamera) {\r\n    super(model, camera);\r\n\r\n    this.name = camera.name;\r\n    this.position = camera.position;\r\n    this.fieldOfView = camera.fieldOfView;\r\n    this.farClippingPlane = camera.farClippingPlane;\r\n    this.nearClippingPlane = camera.nearClippingPlane;\r\n    this.targetPosition = camera.targetPosition;\r\n  }\r\n\r\n  getTranslation(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getVectorValue(out, 'KCTR', sequence, frame, counter, <Float32Array>VEC3_ZERO);\r\n  }\r\n\r\n  getTargetTranslation(out: Float32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getVectorValue(out, 'KTTR', sequence, frame, counter, <Float32Array>VEC3_ZERO);\r\n  }\r\n\r\n  getRotation(out: Uint32Array, sequence: number, frame: number, counter: number): number {\r\n    return this.getScalarValue(out, 'KCRL', sequence, frame, counter, 0);\r\n  }\r\n}\r\n","import EventObject from '../../../parsers/mdlx/eventobject';\r\nimport Texture from '../../texture';\r\nimport GenericResource from '../../genericresource';\r\nimport mdxHandler from './handler';\r\nimport MdxModel from './model';\r\nimport GenericObject from './genericobject';\r\nimport { emitterFilterMode } from './filtermode';\r\nimport { EMITTER_SPLAT, EMITTER_UBERSPLAT } from './geometryemitterfuncs';\r\nimport MdxModelInstance from './modelinstance';\r\nimport MdxTexture from './texture';\r\nimport { WrapMode } from '../../../parsers/mdlx/texture';\r\n\r\n/**\r\n * An event object.\r\n */\r\nexport default class EventObjectEmitterObject extends GenericObject {\r\n  geometryEmitterType = -1;\r\n  type: string;\r\n  id: string;\r\n  tracks: Uint32Array;\r\n  globalSequence = -1;\r\n  defval = new Uint32Array(1);\r\n  internalModel: MdxModel | null = null;\r\n  internalTexture: MdxTexture | null = null;\r\n  colors: Float32Array[] = [];\r\n  intervalTimes = new Float32Array(3);\r\n  scale = 0;\r\n  columns = 0;\r\n  rows = 0;\r\n  lifeSpan = 0;\r\n  blendSrc = 0;\r\n  blendDst = 0;\r\n  intervals: Float32Array[] = [];\r\n  distanceCutoff = 0;\r\n  maxDistance = 0;\r\n  minDistance = 0;\r\n  pitch = 0;\r\n  pitchVariance = 0;\r\n  volume = 0;\r\n  decodedBuffers: AudioBuffer[] = [];\r\n  ok = false;\r\n\r\n  constructor(model: MdxModel, eventObject: EventObject, index: number) {\r\n    super(model, eventObject, index);\r\n\r\n    const viewer = model.viewer;\r\n    const name = eventObject.name;\r\n    let type = name.substring(0, 3);\r\n    const id = name.substring(4);\r\n\r\n    // Same thing\r\n    if (type === 'FPT') {\r\n      type = 'SPL';\r\n    }\r\n\r\n    if (type === 'SPL') {\r\n      this.geometryEmitterType = EMITTER_SPLAT;\r\n    } else if (type === 'UBR') {\r\n      this.geometryEmitterType = EMITTER_UBERSPLAT;\r\n    }\r\n\r\n    this.type = type;\r\n    this.id = id;\r\n    this.tracks = eventObject.tracks;\r\n\r\n    const globalSequenceId = eventObject.globalSequenceId;\r\n    if (globalSequenceId !== -1) {\r\n      this.globalSequence = model.globalSequences[globalSequenceId];\r\n    }\r\n\r\n    // If this is a sound event object, and the viewer doesn't have audio enabled, don't do anything.\r\n    // This saves bandwidth when audio is not desired.\r\n    if (type === 'SND' && !viewer.audioEnabled) {\r\n      return;\r\n    }\r\n\r\n    // It's not possible to know ahead of time what file(s) event objects would need.\r\n    // This is because the SLKs are lazily loaded, and might not exist at this point.\r\n    // Therefore make a promise, and resolve it after all of the files loaded.\r\n    const resolve = viewer.promise();\r\n\r\n    mdxHandler.getEventObjectData(viewer, type, id, model.hd)\r\n      .then((data) => {\r\n        // Now the promise can be resolved to allow the viewer to handle events correctly.\r\n        resolve();\r\n\r\n        if (data) {\r\n          const { row, resources } = data;\r\n\r\n          this.ok = true;\r\n\r\n          if (type === 'SPN') {\r\n            this.internalModel = <MdxModel>resources[0];\r\n          } else if (type === 'SPL' || type === 'UBR') {\r\n            this.internalTexture = new MdxTexture(0, WrapMode.WrapBoth);\r\n            this.internalTexture.texture = <Texture>resources[0];\r\n\r\n            this.scale = row.number('Scale');\r\n            this.colors[0] = new Float32Array([row.number('StartR'), row.number('StartG'), row.number('StartB'), row.number('StartA')]);\r\n            this.colors[1] = new Float32Array([row.number('MiddleR'), row.number('MiddleG'), row.number('MiddleB'), row.number('MiddleA')]);\r\n            this.colors[2] = new Float32Array([row.number('EndR'), row.number('EndG'), row.number('EndB'), row.number('EndA')]);\r\n\r\n            if (type === 'SPL') {\r\n              this.columns = row.number('Columns');\r\n              this.rows = row.number('Rows');\r\n              this.lifeSpan = row.number('Lifespan') + row.number('Decay');\r\n\r\n              this.intervalTimes[0] = row.number('Lifespan');\r\n              this.intervalTimes[1] = row.number('Decay');\r\n\r\n              this.intervals[0] = new Float32Array([row.number('UVLifespanStart'), row.number('UVLifespanEnd'), row.number('LifespanRepeat')]);\r\n              this.intervals[1] = new Float32Array([row.number('UVDecayStart'), row.number('UVDecayEnd'), row.number('DecayRepeat')]);\r\n            } else {\r\n              this.columns = 1;\r\n              this.rows = 1;\r\n              this.lifeSpan = row.number('BirthTime') + row.number('PauseTime') + row.number('Decay');\r\n\r\n              this.intervalTimes[0] = row.number('BirthTime');\r\n              this.intervalTimes[1] = row.number('PauseTime');\r\n              this.intervalTimes[2] = row.number('Decay');\r\n            }\r\n\r\n            const blendModes = emitterFilterMode(row.number('BlendMode'), viewer.gl);\r\n\r\n            this.blendSrc = blendModes[0];\r\n            this.blendDst = blendModes[1];\r\n          } else {\r\n            this.distanceCutoff = row.number('DistanceCutoff');\r\n            this.maxDistance = row.number('MaxDistance');\r\n            this.minDistance = row.number('MinDistance');\r\n            this.pitch = row.number('Pitch');\r\n            this.pitchVariance = row.number('PitchVariance');\r\n            this.volume = row.number('Volume');\r\n\r\n            for (const resource of resources) {\r\n              this.decodedBuffers.push(<AudioBuffer>(<GenericResource>resource).data);\r\n            }\r\n          }\r\n        }\r\n      });\r\n  }\r\n\r\n  getValue(out: Uint32Array, instance: MdxModelInstance): number {\r\n    if (this.globalSequence !== -1) {\r\n      const globalSequence = this.globalSequence;\r\n\r\n      return this.getValueAtTime(out, instance.counter % globalSequence, 0, globalSequence);\r\n    } else if (instance.sequence !== -1) {\r\n      const interval = this.model.sequences[instance.sequence].interval;\r\n\r\n      return this.getValueAtTime(out, instance.frame, interval[0], interval[1]);\r\n    } else {\r\n      out[0] = this.defval[0];\r\n\r\n      return -1;\r\n    }\r\n  }\r\n\r\n  getValueAtTime(out: Uint32Array, frame: number, start: number, end: number): number {\r\n    const tracks = this.tracks;\r\n\r\n    if (frame >= start && frame <= end) {\r\n      for (let i = tracks.length - 1; i > -1; i--) {\r\n        if (tracks[i] < start) {\r\n          out[0] = 0;\r\n\r\n          return i;\r\n        } else if (tracks[i] <= frame) {\r\n          out[0] = 1;\r\n\r\n          return i;\r\n        }\r\n      }\r\n    }\r\n\r\n    out[0] = 0;\r\n\r\n    return -1;\r\n  }\r\n}\r\n","import MdlxCollisionShape, { Shape } from '../../../parsers/mdlx/collisionshape';\r\nimport GenericObject from './genericobject';\r\nimport MdxModel from './model';\r\n\r\n/**\r\n * A collision shape.\r\n */\r\nexport default class CollisionShape extends GenericObject {\r\n  type: Shape;\r\n  vertices: Float32Array[];\r\n  boundsRadius: number;\r\n\r\n  constructor(model: MdxModel, collisionShape: MdlxCollisionShape, index: number) {\r\n    super(model, collisionShape, index);\r\n\r\n    this.type = collisionShape.type;\r\n    this.vertices = collisionShape.vertices;\r\n    this.boundsRadius = collisionShape.boundsRadius;\r\n  }\r\n}\r\n","import Geoset from './geoset';\r\nimport Layer from './layer';\r\nimport Material from './material';\r\n\r\n/**\r\n * The type of skinning a batch uses.\r\n * \r\n * Vertex groups are used for SD batches with a range of 0-4 bones per vertex.\r\n * \r\n * Extended vertex groups are used for SD batches with a range of 0-8 bones per vertex.\r\n * \r\n * Skin is used for HD batches with a range of 0-4 bones per vertex.\r\n */\r\nexport enum SkinningType  {\r\n  VertexGroups,\r\n  ExtendedVertexGroups,\r\n  Skin,\r\n}\r\n\r\n/**\r\n * An MDX batch.\r\n */\r\nexport class Batch {\r\n  index: number;\r\n  geoset: Geoset;\r\n  layer: Layer;\r\n  material: Material | null;\r\n  skinningType: SkinningType;\r\n  isHd: boolean;\r\n\r\n  constructor(index: number, geoset: Geoset, layerOrMaterial: Layer | Material, skinningType: SkinningType, isHd: boolean) {\r\n    let material;\r\n    let layer;\r\n\r\n    if (isHd) {\r\n      material = <Material>layerOrMaterial;\r\n      layer = material.layers[0];\r\n    } else {\r\n      material = null;\r\n      layer = <Layer>layerOrMaterial;\r\n    }\r\n\r\n    this.index = index;\r\n    this.geoset = geoset;\r\n    this.skinningType = skinningType;\r\n    this.isHd = isHd;\r\n    this.layer = layer;\r\n    this.material = material;\r\n  }\r\n}\r\n","import Shader from '../../gl/shader';\r\nimport MdxModel from './model';\r\nimport GeosetAnimation from './geosetanimation';\r\nimport { SkinningType } from './batch';\r\n\r\n/**\r\n * A geoset.\r\n */\r\nexport default class Geoset {\r\n  model: MdxModel;\r\n  index: number;\r\n  positionOffset: number;\r\n  normalOffset: number;\r\n  uvOffset: number;\r\n  tangentOffset: number;\r\n  skinOffset: number;\r\n  faceOffset: number;\r\n  vertices: number;\r\n  elements: number;\r\n  faceType: number;\r\n  geosetAnimation: GeosetAnimation | null = null;\r\n\r\n  constructor(model: MdxModel, index: number, positionOffset: number, normalOffset: number, uvOffset: number, tangentOffset: number, skinOffset: number, faceOffset: number, vertices: number, elements: number, faceType: number) {\r\n    this.model = model;\r\n    this.index = index;\r\n    this.positionOffset = positionOffset;\r\n    this.normalOffset = normalOffset;\r\n    this.uvOffset = uvOffset;\r\n    this.tangentOffset = tangentOffset;\r\n    this.skinOffset = skinOffset;\r\n    this.faceOffset = faceOffset;\r\n    this.vertices = vertices;\r\n    this.elements = elements;\r\n    this.faceType = faceType;\r\n\r\n    for (const geosetAnimation of model.geosetAnimations) {\r\n      if (geosetAnimation.geosetId === index) {\r\n        this.geosetAnimation = geosetAnimation;\r\n      }\r\n    }\r\n  }\r\n\r\n  bindShared(gl: WebGLRenderingContext, attribs: {[key: string]: number }, coordId: number): void {\r\n    gl.vertexAttribPointer(attribs['a_position'], 3, gl.FLOAT, false, 0, this.positionOffset);\r\n    gl.vertexAttribPointer(attribs['a_normal'], 3, gl.FLOAT, false, 0, this.normalOffset);\r\n    gl.vertexAttribPointer(attribs['a_uv'], 2, gl.FLOAT, false, 0, this.uvOffset + coordId * this.vertices * 8);\r\n  }\r\n\r\n  bindVertexGroups(gl: WebGLRenderingContext, attribs: {[key: string]: number }): void {\r\n    const model = this.model;\r\n    const skinDataType = model.skinDataType;\r\n    const bytesPerSkinElement = model.bytesPerSkinElement;\r\n\r\n    gl.vertexAttribPointer(attribs['a_bones'], 4, skinDataType, false, 5 * bytesPerSkinElement, this.skinOffset);\r\n    gl.vertexAttribPointer(attribs['a_boneNumber'], 1, skinDataType, false, 5 * bytesPerSkinElement, this.skinOffset + 4 * bytesPerSkinElement);\r\n  }\r\n\r\n  bindVertexGroupsExtended(gl: WebGLRenderingContext, attribs: {[key: string]: number }): void {\r\n    const model = this.model;\r\n    const skinDataType = model.skinDataType;\r\n    const bytesPerSkinElement = model.bytesPerSkinElement;\r\n\r\n    gl.vertexAttribPointer(attribs['a_bones'], 4, skinDataType, false, 9 * bytesPerSkinElement, this.skinOffset);\r\n    gl.vertexAttribPointer(attribs['a_extendedBones'], 4, skinDataType, false, 9 * bytesPerSkinElement, this.skinOffset + 4 * bytesPerSkinElement);\r\n    gl.vertexAttribPointer(attribs['a_boneNumber'], 1, skinDataType, false, 9 * bytesPerSkinElement, this.skinOffset + 8 * bytesPerSkinElement);\r\n  }\r\n\r\n  bindSkin(gl: WebGLRenderingContext, attribs: {[key: string]: number }): void {\r\n    gl.vertexAttribPointer(attribs['a_bones'], 4, gl.UNSIGNED_BYTE, false, 8, this.skinOffset);\r\n    gl.vertexAttribPointer(attribs['a_weights'], 4, gl.UNSIGNED_BYTE, true, 8, this.skinOffset + 4);\r\n  }\r\n\r\n  bind(shader: Shader, coordId: number): void {\r\n    const gl = this.model.viewer.gl;\r\n    const attribs = shader.attribs;\r\n\r\n    this.bindShared(gl, attribs, coordId);\r\n    this.bindVertexGroups(gl, attribs);\r\n  }\r\n\r\n  bindExtended(shader: Shader, coordId: number): void{\r\n    const gl = this.model.viewer.gl;\r\n    const attribs = shader.attribs;\r\n\r\n    this.bindShared(gl, attribs, coordId);\r\n    this.bindVertexGroupsExtended(gl, attribs);\r\n  }\r\n\r\n  bindHd(shader: Shader, skinningType: SkinningType, coordId: number): void {\r\n    const gl = this.model.viewer.gl;\r\n    const attribs = shader.attribs;\r\n\r\n    this.bindShared(gl, attribs, coordId);\r\n\r\n    gl.vertexAttribPointer(attribs['a_tangent'], 4, gl.FLOAT, false, 0, this.tangentOffset);\r\n\r\n    if (skinningType === SkinningType.Skin) {\r\n      this.bindSkin(gl, attribs);\r\n    } else if (skinningType === SkinningType.ExtendedVertexGroups) {\r\n      this.bindVertexGroupsExtended(gl, attribs);\r\n    } else {\r\n      this.bindVertexGroups(gl, attribs);\r\n    }\r\n  }\r\n\r\n  render(): void {\r\n    const gl = this.model.viewer.gl;\r\n\r\n    gl.drawElements(this.faceType, this.elements, gl.UNSIGNED_SHORT, this.faceOffset);\r\n  }\r\n}\r\n","import Scene from '../../scene';\r\nimport Texture from '../../texture';\r\nimport MdxModel from './model';\r\nimport MdxModelInstance from './modelinstance';\r\nimport Material from './material';\r\nimport mdxHandler, { MdxHandlerObject } from './handler';\r\nimport { SkinningType } from './batch';\r\n\r\n/**\r\n * A group of batches that are going to be rendered together.\r\n */\r\nexport default class BatchGroup {\r\n  model: MdxModel;\r\n  skinningType: SkinningType;\r\n  isHd: boolean;\r\n  objects: number[] = [];\r\n\r\n  constructor(model: MdxModel, skinningType: SkinningType, isHd: boolean) {\r\n    this.model = model;\r\n    this.skinningType = skinningType;\r\n    this.isHd = isHd;\r\n  }\r\n\r\n  render(instance: MdxModelInstance): void {\r\n    const scene = <Scene>instance.scene;\r\n    const camera = scene.camera;\r\n    const textureOverrides = instance.textureOverrides;\r\n    const layerAlphas = instance.layerAlphas;\r\n    const model = this.model;\r\n    const textures = model.textures;\r\n    const batches = model.batches;\r\n    const viewer = model.viewer;\r\n    const mdxCache = <MdxHandlerObject>viewer.sharedCache.get('mdx');\r\n    const gl = viewer.gl;\r\n    const webgl = viewer.webgl;\r\n    const skinningType = this.skinningType;\r\n    const isHd = this.isHd;\r\n    const teamColors = mdxCache.teamColors;\r\n    const teamGlows = mdxCache.teamGlows;\r\n    const shader = mdxHandler.getBatchShader(viewer, skinningType, isHd);\r\n\r\n    shader.use();\r\n\r\n    const uniforms = shader.uniforms;\r\n\r\n    gl.uniformMatrix4fv(uniforms['u_VP'], false, camera.viewProjectionMatrix);\r\n\r\n    const boneTexture = instance.boneTexture;\r\n\r\n    // Instances of models with no bones don't have a bone texture.\r\n    if (boneTexture) {\r\n      boneTexture.bind(15);\r\n\r\n      gl.uniform1f(uniforms['u_hasBones'], 1);\r\n      gl.uniform1i(uniforms['u_boneMap'], 15);\r\n      gl.uniform1f(uniforms['u_vectorSize'], 1 / boneTexture.width);\r\n      gl.uniform1f(uniforms['u_rowSize'], 1);\r\n    } else {\r\n      gl.uniform1f(uniforms['u_hasBones'], 0);\r\n    }\r\n\r\n    gl.uniform3fv(uniforms['u_lightPos'], scene.lightPosition);\r\n\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, model.arrayBuffer);\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, model.elementBuffer);\r\n\r\n    if (isHd) {\r\n      gl.uniform1i(uniforms['u_diffuseMap'], 0);\r\n      gl.uniform1i(uniforms['u_normalsMap'], 1);\r\n      gl.uniform1i(uniforms['u_ormMap'], 2);\r\n      gl.uniform1i(uniforms['u_emissiveMap'], 3);\r\n      gl.uniform1i(uniforms['u_teamColorMap'], 4);\r\n      gl.uniform1i(uniforms['u_environmentMap'], 5);\r\n\r\n      // gl.uniform1i(uniforms['u_lutMap'], 6);\r\n      // gl.uniform1i(uniforms['u_envDiffuseMap'], 7);\r\n      // gl.uniform1i(uniforms['u_envSpecularMap'], 8);\r\n\r\n      gl.disable(gl.BLEND);\r\n      gl.enable(gl.DEPTH_TEST);\r\n      gl.depthMask(true);\r\n\r\n      gl.uniformMatrix4fv(uniforms['u_MV'], false, camera.viewMatrix);\r\n\r\n      gl.uniform3fv(uniforms['u_eyePos'], camera.location);\r\n\r\n      for (const index of this.objects) {\r\n        const batch = batches[index];\r\n        const geoset = batch.geoset;\r\n        const material = <Material>batch.material;\r\n        const [diffuseLayer, normalsLayer, ormLayer, emissiveLayer, teamColorLayer, environmentMapLayer] = material.layers;\r\n        const layerAlpha = layerAlphas[diffuseLayer.index];\r\n\r\n        if (layerAlpha > 0) {\r\n          gl.uniform1f(uniforms['u_layerAlpha'], layerAlpha);\r\n          gl.uniform1f(uniforms['u_filterMode'], diffuseLayer.filterMode);\r\n\r\n          const diffuseId = diffuseLayer.textureId;\r\n          const normalsId = normalsLayer.textureId;\r\n          const ormId = ormLayer.textureId;\r\n          const emissiveId = emissiveLayer.textureId;\r\n          const teamColorId = teamColorLayer.textureId;\r\n          const environmentMapId = environmentMapLayer.textureId;\r\n\r\n          const diffuseTexture = textures[diffuseId];\r\n          const normalsTexture = textures[normalsId];\r\n          const ormTexture = textures[ormId];\r\n          const emissiveTexture = textures[emissiveId];\r\n          let teamColorTexture = textures[teamColorId];\r\n          const environmentMapTexture = textures[environmentMapId];\r\n\r\n          if (teamColorTexture.replaceableId === 0 || teamColorTexture.replaceableId === 1) {\r\n            teamColorTexture = teamColors[instance.teamColor];\r\n          }\r\n          \r\n          const actualDiffuseTexture = textureOverrides.get(diffuseId) || diffuseTexture.texture;\r\n          const actualNormalsTexture = textureOverrides.get(normalsId) || normalsTexture.texture;\r\n          const actualOrmTexture = textureOverrides.get(ormId) || ormTexture.texture;\r\n          const actualEmissiveTexture = textureOverrides.get(emissiveId) || emissiveTexture.texture;\r\n          const actualTeamColorTexture = textureOverrides.get(teamColorId) || teamColorTexture.texture;\r\n          const actualEnvironmentMapTexture = textureOverrides.get(environmentMapId) || environmentMapTexture.texture;\r\n\r\n          webgl.bindTextureAndWrap(actualDiffuseTexture, 0, diffuseTexture.wrapS, diffuseTexture.wrapT);\r\n          webgl.bindTextureAndWrap(actualNormalsTexture, 1, normalsTexture.wrapS, normalsTexture.wrapT);\r\n          webgl.bindTextureAndWrap(actualOrmTexture, 2, ormTexture.wrapS, ormTexture.wrapT);\r\n          webgl.bindTextureAndWrap(actualEmissiveTexture, 3, emissiveTexture.wrapS, emissiveTexture.wrapT);\r\n          webgl.bindTextureAndWrap(actualTeamColorTexture, 4, teamColorTexture.wrapS, teamColorTexture.wrapT);\r\n          webgl.bindTextureAndWrap(actualEnvironmentMapTexture, 5, environmentMapTexture.wrapS, environmentMapTexture.wrapT);\r\n\r\n          // const { lutTexture, envDiffuseTexture, envSpecularTexture }= mdxCache;\r\n          // if (lutTexture && envDiffuseTexture && envSpecularTexture) {\r\n          //   webgl.bindTextureAndWrap(lutTexture.texture, 6, lutTexture.wrapS, lutTexture.wrapT);\r\n          //   webgl.bindTextureAndWrap(envDiffuseTexture.texture, 7, envDiffuseTexture.wrapS, envDiffuseTexture.wrapT);\r\n          //   webgl.bindTextureAndWrap(envSpecularTexture.texture, 8, envSpecularTexture.wrapS, envSpecularTexture.wrapT);\r\n          // }\r\n\r\n          geoset.bindHd(shader, batch.skinningType, diffuseLayer.coordId);\r\n          geoset.render();\r\n        }\r\n      }\r\n    } else {\r\n      const geosetColors = instance.geosetColors;\r\n      const layerTextures = instance.layerTextures;\r\n      const uvAnims = instance.uvAnims;\r\n\r\n      gl.uniform4fv(uniforms['u_vertexColor'], instance.vertexColor);\r\n      gl.uniform1i(uniforms['u_texture'], 0);\r\n      \r\n      for (const object of this.objects) {\r\n        const batch = batches[object];\r\n        const geoset = batch.geoset;\r\n        const layer = batch.layer;\r\n        const geosetIndex = geoset.index;\r\n        const layerIndex = layer.index;\r\n        const geosetColor = geosetColors[geosetIndex];\r\n        const layerAlpha = layerAlphas[layerIndex];\r\n\r\n        if (geosetColor[3] > 0.01 && layerAlpha > 0.01) {\r\n          const textureIndex = layerTextures[layerIndex];\r\n          const layerTexture = textures[textureIndex];\r\n          const uvAnim = uvAnims[layerIndex];\r\n\r\n          gl.uniform4fv(uniforms['u_geosetColor'], geosetColor);\r\n\r\n          gl.uniform1f(uniforms['u_layerAlpha'], layerAlpha);\r\n          gl.uniform1f(uniforms['u_unshaded'], layer.unshaded);\r\n\r\n          gl.uniform2f(uniforms['u_uvTrans'], uvAnim[0], uvAnim[1]);\r\n          gl.uniform2f(uniforms['u_uvRot'], uvAnim[2], uvAnim[3]);\r\n          gl.uniform1f(uniforms['u_uvScale'], uvAnim[4]);\r\n\r\n          layer.bind(shader);\r\n\r\n          let texture: Texture | null | undefined = textureOverrides.get(textureIndex);\r\n\r\n          if (!texture) {\r\n            const replaceable = layerTexture.replaceableId;\r\n            let mdxTexture;\r\n\r\n            if (replaceable === 1) {\r\n              mdxTexture = teamColors[instance.teamColor];\r\n            } else if (replaceable === 2) {\r\n              mdxTexture = teamGlows[instance.teamColor];\r\n            } else {\r\n              mdxTexture = layerTexture;\r\n            }\r\n\r\n            if (mdxTexture) {\r\n              texture = mdxTexture.texture;\r\n            }\r\n          }\r\n\r\n          webgl.bindTextureAndWrap(texture, 0, layerTexture.wrapS, layerTexture.wrapT);\r\n\r\n          if (skinningType === SkinningType.ExtendedVertexGroups) {\r\n            geoset.bindExtended(shader, layer.coordId);\r\n          } else {\r\n            geoset.bind(shader, layer.coordId);\r\n          }\r\n\r\n          geoset.render();\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import Scene from '../../scene';\r\nimport MdxModel from './model';\r\nimport MdxModelInstance from './modelinstance';\r\nimport { GeometryEmitter, renderEmitter } from './geometryemitterfuncs';\r\nimport { MdxHandlerObject } from './handler';\r\n\r\n/**\r\n * A group of emitters that are going to be rendered together.\r\n */\r\nexport default class EmitterGroup {\r\n  model: MdxModel;\r\n  objects: number[] = [];\r\n\r\n  constructor(model: MdxModel) {\r\n    this.model = model;\r\n  }\r\n\r\n  render(instance: MdxModelInstance): void {\r\n    const scene = <Scene>instance.scene;\r\n    const nodes = instance.nodes;\r\n    const model = instance.model;\r\n    const viewer = model.viewer;\r\n    const gl = viewer.gl;\r\n    const instancedArrays = <ANGLE_instanced_arrays>viewer.webgl.extensions['ANGLE_instanced_arrays'];\r\n    const mdxCache = <MdxHandlerObject>viewer.sharedCache.get('mdx');\r\n    const shader = mdxCache.particlesShader;\r\n    const uniforms = shader.uniforms;\r\n    const attribs = shader.attribs;\r\n    const rectBuffer = mdxCache.rectBuffer;\r\n\r\n    gl.depthMask(false);\r\n    gl.enable(gl.BLEND);\r\n    gl.disable(gl.CULL_FACE);\r\n    gl.enable(gl.DEPTH_TEST);\r\n\r\n    shader.use();\r\n\r\n    gl.uniformMatrix4fv(uniforms['u_VP'], false, scene.camera.viewProjectionMatrix);\r\n    gl.uniform1i(uniforms['u_texture'], 0);\r\n\r\n    instancedArrays.vertexAttribDivisorANGLE(attribs['a_position'], 0);\r\n\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, rectBuffer);\r\n    gl.vertexAttribPointer(attribs['a_position'], 1, gl.UNSIGNED_BYTE, false, 0, 0);\r\n\r\n    instancedArrays.vertexAttribDivisorANGLE(attribs['a_p0'], 1);\r\n    instancedArrays.vertexAttribDivisorANGLE(attribs['a_p1'], 1);\r\n    instancedArrays.vertexAttribDivisorANGLE(attribs['a_p2'], 1);\r\n    instancedArrays.vertexAttribDivisorANGLE(attribs['a_p3'], 1);\r\n    instancedArrays.vertexAttribDivisorANGLE(attribs['a_health'], 1);\r\n    instancedArrays.vertexAttribDivisorANGLE(attribs['a_color'], 1);\r\n    instancedArrays.vertexAttribDivisorANGLE(attribs['a_tail'], 1);\r\n    instancedArrays.vertexAttribDivisorANGLE(attribs['a_leftRightTop'], 1);\r\n\r\n    for (const index of this.objects) {\r\n      renderEmitter(<GeometryEmitter>nodes[index].object, shader);\r\n    }\r\n\r\n    instancedArrays.vertexAttribDivisorANGLE(attribs['a_leftRightTop'], 0);\r\n    instancedArrays.vertexAttribDivisorANGLE(attribs['a_tail'], 0);\r\n    instancedArrays.vertexAttribDivisorANGLE(attribs['a_color'], 0);\r\n    instancedArrays.vertexAttribDivisorANGLE(attribs['a_health'], 0);\r\n    instancedArrays.vertexAttribDivisorANGLE(attribs['a_p3'], 0);\r\n    instancedArrays.vertexAttribDivisorANGLE(attribs['a_p2'], 0);\r\n    instancedArrays.vertexAttribDivisorANGLE(attribs['a_p1'], 0);\r\n    instancedArrays.vertexAttribDivisorANGLE(attribs['a_p0'], 0);\r\n  }\r\n}\r\n","import MdxModel from './model';\r\nimport { Batch } from './batch';\r\nimport BatchGroup from './batchgroup';\r\nimport EmitterGroup from './emittergroup';\r\nimport GenericObject from './genericobject';\r\nimport ParticleEmitter2Object from './particleemitter2object';\r\nimport RibbonEmitterObject from './ribbonemitterobject';\r\nimport EventObjectEmitterObject from './eventobjectemitterobject';\r\n\r\nfunction getPrio(object: Batch | ParticleEmitter2Object | RibbonEmitterObject | EventObjectEmitterObject): number {\r\n  if (object instanceof Batch || object instanceof RibbonEmitterObject) {\r\n    return object.layer.priorityPlane;\r\n  } else if (object instanceof ParticleEmitter2Object) {\r\n    return object.priorityPlane;\r\n  } else {\r\n    return 0;\r\n  }\r\n}\r\n\r\nfunction matchingGroup(group: BatchGroup | EmitterGroup, object: Batch | ParticleEmitter2Object | RibbonEmitterObject | EventObjectEmitterObject): boolean {\r\n  if (group instanceof BatchGroup) {\r\n    return (object instanceof Batch) && (object.skinningType === group.skinningType) && (object.isHd === group.isHd);\r\n  } else {\r\n    // All of the emitter objects are generic objects.\r\n    return (object instanceof GenericObject);\r\n  }\r\n}\r\n\r\nfunction createMatchingGroup(model: MdxModel, object: Batch | ParticleEmitter2Object | RibbonEmitterObject | EventObjectEmitterObject): BatchGroup | EmitterGroup {\r\n  if (object instanceof Batch) {\r\n    return new BatchGroup(model, object.skinningType, object.isHd);\r\n  } else {\r\n    return new EmitterGroup(model);\r\n  }\r\n}\r\n\r\nexport default function setupGroups(model: MdxModel): void {\r\n  const opaqueBatches = [];\r\n  let translucentBatches = [];\r\n\r\n  for (const batch of model.batches) {\r\n    if (batch.layer.filterMode < 2) {\r\n      opaqueBatches.push(batch);\r\n    } else {\r\n      translucentBatches.push(batch);\r\n    }\r\n  }\r\n\r\n  const opaqueGroups = model.opaqueGroups;\r\n  const translucentGroups = model.translucentGroups;\r\n  let currentGroup = null;\r\n\r\n  for (const object of opaqueBatches) {\r\n    if (!currentGroup || !matchingGroup(currentGroup, object)) {\r\n      currentGroup = <BatchGroup>createMatchingGroup(model, object);\r\n\r\n      opaqueGroups.push(currentGroup);\r\n    }\r\n\r\n    currentGroup.objects.push(object.index);\r\n  }\r\n\r\n  // Sort the translucent batches based on filter mode.\r\n  translucentBatches = translucentBatches.sort((a, b) => a.layer.filterMode - b.layer.filterMode);  \r\n\r\n  // Sort between all of the translucent batches and emitters based on their priority planes.\r\n  // Event objects have no explicit priority planes, and default to 0.\r\n  const objects = [...translucentBatches, ...model.eventObjects, ...model.particleEmitters2, ...model.ribbonEmitters].sort((a, b) => getPrio(a) - getPrio(b));\r\n\r\n  currentGroup = null;\r\n\r\n  for (const object of objects) {\r\n    if (object instanceof Batch || object.geometryEmitterType !== -1) {\r\n      if (!currentGroup || !matchingGroup(currentGroup, object)) {\r\n        currentGroup = createMatchingGroup(model, object);\r\n\r\n        translucentGroups.push(currentGroup);\r\n      }\r\n\r\n      currentGroup.objects.push(object.index);\r\n    }\r\n  }\r\n}\r\n","import { quat } from 'gl-matrix';\r\nimport { SkeletalNode } from '../../skeletalnode';\r\n\r\n/**\r\n * An MDX node.\r\n */\r\nexport default class MdxNode extends SkeletalNode {\r\n  override convertBasis(rotation: quat): void {\r\n    quat.rotateY(rotation, rotation, -Math.PI / 2);\r\n    quat.rotateX(rotation, rotation, -Math.PI / 2);\r\n  }\r\n}\r\n","import MdxModel from './model';\r\nimport MdxModelInstance from './modelinstance';\r\nimport Attachment from './attachment';\r\n\r\n// Heap allocations needed for this module.\r\nconst visibilityHeap = new Float32Array(1);\r\n\r\n/**\r\n * An attachment instance.\r\n */\r\nexport default class AttachmentInstance {\r\n  instance: MdxModelInstance;\r\n  attachment: Attachment;\r\n  internalInstance: MdxModelInstance;\r\n\r\n  constructor(instance: MdxModelInstance, attachment: Attachment) {\r\n    const internalModel = <MdxModel>attachment.internalModel;\r\n    const internalInstance = internalModel.addInstance();\r\n\r\n    internalInstance.setSequenceLoopMode(2);\r\n    internalInstance.dontInheritScaling = false;\r\n    internalInstance.hide();\r\n    internalInstance.setParent(instance.nodes[attachment.objectId]);\r\n\r\n    this.instance = instance;\r\n    this.attachment = attachment;\r\n    this.internalInstance = internalInstance;\r\n  }\r\n\r\n  update(): void {\r\n    const instance = this.instance;\r\n    const internalInstance = this.internalInstance;\r\n\r\n    if (instance.scene && instance.sequence !== -1) {\r\n      this.attachment.getVisibility(visibilityHeap, instance.sequence, instance.frame, instance.counter);\r\n\r\n      if (visibilityHeap[0] > 0.1) {\r\n        // The parent instance might not actually be in a scene.\r\n        // This happens if loading a local model, where loading is instant and adding to a scene always comes afterwards.\r\n        // Therefore, do it here dynamically.\r\n        instance.scene.addInstance(internalInstance);\r\n\r\n        if (internalInstance.hidden()) {\r\n          internalInstance.show();\r\n\r\n          // Every time the attachment becomes visible again, restart its first sequence.\r\n          internalInstance.setSequence(0);\r\n        }\r\n      } else {\r\n        internalInstance.hide();\r\n      }\r\n    }\r\n  }\r\n}\r\n","import Scene from './scene';\r\nimport ModelInstance from './modelinstance';\r\nimport EmittedObject from './emittedobject';\r\n\r\n/**\r\n * An emitter.\r\n */\r\nexport default abstract class Emitter {\r\n  instance: ModelInstance;\r\n  objects: EmittedObject[] = [];\r\n  alive = 0;\r\n  currentEmission = 0;\r\n\r\n  abstract createObject(): EmittedObject;\r\n  abstract updateEmission(dt: number): void;\r\n  abstract emit(): void;\r\n\r\n  constructor(instance: ModelInstance) {\r\n    this.instance = instance;\r\n  }\r\n\r\n  /**\r\n   * Update this emitter.\r\n   */\r\n  update(dt: number): void {\r\n    // Emit new objects if needed.\r\n    this.updateEmission(dt);\r\n\r\n    const currentEmission = this.currentEmission;\r\n\r\n    if (currentEmission >= 1) {\r\n      for (let i = 0; i < currentEmission; i += 1) {\r\n        this.emit();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear any emitted objects.\r\n   */\r\n  clear(): void {\r\n    const objects = this.objects;\r\n\r\n    for (let i = 0, l = this.alive; i < l; i++) {\r\n      const object = objects[i];\r\n\r\n      object.health = 0;\r\n    }\r\n\r\n    this.currentEmission = 0;\r\n  }\r\n\r\n  emitObject(emitData?: unknown): EmittedObject {\r\n    const objects = this.objects;\r\n\r\n    // If there are no unused objects, create a new one.\r\n    if (this.alive === objects.length) {\r\n      objects.push(this.createObject());\r\n    }\r\n\r\n    // Get the first unused object.\r\n    const object = objects[this.alive];\r\n\r\n    object.index = this.alive;\r\n\r\n    object.bind(emitData);\r\n\r\n    this.alive += 1;\r\n    this.currentEmission -= 1;\r\n\r\n    const scene = <Scene>this.instance.scene;\r\n\r\n    scene.emittedObjectUpdater.add(object);\r\n\r\n    return object;\r\n  }\r\n\r\n  kill(object: EmittedObject): void {\r\n    const objects = this.objects;\r\n\r\n    this.alive -= 1;\r\n\r\n    const otherObject = objects[this.alive];\r\n\r\n    objects[object.index] = otherObject;\r\n    objects[this.alive] = object;\r\n\r\n    otherObject.index = object.index;\r\n    object.index = -1;\r\n  }\r\n}\r\n","import Emitter from '../../emitter';\r\nimport ParticleEmitterObject from './particleemitterobject';\r\nimport ParticleEmitter2Object from './particleemitter2object';\r\nimport RibbonEmitterObject from './ribbonemitterobject';\r\nimport EventObjectEmitterObject from './eventobjectemitterobject';\r\nimport MdxModelInstance from './modelinstance';\r\n\r\n/**\r\n * The base of all MDX emitters.\r\n */\r\nexport default abstract class MdxEmitter extends Emitter {\r\n  emitterObject: ParticleEmitterObject | ParticleEmitter2Object | RibbonEmitterObject | EventObjectEmitterObject;\r\n\r\n  constructor(instance: MdxModelInstance, emitterObject: ParticleEmitterObject | ParticleEmitter2Object | RibbonEmitterObject | EventObjectEmitterObject) {\r\n    super(instance);\r\n\r\n    this.emitterObject = emitterObject;\r\n  }\r\n\r\n  override update(dt: number): void {\r\n    if (this.emitterObject.ok) {\r\n      super.update(dt);\r\n    }\r\n  }\r\n}\r\n","import Emitter from './emitter';\r\n\r\n/**\r\n * An emitted object.\r\n */\r\nexport default abstract class EmittedObject {\r\n  emitter: Emitter;\r\n  index = -1;\r\n  health = 0;\r\n\r\n  abstract bind(emitData?: unknown): void;\r\n  abstract update(dt: number): void;\r\n\r\n  constructor(emitter: Emitter) {\r\n    this.emitter = emitter;\r\n  }\r\n}\r\n","import { vec3, quat } from 'gl-matrix';\r\nimport { VEC3_UNIT_Z } from '../../../common/gl-matrix-addon';\r\nimport { randomInRange } from '../../../common/math';\r\nimport Scene from '../../scene';\r\nimport EmittedObject from '../../emittedobject';\r\nimport ParticleEmitterObject from './particleemitterobject';\r\nimport MdxModelInstance from './modelinstance';\r\nimport ParticleEmitter from './particleemitter';\r\nimport MdxModel from './model';\r\n\r\nconst rotationHeap = quat.create();\r\nconst velocityHeap = vec3.create();\r\nconst latitudeHeap = new Float32Array(1);\r\n// const longitudeHeap = new Float32Array(1);\r\nconst lifeSpanHeap = new Float32Array(1);\r\nconst gravityHeap = new Float32Array(1);\r\nconst speedHeap = new Float32Array(1);\r\n\r\n/**\r\n * A spawned model particle.\r\n */\r\nexport default class Particle extends EmittedObject {\r\n  internalInstance: MdxModelInstance;\r\n  velocity = vec3.create();\r\n  gravity = 0;\r\n\r\n  constructor(emitter: ParticleEmitter) {\r\n    super(emitter);\r\n\r\n    const emitterObject = <ParticleEmitterObject>emitter.emitterObject;\r\n    const model = <MdxModel>emitterObject.internalModel;\r\n\r\n    this.internalInstance = model.addInstance();\r\n  }\r\n\r\n  bind(): void {\r\n    const emitter = <ParticleEmitter>this.emitter;\r\n    const instance = <MdxModelInstance>emitter.instance;\r\n    const sequence = instance.sequence;\r\n    const frame = instance.frame;\r\n    const counter = instance.counter;\r\n    const scene = <Scene>instance.scene;\r\n    const emitterObject = <ParticleEmitterObject>emitter.emitterObject;\r\n    const node = instance.nodes[emitterObject.index];\r\n    const internalInstance = this.internalInstance;\r\n    const scale = node.worldScale;\r\n    const velocity = this.velocity;\r\n\r\n    emitterObject.getLatitude(latitudeHeap, sequence, frame, counter);\r\n    // emitterObject.getLongitude(longitudeHeap, sequence, frame, counter);\r\n    emitterObject.getLifeSpan(lifeSpanHeap, sequence, frame, counter);\r\n    emitterObject.getGravity(gravityHeap, sequence, frame, counter);\r\n    emitterObject.getSpeed(speedHeap, sequence, frame, counter);\r\n\r\n    this.health = lifeSpanHeap[0];\r\n    this.gravity = gravityHeap[0] * scale[2];\r\n\r\n    // Local rotation\r\n    quat.identity(rotationHeap);\r\n    quat.rotateZ(rotationHeap, rotationHeap, randomInRange(-Math.PI, Math.PI));\r\n    quat.rotateY(rotationHeap, rotationHeap, randomInRange(-latitudeHeap[0], latitudeHeap[0]));\r\n    vec3.transformQuat(velocity, VEC3_UNIT_Z, rotationHeap);\r\n\r\n    // World rotation\r\n    vec3.transformQuat(velocity, velocity, node.worldRotation);\r\n\r\n    // Apply speed\r\n    vec3.scale(velocity, velocity, speedHeap[0]);\r\n\r\n    // Apply the parent's scale\r\n    vec3.mul(velocity, velocity, scale);\r\n\r\n    internalInstance.setScene(scene);\r\n    internalInstance.setSequence(0);\r\n    internalInstance.setTransformation(node.worldLocation, quat.setAxisAngle(rotationHeap, VEC3_UNIT_Z, randomInRange(0, Math.PI * 2)), node.worldScale);\r\n    internalInstance.show();\r\n  }\r\n\r\n  update(dt: number): void {\r\n    const internalInstance = this.internalInstance;\r\n\r\n    this.health -= dt;\r\n\r\n    if (this.health > 0) {\r\n      const velocity = this.velocity;\r\n\r\n      velocity[2] -= this.gravity * dt;\r\n\r\n      internalInstance.move(vec3.scale(velocityHeap, velocity, dt));\r\n    } else {\r\n      internalInstance.hide();\r\n    }\r\n  }\r\n}\r\n","import ParticleEmitterObject from './particleemitterobject';\r\nimport MdxModelInstance from './modelinstance';\r\nimport MdxEmitter from './emitter';\r\nimport Particle from './particle';\r\n\r\nconst emissionRateHeap = new Float32Array(1);\r\n\r\n/**\r\n * An MDX particle emitter.\r\n */\r\nexport default class ParticleEmitter extends MdxEmitter {\r\n  updateEmission(dt: number): void {\r\n    const instance = <MdxModelInstance>this.instance;\r\n\r\n    if (instance.allowParticleSpawn) {\r\n      const emitterObject = <ParticleEmitterObject>this.emitterObject;\r\n\r\n      emitterObject.getEmissionRate(emissionRateHeap, instance.sequence, instance.frame, instance.counter);\r\n\r\n      this.currentEmission += emissionRateHeap[0] * dt;\r\n    }\r\n  }\r\n\r\n  emit(): void {\r\n    this.emitObject();\r\n  }\r\n\r\n  createObject(): Particle {\r\n    return new Particle(this);\r\n  }\r\n}\r\n","import { vec3, quat } from 'gl-matrix';\r\nimport { VEC3_UNIT_Z } from '../../../common/gl-matrix-addon';\r\nimport { degToRad, randomInRange } from '../../../common/math';\r\nimport EmittedObject from '../../emittedobject';\r\nimport ParticleEmitter2Object from './particleemitter2object';\r\nimport ParticleEmitter2 from './particleemitter2';\r\nimport MdxModelInstance from './modelinstance';\r\n\r\nconst rotationHeap = quat.create();\r\nconst widthHeap = new Float32Array(1);\r\nconst lengthHeap = new Float32Array(1);\r\nconst latitudeHeap = new Float32Array(1);\r\nconst variationHeap = new Float32Array(1);\r\nconst speedHeap = new Float32Array(1);\r\nconst gravityHeap = new Float32Array(1);\r\n\r\n/**\r\n * A type 2 particle.\r\n */\r\nexport default class Particle2 extends EmittedObject {\r\n  tail = 0;\r\n  gravity = 0;\r\n  location = vec3.create();\r\n  velocity = vec3.create();\r\n  scale = vec3.create();\r\n  facing = 0; // XYQuad\r\n\r\n  bind(tail: number): void {\r\n    const emitter = <ParticleEmitter2>this.emitter;\r\n    const instance = <MdxModelInstance>emitter.instance;\r\n    const sequence = instance.sequence;\r\n    const frame = instance.frame;\r\n    const counter = instance.counter;\r\n    const emitterObject = <ParticleEmitter2Object>emitter.emitterObject;\r\n\r\n    emitterObject.getWidth(widthHeap, sequence, frame, counter);\r\n    emitterObject.getLength(lengthHeap, sequence, frame, counter);\r\n    emitterObject.getLatitude(latitudeHeap, sequence, frame, counter);\r\n    emitterObject.getVariation(variationHeap, sequence, frame, counter);\r\n    emitterObject.getSpeed(speedHeap, sequence, frame, counter);\r\n    emitterObject.getGravity(gravityHeap, sequence, frame, counter);\r\n\r\n    const node = emitter.node;\r\n    const pivot = node.pivot;\r\n    const scale = node.worldScale;\r\n    const width = widthHeap[0] * 0.5;\r\n    const length = lengthHeap[0] * 0.5;\r\n    const latitude = degToRad(latitudeHeap[0]);\r\n    const variation = variationHeap[0];\r\n    const speed = speedHeap[0];\r\n    const location = this.location;\r\n    const velocity = this.velocity;\r\n\r\n    this.health = emitterObject.lifeSpan;\r\n    this.tail = tail;\r\n    this.gravity = gravityHeap[0] * scale[2];\r\n\r\n    vec3.copy(this.scale, scale);\r\n\r\n    // Local location\r\n    location[0] = pivot[0] + randomInRange(-width, width);\r\n    location[1] = pivot[1] + randomInRange(-length, length);\r\n    location[2] = pivot[2];\r\n\r\n    // World location\r\n    if (!emitterObject.modelSpace) {\r\n      vec3.transformMat4(location, location, node.worldMatrix);\r\n    }\r\n\r\n    // Local rotation\r\n    quat.identity(rotationHeap);\r\n    quat.rotateZ(rotationHeap, rotationHeap, Math.PI / 2);\r\n    quat.rotateY(rotationHeap, rotationHeap, randomInRange(-latitude, latitude));\r\n\r\n    // If this is not a line emitter, emit in a sphere rather than a circle.\r\n    if (!emitterObject.lineEmitter) {\r\n      quat.rotateX(rotationHeap, rotationHeap, randomInRange(-latitude, latitude));\r\n    }\r\n\r\n    // World rotation\r\n    if (!emitterObject.modelSpace) {\r\n      quat.mul(rotationHeap, node.worldRotation, rotationHeap);\r\n    }\r\n\r\n    // Apply the rotation\r\n    vec3.transformQuat(velocity, VEC3_UNIT_Z, rotationHeap);\r\n\r\n    // Apply speed\r\n    vec3.scale(velocity, velocity, speed * (1 + randomInRange(-variation, variation)));\r\n\r\n    // Apply the parent's scale\r\n    if (!emitterObject.modelSpace) {\r\n      vec3.mul(velocity, velocity, scale);\r\n    }\r\n\r\n    // XY particles are rotated to face their velocity on the XY plane.\r\n    if (emitterObject.xYQuad) {\r\n      this.facing = Math.atan2(velocity[1], velocity[0]) - Math.PI + Math.PI / 8;\r\n    }\r\n  }\r\n\r\n  update(dt: number): void {\r\n    this.health -= dt;\r\n\r\n    if (this.health > 0) {\r\n      const location = this.location;\r\n      const velocity = this.velocity;\r\n\r\n      velocity[2] -= this.gravity * dt;\r\n\r\n      location[0] += velocity[0] * dt;\r\n      location[1] += velocity[1] * dt;\r\n      location[2] += velocity[2] * dt;\r\n    }\r\n  }\r\n}\r\n","import ParticleEmitter2Object from './particleemitter2object';\r\nimport MdxModelInstance from './modelinstance';\r\nimport MdxNode from './node';\r\nimport MdxEmitter from './emitter';\r\nimport Particle2 from './particle2';\r\n\r\nconst emissionRateHeap = new Float32Array(1);\r\n\r\n/**\r\n * An MDX particle emitter type 2.\r\n */\r\nexport default class ParticleEmitter2 extends MdxEmitter {\r\n  node: MdxNode;\r\n  lastEmissionKey = -1;\r\n\r\n  constructor(instance: MdxModelInstance, emitterObject: ParticleEmitter2Object) {\r\n    super(instance, emitterObject);\r\n\r\n    this.node = instance.nodes[emitterObject.index];\r\n  }\r\n\r\n  updateEmission(dt: number): void {\r\n    const instance = <MdxModelInstance>this.instance;\r\n\r\n    if (instance.allowParticleSpawn) {\r\n      const emitterObject = <ParticleEmitter2Object>this.emitterObject;\r\n      const keyframe = emitterObject.getEmissionRate(emissionRateHeap, instance.sequence, instance.frame, instance.counter);\r\n\r\n      if (emitterObject.squirt) {\r\n        if (keyframe !== this.lastEmissionKey) {\r\n          this.currentEmission += emissionRateHeap[0];\r\n        }\r\n\r\n        this.lastEmissionKey = keyframe;\r\n      } else {\r\n        this.currentEmission += emissionRateHeap[0] * dt;\r\n      }\r\n    }\r\n  }\r\n\r\n  emit(): void {\r\n    const emitterObject = <ParticleEmitter2Object>this.emitterObject;\r\n\r\n    if (emitterObject.head) {\r\n      this.emitObject(0);\r\n    }\r\n\r\n    if (emitterObject.tail) {\r\n      this.emitObject(1);\r\n    }\r\n  }\r\n\r\n  createObject(): Particle2 {\r\n    return new Particle2(this);\r\n  }\r\n}\r\n","import { vec3 } from 'gl-matrix';\r\nimport EmittedObject from '../../emittedobject';\r\nimport RibbonEmitterObject from './ribbonemitterobject';\r\nimport MdxModelInstance from './modelinstance';\r\nimport RibbonEmitter from './ribbonemitter';\r\n\r\nconst belowHeap = vec3.create();\r\nconst aboveHeap = vec3.create();\r\nconst colorHeap = new Float32Array(3);\r\nconst alphaHeap = new Float32Array(1);\r\nconst slotHeap = new Uint32Array(1);\r\n\r\n/**\r\n * A ribbon.\r\n */\r\nexport default class Ribbon extends EmittedObject {\r\n  vertices = new Float32Array(6);\r\n  color = new Uint8Array(4);\r\n  slot = 0;\r\n  prev: Ribbon | null = null;\r\n  next: Ribbon | null = null;\r\n\r\n  bind(): void {\r\n    const emitter = <RibbonEmitter>this.emitter;\r\n    const instance = <MdxModelInstance>emitter.instance;\r\n    const sequence = instance.sequence;\r\n    const frame = instance.frame;\r\n    const counter = instance.counter;\r\n    const emitterObject = <RibbonEmitterObject>emitter.emitterObject;\r\n    const node = instance.nodes[emitterObject.index];\r\n    const [x, y, z] = node.pivot;\r\n    const worldMatrix = node.worldMatrix;\r\n    const vertices = this.vertices;\r\n\r\n    this.health = emitter.emitterObject.lifeSpan;\r\n\r\n    emitterObject.getHeightBelow(<Float32Array>belowHeap, sequence, frame, counter);\r\n    emitterObject.getHeightAbove(<Float32Array>aboveHeap, sequence, frame, counter);\r\n\r\n    belowHeap[1] = y - belowHeap[0];\r\n    belowHeap[0] = x;\r\n    belowHeap[2] = z;\r\n\r\n    aboveHeap[1] = y + aboveHeap[0];\r\n    aboveHeap[0] = x;\r\n    aboveHeap[2] = z;\r\n\r\n    vec3.transformMat4(belowHeap, belowHeap, worldMatrix);\r\n    vec3.transformMat4(aboveHeap, aboveHeap, worldMatrix);\r\n\r\n    vertices[0] = aboveHeap[0];\r\n    vertices[1] = aboveHeap[1];\r\n    vertices[2] = aboveHeap[2];\r\n    vertices[3] = belowHeap[0];\r\n    vertices[4] = belowHeap[1];\r\n    vertices[5] = belowHeap[2];\r\n  }\r\n\r\n  update(dt: number): void {\r\n    this.health -= dt;\r\n\r\n    if (this.health > 0) {\r\n      const emitter = <RibbonEmitter>this.emitter;\r\n      const instance = <MdxModelInstance>emitter.instance;\r\n      const sequence = instance.sequence;\r\n      const frame = instance.frame;\r\n      const counter = instance.counter;\r\n      const emitterObject = <RibbonEmitterObject>emitter.emitterObject;\r\n      const color = this.color;\r\n      const vertices = this.vertices;\r\n      const gravity = emitterObject.gravity * dt * dt;\r\n\r\n      emitterObject.getColor(colorHeap, sequence, frame, counter);\r\n      emitterObject.getAlpha(alphaHeap, sequence, frame, counter);\r\n      emitterObject.getTextureSlot(slotHeap, sequence, frame, counter);\r\n\r\n      vertices[1] -= gravity;\r\n      vertices[4] -= gravity;\r\n\r\n      color[0] = colorHeap[0] * 255;\r\n      color[1] = colorHeap[1] * 255;\r\n      color[2] = colorHeap[2] * 255;\r\n      color[3] = alphaHeap[0] * 255;\r\n\r\n      this.slot = slotHeap[0];\r\n    }\r\n  }\r\n}\r\n","import RibbonEmitterObject from './ribbonemitterobject';\r\nimport MdxModelInstance from './modelinstance';\r\nimport MdxEmitter from './emitter';\r\nimport Ribbon from './ribbon';\r\n\r\n/**\r\n * A ribbon emitter.\r\n */\r\nexport default class RibbonEmitter extends MdxEmitter {\r\n  first: Ribbon | null = null;\r\n  last: Ribbon | null = null;\r\n\r\n  updateEmission(dt: number): void {\r\n    const instance = <MdxModelInstance>this.instance;\r\n\r\n    if (instance.allowParticleSpawn) {\r\n      const emitterObject = <RibbonEmitterObject>this.emitterObject;\r\n\r\n      // It doesn't make sense to emit more than 1 ribbon at the same time.\r\n      this.currentEmission += emitterObject.emissionRate * dt;\r\n    }\r\n  }\r\n\r\n  emit(): void {\r\n    const ribbon = <Ribbon>this.emitObject();\r\n    const last = this.last;\r\n\r\n    if (last) {\r\n      last.next = ribbon;\r\n      ribbon.prev = last;\r\n    } else {\r\n      this.first = ribbon;\r\n    }\r\n\r\n    this.last = ribbon;\r\n  }\r\n\r\n  override kill(object: Ribbon): void {\r\n    super.kill(object);\r\n\r\n    const prev = object.prev;\r\n    const next = object.next;\r\n\r\n    if (object === this.first) {\r\n      this.first = next;\r\n    }\r\n\r\n    if (object === this.last) {\r\n      this.first = null;\r\n      this.last = null;\r\n    }\r\n\r\n    if (prev) {\r\n      prev.next = next;\r\n    }\r\n\r\n    if (next) {\r\n      next.prev = prev;\r\n    }\r\n\r\n    object.prev = null;\r\n    object.next = null;\r\n  }\r\n\r\n  createObject(): Ribbon {\r\n    return new Ribbon(this);\r\n  }\r\n}\r\n","import MdxModelInstance from './modelinstance';\r\nimport MdxEmitter from './emitter';\r\nimport EventObjectEmitterObject from './eventobjectemitterobject';\r\n\r\nconst valueHeap = new Uint32Array(1);\r\n\r\n/**\r\n * The abstract base MDX event object emitter.\r\n */\r\nexport default abstract class EventObjectEmitter extends MdxEmitter {\r\n  lastValue = 0;\r\n\r\n  updateEmission(_dt: number): void {\r\n    const instance = <MdxModelInstance>this.instance;\r\n\r\n    if (instance.allowParticleSpawn) {\r\n      const emitterObject = <EventObjectEmitterObject>this.emitterObject;\r\n\r\n      emitterObject.getValue(valueHeap, instance);\r\n\r\n      const value = valueHeap[0];\r\n\r\n      if (value === 1 && value !== this.lastValue) {\r\n        this.currentEmission += 1;\r\n      }\r\n\r\n      this.lastValue = value;\r\n    }\r\n  }\r\n\r\n  emit(): void {\r\n    this.emitObject();\r\n  }\r\n}\r\n","import Scene from '../../scene';\r\nimport EmittedObject from '../../emittedobject';\r\nimport MdxModel from './model';\r\nimport EventObjectEmitterObject from './eventobjectemitterobject';\r\nimport MdxModelInstance from './modelinstance';\r\nimport EventObjectSpnEmitter from './eventobjectspnemitter';\r\n\r\n/**\r\n * An MDX spawned model object.\r\n */\r\nexport default class EventObjectSpn extends EmittedObject {\r\n  internalInstance: MdxModelInstance;\r\n\r\n  constructor(emitter: EventObjectSpnEmitter) {\r\n    super(emitter);\r\n\r\n    const emitterObject = <EventObjectEmitterObject>emitter.emitterObject;\r\n    const internalModel = <MdxModel>emitterObject.internalModel;\r\n\r\n    this.internalInstance = internalModel.addInstance();\r\n  }\r\n\r\n  bind(): void {\r\n    const emitter = <EventObjectSpnEmitter>this.emitter;\r\n    const instance = <MdxModelInstance>emitter.instance;\r\n    const scene = <Scene>instance.scene;\r\n    const node = instance.nodes[emitter.emitterObject.index];\r\n    const internalInstance = this.internalInstance;\r\n\r\n    internalInstance.setScene(scene);\r\n    internalInstance.setSequence(0);\r\n    internalInstance.setTransformation(node.worldLocation, node.worldRotation, node.worldScale);\r\n    internalInstance.show();\r\n\r\n    this.health = 1;\r\n  }\r\n\r\n  update(_dt: number): void{\r\n    const instance = this.internalInstance;\r\n    const model = <MdxModel>instance.model;\r\n\r\n    // Once the sequence finishes, this event object dies\r\n    if (instance.frame >= model.sequences[0].interval[1]) {\r\n      this.health = 0;\r\n\r\n      instance.hide();\r\n    }\r\n  }\r\n}\r\n","import EventObjectEmitter from './eventobjectemitter';\r\nimport EventObjectSpn from './eventobjectspn';\r\n\r\n/**\r\n * An MDX model emitter.\r\n */\r\nexport default class EventObjectSpnEmitter extends EventObjectEmitter {\r\n  createObject(): EventObjectSpn {\r\n    return new EventObjectSpn(this);\r\n  }\r\n}\r\n","import { vec3 } from 'gl-matrix';\r\nimport EmittedObject from '../../emittedobject';\r\nimport EventObjectEmitterObject from './eventobjectemitterobject';\r\nimport MdxModelInstance from './modelinstance';\r\nimport EventObjectSplEmitter from './eventobjectsplemitter';\r\nimport EventObjectUbrEmitter from './eventobjectubremitter';\r\n\r\nconst vertexHeap = vec3.create();\r\n\r\n/**\r\n * An MDX splat or ubersplat object.\r\n */\r\nexport default class EventObjectSplUbr extends EmittedObject {\r\n  vertices = new Float32Array(12);\r\n\r\n  bind(): void {\r\n    const emitter = <EventObjectSplEmitter | EventObjectUbrEmitter>this.emitter;\r\n    const instance = <MdxModelInstance>emitter.instance;\r\n    const emitterObject = <EventObjectEmitterObject>emitter.emitterObject;\r\n    const vertices = this.vertices;\r\n    const scale = emitterObject.scale;\r\n    const { worldLocation, worldRotation } = instance.nodes[emitterObject.index];\r\n\r\n    this.health = emitterObject.lifeSpan;\r\n\r\n    vec3.set(vertexHeap, scale, scale, 0);\r\n    vec3.transformQuat(vertexHeap, vertexHeap, worldRotation);\r\n    vec3.add(<vec3>vertices.subarray(0, 2), vertexHeap, worldLocation);\r\n\r\n    vec3.set(vertexHeap, -scale, scale, 0);\r\n    vec3.transformQuat(vertexHeap, vertexHeap, worldRotation);\r\n    vec3.add(<vec3>vertices.subarray(3, 5), vertexHeap, worldLocation);\r\n\r\n    vec3.set(vertexHeap, -scale, -scale, 0);\r\n    vec3.transformQuat(vertexHeap, vertexHeap, worldRotation);\r\n    vec3.add(<vec3>vertices.subarray(6, 8), vertexHeap, worldLocation);\r\n\r\n    vec3.set(vertexHeap, scale, -scale, 0);\r\n    vec3.transformQuat(vertexHeap, vertexHeap, worldRotation);\r\n    vec3.add(<vec3>vertices.subarray(9, 11), vertexHeap, worldLocation);\r\n  }\r\n\r\n  update(dt: number): void {\r\n    this.health -= dt;\r\n  }\r\n}\r\n","import EventObjectEmitter from './eventobjectemitter';\r\nimport EventObjectSplUbr from './eventobjectsplubr';\r\n\r\n/**\r\n * An MDX splat emitter.\r\n */\r\nexport default class EventObjectSplEmitter extends EventObjectEmitter {\r\n  createObject(): EventObjectSplUbr {\r\n    return new EventObjectSplUbr(this);\r\n  }\r\n}\r\n","import EventObjectEmitter from './eventobjectemitter';\r\nimport EventObjectSplUbr from './eventobjectsplubr';\r\n\r\n/**\r\n * An MDX ubersplat emitter.\r\n */\r\nexport default class EventObjectUbrEmitter extends EventObjectEmitter {\r\n  createObject(): EventObjectSplUbr {\r\n    return new EventObjectSplUbr(this);\r\n  }\r\n}\r\n","import Scene from '../../scene';\r\nimport EmittedObject from '../../emittedobject';\r\nimport EventObjectEmitterObject from './eventobjectemitterobject';\r\nimport MdxModelInstance from './modelinstance';\r\nimport EventObjectSndEmitter from './eventobjectsndemitter';\r\n\r\n/**\r\n * An MDX spawned sound object.\r\n */\r\nexport default class EventObjectSnd extends EmittedObject {\r\n  bind(): void {\r\n    const emitter = <EventObjectSndEmitter>this.emitter;\r\n    const instance = <MdxModelInstance>emitter.instance;\r\n    const viewer = instance.model.viewer;\r\n    const scene = <Scene>instance.scene;\r\n\r\n    // Is audio enabled both viewer-wide and in this scene?\r\n    if (viewer.audioEnabled && scene.audioEnabled) {\r\n      const emitterObject = <EventObjectEmitterObject>emitter.emitterObject;\r\n      const node = instance.nodes[emitterObject.index];\r\n      const audioContext = <AudioContext>scene.audioContext;\r\n      const decodedBuffers = emitterObject.decodedBuffers;\r\n      const panner = audioContext.createPanner();\r\n      const source = audioContext.createBufferSource();\r\n      const location = node.worldLocation;\r\n\r\n      // Panner settings.\r\n      panner.positionX.value = location[0];\r\n      panner.positionY.value = location[1];\r\n      panner.positionZ.value = location[2];\r\n      panner.maxDistance = emitterObject.distanceCutoff;\r\n      panner.refDistance = emitterObject.minDistance;\r\n      panner.connect(audioContext.destination);\r\n\r\n      // Source.\r\n      source.buffer = decodedBuffers[(Math.random() * decodedBuffers.length) | 0];\r\n      source.connect(panner);\r\n\r\n      // Make a sound.\r\n      source.start(0);\r\n    }\r\n  }\r\n\r\n  update(_dt: number): void {\r\n\r\n  }\r\n}\r\n","import EventObjectEmitter from './eventobjectemitter';\r\nimport EventObjectSnd from './eventobjectsnd';\r\n\r\n/**\r\n * An MDX sound emitter.\r\n */\r\nexport default class EventObjectSndEmitter extends EventObjectEmitter {\r\n  createObject(): EventObjectSnd {\r\n    return new EventObjectSnd(this);\r\n  }\r\n}\r\n","import { vec3, quat } from 'gl-matrix';\r\nimport ModelInstance from '../../modelinstance';\r\nimport { createSkeletalNodes, SkeletalNode } from '../../skeletalnode';\r\nimport DataTexture from '../../gl/datatexture';\r\nimport Texture from '../../texture';\r\nimport MdxNode from './node';\r\nimport AttachmentInstance from './attachmentinstance';\r\nimport ParticleEmitter from './particleemitter';\r\nimport ParticleEmitter2 from './particleemitter2';\r\nimport RibbonEmitter from './ribbonemitter';\r\nimport EventObjectEmitter from './eventobjectemitter';\r\nimport EventObjectSpnEmitter from './eventobjectspnemitter';\r\nimport EventObjectSplEmitter from './eventobjectsplemitter';\r\nimport EventObjectUbrEmitter from './eventobjectubremitter';\r\nimport EventObjectSndEmitter from './eventobjectsndemitter';\r\nimport MdxModel from './model';\r\nimport GenericObject from './genericobject';\r\nimport { EMITTER_PARTICLE2_TEXTURE_OFFSET, EMITTER_EVENT_TEXTURE_OFFSET } from './geometryemitterfuncs';\r\nimport Bounds from '../../bounds';\r\n\r\nconst visibilityHeap = new Float32Array(1);\r\nconst translationHeap = vec3.create();\r\nconst rotationHeap = quat.create();\r\nconst scaleHeap = vec3.create();\r\nconst colorHeap = new Float32Array(3);\r\nconst alphaHeap = new Float32Array(1);\r\nconst textureIdHeap = new Uint32Array(1);\r\n\r\ntype SkeletalNodeObject = AttachmentInstance | ParticleEmitter | ParticleEmitter2 | RibbonEmitter | EventObjectEmitter;\r\n\r\n/**\r\n * An MDX model instance.\r\n */\r\nexport default class MdxModelInstance extends ModelInstance {\r\n  attachments: AttachmentInstance[] = [];\r\n  particleEmitters: ParticleEmitter[] = [];\r\n  particleEmitters2: ParticleEmitter2[] = [];\r\n  ribbonEmitters: RibbonEmitter[] = [];\r\n  eventObjectEmitters: (EventObjectSpnEmitter | EventObjectSplEmitter | EventObjectUbrEmitter | EventObjectSndEmitter)[] = [];\r\n  nodes: SkeletalNode[] = [];\r\n  sortedNodes: SkeletalNode[] = [];\r\n  frame = 0;\r\n  // Global sequences\r\n  counter = 0;\r\n  sequence = -1;\r\n  sequenceLoopMode = 0;\r\n  sequenceEnded = false;\r\n  teamColor = 0;\r\n  vertexColor = new Float32Array([1, 1, 1, 1]);\r\n  // Particles do not spawn when the sequence is -1, or when the sequence finished and it's not repeating\r\n  allowParticleSpawn = false;\r\n  // If forced is true, everything will update regardless of variancy.\r\n  // Any later non-forced update can then use variancy to skip updating things.\r\n  // It is set to true every time the sequence is set with setSequence().\r\n  forced = true;\r\n  geosetColors: Float32Array[] = [];\r\n  layerAlphas: number[] = [];\r\n  layerTextures: number[] = [];\r\n  uvAnims: Float32Array[] = [];\r\n  worldMatrices: Float32Array | null = null;\r\n  boneTexture: DataTexture | null = null;\r\n\r\n  constructor(model: MdxModel) {\r\n    super(model);\r\n\r\n    for (let i = 0, l = model.geosets.length; i < l; i++) {\r\n      this.geosetColors[i] = new Float32Array(4);\r\n    }\r\n\r\n    for (let i = 0, l = model.layers.length; i < l; i++) {\r\n      this.layerAlphas[i] = 0;\r\n      this.layerTextures[i] = 0;\r\n      this.uvAnims[i] = new Float32Array(5);\r\n    }\r\n\r\n    // Create the needed amount of shared nodes.\r\n    const sharedNodeData = createSkeletalNodes(model.genericObjects.length, MdxNode);\r\n    const nodes = sharedNodeData.nodes;\r\n    let nodeIndex = 0;\r\n\r\n    this.nodes.push(...nodes);\r\n\r\n    // A shared typed array for all world matrices of the internal nodes.\r\n    this.worldMatrices = sharedNodeData.worldMatrices;\r\n\r\n    // And now initialize all of the nodes and objects\r\n    for (const bone of model.bones) {\r\n      this.initNode(nodes, nodes[nodeIndex++], bone);\r\n    }\r\n\r\n    for (const light of model.lights) {\r\n      this.initNode(nodes, nodes[nodeIndex++], light);\r\n    }\r\n\r\n    for (const helper of model.helpers) {\r\n      this.initNode(nodes, nodes[nodeIndex++], helper);\r\n    }\r\n\r\n    for (const attachment of model.attachments) {\r\n      let attachmentInstance;\r\n\r\n      // Attachments may have game models attached to them, such as Undead and Nightelf building animations.\r\n      if (attachment.internalModel) {\r\n        attachmentInstance = new AttachmentInstance(this, attachment);\r\n\r\n        this.attachments.push(attachmentInstance);\r\n      }\r\n\r\n      this.initNode(nodes, nodes[nodeIndex++], attachment, attachmentInstance);\r\n    }\r\n\r\n    for (const emitterObject of model.particleEmitters) {\r\n      const emitter = new ParticleEmitter(this, emitterObject);\r\n\r\n      this.particleEmitters.push(emitter);\r\n\r\n      this.initNode(nodes, nodes[nodeIndex++], emitterObject, emitter);\r\n    }\r\n\r\n    for (const emitterObject of model.particleEmitters2) {\r\n      const emitter = new ParticleEmitter2(this, emitterObject);\r\n\r\n      this.particleEmitters2.push(emitter);\r\n\r\n      this.initNode(nodes, nodes[nodeIndex++], emitterObject, emitter);\r\n    }\r\n\r\n    for (const emitterObject of model.ribbonEmitters) {\r\n      const emitter = new RibbonEmitter(this, emitterObject);\r\n\r\n      this.ribbonEmitters.push(emitter);\r\n\r\n      this.initNode(nodes, nodes[nodeIndex++], emitterObject, emitter);\r\n    }\r\n\r\n    for (const emitterObject of model.eventObjects) {\r\n      const type = emitterObject.type;\r\n      let emitter;\r\n\r\n      if (type === 'SPN') {\r\n        emitter = new EventObjectSpnEmitter(this, emitterObject);\r\n      } else if (type === 'SPL') {\r\n        emitter = new EventObjectSplEmitter(this, emitterObject);\r\n      } else if (type === 'UBR') {\r\n        emitter = new EventObjectUbrEmitter(this, emitterObject);\r\n      } else {\r\n        emitter = new EventObjectSndEmitter(this, emitterObject);\r\n      }\r\n\r\n      this.eventObjectEmitters.push(emitter);\r\n\r\n      this.initNode(nodes, nodes[nodeIndex++], emitterObject, emitter);\r\n    }\r\n\r\n    for (const collisionShape of model.collisionShapes) {\r\n      this.initNode(nodes, nodes[nodeIndex++], collisionShape);\r\n    }\r\n\r\n    // Save a sorted array of all of the nodes, such that every child node comes after its parent.\r\n    // This allows for flat iteration when updating.\r\n    const hierarchy = model.hierarchy;\r\n\r\n    for (let i = 0, l = nodes.length; i < l; i++) {\r\n      this.sortedNodes[i] = nodes[hierarchy[i]];\r\n    }\r\n\r\n    if (model.bones.length) {\r\n      this.boneTexture = new DataTexture(model.viewer.gl, 4, model.bones.length * 4, 1);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Override the texture at the given index.\r\n   * \r\n   * If a texture isn't given, removes the override if there was one.\r\n   */\r\n  setTexture(index: number, texture?: Texture): void {\r\n    this.overrideTexture(index, texture);\r\n  }\r\n\r\n  /**\r\n   * Override the texture of the particle emitter the given index.\r\n   * \r\n   * If a texture isn't given, removes the override if there was one.\r\n   */\r\n  setParticle2Texture(index: number, texture?: Texture): void {\r\n    this.overrideTexture(EMITTER_PARTICLE2_TEXTURE_OFFSET + index, texture);\r\n  }\r\n\r\n  /**\r\n   * Override the texture of the event emitter the given index.\r\n   * \r\n   * If a texture isn't given, removes the override if there was one.\r\n   */\r\n  setEventTexture(index: number, texture?: Texture): void {\r\n    this.overrideTexture(EMITTER_EVENT_TEXTURE_OFFSET + index, texture);\r\n  }\r\n\r\n  /**\r\n   * Clear all of the emitted objects that belong to this instance.\r\n   */\r\n  override clearEmittedObjects(): void {\r\n    for (const emitter of this.particleEmitters) {\r\n      emitter.clear();\r\n    }\r\n\r\n    for (const emitter of this.particleEmitters2) {\r\n      emitter.clear();\r\n    }\r\n\r\n    for (const emitter of this.ribbonEmitters) {\r\n      emitter.clear();\r\n    }\r\n\r\n    for (const emitter of this.eventObjectEmitters) {\r\n      emitter.clear();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialize a skeletal node.\r\n   */\r\n  initNode(nodes: SkeletalNode[], node: SkeletalNode, genericObject: GenericObject, object?: SkeletalNodeObject): void {\r\n    vec3.copy(node.pivot, genericObject.pivot);\r\n\r\n    if (genericObject.parentId === -1) {\r\n      node.parent = this;\r\n    } else {\r\n      node.parent = nodes[genericObject.parentId];\r\n    }\r\n\r\n    node.dontInheritTranslation = genericObject.dontInheritTranslation;\r\n    node.dontInheritRotation = genericObject.dontInheritRotation;\r\n    node.dontInheritScaling = genericObject.dontInheritScaling;\r\n    \r\n    if (genericObject.billboarded) {\r\n      node.billboarded = true;\r\n    } else if (genericObject.billboardedX) {\r\n      node.billboardedX = true;\r\n    } else if (genericObject.billboardedY) {\r\n      node.billboardedY = true;\r\n    } else if (genericObject.billboardedZ) {\r\n      node.billboardedZ = true;\r\n    }\r\n\r\n    if (object) {\r\n      node.object = object;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Overriden to hide also attachment models.\r\n   */\r\n  override hide(): void {\r\n    super.hide();\r\n\r\n    this.resetAttachments();\r\n  }\r\n\r\n  /**\r\n   * Updates all of this instance internal nodes and objects.\r\n   * Nodes that are determined to not be visible will not be updated, nor will any of their children down the hierarchy.\r\n   */\r\n  updateNodes(dt: number, forced: boolean): void {\r\n    const sequence = this.sequence;\r\n    const frame = this.frame;\r\n    const counter = this.counter;\r\n    const sortedNodes = this.sortedNodes;\r\n    const model = <MdxModel>this.model;\r\n    const sortedGenericObjects = model.sortedGenericObjects;\r\n\r\n    // Update the nodes\r\n    for (let i = 0, l = sortedNodes.length; i < l; i++) {\r\n      const genericObject = sortedGenericObjects[i];\r\n      const node = sortedNodes[i];\r\n      const parent = <MdxNode | SkeletalNode>node.parent;\r\n      let wasDirty = forced || parent.wasDirty || genericObject.anyBillboarding;\r\n      const variants = genericObject.variants;\r\n\r\n      // Local node transformation.\r\n      // Use variants to skip animation data when possible.\r\n      if (forced || variants['generic'][sequence]) {\r\n        wasDirty = true;\r\n\r\n        // Translation\r\n        if (forced || variants['translation'][sequence]) {\r\n          genericObject.getTranslation(node.localLocation, sequence, frame, counter);\r\n        }\r\n\r\n        // Rotation\r\n        if (forced || variants['rotation'][sequence]) {\r\n          genericObject.getRotation(node.localRotation, sequence, frame, counter);\r\n        }\r\n\r\n        // Scale\r\n        if (forced || variants['scale'][sequence]) {\r\n          genericObject.getScale(node.localScale, sequence, frame, counter);\r\n        }\r\n      }\r\n\r\n      node.wasDirty = wasDirty;\r\n\r\n      // If this is a forced update, or this node's local data was updated, or the parent node was updated, do a full world update.\r\n      if (wasDirty) {\r\n        node.recalculateTransformation(this);\r\n      }\r\n\r\n      // If there is an instance object associated with this node (emitter/attachment), and it is visible, update it.\r\n      if (node.object) {\r\n        genericObject.getVisibility(visibilityHeap, sequence, frame, counter);\r\n\r\n        // If the attachment/emitter is visible, update it.\r\n        if (visibilityHeap[0] > 0) {\r\n          (<SkeletalNodeObject>node.object).update(dt);\r\n        }\r\n      }\r\n\r\n      // Recalculate and update child nodes.\r\n      // Note that this only affects normal nodes such as instances, and not skeletal nodes.\r\n      for (const child of node.children) {\r\n        if (wasDirty) {\r\n          child.recalculateTransformation();\r\n        }\r\n\r\n        child.update(dt);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * If a model has no sequences or is running no sequence, it will only update once since it will never be forced to update.\r\n   * This is generally the desired behavior, except when it is moved by the client.\r\n   * Therefore, if an instance is transformed, always do a forced update.\r\n   */\r\n  override recalculateTransformation(): void {\r\n    super.recalculateTransformation();\r\n\r\n    this.forced = true;\r\n  }\r\n\r\n  /**\r\n   * Update the batch data.\r\n   */\r\n  updateBatches(forced: boolean): void {\r\n    const sequence = this.sequence;\r\n    const frame = this.frame;\r\n    const counter = this.counter;\r\n    const model = <MdxModel>this.model;\r\n    const geosets = model.geosets;\r\n    const layers = model.layers;\r\n    const geosetColors = this.geosetColors;\r\n    const layerAlphas = this.layerAlphas;\r\n    const layerTextures = this.layerTextures;\r\n    const uvAnims = this.uvAnims;\r\n\r\n    // Geosets\r\n    for (let i = 0, l = geosets.length; i < l; i++) {\r\n      const geoset = geosets[i];\r\n      const geosetAnimation = geoset.geosetAnimation;\r\n      const geosetColor = geosetColors[i];\r\n\r\n      if (geosetAnimation) {\r\n        // Color\r\n        if (forced || geosetAnimation.variants['color'][sequence]) {\r\n          geosetAnimation.getColor(colorHeap, sequence, frame, counter);\r\n\r\n          geosetColor[0] = colorHeap[0];\r\n          geosetColor[1] = colorHeap[1];\r\n          geosetColor[2] = colorHeap[2];\r\n        }\r\n\r\n        // Alpha\r\n        if (forced || geosetAnimation.variants['alpha'][sequence]) {\r\n          geosetAnimation.getAlpha(alphaHeap, sequence, frame, counter);\r\n\r\n          geosetColor[3] = alphaHeap[0];\r\n        }\r\n      } else if (forced) {\r\n        geosetColor[0] = 1;\r\n        geosetColor[1] = 1;\r\n        geosetColor[2] = 1;\r\n        geosetColor[3] = 1;\r\n      }\r\n    }\r\n\r\n    // Layers\r\n    for (let i = 0, l = layers.length; i < l; i++) {\r\n      const layer = layers[i];\r\n      const textureAnimation = layer.textureAnimation;\r\n      const uvAnim = uvAnims[i];\r\n\r\n      // Alpha\r\n      if (forced || layer.variants['alpha'][sequence]) {\r\n        layer.getAlpha(alphaHeap, sequence, frame, counter);\r\n\r\n        layerAlphas[i] = alphaHeap[0];\r\n      }\r\n\r\n      // Sprite animation\r\n      if (forced || layer.variants['textureId'][sequence]) {\r\n        layer.getTextureId(textureIdHeap, sequence, frame, counter);\r\n\r\n        layerTextures[i] = textureIdHeap[0];\r\n      }\r\n\r\n      if (textureAnimation) {\r\n        // UV translation animation\r\n        if (forced || textureAnimation.variants['translation'][sequence]) {\r\n          textureAnimation.getTranslation(<Float32Array>translationHeap, sequence, frame, counter);\r\n\r\n          uvAnim[0] = translationHeap[0];\r\n          uvAnim[1] = translationHeap[1];\r\n        }\r\n\r\n        // UV rotation animation\r\n        if (forced || textureAnimation.variants['rotation'][sequence]) {\r\n          textureAnimation.getRotation(<Float32Array>rotationHeap, sequence, frame, counter);\r\n\r\n          uvAnim[2] = rotationHeap[2];\r\n          uvAnim[3] = rotationHeap[3];\r\n        }\r\n\r\n        // UV scale animation\r\n        if (forced || textureAnimation.variants['scale'][sequence]) {\r\n          textureAnimation.getScale(<Float32Array>scaleHeap, sequence, frame, counter);\r\n\r\n          uvAnim[4] = scaleHeap[0];\r\n        }\r\n      } else if (forced) {\r\n        uvAnim[0] = 0;\r\n        uvAnim[1] = 0;\r\n        uvAnim[2] = 0;\r\n        uvAnim[3] = 1;\r\n        uvAnim[4] = 1;\r\n      }\r\n    }\r\n  }\r\n\r\n  updateBoneTexture(): void {\r\n    if (this.boneTexture) {\r\n      this.boneTexture.bindAndUpdate(<Float32Array>this.worldMatrices);\r\n    }\r\n  }\r\n\r\n  override renderOpaque(): void {\r\n    const model = <MdxModel>this.model;\r\n\r\n    for (const group of model.opaqueGroups) {\r\n      group.render(this);\r\n    }\r\n  }\r\n\r\n  override renderTranslucent(): void {\r\n    const model = <MdxModel>this.model;\r\n\r\n    for (const group of model.translucentGroups) {\r\n      group.render(this);\r\n    }\r\n  }\r\n\r\n  override updateAnimations(dt: number): void {\r\n    const model = <MdxModel>this.model;\r\n    const sequenceId = this.sequence;\r\n\r\n    if (sequenceId !== -1) {\r\n      const sequence = model.sequences[sequenceId];\r\n      const interval = sequence.interval;\r\n      const frameTime = dt * 1000;\r\n\r\n      this.frame += frameTime;\r\n      this.counter += frameTime;\r\n      this.allowParticleSpawn = true;\r\n\r\n      if (this.frame >= interval[1]) {\r\n        if (this.sequenceLoopMode === 2 || (this.sequenceLoopMode === 0 && sequence.nonLooping === 0)) {\r\n          this.frame = interval[0];\r\n\r\n          this.resetEventEmitters();\r\n        } else {\r\n          this.frame = interval[1];\r\n          this.counter -= frameTime;\r\n          this.allowParticleSpawn = false;\r\n        }\r\n\r\n        this.sequenceEnded = true;\r\n      } else {\r\n        this.sequenceEnded = false;\r\n      }\r\n    }\r\n\r\n    const forced = this.forced;\r\n\r\n    if (sequenceId !== -1 || forced) {\r\n      // Update the nodes\r\n      this.updateNodes(dt, forced);\r\n\r\n      // Update the bone texture.\r\n      this.updateBoneTexture();\r\n\r\n      // Update the batches\r\n      this.updateBatches(forced);\r\n    }\r\n\r\n    this.forced = false;\r\n  }\r\n\r\n  /**\r\n   * Set the team color of this instance.\r\n   */\r\n  setTeamColor(id: number): this {\r\n    this.teamColor = id;\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Set the vertex color of this instance.\r\n   */\r\n  setVertexColor(color: Float32Array | number[]): this {\r\n    this.vertexColor.set(color);\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Set the sequence of this instance.\r\n   */\r\n  setSequence(id: number): this {\r\n    const model = <MdxModel>this.model;\r\n    const sequences = model.sequences;\r\n\r\n    this.sequence = id;\r\n\r\n    if (id < 0 || id > sequences.length - 1) {\r\n      this.sequence = -1;\r\n      this.frame = 0;\r\n      this.allowParticleSpawn = false;\r\n    } else {\r\n      this.frame = sequences[id].interval[0];\r\n    }\r\n\r\n    this.resetEventEmitters();\r\n    this.resetAttachments();\r\n\r\n    this.forced = true;\r\n\r\n    return this;\r\n  }\r\n\r\n  override getBounds(): Bounds {\r\n    const model = <MdxModel>this.model;\r\n\r\n    if (this.sequence === -1) {\r\n      return model.bounds;\r\n    }\r\n\r\n    const bounds = model.sequences[this.sequence].bounds;\r\n\r\n    if (bounds.r === 0) {\r\n      return model.bounds;\r\n    }\r\n\r\n    return bounds;\r\n  }\r\n\r\n  /**\r\n   * Set the sequence loop mode.\r\n   * 0 to never loop, 1 to loop based on the model, and 2 to always loop.\r\n   */\r\n  setSequenceLoopMode(mode: number): this {\r\n    this.sequenceLoopMode = mode;\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get an attachment node.\r\n   */\r\n  getAttachment(id: number): SkeletalNode | undefined {\r\n    const model = <MdxModel>this.model;\r\n    const attachment = model.attachments[id];\r\n\r\n    if (attachment) {\r\n      return this.nodes[attachment.index];\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  resetEventEmitters(): void {\r\n    for (const emitter of this.eventObjectEmitters) {\r\n      emitter.lastValue = 0;\r\n    }\r\n  }\r\n\r\n  resetAttachments(): void {\r\n    for (const attachment of this.attachments) {\r\n      attachment.internalInstance.hide();\r\n    }\r\n  }\r\n}\r\n","const shader = `\r\n#ifdef SKIN\r\nattribute vec4 a_bones;\r\nattribute vec4 a_weights;\r\n\r\nvoid transformSkin(inout vec3 position, inout vec3 normal, inout vec3 tangent, inout vec3 binormal) {\r\n  mat4 bone;\r\n\r\n  bone += fetchMatrix(a_bones[0], 0.0) * a_weights[0];\r\n  bone += fetchMatrix(a_bones[1], 0.0) * a_weights[1];\r\n  bone += fetchMatrix(a_bones[2], 0.0) * a_weights[2];\r\n  bone += fetchMatrix(a_bones[3], 0.0) * a_weights[3];\r\n\r\n  mat3 rotation = mat3(bone);\r\n\r\n  position = vec3(bone * vec4(position, 1.0));\r\n  normal = rotation * normal;\r\n  tangent = rotation * tangent;\r\n  binormal = rotation * binormal;\r\n}\r\n#else\r\nattribute vec4 a_bones;\r\n#ifdef EXTENDED_BONES\r\nattribute vec4 a_extendedBones;\r\n#endif\r\nattribute float a_boneNumber;\r\n\r\nmat4 getVertexGroupMatrix() {\r\n  mat4 bone;\r\n\r\n  // For the broken models out there, since the game supports this.\r\n  if (a_boneNumber > 0.0) {\r\n    for (int i = 0; i < 4; i++) {\r\n      if (a_bones[i] > 0.0) {\r\n        bone += fetchMatrix(a_bones[i] - 1.0, 0.0);\r\n      }\r\n    }\r\n\r\n    #ifdef EXTENDED_BONES\r\n      for (int i = 0; i < 4; i++) {\r\n        if (a_extendedBones[i] > 0.0) {\r\n          bone += fetchMatrix(a_extendedBones[i] - 1.0, 0.0);\r\n        }\r\n      }\r\n    #endif\r\n  }\r\n\r\n  return bone / a_boneNumber;\r\n}\r\n\r\nvoid transformVertexGroups(inout vec3 position, inout vec3 normal) {\r\n  mat4 bone = getVertexGroupMatrix();\r\n  mat3 rotation = mat3(bone);\r\n\r\n  position = vec3(bone * vec4(position, 1.0));\r\n  normal = normalize(rotation * normal);\r\n}\r\n\r\nvoid transformVertexGroupsHD(inout vec3 position, inout vec3 normal, inout vec3 tangent, inout vec3 binormal) {\r\n  mat4 bone = getVertexGroupMatrix();\r\n  mat3 rotation = mat3(bone);\r\n\r\n  position = vec3(bone * vec4(position, 1.0));\r\n  normal = normalize(rotation * normal);\r\n  tangent = normalize(rotation * tangent);\r\n  binormal = normalize(rotation * binormal);\r\n}\r\n#endif\r\n`;\r\n\r\nexport default shader;\r\n","import boneTexture from '../../shaders/bonetexture.glsl';\r\nimport transforms from './transforms.glsl';\r\n\r\nconst shader = `\r\nuniform mat4 u_VP;\r\nuniform vec3 u_lightPos;\r\nuniform vec4 u_vertexColor;\r\nuniform vec4 u_geosetColor;\r\nuniform float u_layerAlpha;\r\nuniform vec2 u_uvTrans;\r\nuniform vec2 u_uvRot;\r\nuniform float u_uvScale;\r\nuniform bool u_hasBones;\r\n\r\nattribute vec3 a_position;\r\nattribute vec3 a_normal;\r\nattribute vec2 a_uv;\r\n\r\nvarying vec2 v_uv;\r\nvarying vec3 v_normal;\r\nvarying vec4 v_color;\r\nvarying vec4 v_uvTransRot;\r\nvarying float v_uvScale;\r\nvarying vec3 v_lightDir;\r\n\r\n${boneTexture}\r\n${transforms}\r\n\r\nvoid main() {\r\n  vec3 position = a_position;\r\n  vec3 normal = a_normal;\r\n\r\n  if (u_hasBones) {\r\n    transformVertexGroups(position, normal);\r\n  }\r\n\r\n  v_uv = a_uv;\r\n  v_normal = normal;\r\n  v_color = u_vertexColor * u_geosetColor.bgra * vec4(1.0, 1.0, 1.0, u_layerAlpha);\r\n  v_uvTransRot = vec4(u_uvTrans, u_uvRot);\r\n  v_uvScale = u_uvScale;\r\n  v_lightDir = normalize(u_lightPos - position);\r\n\r\n  gl_Position = u_VP * vec4(position, 1.0);\r\n}\r\n`;\r\n\r\nexport default shader;\r\n","import precision from '../../shaders/precision.glsl';\r\nimport quatTransform from '../../shaders/quattransform.glsl';\r\n\r\nconst shader = `\r\n${precision}\r\n\r\n${quatTransform}\r\n\r\nuniform sampler2D u_texture;\r\nuniform float u_filterMode;\r\nuniform bool u_unshaded;\r\n\r\nvarying vec2 v_uv;\r\nvarying vec3 v_normal;\r\nvarying vec4 v_color;\r\nvarying vec4 v_uvTransRot;\r\nvarying float v_uvScale;\r\nvarying vec3 v_lightDir;\r\n\r\nvec4 getDiffuseColor() {\r\n  vec2 uv = v_uv;\r\n\r\n  // Translation animation\r\n  uv += v_uvTransRot.xy;\r\n\r\n  // Rotation animation\r\n  uv = quat_transform(v_uvTransRot.zw, uv - 0.5) + 0.5;\r\n\r\n  // Scale animation\r\n  uv = v_uvScale * (uv - 0.5) + 0.5;\r\n\r\n  vec4 texel = texture2D(u_texture, uv);\r\n  vec4 color = texel * v_color;\r\n\r\n  // 1bit Alpha\r\n  if (u_filterMode == 1.0 && color.a < 0.75) {\r\n    discard;\r\n  }\r\n\r\n  // \"Close to 0 alpha\"\r\n  if (u_filterMode >= 5.0 && color.a < 0.02) {\r\n    discard;\r\n  }\r\n\r\n  return color;\r\n}\r\n\r\nvoid onlyTexCoords() {\r\n  gl_FragColor = vec4(v_uv, 0.0, 1.0);\r\n}\r\n\r\nvoid onlyNormals() {\r\n  gl_FragColor = vec4(v_normal, 1.0);\r\n}\r\n\r\nvoid onlyDiffuse() {\r\n  gl_FragColor = getDiffuseColor();\r\n}\r\n\r\nvoid lambert() {\r\n  vec4 color = getDiffuseColor();\r\n\r\n  if (!u_unshaded) {\r\n    float lambertFactor = clamp(dot(v_normal, v_lightDir), 0.0, 1.0);\r\n    lambertFactor = clamp(lambertFactor + 0.7, 0.0, 1.0);\r\n\r\n    color.rgb *= lambertFactor;\r\n  }\r\n\r\n  gl_FragColor = color;\r\n}\r\n\r\nvoid main() {\r\n  #if defined(ONLY_DIFFUSE)\r\n  onlyDiffuse();\r\n  #elif defined(ONLY_TEXCOORDS)\r\n  onlyTexCoords();\r\n  #elif defined(ONLY_NORMALS)\r\n  onlyNormals();\r\n  #else\r\n  lambert();\r\n  #endif\r\n}\r\n`;\r\n\r\nexport default shader;\r\n","\r\nimport boneTexture from '../../shaders/bonetexture.glsl';\r\nimport transforms from './transforms.glsl';\r\n\r\nconst shader = `\r\nuniform mat4 u_VP;\r\nuniform mat4 u_MV;\r\nuniform vec3 u_eyePos;\r\nuniform vec3 u_lightPos;\r\nuniform float u_layerAlpha;\r\nuniform bool u_hasBones;\r\n\r\nattribute vec3 a_position;\r\nattribute vec3 a_normal;\r\nattribute vec2 a_uv;\r\nattribute vec4 a_tangent;\r\n\r\nvarying vec2 v_uv;\r\nvarying float v_layerAlpha;\r\nvarying vec3 v_lightDir;\r\nvarying vec3 v_eyeVec;\r\nvarying vec3 v_normal;\r\n// varying vec3 v_lightDirWorld;\r\n\r\n#if defined(ONLY_TANGENTS)\r\nvarying vec3 v_tangent;\r\n#endif\r\n\r\n${boneTexture}\r\n${transforms}\r\n\r\nvec3 TBN(vec3 vector, vec3 tangent, vec3 binormal, vec3 normal) {\r\n  return vec3(dot(vector, tangent), dot(vector, binormal), dot(vector, normal));\r\n}\r\n\r\nvoid main() {\r\n  vec3 position = a_position;\r\n  vec3 normal = a_normal;\r\n  vec3 tangent = a_tangent.xyz;\r\n\r\n  // Re-orthogonalize the tangent in case it wasnt normalized.\r\n  // See \"One last thing\" at https://learnopengl.com/Advanced-Lighting/Normal-Mapping\r\n  tangent = normalize(tangent - dot(tangent, normal) * normal);\r\n\r\n  vec3 binormal = cross(normal, tangent) * a_tangent.w;\r\n\r\n  if (u_hasBones) {\r\n    #ifdef SKIN\r\n      transformSkin(position, normal, tangent, binormal);\r\n    #else\r\n      transformVertexGroupsHD(position, normal, tangent, binormal);\r\n    #endif\r\n  }\r\n\r\n  vec3 position_mv = vec3(u_MV * vec4(position, 1));\r\n\r\n  mat3 mv = mat3(u_MV);\r\n  vec3 t = normalize(mv * tangent);\r\n  vec3 b = normalize(mv * binormal);\r\n  vec3 n = normalize(mv * normal);\r\n\r\n  v_eyeVec = normalize(u_eyePos - position_mv);\r\n\r\n  vec3 lightDir = normalize(u_lightPos - position_mv);\r\n  v_lightDir = normalize(TBN(lightDir, t, b, n));\r\n  \r\n  v_uv = a_uv;\r\n  v_layerAlpha = u_layerAlpha;\r\n\r\n  v_normal = normal;\r\n  // v_lightDirWorld = normalize(lightDir);\r\n\r\n  #if defined(ONLY_TANGENTS)\r\n  v_tangent = tangent;\r\n  #endif\r\n\r\n  gl_Position = u_VP * vec4(position, 1.0);\r\n}\r\n`;\r\n\r\nexport default shader;\r\n","import precision from '../../shaders/precision.glsl';\r\n\r\nconst shader = `\r\n${precision}\r\n\r\nuniform sampler2D u_diffuseMap;\r\nuniform sampler2D u_normalsMap;\r\nuniform sampler2D u_ormMap;\r\nuniform sampler2D u_emissiveMap;\r\nuniform sampler2D u_teamColorMap;\r\nuniform sampler2D u_environmentMap;\r\nuniform float u_filterMode;\r\n\r\n// uniform sampler2D u_lutMap;\r\n// uniform sampler2D u_envDiffuseMap;\r\n// uniform sampler2D u_envSpecularMap;\r\n\r\nvarying vec2 v_uv;\r\nvarying float v_layerAlpha;\r\nvarying vec3 v_lightDir;\r\nvarying vec3 v_eyeVec;\r\nvarying vec3 v_normal;\r\n// varying vec3 v_lightDirWorld;\r\n\r\n#if defined(ONLY_TANGENTS)\r\nvarying vec3 v_tangent;\r\n#endif\r\n\r\nvec3 decodeNormal() {\r\n  vec2 xy = texture2D(u_normalsMap, v_uv).xy * 2.0 - 1.0;\r\n  \r\n  return vec3(xy, sqrt(1.0 - dot(xy, xy)));\r\n}\r\n\r\nconst vec2 invAtan = vec2(0.1591, 0.3183);\r\nvec2 sampleEnvironmentMap(vec3 normal) {\r\n  vec2 uv = vec2(atan(normal.x, normal.y), -asin(normal.z));\r\n  uv *= invAtan;\r\n  uv += 0.5;\r\n  return uv;\r\n}\r\n\r\nvec4 getDiffuseColor() {\r\n  vec4 color = texture2D(u_diffuseMap, v_uv);\r\n\r\n  // 1bit Alpha\r\n  if (u_filterMode == 1.0 && color.a < 0.75) {\r\n    discard;\r\n  }\r\n\r\n  return color;\r\n}\r\n\r\nvec4 getOrmColor() {\r\n  return texture2D(u_ormMap, v_uv);\r\n}\r\n\r\nvec3 getEmissiveColor() {\r\n  return texture2D(u_emissiveMap, v_uv).rgb;\r\n}\r\n\r\nvec3 getTeamColor() {\r\n  return texture2D(u_teamColorMap, v_uv).rgb;\r\n}\r\n\r\n// const float PI = 3.14159265359;\r\n// const float RECIPROCAL_PI = 0.31830988618;\r\n// const float RECIPROCAL_PI2 = 0.15915494;\r\n// const float LN2 = 0.6931472;\r\n// const float ENV_LODS = 6.0;\r\n// vec4 SRGBtoLinear(vec4 srgb) {\r\n//     vec3 linOut = pow(srgb.xyz, vec3(2.2));\r\n//     return vec4(linOut, srgb.w);;\r\n// }\r\n// vec4 RGBMToLinear(in vec4 value) {\r\n//     float maxRange = 6.0;\r\n//     return vec4(value.xyz * value.w * maxRange, 1.0);\r\n// }\r\n// vec3 linearToSRGB(vec3 color) {\r\n//     return pow(color, vec3(1.0 / 2.2));\r\n// }\r\n// // vec3 getNormal() {\r\n// //     vec3 pos_dx = dFdx(vMPos.xyz);\r\n// //     vec3 pos_dy = dFdy(vMPos.xyz);\r\n// //     vec2 tex_dx = dFdx(vUv);\r\n// //     vec2 tex_dy = dFdy(vUv);\r\n// //     vec3 t = normalize(pos_dx * tex_dy.t - pos_dy * tex_dx.t);\r\n// //     vec3 b = normalize(-pos_dx * tex_dy.s + pos_dy * tex_dx.s);\r\n// //     mat3 tbn = mat3(t, b, normalize(vNormal));\r\n// //     vec3 n = texture2D(tNormal, vUv * uNormalUVScale).rgb * 2.0 - 1.0;\r\n// //     n.xy *= uNormalScale;\r\n// //     vec3 normal = normalize(tbn * n);\r\n// //     // Get world normal from view normal (normalMatrix * normal)\r\n// //     return normalize((vec4(normal, 0.0) * viewMatrix).xyz);\r\n// // }\r\n// vec3 specularReflection(vec3 specularEnvR0, vec3 specularEnvR90, float VdH) {\r\n//     return specularEnvR0 + (specularEnvR90 - specularEnvR0) * pow(clamp(1.0 - VdH, 0.0, 1.0), 5.0);\r\n// }\r\n// float geometricOcclusion(float NdL, float NdV, float roughness) {\r\n//     float r = roughness;\r\n//     float attenuationL = 2.0 * NdL / (NdL + sqrt(r * r + (1.0 - r * r) * (NdL * NdL)));\r\n//     float attenuationV = 2.0 * NdV / (NdV + sqrt(r * r + (1.0 - r * r) * (NdV * NdV)));\r\n//     return attenuationL * attenuationV;\r\n// }\r\n// float microfacetDistribution(float roughness, float NdH) {\r\n//     float roughnessSq = roughness * roughness;\r\n//     float f = (NdH * roughnessSq - NdH) * NdH + 1.0;\r\n//     return roughnessSq / (PI * f * f);\r\n// }\r\n// vec2 cartesianToPolar(vec3 n) {\r\n//     vec2 uv;\r\n//     uv.x = atan(n.z, n.x) * RECIPROCAL_PI2 + 0.5;\r\n//     uv.y = asin(n.y) * RECIPROCAL_PI + 0.5;\r\n//     return uv;\r\n// }\r\n// void getIBLContribution(inout vec3 diffuse, inout vec3 specular, float NdV, float roughness, vec3 n, vec3 reflection, vec3 diffuseColor, vec3 specularColor) {\r\n//   vec3 brdf = SRGBtoLinear(texture2D(u_lutMap, vec2(NdV, roughness))).rgb;\r\n//   vec3 diffuseLight = RGBMToLinear(texture2D(u_envDiffuseMap, sampleEnvironmentMap(n))).rgb;\r\n//   // Sample 2 levels and mix between to get smoother degradation\r\n//   float blend = roughness * ENV_LODS;\r\n//   float level0 = floor(blend);\r\n//   float level1 = min(ENV_LODS, level0 + 1.0);\r\n//   blend -= level0;\r\n  \r\n//   // Sample the specular env map atlas depending on the roughness value\r\n//   vec2 uvSpec = sampleEnvironmentMap(reflection);\r\n//   uvSpec.y /= 2.0;\r\n//   vec2 uv0 = uvSpec;\r\n//   vec2 uv1 = uvSpec;\r\n//   uv0 /= pow(2.0, level0);\r\n//   uv0.y += 1.0 - exp(-LN2 * level0);\r\n//   uv1 /= pow(2.0, level1);\r\n//   uv1.y += 1.0 - exp(-LN2 * level1);\r\n//   vec3 specular0 = RGBMToLinear(texture2D(u_envSpecularMap, uv0)).rgb;\r\n//   vec3 specular1 = RGBMToLinear(texture2D(u_envSpecularMap, uv1)).rgb;\r\n//   vec3 specularLight = mix(specular0, specular1, blend);\r\n//   diffuse = diffuseLight * diffuseColor;\r\n  \r\n//   // Bit of extra reflection for smooth materials\r\n//   float reflectivity = pow((1.0 - roughness), 2.0) * 0.05;\r\n//   specular = specularLight * (specularColor * brdf.x + brdf.y + reflectivity);\r\n//   // specular *= uEnvSpecular;\r\n// }\r\n\r\n// void PBR() {\r\n//   vec4 baseDiffuseColor = getDiffuseColor();\r\n//   vec3 baseColor = baseDiffuseColor.rgb;\r\n//   vec4 orm = getOrmColor();\r\n//   vec3 tc = getTeamColor();\r\n//   float tcFactor = getOrmColor().a;\r\n\r\n//   if (tcFactor > 0.1) {\r\n//     baseColor *= tc * tcFactor;\r\n//   }\r\n\r\n//   float roughness = clamp(orm.g, 0.04, 1.0);\r\n//   float metallic = clamp(orm.b, 0.04, 1.0);\r\n\r\n//   vec3 f0 = vec3(0.04);\r\n//   vec3 diffuseColor = baseColor * (vec3(1.0) - f0) * (1.0 - metallic);\r\n//   vec3 specularColor = mix(f0, baseColor, metallic);\r\n//   vec3 specularEnvR0 = specularColor;\r\n//   vec3 specularEnvR90 = vec3(clamp(max(max(specularColor.r, specularColor.g), specularColor.b) * 25.0, 0.0, 1.0));\r\n\r\n//   vec3 N = v_normal;\r\n//   vec3 V = normalize(v_eyeVec);\r\n//   vec3 L = normalize(v_lightDirWorld);\r\n//   vec3 H = normalize(L + V);\r\n//   vec3 reflection = normalize(reflect(-V, N));\r\n\r\n//   float NdL = clamp(dot(N, L), 0.001, 1.0);\r\n//   float NdV = clamp(abs(dot(N, V)), 0.001, 1.0);\r\n//   float NdH = clamp(dot(N, H), 0.0, 1.0);\r\n//   float LdH = clamp(dot(L, H), 0.0, 1.0);\r\n//   float VdH = clamp(dot(V, H), 0.0, 1.0);\r\n\r\n//   vec3 F = specularReflection(specularEnvR0, specularEnvR90, VdH);\r\n//   float G = geometricOcclusion(NdL, NdV, roughness);\r\n//   float D = microfacetDistribution(roughness, NdH);\r\n\r\n//   vec3 diffuseContrib = (1.0 - F) * (diffuseColor / PI);\r\n//   vec3 specContrib = F * G * D / (4.0 * NdL * NdV);\r\n  \r\n//   // Shading based off lights\r\n//   // vec3 color = NdL * uLightColor * (diffuseContrib + specContrib);\r\n//   vec3 color = NdL * (diffuseContrib + specContrib);\r\n\r\n//   // Calculate IBL lighting\r\n//   vec3 diffuseIBL;\r\n//   vec3 specularIBL;\r\n//   getIBLContribution(diffuseIBL, specularIBL, NdV, roughness, N, reflection, diffuseColor, specularColor);\r\n\r\n//   // Add IBL on top of color\r\n//   color +=  specularIBL;\r\n\r\n//   color *= orm.r;\r\n\r\n//   color += getEmissiveColor();\r\n\r\n//   // Convert to sRGB to display\r\n//   gl_FragColor.rgb = color;\r\n//   gl_FragColor.a = baseDiffuseColor.a;\r\n// }\r\n\r\nvoid onlyDiffuse() {\r\n  vec4 baseColor = getDiffuseColor();\r\n  vec3 tc = getTeamColor();\r\n  float tcFactor = getOrmColor().a;\r\n\r\n  if (tcFactor > 0.1) {\r\n    baseColor.rgb *= tc * tcFactor;\r\n  }\r\n\r\n  gl_FragColor = baseColor;\r\n}\r\n\r\nvoid onlyNormalMap() {\r\n  gl_FragColor = vec4(decodeNormal(), 1.0);\r\n}\r\n\r\nvoid onlyOcclusion() {\r\n  gl_FragColor = vec4(getOrmColor().rrr, 1.0);\r\n}\r\n\r\nvoid onlyRoughness() {\r\n  gl_FragColor = vec4(getOrmColor().ggg, 1.0);\r\n}\r\n\r\nvoid onlyMetallic() {\r\n  gl_FragColor = vec4(getOrmColor().bbb, 1.0);\r\n}\r\n\r\nvoid onlyTeamColorFactor() {\r\n  gl_FragColor = vec4(getOrmColor().aaa, 1.0);\r\n}\r\n\r\nvoid onlyEmissiveMap() {\r\n  gl_FragColor = vec4(getEmissiveColor(), 1.0);\r\n}\r\n\r\nvoid onlyTexCoords() {\r\n  gl_FragColor = vec4(v_uv, 0.0, 1.0);\r\n}\r\n\r\nvoid onlyNormals() {\r\n  gl_FragColor = vec4(v_normal, 1.0);\r\n}\r\n\r\n#if defined(ONLY_TANGENTS)\r\nvoid onlyTangents() {\r\n  gl_FragColor = vec4(v_tangent, 1.0);\r\n}\r\n#endif\r\n\r\nvoid lambert() {\r\n  vec4 baseColor = getDiffuseColor();\r\n  vec3 normal = decodeNormal();\r\n  vec4 orm = getOrmColor();\r\n  vec3 emissive = getEmissiveColor();\r\n  vec3 tc = getTeamColor();\r\n  float aoFactor = orm.r;\r\n  float tcFactor = orm.a;\r\n  float lambertFactor = clamp(dot(normal, v_lightDir), 0.0, 1.0);\r\n  vec3 color = baseColor.rgb;\r\n\r\n  if (tcFactor > 0.1) {\r\n    color *= tc * tcFactor;\r\n  }\r\n  \r\n  color *= clamp(lambertFactor * aoFactor + 0.1, 0.0, 1.0);\r\n  color += emissive;\r\n\r\n  gl_FragColor = vec4(color, baseColor.a);\r\n}\r\n\r\nvoid main() {\r\n  #if defined(ONLY_DIFFUSE)\r\n  onlyDiffuse();\r\n  #elif defined(ONLY_NORMAL_MAP)\r\n  onlyNormalMap();\r\n  #elif defined(ONLY_OCCLUSION)\r\n  onlyOcclusion();\r\n  #elif defined(ONLY_ROUGHNESS)\r\n  onlyRoughness();\r\n  #elif defined(ONLY_METALLIC)\r\n  onlyMetallic();\r\n  #elif defined(ONLY_TC_FACTOR)\r\n  onlyTeamColorFactor();\r\n  #elif defined(ONLY_EMISSIVE)\r\n  onlyEmissiveMap();\r\n  #elif defined(ONLY_TEXCOORDS)\r\n  onlyTexCoords();\r\n  #elif defined(ONLY_NORMALS)\r\n  onlyNormals();\r\n  #elif defined(ONLY_TANGENTS)\r\n  onlyTangents();\r\n  #else\r\n  lambert();\r\n  #endif\r\n}\r\n`;\r\n\r\nexport default shader;\r\n","import precision from '../../shaders/precision.glsl';\r\n\r\nconst shader = `\r\n${precision}\r\n\r\n#define EMITTER_PARTICLE2 0\r\n#define EMITTER_RIBBON 1\r\n\r\nuniform sampler2D u_texture;\r\nuniform highp int u_emitter;\r\nuniform float u_filterMode;\r\n\r\nvarying vec2 v_texcoord;\r\nvarying vec4 v_color;\r\n\r\nvoid main() {\r\n  vec4 texel = texture2D(u_texture, v_texcoord);\r\n  vec4 color = texel * v_color;\r\n\r\n  // 1bit Alpha, used by ribbon emitters.\r\n  if (u_emitter == EMITTER_RIBBON && u_filterMode == 1.0 && color.a < 0.75) {\r\n    discard;\r\n  }\r\n\r\n  // \"Close to 0 alpha\"\r\n  if (u_emitter == EMITTER_PARTICLE2 && (u_filterMode == 2.0 || u_filterMode == 3.0) && color.a < 0.02) {\r\n    discard;\r\n  }\r\n\r\n  // Alpha key.\r\n  if (u_emitter == EMITTER_PARTICLE2 && (u_filterMode == 4.0) && color.a < 0.75) {\r\n    discard;\r\n  }\r\n\r\n  gl_FragColor = color;\r\n}\r\n`;\r\n\r\nexport default shader;\r\n","import { extname } from '../../../common/path';\r\nimport { FetchDataType } from '../../../common/fetchdatatype';\r\nimport { decodeAudioData } from '../../../common/audio';\r\nimport MdlxModel from '../../../parsers/mdlx/model';\r\nimport { isMdx, isMdl } from '../../../parsers/mdlx/isformat';\r\nimport { MappedData, MappedDataRow } from '../../../utils/mappeddata';\r\nimport ModelViewer, { DebugRenderMode } from '../../viewer';\r\nimport Shader from '../../gl/shader';\r\nimport { PathSolver, SolverParams } from '../../handlerresource';\r\nimport { Resource } from '../../resource';\r\nimport GenericResource from '../../genericresource';\r\nimport Texture from '../../texture';\r\nimport Model from './model';\r\nimport MdxTexture from './texture';\r\nimport sdVert from './shaders/sd.vert';\r\nimport sdFrag from './shaders/sd.frag';\r\nimport hdVert from './shaders/hd.vert';\r\nimport hdFrag from './shaders/hd.frag';\r\nimport particlesVert from './shaders/particles.vert';\r\nimport particlesFrag from './shaders/particles.frag';\r\nimport { SkinningType } from './batch';\r\nimport { WrapMode } from '../../../parsers/mdlx/texture';\r\n\r\nexport interface EventObjectData {\r\n  row: MappedDataRow;\r\n  resources: Resource[];\r\n}\r\n\r\nexport interface MdxHandlerObject {\r\n  pathSolver?: PathSolver;\r\n  reforged: boolean;\r\n  sdShader: Shader;\r\n  sdExtendedShader: Shader;\r\n  hdShader: Shader;\r\n  hdExtendedShader: Shader;\r\n  hdSkinShader: Shader;\r\n  particlesShader: Shader;\r\n  sdDebugShaders: Shader[][];\r\n  hdDebugShaders: Shader[][];\r\n  rectBuffer: WebGLBuffer;\r\n  teamColors: MdxTexture[];\r\n  teamGlows: MdxTexture[];\r\n  eventObjectTables: {[key: string]: GenericResource[] };\r\n\r\n  // lutTexture: MdxTexture | null;\r\n  // envDiffuseTexture: MdxTexture | null;\r\n  // envSpecularTexture: MdxTexture | null;\r\n}\r\n\r\nconst mappedDataCallback = (data: FetchDataType): MappedData => new MappedData(<string>data);\r\nconst decodedDataCallback = (data: FetchDataType): Promise<AudioBuffer | undefined> => decodeAudioData(<ArrayBuffer>data);\r\n\r\nexport default {\r\n  load(viewer: ModelViewer, pathSolver?: PathSolver, reforged = false): void {\r\n    const gl = viewer.gl;\r\n    const webgl = viewer.webgl;\r\n\r\n    // Bone textures.\r\n    if (!webgl.ensureExtension('OES_texture_float')) {\r\n      throw new Error('MDX: No float texture support!');\r\n    }\r\n\r\n    // Geometry emitters.\r\n    if (!webgl.ensureExtension('ANGLE_instanced_arrays')) {\r\n      throw new Error('MDX: No instanced rendering support!');\r\n    }\r\n\r\n    // Shaders. Lots of them.\r\n    const sdExtendedVert = '#define EXTENDED_BONES\\n' + sdVert;\r\n    const sdDiffuse = '#define ONLY_DIFFUSE\\n' + sdFrag;\r\n    const sdTexcoords = '#define ONLY_TEXCOORDS\\n' + sdFrag;\r\n    const sdNormals = '#define ONLY_NORMALS\\n' + sdFrag;\r\n    const hdExtendedVert = '#define EXTENDED_BONES\\n' + hdVert;\r\n    const hdSkinVert = '#define SKIN\\n' + hdVert;\r\n    const hdDiffuse = '#define ONLY_DIFFUSE\\n' + hdFrag;\r\n    const hdNormalMap = '#define ONLY_NORMAL_MAP\\n' + hdFrag;\r\n    const hdOcclusion = '#define ONLY_OCCLUSION\\n' + hdFrag;\r\n    const hdRoughness = '#define ONLY_ROUGHNESS\\n' + hdFrag;\r\n    const hdMetallic = '#define ONLY_METALLIC\\n' + hdFrag;\r\n    const hdTCFactor = '#define ONLY_TC_FACTOR\\n' + hdFrag;\r\n    const hdEmissive = '#define ONLY_EMISSIVE\\n' + hdFrag;\r\n    const hdTexCoords = '#define ONLY_TEXCOORDS\\n' + hdFrag;\r\n    const hdNormals = '#define ONLY_NORMALS\\n' + hdFrag;\r\n    const hdTangents = '#define ONLY_TANGENTS\\n' + hdFrag;\r\n    \r\n    const sdShader = webgl.createShader(sdVert, sdFrag);\r\n    const sdExtendedShader = webgl.createShader(sdExtendedVert, sdFrag);\r\n    const hdShader = webgl.createShader(hdVert, hdFrag);\r\n    const hdExtendedShader = webgl.createShader(hdExtendedVert, hdFrag);\r\n    const hdSkinShader = webgl.createShader(hdSkinVert, hdFrag);\r\n    const particlesShader = webgl.createShader(particlesVert, particlesFrag);\r\n\r\n    const sdDebugShaders: Shader[][] = [];\r\n    const hdDebugShaders: Shader[][] = [];\r\n\r\n    let shaders: Shader[] = [];\r\n    shaders[DebugRenderMode.Diffuse] = webgl.createShader(sdVert, sdDiffuse);\r\n    shaders[DebugRenderMode.TexCoords] = webgl.createShader(sdVert, sdTexcoords);\r\n    shaders[DebugRenderMode.Normals] = webgl.createShader(sdVert, sdNormals);\r\n    sdDebugShaders[SkinningType.VertexGroups] = shaders;\r\n\r\n    shaders = [];\r\n    shaders[DebugRenderMode.Diffuse] = webgl.createShader(sdExtendedVert, sdDiffuse);\r\n    shaders[DebugRenderMode.TexCoords] = webgl.createShader(sdExtendedVert, sdTexcoords);\r\n    shaders[DebugRenderMode.Normals] = webgl.createShader(sdExtendedVert, sdNormals);\r\n    sdDebugShaders[SkinningType.ExtendedVertexGroups] = shaders;\r\n\r\n    shaders = [];\r\n    shaders[DebugRenderMode.Diffuse] = webgl.createShader(hdVert, hdDiffuse);\r\n    shaders[DebugRenderMode.NormalMap] = webgl.createShader(hdVert, hdNormalMap);\r\n    shaders[DebugRenderMode.Occlusion] = webgl.createShader(hdVert, hdOcclusion);\r\n    shaders[DebugRenderMode.Roughness] = webgl.createShader(hdVert, hdRoughness);\r\n    shaders[DebugRenderMode.Metallic] = webgl.createShader(hdVert, hdMetallic);\r\n    shaders[DebugRenderMode.TCFactor] = webgl.createShader(hdVert, hdTCFactor);\r\n    shaders[DebugRenderMode.Emissive] = webgl.createShader(hdVert, hdEmissive);\r\n    shaders[DebugRenderMode.TexCoords] = webgl.createShader(hdVert, hdTexCoords);\r\n    shaders[DebugRenderMode.Normals] = webgl.createShader(hdVert, hdNormals);\r\n    shaders[DebugRenderMode.Tangents] = webgl.createShader('#define ONLY_TANGENTS\\n' + hdVert, hdTangents);\r\n    hdDebugShaders[SkinningType.VertexGroups] = shaders;\r\n\r\n    shaders = [];\r\n    shaders[DebugRenderMode.Diffuse] = webgl.createShader(hdExtendedVert, hdDiffuse);\r\n    shaders[DebugRenderMode.NormalMap] = webgl.createShader(hdExtendedVert, hdNormalMap);\r\n    shaders[DebugRenderMode.Occlusion] = webgl.createShader(hdExtendedVert, hdOcclusion);\r\n    shaders[DebugRenderMode.Roughness] = webgl.createShader(hdExtendedVert, hdRoughness);\r\n    shaders[DebugRenderMode.Metallic] = webgl.createShader(hdExtendedVert, hdMetallic);\r\n    shaders[DebugRenderMode.TCFactor] = webgl.createShader(hdExtendedVert, hdTCFactor);\r\n    shaders[DebugRenderMode.Emissive] = webgl.createShader(hdExtendedVert, hdEmissive);\r\n    shaders[DebugRenderMode.TexCoords] = webgl.createShader(hdExtendedVert, hdTexCoords);\r\n    shaders[DebugRenderMode.Normals] = webgl.createShader(hdExtendedVert, hdNormals);\r\n    shaders[DebugRenderMode.Tangents] = webgl.createShader('#define ONLY_TANGENTS\\n' + hdExtendedVert, hdTangents);\r\n    hdDebugShaders[SkinningType.ExtendedVertexGroups] = shaders;\r\n\r\n    shaders = [];\r\n    shaders[DebugRenderMode.Diffuse] = webgl.createShader(hdSkinVert, hdDiffuse);\r\n    shaders[DebugRenderMode.NormalMap] = webgl.createShader(hdSkinVert, hdNormalMap);\r\n    shaders[DebugRenderMode.Occlusion] = webgl.createShader(hdSkinVert, hdOcclusion);\r\n    shaders[DebugRenderMode.Roughness] = webgl.createShader(hdSkinVert, hdRoughness);\r\n    shaders[DebugRenderMode.Metallic] = webgl.createShader(hdSkinVert, hdMetallic);\r\n    shaders[DebugRenderMode.TCFactor] = webgl.createShader(hdSkinVert, hdTCFactor);\r\n    shaders[DebugRenderMode.Emissive] = webgl.createShader(hdSkinVert, hdEmissive);\r\n    shaders[DebugRenderMode.TexCoords] = webgl.createShader(hdSkinVert, hdTexCoords);\r\n    shaders[DebugRenderMode.Normals] = webgl.createShader(hdSkinVert, hdNormals);\r\n    shaders[DebugRenderMode.Tangents] = webgl.createShader('#define ONLY_TANGENTS\\n' + hdSkinVert, hdTangents);\r\n    hdDebugShaders[SkinningType.Skin] = shaders;\r\n\r\n    const rectBuffer = <WebGLBuffer>gl.createBuffer();\r\n\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, rectBuffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, new Uint8Array([0, 1, 2, 0, 2, 3]), gl.STATIC_DRAW);\r\n\r\n    const handlerData: MdxHandlerObject = {\r\n      pathSolver,\r\n      reforged,\r\n      // Shaders.\r\n      sdShader,\r\n      sdExtendedShader,\r\n      hdShader,\r\n      hdExtendedShader,\r\n      hdSkinShader,\r\n      particlesShader,\r\n      sdDebugShaders,\r\n      hdDebugShaders,\r\n      // Geometry emitters buffer.\r\n      rectBuffer,\r\n      // Team color/glow textures - loaded when the first model that uses team textures is loaded.\r\n      teamColors: [],\r\n      teamGlows: [],\r\n      eventObjectTables: {},\r\n\r\n      // lutTexture: null,\r\n      // envDiffuseTexture: null,\r\n      // envSpecularTexture: null,\r\n    };\r\n\r\n    viewer.sharedCache.set('mdx', handlerData);\r\n  },\r\n  isValidSource(object: unknown): boolean {\r\n    if (object instanceof MdlxModel) {\r\n      return true;\r\n    }\r\n\r\n    return isMdx(object) || isMdl(object);\r\n  },\r\n  resource: Model,\r\n  // async loadEnv(viewer: ModelViewer) {\r\n  //   const mdxHandler = <MdxHandlerObject>viewer.sharedCache.get('mdx');\r\n\r\n  //   if (!mdxHandler.lutTexture) {\r\n  //     mdxHandler.lutTexture = new MdxTexture(0, WrapMode.WrapBoth);\r\n  //     mdxHandler.envDiffuseTexture = new MdxTexture(0, WrapMode.WrapBoth);\r\n  //     mdxHandler.envSpecularTexture = new MdxTexture(0, WrapMode.WrapBoth);\r\n\r\n  //     const [lutTexture, diffuseTexture, specularTexture] = await Promise.all([\r\n  //       viewer.load('env/lut.png'),\r\n  //       viewer.load('env/diffuse-sRGB.png'),\r\n  //       viewer.load('env/specular-sRGB.png'),\r\n  //     ]);\r\n\r\n  //     mdxHandler.lutTexture.texture = <Texture>lutTexture;\r\n  //     mdxHandler.envDiffuseTexture.texture = <Texture>diffuseTexture;\r\n  //     mdxHandler.envSpecularTexture.texture = <Texture>specularTexture;\r\n  //   }\r\n\r\n  // },\r\n  loadTeamTextures(viewer: ModelViewer): void {\r\n    const { pathSolver, reforged, teamColors, teamGlows } = <MdxHandlerObject>viewer.sharedCache.get('mdx');\r\n\r\n    if (teamColors.length === 0) {\r\n      const teams = reforged ? 28 : 16;\r\n      const ext = reforged ? 'dds' : 'blp';\r\n      const params = reforged ? { reforged: true } : undefined;\r\n\r\n      for (let i = 0; i < teams; i++) {\r\n        const id = `${i}`.padStart(2, '0');\r\n        const end = `${id}.${ext}`;\r\n\r\n        const teamColor = new MdxTexture(1, WrapMode.WrapBoth);\r\n        const teamGlow = new MdxTexture(2, WrapMode.WrapBoth);\r\n\r\n        viewer.load(`ReplaceableTextures\\\\TeamColor\\\\TeamColor${end}`, pathSolver, params)\r\n          .then((texture) => teamColor.texture = <Texture>texture);\r\n\r\n        viewer.load(`ReplaceableTextures\\\\TeamGlow\\\\TeamGlow${end}`, pathSolver, params)\r\n          .then((texture) => teamGlow.texture = <Texture>texture);\r\n\r\n        teamColors[i] = teamColor;\r\n        teamGlows[i] = teamGlow;\r\n      }\r\n    }\r\n  },\r\n  getEventObjectSoundFile(file: string, reforged: boolean, isHd: boolean, tables: GenericResource[]): string | undefined {\r\n    if (!reforged || extname(file) === '.flac') {\r\n      return file;\r\n    }\r\n\r\n    for (let i = 1, l = tables.length; i < l; i++) {\r\n      const raceRow = (<MappedData>tables[i].data).getRow(file);\r\n\r\n      if (raceRow) {\r\n        const flags = raceRow.string('Flags');\r\n        const filePath = raceRow.string('Filepath');\r\n\r\n        if (flags === 'SD_ONLY') {\r\n          if (!isHd) {\r\n            return filePath;\r\n          }\r\n        } else if (flags === 'HD_ONLY') {\r\n          if (isHd) {\r\n            return filePath;\r\n          }\r\n        } else {\r\n          return filePath;\r\n        }\r\n      }\r\n    }\r\n\r\n    return;\r\n  },\r\n  async getEventObjectData(viewer: ModelViewer, type: string, id: string, isHd: boolean): Promise<EventObjectData | undefined> {\r\n    // Units\\Critters\\BlackStagMale\\BlackStagMale.mdx has an event object named \"Point01\".\r\n    if (type !== 'SPN' && type !== 'SPL' && type !== 'UBR' && type !== 'SND') {\r\n      return;\r\n    }\r\n\r\n    const { pathSolver, reforged, eventObjectTables } = <MdxHandlerObject>viewer.sharedCache.get('mdx');\r\n    const params: SolverParams = reforged ? { reforged: true } : {};\r\n    const safePathSolver: PathSolver = (src: unknown, params?: SolverParams): unknown => {\r\n      if (pathSolver) {\r\n        return pathSolver(src, params);\r\n      }\r\n\r\n      return src;\r\n    };\r\n\r\n    if (!eventObjectTables[type]) {\r\n      const paths = [];\r\n\r\n      if (type === 'SPN') {\r\n        paths.push('Splats\\\\SpawnData.slk');\r\n      } else if (type === 'SPL') {\r\n        paths.push('Splats\\\\SplatData.slk');\r\n      } else if (type === 'UBR') {\r\n        paths.push('Splats\\\\UberSplatData.slk');\r\n      } else if (type === 'SND') {\r\n        paths.push('UI\\\\SoundInfo\\\\AnimSounds.slk');\r\n\r\n        // Reforged changed the data layout.\r\n        if (reforged) {\r\n          paths.push(\r\n            'UI\\\\SoundInfo\\\\DialogueHumanBase.slk',\r\n            'UI\\\\SoundInfo\\\\DialogueOrcBase.slk',\r\n            'UI\\\\SoundInfo\\\\DialogueUndeadBase.slk',\r\n            'UI\\\\SoundInfo\\\\DialogueNightElfBase.slk',\r\n            'UI\\\\SoundInfo\\\\DialogueNagaBase.slk',\r\n            'UI\\\\SoundInfo\\\\DialogueDemonBase.slk',\r\n            'UI\\\\SoundInfo\\\\DialogueCreepsBase.slk');\r\n        } else {\r\n          paths.push('UI\\\\SoundInfo\\\\AnimLookups.slk');\r\n        }\r\n      }\r\n\r\n      const promises = paths.map((path) => viewer.loadGeneric(<string>safePathSolver(path, params), 'text', mappedDataCallback));\r\n      const resources = await Promise.all(promises);\r\n\r\n      for (const resource of resources) {\r\n        if (!resource) {\r\n          return;\r\n        }\r\n      }\r\n\r\n      eventObjectTables[type] = <GenericResource[]>resources;\r\n    }\r\n\r\n    const tables = eventObjectTables[type];\r\n    const mappedData = <MappedData>tables[0].data;\r\n    let row: MappedDataRow | undefined;\r\n    const promises = [];\r\n\r\n    if (type === 'SND') {\r\n      // How to get the sound row?\r\n      // TFT has AnimLookups.slk, which stores a ID->Label. Give it the event object ID, get back the label to look for in AnimSounds.slk.\r\n      // Reforged removed AnimLookups.slk, and instead has the ID under a new column in AnimSounds.slk called AnimationEventCode.\r\n      // In addition, Reforged can have SD/HD flags per sound, to determine whether it should load in SD or HD modes.\r\n      // When a sound has both modes, the path to it in AnimSounds.slk won't be an actual file path (ending with .flac) but rather a label.\r\n      // This label can be queried in other sound SLKs such as DialogueHumanBase.slk, which contains the full path and the mentioned flags.\r\n      if (reforged) {\r\n        row = mappedData.findRow('AnimationEventCode', id);\r\n      } else {\r\n        const lookupRow = (<MappedData>tables[1].data).getRow(id);\r\n\r\n        if (lookupRow) {\r\n          row = mappedData.getRow(<string>lookupRow.string('SoundLabel'));\r\n        }\r\n      }\r\n\r\n      if (row) {\r\n        for (const fileName of (<string>row.string('FileNames')).split(',')) {\r\n          const file = this.getEventObjectSoundFile(fileName, reforged, isHd, tables);\r\n\r\n          if (file) {\r\n            promises.push(viewer.loadGeneric(<string>safePathSolver(file, params), 'arrayBuffer', decodedDataCallback));\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      // Model and texture event objects are simpler than sounds - just get the right model or texture file.\r\n      row = mappedData.getRow(id);\r\n\r\n      if (row) {\r\n        if (type === 'SPN') {\r\n          promises.push(viewer.load((<string>row.string('Model')).replace('.mdl', '.mdx'), safePathSolver, params));\r\n        } else if (type === 'SPL' || type === 'UBR') {\r\n          promises.push(viewer.load(`ReplaceableTextures\\\\Splats\\\\${row.string('file')}${reforged ? '.dds' : '.blp'}`, safePathSolver, params));\r\n        }\r\n      }\r\n    }\r\n\r\n    if (row && promises.length) {\r\n      const resources = await Promise.all(promises);\r\n\r\n      // Make sure the resources actually loaded properly.\r\n      const filtered = <Resource[]>resources.filter((resource) => resource);\r\n\r\n      if (filtered.length) {\r\n        return { row, resources: filtered };\r\n      }\r\n    }\r\n\r\n    return;\r\n  },\r\n  getBatchShader(viewer: ModelViewer, skinningType: SkinningType, isHd: boolean): Shader {\r\n    const mdxCache = <MdxHandlerObject>viewer.sharedCache.get('mdx');\r\n    const debugRenderMode = viewer.debugRenderMode;\r\n\r\n    if (isHd) {\r\n      if (debugRenderMode !== DebugRenderMode.None) {\r\n        const shaders = mdxCache.hdDebugShaders[skinningType];\r\n        if (shaders) {\r\n          const shader = shaders[debugRenderMode];\r\n          if (shader) {\r\n            return shader;\r\n          }\r\n        }\r\n      }\r\n      \r\n      if (skinningType === SkinningType.Skin) {\r\n        return mdxCache.hdSkinShader;\r\n      } else if (skinningType === SkinningType.VertexGroups) {\r\n        return mdxCache.hdShader;\r\n      } else {\r\n        return mdxCache.hdExtendedShader;\r\n      }\r\n    } else {\r\n      if (debugRenderMode !== DebugRenderMode.None) {\r\n        const shaders = mdxCache.sdDebugShaders[skinningType];\r\n        if (shaders) {\r\n          const shader = shaders[debugRenderMode];\r\n          if (shader) {\r\n            return shader;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (skinningType === SkinningType.VertexGroups) {\r\n        return mdxCache.sdShader;\r\n      } else {\r\n        return mdxCache.sdExtendedShader;\r\n      }\r\n    }\r\n  }\r\n};\r\n","const shader = `\r\n#define EMITTER_PARTICLE2 0\r\n#define EMITTER_RIBBON 1\r\n#define EMITTER_SPLAT 2\r\n#define EMITTER_UBERSPLAT 3\r\n#define HEAD 0.0\r\n\r\nuniform mat4 u_VP;\r\nuniform int u_emitter;\r\n\r\n// Shared\r\nuniform vec4 u_colors[3];\r\nuniform vec3 u_vertices[4];\r\nuniform vec3 u_intervals[4];\r\nuniform float u_lifeSpan;\r\nuniform float u_columns;\r\nuniform float u_rows;\r\n\r\n// Particle2\r\nuniform vec3 u_scaling;\r\nuniform vec3 u_cameraZ;\r\nuniform float u_timeMiddle;\r\nuniform bool u_teamColored;\r\n\r\n// Splat and Uber.\r\nuniform vec3 u_intervalTimes;\r\n\r\n// Vertices\r\nattribute float a_position;\r\n\r\n// Instances\r\nattribute vec3 a_p0;\r\nattribute vec3 a_p1;\r\nattribute vec3 a_p2;\r\nattribute vec3 a_p3;\r\nattribute float a_health;\r\nattribute vec4 a_color;\r\nattribute float a_tail;\r\nattribute vec3 a_leftRightTop;\r\n\r\nvarying vec2 v_texcoord;\r\nvarying vec4 v_color;\r\n\r\nfloat getCell(vec3 interval, float factor) {\r\n  float start = interval[0];\r\n  float end = interval[1];\r\n  float repeat = interval[2];\r\n  float spriteCount = end - start;\r\n\r\n  if (spriteCount > 0.0) {\r\n    // Repeating speeds up the sprite animation, which makes it effectively run N times in its interval.\r\n    // E.g. if repeat is 4, the sprite animation will be seen 4 times, and thus also run 4 times as fast.\r\n    // The sprite index is limited to the number of actual sprites.\r\n    return min(start + mod(floor(spriteCount * repeat * factor), spriteCount), u_columns * u_rows - 1.0);\r\n  }\r\n\r\n  return start;\r\n}\r\n\r\nvoid particle2() {\r\n  float factor = (u_lifeSpan - a_health) / u_lifeSpan;\r\n  int index = 0;\r\n\r\n  if (factor < u_timeMiddle) {\r\n    factor = factor / u_timeMiddle;\r\n    index = 0;\r\n  } else {\r\n    factor = (factor - u_timeMiddle) / (1.0 - u_timeMiddle);\r\n    index = 1;\r\n  }\r\n\r\n  factor = min(factor, 1.0);\r\n\r\n  float scale = mix(u_scaling[index], u_scaling[index + 1], factor);\r\n  vec4 color = mix(u_colors[index], u_colors[index + 1], factor);\r\n\r\n  float cell = 0.0;\r\n\r\n  if (u_teamColored) {\r\n    cell = a_leftRightTop[0];\r\n  } else {\r\n    vec3 interval;\r\n\r\n    if (a_tail == HEAD) {\r\n      interval = u_intervals[index];\r\n    } else {\r\n      interval = u_intervals[index + 2];\r\n    }\r\n\r\n    cell = getCell(interval, factor);\r\n  }\r\n\r\n  float left = floor(mod(cell, u_columns));\r\n  float top = floor(cell / u_columns);\r\n  float right = left + 1.0;\r\n  float bottom = top + 1.0;\r\n\r\n  left /= u_columns;\r\n  right /= u_columns;\r\n  top /= u_rows;\r\n  bottom /= u_rows;\r\n\r\n  if (a_position == 0.0) {\r\n    v_texcoord = vec2(right, top);\r\n  } else if (a_position == 1.0) {\r\n    v_texcoord = vec2(left, top);\r\n  } else if (a_position == 2.0) {\r\n    v_texcoord = vec2(left, bottom);\r\n  } else if (a_position == 3.0) {\r\n    v_texcoord = vec2(right, bottom);\r\n  }\r\n\r\n  v_color = color;\r\n  \r\n  if (a_tail == HEAD) {\r\n    vec3 v = u_vertices[int(a_position)];\r\n    float cs = cos(a_p1.x);\r\n    float sn = sin(a_p1.x);\r\n\r\n    float x = v.x * cs - v.y * sn;\r\n    float y = v.x * sn + v.y * cs;\r\n\r\n    vec3 fv = vec3(\r\n      v.x * cs - v.y * sn,\r\n      v.x * sn + v.y * cs,\r\n      v.z);\r\n\r\n    gl_Position = u_VP * vec4(a_p0 + fv * scale, 1.0);\r\n  } else {\r\n    // Get the normal to the tail in camera space.\r\n    // This allows to build a 2D rectangle around the 3D tail.\r\n    vec3 normal = cross(u_cameraZ, normalize(a_p1 - a_p0));\r\n    vec3 boundary = normal * scale * a_p2[0];\r\n    vec3 position;\r\n\r\n    if (a_position == 0.0) {\r\n      position = a_p0 - boundary;\r\n    } else if (a_position == 1.0) {\r\n      position = a_p1 - boundary;\r\n    } else if (a_position == 2.0) {\r\n      position = a_p1 + boundary;\r\n    } else if (a_position == 3.0) {\r\n      position = a_p0 + boundary;\r\n    }\r\n\r\n    gl_Position = u_VP * vec4(position, 1.0);\r\n  }\r\n}\r\n\r\nvoid ribbon() {\r\n  vec3 position;\r\n  float left = a_leftRightTop[0] / 255.0;\r\n  float right = a_leftRightTop[1] / 255.0;\r\n  float top = a_leftRightTop[2] / 255.0;\r\n  float bottom = top + 1.0;\r\n\r\n  if (a_position == 0.0) {\r\n    v_texcoord = vec2(right, top);\r\n    position = a_p0;\r\n  } else if (a_position == 1.0) {\r\n    v_texcoord = vec2(right, bottom);\r\n    position = a_p1;\r\n  } else if (a_position == 2.0) {\r\n    v_texcoord = vec2(left, bottom);\r\n    position = a_p2;\r\n  } else if (a_position == 3.0) {\r\n    v_texcoord = vec2(left, top);\r\n    position = a_p3;\r\n  }\r\n\r\n  v_texcoord[0] /= u_columns;\r\n  v_texcoord[1] /= u_rows;\r\n\r\n  v_color = a_color;\r\n\r\n  gl_Position = u_VP * vec4(position, 1.0);\r\n}\r\n\r\nvoid splat() {\r\n  float factor = u_lifeSpan - a_health;\r\n  int index;\r\n\r\n  if (factor < u_intervalTimes[0]) {\r\n    factor = factor / u_intervalTimes[0];\r\n    index = 0;\r\n  } else {\r\n    factor = (factor - u_intervalTimes[0]) / u_intervalTimes[1];\r\n    index = 1;\r\n  }\r\n\r\n  float cell = getCell(u_intervals[index], factor);\r\n  float left = floor(mod(cell, u_columns));\r\n  float top = floor(cell / u_columns);\r\n  float right = left + 1.0;\r\n  float bottom = top + 1.0;\r\n  vec3 position;\r\n\r\n  if (a_position == 0.0) {\r\n    v_texcoord = vec2(left, top);\r\n    position = a_p0;\r\n  } else if (a_position == 1.0) {\r\n    v_texcoord = vec2(left, bottom);\r\n    position = a_p1;\r\n  } else if (a_position == 2.0) {\r\n    v_texcoord = vec2(right, bottom);\r\n    position = a_p2;\r\n  } else if (a_position == 3.0) {\r\n    v_texcoord = vec2(right, top);\r\n    position = a_p3;\r\n  }\r\n\r\n  v_texcoord[0] /= u_columns;\r\n  v_texcoord[1] /= u_rows;\r\n\r\n  v_color = mix(u_colors[index], u_colors[index + 1], factor) / 255.0;\r\n\r\n  gl_Position = u_VP * vec4(position, 1.0);\r\n}\r\n\r\nvoid ubersplat() {\r\n  float factor = u_lifeSpan - a_health;\r\n  vec4 color;\r\n\r\n  if (factor < u_intervalTimes[0]) {\r\n    color = mix(u_colors[0], u_colors[1], factor / u_intervalTimes[0]);\r\n  } else if (factor < u_intervalTimes[0] + u_intervalTimes[1]) {\r\n    color = u_colors[1];\r\n  } else {\r\n    color = mix(u_colors[1], u_colors[2], (factor - u_intervalTimes[0] - u_intervalTimes[1]) / u_intervalTimes[2]);\r\n  }\r\n\r\n  vec3 position;\r\n\r\n  if (a_position == 0.0) {\r\n    v_texcoord = vec2(0.0, 0.0);\r\n    position = a_p0;\r\n  } else if (a_position == 1.0) {\r\n    v_texcoord = vec2(0.0, 1.0);\r\n    position = a_p1;\r\n  } else if (a_position == 2.0) {\r\n    v_texcoord = vec2(1.0, 1.0);\r\n    position = a_p2;\r\n  } else if (a_position == 3.0) {\r\n    v_texcoord = vec2(1.0, 0.0);\r\n    position = a_p3;\r\n  }\r\n\r\n  v_color = color / 255.0;\r\n\r\n  gl_Position = u_VP * vec4(position, 1.0);\r\n}\r\n\r\nvoid main() {\r\n  if (u_emitter == EMITTER_PARTICLE2) {\r\n    particle2();\r\n  } else if (u_emitter == EMITTER_RIBBON) {\r\n    ribbon();\r\n  } else if (u_emitter == EMITTER_SPLAT) {\r\n    splat();\r\n  } else if (u_emitter == EMITTER_UBERSPLAT) {\r\n    ubersplat();\r\n  }\r\n}\r\n`;\r\n\r\nexport default shader;\r\n","\r\nimport Parser from '../../../parsers/mdlx/model';\r\nimport Sequence from './sequence';\r\nimport { HandlerResourceData } from '../../handlerresource';\r\nimport Model from '../../model';\r\nimport Texture from '../../texture';\r\nimport mdxHandler from './handler';\r\nimport TextureAnimation from './textureanimation';\r\nimport Layer from './layer';\r\nimport Material from './material';\r\nimport GeosetAnimation from './geosetanimation';\r\nimport replaceableIds from './replaceableids';\r\nimport Bone from './bone';\r\nimport Light from './light';\r\nimport Helper from './helper';\r\nimport Attachment from './attachment';\r\nimport ParticleEmitterObject from './particleemitterobject';\r\nimport ParticleEmitter2Object from './particleemitter2object';\r\nimport RibbonEmitterObject from './ribbonemitterobject';\r\nimport Camera from './camera';\r\nimport EventObjectEmitterObject from './eventobjectemitterobject';\r\nimport CollisionShape from './collisionshape';\r\nimport setupGeosets from './setupgeosets';\r\nimport setupGroups from './setupgroups';\r\nimport BatchGroup from './batchgroup';\r\nimport EmitterGroup from './emittergroup';\r\nimport GenericObject from './genericobject';\r\nimport { Batch } from './batch';\r\nimport Geoset from './geoset';\r\nimport MdxModelInstance from './modelinstance';\r\nimport MdxTexture from './texture';\r\n\r\n/**\r\n * An MDX model.\r\n */\r\nexport default class MdxModel extends Model {\r\n  reforged = false;\r\n  hd = false;\r\n  solverParams: { reforged?: boolean, hd?: boolean } = {};\r\n  name = '';\r\n  sequences: Sequence[] = [];\r\n  globalSequences: number[] = [];\r\n  materials: Material[] = [];\r\n  layers: Layer[] = [];\r\n  textures: MdxTexture[] = [];\r\n  textureAnimations: TextureAnimation[] = [];\r\n  geosets: Geoset[] = [];\r\n  geosetAnimations: GeosetAnimation[] = [];\r\n  bones: Bone[] = [];\r\n  lights: Light[] = [];\r\n  helpers: Helper[] = [];\r\n  attachments: Attachment[] = [];\r\n  pivotPoints: Float32Array[] = [];\r\n  particleEmitters: ParticleEmitterObject[] = [];\r\n  particleEmitters2: ParticleEmitter2Object[] = [];\r\n  ribbonEmitters: RibbonEmitterObject[] = [];\r\n  cameras: Camera[] = [];\r\n  eventObjects: EventObjectEmitterObject[] = [];\r\n  collisionShapes: CollisionShape[] = [];\r\n  hasLayerAnims = false;\r\n  hasGeosetAnims = false;\r\n  batches: Batch[] = [];\r\n  genericObjects: GenericObject[] = [];\r\n  sortedGenericObjects: GenericObject[] = [];\r\n  hierarchy: number[] = [];\r\n  opaqueGroups: BatchGroup[] = [];\r\n  translucentGroups: (BatchGroup | EmitterGroup)[] = [];\r\n  arrayBuffer: WebGLBuffer | null = null;\r\n  elementBuffer: WebGLBuffer | null = null;\r\n  skinDataType = 0;\r\n  bytesPerSkinElement = 1;\r\n\r\n  constructor(bufferOrParser: ArrayBuffer | string | Parser, resourceData: HandlerResourceData) {\r\n    super(resourceData);\r\n\r\n    let parser;\r\n\r\n    if (bufferOrParser instanceof Parser) {\r\n      parser = bufferOrParser;\r\n    } else {\r\n      parser = new Parser();\r\n\r\n      try {\r\n        parser.load(bufferOrParser);\r\n      } catch (e) {\r\n        // If we get here, the parser failed to load.\r\n        // It still may have loaded enough data to support rendering though!\r\n        // I have encountered a model that is missing data, but still works in-game.\r\n        // So just let the code continue.\r\n        // If the handler manages to load the model, nothing happened.\r\n        // If critical data is missing, it will fail and throw its own exception.\r\n      }\r\n    }\r\n\r\n    const viewer = this.viewer;\r\n    const pathSolver = this.pathSolver;\r\n    const solverParams = this.solverParams;\r\n    const reforged = parser.version > 800;\r\n    const texturesExt = reforged ? '.dds' : '.blp';\r\n    let hasTeamColors = false;\r\n\r\n    this.reforged = reforged;\r\n    this.name = parser.name;\r\n\r\n    // Initialize the bounds.\r\n    const extent = parser.extent;\r\n    this.bounds.fromExtents(extent.min, extent.max);\r\n\r\n    // Sequences\r\n    for (const sequence of parser.sequences) {\r\n      this.sequences.push(new Sequence(sequence));\r\n    }\r\n\r\n    // Global sequences\r\n    for (const globalSequence of parser.globalSequences) {\r\n      this.globalSequences.push(globalSequence);\r\n    }\r\n\r\n    // Texture animations\r\n    for (const textureAnimation of parser.textureAnimations) {\r\n      this.textureAnimations.push(new TextureAnimation(this, textureAnimation));\r\n    }\r\n\r\n    // Materials\r\n    let layerId = 0;\r\n    for (const material of parser.materials) {\r\n      const layers = [];\r\n\r\n      for (const layer of material.layers) {\r\n        const vLayer = new Layer(this, layer, layerId++, material.priorityPlane);\r\n\r\n        layers.push(vLayer);\r\n\r\n        this.layers.push(vLayer);\r\n      }\r\n\r\n      this.materials.push(new Material(this, material.shader, layers));\r\n\r\n      if (material.shader !== '') {\r\n        this.hd = true;\r\n      }\r\n    }\r\n\r\n    if (reforged) {\r\n      solverParams.reforged = true;\r\n    }\r\n\r\n    if (this.hd) {\r\n      solverParams.hd = true;\r\n\r\n      // mdxHandler.loadEnv(viewer);\r\n    }\r\n\r\n    // Textures.\r\n    const textures = parser.textures;\r\n    for (let i = 0, l = textures.length; i < l; i++) {\r\n      const texture = textures[i];\r\n      let path = texture.path;\r\n      const replaceableId = texture.replaceableId;\r\n      const wrapMode = texture.wrapMode;\r\n\r\n      if (path === '' && replaceableId !== 0) {\r\n        path = `ReplaceableTextures\\\\${replaceableIds[replaceableId]}${texturesExt}`;\r\n\r\n        if (replaceableId === 1 || replaceableId === 2) {\r\n          hasTeamColors = true;\r\n        }\r\n      }\r\n\r\n      const mdxTexture = new MdxTexture(replaceableId, wrapMode);\r\n\r\n      viewer.load(path, pathSolver, solverParams)\r\n        .then((texture) => {\r\n          if (texture) {\r\n            mdxTexture.texture = <Texture>texture;\r\n          }\r\n        });\r\n\r\n      this.textures[i] = mdxTexture;\r\n    }\r\n\r\n    // Geoset animations\r\n    for (const geosetAnimation of parser.geosetAnimations) {\r\n      this.geosetAnimations.push(new GeosetAnimation(this, geosetAnimation));\r\n    }\r\n\r\n    this.pivotPoints = parser.pivotPoints;\r\n\r\n    // Tracks the IDs of all generic objects.\r\n    let objectId = 0;\r\n\r\n    // Bones\r\n    for (const bone of parser.bones) {\r\n      this.bones.push(new Bone(this, bone, objectId++));\r\n    }\r\n\r\n    // Lights\r\n    for (const light of parser.lights) {\r\n      this.lights.push(new Light(this, light, objectId++));\r\n    }\r\n\r\n    // Helpers\r\n    for (const helper of parser.helpers) {\r\n      this.helpers.push(new Helper(this, helper, objectId++));\r\n    }\r\n\r\n    // Attachments\r\n    for (const attachment of parser.attachments) {\r\n      this.attachments.push(new Attachment(this, attachment, objectId++));\r\n    }\r\n\r\n    // Particle emitters\r\n    for (const particleEmitter of parser.particleEmitters) {\r\n      this.particleEmitters.push(new ParticleEmitterObject(this, particleEmitter, objectId++));\r\n    }\r\n\r\n    // Particle emitters 2\r\n    for (const particleEmitter2 of parser.particleEmitters2) {\r\n      const emitter = new ParticleEmitter2Object(this, particleEmitter2, objectId++);\r\n\r\n      this.particleEmitters2.push(emitter);\r\n\r\n      if (emitter.teamColored) {\r\n        hasTeamColors = true;\r\n      }\r\n    }\r\n\r\n    // Ribbon emitters\r\n    for (const ribbonEmitter of parser.ribbonEmitters) {\r\n      this.ribbonEmitters.push(new RibbonEmitterObject(this, ribbonEmitter, objectId++));\r\n    }\r\n\r\n    // Cameras\r\n    for (const camera of parser.cameras) {\r\n      this.cameras.push(new Camera(this, camera));\r\n    }\r\n\r\n    // Event objects\r\n    for (const eventObject of parser.eventObjects) {\r\n      this.eventObjects.push(new EventObjectEmitterObject(this, eventObject, objectId++));\r\n    }\r\n\r\n    // Collision shapes\r\n    for (const collisionShape of parser.collisionShapes) {\r\n      this.collisionShapes.push(new CollisionShape(this, collisionShape, objectId++));\r\n    }\r\n\r\n    // One array for all generic objects.\r\n    this.genericObjects.push(...this.bones, ...this.lights, ...this.helpers, ...this.attachments, ...this.particleEmitters, ...this.particleEmitters2, ...this.ribbonEmitters, ...this.eventObjects, ...this.collisionShapes);\r\n\r\n    // Geosets\r\n    setupGeosets(this, parser.geosets);\r\n\r\n    // Render groups.\r\n    setupGroups(this);\r\n\r\n    // Creates the sorted indices array of the generic objects.\r\n    this.setupHierarchy(-1);\r\n\r\n    // Keep a sorted array.\r\n    for (let i = 0, l = this.genericObjects.length; i < l; i++) {\r\n      this.sortedGenericObjects[i] = this.genericObjects[this.hierarchy[i]];\r\n    }\r\n\r\n    // Lazy loading team colors.\r\n    if (hasTeamColors) {\r\n      mdxHandler.loadTeamTextures(viewer);\r\n    }\r\n  }\r\n\r\n  addInstance(): MdxModelInstance {\r\n    return new MdxModelInstance(this);\r\n  }\r\n\r\n  setupHierarchy(parent: number): void {\r\n    for (let i = 0, l = this.genericObjects.length; i < l; i++) {\r\n      const object = this.genericObjects[i];\r\n\r\n      if (object.parentId === parent) {\r\n        this.hierarchy.push(i);\r\n\r\n        this.setupHierarchy(object.objectId);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import MdlxGeoset from '../../../parsers/mdlx/geoset';\r\nimport MdxModel from './model';\r\nimport Geoset from './geoset';\r\nimport { SkinningType, Batch } from './batch';\r\n\r\nexport default function setupGeosets(model: MdxModel, geosets: MdlxGeoset[]): void {\r\n  if (geosets.length > 0) {\r\n    const gl = model.viewer.gl;\r\n    let positionBytes = 0;\r\n    let normalBytes = 0;\r\n    let uvBytes = 0;\r\n    let tangentBytes = 0;\r\n    let skinBytes = 0;\r\n    let faceBytes = 0;\r\n    const skinTypes: SkinningType[] = [];\r\n\r\n    for (let i = 0, l = geosets.length; i < l; i++) {\r\n      const geoset = geosets[i];\r\n\r\n      if (geoset.lod === 0 || geoset.lod === -1) {\r\n        const vertices = geoset.vertices.length / 3;\r\n\r\n        positionBytes += vertices * 12;\r\n        normalBytes += vertices * 12;\r\n        uvBytes += geoset.uvSets.length * vertices * 8;\r\n\r\n        if (geoset.tangents.length) {\r\n          tangentBytes += vertices * 16;\r\n        }\r\n\r\n        if (geoset.skin.length) {\r\n          skinBytes += vertices * 8;\r\n\r\n          skinTypes[i] = SkinningType.Skin;\r\n        } else {\r\n          let biggestGroup = 0;\r\n\r\n          for (const group of geoset.matrixGroups) {\r\n            if (group > biggestGroup) {\r\n              biggestGroup = group;\r\n            }\r\n          }\r\n\r\n          if (biggestGroup > 4) {\r\n            skinBytes += vertices * 9;\r\n\r\n            skinTypes[i] = SkinningType.ExtendedVertexGroups;\r\n          } else {\r\n            skinBytes += vertices * 5;\r\n\r\n            skinTypes[i] = SkinningType.VertexGroups;\r\n          }\r\n        }\r\n\r\n        faceBytes += geoset.faces.byteLength;\r\n      }\r\n    }\r\n\r\n    let positionOffset = 0;\r\n    let normalOffset = positionOffset + positionBytes;\r\n    let uvOffset = normalOffset + normalBytes;\r\n    let tangentOffset = uvOffset + uvBytes;\r\n    let skinOffset = tangentOffset + tangentBytes;\r\n    let faceOffset = 0;\r\n    let SkinTypedArray: typeof Uint8Array | typeof Uint16Array = Uint8Array;\r\n    let skinGlType = gl.UNSIGNED_BYTE;\r\n\r\n    if (model.bones.length > 255) {\r\n      skinBytes *= 2;\r\n      SkinTypedArray = Uint16Array;\r\n      skinGlType = gl.UNSIGNED_SHORT;\r\n    }\r\n\r\n    model.skinDataType = skinGlType;\r\n    model.bytesPerSkinElement = SkinTypedArray.BYTES_PER_ELEMENT;\r\n\r\n    model.arrayBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, model.arrayBuffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, skinOffset + skinBytes, gl.STATIC_DRAW);\r\n\r\n    model.elementBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, model.elementBuffer);\r\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, faceBytes, gl.STATIC_DRAW);\r\n\r\n    for (let i = 0, l = geosets.length; i < l; i++) {\r\n      const geoset = geosets[i];\r\n\r\n      if (geoset.lod === 0 || geoset.lod === -1) {\r\n        const positions = geoset.vertices;\r\n        const normals = geoset.normals;\r\n        const uvSets = geoset.uvSets;\r\n        const tangents = geoset.tangents;\r\n        const faces = geoset.faces;\r\n        let skin;\r\n        const vertices = geoset.vertices.length / 3;\r\n        const skinType = skinTypes[i];\r\n\r\n        if (skinType === SkinningType.Skin) {\r\n          skin = geoset.skin;\r\n        } else {\r\n          const matrixIndices = geoset.matrixIndices;\r\n          const vertexGroups = geoset.vertexGroups;\r\n          const matrixGroups = [];\r\n          let offset = 0;\r\n\r\n          // Normally the shader supports up to 4 bones per vertex.\r\n          // This is enough for almost every existing Warcraft 3 model.\r\n          // That being said, there are a few models with geosets that need more, for example the Water Elemental.\r\n          // These geosets use a different shader, which support up to 8 bones per vertex.\r\n          let maxBones = 4;\r\n\r\n          if (skinType === SkinningType.ExtendedVertexGroups) {\r\n            maxBones = 8;\r\n          }\r\n\r\n          skin = new SkinTypedArray(vertices * (maxBones + 1));\r\n\r\n          // Slice the matrix groups.\r\n          for (const size of geoset.matrixGroups) {\r\n            matrixGroups.push(matrixIndices.subarray(offset, offset + size));\r\n            offset += size;\r\n          }\r\n\r\n          // Parse the skinning.\r\n          for (let i = 0; i < vertices; i++) {\r\n            const matrixGroup = matrixGroups[vertexGroups[i]];\r\n\r\n            offset = i * (maxBones + 1);\r\n\r\n            // Somehow in some bad models a vertex group index refers to an invalid matrix group.\r\n            // Such models are still loaded by the game.\r\n            if (matrixGroup) {\r\n              const bones = Math.min(matrixGroup.length, maxBones);\r\n\r\n              for (let j = 0; j < bones; j++) {\r\n                skin[offset + j] = matrixGroup[j] + 1; // 1 is added to diffrentiate between matrix 0, and no matrix.\r\n              }\r\n\r\n              skin[offset + maxBones] = bones;\r\n            }\r\n          }\r\n        }\r\n\r\n        const vGeoset = new Geoset(model, model.geosets.length, positionOffset, normalOffset, uvOffset, tangentOffset, skinOffset, faceOffset, vertices, faces.length, geoset.faceTypeGroups[0]);\r\n        model.geosets.push(vGeoset);\r\n\r\n        const material = model.materials[geoset.materialId];\r\n        const isHd = material.shader === 'Shader_HD_DefaultUnit';\r\n\r\n        if (isHd) {\r\n          model.batches.push(new Batch(model.batches.length, vGeoset, material, skinType, true));\r\n        } else {\r\n          for (const layer of material.layers) {\r\n            model.batches.push(new Batch(model.batches.length, vGeoset, layer, skinType, false));\r\n          }\r\n        }\r\n\r\n        // Positions.\r\n        gl.bufferSubData(gl.ARRAY_BUFFER, positionOffset, positions);\r\n        positionOffset += positions.byteLength;\r\n\r\n        // Normals.\r\n        gl.bufferSubData(gl.ARRAY_BUFFER, normalOffset, normals);\r\n        normalOffset += normals.byteLength;\r\n\r\n        // Texture coordinates.\r\n        for (const uvSet of uvSets) {\r\n          gl.bufferSubData(gl.ARRAY_BUFFER, uvOffset, uvSet);\r\n          uvOffset += uvSet.byteLength;\r\n        }\r\n\r\n        // Tangents.\r\n        if (tangents.length) {\r\n          gl.bufferSubData(gl.ARRAY_BUFFER, tangentOffset, tangents);\r\n          tangentOffset += tangents.byteLength;\r\n        }\r\n\r\n        // Skin.\r\n        gl.bufferSubData(gl.ARRAY_BUFFER, skinOffset, skin);\r\n        skinOffset += skin.byteLength;\r\n\r\n        // Faces.\r\n        gl.bufferSubData(gl.ELEMENT_ARRAY_BUFFER, faceOffset, faces);\r\n        faceOffset += faces.byteLength;\r\n      }\r\n    }\r\n  }\r\n}\r\n","import TgaImage from '../../../parsers/tga/image';\r\nimport isTga from '../../../parsers/tga/isformat';\r\nimport Texture from './texture';\r\n\r\nexport default {\r\n  isValidSource(object: unknown): boolean {\r\n    if (object instanceof TgaImage) {\r\n      return true;\r\n    }\r\n\r\n    return isTga(object);\r\n  },\r\n  resource: Texture,\r\n};\r\n","import { isPowerOfTwo } from '../../../common/math';\r\nimport TgaImage from '../../../parsers/tga/image';\r\nimport { HandlerResourceData } from '../../handlerresource';\r\nimport Texture from '../../texture';\r\n\r\n/**\r\n * A TGA texture handler.\r\n */\r\nexport default class TgaTexture extends Texture {\r\n  constructor(bufferOrImage: ArrayBuffer | TgaImage, resourceData: HandlerResourceData) {\r\n    super(resourceData);\r\n\r\n    let image;\r\n\r\n    if (bufferOrImage instanceof TgaImage) {\r\n      image = bufferOrImage;\r\n    } else {\r\n      image = new TgaImage();\r\n\r\n      image.load(bufferOrImage);\r\n    }\r\n\r\n    const width = image.width;\r\n    const height = image.height;\r\n\r\n    const gl = this.viewer.gl;\r\n    const id = gl.createTexture();\r\n\r\n    gl.bindTexture(gl.TEXTURE_2D, id);\r\n\r\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, <ImageData>image.data);\r\n\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n\r\n    if (isPowerOfTwo(width) && isPowerOfTwo(height)) {\r\n      gl.generateMipmap(gl.TEXTURE_2D);\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\r\n    } else {\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n    }\r\n\r\n    this.webglResource = id;\r\n    this.width = width;\r\n    this.height = height;\r\n  }\r\n}\r\n","import precision from '../../shaders/precision.glsl';\r\n\r\nconst shader = `\r\n${precision}\r\n\r\nuniform sampler2D u_tilesets[15];\r\n\r\nvarying vec4 v_tilesets;\r\nvarying vec2 v_uv[4];\r\nvarying vec3 v_normal;\r\n\r\nconst vec3 lightDirection = normalize(vec3(-0.3, -0.3, 0.25));\r\n\r\nvec4 sample(float tileset, vec2 uv) {\r\n  // 1.0 - 1.0 == 0.0 is not always true.\r\n  int i = int(tileset - 0.6);\r\n\r\n  if (i == 0) {\r\n    return texture2D(u_tilesets[0], uv);\r\n  } else if (i == 1) {\r\n    return texture2D(u_tilesets[1], uv);\r\n  } else if (i == 2) {\r\n    return texture2D(u_tilesets[2], uv);\r\n  } else if (i == 3) {\r\n    return texture2D(u_tilesets[3], uv);\r\n  } else if (i == 4) {\r\n    return texture2D(u_tilesets[4], uv);\r\n  } else if (i == 5) {\r\n    return texture2D(u_tilesets[5], uv);\r\n  } else if (i == 6) {\r\n    return texture2D(u_tilesets[6], uv);\r\n  } else if (i == 7) {\r\n    return texture2D(u_tilesets[7], uv);\r\n  } else if (i == 8) {\r\n    return texture2D(u_tilesets[8], uv);\r\n  } else if (i == 9) {\r\n    return texture2D(u_tilesets[9], uv);\r\n  } else if (i == 10) {\r\n    return texture2D(u_tilesets[10], uv);\r\n  } else if (i == 11) {\r\n    return texture2D(u_tilesets[11], uv);\r\n  } else if (i == 12) {\r\n    return texture2D(u_tilesets[12], uv);\r\n  } else if (i == 13) {\r\n    return texture2D(u_tilesets[13], uv);\r\n  } else if (i == 14) {\r\n    return texture2D(u_tilesets[14], uv);\r\n  }\r\n}\r\n\r\nvec4 blend(vec4 color, float tileset, vec2 uv) {\r\n  vec4 texel = sample(tileset, uv);\r\n\r\n  return mix(color, texel, texel.a);\r\n}\r\n\r\nvoid main() {\r\n  vec4 color = sample(v_tilesets[0], v_uv[0]);\r\n\r\n  if (v_tilesets[1] > 0.5) {\r\n    color = blend(color, v_tilesets[1], v_uv[1]);\r\n  }\r\n\r\n  if (v_tilesets[2] > 0.5) {\r\n    color = blend(color, v_tilesets[2], v_uv[2]);\r\n  }\r\n\r\n  if (v_tilesets[3] > 0.5) {\r\n    color = blend(color, v_tilesets[3], v_uv[3]);\r\n  }\r\n\r\n  //color *= clamp(dot(v_normal, lightDirection) + 0.45, 0.0, 1.0);\r\n\r\n  gl_FragColor = vec4(color.rgb, 1.0);\r\n}\r\n`;\r\n\r\nexport default shader;\r\n","import precision from '../../shaders/precision.glsl';\r\n\r\nconst shader = `\r\n${precision}\r\n\r\nuniform sampler2D u_waterTexture;\r\n\r\nvarying vec2 v_uv;\r\nvarying vec4 v_color;\r\n\r\nvoid main() {\r\n  gl_FragColor = texture2D(u_waterTexture, v_uv) * v_color;\r\n}\r\n`;\r\n\r\nexport default shader;\r\n","import precision from '../../shaders/precision.glsl';\r\n\r\nconst shader = `\r\n// #extension GL_OES_standard_derivatives : enable\r\n\r\n${precision}\r\n\r\nuniform sampler2D u_texture1;\r\nuniform sampler2D u_texture2;\r\n\r\nvarying vec3 v_normal;\r\nvarying vec2 v_uv;\r\nvarying float v_texture;\r\nvarying vec3 v_position;\r\n\r\n// const vec3 lightDirection = normalize(vec3(-0.3, -0.3, 0.25));\r\n\r\nvec4 sample(float texture, vec2 uv) {\r\n  // int(0.0) == 0 is not always true.\r\n  int i = int(texture + 0.1);\r\n\r\n  if (i == 0) {\r\n    return texture2D(u_texture1, uv);\r\n  } else {\r\n    return texture2D(u_texture2, uv);\r\n  }\r\n}\r\n\r\nvoid main() {\r\n  vec4 color = sample(v_texture, v_uv);\r\n\r\n  // vec3 faceNormal = cross(dFdx(v_position), dFdy(v_position));\r\n  // vec3 normal = normalize((faceNormal + v_normal) * 0.5);\r\n\r\n  // color *= clamp(dot(normal, lightDirection) + 0.45, 0.1, 1.0);\r\n\r\n  gl_FragColor = color;\r\n}\r\n`;\r\n\r\nexport default shader;\r\n","/**\r\n * Returns an array that only contains unique values found in the source array.\r\n */\r\nexport default function unique<T>(a: T[]): T[] {\r\n  return a.reverse().filter((e, i, arr) => {\r\n    return arr.indexOf(e, i + 1) === -1;\r\n  }).reverse();\r\n}\r\n","const cliffVariations = {\r\n  AAAB: 1,\r\n  AAAC: 1,\r\n  AABA: 1,\r\n  AABB: 2,\r\n  AABC: 0,\r\n  AACA: 1,\r\n  AACB: 0,\r\n  AACC: 1,\r\n  ABAA: 1,\r\n  ABAB: 1,\r\n  ABAC: 0,\r\n  ABBA: 2,\r\n  ABBB: 1,\r\n  ABBC: 0,\r\n  ABCA: 0,\r\n  ABCB: 0,\r\n  ABCC: 0,\r\n  ACAA: 1,\r\n  ACAB: 0,\r\n  ACAC: 1,\r\n  ACBA: 0,\r\n  ACBB: 0,\r\n  ACBC: 0,\r\n  ACCA: 1,\r\n  ACCB: 0,\r\n  ACCC: 1,\r\n  BAAA: 1,\r\n  BAAB: 1,\r\n  BAAC: 0,\r\n  BABA: 1,\r\n  BABB: 1,\r\n  BABC: 0,\r\n  BACA: 0,\r\n  BACB: 0,\r\n  BACC: 0,\r\n  BBAA: 1,\r\n  BBAB: 1,\r\n  BBAC: 0,\r\n  BBBA: 1,\r\n  BBCA: 0,\r\n  BCAA: 0,\r\n  BCAB: 0,\r\n  BCAC: 0,\r\n  BCBA: 0,\r\n  BCCA: 0,\r\n  CAAA: 1,\r\n  CAAB: 0,\r\n  CAAC: 1,\r\n  CABA: 0,\r\n  CABB: 0,\r\n  CABC: 0,\r\n  CACA: 1,\r\n  CACB: 0,\r\n  CACC: 1,\r\n  CBAA: 0,\r\n  CBAB: 0,\r\n  CBAC: 0,\r\n  CBBA: 0,\r\n  CBCA: 0,\r\n  CCAA: 1,\r\n  CCAB: 0,\r\n  CCAC: 1,\r\n  CCBA: 0,\r\n  CCCA: 1,\r\n};\r\n\r\nconst cityCliffVariations = {\r\n  AAAB: 2,\r\n  AAAC: 1,\r\n  AABA: 1,\r\n  AABB: 3,\r\n  AABC: 0,\r\n  AACA: 1,\r\n  AACB: 0,\r\n  AACC: 3,\r\n  ABAA: 1,\r\n  ABAB: 2,\r\n  ABAC: 0,\r\n  ABBA: 3,\r\n  ABBB: 0,\r\n  ABBC: 0,\r\n  ABCA: 0,\r\n  ABCB: 0,\r\n  ABCC: 0,\r\n  ACAA: 1,\r\n  ACAB: 0,\r\n  ACAC: 2,\r\n  ACBA: 0,\r\n  ACBB: 0,\r\n  ACBC: 0,\r\n  ACCA: 3,\r\n  ACCB: 0,\r\n  ACCC: 1,\r\n  BAAA: 1,\r\n  BAAB: 3,\r\n  BAAC: 0,\r\n  BABA: 2,\r\n  BABB: 0,\r\n  BABC: 0,\r\n  BACA: 0,\r\n  BACB: 0,\r\n  BACC: 0,\r\n  BBAA: 3,\r\n  BBAB: 1,\r\n  BBAC: 0,\r\n  BBBA: 1,\r\n  BBCA: 0,\r\n  BCAA: 0,\r\n  BCAB: 0,\r\n  BCAC: 0,\r\n  BCBA: 0,\r\n  BCCA: 0,\r\n  CAAA: 1,\r\n  CAAB: 0,\r\n  CAAC: 3,\r\n  CABA: 0,\r\n  CABB: 0,\r\n  CABC: 0,\r\n  CACA: 2,\r\n  CACB: 0,\r\n  CACC: 1,\r\n  CBAA: 0,\r\n  CBAB: 0,\r\n  CBAC: 0,\r\n  CBBA: 0,\r\n  CBCA: 0,\r\n  CCAA: 3,\r\n  CCAB: 0,\r\n  CCAC: 1,\r\n  CCBA: 0,\r\n  CCCA: 1,\r\n};\r\n\r\nexport default function getCliffVariation(dir: string, tag: string, variation: number): number {\r\n  if (dir === 'Cliffs') {\r\n    return Math.min(variation, cliffVariations[tag]);\r\n  } else {\r\n    return Math.min(variation, cityCliffVariations[tag]);\r\n  }\r\n}\r\n","import MdlxModel from '../../../parsers/mdlx/model';\r\nimport Shader from '../../gl/shader';\r\nimport War3MapViewerMap from './map';\r\n\r\n/**\r\n * A static terrain model.\r\n */\r\nexport default class TerrainModel {\r\n  map: War3MapViewerMap;\r\n  vertexBuffer: WebGLBuffer;\r\n  faceBuffer: WebGLBuffer;\r\n  normalsOffset: number;\r\n  uvsOffset: number;\r\n  elements: number;\r\n  locationAndTextureBuffer: WebGLBuffer;\r\n  texturesOffset: number;\r\n  instances: number;\r\n  vao: WebGLVertexArrayObjectOES | null;\r\n\r\n  constructor(map: War3MapViewerMap, arrayBuffer: ArrayBuffer, locations: number[], textures: number[], shader: Shader) {\r\n    const gl = map.viewer.gl;\r\n    const webgl = map.viewer.webgl;\r\n    const instancedArrays = <ANGLE_instanced_arrays>webgl.extensions['ANGLE_instanced_arrays'];\r\n    const vertexArrayObject = <OES_vertex_array_object>webgl.extensions['OES_vertex_array_object'];\r\n\r\n    const parser = new MdlxModel();\r\n    parser.load(arrayBuffer);\r\n\r\n    const geoset = parser.geosets[0];\r\n    const vertices = geoset.vertices;\r\n    const normals = geoset.normals;\r\n    const uvs = geoset.uvSets[0];\r\n    const faces = geoset.faces;\r\n    const normalsOffset = vertices.byteLength;\r\n    const uvsOffset = normalsOffset + normals.byteLength;\r\n    let vao = null;\r\n    const attribs = shader.attribs;\r\n\r\n    if (vertexArrayObject) {\r\n      vao = vertexArrayObject.createVertexArrayOES();\r\n      vertexArrayObject.bindVertexArrayOES(vao);\r\n    }\r\n\r\n    const vertexBuffer = <WebGLBuffer>gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, uvsOffset + uvs.byteLength, gl.STATIC_DRAW);\r\n    gl.bufferSubData(gl.ARRAY_BUFFER, 0, vertices);\r\n    gl.bufferSubData(gl.ARRAY_BUFFER, normalsOffset, normals);\r\n    gl.bufferSubData(gl.ARRAY_BUFFER, uvsOffset, uvs);\r\n\r\n    if (vertexArrayObject) {\r\n      gl.vertexAttribPointer(attribs['a_position'], 3, gl.FLOAT, false, 0, 0);\r\n      gl.enableVertexAttribArray(attribs['a_position']);\r\n\r\n      gl.vertexAttribPointer(attribs['a_normal'], 3, gl.FLOAT, false, 0, normalsOffset);\r\n      gl.enableVertexAttribArray(attribs['a_normal']);\r\n\r\n      gl.vertexAttribPointer(attribs['a_uv'], 2, gl.FLOAT, false, 0, uvsOffset);\r\n      gl.enableVertexAttribArray(attribs['a_uv']);\r\n    }\r\n\r\n    const texturesOffset = locations.length * 4;\r\n    const locationAndTextureBuffer = <WebGLBuffer>gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, locationAndTextureBuffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, texturesOffset + textures.length, gl.STATIC_DRAW);\r\n    gl.bufferSubData(gl.ARRAY_BUFFER, 0, new Float32Array(locations));\r\n    gl.bufferSubData(gl.ARRAY_BUFFER, texturesOffset, new Uint8Array(textures));\r\n\r\n    if (vertexArrayObject) {\r\n      gl.vertexAttribPointer(attribs['a_instancePosition'], 3, gl.FLOAT, false, 0, 0);\r\n      gl.enableVertexAttribArray(attribs['a_instancePosition']);\r\n      instancedArrays.vertexAttribDivisorANGLE(attribs['a_instancePosition'], 1);\r\n\r\n      gl.vertexAttribPointer(attribs['a_instanceTexture'], 1, gl.UNSIGNED_BYTE, false, 0, texturesOffset);\r\n      gl.enableVertexAttribArray(attribs['a_instanceTexture']);\r\n      instancedArrays.vertexAttribDivisorANGLE(attribs['a_instanceTexture'], 1);\r\n\r\n    }\r\n\r\n    const faceBuffer = <WebGLBuffer>gl.createBuffer();\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, faceBuffer);\r\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW);\r\n\r\n    if (vertexArrayObject) {\r\n      vertexArrayObject.bindVertexArrayOES(null);\r\n    }\r\n\r\n    this.map = map;\r\n    this.vertexBuffer = vertexBuffer;\r\n    this.faceBuffer = faceBuffer;\r\n    this.normalsOffset = normalsOffset;\r\n    this.uvsOffset = uvsOffset;\r\n    this.elements = faces.length;\r\n    this.locationAndTextureBuffer = locationAndTextureBuffer;\r\n    this.texturesOffset = texturesOffset;\r\n    this.instances = locations.length / 3;\r\n    this.vao = vao;\r\n  }\r\n\r\n  render(shader: Shader): void {\r\n    const viewer = this.map.viewer;\r\n    const gl = viewer.gl;\r\n    const webgl = viewer.webgl;\r\n    const instancedArrays = <ANGLE_instanced_arrays>webgl.extensions['ANGLE_instanced_arrays'];\r\n    const vertexArrayObject = <OES_vertex_array_object>webgl.extensions['OES_vertex_array_object'];\r\n    const attribs = shader.attribs;\r\n\r\n    if (vertexArrayObject) {\r\n      vertexArrayObject.bindVertexArrayOES(this.vao);\r\n    } else {\r\n      // Locations and textures.\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.locationAndTextureBuffer);\r\n      gl.vertexAttribPointer(attribs['a_instancePosition'], 3, gl.FLOAT, false, 0, 0);\r\n      gl.vertexAttribPointer(attribs['a_instanceTexture'], 1, gl.UNSIGNED_BYTE, false, 0, this.texturesOffset);\r\n\r\n      // Vertices.\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\r\n      gl.vertexAttribPointer(attribs['a_position'], 3, gl.FLOAT, false, 0, 0);\r\n      gl.vertexAttribPointer(attribs['a_normal'], 3, gl.FLOAT, false, 0, this.normalsOffset);\r\n      gl.vertexAttribPointer(attribs['a_uv'], 2, gl.FLOAT, false, 0, this.uvsOffset);\r\n\r\n      // Faces.\r\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.faceBuffer);\r\n    }\r\n\r\n    // Draw.\r\n    instancedArrays.drawElementsInstancedANGLE(gl.TRIANGLES, this.elements, gl.UNSIGNED_SHORT, 0, this.instances);\r\n\r\n    if (vertexArrayObject) {\r\n      vertexArrayObject.bindVertexArrayOES(null);\r\n    }\r\n  }\r\n}\r\n","import Sequence from '../mdx/sequence';\r\nimport MdxModel from '../mdx/model';\r\nimport MdxModelInstance from '../mdx/modelinstance';\r\n\r\ninterface FilteredSequence {\r\n  sequence: Sequence;\r\n  index: number;\r\n}\r\n\r\nfunction sequenceSorter(a: FilteredSequence, b: FilteredSequence): number {\r\n  return a.sequence.rarity - b.sequence.rarity;\r\n}\r\n\r\nfunction filterSequences(type: string, sequences: Sequence[]): FilteredSequence[] {\r\n  const filtered = [];\r\n\r\n  for (let i = 0, l = sequences.length; i < l; i++) {\r\n    const sequence = sequences[i],\r\n      name = sequence.name.split('-')[0].replace(/\\d/g, '').trim().toLowerCase();\r\n\r\n    if (name === type) {\r\n      filtered.push({ sequence, index: i });\r\n    }\r\n  }\r\n\r\n  return filtered;\r\n}\r\n\r\nfunction selectSequence(type: string, sequences: Sequence[]): FilteredSequence {\r\n  const filtered = filterSequences(type, sequences);\r\n  let i, l;\r\n\r\n  filtered.sort(sequenceSorter);\r\n\r\n  for (i = 0, l = filtered.length; i < l; i++) {\r\n    const sequence = filtered[i].sequence;\r\n    const rarity = sequence.rarity;\r\n\r\n    if (rarity === 0) {\r\n      break;\r\n    }\r\n\r\n    if (Math.random() * 10 > rarity) {\r\n      return filtered[i];\r\n    }\r\n  }\r\n\r\n  const sequencesLeft = filtered.length - i;\r\n  const random = i + Math.floor(Math.random() * sequencesLeft);\r\n  const sequence = filtered[random];\r\n\r\n  return sequence;\r\n}\r\n\r\nexport default function randomStandSequence(target: MdxModelInstance): void {\r\n  const model = <MdxModel>target.model;\r\n  const sequences = model.sequences;\r\n  const sequence = selectSequence('stand', sequences);\r\n\r\n  if (sequence) {\r\n    target.setSequence(sequence.index);\r\n  }\r\n}\r\n","import MdxModel from '../mdx/model';\r\nimport MdxModelInstance from '../mdx/modelinstance';\r\nimport War3MapViewerMap from './map';\r\nimport randomStandSequence from './standsequence';\r\n\r\nexport enum WidgetState {\r\n  IDLE,\r\n  WALK,\r\n}\r\n\r\n/**\r\n * A widget.\r\n */\r\nexport class Widget {\r\n  instance: MdxModelInstance;\r\n  state = WidgetState.IDLE;\r\n\r\n  constructor(map: War3MapViewerMap, model: MdxModel) {\r\n    this.instance = model.addInstance();\r\n\r\n    this.instance.setScene(map.worldScene);\r\n  }\r\n\r\n  update(): void {\r\n    if (this.instance.sequenceEnded || this.instance.sequence === -1) {\r\n      if (this.state === WidgetState.IDLE) {\r\n        randomStandSequence(this.instance);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { vec3, quat } from 'gl-matrix';\r\nimport { VEC3_UNIT_Z } from '../../../common/gl-matrix-addon';\r\nimport { MappedDataRow } from '../../../utils/mappeddata';\r\nimport DooUnit from '../../../parsers/w3x/unitsdoo/unit';\r\nimport MdxModel from '../mdx/model';\r\nimport War3MapViewerMap from './map';\r\nimport { Widget } from './widget';\r\n\r\nconst heapZ = vec3.create();\r\n\r\n/**\r\n * A unit.\r\n */\r\nexport default class Unit extends Widget {\r\n  /**\r\n   * StartLocation.mdx (and others?) seems to be built-in, and has no row.\r\n   */\r\n  row: MappedDataRow | undefined;\r\n\r\n  constructor(map: War3MapViewerMap, model: MdxModel, row: MappedDataRow | undefined, unit: DooUnit) {\r\n    super(map, model);\r\n\r\n    const instance = this.instance;\r\n\r\n    instance.move(<vec3>unit.location);\r\n    instance.rotateLocal(quat.setAxisAngle(quat.create(), VEC3_UNIT_Z, unit.angle));\r\n    instance.scale(<vec3>unit.scale);\r\n    instance.setTeamColor(unit.player);\r\n    instance.setScene(map.worldScene);\r\n\r\n    if (row) {\r\n      heapZ[2] = row.number('moveHeight');\r\n\r\n      instance.move(heapZ);\r\n      instance.setVertexColor([row.number('red') / 255, row.number('green') / 255, row.number('blue') / 255, 1]);\r\n      instance.uniformScale(row.number('modelScale'));\r\n    }\r\n\r\n    this.instance = instance;\r\n    this.row = row;\r\n  }\r\n}\r\n","import { vec3, quat } from 'gl-matrix';\r\nimport { VEC3_UNIT_Z } from '../../../common/gl-matrix-addon';\r\nimport { MappedDataRow } from '../../../utils/mappeddata';\r\nimport DooDoodad from '../../../parsers/w3x/doo/doodad';\r\nimport MdxModel from '../mdx/model';\r\nimport War3MapViewerMap from './map';\r\nimport { Widget } from './widget';\r\n\r\n/**\r\n * A doodad.\r\n */\r\nexport default class Doodad extends Widget {\r\n  row: MappedDataRow;\r\n\r\n  constructor(map: War3MapViewerMap, model: MdxModel, row: MappedDataRow, doodad: DooDoodad) {\r\n    super(map, model);\r\n\r\n    const instance = this.instance;\r\n\r\n    instance.move(<vec3>doodad.location);\r\n    instance.rotateLocal(quat.setAxisAngle(quat.create(), VEC3_UNIT_Z, doodad.angle));\r\n    instance.scale(<vec3>doodad.scale);\r\n    instance.setScene(map.worldScene);\r\n\r\n    this.instance = instance;\r\n    this.row = row;\r\n  }\r\n}\r\n","import { vec3, quat } from 'gl-matrix';\r\nimport { VEC3_UNIT_Z } from '../../../common/gl-matrix-addon';\r\nimport { degToRad } from '../../../common/math';\r\nimport { MappedDataRow } from '../../../utils/mappeddata';\r\nimport DooTerrainDoodad from '../../../parsers/w3x/doo/terraindoodad';\r\nimport MdxModel from '../mdx/model';\r\nimport MdxModelInstance from '../mdx/modelinstance';\r\nimport War3MapViewerMap from './map';\r\n\r\n\r\nconst locationHeap = vec3.create();\r\n/**\r\n * A cliff/terrain doodad.\r\n */\r\nexport default class TerrainDoodad {\r\n  instance: MdxModelInstance;\r\n  row: MappedDataRow;\r\n\r\n  constructor(map: War3MapViewerMap, model: MdxModel, row: MappedDataRow, doodad: DooTerrainDoodad) {\r\n    const centeroffset = map.centerOffset;\r\n    const instance = model.addInstance();\r\n\r\n    locationHeap[0] = doodad.location[0] * 128 + centeroffset[0] + 128;\r\n    locationHeap[1] = doodad.location[1] * 128 + centeroffset[1] + 128;\r\n\r\n    instance.move(locationHeap);\r\n    instance.rotateLocal(quat.setAxisAngle(quat.create(), VEC3_UNIT_Z, degToRad(row.number('fixedRot'))));\r\n    instance.setScene(map.worldScene);\r\n\r\n    this.instance = instance;\r\n    this.row = row;\r\n  }\r\n}\r\n","import { vec3 } from 'gl-matrix';\r\nimport unique from '../../../common/arrayunique';\r\nimport War3Map from '../../../parsers/w3x/map';\r\nimport War3MapW3i from '../../../parsers/w3x/w3i/file';\r\nimport War3MapW3e from '../../../parsers/w3x/w3e/file';\r\nimport Corner from '../../../parsers/w3x/w3e/corner';\r\nimport War3MapW3u from '../../../parsers/w3x/w3u/file';\r\nimport War3MapW3d from '../../../parsers/w3x/w3d/file';\r\nimport ModificationTable from '../../../parsers/w3x/w3u/modificationtable';\r\nimport { MappedData, MappedDataRow } from '../../../utils/mappeddata';\r\nimport Scene from '../../scene';\r\nimport Grid from '../../grid';\r\nimport { PathSolver } from '../../handlerresource';\r\nimport Texture from '../../texture';\r\nimport MdxModel from '../mdx/model';\r\nimport getCliffVariation from './variations';\r\nimport TerrainModel from './terrainmodel';\r\nimport Unit from './unit';\r\nimport Doodad from './doodad';\r\nimport TerrainDoodad from './terraindoodad';\r\nimport War3MapViewer from './viewer';\r\nimport War3MapDoo from '../../../parsers/w3x/doo/file';\r\nimport War3MapUnitsDoo from '../../../parsers/w3x/unitsdoo/file';\r\nimport { Resource } from '../../resource';\r\n\r\nconst normalHeap1 = vec3.create();\r\nconst normalHeap2 = vec3.create();\r\n\r\nexport default class War3MapViewerMap {\r\n  viewer: War3MapViewer;\r\n  map: War3Map;\r\n  pathSolver: PathSolver;\r\n  buildVersion = 0;\r\n  solverParams: { tileset: string, reforged?: boolean, hd?: boolean } = { tileset: 'a' };\r\n  worldScene: Scene;\r\n  waterIndex = 0;\r\n  waterIncreasePerFrame = 0;\r\n  waterHeightOffset = 0;\r\n  waterTextures: Texture[] = [];\r\n  maxDeepColor = new Float32Array(4);\r\n  minDeepColor = new Float32Array(4);\r\n  maxShallowColor = new Float32Array(4);\r\n  minShallowColor = new Float32Array(4);\r\n  anyReady = false;\r\n  terrainReady = false;\r\n  cliffsReady = false;\r\n  doodads: Doodad[] = [];\r\n  terrainDoodads: TerrainDoodad[] = [];\r\n  doodadsReady = false;\r\n  units: Unit[] = [];\r\n  unitsReady = false;\r\n  tilesetTextures: Texture[] = [];\r\n  cliffTextures: Texture[] = [];\r\n  cliffModels: TerrainModel[] = [];\r\n  corners: Corner[][] = [];\r\n  centerOffset = new Float32Array(2);\r\n  mapSize = new Int32Array(2);\r\n  tilesets: MappedDataRow[] = [];\r\n  blightTextureIndex = -1;\r\n  cliffTilesets: MappedDataRow[] = [];\r\n  columns = 0;\r\n  rows = 0;\r\n  vertexBuffer: WebGLBuffer | null = null;\r\n  faceBuffer: WebGLBuffer | null = null;\r\n  instanceBuffer: WebGLBuffer | null = null;\r\n  textureBuffer: WebGLBuffer | null = null;\r\n  variationBuffer: WebGLBuffer | null = null;\r\n  waterBuffer: WebGLBuffer | null = null;\r\n  heightMap: WebGLTexture | null = null;\r\n  waterHeightMap: WebGLTexture | null = null;\r\n  cliffHeightMap: WebGLTexture | null = null;\r\n\r\n  constructor(viewer: War3MapViewer, buffer: ArrayBuffer | Uint8Array) {\r\n    this.viewer = viewer;\r\n    this.worldScene = viewer.addScene();\r\n\r\n    this.map = new War3Map();\r\n\r\n    // Readonly mode to optimize memory usage.\r\n    this.map.load(buffer, true);\r\n\r\n    this.loadMapInformation();\r\n\r\n    this.pathSolver = (src, params): unknown => {\r\n      // The type won't be a string for loads from memory, where the final source is the input source.\r\n      // The primitive constructor is one example of this.\r\n      if (typeof src === 'string') {\r\n        // MPQ paths have backwards slashes...always? Don't know.\r\n        const path = src.replace(/\\//g, '\\\\');\r\n\r\n        // If the file is in the map, return it.\r\n        const file = this.map.get(path);\r\n\r\n        if (file) {\r\n          return file.arrayBuffer();\r\n        }\r\n\r\n        // Try to get the file from the server.\r\n        return viewer.wc3PathSolver(src, params);\r\n      }\r\n\r\n      return src;\r\n    };\r\n\r\n    this.loadTerrainCliffsAndWater();\r\n\r\n    // Global tables like WC3. It's bad.\r\n    const modifications = this.map.readModifications();\r\n    this.applyModificationFile(viewer.doodadsData, viewer.doodadMetaData, modifications.w3d);\r\n    this.applyModificationFile(viewer.doodadsData, viewer.destructableMetaData, modifications.w3b);\r\n    this.applyModificationFile(viewer.unitsData, viewer.unitMetaData, modifications.w3u);\r\n    this.applyModificationFile(viewer.unitsData, viewer.unitMetaData, modifications.w3t);\r\n\r\n    this.loadDoodadsAndDestructibles();\r\n    this.loadUnitsAndItems();\r\n  }\r\n\r\n  die(): void {\r\n    this.worldScene.detach();\r\n  }\r\n\r\n  load(src: unknown): Promise<Resource | undefined> {\r\n    return this.viewer.load(src, this.pathSolver, this.solverParams);\r\n  }\r\n\r\n  loadMapInformation(): void {\r\n    const mpqFile = this.map.get('war3map.w3i');\r\n\r\n    if (!mpqFile) {\r\n      console.warn('Attempted to load war3map.w3i but it is not there. Using default tileset A.');\r\n      return;\r\n    }\r\n\r\n    const parser = new War3MapW3i();\r\n\r\n    try {\r\n      parser.load(mpqFile.bytes());\r\n    } catch (e) {\r\n      console.warn('Failed to correctly parse the map information file');\r\n    }\r\n\r\n    this.solverParams.tileset = parser.tileset.toLowerCase();\r\n\r\n    this.buildVersion = parser.getBuildVersion();\r\n\r\n    if (this.buildVersion > 131) {\r\n      this.solverParams.reforged = true;\r\n    }\r\n  }\r\n\r\n  async loadTerrainCliffsAndWater(): Promise<void> {\r\n    const mpqFile = this.map.get('war3map.w3e');\r\n\r\n    if (!mpqFile) {\r\n      console.warn('Attempted to load war3map.w3e, but it is not there.');\r\n      return;\r\n    }\r\n\r\n    const parser = new War3MapW3e();\r\n\r\n    try {\r\n      parser.load(mpqFile.bytes());\r\n    } catch (e) {\r\n      console.warn(`Failed to load war3map.w3e: ${e}`);\r\n      return;\r\n    }\r\n\r\n    const viewer = this.viewer;\r\n    const centerOffset = parser.centerOffset;\r\n    const mapSize = parser.mapSize;\r\n\r\n    this.corners = parser.corners;\r\n    this.centerOffset.set(centerOffset);\r\n    this.mapSize.set(mapSize);\r\n\r\n    // Override the grid based on the map.\r\n    this.worldScene.grid = new Grid(centerOffset[0], centerOffset[1], mapSize[0] * 128 - 128, mapSize[1] * 128 - 128, 16 * 128, 16 * 128);\r\n\r\n    const texturesExt = this.solverParams.reforged ? '.dds' : '.blp';\r\n    const tileset = parser.tileset;\r\n\r\n    const tilesetTextures = [];\r\n    const cliffTextures = [];\r\n    const waterTextures = [];\r\n\r\n    for (const groundTileset of parser.groundTilesets) {\r\n      const row = <MappedDataRow>viewer.terrainData.getRow(groundTileset);\r\n\r\n      this.tilesets.push(row);\r\n      \r\n      tilesetTextures.push(this.load(`${row.string('dir')}\\\\${row.string('file')}${texturesExt}`));\r\n    }\r\n\r\n    const blights = {\r\n      A: 'Ashen',\r\n      B: 'Barrens',\r\n      C: 'Felwood',\r\n      D: 'Cave',\r\n      F: 'Lordf',\r\n      G: 'Dungeon',\r\n      I: 'Ice',\r\n      J: 'DRuins',\r\n      K: 'Citadel',\r\n      L: 'Lords',\r\n      N: 'North',\r\n      O: 'Outland',\r\n      Q: 'VillageFall',\r\n      V: 'Village',\r\n      W: 'Lordw',\r\n      X: 'Village',\r\n      Y: 'Village',\r\n      Z: 'Ruins',\r\n    };\r\n\r\n    this.blightTextureIndex = this.tilesetTextures.length;\r\n    tilesetTextures.push(this.load(`TerrainArt\\\\Blight\\\\${blights[tileset]}_Blight${texturesExt}`));\r\n\r\n    for (const cliffTileset of parser.cliffTilesets) {\r\n      const row = <MappedDataRow>viewer.cliffTypesData.getRow(cliffTileset);\r\n\r\n      this.cliffTilesets.push(row);\r\n      cliffTextures.push(this.load(`${row.string('texDir')}\\\\${row.string('texFile')}${texturesExt}`));\r\n    }\r\n\r\n    const waterRow = <MappedDataRow>viewer.waterData.getRow(`${tileset}Sha`);\r\n\r\n    this.waterHeightOffset = waterRow.number('height');\r\n    this.waterIncreasePerFrame = waterRow.number('texRate') / 60;\r\n    this.waterTextures.length = 0;\r\n    this.maxDeepColor.set([waterRow.number('Dmax_R'), waterRow.number('Dmax_G'), waterRow.number('Dmax_B'), waterRow.number('Dmax_A')]);\r\n    this.minDeepColor.set([waterRow.number('Dmin_R'), waterRow.number('Dmin_G'), waterRow.number('Dmin_B'), waterRow.number('Dmin_A')]);\r\n    this.maxShallowColor.set([waterRow.number('Smax_R'), waterRow.number('Smax_G'), waterRow.number('Smax_B'), waterRow.number('Smax_A')]);\r\n    this.minShallowColor.set([waterRow.number('Smin_R'), waterRow.number('Smin_G'), waterRow.number('Smin_B'), waterRow.number('Smin_A')]);\r\n\r\n    for (let i = 0, l = waterRow.number('numTex'); i < l; i++) {\r\n      waterTextures.push(this.load(`${waterRow.string('texFile')}${i < 10 ? '0' : ''}${i}${texturesExt}`));\r\n    }\r\n\r\n    this.tilesetTextures = <Texture[]>await Promise.all(tilesetTextures);\r\n    this.cliffTextures = <Texture[]>await Promise.all(cliffTextures);\r\n    this.waterTextures = <Texture[]>await Promise.all(waterTextures);\r\n\r\n    const corners = parser.corners;\r\n    const [columns, rows] = this.mapSize;\r\n    const instanceCount = (columns - 1) * (rows - 1);\r\n    const cliffHeights = new Float32Array(columns * rows);\r\n    const cornerHeights = new Float32Array(columns * rows);\r\n    const waterHeights = new Float32Array(columns * rows);\r\n    const cornerTextures = new Uint8Array(instanceCount * 4);\r\n    const cornerVariations = new Uint8Array(instanceCount * 4);\r\n    const waterFlags = new Uint8Array(instanceCount);\r\n    let instance = 0;\r\n    const cliffs: {[key: string]: { locations: number[], textures: number[] }} = {};\r\n\r\n    this.columns = columns - 1;\r\n    this.rows = rows - 1;\r\n\r\n    for (let y = 0; y < rows; y++) {\r\n      for (let x = 0; x < columns; x++) {\r\n        const bottomLeft = corners[y][x];\r\n        const index = y * columns + x;\r\n\r\n        cliffHeights[index] = bottomLeft.groundHeight;\r\n        cornerHeights[index] = bottomLeft.groundHeight + bottomLeft.layerHeight - 2;\r\n        waterHeights[index] = bottomLeft.waterHeight;\r\n\r\n        if (y < rows - 1 && x < columns - 1) {\r\n          // Water can be used with cliffs and normal corners, so store water state regardless.\r\n          waterFlags[instance] = this.isWater(x, y);\r\n\r\n          // Is this a cliff, or a normal corner?\r\n          if (this.isCliff(x, y)) {\r\n            const bottomLeftLayer = bottomLeft.layerHeight;\r\n            const bottomRightLayer = corners[y][x + 1].layerHeight;\r\n            const topLeftLayer = corners[y + 1][x].layerHeight;\r\n            const topRightLayer = corners[y + 1][x + 1].layerHeight;\r\n            const base = Math.min(bottomLeftLayer, bottomRightLayer, topLeftLayer, topRightLayer);\r\n            const fileName = this.cliffFileName(bottomLeftLayer, bottomRightLayer, topLeftLayer, topRightLayer, base);\r\n\r\n            if (fileName !== 'AAAA') {\r\n              let cliffTexture = bottomLeft.cliffTexture;\r\n\r\n              /// ?\r\n              if (cliffTexture === 15) {\r\n                cliffTexture = 1;\r\n              }\r\n\r\n              const cliffRow = this.cliffTilesets[cliffTexture];\r\n              const dir = <string>cliffRow.string('cliffModelDir');\r\n              const path = `Doodads\\\\Terrain\\\\${dir}\\\\${dir}${fileName}${getCliffVariation(dir, fileName, bottomLeft.cliffVariation)}.mdx`;\r\n\r\n              if (!cliffs[path]) {\r\n                cliffs[path] = { locations: [], textures: []};\r\n              }\r\n\r\n              cliffs[path].locations.push((x + 1) * 128 + centerOffset[0], y * 128 + centerOffset[1], (base - 2) * 128);\r\n              cliffs[path].textures.push(cliffTexture);\r\n            }\r\n          } else {\r\n            const bottomLeftTexture = this.cornerTexture(x, y);\r\n            const bottomRightTexture = this.cornerTexture(x + 1, y);\r\n            const topLeftTexture = this.cornerTexture(x, y + 1);\r\n            const topRightTexture = this.cornerTexture(x + 1, y + 1);\r\n            const textures = unique([bottomLeftTexture, bottomRightTexture, topLeftTexture, topRightTexture]).sort();\r\n            let texture = textures[0];\r\n\r\n            cornerTextures[instance * 4] = texture + 1;\r\n            cornerVariations[instance * 4] = this.getVariation(texture, bottomLeft.groundVariation);\r\n\r\n            textures.shift();\r\n\r\n            for (let i = 0, l = textures.length; i < l; i++) {\r\n\r\n              let bitset = 0;\r\n\r\n              texture = textures[i];\r\n\r\n              if (bottomRightTexture === texture) {\r\n                bitset |= 0b0001;\r\n              }\r\n\r\n              if (bottomLeftTexture === texture) {\r\n                bitset |= 0b0010;\r\n              }\r\n\r\n              if (topRightTexture === texture) {\r\n                bitset |= 0b0100;\r\n              }\r\n\r\n              if (topLeftTexture === texture) {\r\n                bitset |= 0b1000;\r\n              }\r\n\r\n              cornerTextures[instance * 4 + 1 + i] = texture + 1;\r\n              cornerVariations[instance * 4 + 1 + i] = bitset;\r\n            }\r\n          }\r\n\r\n          instance += 1;\r\n        }\r\n      }\r\n    }\r\n\r\n    const gl = this.viewer.gl;\r\n    const webgl = this.viewer.webgl;\r\n\r\n    this.vertexBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]), gl.STATIC_DRAW);\r\n\r\n    this.faceBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.faceBuffer);\r\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint8Array([0, 1, 2, 1, 3, 2]), gl.STATIC_DRAW);\r\n\r\n    this.cliffHeightMap = gl.createTexture();\r\n    gl.bindTexture(gl.TEXTURE_2D, this.cliffHeightMap);\r\n    webgl.setTextureMode(gl.CLAMP_TO_EDGE, gl.CLAMP_TO_EDGE, gl.NEAREST, gl.NEAREST);\r\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.ALPHA, columns, rows, 0, gl.ALPHA, gl.FLOAT, cliffHeights);\r\n\r\n    this.heightMap = gl.createTexture();\r\n    gl.bindTexture(gl.TEXTURE_2D, this.heightMap);\r\n    webgl.setTextureMode(gl.CLAMP_TO_EDGE, gl.CLAMP_TO_EDGE, gl.NEAREST, gl.NEAREST);\r\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.ALPHA, columns, rows, 0, gl.ALPHA, gl.FLOAT, cornerHeights);\r\n\r\n    this.waterHeightMap = gl.createTexture();\r\n    gl.bindTexture(gl.TEXTURE_2D, this.waterHeightMap);\r\n    webgl.setTextureMode(gl.CLAMP_TO_EDGE, gl.CLAMP_TO_EDGE, gl.NEAREST, gl.NEAREST);\r\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.ALPHA, columns, rows, 0, gl.ALPHA, gl.FLOAT, waterHeights);\r\n\r\n    this.instanceBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.instanceBuffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(instanceCount).map((currentValue, index) => index), gl.STATIC_DRAW);\r\n\r\n    this.textureBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.textureBuffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, cornerTextures, gl.STATIC_DRAW);\r\n\r\n    this.variationBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.variationBuffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, cornerVariations, gl.STATIC_DRAW);\r\n\r\n    this.waterBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.waterBuffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, waterFlags, gl.STATIC_DRAW);\r\n\r\n    this.terrainReady = true;\r\n    this.anyReady = true;\r\n\r\n    const cliffShader = viewer.cliffShader;\r\n\r\n    const cliffPromises = Object.entries(cliffs).map(async (cliff) => {\r\n      const path = cliff[0];\r\n      const { locations, textures } = cliff[1];\r\n      const resource = await viewer.loadBaseFile(path, 'arrayBuffer');\r\n\r\n      if (resource) {\r\n        return new TerrainModel(this, <ArrayBuffer>resource.data, locations, textures, cliffShader);\r\n      }\r\n\r\n      return;\r\n    }).filter(x => x);\r\n\r\n    // Sometimes TS isn't the brightest.\r\n    const cliffPromisesForReal = <Promise<TerrainModel>[]>cliffPromises;\r\n\r\n    this.cliffModels = await Promise.all(cliffPromisesForReal);\r\n    this.cliffsReady = true;\r\n  }\r\n\r\n  loadDoodadsAndDestructibles(): void {\r\n    const mpqFile = this.map.get('war3map.doo');\r\n\r\n    if (!mpqFile) {\r\n      console.warn('Attempted to load war3map.doo but it is not there');\r\n      return;\r\n    }\r\n\r\n    const parser = new War3MapDoo();\r\n\r\n    try {\r\n      parser.load(mpqFile.bytes(), this.buildVersion);\r\n    } catch (e) {\r\n      console.warn(`Failed to load war3map.doo: ${e}`);\r\n      return;\r\n    }\r\n\r\n    // Doodads and destructibles.\r\n    for (const doodad of parser.doodads) {\r\n      try {\r\n        const row = this.viewer.doodadsData.getRow(doodad.id);\r\n\r\n        if (row) {\r\n          let file = row.string('file');\r\n\r\n          if (file) {\r\n            const numVar = row.number('numVar');\r\n\r\n            if (file.endsWith('.mdl')) {\r\n              file = file.slice(0, -4);\r\n            }\r\n\r\n            let fileVar = file;\r\n\r\n            file += '.mdx';\r\n\r\n            if (numVar > 1) {\r\n              fileVar += Math.min(doodad.variation, numVar - 1);\r\n            }\r\n\r\n            fileVar += '.mdx';\r\n\r\n            // First see if the model is local.\r\n            // Doodads refering to local models may have invalid variations, so if the variation doesn't exist, try without a variation.\r\n            const mpqFile = this.map.get(fileVar) || this.map.get(file);\r\n            let promise;\r\n\r\n            if (mpqFile) {\r\n              promise = this.load(mpqFile.name);\r\n            } else {\r\n              promise = this.load(fileVar);\r\n            }\r\n\r\n            promise.then((model) => {\r\n              if (model) {\r\n                this.doodads.push(new Doodad(this, <MdxModel>model, row, doodad));\r\n              }\r\n            });\r\n          } else {\r\n            console.log('Unknown doodad ID', doodad.id, doodad);\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.warn(`Failed to load doodad/destructible ID ${doodad.id}: ${e}`);\r\n      }\r\n    }\r\n\r\n    // Cliff/Terrain doodads.\r\n    for (const doodad of parser.terrainDoodads) {\r\n      try {\r\n        const row = <MappedDataRow>this.viewer.doodadsData.getRow(doodad.id);\r\n\r\n        this.load(`${row.string('file')}.mdx`)\r\n          .then((model) => {\r\n            if (model) {\r\n              this.terrainDoodads.push(new TerrainDoodad(this, <MdxModel>model, row, doodad));\r\n            }\r\n          });\r\n\r\n        // let pathTexture = <Texture>this.load(row.pathTex);\r\n\r\n        // pathTexture.whenLoaded(() => {\r\n        //   let startx = doodad.location[0];\r\n        //   let starty = doodad.location[1];\r\n        //   let endx = startx + pathTexture.width / 4;\r\n        //   let endy = starty + pathTexture.height / 4;\r\n\r\n        //   for (let x = startx; x < endx; x++) {\r\n        //     for (let y = starty; y < endy; y++) {\r\n\r\n        //     }\r\n        //   }\r\n        // });\r\n      } catch (e) {\r\n        console.warn(`Failed to load cliff/terrain doodad ID ${doodad.id}: ${e}`);\r\n      }\r\n    }\r\n\r\n    this.doodadsReady = true;\r\n    this.anyReady = true;\r\n  }\r\n\r\n  loadUnitsAndItems(): void {\r\n    const mpqFile = this.map.get('war3mapUnits.doo');\r\n\r\n    if (!mpqFile) {\r\n      console.warn('Attempted to load war3mapUnits.doo but it is not there');\r\n      return;\r\n    }\r\n\r\n    const parser = new War3MapUnitsDoo();\r\n\r\n    try {\r\n      parser.load(mpqFile.bytes(), this.buildVersion);\r\n    } catch (e) {\r\n      console.warn(`Failed to load war3mapUnits.doo: ${e}`);\r\n      return;\r\n    }\r\n\r\n    // Collect the units and items data.\r\n    for (const unit of parser.units) {\r\n      try {\r\n        let row: MappedDataRow | undefined;\r\n        let path;\r\n\r\n        // Hardcoded?\r\n        if (unit.id === 'sloc') {\r\n          path = 'Objects\\\\StartLocation\\\\StartLocation.mdx';\r\n        } else {\r\n          row = this.viewer.unitsData.getRow(unit.id);\r\n\r\n          if (row) {\r\n            path = row.string('file');\r\n\r\n            if (path) {\r\n              if (path.endsWith('.mdl')) {\r\n                path = path.slice(0, -4);\r\n              }\r\n\r\n              path += '.mdx';\r\n            }\r\n          }\r\n        }\r\n\r\n        if (path) {\r\n          this.load(path)\r\n            .then((model) => {\r\n              if (model) {\r\n                this.units.push(new Unit(this, <MdxModel>model, row, unit));\r\n              }\r\n            });\r\n        } else {\r\n          console.log('Unknown unit ID', unit.id, unit);\r\n        }\r\n      } catch (e) {\r\n        console.warn(`Failed to load unit/item ID ${unit.id}: ${e}`);\r\n      }\r\n    }\r\n\r\n    this.unitsReady = true;\r\n    this.anyReady = true;\r\n  }\r\n\r\n  /**\r\n   * Update the map.\r\n   */\r\n  update(): void {\r\n    if (this.anyReady) {\r\n      this.waterIndex += this.waterIncreasePerFrame;\r\n\r\n      if (this.waterIndex >= this.waterTextures.length) {\r\n        this.waterIndex = 0;\r\n      }\r\n\r\n      for (const doodad of this.doodads) {\r\n        doodad.update();\r\n      }\r\n\r\n      for (const unit of this.units) {\r\n        unit.update();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Render the map.\r\n   */\r\n  render(): void {\r\n    if (this.anyReady) {\r\n      const worldScene = this.worldScene;\r\n\r\n      worldScene.startFrame();\r\n      this.renderGround();\r\n      this.renderCliffs();\r\n      worldScene.renderOpaque();\r\n      this.renderWater();\r\n      worldScene.renderTranslucent();\r\n    }\r\n  }\r\n\r\n  renderGround(): void {\r\n    if (this.terrainReady) {\r\n      const gl = this.viewer.gl;\r\n      const webgl = this.viewer.webgl;\r\n      const instancedArrays = <ANGLE_instanced_arrays>webgl.extensions['ANGLE_instanced_arrays'];\r\n      const shader = this.viewer.groundShader;\r\n      const uniforms = shader.uniforms;\r\n      const attribs = shader.attribs;\r\n      const tilesetTextures = this.tilesetTextures;\r\n      const instanceAttrib = attribs['a_InstanceID'];\r\n      const positionAttrib = attribs['a_position'];\r\n      const texturesAttrib = attribs['a_textures'];\r\n      const variationsAttrib = attribs['a_variations'];\r\n      const tilesetCount = tilesetTextures.length; // This includes the blight texture.\r\n\r\n      gl.enable(gl.BLEND);\r\n      gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n      webgl.useShader(shader);\r\n\r\n      gl.uniformMatrix4fv(uniforms['u_VP'], false, this.worldScene.camera.viewProjectionMatrix);\r\n      gl.uniform2fv(uniforms['u_offset'], this.centerOffset);\r\n      gl.uniform2f(uniforms['u_size'], this.columns, this.rows);\r\n      gl.uniform1i(uniforms['u_heightMap'], 15);\r\n\r\n      gl.activeTexture(gl.TEXTURE15);\r\n      gl.bindTexture(gl.TEXTURE_2D, this.heightMap);\r\n\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\r\n      gl.vertexAttribPointer(positionAttrib, 2, gl.FLOAT, false, 0, 0);\r\n\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.instanceBuffer);\r\n      gl.vertexAttribPointer(instanceAttrib, 1, gl.FLOAT, false, 0, 0);\r\n      instancedArrays.vertexAttribDivisorANGLE(instanceAttrib, 1);\r\n\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.textureBuffer);\r\n      gl.vertexAttribPointer(texturesAttrib, 4, gl.UNSIGNED_BYTE, false, 0, 0);\r\n      instancedArrays.vertexAttribDivisorANGLE(texturesAttrib, 1);\r\n\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.variationBuffer);\r\n      gl.vertexAttribPointer(variationsAttrib, 4, gl.UNSIGNED_BYTE, false, 0, 0);\r\n      instancedArrays.vertexAttribDivisorANGLE(variationsAttrib, 1);\r\n\r\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.faceBuffer);\r\n\r\n      gl.uniform1f(uniforms['u_baseTileset'], 0);\r\n\r\n      for (let i = 0, l = Math.min(tilesetCount, 15); i < l; i++) {\r\n        const isExtended = tilesetTextures[i].width > tilesetTextures[i].height ? 1 : 0;\r\n\r\n        gl.uniform1f(uniforms[`u_extended[${i}]`], isExtended);\r\n        gl.uniform1i(uniforms[`u_tilesets[${i}]`], i);\r\n\r\n        webgl.bindTexture(tilesetTextures[i], i);\r\n      }\r\n\r\n      instancedArrays.drawElementsInstancedANGLE(gl.TRIANGLES, 6, gl.UNSIGNED_BYTE, 0, this.rows * this.columns);\r\n\r\n      if (tilesetCount > 15) {\r\n        gl.uniform1f(uniforms['u_baseTileset'], 15);\r\n\r\n        for (let i = 0, l = tilesetCount - 15; i < l; i++) {\r\n          const isExtended = tilesetTextures[i + 15].width > tilesetTextures[i + 15].height ? 1 : 0;\r\n\r\n          gl.uniform1f(uniforms[`u_extended[${i}]`], isExtended);\r\n\r\n          webgl.bindTexture(tilesetTextures[i + 15], i);\r\n        }\r\n\r\n        instancedArrays.drawElementsInstancedANGLE(gl.TRIANGLES, 6, gl.UNSIGNED_BYTE, 0, this.rows * this.columns);\r\n      }\r\n\r\n      instancedArrays.vertexAttribDivisorANGLE(texturesAttrib, 0);\r\n      instancedArrays.vertexAttribDivisorANGLE(variationsAttrib, 0);\r\n      instancedArrays.vertexAttribDivisorANGLE(instanceAttrib, 0);\r\n    }\r\n  }\r\n\r\n  renderWater(): void {\r\n    if (this.terrainReady) {\r\n      const gl = this.viewer.gl;\r\n      const webgl = this.viewer.webgl;\r\n      const instancedArrays = <ANGLE_instanced_arrays>webgl.extensions['ANGLE_instanced_arrays'];\r\n      const shader = this.viewer.waterShader;\r\n      const uniforms = shader.uniforms;\r\n      const attribs = shader.attribs;\r\n      const instanceAttrib = attribs['a_InstanceID'];\r\n      const positionAttrib = attribs['a_position'];\r\n      const isWaterAttrib = attribs['a_isWater'];\r\n\r\n      gl.depthMask(false);\r\n\r\n      gl.enable(gl.BLEND);\r\n      gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n      webgl.useShader(shader);\r\n\r\n      gl.uniformMatrix4fv(uniforms['u_VP'], false, this.worldScene.camera.viewProjectionMatrix);\r\n      gl.uniform2fv(uniforms['u_offset'], this.centerOffset);\r\n      gl.uniform2f(uniforms['u_size'], this.columns, this.rows);\r\n      gl.uniform1i(uniforms['u_heightMap'], 0);\r\n      gl.uniform1i(uniforms['u_waterHeightMap'], 1);\r\n      gl.uniform1i(uniforms['u_waterTexture'], 2);\r\n      gl.uniform1f(uniforms['u_offsetHeight'], this.waterHeightOffset);\r\n      gl.uniform4fv(uniforms['u_maxDeepColor'], this.maxDeepColor);\r\n      gl.uniform4fv(uniforms['u_minDeepColor'], this.minDeepColor);\r\n      gl.uniform4fv(uniforms['u_maxShallowColor'], this.maxShallowColor);\r\n      gl.uniform4fv(uniforms['u_minShallowColor'], this.minShallowColor);\r\n\r\n      gl.activeTexture(gl.TEXTURE0);\r\n      gl.bindTexture(gl.TEXTURE_2D, this.heightMap);\r\n\r\n      gl.activeTexture(gl.TEXTURE1);\r\n      gl.bindTexture(gl.TEXTURE_2D, this.waterHeightMap);\r\n\r\n      webgl.bindTexture(this.waterTextures[this.waterIndex | 0], 2);\r\n\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\r\n      gl.vertexAttribPointer(positionAttrib, 2, gl.FLOAT, false, 8, 0);\r\n\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.instanceBuffer);\r\n      gl.vertexAttribPointer(instanceAttrib, 1, gl.FLOAT, false, 4, 0);\r\n      instancedArrays.vertexAttribDivisorANGLE(instanceAttrib, 1);\r\n\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.waterBuffer);\r\n      gl.vertexAttribPointer(isWaterAttrib, 1, gl.UNSIGNED_BYTE, false, 1, 0);\r\n      instancedArrays.vertexAttribDivisorANGLE(isWaterAttrib, 1);\r\n\r\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.faceBuffer);\r\n      instancedArrays.drawElementsInstancedANGLE(gl.TRIANGLES, 6, gl.UNSIGNED_BYTE, 0, this.rows * this.columns);\r\n\r\n      instancedArrays.vertexAttribDivisorANGLE(isWaterAttrib, 0);\r\n      instancedArrays.vertexAttribDivisorANGLE(instanceAttrib, 0);\r\n    }\r\n  }\r\n\r\n  renderCliffs(): void {\r\n    if (this.cliffsReady) {\r\n      const gl = this.viewer.gl;\r\n      const webgl = this.viewer.webgl;\r\n      const instancedArrays = <ANGLE_instanced_arrays>webgl.extensions['ANGLE_instanced_arrays'];\r\n      const vertexArrayObject = <OES_vertex_array_object>webgl.extensions['OES_vertex_array_object'];\r\n      const shader = this.viewer.cliffShader;\r\n      const attribs = shader.attribs;\r\n      const uniforms = shader.uniforms;\r\n\r\n      gl.disable(gl.BLEND);\r\n\r\n      shader.use();\r\n\r\n      gl.uniformMatrix4fv(uniforms['u_VP'], false, this.worldScene.camera.viewProjectionMatrix);\r\n      gl.uniform1i(uniforms['u_heightMap'], 0);\r\n      gl.uniform2f(uniforms['u_pixel'], 1 / (this.columns + 1), 1 / (this.rows + 1));\r\n      gl.uniform2fv(uniforms['u_centerOffset'], this.centerOffset);\r\n      gl.uniform1i(uniforms['u_texture1'], 1);\r\n      gl.uniform1i(uniforms['u_texture2'], 2);\r\n\r\n      gl.activeTexture(gl.TEXTURE0);\r\n      gl.bindTexture(gl.TEXTURE_2D, this.cliffHeightMap);\r\n\r\n      gl.activeTexture(gl.TEXTURE1);\r\n      gl.bindTexture(gl.TEXTURE_2D, this.cliffTextures[0].webglResource);\r\n\r\n      if (this.cliffTextures.length > 1) {\r\n        gl.activeTexture(gl.TEXTURE2);\r\n        gl.bindTexture(gl.TEXTURE_2D, this.cliffTextures[1].webglResource);\r\n      }\r\n\r\n      // Set instanced attributes.\r\n      if (!vertexArrayObject) {\r\n        instancedArrays.vertexAttribDivisorANGLE(attribs['a_instancePosition'], 1);\r\n        instancedArrays.vertexAttribDivisorANGLE(attribs['a_instanceTexture'], 1);\r\n      }\r\n\r\n      // Render the cliffs.\r\n      for (const cliff of this.cliffModels) {\r\n        cliff.render(shader);\r\n      }\r\n\r\n      // Clear instanced attributes.\r\n      if (!vertexArrayObject) {\r\n        instancedArrays.vertexAttribDivisorANGLE(attribs['a_instancePosition'], 0);\r\n        instancedArrays.vertexAttribDivisorANGLE(attribs['a_instanceTexture'], 0);\r\n      }\r\n    }\r\n  }\r\n\r\n  cliffFileName(bottomLeftLayer: number, bottomRightLayer: number, topLeftLayer: number, topRightLayer: number, base: number): string {\r\n    return String.fromCharCode(65 + bottomLeftLayer - base) +\r\n      String.fromCharCode(65 + topLeftLayer - base) +\r\n      String.fromCharCode(65 + topRightLayer - base) +\r\n      String.fromCharCode(65 + bottomRightLayer - base);\r\n  }\r\n\r\n  getVariation(groundTexture: number, variation: number): number {\r\n    const texture = this.tilesetTextures[groundTexture];\r\n\r\n    // Extended?\r\n    if (texture.width > texture.height) {\r\n      if (variation < 16) {\r\n        return 16 + variation;\r\n      } else if (variation === 16) {\r\n        return 15;\r\n      } else {\r\n        return 0;\r\n      }\r\n    } else {\r\n      if (variation === 0) {\r\n        return 0;\r\n      } else {\r\n        return 15;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Is the corner at the given column and row a cliff?\r\n   */\r\n  isCliff(column: number, row: number): boolean {\r\n    if (column < 1 || column > this.columns - 1 || row < 1 || row > this.rows - 1) {\r\n      return false;\r\n    }\r\n\r\n    const corners = this.corners;\r\n    const bottomLeft = corners[row][column].layerHeight;\r\n    const bottomRight = corners[row][column + 1].layerHeight;\r\n    const topLeft = corners[row + 1][column].layerHeight;\r\n    const topRight = corners[row + 1][column + 1].layerHeight;\r\n\r\n    return bottomLeft !== bottomRight || bottomLeft !== topLeft || bottomLeft !== topRight;\r\n  }\r\n\r\n  /**\r\n   * Is the tile at the given column and row water?\r\n   */\r\n  isWater(column: number, row: number): number {\r\n    const corners = this.corners;\r\n\r\n    return corners[row][column].water || corners[row][column + 1].water || corners[row + 1][column].water || corners[row + 1][column + 1].water;\r\n  }\r\n\r\n  /**\r\n   * Given a cliff index, get its ground texture index.\r\n   * This is an index into the tilset textures.\r\n   */\r\n  cliffGroundIndex(whichCliff: number): number {\r\n    const whichTileset = this.cliffTilesets[whichCliff].string('groundTile');\r\n    const tilesets = this.tilesets;\r\n\r\n    for (let i = 0, l = tilesets.length; i < l; i++) {\r\n      if (tilesets[i].string('tileID') === whichTileset) {\r\n        return i;\r\n      }\r\n    }\r\n\r\n    return 0;\r\n  }\r\n\r\n  /**\r\n   * Get the ground texture of a corner, whether it's normal ground, a cliff, or a blighted corner.\r\n   */\r\n  cornerTexture(column: number, row: number): number {\r\n    const corners = this.corners;\r\n    const columns = this.columns;\r\n    const rows = this.rows;\r\n\r\n    for (let y = -1; y < 1; y++) {\r\n      for (let x = -1; x < 1; x++) {\r\n        if (column + x > 0 && column + x < columns - 1 && row + y > 0 && row + y < rows - 1) {\r\n          if (this.isCliff(column + x, row + y)) {\r\n            let texture = corners[row + y][column + x].cliffTexture;\r\n\r\n            if (texture === 15) {\r\n              texture = 1;\r\n            }\r\n\r\n            return this.cliffGroundIndex(texture);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    const corner = corners[row][column];\r\n\r\n    // Is this corner blighted?\r\n    if (corner.blight) {\r\n      return this.blightTextureIndex;\r\n    }\r\n\r\n    return corner.groundTexture;\r\n  }\r\n\r\n  applyModificationFile(dataMap: MappedData, metadataMap: MappedData, modificationFile: War3MapW3u | War3MapW3d | undefined): void {\r\n    if (modificationFile) {\r\n      // Modifications to built-in objects\r\n      this.applyModificationTable(dataMap, metadataMap, modificationFile.originalTable);\r\n\r\n      // Declarations of user-defined objects\r\n      this.applyModificationTable(dataMap, metadataMap, modificationFile.customTable);\r\n    }\r\n  }\r\n\r\n  applyModificationTable(dataMap: MappedData, metadataMap: MappedData, modificationTable: ModificationTable): void {\r\n    for (const modificationObject of modificationTable.objects) {\r\n      let row;\r\n\r\n      if (modificationObject.newId !== '') {\r\n        row = dataMap.getRow(modificationObject.newId);\r\n\r\n        if (!row) {\r\n          row = new MappedDataRow();\r\n\r\n          row.map = Object.assign({}, (<MappedDataRow>dataMap.getRow(modificationObject.oldId)).map);\r\n\r\n          dataMap.setRow(modificationObject.newId, row);\r\n        }\r\n      } else {\r\n        row = <MappedDataRow>dataMap.getRow(modificationObject.oldId);\r\n      }\r\n\r\n      for (const modification of modificationObject.modifications) {\r\n        const metadata = metadataMap.getRow(modification.id);\r\n\r\n        if (metadata) {\r\n          row.set(<string>metadata.string('field'), modification.value);\r\n        } else {\r\n          console.warn('Unknown modification ID', modification);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  groundNormal(out: vec3, x: number, y: number): vec3 {\r\n    const centerOffset = this.centerOffset;\r\n    const mapSize = this.mapSize;\r\n\r\n    x = (x - centerOffset[0]) / 128;\r\n    y = (y - centerOffset[1]) / 128;\r\n\r\n    const cellX = x | 0;\r\n    const cellY = y | 0;\r\n\r\n    // See if this coordinate is in the map\r\n    if (cellX >= 0 && cellX < mapSize[0] - 1 && cellY >= 0 && cellY < mapSize[1] - 1) {\r\n      // See http://gamedev.stackexchange.com/a/24574\r\n      const corners = this.corners;\r\n      const bottomLeft = corners[cellY][cellX].groundHeight;\r\n      const bottomRight = corners[cellY][cellX + 1].groundHeight;\r\n      const topLeft = corners[cellY + 1][cellX].groundHeight;\r\n      const topRight = corners[cellY + 1][cellX + 1].groundHeight;\r\n      const sqX = x - cellX;\r\n      const sqY = y - cellY;\r\n\r\n      if (sqX + sqY < 1) {\r\n        vec3.set(normalHeap1, 1, 0, bottomRight - bottomLeft);\r\n        vec3.set(normalHeap2, 0, 1, topLeft - bottomLeft);\r\n      } else {\r\n        vec3.set(normalHeap1, -1, 0, topRight - topLeft);\r\n        vec3.set(normalHeap2, 0, 1, topRight - bottomRight);\r\n      }\r\n\r\n      vec3.normalize(out, vec3.cross(out, normalHeap1, normalHeap2));\r\n    } else {\r\n      vec3.set(out, 0, 0, 1);\r\n    }\r\n\r\n    return out;\r\n  }\r\n}\r\n\r\n/*\r\n  heightAt(location) {\r\n    let heightMap = this.heightMap,\r\n      offset = this.offset,\r\n      x = (location[0] / 128) + offset[0],\r\n      y = (location[1] / 128) + offset[1];\r\n\r\n    let minY = Math.floor(y),\r\n      maxY = Math.ceil(y),\r\n      minX = Math.floor(x),\r\n      maxX = Math.ceil(x);\r\n\r\n    // See if this coordinate is in the map\r\n    if (maxY > 0 && minY < heightMap.length - 1 && maxX > 0 && minX < heightMap[0].length - 1) {\r\n      // See http://gamedev.stackexchange.com/a/24574\r\n      let triZ0 = heightMap[minY][minX],\r\n        triZ1 = heightMap[minY][maxX],\r\n        triZ2 = heightMap[maxY][minX],\r\n        triZ3 = heightMap[maxY][maxX],\r\n        sqX = x - minX,\r\n        sqZ = y - minY,\r\n        height;\r\n\r\n      if ((sqX + sqZ) < 1) {\r\n        height = triZ0 + (triZ1 - triZ0) * sqX + (triZ2 - triZ0) * sqZ;\r\n      } else {\r\n        height = triZ3 + (triZ1 - triZ3) * (1 - sqZ) + (triZ2 - triZ3) * (1 - sqX);\r\n      }\r\n\r\n      return height * 128;\r\n    }\r\n\r\n    return 0;\r\n  }\r\n  */\r\n","import blp from './blp/handler';\r\nimport dds from './dds/handler';\r\nimport m3 from './m3/handler';\r\nimport mdx from './mdx/handler';\r\nimport tga from './tga/handler';\r\nimport War3MapViewer from './w3x/viewer';\r\n\r\nexport default {\r\n  blp,\r\n  dds,\r\n  m3,\r\n  mdx,\r\n  tga,\r\n  War3MapViewer,\r\n};\r\n","import { FetchDataTypeName } from '../../../common/fetchdatatype';\r\nimport { MappedData } from '../../../utils/mappeddata';\r\nimport ModelViewer from '../../viewer';\r\nimport Shader from '../../gl/shader';\r\nimport { PathSolver } from '../../handlerresource';\r\nimport mdxHandler from '../mdx/handler';\r\nimport blpHandler from '../blp/handler';\r\nimport tgaHandler from '../tga/handler';\r\nimport ddsHandler from '../dds/handler';\r\nimport groundVert from './shaders/ground.vert';\r\nimport groundFrag from './shaders/ground.frag';\r\nimport waterVert from './shaders/water.vert';\r\nimport waterFrag from './shaders/water.frag';\r\nimport cliffsVert from './shaders/cliffs.vert';\r\nimport cliffsFrag from './shaders/cliffs.frag';\r\nimport War3MapViewerMap from './map';\r\nimport GenericResource from '../../genericresource';\r\n\r\nexport default class War3MapViewer extends ModelViewer {\r\n  wc3PathSolver: PathSolver;\r\n  isReforged: boolean;\r\n  groundShader: Shader;\r\n  waterShader: Shader;\r\n  cliffShader: Shader;\r\n  terrainData = new MappedData();\r\n  cliffTypesData = new MappedData();\r\n  waterData = new MappedData();\r\n  doodadsData = new MappedData();\r\n  doodadMetaData = new MappedData();\r\n  destructableMetaData = new MappedData();\r\n  unitsData = new MappedData();\r\n  unitMetaData = new MappedData();\r\n  loadedBaseFiles = false;\r\n  map: War3MapViewerMap | null = null;\r\n\r\n  constructor(canvas: HTMLCanvasElement, wc3PathSolver: PathSolver, isReforged: boolean) {\r\n    super(canvas);\r\n\r\n    const webgl = this.webgl;\r\n\r\n    // Data textures.\r\n    if (!webgl.ensureExtension('OES_texture_float')) {\r\n      throw new Error('War3MapViewer: No float texture support!');\r\n    }\r\n\r\n    // Optionally used for cliff renering.\r\n    if (!webgl.ensureExtension('OES_vertex_array_object')) {\r\n      console.warn('War3MapViewer: No vertex array object support! This might reduce performance.');\r\n    }\r\n\r\n    this.on('error', (e) => console.log(e));\r\n\r\n    this.addHandler(mdxHandler, wc3PathSolver, isReforged);\r\n    this.addHandler(blpHandler);\r\n    this.addHandler(tgaHandler);\r\n    this.addHandler(ddsHandler);\r\n\r\n    this.wc3PathSolver = wc3PathSolver;\r\n    this.isReforged = isReforged;\r\n\r\n    this.groundShader = this.webgl.createShader(groundVert, groundFrag);\r\n    this.waterShader = this.webgl.createShader(waterVert, waterFrag);\r\n    this.cliffShader = this.webgl.createShader(cliffsVert, cliffsFrag);\r\n\r\n    this.loadBaseFiles();\r\n  }\r\n\r\n  async loadBaseFiles(): Promise<void> {\r\n    const promises = [\r\n      this.loadBaseFile('TerrainArt\\\\Terrain.slk', 'text'),\r\n      this.loadBaseFile('TerrainArt\\\\CliffTypes.slk', 'text'),\r\n      this.loadBaseFile('TerrainArt\\\\Water.slk', 'text'),\r\n      this.loadBaseFile('Doodads\\\\Doodads.slk', 'text'),\r\n      this.loadBaseFile('Doodads\\\\DoodadMetaData.slk', 'text'),\r\n      this.loadBaseFile('Units\\\\DestructableData.slk', 'text'),\r\n      this.loadBaseFile('Units\\\\DestructableMetaData.slk', 'text'),\r\n      this.loadBaseFile('Units\\\\UnitData.slk', 'text'),\r\n      this.loadBaseFile('Units\\\\unitUI.slk', 'text'),\r\n      this.loadBaseFile('Units\\\\ItemData.slk', 'text'),\r\n      this.loadBaseFile('Units\\\\UnitMetaData.slk', 'text'),\r\n    ];\r\n\r\n    let reforgedPromises;\r\n\r\n    if (this.isReforged) {\r\n      reforgedPromises = [\r\n        this.loadBaseFile('Doodads\\\\doodadSkins.txt', 'text'),\r\n        this.loadBaseFile('Units\\\\destructableSkin.txt', 'text'),\r\n        this.loadBaseFile('Units\\\\unitSkin.txt', 'text'),\r\n        this.loadBaseFile('Units\\\\itemSkin.txt', 'text'),\r\n      ];\r\n    }\r\n\r\n    const [terrain, cliffTypes, water, doodads, doodadMetaData, destructableData, destructableMetaData, unitData, unitUi, itemData, unitMetaData] = await Promise.all(promises);\r\n\r\n    if (!terrain || !cliffTypes || !water || !doodads || !doodadMetaData || !destructableData || !destructableMetaData || !unitData || !unitUi || !itemData || !unitMetaData) {\r\n      throw new Error('Failed to load the base files');\r\n    }\r\n\r\n    this.terrainData.load(<string>terrain.data);\r\n    this.cliffTypesData.load(<string>cliffTypes.data);\r\n    this.waterData.load(<string>water.data);\r\n    this.doodadsData.load(<string>doodads.data);\r\n    this.doodadMetaData.load(<string>doodadMetaData.data);\r\n    this.doodadsData.load(<string>destructableData.data);\r\n    this.destructableMetaData.load(<string>destructableMetaData.data);\r\n    this.unitsData.load(<string>unitData.data);\r\n    this.unitsData.load(<string>unitUi.data);\r\n    this.unitsData.load(<string>itemData.data);\r\n    this.unitMetaData.load(<string>unitMetaData.data);\r\n\r\n    if (reforgedPromises) {\r\n      const [doodadSkins, destructableSkin, unitSkin, itemSkin] = await Promise.all(reforgedPromises);\r\n\r\n      if (!doodadSkins || !destructableSkin || !unitSkin || !itemSkin) {\r\n        throw new Error('Failed to load the base Reforged files');\r\n      }\r\n\r\n      this.doodadsData.load(<string>doodadSkins.data);\r\n      this.doodadsData.load(<string>destructableSkin.data);\r\n      this.unitsData.load(<string>unitSkin.data);\r\n      this.unitsData.load(<string>itemSkin.data);\r\n    }\r\n\r\n    this.loadedBaseFiles = true;\r\n    this.emit('loadedbasefiles');\r\n  }\r\n\r\n  loadBaseFile(path: string, dataType: FetchDataTypeName): Promise<GenericResource | undefined> {\r\n    return super.loadGeneric(<string>this.wc3PathSolver(path), dataType);\r\n  }\r\n\r\n  /**\r\n   * Load a map from a buffer.\r\n   */\r\n  loadMap(buffer: ArrayBuffer | Uint8Array): void {\r\n    if (this.loadedBaseFiles) {\r\n      if (this.map) {\r\n        this.map.die();\r\n      }\r\n\r\n      this.map = new War3MapViewerMap(this, buffer);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update the map.\r\n   */\r\n  override update(): void {\r\n    if (this.map) {\r\n      super.update();\r\n\r\n      this.map.update();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Render the map.\r\n   */\r\n  override render(): void {\r\n    if (this.map) {\r\n      this.map.render();\r\n    }\r\n  }\r\n}\r\n","const shader = `\r\nuniform mat4 u_VP;\r\nuniform sampler2D u_heightMap;\r\nuniform vec2 u_size;\r\nuniform vec2 u_offset;\r\nuniform bool u_extended[14];\r\nuniform float u_baseTileset;\r\n\r\nattribute vec2 a_position;\r\nattribute float a_InstanceID;\r\nattribute vec4 a_textures;\r\nattribute vec4 a_variations;\r\n\r\nvarying vec4 v_tilesets;\r\nvarying vec2 v_uv[4];\r\nvarying vec3 v_normal;\r\n\r\nvec2 getCell(float variation) {\r\n  if (variation < 16.0) {\r\n    return vec2(mod(variation, 4.0), floor(variation / 4.0));\r\n  } else {\r\n    variation -= 16.0;\r\n\r\n    return vec2(4.0 + mod(variation, 4.0), floor(variation / 4.0));\r\n  }\r\n}\r\n\r\nvec2 getUV(vec2 position, bool extended, float variation) {\r\n  vec2 cell = getCell(variation);\r\n  vec2 cellSize = vec2(extended ? 0.125 : 0.25, 0.25);\r\n  vec2 uv = vec2(position.x, 1.0 - position.y);\r\n  vec2 pixelSize = vec2(1.0 / 512.0, 1.0 / 256.0); /// Note: hardcoded to 512x256 for now.\r\n\r\n  return clamp((cell + uv) * cellSize, cell * cellSize + pixelSize, (cell + 1.0) * cellSize - pixelSize); \r\n}\r\n\r\nvoid main() {\r\n  vec4 textures = a_textures - u_baseTileset;\r\n  \r\n  if (textures[0] > 0.0 || textures[1] > 0.0 || textures[2] > 0.0 || textures[3] > 0.0) {\r\n    v_tilesets = textures;\r\n\r\n    v_uv[0] = getUV(a_position, u_extended[int(textures[0]) - 1], a_variations[0]);\r\n    v_uv[1] = getUV(a_position, u_extended[int(textures[1]) - 1], a_variations[1]);\r\n    v_uv[2] = getUV(a_position, u_extended[int(textures[2]) - 1], a_variations[2]);\r\n    v_uv[3] = getUV(a_position, u_extended[int(textures[3]) - 1], a_variations[3]);\r\n\r\n    vec2 corner = vec2(mod(a_InstanceID, u_size.x), floor(a_InstanceID / u_size.x));\r\n    vec2 base = corner + a_position;\r\n    float height = texture2D(u_heightMap, base / u_size).a;\r\n\r\n    float hL = texture2D(u_heightMap, vec2(base - vec2(1.0, 0.0)) / (u_size)).a;\r\n    float hR = texture2D(u_heightMap, vec2(base + vec2(1.0, 0.0)) / (u_size)).a;\r\n    float hD = texture2D(u_heightMap, vec2(base - vec2(0.0, 1.0)) / (u_size)).a;\r\n    float hU = texture2D(u_heightMap, vec2(base + vec2(0.0, 1.0)) / (u_size)).a;\r\n\r\n    v_normal = normalize(vec3(hL - hR, hD - hU, 2.0));\r\n\r\n    gl_Position = u_VP * vec4(base * 128.0 + u_offset, height * 128.0, 1.0);\r\n  } else {\r\n    v_tilesets = vec4(0.0);\r\n\r\n    v_uv[0] = vec2(0.0);\r\n    v_uv[1] = vec2(0.0);\r\n    v_uv[2] = vec2(0.0);\r\n    v_uv[3] = vec2(0.0);\r\n\r\n    v_normal = vec3(0.0);\r\n\r\n    gl_Position = vec4(0.0);\r\n  }\r\n}\r\n`;\r\n\r\nexport default shader;\r\n","const shader = `\r\nuniform mat4 u_VP;\r\nuniform sampler2D u_heightMap;\r\nuniform sampler2D u_waterHeightMap;\r\nuniform vec2 u_size;\r\nuniform vec2 u_offset;\r\nuniform float u_offsetHeight;\r\nuniform vec4 u_minDeepColor;\r\nuniform vec4 u_maxDeepColor;\r\nuniform vec4 u_minShallowColor;\r\nuniform vec4 u_maxShallowColor;\r\n\r\nattribute vec2 a_position;\r\nattribute float a_InstanceID;\r\nattribute float a_isWater;\r\n\r\nvarying vec2 v_uv;\r\nvarying vec4 v_color;\r\n\r\nconst float minDepth = 10.0 / 128.0;\r\nconst float deepLevel = 64.0 / 128.0;\r\nconst float maxDepth = 72.0 / 128.0;\r\n\r\nvoid main() {\r\n  if (a_isWater > 0.5) {\r\n    v_uv = a_position;\r\n\r\n    vec2 corner = vec2(mod(a_InstanceID, u_size.x), floor(a_InstanceID / u_size.x));\r\n    vec2 base = corner + a_position;\r\n    float height = texture2D(u_heightMap, base / u_size).a;\r\n    float waterHeight = texture2D(u_waterHeightMap, base / u_size).a + u_offsetHeight;\r\n    float value = clamp(waterHeight - height, 0.0, 1.0);\r\n\r\n    if (value <= deepLevel) {\r\n      value = max(0.0, value - minDepth) / (deepLevel - minDepth);\r\n      v_color = mix(u_minShallowColor, u_maxShallowColor, value) / 255.0;\r\n    } else {\r\n      value = clamp(value - deepLevel, 0.0, maxDepth - deepLevel) / (maxDepth - deepLevel);\r\n      v_color = mix(u_minDeepColor, u_maxDeepColor, value) / 255.0;\r\n    }\r\n\r\n    gl_Position = u_VP * vec4(base * 128.0 + u_offset, waterHeight * 128.0, 1.0);\r\n  } else {\r\n    v_uv = vec2(0.0);\r\n    v_color = vec4(0.0);\r\n\r\n    gl_Position = vec4(0.0);\r\n  }\r\n}\r\n`;\r\n\r\nexport default shader;\r\n","const shader = `\r\nuniform mat4 u_VP;\r\nuniform sampler2D u_heightMap;\r\nuniform vec2 u_pixel;\r\nuniform vec2 u_centerOffset;\r\n\r\nattribute vec3 a_position;\r\nattribute vec3 a_normal;\r\nattribute vec2 a_uv;\r\nattribute vec3 a_instancePosition;\r\nattribute float a_instanceTexture;\r\n\r\nvarying vec3 v_normal;\r\nvarying vec2 v_uv;\r\nvarying float v_texture;\r\nvarying vec3 v_position;\r\n\r\nvoid main() {\r\n  // Half of a pixel in the cliff height map.\r\n  vec2 halfPixel = u_pixel * 0.5;\r\n\r\n  // The bottom left corner of the map tile this vertex is on.\r\n  vec2 corner = floor((a_instancePosition.xy - vec2(1.0, 0.0) - u_centerOffset.xy) / 128.0);\r\n\r\n  // Get the 4 closest heights in the height map.\r\n  float bottomLeft = texture2D(u_heightMap, corner * u_pixel + halfPixel).a;\r\n  float bottomRight = texture2D(u_heightMap, (corner + vec2(1.0, 0.0)) * u_pixel + halfPixel).a;\r\n  float topLeft = texture2D(u_heightMap, (corner + vec2(0.0, 1.0)) * u_pixel + halfPixel).a;\r\n  float topRight = texture2D(u_heightMap, (corner + vec2(1.0, 1.0)) * u_pixel + halfPixel).a;\r\n  \r\n  // Do a bilinear interpolation between the heights to get the final value.\r\n  float bottom = mix(bottomRight, bottomLeft, -a_position.x / 128.0);\r\n  float top = mix(topRight, topLeft, -a_position.x / 128.0);\r\n  float height = mix(bottom, top, a_position.y / 128.0);\r\n\r\n  v_normal = a_normal;\r\n  v_uv = a_uv;\r\n  v_texture = a_instanceTexture;\r\n  v_position = a_position + vec3(a_instancePosition.xy, a_instancePosition.z + height * 128.0);\r\n\r\n  gl_Position = u_VP * vec4(v_position, 1.0);\r\n}\r\n`;\r\n\r\nexport default shader;\r\n","import ModelViewer, { DebugRenderMode } from './viewer';\r\nimport Scene from './scene';\r\nimport Camera from './camera';\r\nimport { Node } from './node';\r\nimport Model from './model';\r\nimport ModelInstance from './modelinstance';\r\nimport Texture from './texture';\r\nimport GenericResource from './genericresource';\r\nimport gl from './gl';\r\nimport handlers from './handlers';\r\n\r\nexport default {\r\n  ModelViewer,\r\n  DebugRenderMode,\r\n  Scene,\r\n  Camera,\r\n  Node,\r\n  Model,\r\n  ModelInstance,\r\n  Texture,\r\n  GenericResource,\r\n  gl,\r\n  handlers,\r\n};\r\n","import { isPowerOfTwo } from '../../common/math';\r\nimport { BlpImage } from '../../parsers/blp/image';\r\n\r\n/**\r\n * Some tools allow to setup fake mipmaps.\r\n * These are mipmaps that use the same JPG data as other mipmaps.\r\n * This is technically not valid, but can work properly in the game.\r\n * Not always though.\r\n * Sadly I don't quite know the rules.\r\n */\r\nfunction isMipmapFake(whichMipmap: number, mipmapOffsets: Uint32Array): boolean {\r\n  const offset = mipmapOffsets[whichMipmap];\r\n\r\n  for (let i = 0; i < whichMipmap; i++) {\r\n    if (mipmapOffsets[i] === offset) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nexport interface SanityTestNode {\r\n  type: string;\r\n  message: string;\r\n}\r\n\r\nexport interface SanityTestResult {\r\n  nodes: SanityTestNode[];\r\n  warnings: number;\r\n}\r\n\r\n/**\r\n * Tests for issues in BLP textures.\r\n */\r\nexport default function sanityTest(texture: BlpImage): SanityTestResult {\r\n  const nodes = [];\r\n  const content = texture.content;\r\n  const alphaBits = texture.alphaBits;\r\n  const mipmapOffsets = texture.mipmapOffsets;\r\n  const mipmapSizes = texture.mipmapSizes;\r\n  let width = texture.width;\r\n  let height = texture.height;\r\n\r\n  if (content !== 0 && content !== 1) {\r\n    nodes.push({ type: 'warning', message: 'Unknown content type' });\r\n  }\r\n\r\n  if (alphaBits !== 0 && alphaBits !== 1 && alphaBits !== 4 && alphaBits !== 8) {\r\n    nodes.push({ type: 'warning', message: `Expected alpha bits to be 0, 1, 4, or 8, but got ${alphaBits}` });\r\n  }\r\n\r\n  if (width > 512 || height > 512) {\r\n    nodes.push({ type: 'warning', message: `Expected width and height up to 512, but got ${width}x${height}` });\r\n  }\r\n\r\n  if (content === 0) {\r\n    const jpgHeader = <Uint8Array>texture.jpgHeader;\r\n\r\n    if (jpgHeader.length > 624) {\r\n      nodes.push({ type: 'warning', message: `Expected the JPG header to be at most 624 bytes, but got ${jpgHeader.length}` });\r\n    }\r\n  }\r\n\r\n  if (!isPowerOfTwo(width) || !isPowerOfTwo(height)) {\r\n    nodes.push({ type: 'warning', message: `Expected the width and height to be powers of two, but got ${width}x${height}` });\r\n  }\r\n\r\n  for (let i = 0; i < 16; i++) {\r\n    if (mipmapSizes[i] > 0) {\r\n      // This happens if this mipmap level supposedly exists, but we already passed the level that should have been last.\r\n      if (width < 1 && height < 1) {\r\n        nodes.push({ type: 'warning', message: `Mipmap ${i}: this mipmap should not exist` });\r\n      } else if (isMipmapFake(i, mipmapOffsets)) {\r\n        nodes.push({ type: 'warning', message: `Mipmap ${i}: this mipmap is fake` });\r\n      } else {\r\n        // In the case this is not a square texture, one dimension will get to size 1 before the other.\r\n        width = Math.max(width, 1);\r\n        height = Math.max(height, 1);\r\n\r\n        let mipmapData;\r\n\r\n        try {\r\n          mipmapData = texture.getMipmap(i);\r\n        } catch (e) {\r\n          nodes.push({ type: 'warning', message: `Mipmap ${i}: Decoding failed` });\r\n        }\r\n\r\n        if (mipmapData) {\r\n          if (content === 0) {\r\n            if (mipmapData.width !== width || mipmapData.height !== height) {\r\n              nodes.push({ type: 'warning', message: `Mipmap ${i}: the JPG width (${mipmapData.width}) and height (${mipmapData.height}) do not match the mipmap width (${width}) and height (${height})` });\r\n            }\r\n          } else if (content === 1) {\r\n            const pixels = width * height;\r\n            const size = pixels + Math.ceil((pixels * alphaBits) / 8);\r\n\r\n            if (size !== mipmapSizes[i]) {\r\n              nodes.push({ type: 'warning', message: `Mipmap ${i}: the declared size is ${mipmapSizes[i]}, but the real size is ${size}` });\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    width >>= 1;\r\n    height >>= 1;\r\n  }\r\n\r\n  return { nodes, warnings: nodes.length };\r\n}\r\n","import sanityTest from './sanitytest';\r\n\r\nexport default {\r\n  sanityTest,\r\n};\r\n","import sanityTest from './sanitytest';\r\n\r\nexport default {\r\n  sanityTest,\r\n};\r\n","import { isPowerOfTwo } from '../../common/math';\r\nimport { DdsImage } from '../../parsers/dds/image';\r\n\r\nexport interface SanityTestNode {\r\n  type: string;\r\n  message: string;\r\n}\r\n\r\nexport interface SanityTestResult {\r\n  nodes: SanityTestNode[];\r\n  warnings: number;\r\n}\r\n\r\n/**\r\n * Tests for issues in DDS textures.\r\n */\r\nexport default function sanityTest(texture: DdsImage): SanityTestResult {\r\n  \r\n  const nodes = [];\r\n  const width = texture.width;\r\n  const height = texture.height;\r\n  const mipmaps = texture.mipmaps();\r\n  const expectedMipmaps = Math.log2(Math.max(width, height));\r\n\r\n  if (mipmaps < expectedMipmaps) {\r\n    nodes.push({ type: 'warning', message: `Expected ${expectedMipmaps} mipmaps, but got ${mipmaps}` });\r\n  }\r\n\r\n  if ((width % 4 !== 0) || (height % 4 !== 0)) {\r\n    nodes.push({ type: 'warning', message: `Expected the width and height to be multiples of four, but got ${width}x${height}` });\r\n  }\r\n\r\n  if (!isPowerOfTwo(width) || !isPowerOfTwo(height)) {\r\n    nodes.push({ type: 'warning', message: `Expected the width and height to be powers of two, but got ${width}x${height}` });\r\n  }\r\n\r\n  for (let i = 0; i < mipmaps; i++) {\r\n    try {\r\n      texture.getMipmap(i);\r\n    } catch (e) {\r\n      nodes.push({ type: 'warning', message: `Mipmap ${i}: Decoding failed` });\r\n    }\r\n  }\r\n\r\n  return { nodes, warnings: nodes.length };\r\n}\r\n","import TokenStream from './tokenstream';\r\n\r\nexport default function jass2lua(jass: string): string {\r\n  const stream = new TokenStream(jass);\r\n  const tokens = [];\r\n  let token;\r\n\r\n  while ((token = stream.read()) !== undefined) {\r\n    if (token === 'function') {\r\n      const name = stream.readSafe();\r\n\r\n      stream.read(); // takes\r\n\r\n      token = stream.read(); // nothing or type\r\n\r\n      let params = '';\r\n\r\n      if (token !== 'nothing') {\r\n        params += stream.readSafe();\r\n\r\n        while (stream.read() === ',') {\r\n          stream.read();\r\n\r\n          params += ',' + stream.readSafe();\r\n        }\r\n      } else {\r\n        stream.read(); // returns\r\n      }\r\n\r\n      stream.read(); // return type\r\n\r\n      const header = `function ${name}(${params})`;\r\n      const body = [];\r\n\r\n      while ((token = stream.readSafe()) !== 'endfunction') {\r\n        if (token === 'local') {\r\n          stream.read(); // type\r\n\r\n          const arrayOrName = stream.readSafe();\r\n\r\n          if (arrayOrName === 'array') {\r\n            body.push(`local ${stream.readSafe()}={}`);\r\n          } else {\r\n            body.push(`local ${arrayOrName}${stream.readUntil('\\n')}\\n`);\r\n          }\r\n        } else if (token === 'if' || token === 'elseif' || token === 'not') {\r\n          body.push(token + ' ');\r\n        } else if (token === 'then') {\r\n          body.push(' ' + token);\r\n        } else if (token === 'loop') {\r\n          body.push('while 1 do');\r\n        } else if (token === 'endloop' || token === 'endif') {\r\n          body.push('end');\r\n        } else if (token === 'exitwhen') {\r\n          body.push(`if ${stream.readUntil('\\n')} then break end\\n`);\r\n        } else if (token === 'return') {\r\n          const value = stream.readUntil('\\n');\r\n\r\n          token = stream.peek();\r\n\r\n          // return statmentes can only be the last statements in their block.\r\n          // If a statement isn't the last in its block, it is inserted into its own if block.\r\n          if (token === 'endif' || token === 'endloop' || token === 'endfunction') {\r\n            body.push(`return ${value}\\n`);\r\n          } else {\r\n            body.push(`if 1 then return ${value} end\\n`);\r\n          }\r\n        } else if (token === '\\n') {\r\n          const lastLine = body[body.length - 1];\r\n\r\n          if (lastLine && lastLine[lastLine.length - 1] !== '\\n') {\r\n            body.push('\\n');\r\n          }\r\n        } else if (token !== 'set' && token !== 'call' && token !== 'function') {\r\n          body.push(token);\r\n        }\r\n      }\r\n\r\n      tokens.push(`${header}\\n${body.join('')}end`);\r\n    } else if (token === 'globals') {\r\n      while ((token = stream.read()) !== 'endglobals') {\r\n        if (token !== '\\n') {\r\n          // token can either be type or constant.\r\n          if (token === 'constant') {\r\n            token = stream.read();\r\n          }\r\n\r\n          const arrayOrName = stream.read();\r\n\r\n          if (arrayOrName === 'array') {\r\n            tokens.push(`${stream.readSafe()}={}`);\r\n          } else {\r\n            // Unlike locals, having a global name with no value is a syntax error.\r\n            // In addition, globals that are nil effectively don't exist in Lua.\r\n            // Therefore, remove both cases.\r\n            let value = 'nil';\r\n\r\n            if (stream.peek() === '=') {\r\n              stream.read(); // =\r\n\r\n              value = stream.readUntil('\\n');\r\n            }\r\n\r\n            if (value !== 'nil') {\r\n              tokens.push(`${arrayOrName}=${value}`);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return tokens.join('\\n');\r\n}\r\n","/**\r\n * type handle\r\n */\r\nexport default class JassHandle {\r\n  handleId = -1;\r\n}\r\n","import JassHandle from './handle';\r\n\r\n/**\r\n * type agent\r\n */\r\nexport default class JassAgent extends JassHandle {}\r\n","import JassAgent from './agent';\r\n\r\nexport interface Alliance {\r\n  passive: boolean,\r\n  helpRequest: boolean,\r\n  helpResponse: boolean,\r\n  sharedXp: boolean,\r\n  sharedSpells: boolean,\r\n  sharedVision: boolean,\r\n  sharedControl: boolean,\r\n  sharedAdvancedControl: boolean,\r\n  rescuable: boolean,\r\n  sharedVisionForced: boolean,\r\n}\r\n\r\n/**\r\n * type player\r\n */\r\nexport default class JassPlayer extends JassAgent {\r\n  index: number;\r\n  name: string;\r\n  team = -1;\r\n  startLocation = -1;\r\n  forcedStartLocation = -1;\r\n  color = -1;\r\n  race = 0;\r\n  racePreference = -1;\r\n  raceSelectable = false;\r\n  controller = -1;\r\n  alliances: Map<number, Alliance> = new Map();\r\n\r\n  constructor(index: number, maxPlayers: number) {\r\n    super();\r\n\r\n    this.index = index;\r\n    this.name = `Player ${index}`;\r\n\r\n    for (let i = 0; i < maxPlayers; i++) {\r\n      if (i !== index) {\r\n        this.alliances.set(i, {\r\n          passive: false,\r\n          helpRequest: false,\r\n          helpResponse: false,\r\n          sharedXp: false,\r\n          sharedSpells: false,\r\n          sharedVision: false,\r\n          sharedControl: false,\r\n          sharedAdvancedControl: false,\r\n          rescuable: false,\r\n          sharedVisionForced: false,\r\n        });\r\n      }\r\n    }\r\n  }\r\n}\r\n","import JassAgent from './agent';\r\n\r\n/**\r\n * type widget\r\n */\r\nexport default class JassWidget extends JassAgent {\r\n  health = 0;\r\n  maxHealth = 0;\r\n}\r\n","import { base256ToString } from '../../../common/typecast';\r\nimport JassWidget from './widget';\r\nimport JassPlayer from './player';\r\n\r\n/**\r\n * type unit\r\n */\r\nexport default class JassUnit extends JassWidget {\r\n  player: JassPlayer;\r\n  unitId: string;\r\n  x: number;\r\n  y: number;\r\n  face: number;\r\n  acquireRange = 500;\r\n\r\n  constructor(player: JassPlayer, unitId: number, x: number, y: number, face: number) {\r\n    super();\r\n\r\n    this.player = player;\r\n    this.unitId = base256ToString(unitId);\r\n    this.x = x;\r\n    this.y = y;\r\n    this.face = face;\r\n\r\n    // if (balanceRow) {\r\n    //   this.balanceRow = balanceRow;\r\n    //   this.health = balanceRow.realHP;\r\n    //   this.maxHealth = this.health;\r\n    //   this.mana = parseFloat(balanceRow.realM) || 0;\r\n    //   this.maxMana = this.mana;\r\n    // } else if (jass.debugMode) {\r\n    //   console.log('Unknown unitid', unitId);\r\n    // }\r\n  }\r\n}\r\n","import JassAgent from './agent';\r\nimport JassPlayer from './player';\r\n\r\n/**\r\n * type force\r\n */\r\nexport default class JassForce extends JassAgent {\r\n  players: Set<JassPlayer> = new Set();\r\n}\r\n","import JassAgent from './agent';\r\nimport JassUnit from './unit';\r\n\r\n/**\r\n * type group\r\n */\r\nexport default class JassGroup extends JassAgent {\r\n  units: Set<JassUnit> = new Set();\r\n}\r\n","import JassAgent from './agent';\r\n\r\n/**\r\n * type trigger\r\n */\r\nexport default class JassTrigger extends JassAgent {\r\n  events: number[] = [];\r\n  conditions: number[] = [];\r\n  actions: number[] = [];\r\n  enabled = true;\r\n}\r\n","import JassAgent from './agent';\r\n\r\n/**\r\n * type timer\r\n */\r\nexport default class JassTimer extends JassAgent {\r\n  elapsed = 0;\r\n  timeout = 0;\r\n  periodic = false;\r\n  handlerFunc = -1;\r\n}\r\n","import JassAgent from './agent';\r\n\r\n/**\r\n * type location\r\n */\r\nexport default class JassLocation extends JassAgent {\r\n  x: number;\r\n  y: number;\r\n  z = 0;\r\n\r\n  constructor(x: number, y: number) {\r\n    super();\r\n\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n}\r\n","import JassAgent from './agent';\r\nimport JassRect from './rect';\r\n\r\n/**\r\n * type region\r\n */\r\nexport default class JassRegion extends JassAgent {\r\n  rects: Set<JassRect> = new Set();\r\n}\r\n","import JassAgent from './agent';\r\n\r\n/**\r\n * type rect\r\n */\r\nexport default class JassRect extends JassAgent {\r\n  center: Float32Array;\r\n  min: Float32Array;\r\n  max: Float32Array;\r\n\r\n  constructor(minx: number, miny: number, maxx: number, maxy: number) {\r\n    super();\r\n\r\n    this.center = new Float32Array([maxx - minx, maxy - miny]);\r\n    this.min = new Float32Array([minx, miny]);\r\n    this.max = new Float32Array([maxx, maxy]);\r\n  }\r\n}\r\n","import JassHandle from './handle';\r\n\r\n/**\r\n * Parent class for all enum types.\r\n */\r\nexport default class JassEnum extends JassHandle {\r\n  id: number;\r\n\r\n  constructor(value: number) {\r\n    super();\r\n\r\n    this.id = value;\r\n  }\r\n}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type race\r\n */\r\nexport default class JassRace extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type alliancetype\r\n */\r\nexport default class JassAllianceType extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type racepreference\r\n */\r\nexport default class JassRacePreference extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type gamestate\r\n */\r\nexport default class JassGameState extends JassEnum {}\r\n","import JassGameState from './gamestate';\r\n\r\n/**\r\n * type igamestate\r\n */\r\nexport default class JassIGameState extends JassGameState {}\r\n","import JassGameState from './gamestate';\r\n\r\n/**\r\n * type fgamestate\r\n */\r\nexport default class JassFGameState extends JassGameState {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type playerstate\r\n */\r\nexport default class JassPlayerState extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type playerscore\r\n */\r\nexport default class JassPlayerScore extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type playergameresult\r\n */\r\nexport default class JassPlayerGameResult extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type unitstate\r\n */\r\nexport default class JassUnitState extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type aidifficulty\r\n */\r\nexport default class JassAiDifficulty extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type eventid\r\n */\r\nexport default class JassEventId extends JassEnum {}\r\n","import JassEventId from './eventid';\r\n\r\n/**\r\n * type gameevent\r\n */\r\nexport default class JassGameEvent extends JassEventId {}\r\n","import JassEventId from './eventid';\r\n\r\n/**\r\n * type playerevent\r\n */\r\nexport default class JassPlayerEvent extends JassEventId {}\r\n","import JassEventId from './eventid';\r\n\r\n/**\r\n * type playerunitevent\r\n */\r\nexport default class JassPlayerUnitEvent extends JassEventId {}\r\n","import JassEventId from './eventid';\r\n\r\n/**\r\n * type unitevent\r\n */\r\nexport default class JassUnitEvent extends JassEventId {}\r\n","import JassEventId from './eventid';\r\n\r\n/**\r\n * type limitop\r\n */\r\nexport default class JassLimitOp extends JassEventId {}\r\n","import JassEventId from './eventid';\r\n\r\n/**\r\n * type widgetevent\r\n */\r\nexport default class JassWidgetEvent extends JassEventId {}\r\n","import JassEventId from './eventid';\r\n\r\n/**\r\n * type dialogevent\r\n */\r\nexport default class JassDialogEvent extends JassEventId {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type unittype\r\n */\r\nexport default class JassUnitType extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type gamespeed\r\n */\r\nexport default class JassGameSpeed extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type gamedifficulty\r\n */\r\nexport default class JassGameDifficulty extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type gametype\r\n */\r\nexport default class JassGameType extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type mapflag\r\n */\r\nexport default class JassMapFlag extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type mapvisibility\r\n */\r\nexport default class JassMapVisibility extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type mapflag\r\n */\r\nexport default class JassMapFlag extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type mapdensity\r\n */\r\nexport default class JassMapDensity extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type mapcontrol\r\n */\r\nexport default class JassMapControl extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type playerslotstate\r\n */\r\nexport default class JassPlayerSlotState extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type volumegroup\r\n */\r\nexport default class JassVolumeGroup extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type camerafield\r\n */\r\nexport default class JassCameraField extends JassEnum {}\r\n","import JassHandle from './handle';\r\nimport JassLocation from './location';\r\n\r\n/**\r\n * type camerasetup\r\n */\r\nexport default class JassCameraSetup extends JassHandle {\r\n  targetDistance = 0;\r\n  farZ = 0;\r\n  angleOfAttack = 0;\r\n  fieldOfView = 0;\r\n  roll = 0;\r\n  rotation = 0;\r\n  zOffset = 0;\r\n  destPosition = new JassLocation(0, 0);\r\n}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type playercolor\r\n */\r\nexport default class JassPlayerColor extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type placement\r\n */\r\nexport default class JassPlacement extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type startlocprio\r\n */\r\nexport default class JassStartLocPrio extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type raritycontrol\r\n */\r\nexport default class JassRarityControl extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type blendmode\r\n */\r\nexport default class JassBlendMode extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type texmapflags\r\n */\r\nexport default class JassTexMapFlags extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type effecttype\r\n */\r\nexport default class JassEffectType extends JassEnum {}\r\n","import JassHandle from './handle';\r\nimport JassRect from './rect';\r\n\r\n/**\r\n * type weathereffect\r\n */\r\nexport default class JassWeatherEffect extends JassHandle {\r\n  whichRect: JassRect;\r\n  effectId: string;\r\n  enabled = false;\r\n\r\n  constructor(whichRect: JassRect, effectId: string) {\r\n    super();\r\n\r\n    this.whichRect = whichRect;\r\n    this.effectId = effectId;\r\n  }\r\n}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type fogstate\r\n */\r\nexport default class JassFogState extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type version\r\n */\r\nexport default class JassVersion extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type itemtype\r\n */\r\nexport default class JassItemType extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type attacktype\r\n */\r\nexport default class JassAttackType extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type damagetype\r\n */\r\nexport default class JassDamageType extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type weapontype\r\n */\r\nexport default class JassWeaponType extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type soundtype\r\n */\r\nexport default class JassSoundType extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type pathingtype\r\n */\r\nexport default class JassPathingType extends JassEnum {}\r\n","import JassAgent from './agent';\r\n\r\n/**\r\n * type unit\r\n */\r\nexport default class JassHashTable extends JassAgent {\r\n  table: Map<number, Map<number, unknown>> = new Map();\r\n\r\n  save(parentKey: number, childKey: number, value: unknown): void {\r\n    const table = this.table;\r\n    let childTable = table.get(parentKey);\r\n\r\n    if (!childTable) {\r\n      childTable = new Map();\r\n\r\n      table.set(parentKey, childTable);\r\n    }\r\n\r\n    childTable.set(childKey, value);\r\n  }\r\n\r\n  load(parentKey: number, childKey: number, defaultValue?: unknown): unknown {\r\n    const table = this.table;\r\n    const childTable = table.get(parentKey);\r\n\r\n    if (childTable) {\r\n      const value = childTable.get(childKey);\r\n\r\n      if (value !== undefined) {\r\n        return value;\r\n      }\r\n    }\r\n\r\n    return defaultValue;\r\n  }\r\n\r\n  have(parentKey: number, childKey: number): boolean {\r\n    const table = this.table;\r\n    const childTable = table.get(parentKey);\r\n\r\n    if (!childTable) {\r\n      return false;\r\n    }\r\n\r\n    return childTable.has(childKey);\r\n  }\r\n\r\n  remove(parentKey: number, childKey: number): void {\r\n    const table = this.table;\r\n    const childTable = table.get(parentKey);\r\n\r\n    if (childTable) {\r\n      childTable.delete(childKey);\r\n\r\n      if (!childTable.size) {\r\n        table.delete(parentKey);\r\n      }\r\n    }\r\n  }\r\n\r\n  flush(): void {\r\n    this.table.clear();\r\n  }\r\n\r\n  flushChild(parentKey: number): void {\r\n    const child = this.table.get(parentKey);\r\n\r\n    if (child) {\r\n      child.clear();\r\n    }\r\n  }\r\n}\r\n","import { LUA_REGISTRYINDEX } from 'fengari/src/defs';\r\nimport { lua_State } from 'fengari/src/lstate';\r\nimport { lua_register, lua_pushinteger, lua_pushnumber, lua_pushstring, lua_pushlightuserdata, lua_touserdata, lua_pushboolean, lua_pushnil, lua_toboolean } from 'fengari/src/lapi';\r\nimport { luaL_checkstring, luaL_checkinteger, luaL_checknumber, luaL_ref, luaL_unref } from 'fengari/src/lauxlib';\r\nimport { lua_yield } from 'fengari/src/ldo';\r\nimport { JassTimer, JassGroup, JassLocation, JassForce, JassUnit, JassTrigger, JassPlayer, JassPlayerColor, JassMapControl, JassHandle } from './types';\r\nimport Context from './context';\r\n\r\n/**\r\n * constant native ConvertRace takes integer i returns race\r\n */\r\nfunction ConvertRace(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.races[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertAllianceType takes integer i returns alliancetype\r\n */\r\nfunction ConvertAllianceType(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.allianceTypes[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertRacePref takes integer i returns racepreference\r\n */\r\nfunction ConvertRacePref(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.racePrefs[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertIGameState takes integer i returns igamestate\r\n */\r\nfunction ConvertIGameState(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.gameStates[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertFGameState takes integer i returns fgamestate\r\n */\r\nfunction ConvertFGameState(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.gameStates[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertPlayerState takes integer i returns playerstate\r\n */\r\nfunction ConvertPlayerState(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.playerStates[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertPlayerScore takes integer i returns playerscore\r\n */\r\nfunction ConvertPlayerScore(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.playerScores[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertPlayerGameResult takes integer i returns playergameresult\r\n */\r\nfunction ConvertPlayerGameResult(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.playerGameResults[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertUnitState takes integer i returns unitstate\r\n */\r\nfunction ConvertUnitState(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.unitStates[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertAIDifficulty takes integer i returns aidifficulty\r\n */\r\nfunction ConvertAIDifficulty(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.aiDifficulties[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertGameEvent takes integer i returns gameevent\r\n */\r\nfunction ConvertGameEvent(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.events[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertPlayerEvent takes integer i returns playerevent\r\n */\r\nfunction ConvertPlayerEvent(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.events[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertPlayerUnitEvent takes integer i returns playerunitevent\r\n */\r\nfunction ConvertPlayerUnitEvent(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.events[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertWidgetEvent takes integer i returns widgetevent\r\n */\r\nfunction ConvertWidgetEvent(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.events[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertDialogEvent takes integer i returns dialogevent\r\n */\r\nfunction ConvertDialogEvent(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.events[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertUnitEvent takes integer i returns unitevent\r\n */\r\nfunction ConvertUnitEvent(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.events[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertLimitOp takes integer i returns limitop\r\n */\r\nfunction ConvertLimitOp(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.limitOps[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertUnitType takes integer i returns unittype\r\n */\r\nfunction ConvertUnitType(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.unitTypes[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertGameSpeed takes integer i returns gamespeed\r\n */\r\nfunction ConvertGameSpeed(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.gameSpeeds[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertPlacement takes integer i returns placement\r\n */\r\nfunction ConvertPlacement(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.placements[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertStartLocPrio takes integer i returns startlocprio\r\n */\r\nfunction ConvertStartLocPrio(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.startLocPrios[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertGameDifficulty takes integer i returns gamedifficulty\r\n */\r\nfunction ConvertGameDifficulty(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.gameDifficulties[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertGameType takes integer i returns gametype\r\n */\r\nfunction ConvertGameType(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.gameTypes[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertMapFlag takes integer i returns mapflag\r\n */\r\nfunction ConvertMapFlag(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.mapFlags[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertMapVisibility takes integer i returns mapvisibility\r\n */\r\nfunction ConvertMapVisibility(C: Context, L: lua_State): number {\r\n  const _i = luaL_checkinteger(L, 1);\r\n\r\n  console.warn('ConvertMapVisibility used, but the implementation is unknown');\r\n\r\n  lua_pushnil(L);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertMapSetting takes integer i returns mapsetting\r\n */\r\nfunction ConvertMapSetting(C: Context, L: lua_State): number {\r\n  const _i = luaL_checkinteger(L, 1);\r\n\r\n  console.warn('ConvertMapSetting used, but the implementation is unknown');\r\n\r\n  lua_pushnil(L);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertMapDensity takes integer i returns mapdensity\r\n */\r\nfunction ConvertMapDensity(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.mapDensities[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertMapControl takes integer i returns mapcontrol\r\n */\r\nfunction ConvertMapControl(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.mapControls[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertPlayerColor takes integer i returns playercolor\r\n */\r\nfunction ConvertPlayerColor(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.playerColors[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertPlayerSlotState takes integer i returns playerslotstate\r\n */\r\nfunction ConvertPlayerSlotState(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.playerSlotStates[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertVolumeGroup takes integer i returns volumegroup\r\n */\r\nfunction ConvertVolumeGroup(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.volumeGroups[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertCameraField takes integer i returns camerafield\r\n */\r\nfunction ConvertCameraField(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.cameraFields[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertBlendMode takes integer i returns blendmode\r\n */\r\nfunction ConvertBlendMode(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.blendModes[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertRarityControl takes integer i returns raritycontrol\r\n */\r\nfunction ConvertRarityControl(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.rarityControls[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertTexMapFlags takes integer i returns texmapflags\r\n */\r\nfunction ConvertTexMapFlags(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.texMapFlags[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertFogState takes integer i returns fogstate\r\n */\r\nfunction ConvertFogState(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.fogStates[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertEffectType takes integer i returns effecttype\r\n */\r\nfunction ConvertEffectType(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.effectTypes[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertVersion takes integer i returns version\r\n */\r\nfunction ConvertVersion(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.versions[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertItemType takes integer i returns itemtype\r\n */\r\nfunction ConvertItemType(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.itemTypes[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertAttackType takes integer i returns attacktype\r\n */\r\nfunction ConvertAttackType(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.attackTypes[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertDamageType takes integer i returns damagetype\r\n */\r\nfunction ConvertDamageType(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.damageTypes[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertWeaponType takes integer i returns weapontype\r\n */\r\nfunction ConvertWeaponType(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.weaponTypes[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertSoundType takes integer i returns soundtype\r\n */\r\nfunction ConvertSoundType(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.soundTypes[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertPathingType takes integer i returns pathingtype\r\n */\r\nfunction ConvertPathingType(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.pathingTypes[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertMouseButtonType takes integer i returns mousebuttontype\r\n */\r\nfunction ConvertMouseButtonType(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.mouseButtonTypes[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertAnimType takes integer i returns animtype\r\n */\r\nfunction ConvertAnimType(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.animTypes[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native ConvertSubAnimType takes integer i returns subanimtype\r\n */\r\nfunction ConvertSubAnimType(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.subAnimTypes[i]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native OrderId takes string orderIdString returns integer\r\n */\r\nfunction OrderId(C: Context, L: lua_State): number {\r\n  const _orderIdString = luaL_checkstring(L, 1);\r\n  console.warn('OrderId was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native OrderId2String takes integer orderId returns string\r\n */\r\nfunction OrderId2String(C: Context, L: lua_State): number {\r\n  const _orderId = luaL_checkinteger(L, 1);\r\n  console.warn('OrderId2String was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native UnitId takes string unitIdString returns integer\r\n */\r\nfunction UnitId(C: Context, L: lua_State): number {\r\n  const _unitIdString = luaL_checkstring(L, 1);\r\n  console.warn('UnitId was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native UnitId2String takes integer unitId returns string\r\n */\r\nfunction UnitId2String(C: Context, L: lua_State): number {\r\n  const _unitId = luaL_checkinteger(L, 1);\r\n  console.warn('UnitId2String was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native AbilityId takes string abilityIdString returns integer\r\n */\r\nfunction AbilityId(C: Context, L: lua_State): number {\r\n  const _abilityIdString = luaL_checkstring(L, 1);\r\n  console.warn('AbilityId was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native AbilityId2String takes integer abilityId returns string\r\n */\r\nfunction AbilityId2String(C: Context, L: lua_State): number {\r\n  const _abilityId = luaL_checkinteger(L, 1);\r\n  console.warn('AbilityId2String was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetObjectName takes integer objectId returns string\r\n */\r\nfunction GetObjectName(C: Context, L: lua_State): number {\r\n  const _objectId = luaL_checkinteger(L, 1);\r\n  console.warn('GetObjectName was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetBJMaxPlayers takes nothing returns integer\r\n */\r\nfunction GetBJMaxPlayers(C: Context, L: lua_State): number {\r\n  lua_pushinteger(L, 24);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetBJPlayerNeutralVictim takes nothing returns integer\r\n */\r\nfunction GetBJPlayerNeutralVictim(C: Context, L: lua_State): number {\r\n  lua_pushinteger(L, 24);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetBJPlayerNeutralExtra takes nothing returns integer\r\n */\r\nfunction GetBJPlayerNeutralExtra(C: Context, L: lua_State): number {\r\n  lua_pushinteger(L, 25);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetBJMaxPlayerSlots takes nothing returns integer\r\n */\r\nfunction GetBJMaxPlayerSlots(C: Context, L: lua_State): number {\r\n  lua_pushinteger(L, 28);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetPlayerNeutralPassive takes nothing returns integer\r\n */\r\nfunction GetPlayerNeutralPassive(C: Context, L: lua_State): number {\r\n  lua_pushinteger(L, 26);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetPlayerNeutralAggressive takes nothing returns integer\r\n */\r\nfunction GetPlayerNeutralAggressive(C: Context, L: lua_State): number {\r\n  lua_pushinteger(L, 27);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native Deg2Rad takes real degrees returns real\r\n */\r\nfunction Deg2Rad(C: Context, L: lua_State): number {\r\n  const degrees = luaL_checknumber(L, 1);\r\n\r\n  lua_pushnumber(L, degrees * (Math.PI / 180));\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native Rad2Deg takes real radians returns real\r\n */\r\nfunction Rad2Deg(C: Context, L: lua_State): number {\r\n  const radians = luaL_checknumber(L, 1);\r\n\r\n  lua_pushnumber(L, radians * (180 / Math.PI));\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native Sin takes real radians returns real\r\n */\r\nfunction Sin(C: Context, L: lua_State): number {\r\n  const radians = luaL_checknumber(L, 1);\r\n\r\n  lua_pushnumber(L, Math.sin(radians));\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native Cos takes real radians returns real\r\n */\r\nfunction Cos(C: Context, L: lua_State): number {\r\n  const radians = luaL_checknumber(L, 1);\r\n\r\n  lua_pushnumber(L, Math.cos(radians));\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native Tan takes real radians returns real\r\n */\r\nfunction Tan(C: Context, L: lua_State): number {\r\n  const radians = luaL_checknumber(L, 1);\r\n\r\n  lua_pushnumber(L, Math.tan(radians));\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native Asin takes real y returns real\r\n */\r\nfunction Asin(C: Context, L: lua_State): number {\r\n  const y = luaL_checknumber(L, 1);\r\n\r\n  lua_pushnumber(L, Math.asin(y));\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native Acos takes real x returns real\r\n */\r\nfunction Acos(C: Context, L: lua_State): number {\r\n  const x = luaL_checknumber(L, 1);\r\n\r\n  lua_pushnumber(L, Math.acos(x));\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native Atan takes real x returns real\r\n */\r\nfunction Atan(C: Context, L: lua_State): number {\r\n  const x = luaL_checknumber(L, 1);\r\n\r\n  lua_pushnumber(L, Math.atan(x));\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native Atan2 takes real y, real x returns real\r\n */\r\nfunction Atan2(C: Context, L: lua_State): number {\r\n  const y = luaL_checknumber(L, 1);\r\n  const x = luaL_checknumber(L, 2);\r\n\r\n  lua_pushnumber(L, Math.atan2(y, x));\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SquareRoot takes real x returns real\r\n */\r\nfunction SquareRoot(C: Context, L: lua_State): number {\r\n  const x = luaL_checknumber(L, 1);\r\n\r\n  lua_pushnumber(L, Math.sqrt(x));\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native Pow takes real x, real power returns real\r\n */\r\nfunction Pow(C: Context, L: lua_State): number {\r\n  const x = luaL_checknumber(L, 1);\r\n  const power = luaL_checknumber(L, 2);\r\n\r\n  lua_pushnumber(L, Math.pow(x, power));\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native I2R takes integer i returns real\r\n */\r\nfunction I2R(C: Context, L: lua_State): number {\r\n  const i = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushnumber(L, i);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native R2I takes real r returns integer\r\n */\r\nfunction R2I(C: Context, L: lua_State): number {\r\n  const r = luaL_checknumber(L, 1);\r\n\r\n  lua_pushinteger(L, r | 0);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native I2S takes integer i returns string\r\n */\r\nfunction I2S(C: Context, L: lua_State): number {\r\n  const _i = luaL_checkinteger(L, 1);\r\n  console.warn('I2S was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native R2S takes real r returns string\r\n */\r\nfunction R2S(C: Context, L: lua_State): number {\r\n  const _r = luaL_checknumber(L, 1);\r\n  console.warn('R2S was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native R2SW takes real r, integer width, integer precision returns string\r\n */\r\nfunction R2SW(C: Context, L: lua_State): number {\r\n  const _r = luaL_checknumber(L, 1);\r\n  const _width = luaL_checkinteger(L, 2);\r\n  const _precision = luaL_checkinteger(L, 3);\r\n  console.warn('R2SW was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native S2I takes string s returns integer\r\n */\r\nfunction S2I(C: Context, L: lua_State): number {\r\n  const _s = luaL_checkstring(L, 1);\r\n  console.warn('S2I was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native S2R takes string s returns real\r\n */\r\nfunction S2R(C: Context, L: lua_State): number {\r\n  const _s = luaL_checkstring(L, 1);\r\n  console.warn('S2R was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetHandleId takes handle h returns integer\r\n */\r\nfunction GetHandleId(C: Context, L: lua_State): number {\r\n  const h = <JassHandle>lua_touserdata(L, 1);\r\n\r\n  lua_pushinteger(L, h.handleId);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SubString takes string source, integer start, integer end_ returns string\r\n */\r\nfunction SubString(C: Context, L: lua_State): number {\r\n  const _source = luaL_checkstring(L, 1);\r\n  const _start = luaL_checkinteger(L, 2);\r\n  const _end_ = luaL_checkinteger(L, 3);\r\n  console.warn('SubString was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native StringLength takes string s returns integer\r\n */\r\nfunction StringLength(C: Context, L: lua_State): number {\r\n  const _s = luaL_checkstring(L, 1);\r\n  console.warn('StringLength was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native StringCase takes string source, boolean upper returns string\r\n */\r\nfunction StringCase(C: Context, L: lua_State): number {\r\n  const _source = luaL_checkstring(L, 1);\r\n  const _upper = lua_toboolean(L, 2);\r\n  console.warn('StringCase was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native StringHash takes string s returns integer\r\n */\r\nfunction StringHash(C: Context, L: lua_State): number {\r\n  const _s = luaL_checkstring(L, 1);\r\n  console.warn('StringHash was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetLocalizedString takes string source returns string\r\n */\r\nfunction GetLocalizedString(C: Context, L: lua_State): number {\r\n  const _source = luaL_checkstring(L, 1);\r\n  console.warn('GetLocalizedString was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetLocalizedHotkey takes string source returns integer\r\n */\r\nfunction GetLocalizedHotkey(C: Context, L: lua_State): number {\r\n  const _source = luaL_checkstring(L, 1);\r\n  console.warn('GetLocalizedHotkey was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetMapName takes string name returns nothing\r\n */\r\nfunction SetMapName(C: Context, L: lua_State): number {\r\n  const _name = luaL_checkstring(L, 1);\r\n  console.warn('SetMapName was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetMapDescription takes string description returns nothing\r\n */\r\nfunction SetMapDescription(C: Context, L: lua_State): number {\r\n  const _description = luaL_checkstring(L, 1);\r\n  console.warn('SetMapDescription was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetTeams takes integer teamcount returns nothing\r\n */\r\nfunction SetTeams(C: Context, L: lua_State): number {\r\n  const _teamcount = luaL_checkinteger(L, 1);\r\n  console.warn('SetTeams was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetPlayers takes integer playercount returns nothing\r\n */\r\nfunction SetPlayers(C: Context, L: lua_State): number {\r\n  const _playercount = luaL_checkinteger(L, 1);\r\n  console.warn('SetPlayers was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native DefineStartLocation takes integer whichStartLoc, real x, real y returns nothing\r\n */\r\nfunction DefineStartLocation(C: Context, L: lua_State): number {\r\n  const whichStartLoc = luaL_checkinteger(L, 1);\r\n  const x = luaL_checknumber(L, 2);\r\n  const y = luaL_checknumber(L, 3);\r\n\r\n  C.startLocations[whichStartLoc] = <JassLocation>C.addHandle(new JassLocation(x, y));\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native DefineStartLocationLoc takes integer whichStartLoc, location whichLocation returns nothing\r\n */\r\nfunction DefineStartLocationLoc(C: Context, L: lua_State): number {\r\n  const _whichStartLoc = luaL_checkinteger(L, 1);\r\n  const _whichLocation = lua_touserdata(L, 2);\r\n  console.warn('DefineStartLocationLoc was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetStartLocPrioCount takes integer whichStartLoc, integer prioSlotCount returns nothing\r\n */\r\nfunction SetStartLocPrioCount(C: Context, L: lua_State): number {\r\n  const _whichStartLoc = luaL_checkinteger(L, 1);\r\n  const _prioSlotCount = luaL_checkinteger(L, 2);\r\n  console.warn('SetStartLocPrioCount was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetStartLocPrio takes integer whichStartLoc, integer prioSlotIndex, integer otherStartLocIndex, startlocprio priority returns nothing\r\n */\r\nfunction SetStartLocPrio(C: Context, L: lua_State): number {\r\n  const _whichStartLoc = luaL_checkinteger(L, 1);\r\n  const _prioSlotIndex = luaL_checkinteger(L, 2);\r\n  const _otherStartLocIndex = luaL_checkinteger(L, 3);\r\n  const _priority = lua_touserdata(L, 4);\r\n  console.warn('SetStartLocPrio was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetStartLocPrioSlot takes integer whichStartLoc, integer prioSlotIndex returns integer\r\n */\r\nfunction GetStartLocPrioSlot(C: Context, L: lua_State): number {\r\n  const _whichStartLoc = luaL_checkinteger(L, 1);\r\n  const _prioSlotIndex = luaL_checkinteger(L, 2);\r\n  console.warn('GetStartLocPrioSlot was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetStartLocPrio takes integer whichStartLoc, integer prioSlotIndex returns startlocprio\r\n */\r\nfunction GetStartLocPrio(C: Context, L: lua_State): number {\r\n  const _whichStartLoc = luaL_checkinteger(L, 1);\r\n  const _prioSlotIndex = luaL_checkinteger(L, 2);\r\n  console.warn('GetStartLocPrio was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetGameTypeSupported takes gametype whichGameType, boolean value returns nothing\r\n */\r\nfunction SetGameTypeSupported(C: Context, L: lua_State): number {\r\n  const _whichGameType = lua_touserdata(L, 1);\r\n  const _value = lua_toboolean(L, 2);\r\n  console.warn('SetGameTypeSupported was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetMapFlag takes mapflag whichMapFlag, boolean value returns nothing\r\n */\r\nfunction SetMapFlag(C: Context, L: lua_State): number {\r\n  const _whichMapFlag = lua_touserdata(L, 1);\r\n  const _value = lua_toboolean(L, 2);\r\n  console.warn('SetMapFlag was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetGamePlacement takes placement whichPlacementType returns nothing\r\n */\r\nfunction SetGamePlacement(C: Context, L: lua_State): number {\r\n  const _whichPlacementType = lua_touserdata(L, 1);\r\n  console.warn('SetGamePlacement was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetGameSpeed takes gamespeed whichspeed returns nothing\r\n */\r\nfunction SetGameSpeed(C: Context, L: lua_State): number {\r\n  const _whichspeed = lua_touserdata(L, 1);\r\n  console.warn('SetGameSpeed was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetGameDifficulty takes gamedifficulty whichdifficulty returns nothing\r\n */\r\nfunction SetGameDifficulty(C: Context, L: lua_State): number {\r\n  const _whichdifficulty = lua_touserdata(L, 1);\r\n  console.warn('SetGameDifficulty was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetResourceDensity takes mapdensity whichdensity returns nothing\r\n */\r\nfunction SetResourceDensity(C: Context, L: lua_State): number {\r\n  const _whichdensity = lua_touserdata(L, 1);\r\n  console.warn('SetResourceDensity was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCreatureDensity takes mapdensity whichdensity returns nothing\r\n */\r\nfunction SetCreatureDensity(C: Context, L: lua_State): number {\r\n  const _whichdensity = lua_touserdata(L, 1);\r\n  console.warn('SetCreatureDensity was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetTeams takes nothing returns integer\r\n */\r\nfunction GetTeams(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetTeams was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetPlayers takes nothing returns integer\r\n */\r\nfunction GetPlayers(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetPlayers was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IsGameTypeSupported takes gametype whichGameType returns boolean\r\n */\r\nfunction IsGameTypeSupported(C: Context, L: lua_State): number {\r\n  const _whichGameType = lua_touserdata(L, 1);\r\n  console.warn('IsGameTypeSupported was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetGameTypeSelected takes nothing returns gametype\r\n */\r\nfunction GetGameTypeSelected(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetGameTypeSelected was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IsMapFlagSet takes mapflag whichMapFlag returns boolean\r\n */\r\nfunction IsMapFlagSet(C: Context, L: lua_State): number {\r\n  const _whichMapFlag = lua_touserdata(L, 1);\r\n  console.warn('IsMapFlagSet was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetGamePlacement takes nothing returns placement\r\n */\r\nfunction GetGamePlacement(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetGamePlacement was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetGameSpeed takes nothing returns gamespeed\r\n */\r\nfunction GetGameSpeed(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetGameSpeed was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetGameDifficulty takes nothing returns gamedifficulty\r\n */\r\nfunction GetGameDifficulty(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetGameDifficulty was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetResourceDensity takes nothing returns mapdensity\r\n */\r\nfunction GetResourceDensity(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetResourceDensity was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetCreatureDensity takes nothing returns mapdensity\r\n */\r\nfunction GetCreatureDensity(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetCreatureDensity was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetStartLocationX takes integer whichStartLocation returns real\r\n */\r\nfunction GetStartLocationX(C: Context, L: lua_State): number {\r\n  const _whichStartLocation = luaL_checkinteger(L, 1);\r\n  console.warn('GetStartLocationX was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetStartLocationY takes integer whichStartLocation returns real\r\n */\r\nfunction GetStartLocationY(C: Context, L: lua_State): number {\r\n  const _whichStartLocation = luaL_checkinteger(L, 1);\r\n  console.warn('GetStartLocationY was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetStartLocationLoc takes integer whichStartLocation returns location\r\n */\r\nfunction GetStartLocationLoc(C: Context, L: lua_State): number {\r\n  const _whichStartLocation = luaL_checkinteger(L, 1);\r\n  console.warn('GetStartLocationLoc was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetPlayerTeam takes player whichPlayer, integer whichTeam returns nothing\r\n */\r\nfunction SetPlayerTeam(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _whichTeam = luaL_checkinteger(L, 2);\r\n  console.warn('SetPlayerTeam was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetPlayerStartLocation takes player whichPlayer, integer startLocIndex returns nothing\r\n */\r\nfunction SetPlayerStartLocation(C: Context, L: lua_State): number {\r\n  const whichPlayer = <JassPlayer>lua_touserdata(L, 1);\r\n  const startLocIndex = luaL_checkinteger(L, 2);\r\n\r\n  whichPlayer.startLocation = startLocIndex;\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ForcePlayerStartLocation takes player whichPlayer, integer startLocIndex returns nothing\r\n */\r\nfunction ForcePlayerStartLocation(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _startLocIndex = luaL_checkinteger(L, 2);\r\n  console.warn('ForcePlayerStartLocation was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetPlayerColor takes player whichPlayer, playercolor color returns nothing\r\n */\r\nfunction SetPlayerColor(C: Context, L: lua_State): number {\r\n  const whichPlayer = <JassPlayer>lua_touserdata(L, 1);\r\n  const color = <JassPlayerColor>lua_touserdata(L, 2);\r\n\r\n  whichPlayer.color = color.id;\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetPlayerAlliance takes player sourcePlayer, player otherPlayer, alliancetype whichAllianceSetting, boolean value returns nothing\r\n */\r\nfunction SetPlayerAlliance(C: Context, L: lua_State): number {\r\n  const _sourcePlayer = lua_touserdata(L, 1);\r\n  const _otherPlayer = lua_touserdata(L, 2);\r\n  const _whichAllianceSetting = lua_touserdata(L, 3);\r\n  const _value = lua_toboolean(L, 4);\r\n  console.warn('SetPlayerAlliance was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetPlayerTaxRate takes player sourcePlayer, player otherPlayer, playerstate whichResource, integer rate returns nothing\r\n */\r\nfunction SetPlayerTaxRate(C: Context, L: lua_State): number {\r\n  const _sourcePlayer = lua_touserdata(L, 1);\r\n  const _otherPlayer = lua_touserdata(L, 2);\r\n  const _whichResource = lua_touserdata(L, 3);\r\n  const _rate = luaL_checkinteger(L, 4);\r\n  console.warn('SetPlayerTaxRate was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetPlayerRacePreference takes player whichPlayer, racepreference whichRacePreference returns nothing\r\n */\r\nfunction SetPlayerRacePreference(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _whichRacePreference = lua_touserdata(L, 2);\r\n  console.warn('SetPlayerRacePreference was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetPlayerRaceSelectable takes player whichPlayer, boolean value returns nothing\r\n */\r\nfunction SetPlayerRaceSelectable(C: Context, L: lua_State): number {\r\n  const whichPlayer = <JassPlayer>lua_touserdata(L, 1);\r\n  const value = lua_toboolean(L, 2);\r\n\r\n  whichPlayer.raceSelectable = value;\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetPlayerController takes player whichPlayer, mapcontrol controlType returns nothing\r\n */\r\nfunction SetPlayerController(C: Context, L: lua_State): number {\r\n  const whichPlayer = <JassPlayer>lua_touserdata(L, 1);\r\n  const controlType = <JassMapControl>lua_touserdata(L, 2);\r\n\r\n  whichPlayer.controller = controlType.id;\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetPlayerName takes player whichPlayer, string name returns nothing\r\n */\r\nfunction SetPlayerName(C: Context, L: lua_State): number {\r\n  const whichPlayer = <JassPlayer>lua_touserdata(L, 1);\r\n  const name = luaL_checkstring(L, 2);\r\n\r\n  whichPlayer.name = name;\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetPlayerOnScoreScreen takes player whichPlayer, boolean flag returns nothing\r\n */\r\nfunction SetPlayerOnScoreScreen(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('SetPlayerOnScoreScreen was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetPlayerTeam takes player whichPlayer returns integer\r\n */\r\nfunction GetPlayerTeam(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  console.warn('GetPlayerTeam was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetPlayerStartLocation takes player whichPlayer returns integer\r\n */\r\nfunction GetPlayerStartLocation(C: Context, L: lua_State): number {\r\n  const whichPlayer = <JassPlayer>lua_touserdata(L, 1);\r\n\r\n  lua_pushinteger(L, whichPlayer.startLocation);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetPlayerColor takes player whichPlayer returns playercolor\r\n */\r\nfunction GetPlayerColor(C: Context, L: lua_State): number {\r\n  const whichPlayer = <JassPlayer>lua_touserdata(L, 1);\r\n\r\n  lua_pushlightuserdata(L, whichPlayer.color);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetPlayerSelectable takes player whichPlayer returns boolean\r\n */\r\nfunction GetPlayerSelectable(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  console.warn('GetPlayerSelectable was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetPlayerController takes player whichPlayer returns mapcontrol\r\n */\r\nfunction GetPlayerController(C: Context, L: lua_State): number {\r\n  const whichPlayer = <JassPlayer>lua_touserdata(L, 1);\r\n\r\n  lua_pushlightuserdata(L, whichPlayer.controller);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetPlayerSlotState takes player whichPlayer returns playerslotstate\r\n */\r\nfunction GetPlayerSlotState(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  console.warn('GetPlayerSlotState was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetPlayerTaxRate takes player sourcePlayer, player otherPlayer, playerstate whichResource returns integer\r\n */\r\nfunction GetPlayerTaxRate(C: Context, L: lua_State): number {\r\n  const _sourcePlayer = lua_touserdata(L, 1);\r\n  const _otherPlayer = lua_touserdata(L, 2);\r\n  const _whichResource = lua_touserdata(L, 3);\r\n  console.warn('GetPlayerTaxRate was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IsPlayerRacePrefSet takes player whichPlayer, racepreference pref returns boolean\r\n */\r\nfunction IsPlayerRacePrefSet(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _pref = lua_touserdata(L, 2);\r\n  console.warn('IsPlayerRacePrefSet was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetPlayerName takes player whichPlayer returns string\r\n */\r\nfunction GetPlayerName(C: Context, L: lua_State): number {\r\n  const whichPlayer = <JassPlayer>lua_touserdata(L, 1);\r\n\r\n  lua_pushstring(L, whichPlayer.name);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateTimer takes nothing returns timer\r\n */\r\nfunction CreateTimer(C: Context, L: lua_State): number {\r\n  lua_pushlightuserdata(L, C.addHandle(new JassTimer()));\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DestroyTimer takes timer whichTimer returns nothing\r\n */\r\nfunction DestroyTimer(C: Context, L: lua_State): number {\r\n  const whichTimer = <JassTimer>lua_touserdata(L, 1);\r\n\r\n  // In case it's in the middle of running, remove it.\r\n  C.timers.delete(whichTimer);\r\n\r\n  C.freeHandle(whichTimer);\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native TimerStart takes timer whichTimer, real timeout, boolean periodic, code handlerFunc returns nothing\r\n */\r\nfunction TimerStart(C: Context, L: lua_State): number {\r\n  const whichTimer = <JassTimer>lua_touserdata(L, 1);\r\n  const timeout = luaL_checknumber(L, 2);\r\n  const periodic = lua_toboolean(L, 3);\r\n  const handlerFunc = luaL_ref(L, LUA_REGISTRYINDEX);\r\n\r\n  whichTimer.elapsed = 0;\r\n  whichTimer.timeout = timeout;\r\n  whichTimer.periodic = periodic;\r\n  whichTimer.handlerFunc = handlerFunc;\r\n\r\n  C.timers.add(whichTimer);\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native TimerGetElapsed takes timer whichTimer returns real\r\n */\r\nfunction TimerGetElapsed(C: Context, L: lua_State): number {\r\n  const whichTimer = <JassTimer>lua_touserdata(L, 1);\r\n\r\n  lua_pushnumber(L, whichTimer.elapsed);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TimerGetRemaining takes timer whichTimer returns real\r\n */\r\nfunction TimerGetRemaining(C: Context, L: lua_State): number {\r\n  const whichTimer = <JassTimer>lua_touserdata(L, 1);\r\n\r\n  lua_pushnumber(L, whichTimer.timeout - whichTimer.elapsed);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TimerGetTimeout takes timer whichTimer returns real\r\n */\r\nfunction TimerGetTimeout(C: Context, L: lua_State): number {\r\n  const whichTimer = <JassTimer>lua_touserdata(L, 1);\r\n\r\n  lua_pushnumber(L, whichTimer.timeout);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native PauseTimer takes timer whichTimer returns nothing\r\n */\r\nfunction PauseTimer(C: Context, L: lua_State): number {\r\n  const whichTimer = <JassTimer>lua_touserdata(L, 1);\r\n\r\n  C.timers.delete(whichTimer);\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ResumeTimer takes timer whichTimer returns nothing\r\n */\r\nfunction ResumeTimer(C: Context, L: lua_State): number {\r\n  const whichTimer = <JassTimer>lua_touserdata(L, 1);\r\n\r\n  C.timers.add(whichTimer);\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetExpiredTimer takes nothing returns timer\r\n */\r\nfunction GetExpiredTimer(C: Context, L: lua_State): number {\r\n  const thread = C.currentThread;\r\n\r\n  if (thread && thread.expiredTimer) {\r\n    lua_pushlightuserdata(L, thread.expiredTimer);\r\n  } else {\r\n    lua_pushnil(L);\r\n  }\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateGroup takes nothing returns group\r\n */\r\nfunction CreateGroup(C: Context, L: lua_State): number {\r\n  lua_pushlightuserdata(L, C.addHandle(new JassGroup()));\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DestroyGroup takes group whichGroup returns nothing\r\n */\r\nfunction DestroyGroup(C: Context, L: lua_State): number {\r\n  const whichGroup = <JassGroup>lua_touserdata(L, 1);\r\n\r\n  C.freeHandle(whichGroup);\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GroupAddUnit takes group whichGroup, unit whichUnit returns nothing\r\n */\r\nfunction GroupAddUnit(C: Context, L: lua_State): number {\r\n  const whichGroup = <JassGroup>lua_touserdata(L, 1);\r\n  const whichUnit = <JassUnit>lua_touserdata(L, 2);\r\n\r\n  whichGroup.units.add(whichUnit);\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GroupRemoveUnit takes group whichGroup, unit whichUnit returns nothing\r\n */\r\nfunction GroupRemoveUnit(C: Context, L: lua_State): number {\r\n  const whichGroup = <JassGroup>lua_touserdata(L, 1);\r\n  const whichUnit = <JassUnit>lua_touserdata(L, 2);\r\n\r\n  whichGroup.units.delete(whichUnit);\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GroupClear takes group whichGroup returns nothing\r\n */\r\nfunction GroupClear(C: Context, L: lua_State): number {\r\n  const whichGroup = <JassGroup>lua_touserdata(L, 1);\r\n\r\n  whichGroup.units.clear();\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GroupEnumUnitsOfType takes group whichGroup, string unitname, boolexpr filter returns nothing\r\n */\r\nfunction GroupEnumUnitsOfType(C: Context, L: lua_State): number {\r\n  const _whichGroup = lua_touserdata(L, 1);\r\n  const _unitname = luaL_checkstring(L, 2);\r\n  const _filter = lua_touserdata(L, 3);\r\n  console.warn('GroupEnumUnitsOfType was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GroupEnumUnitsOfPlayer takes group whichGroup, player whichPlayer, boolexpr filter returns nothing\r\n */\r\nfunction GroupEnumUnitsOfPlayer(C: Context, L: lua_State): number {\r\n  const _whichGroup = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  const _filter = lua_touserdata(L, 3);\r\n  console.warn('GroupEnumUnitsOfPlayer was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GroupEnumUnitsOfTypeCounted takes group whichGroup, string unitname, boolexpr filter, integer countLimit returns nothing\r\n */\r\nfunction GroupEnumUnitsOfTypeCounted(C: Context, L: lua_State): number {\r\n  const _whichGroup = lua_touserdata(L, 1);\r\n  const _unitname = luaL_checkstring(L, 2);\r\n  const _filter = lua_touserdata(L, 3);\r\n  const _countLimit = luaL_checkinteger(L, 4);\r\n  console.warn('GroupEnumUnitsOfTypeCounted was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GroupEnumUnitsInRect takes group whichGroup, rect r, boolexpr filter returns nothing\r\n */\r\nfunction GroupEnumUnitsInRect(C: Context, L: lua_State): number {\r\n  const _whichGroup = lua_touserdata(L, 1);\r\n  const _r = lua_touserdata(L, 2);\r\n  const _filter = lua_touserdata(L, 3);\r\n  console.warn('GroupEnumUnitsInRect was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GroupEnumUnitsInRectCounted takes group whichGroup, rect r, boolexpr filter, integer countLimit returns nothing\r\n */\r\nfunction GroupEnumUnitsInRectCounted(C: Context, L: lua_State): number {\r\n  const _whichGroup = lua_touserdata(L, 1);\r\n  const _r = lua_touserdata(L, 2);\r\n  const _filter = lua_touserdata(L, 3);\r\n  const _countLimit = luaL_checkinteger(L, 4);\r\n  console.warn('GroupEnumUnitsInRectCounted was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GroupEnumUnitsInRange takes group whichGroup, real x, real y, real radius, boolexpr filter returns nothing\r\n */\r\nfunction GroupEnumUnitsInRange(C: Context, L: lua_State): number {\r\n  const _whichGroup = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _radius = luaL_checknumber(L, 4);\r\n  const _filter = lua_touserdata(L, 5);\r\n  console.warn('GroupEnumUnitsInRange was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GroupEnumUnitsInRangeOfLoc takes group whichGroup, location whichLocation, real radius, boolexpr filter returns nothing\r\n */\r\nfunction GroupEnumUnitsInRangeOfLoc(C: Context, L: lua_State): number {\r\n  const _whichGroup = lua_touserdata(L, 1);\r\n  const _whichLocation = lua_touserdata(L, 2);\r\n  const _radius = luaL_checknumber(L, 3);\r\n  const _filter = lua_touserdata(L, 4);\r\n  console.warn('GroupEnumUnitsInRangeOfLoc was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GroupEnumUnitsInRangeCounted takes group whichGroup, real x, real y, real radius, boolexpr filter, integer countLimit returns nothing\r\n */\r\nfunction GroupEnumUnitsInRangeCounted(C: Context, L: lua_State): number {\r\n  const _whichGroup = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _radius = luaL_checknumber(L, 4);\r\n  const _filter = lua_touserdata(L, 5);\r\n  const _countLimit = luaL_checkinteger(L, 6);\r\n  console.warn('GroupEnumUnitsInRangeCounted was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GroupEnumUnitsInRangeOfLocCounted takes group whichGroup, location whichLocation, real radius, boolexpr filter, integer countLimit returns nothing\r\n */\r\nfunction GroupEnumUnitsInRangeOfLocCounted(C: Context, L: lua_State): number {\r\n  const _whichGroup = lua_touserdata(L, 1);\r\n  const _whichLocation = lua_touserdata(L, 2);\r\n  const _radius = luaL_checknumber(L, 3);\r\n  const _filter = lua_touserdata(L, 4);\r\n  const _countLimit = luaL_checkinteger(L, 5);\r\n  console.warn('GroupEnumUnitsInRangeOfLocCounted was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GroupEnumUnitsSelected takes group whichGroup, player whichPlayer, boolexpr filter returns nothing\r\n */\r\nfunction GroupEnumUnitsSelected(C: Context, L: lua_State): number {\r\n  const _whichGroup = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  const _filter = lua_touserdata(L, 3);\r\n  console.warn('GroupEnumUnitsSelected was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GroupImmediateOrder takes group whichGroup, string order returns boolean\r\n */\r\nfunction GroupImmediateOrder(C: Context, L: lua_State): number {\r\n  const _whichGroup = lua_touserdata(L, 1);\r\n  const _order = luaL_checkstring(L, 2);\r\n  console.warn('GroupImmediateOrder was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GroupImmediateOrderById takes group whichGroup, integer order returns boolean\r\n */\r\nfunction GroupImmediateOrderById(C: Context, L: lua_State): number {\r\n  const _whichGroup = lua_touserdata(L, 1);\r\n  const _order = luaL_checkinteger(L, 2);\r\n  console.warn('GroupImmediateOrderById was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GroupPointOrder takes group whichGroup, string order, real x, real y returns boolean\r\n */\r\nfunction GroupPointOrder(C: Context, L: lua_State): number {\r\n  const _whichGroup = lua_touserdata(L, 1);\r\n  const _order = luaL_checkstring(L, 2);\r\n  const _x = luaL_checknumber(L, 3);\r\n  const _y = luaL_checknumber(L, 4);\r\n  console.warn('GroupPointOrder was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GroupPointOrderLoc takes group whichGroup, string order, location whichLocation returns boolean\r\n */\r\nfunction GroupPointOrderLoc(C: Context, L: lua_State): number {\r\n  const _whichGroup = lua_touserdata(L, 1);\r\n  const _order = luaL_checkstring(L, 2);\r\n  const _whichLocation = lua_touserdata(L, 3);\r\n  console.warn('GroupPointOrderLoc was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GroupPointOrderById takes group whichGroup, integer order, real x, real y returns boolean\r\n */\r\nfunction GroupPointOrderById(C: Context, L: lua_State): number {\r\n  const _whichGroup = lua_touserdata(L, 1);\r\n  const _order = luaL_checkinteger(L, 2);\r\n  const _x = luaL_checknumber(L, 3);\r\n  const _y = luaL_checknumber(L, 4);\r\n  console.warn('GroupPointOrderById was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GroupPointOrderByIdLoc takes group whichGroup, integer order, location whichLocation returns boolean\r\n */\r\nfunction GroupPointOrderByIdLoc(C: Context, L: lua_State): number {\r\n  const _whichGroup = lua_touserdata(L, 1);\r\n  const _order = luaL_checkinteger(L, 2);\r\n  const _whichLocation = lua_touserdata(L, 3);\r\n  console.warn('GroupPointOrderByIdLoc was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GroupTargetOrder takes group whichGroup, string order, widget targetWidget returns boolean\r\n */\r\nfunction GroupTargetOrder(C: Context, L: lua_State): number {\r\n  const _whichGroup = lua_touserdata(L, 1);\r\n  const _order = luaL_checkstring(L, 2);\r\n  const _targetWidget = lua_touserdata(L, 3);\r\n  console.warn('GroupTargetOrder was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GroupTargetOrderById takes group whichGroup, integer order, widget targetWidget returns boolean\r\n */\r\nfunction GroupTargetOrderById(C: Context, L: lua_State): number {\r\n  const _whichGroup = lua_touserdata(L, 1);\r\n  const _order = luaL_checkinteger(L, 2);\r\n  const _targetWidget = lua_touserdata(L, 3);\r\n  console.warn('GroupTargetOrderById was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native ForGroup takes group whichGroup, code callback returns nothing\r\n */\r\nfunction ForGroup(C: Context, L: lua_State): number {\r\n  const whichGroup = <JassGroup>lua_touserdata(L, 1);\r\n  const callback = luaL_ref(L, LUA_REGISTRYINDEX);\r\n\r\n  for (const unit of whichGroup.units) {\r\n    C.enumUnit = unit;\r\n\r\n    C.call(callback);\r\n  }\r\n\r\n  C.enumUnit = null;\r\n\r\n  luaL_unref(L, LUA_REGISTRYINDEX, callback);\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native FirstOfGroup takes group whichGroup returns unit\r\n */\r\nfunction FirstOfGroup(C: Context, L: lua_State): number {\r\n  const _whichGroup = lua_touserdata(L, 1);\r\n  console.warn('FirstOfGroup was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateForce takes nothing returns force\r\n */\r\nfunction CreateForce(C: Context, L: lua_State): number {\r\n  lua_pushlightuserdata(L, C.addHandle(new JassForce()));\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DestroyForce takes force whichForce returns nothing\r\n */\r\nfunction DestroyForce(C: Context, L: lua_State): number {\r\n  const whichForce = <JassForce>lua_touserdata(L, 1);\r\n\r\n  C.freeHandle(whichForce);\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ForceAddPlayer takes force whichForce, player whichPlayer returns nothing\r\n */\r\nfunction ForceAddPlayer(C: Context, L: lua_State): number {\r\n  const whichForce = <JassForce>lua_touserdata(L, 1);\r\n  const whichPlayer = <JassPlayer>lua_touserdata(L, 2);\r\n\r\n  whichForce.players.add(whichPlayer);\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ForceRemovePlayer takes force whichForce, player whichPlayer returns nothing\r\n */\r\nfunction ForceRemovePlayer(C: Context, L: lua_State): number {\r\n  const whichForce = <JassForce>lua_touserdata(L, 1);\r\n  const whichPlayer = <JassPlayer>lua_touserdata(L, 2);\r\n\r\n  whichForce.players.delete(whichPlayer);\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ForceClear takes force whichForce returns nothing\r\n */\r\nfunction ForceClear(C: Context, L: lua_State): number {\r\n  const whichForce = <JassForce>lua_touserdata(L, 1);\r\n\r\n  whichForce.players.clear();\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ForceEnumPlayers takes force whichForce, boolexpr filter returns nothing\r\n */\r\nfunction ForceEnumPlayers(C: Context, L: lua_State): number {\r\n  const _whichForce = lua_touserdata(L, 1);\r\n  const _filter = lua_touserdata(L, 2);\r\n  console.warn('ForceEnumPlayers was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ForceEnumPlayersCounted takes force whichForce, boolexpr filter, integer countLimit returns nothing\r\n */\r\nfunction ForceEnumPlayersCounted(C: Context, L: lua_State): number {\r\n  const _whichForce = lua_touserdata(L, 1);\r\n  const _filter = lua_touserdata(L, 2);\r\n  const _countLimit = luaL_checkinteger(L, 3);\r\n  console.warn('ForceEnumPlayersCounted was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ForceEnumAllies takes force whichForce, player whichPlayer, boolexpr filter returns nothing\r\n */\r\nfunction ForceEnumAllies(C: Context, L: lua_State): number {\r\n  const _whichForce = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  const _filter = lua_touserdata(L, 3);\r\n  console.warn('ForceEnumAllies was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ForceEnumEnemies takes force whichForce, player whichPlayer, boolexpr filter returns nothing\r\n */\r\nfunction ForceEnumEnemies(C: Context, L: lua_State): number {\r\n  const _whichForce = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  const _filter = lua_touserdata(L, 3);\r\n  console.warn('ForceEnumEnemies was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ForForce takes force whichForce, code callback returns nothing\r\n */\r\nfunction ForForce(C: Context, L: lua_State): number {\r\n  const whichForce = <JassForce>lua_touserdata(L, 1);\r\n  const callback = luaL_ref(L, LUA_REGISTRYINDEX);\r\n\r\n  for (const player of whichForce.players) {\r\n    C.enumPlayer = player;\r\n\r\n    C.call(callback);\r\n  }\r\n\r\n  C.enumPlayer = null;\r\n\r\n  luaL_unref(L, LUA_REGISTRYINDEX, callback);\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native Rect takes real minx, real miny, real maxx, real maxy returns rect\r\n */\r\nfunction Rect(C: Context, L: lua_State): number {\r\n  const _minx = luaL_checknumber(L, 1);\r\n  const _miny = luaL_checknumber(L, 2);\r\n  const _maxx = luaL_checknumber(L, 3);\r\n  const _maxy = luaL_checknumber(L, 4);\r\n  console.warn('Rect was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native RectFromLoc takes location min, location max returns rect\r\n */\r\nfunction RectFromLoc(C: Context, L: lua_State): number {\r\n  const _min = lua_touserdata(L, 1);\r\n  const _max = lua_touserdata(L, 2);\r\n  console.warn('RectFromLoc was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native RemoveRect takes rect whichRect returns nothing\r\n */\r\nfunction RemoveRect(C: Context, L: lua_State): number {\r\n  const _whichRect = lua_touserdata(L, 1);\r\n  console.warn('RemoveRect was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetRect takes rect whichRect, real minx, real miny, real maxx, real maxy returns nothing\r\n */\r\nfunction SetRect(C: Context, L: lua_State): number {\r\n  const _whichRect = lua_touserdata(L, 1);\r\n  const _minx = luaL_checknumber(L, 2);\r\n  const _miny = luaL_checknumber(L, 3);\r\n  const _maxx = luaL_checknumber(L, 4);\r\n  const _maxy = luaL_checknumber(L, 5);\r\n  console.warn('SetRect was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetRectFromLoc takes rect whichRect, location min, location max returns nothing\r\n */\r\nfunction SetRectFromLoc(C: Context, L: lua_State): number {\r\n  const _whichRect = lua_touserdata(L, 1);\r\n  const _min = lua_touserdata(L, 2);\r\n  const _max = lua_touserdata(L, 3);\r\n  console.warn('SetRectFromLoc was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native MoveRectTo takes rect whichRect, real newCenterX, real newCenterY returns nothing\r\n */\r\nfunction MoveRectTo(C: Context, L: lua_State): number {\r\n  const _whichRect = lua_touserdata(L, 1);\r\n  const _newCenterX = luaL_checknumber(L, 2);\r\n  const _newCenterY = luaL_checknumber(L, 3);\r\n  console.warn('MoveRectTo was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native MoveRectToLoc takes rect whichRect, location newCenterLoc returns nothing\r\n */\r\nfunction MoveRectToLoc(C: Context, L: lua_State): number {\r\n  const _whichRect = lua_touserdata(L, 1);\r\n  const _newCenterLoc = lua_touserdata(L, 2);\r\n  console.warn('MoveRectToLoc was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetRectCenterX takes rect whichRect returns real\r\n */\r\nfunction GetRectCenterX(C: Context, L: lua_State): number {\r\n  const _whichRect = lua_touserdata(L, 1);\r\n  console.warn('GetRectCenterX was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetRectCenterY takes rect whichRect returns real\r\n */\r\nfunction GetRectCenterY(C: Context, L: lua_State): number {\r\n  const _whichRect = lua_touserdata(L, 1);\r\n  console.warn('GetRectCenterY was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetRectMinX takes rect whichRect returns real\r\n */\r\nfunction GetRectMinX(C: Context, L: lua_State): number {\r\n  const _whichRect = lua_touserdata(L, 1);\r\n  console.warn('GetRectMinX was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetRectMinY takes rect whichRect returns real\r\n */\r\nfunction GetRectMinY(C: Context, L: lua_State): number {\r\n  const _whichRect = lua_touserdata(L, 1);\r\n  console.warn('GetRectMinY was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetRectMaxX takes rect whichRect returns real\r\n */\r\nfunction GetRectMaxX(C: Context, L: lua_State): number {\r\n  const _whichRect = lua_touserdata(L, 1);\r\n  console.warn('GetRectMaxX was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetRectMaxY takes rect whichRect returns real\r\n */\r\nfunction GetRectMaxY(C: Context, L: lua_State): number {\r\n  const _whichRect = lua_touserdata(L, 1);\r\n  console.warn('GetRectMaxY was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateRegion takes nothing returns region\r\n */\r\nfunction CreateRegion(C: Context, L: lua_State): number {\r\n\r\n  console.warn('CreateRegion was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native RemoveRegion takes region whichRegion returns nothing\r\n */\r\nfunction RemoveRegion(C: Context, L: lua_State): number {\r\n  const _whichRegion = lua_touserdata(L, 1);\r\n  console.warn('RemoveRegion was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native RegionAddRect takes region whichRegion, rect r returns nothing\r\n */\r\nfunction RegionAddRect(C: Context, L: lua_State): number {\r\n  const _whichRegion = lua_touserdata(L, 1);\r\n  const _r = lua_touserdata(L, 2);\r\n  console.warn('RegionAddRect was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native RegionClearRect takes region whichRegion, rect r returns nothing\r\n */\r\nfunction RegionClearRect(C: Context, L: lua_State): number {\r\n  const _whichRegion = lua_touserdata(L, 1);\r\n  const _r = lua_touserdata(L, 2);\r\n  console.warn('RegionClearRect was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native RegionAddCell takes region whichRegion, real x, real y returns nothing\r\n */\r\nfunction RegionAddCell(C: Context, L: lua_State): number {\r\n  const _whichRegion = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  console.warn('RegionAddCell was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native RegionAddCellAtLoc takes region whichRegion, location whichLocation returns nothing\r\n */\r\nfunction RegionAddCellAtLoc(C: Context, L: lua_State): number {\r\n  const _whichRegion = lua_touserdata(L, 1);\r\n  const _whichLocation = lua_touserdata(L, 2);\r\n  console.warn('RegionAddCellAtLoc was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native RegionClearCell takes region whichRegion, real x, real y returns nothing\r\n */\r\nfunction RegionClearCell(C: Context, L: lua_State): number {\r\n  const _whichRegion = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  console.warn('RegionClearCell was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native RegionClearCellAtLoc takes region whichRegion, location whichLocation returns nothing\r\n */\r\nfunction RegionClearCellAtLoc(C: Context, L: lua_State): number {\r\n  const _whichRegion = lua_touserdata(L, 1);\r\n  const _whichLocation = lua_touserdata(L, 2);\r\n  console.warn('RegionClearCellAtLoc was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native Location takes real x, real y returns location\r\n */\r\nfunction Location(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  console.warn('Location was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native RemoveLocation takes location whichLocation returns nothing\r\n */\r\nfunction RemoveLocation(C: Context, L: lua_State): number {\r\n  const _whichLocation = lua_touserdata(L, 1);\r\n  console.warn('RemoveLocation was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native MoveLocation takes location whichLocation, real newX, real newY returns nothing\r\n */\r\nfunction MoveLocation(C: Context, L: lua_State): number {\r\n  const _whichLocation = lua_touserdata(L, 1);\r\n  const _newX = luaL_checknumber(L, 2);\r\n  const _newY = luaL_checknumber(L, 3);\r\n  console.warn('MoveLocation was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetLocationX takes location whichLocation returns real\r\n */\r\nfunction GetLocationX(C: Context, L: lua_State): number {\r\n  const _whichLocation = lua_touserdata(L, 1);\r\n  console.warn('GetLocationX was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetLocationY takes location whichLocation returns real\r\n */\r\nfunction GetLocationY(C: Context, L: lua_State): number {\r\n  const _whichLocation = lua_touserdata(L, 1);\r\n  console.warn('GetLocationY was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetLocationZ takes location whichLocation returns real\r\n */\r\nfunction GetLocationZ(C: Context, L: lua_State): number {\r\n  const _whichLocation = lua_touserdata(L, 1);\r\n  console.warn('GetLocationZ was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IsUnitInRegion takes region whichRegion, unit whichUnit returns boolean\r\n */\r\nfunction IsUnitInRegion(C: Context, L: lua_State): number {\r\n  const _whichRegion = lua_touserdata(L, 1);\r\n  const _whichUnit = lua_touserdata(L, 2);\r\n  console.warn('IsUnitInRegion was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IsPointInRegion takes region whichRegion, real x, real y returns boolean\r\n */\r\nfunction IsPointInRegion(C: Context, L: lua_State): number {\r\n  const _whichRegion = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  console.warn('IsPointInRegion was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IsLocationInRegion takes region whichRegion, location whichLocation returns boolean\r\n */\r\nfunction IsLocationInRegion(C: Context, L: lua_State): number {\r\n  const _whichRegion = lua_touserdata(L, 1);\r\n  const _whichLocation = lua_touserdata(L, 2);\r\n  console.warn('IsLocationInRegion was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetWorldBounds takes nothing returns rect\r\n */\r\nfunction GetWorldBounds(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetWorldBounds was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateTrigger takes nothing returns trigger\r\n */\r\nfunction CreateTrigger(C: Context, L: lua_State): number {\r\n  lua_pushlightuserdata(L, C.addHandle(new JassTrigger()));\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DestroyTrigger takes trigger whichTrigger returns nothing\r\n */\r\nfunction DestroyTrigger(C: Context, L: lua_State): number {\r\n  const whichTrigger = <JassTrigger>lua_touserdata(L, 1);\r\n\r\n  // In case it's registered, remove it.\r\n  C.triggers.delete(whichTrigger);\r\n\r\n  C.freeHandle(whichTrigger);\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ResetTrigger takes trigger whichTrigger returns nothing\r\n */\r\nfunction ResetTrigger(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  console.warn('ResetTrigger was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native EnableTrigger takes trigger whichTrigger returns nothing\r\n */\r\nfunction EnableTrigger(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  console.warn('EnableTrigger was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native DisableTrigger takes trigger whichTrigger returns nothing\r\n */\r\nfunction DisableTrigger(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  console.warn('DisableTrigger was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native IsTriggerEnabled takes trigger whichTrigger returns boolean\r\n */\r\nfunction IsTriggerEnabled(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  console.warn('IsTriggerEnabled was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerWaitOnSleeps takes trigger whichTrigger, boolean flag returns nothing\r\n */\r\nfunction TriggerWaitOnSleeps(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('TriggerWaitOnSleeps was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native IsTriggerWaitOnSleeps takes trigger whichTrigger returns boolean\r\n */\r\nfunction IsTriggerWaitOnSleeps(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  console.warn('IsTriggerWaitOnSleeps was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetFilterUnit takes nothing returns unit\r\n */\r\nfunction GetFilterUnit(C: Context, L: lua_State): number {\r\n  lua_pushlightuserdata(L, C.filterUnit);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetEnumUnit takes nothing returns unit\r\n */\r\nfunction GetEnumUnit(C: Context, L: lua_State): number {\r\n  lua_pushlightuserdata(L, C.enumUnit);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetFilterDestructable takes nothing returns destructable\r\n */\r\nfunction GetFilterDestructable(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetFilterDestructable was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetEnumDestructable takes nothing returns destructable\r\n */\r\nfunction GetEnumDestructable(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetEnumDestructable was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetFilterItem takes nothing returns item\r\n */\r\nfunction GetFilterItem(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetFilterItem was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetEnumItem takes nothing returns item\r\n */\r\nfunction GetEnumItem(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetEnumItem was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetFilterPlayer takes nothing returns player\r\n */\r\nfunction GetFilterPlayer(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetFilterPlayer was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetEnumPlayer takes nothing returns player\r\n */\r\nfunction GetEnumPlayer(C: Context, L: lua_State): number {\r\n  lua_pushlightuserdata(L, C.enumPlayer);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetTriggeringTrigger takes nothing returns trigger\r\n */\r\nfunction GetTriggeringTrigger(C: Context, L: lua_State): number {\r\n  const thread = C.currentThread;\r\n\r\n  if (thread && thread.triggeringTrigger) {\r\n    lua_pushlightuserdata(L, thread.triggeringTrigger);\r\n  } else {\r\n    lua_pushnil(L);\r\n  }\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetTriggerEventId takes nothing returns eventid\r\n */\r\nfunction GetTriggerEventId(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetTriggerEventId was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetTriggerEvalCount takes trigger whichTrigger returns integer\r\n */\r\nfunction GetTriggerEvalCount(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  console.warn('GetTriggerEvalCount was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetTriggerExecCount takes trigger whichTrigger returns integer\r\n */\r\nfunction GetTriggerExecCount(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  console.warn('GetTriggerExecCount was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native ExecuteFunc takes string funcName returns nothing\r\n */\r\nfunction ExecuteFunc(C: Context, L: lua_State): number {\r\n  const _funcName = luaL_checkstring(L, 1);\r\n  console.warn('ExecuteFunc was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native And takes boolexpr operandA, boolexpr operandB returns boolexpr\r\n */\r\nfunction And(C: Context, L: lua_State): number {\r\n  const _operandA = lua_touserdata(L, 1);\r\n  const _operandB = lua_touserdata(L, 2);\r\n  console.warn('And was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native Or takes boolexpr operandA, boolexpr operandB returns boolexpr\r\n */\r\nfunction Or(C: Context, L: lua_State): number {\r\n  const _operandA = lua_touserdata(L, 1);\r\n  const _operandB = lua_touserdata(L, 2);\r\n  console.warn('Or was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native Not takes boolexpr operand returns boolexpr\r\n */\r\nfunction Not(C: Context, L: lua_State): number {\r\n  const _operand = lua_touserdata(L, 1);\r\n  console.warn('Not was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native Condition takes code func returns conditionfunc\r\n */\r\nfunction Condition(C: Context, L: lua_State): number {\r\n  const _func = luaL_ref(L, LUA_REGISTRYINDEX);\r\n  console.warn('Condition was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DestroyCondition takes conditionfunc c returns nothing\r\n */\r\nfunction DestroyCondition(C: Context, L: lua_State): number {\r\n  const _c = lua_touserdata(L, 1);\r\n  console.warn('DestroyCondition was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native Filter takes code func returns filterfunc\r\n */\r\nfunction Filter(C: Context, L: lua_State): number {\r\n  const _func = luaL_ref(L, LUA_REGISTRYINDEX);\r\n  console.warn('Filter was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DestroyFilter takes filterfunc f returns nothing\r\n */\r\nfunction DestroyFilter(C: Context, L: lua_State): number {\r\n  const _f = lua_touserdata(L, 1);\r\n  console.warn('DestroyFilter was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native DestroyBoolExpr takes boolexpr e returns nothing\r\n */\r\nfunction DestroyBoolExpr(C: Context, L: lua_State): number {\r\n  const _e = lua_touserdata(L, 1);\r\n  console.warn('DestroyBoolExpr was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterVariableEvent takes trigger whichTrigger, string varName, limitop opcode, real limitval returns event\r\n */\r\nfunction TriggerRegisterVariableEvent(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _varName = luaL_checkstring(L, 2);\r\n  const _opcode = lua_touserdata(L, 3);\r\n  const _limitval = luaL_checknumber(L, 4);\r\n  console.warn('TriggerRegisterVariableEvent was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterTimerEvent takes trigger whichTrigger, real timeout, boolean periodic returns event\r\n */\r\nfunction TriggerRegisterTimerEvent(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _timeout = luaL_checknumber(L, 2);\r\n  const _periodic = lua_toboolean(L, 3);\r\n  console.warn('TriggerRegisterTimerEvent was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterTimerExpireEvent takes trigger whichTrigger, timer t returns event\r\n */\r\nfunction TriggerRegisterTimerExpireEvent(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _t = lua_touserdata(L, 2);\r\n  console.warn('TriggerRegisterTimerExpireEvent was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterGameStateEvent takes trigger whichTrigger, gamestate whichState, limitop opcode, real limitval returns event\r\n */\r\nfunction TriggerRegisterGameStateEvent(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _whichState = lua_touserdata(L, 2);\r\n  const _opcode = lua_touserdata(L, 3);\r\n  const _limitval = luaL_checknumber(L, 4);\r\n  console.warn('TriggerRegisterGameStateEvent was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterDialogEvent takes trigger whichTrigger, dialog whichDialog returns event\r\n */\r\nfunction TriggerRegisterDialogEvent(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _whichDialog = lua_touserdata(L, 2);\r\n  console.warn('TriggerRegisterDialogEvent was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterDialogButtonEvent takes trigger whichTrigger, button whichButton returns event\r\n */\r\nfunction TriggerRegisterDialogButtonEvent(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _whichButton = lua_touserdata(L, 2);\r\n  console.warn('TriggerRegisterDialogButtonEvent was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetEventGameState takes nothing returns gamestate\r\n */\r\nfunction GetEventGameState(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetEventGameState was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterGameEvent takes trigger whichTrigger, gameevent whichGameEvent returns event\r\n */\r\nfunction TriggerRegisterGameEvent(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _whichGameEvent = lua_touserdata(L, 2);\r\n  console.warn('TriggerRegisterGameEvent was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetWinningPlayer takes nothing returns player\r\n */\r\nfunction GetWinningPlayer(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetWinningPlayer was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterEnterRegion takes trigger whichTrigger, region whichRegion, boolexpr filter returns event\r\n */\r\nfunction TriggerRegisterEnterRegion(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _whichRegion = lua_touserdata(L, 2);\r\n  const _filter = lua_touserdata(L, 3);\r\n  console.warn('TriggerRegisterEnterRegion was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetTriggeringRegion takes nothing returns region\r\n */\r\nfunction GetTriggeringRegion(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetTriggeringRegion was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetEnteringUnit takes nothing returns unit\r\n */\r\nfunction GetEnteringUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetEnteringUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterLeaveRegion takes trigger whichTrigger, region whichRegion, boolexpr filter returns event\r\n */\r\nfunction TriggerRegisterLeaveRegion(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _whichRegion = lua_touserdata(L, 2);\r\n  const _filter = lua_touserdata(L, 3);\r\n  console.warn('TriggerRegisterLeaveRegion was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetLeavingUnit takes nothing returns unit\r\n */\r\nfunction GetLeavingUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetLeavingUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterTrackableHitEvent takes trigger whichTrigger, trackable t returns event\r\n */\r\nfunction TriggerRegisterTrackableHitEvent(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _t = lua_touserdata(L, 2);\r\n  console.warn('TriggerRegisterTrackableHitEvent was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterTrackableTrackEvent takes trigger whichTrigger, trackable t returns event\r\n */\r\nfunction TriggerRegisterTrackableTrackEvent(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _t = lua_touserdata(L, 2);\r\n  console.warn('TriggerRegisterTrackableTrackEvent was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetTriggeringTrackable takes nothing returns trackable\r\n */\r\nfunction GetTriggeringTrackable(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetTriggeringTrackable was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetClickedButton takes nothing returns button\r\n */\r\nfunction GetClickedButton(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetClickedButton was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetClickedDialog takes nothing returns dialog\r\n */\r\nfunction GetClickedDialog(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetClickedDialog was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetTournamentFinishSoonTimeRemaining takes nothing returns real\r\n */\r\nfunction GetTournamentFinishSoonTimeRemaining(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetTournamentFinishSoonTimeRemaining was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetTournamentFinishNowRule takes nothing returns integer\r\n */\r\nfunction GetTournamentFinishNowRule(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetTournamentFinishNowRule was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetTournamentFinishNowPlayer takes nothing returns player\r\n */\r\nfunction GetTournamentFinishNowPlayer(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetTournamentFinishNowPlayer was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetTournamentScore takes player whichPlayer returns integer\r\n */\r\nfunction GetTournamentScore(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  console.warn('GetTournamentScore was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetSaveBasicFilename takes nothing returns string\r\n */\r\nfunction GetSaveBasicFilename(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetSaveBasicFilename was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterPlayerEvent takes trigger whichTrigger, player whichPlayer, playerevent whichPlayerEvent returns event\r\n */\r\nfunction TriggerRegisterPlayerEvent(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  const _whichPlayerEvent = lua_touserdata(L, 3);\r\n  console.warn('TriggerRegisterPlayerEvent was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetTriggerPlayer takes nothing returns player\r\n */\r\nfunction GetTriggerPlayer(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetTriggerPlayer was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterPlayerUnitEvent takes trigger whichTrigger, player whichPlayer, playerunitevent whichPlayerUnitEvent, boolexpr filter returns event\r\n */\r\nfunction TriggerRegisterPlayerUnitEvent(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  const _whichPlayerUnitEvent = lua_touserdata(L, 3);\r\n  const _filter = lua_touserdata(L, 4);\r\n  console.warn('TriggerRegisterPlayerUnitEvent was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetLevelingUnit takes nothing returns unit\r\n */\r\nfunction GetLevelingUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetLevelingUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetLearningUnit takes nothing returns unit\r\n */\r\nfunction GetLearningUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetLearningUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetLearnedSkill takes nothing returns integer\r\n */\r\nfunction GetLearnedSkill(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetLearnedSkill was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetLearnedSkillLevel takes nothing returns integer\r\n */\r\nfunction GetLearnedSkillLevel(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetLearnedSkillLevel was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetRevivableUnit takes nothing returns unit\r\n */\r\nfunction GetRevivableUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetRevivableUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetRevivingUnit takes nothing returns unit\r\n */\r\nfunction GetRevivingUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetRevivingUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetAttacker takes nothing returns unit\r\n */\r\nfunction GetAttacker(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetAttacker was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetRescuer takes nothing returns unit\r\n */\r\nfunction GetRescuer(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetRescuer was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetDyingUnit takes nothing returns unit\r\n */\r\nfunction GetDyingUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetDyingUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetKillingUnit takes nothing returns unit\r\n */\r\nfunction GetKillingUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetKillingUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetDecayingUnit takes nothing returns unit\r\n */\r\nfunction GetDecayingUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetDecayingUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetConstructingStructure takes nothing returns unit\r\n */\r\nfunction GetConstructingStructure(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetConstructingStructure was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetCancelledStructure takes nothing returns unit\r\n */\r\nfunction GetCancelledStructure(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetCancelledStructure was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetConstructedStructure takes nothing returns unit\r\n */\r\nfunction GetConstructedStructure(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetConstructedStructure was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetResearchingUnit takes nothing returns unit\r\n */\r\nfunction GetResearchingUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetResearchingUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetResearched takes nothing returns integer\r\n */\r\nfunction GetResearched(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetResearched was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetTrainedUnitType takes nothing returns integer\r\n */\r\nfunction GetTrainedUnitType(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetTrainedUnitType was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetTrainedUnit takes nothing returns unit\r\n */\r\nfunction GetTrainedUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetTrainedUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetDetectedUnit takes nothing returns unit\r\n */\r\nfunction GetDetectedUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetDetectedUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetSummoningUnit takes nothing returns unit\r\n */\r\nfunction GetSummoningUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetSummoningUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetSummonedUnit takes nothing returns unit\r\n */\r\nfunction GetSummonedUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetSummonedUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetTransportUnit takes nothing returns unit\r\n */\r\nfunction GetTransportUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetTransportUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetLoadedUnit takes nothing returns unit\r\n */\r\nfunction GetLoadedUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetLoadedUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetSellingUnit takes nothing returns unit\r\n */\r\nfunction GetSellingUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetSellingUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetSoldUnit takes nothing returns unit\r\n */\r\nfunction GetSoldUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetSoldUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetBuyingUnit takes nothing returns unit\r\n */\r\nfunction GetBuyingUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetBuyingUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetSoldItem takes nothing returns item\r\n */\r\nfunction GetSoldItem(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetSoldItem was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetChangingUnit takes nothing returns unit\r\n */\r\nfunction GetChangingUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetChangingUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetChangingUnitPrevOwner takes nothing returns player\r\n */\r\nfunction GetChangingUnitPrevOwner(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetChangingUnitPrevOwner was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetManipulatingUnit takes nothing returns unit\r\n */\r\nfunction GetManipulatingUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetManipulatingUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetManipulatedItem takes nothing returns item\r\n */\r\nfunction GetManipulatedItem(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetManipulatedItem was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetOrderedUnit takes nothing returns unit\r\n */\r\nfunction GetOrderedUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetOrderedUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetIssuedOrderId takes nothing returns integer\r\n */\r\nfunction GetIssuedOrderId(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetIssuedOrderId was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetOrderPointX takes nothing returns real\r\n */\r\nfunction GetOrderPointX(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetOrderPointX was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetOrderPointY takes nothing returns real\r\n */\r\nfunction GetOrderPointY(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetOrderPointY was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetOrderPointLoc takes nothing returns location\r\n */\r\nfunction GetOrderPointLoc(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetOrderPointLoc was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetOrderTarget takes nothing returns widget\r\n */\r\nfunction GetOrderTarget(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetOrderTarget was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetOrderTargetDestructable takes nothing returns destructable\r\n */\r\nfunction GetOrderTargetDestructable(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetOrderTargetDestructable was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetOrderTargetItem takes nothing returns item\r\n */\r\nfunction GetOrderTargetItem(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetOrderTargetItem was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetOrderTargetUnit takes nothing returns unit\r\n */\r\nfunction GetOrderTargetUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetOrderTargetUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetSpellAbilityUnit takes nothing returns unit\r\n */\r\nfunction GetSpellAbilityUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetSpellAbilityUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetSpellAbilityId takes nothing returns integer\r\n */\r\nfunction GetSpellAbilityId(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetSpellAbilityId was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetSpellAbility takes nothing returns ability\r\n */\r\nfunction GetSpellAbility(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetSpellAbility was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetSpellTargetLoc takes nothing returns location\r\n */\r\nfunction GetSpellTargetLoc(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetSpellTargetLoc was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetSpellTargetX takes nothing returns real\r\n */\r\nfunction GetSpellTargetX(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetSpellTargetX was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetSpellTargetY takes nothing returns real\r\n */\r\nfunction GetSpellTargetY(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetSpellTargetY was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetSpellTargetDestructable takes nothing returns destructable\r\n */\r\nfunction GetSpellTargetDestructable(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetSpellTargetDestructable was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetSpellTargetItem takes nothing returns item\r\n */\r\nfunction GetSpellTargetItem(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetSpellTargetItem was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetSpellTargetUnit takes nothing returns unit\r\n */\r\nfunction GetSpellTargetUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetSpellTargetUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterPlayerAllianceChange takes trigger whichTrigger, player whichPlayer, alliancetype whichAlliance returns event\r\n */\r\nfunction TriggerRegisterPlayerAllianceChange(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  const _whichAlliance = lua_touserdata(L, 3);\r\n  console.warn('TriggerRegisterPlayerAllianceChange was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterPlayerStateEvent takes trigger whichTrigger, player whichPlayer, playerstate whichState, limitop opcode, real limitval returns event\r\n */\r\nfunction TriggerRegisterPlayerStateEvent(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  const _whichState = lua_touserdata(L, 3);\r\n  const _opcode = lua_touserdata(L, 4);\r\n  const _limitval = luaL_checknumber(L, 5);\r\n  console.warn('TriggerRegisterPlayerStateEvent was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetEventPlayerState takes nothing returns playerstate\r\n */\r\nfunction GetEventPlayerState(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetEventPlayerState was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterPlayerChatEvent takes trigger whichTrigger, player whichPlayer, string chatMessageToDetect, boolean exactMatchOnly returns event\r\n */\r\nfunction TriggerRegisterPlayerChatEvent(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  const _chatMessageToDetect = luaL_checkstring(L, 3);\r\n  const _exactMatchOnly = lua_toboolean(L, 4);\r\n  console.warn('TriggerRegisterPlayerChatEvent was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetEventPlayerChatString takes nothing returns string\r\n */\r\nfunction GetEventPlayerChatString(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetEventPlayerChatString was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetEventPlayerChatStringMatched takes nothing returns string\r\n */\r\nfunction GetEventPlayerChatStringMatched(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetEventPlayerChatStringMatched was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterDeathEvent takes trigger whichTrigger, widget whichWidget returns event\r\n */\r\nfunction TriggerRegisterDeathEvent(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _whichWidget = lua_touserdata(L, 2);\r\n  console.warn('TriggerRegisterDeathEvent was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetTriggerUnit takes nothing returns unit\r\n */\r\nfunction GetTriggerUnit(C: Context, L: lua_State): number {\r\n  const thread = C.currentThread;\r\n\r\n  if (thread && thread.triggerUnit) {\r\n    lua_pushlightuserdata(L, thread.triggerUnit);\r\n  } else {\r\n    lua_pushnil(L);\r\n  }\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterUnitStateEvent takes trigger whichTrigger, unit whichUnit, unitstate whichState, limitop opcode, real limitval returns event\r\n */\r\nfunction TriggerRegisterUnitStateEvent(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _whichUnit = lua_touserdata(L, 2);\r\n  const _whichState = lua_touserdata(L, 3);\r\n  const _opcode = lua_touserdata(L, 4);\r\n  const _limitval = luaL_checknumber(L, 5);\r\n  console.warn('TriggerRegisterUnitStateEvent was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetEventUnitState takes nothing returns unitstate\r\n */\r\nfunction GetEventUnitState(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetEventUnitState was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterUnitEvent takes trigger whichTrigger, unit whichUnit, unitevent whichEvent returns event\r\n */\r\nfunction TriggerRegisterUnitEvent(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _whichUnit = lua_touserdata(L, 2);\r\n  const _whichEvent = lua_touserdata(L, 3);\r\n  console.warn('TriggerRegisterUnitEvent was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetEventDamage takes nothing returns real\r\n */\r\nfunction GetEventDamage(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetEventDamage was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetEventDamageSource takes nothing returns unit\r\n */\r\nfunction GetEventDamageSource(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetEventDamageSource was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetEventDetectingPlayer takes nothing returns player\r\n */\r\nfunction GetEventDetectingPlayer(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetEventDetectingPlayer was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterFilterUnitEvent takes trigger whichTrigger, unit whichUnit, unitevent whichEvent, boolexpr filter returns event\r\n */\r\nfunction TriggerRegisterFilterUnitEvent(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _whichUnit = lua_touserdata(L, 2);\r\n  const _whichEvent = lua_touserdata(L, 3);\r\n  const _filter = lua_touserdata(L, 4);\r\n  console.warn('TriggerRegisterFilterUnitEvent was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetEventTargetUnit takes nothing returns unit\r\n */\r\nfunction GetEventTargetUnit(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetEventTargetUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRegisterUnitInRange takes trigger whichTrigger, unit whichUnit, real range, boolexpr filter returns event\r\n */\r\nfunction TriggerRegisterUnitInRange(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _whichUnit = lua_touserdata(L, 2);\r\n  const _range = luaL_checknumber(L, 3);\r\n  const _filter = lua_touserdata(L, 4);\r\n  console.warn('TriggerRegisterUnitInRange was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerAddCondition takes trigger whichTrigger, boolexpr condition returns triggercondition\r\n */\r\nfunction TriggerAddCondition(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _condition = lua_touserdata(L, 2);\r\n  console.warn('TriggerAddCondition was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRemoveCondition takes trigger whichTrigger, triggercondition whichCondition returns nothing\r\n */\r\nfunction TriggerRemoveCondition(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _whichCondition = lua_touserdata(L, 2);\r\n  console.warn('TriggerRemoveCondition was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native TriggerClearConditions takes trigger whichTrigger returns nothing\r\n */\r\nfunction TriggerClearConditions(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  console.warn('TriggerClearConditions was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native TriggerAddAction takes trigger whichTrigger, code actionFunc returns triggeraction\r\n */\r\nfunction TriggerAddAction(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _actionFunc = luaL_ref(L, LUA_REGISTRYINDEX);\r\n  console.warn('TriggerAddAction was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerRemoveAction takes trigger whichTrigger, triggeraction whichAction returns nothing\r\n */\r\nfunction TriggerRemoveAction(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  const _whichAction = lua_touserdata(L, 2);\r\n  console.warn('TriggerRemoveAction was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native TriggerClearActions takes trigger whichTrigger returns nothing\r\n */\r\nfunction TriggerClearActions(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  console.warn('TriggerClearActions was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native TriggerSleepAction takes real timeout returns nothing\r\n */\r\nfunction TriggerSleepAction(C: Context, L: lua_State): number {\r\n  const timeout = luaL_checknumber(L, 1);\r\n\r\n  lua_pushnumber(L, timeout);\r\n\r\n  lua_yield(L, 1);\r\n\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native TriggerWaitForSound takes sound s, real offset returns nothing\r\n */\r\nfunction TriggerWaitForSound(C: Context, L: lua_State): number {\r\n  const _s = lua_touserdata(L, 1);\r\n  const _offset = luaL_checknumber(L, 2);\r\n  console.warn('TriggerWaitForSound was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native TriggerEvaluate takes trigger whichTrigger returns boolean\r\n */\r\nfunction TriggerEvaluate(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  console.warn('TriggerEvaluate was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TriggerExecute takes trigger whichTrigger returns nothing\r\n */\r\nfunction TriggerExecute(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  console.warn('TriggerExecute was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native TriggerExecuteWait takes trigger whichTrigger returns nothing\r\n */\r\nfunction TriggerExecuteWait(C: Context, L: lua_State): number {\r\n  const _whichTrigger = lua_touserdata(L, 1);\r\n  console.warn('TriggerExecuteWait was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native TriggerSyncStart takes nothing returns nothing\r\n */\r\nfunction TriggerSyncStart(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('TriggerSyncStart was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native TriggerSyncReady takes nothing returns nothing\r\n */\r\nfunction TriggerSyncReady(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('TriggerSyncReady was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetWidgetLife takes widget whichWidget returns real\r\n */\r\nfunction GetWidgetLife(C: Context, L: lua_State): number {\r\n  const _whichWidget = lua_touserdata(L, 1);\r\n  console.warn('GetWidgetLife was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetWidgetLife takes widget whichWidget, real newLife returns nothing\r\n */\r\nfunction SetWidgetLife(C: Context, L: lua_State): number {\r\n  const _whichWidget = lua_touserdata(L, 1);\r\n  const _newLife = luaL_checknumber(L, 2);\r\n  console.warn('SetWidgetLife was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetWidgetX takes widget whichWidget returns real\r\n */\r\nfunction GetWidgetX(C: Context, L: lua_State): number {\r\n  const _whichWidget = lua_touserdata(L, 1);\r\n  console.warn('GetWidgetX was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetWidgetY takes widget whichWidget returns real\r\n */\r\nfunction GetWidgetY(C: Context, L: lua_State): number {\r\n  const _whichWidget = lua_touserdata(L, 1);\r\n  console.warn('GetWidgetY was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetTriggerWidget takes nothing returns widget\r\n */\r\nfunction GetTriggerWidget(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetTriggerWidget was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateDestructable takes integer objectid, real x, real y, real face, real scale, integer variation returns destructable\r\n */\r\nfunction CreateDestructable(C: Context, L: lua_State): number {\r\n  const _objectid = luaL_checkinteger(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _face = luaL_checknumber(L, 4);\r\n  const _scale = luaL_checknumber(L, 5);\r\n  const _variation = luaL_checkinteger(L, 6);\r\n  console.warn('CreateDestructable was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateDestructableZ takes integer objectid, real x, real y, real z, real face, real scale, integer variation returns destructable\r\n */\r\nfunction CreateDestructableZ(C: Context, L: lua_State): number {\r\n  const _objectid = luaL_checkinteger(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _z = luaL_checknumber(L, 4);\r\n  const _face = luaL_checknumber(L, 5);\r\n  const _scale = luaL_checknumber(L, 6);\r\n  const _variation = luaL_checkinteger(L, 7);\r\n  console.warn('CreateDestructableZ was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateDeadDestructable takes integer objectid, real x, real y, real face, real scale, integer variation returns destructable\r\n */\r\nfunction CreateDeadDestructable(C: Context, L: lua_State): number {\r\n  const _objectid = luaL_checkinteger(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _face = luaL_checknumber(L, 4);\r\n  const _scale = luaL_checknumber(L, 5);\r\n  const _variation = luaL_checkinteger(L, 6);\r\n  console.warn('CreateDeadDestructable was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateDeadDestructableZ takes integer objectid, real x, real y, real z, real face, real scale, integer variation returns destructable\r\n */\r\nfunction CreateDeadDestructableZ(C: Context, L: lua_State): number {\r\n  const _objectid = luaL_checkinteger(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _z = luaL_checknumber(L, 4);\r\n  const _face = luaL_checknumber(L, 5);\r\n  const _scale = luaL_checknumber(L, 6);\r\n  const _variation = luaL_checkinteger(L, 7);\r\n  console.warn('CreateDeadDestructableZ was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native RemoveDestructable takes destructable d returns nothing\r\n */\r\nfunction RemoveDestructable(C: Context, L: lua_State): number {\r\n  const _d = lua_touserdata(L, 1);\r\n  console.warn('RemoveDestructable was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native KillDestructable takes destructable d returns nothing\r\n */\r\nfunction KillDestructable(C: Context, L: lua_State): number {\r\n  const _d = lua_touserdata(L, 1);\r\n  console.warn('KillDestructable was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetDestructableInvulnerable takes destructable d, boolean flag returns nothing\r\n */\r\nfunction SetDestructableInvulnerable(C: Context, L: lua_State): number {\r\n  const _d = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('SetDestructableInvulnerable was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native IsDestructableInvulnerable takes destructable d returns boolean\r\n */\r\nfunction IsDestructableInvulnerable(C: Context, L: lua_State): number {\r\n  const _d = lua_touserdata(L, 1);\r\n  console.warn('IsDestructableInvulnerable was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native EnumDestructablesInRect takes rect r, boolexpr filter, code actionFunc returns nothing\r\n */\r\nfunction EnumDestructablesInRect(C: Context, L: lua_State): number {\r\n  const _r = lua_touserdata(L, 1);\r\n  const _filter = lua_touserdata(L, 2);\r\n  const _actionFunc = luaL_ref(L, LUA_REGISTRYINDEX);\r\n  console.warn('EnumDestructablesInRect was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetDestructableTypeId takes destructable d returns integer\r\n */\r\nfunction GetDestructableTypeId(C: Context, L: lua_State): number {\r\n  const _d = lua_touserdata(L, 1);\r\n  console.warn('GetDestructableTypeId was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetDestructableX takes destructable d returns real\r\n */\r\nfunction GetDestructableX(C: Context, L: lua_State): number {\r\n  const _d = lua_touserdata(L, 1);\r\n  console.warn('GetDestructableX was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetDestructableY takes destructable d returns real\r\n */\r\nfunction GetDestructableY(C: Context, L: lua_State): number {\r\n  const _d = lua_touserdata(L, 1);\r\n  console.warn('GetDestructableY was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetDestructableLife takes destructable d, real life returns nothing\r\n */\r\nfunction SetDestructableLife(C: Context, L: lua_State): number {\r\n  const _d = lua_touserdata(L, 1);\r\n  const _life = luaL_checknumber(L, 2);\r\n  console.warn('SetDestructableLife was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetDestructableLife takes destructable d returns real\r\n */\r\nfunction GetDestructableLife(C: Context, L: lua_State): number {\r\n  const _d = lua_touserdata(L, 1);\r\n  console.warn('GetDestructableLife was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetDestructableMaxLife takes destructable d, real max returns nothing\r\n */\r\nfunction SetDestructableMaxLife(C: Context, L: lua_State): number {\r\n  const _d = lua_touserdata(L, 1);\r\n  const _max = luaL_checknumber(L, 2);\r\n  console.warn('SetDestructableMaxLife was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetDestructableMaxLife takes destructable d returns real\r\n */\r\nfunction GetDestructableMaxLife(C: Context, L: lua_State): number {\r\n  const _d = lua_touserdata(L, 1);\r\n  console.warn('GetDestructableMaxLife was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DestructableRestoreLife takes destructable d, real life, boolean birth returns nothing\r\n */\r\nfunction DestructableRestoreLife(C: Context, L: lua_State): number {\r\n  const _d = lua_touserdata(L, 1);\r\n  const _life = luaL_checknumber(L, 2);\r\n  const _birth = lua_toboolean(L, 3);\r\n  console.warn('DestructableRestoreLife was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native QueueDestructableAnimation takes destructable d, string whichAnimation returns nothing\r\n */\r\nfunction QueueDestructableAnimation(C: Context, L: lua_State): number {\r\n  const _d = lua_touserdata(L, 1);\r\n  const _whichAnimation = luaL_checkstring(L, 2);\r\n  console.warn('QueueDestructableAnimation was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetDestructableAnimation takes destructable d, string whichAnimation returns nothing\r\n */\r\nfunction SetDestructableAnimation(C: Context, L: lua_State): number {\r\n  const _d = lua_touserdata(L, 1);\r\n  const _whichAnimation = luaL_checkstring(L, 2);\r\n  console.warn('SetDestructableAnimation was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetDestructableAnimationSpeed takes destructable d, real speedFactor returns nothing\r\n */\r\nfunction SetDestructableAnimationSpeed(C: Context, L: lua_State): number {\r\n  const _d = lua_touserdata(L, 1);\r\n  const _speedFactor = luaL_checknumber(L, 2);\r\n  console.warn('SetDestructableAnimationSpeed was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ShowDestructable takes destructable d, boolean flag returns nothing\r\n */\r\nfunction ShowDestructable(C: Context, L: lua_State): number {\r\n  const _d = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('ShowDestructable was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetDestructableOccluderHeight takes destructable d returns real\r\n */\r\nfunction GetDestructableOccluderHeight(C: Context, L: lua_State): number {\r\n  const _d = lua_touserdata(L, 1);\r\n  console.warn('GetDestructableOccluderHeight was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetDestructableOccluderHeight takes destructable d, real height returns nothing\r\n */\r\nfunction SetDestructableOccluderHeight(C: Context, L: lua_State): number {\r\n  const _d = lua_touserdata(L, 1);\r\n  const _height = luaL_checknumber(L, 2);\r\n  console.warn('SetDestructableOccluderHeight was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetDestructableName takes destructable d returns string\r\n */\r\nfunction GetDestructableName(C: Context, L: lua_State): number {\r\n  const _d = lua_touserdata(L, 1);\r\n  console.warn('GetDestructableName was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetTriggerDestructable takes nothing returns destructable\r\n */\r\nfunction GetTriggerDestructable(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetTriggerDestructable was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateItem takes integer itemid, real x, real y returns item\r\n */\r\nfunction CreateItem(C: Context, L: lua_State): number {\r\n  const _itemid = luaL_checkinteger(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  console.warn('CreateItem was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native RemoveItem takes item whichItem returns nothing\r\n */\r\nfunction RemoveItem(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  console.warn('RemoveItem was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetItemPlayer takes item whichItem returns player\r\n */\r\nfunction GetItemPlayer(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  console.warn('GetItemPlayer was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetItemTypeId takes item i returns integer\r\n */\r\nfunction GetItemTypeId(C: Context, L: lua_State): number {\r\n  const _i = lua_touserdata(L, 1);\r\n  console.warn('GetItemTypeId was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetItemX takes item i returns real\r\n */\r\nfunction GetItemX(C: Context, L: lua_State): number {\r\n  const _i = lua_touserdata(L, 1);\r\n  console.warn('GetItemX was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetItemY takes item i returns real\r\n */\r\nfunction GetItemY(C: Context, L: lua_State): number {\r\n  const _i = lua_touserdata(L, 1);\r\n  console.warn('GetItemY was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetItemPosition takes item i, real x, real y returns nothing\r\n */\r\nfunction SetItemPosition(C: Context, L: lua_State): number {\r\n  const _i = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  console.warn('SetItemPosition was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetItemDropOnDeath takes item whichItem, boolean flag returns nothing\r\n */\r\nfunction SetItemDropOnDeath(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('SetItemDropOnDeath was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetItemDroppable takes item i, boolean flag returns nothing\r\n */\r\nfunction SetItemDroppable(C: Context, L: lua_State): number {\r\n  const _i = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('SetItemDroppable was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetItemPawnable takes item i, boolean flag returns nothing\r\n */\r\nfunction SetItemPawnable(C: Context, L: lua_State): number {\r\n  const _i = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('SetItemPawnable was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetItemPlayer takes item whichItem, player whichPlayer, boolean changeColor returns nothing\r\n */\r\nfunction SetItemPlayer(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  const _changeColor = lua_toboolean(L, 3);\r\n  console.warn('SetItemPlayer was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetItemInvulnerable takes item whichItem, boolean flag returns nothing\r\n */\r\nfunction SetItemInvulnerable(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('SetItemInvulnerable was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native IsItemInvulnerable takes item whichItem returns boolean\r\n */\r\nfunction IsItemInvulnerable(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  console.warn('IsItemInvulnerable was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetItemVisible takes item whichItem, boolean show returns nothing\r\n */\r\nfunction SetItemVisible(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  const _show = lua_toboolean(L, 2);\r\n  console.warn('SetItemVisible was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native IsItemVisible takes item whichItem returns boolean\r\n */\r\nfunction IsItemVisible(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  console.warn('IsItemVisible was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IsItemOwned takes item whichItem returns boolean\r\n */\r\nfunction IsItemOwned(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  console.warn('IsItemOwned was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IsItemPowerup takes item whichItem returns boolean\r\n */\r\nfunction IsItemPowerup(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  console.warn('IsItemPowerup was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IsItemSellable takes item whichItem returns boolean\r\n */\r\nfunction IsItemSellable(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  console.warn('IsItemSellable was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IsItemPawnable takes item whichItem returns boolean\r\n */\r\nfunction IsItemPawnable(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  console.warn('IsItemPawnable was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IsItemIdPowerup takes integer itemId returns boolean\r\n */\r\nfunction IsItemIdPowerup(C: Context, L: lua_State): number {\r\n  const _itemId = luaL_checkinteger(L, 1);\r\n  console.warn('IsItemIdPowerup was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IsItemIdSellable takes integer itemId returns boolean\r\n */\r\nfunction IsItemIdSellable(C: Context, L: lua_State): number {\r\n  const _itemId = luaL_checkinteger(L, 1);\r\n  console.warn('IsItemIdSellable was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IsItemIdPawnable takes integer itemId returns boolean\r\n */\r\nfunction IsItemIdPawnable(C: Context, L: lua_State): number {\r\n  const _itemId = luaL_checkinteger(L, 1);\r\n  console.warn('IsItemIdPawnable was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native EnumItemsInRect takes rect r, boolexpr filter, code actionFunc returns nothing\r\n */\r\nfunction EnumItemsInRect(C: Context, L: lua_State): number {\r\n  const _r = lua_touserdata(L, 1);\r\n  const _filter = lua_touserdata(L, 2);\r\n  const _actionFunc = luaL_ref(L, LUA_REGISTRYINDEX);\r\n  console.warn('EnumItemsInRect was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetItemLevel takes item whichItem returns integer\r\n */\r\nfunction GetItemLevel(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  console.warn('GetItemLevel was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetItemType takes item whichItem returns itemtype\r\n */\r\nfunction GetItemType(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  console.warn('GetItemType was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetItemDropID takes item whichItem, integer unitId returns nothing\r\n */\r\nfunction SetItemDropID(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  const _unitId = luaL_checkinteger(L, 2);\r\n  console.warn('SetItemDropID was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * constant native GetItemName takes item whichItem returns string\r\n */\r\nfunction GetItemName(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  console.warn('GetItemName was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetItemCharges takes item whichItem returns integer\r\n */\r\nfunction GetItemCharges(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  console.warn('GetItemCharges was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetItemCharges takes item whichItem, integer charges returns nothing\r\n */\r\nfunction SetItemCharges(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  const _charges = luaL_checkinteger(L, 2);\r\n  console.warn('SetItemCharges was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetItemUserData takes item whichItem returns integer\r\n */\r\nfunction GetItemUserData(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  console.warn('GetItemUserData was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetItemUserData takes item whichItem, integer data returns nothing\r\n */\r\nfunction SetItemUserData(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  const _data = luaL_checkinteger(L, 2);\r\n  console.warn('SetItemUserData was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CreateUnit takes player id, integer unitid, real x, real y, real face returns unit\r\n */\r\nfunction CreateUnit(C: Context, L: lua_State): number {\r\n  const id = <JassPlayer>lua_touserdata(L, 1);\r\n  const unitid = luaL_checkinteger(L, 2);\r\n  const x = luaL_checknumber(L, 3);\r\n  const y = luaL_checknumber(L, 4);\r\n  const face = luaL_checknumber(L, 5);\r\n\r\n  lua_pushlightuserdata(L, C.addHandle(new JassUnit(id, unitid, x, y, face)));\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateUnitByName takes player whichPlayer, string unitname, real x, real y, real face returns unit\r\n */\r\nfunction CreateUnitByName(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _unitname = luaL_checkstring(L, 2);\r\n  const _x = luaL_checknumber(L, 3);\r\n  const _y = luaL_checknumber(L, 4);\r\n  const _face = luaL_checknumber(L, 5);\r\n  console.warn('CreateUnitByName was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateUnitAtLoc takes player id, integer unitid, location whichLocation, real face returns unit\r\n */\r\nfunction CreateUnitAtLoc(C: Context, L: lua_State): number {\r\n  const _id = lua_touserdata(L, 1);\r\n  const _unitid = luaL_checkinteger(L, 2);\r\n  const _whichLocation = lua_touserdata(L, 3);\r\n  const _face = luaL_checknumber(L, 4);\r\n  console.warn('CreateUnitAtLoc was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateUnitAtLocByName takes player id, string unitname, location whichLocation, real face returns unit\r\n */\r\nfunction CreateUnitAtLocByName(C: Context, L: lua_State): number {\r\n  const _id = lua_touserdata(L, 1);\r\n  const _unitname = luaL_checkstring(L, 2);\r\n  const _whichLocation = lua_touserdata(L, 3);\r\n  const _face = luaL_checknumber(L, 4);\r\n  console.warn('CreateUnitAtLocByName was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateCorpse takes player whichPlayer, integer unitid, real x, real y, real face returns unit\r\n */\r\nfunction CreateCorpse(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _unitid = luaL_checkinteger(L, 2);\r\n  const _x = luaL_checknumber(L, 3);\r\n  const _y = luaL_checknumber(L, 4);\r\n  const _face = luaL_checknumber(L, 5);\r\n  console.warn('CreateCorpse was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native KillUnit takes unit whichUnit returns nothing\r\n */\r\nfunction KillUnit(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('KillUnit was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native RemoveUnit takes unit whichUnit returns nothing\r\n */\r\nfunction RemoveUnit(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('RemoveUnit was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ShowUnit takes unit whichUnit, boolean show returns nothing\r\n */\r\nfunction ShowUnit(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _show = lua_toboolean(L, 2);\r\n  console.warn('ShowUnit was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitState takes unit whichUnit, unitstate whichUnitState, real newVal returns nothing\r\n */\r\nfunction SetUnitState(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichUnitState = lua_touserdata(L, 2);\r\n  const _newVal = luaL_checknumber(L, 3);\r\n  console.warn('SetUnitState was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitX takes unit whichUnit, real newX returns nothing\r\n */\r\nfunction SetUnitX(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _newX = luaL_checknumber(L, 2);\r\n  console.warn('SetUnitX was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitY takes unit whichUnit, real newY returns nothing\r\n */\r\nfunction SetUnitY(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _newY = luaL_checknumber(L, 2);\r\n  console.warn('SetUnitY was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitPosition takes unit whichUnit, real newX, real newY returns nothing\r\n */\r\nfunction SetUnitPosition(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _newX = luaL_checknumber(L, 2);\r\n  const _newY = luaL_checknumber(L, 3);\r\n  console.warn('SetUnitPosition was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitPositionLoc takes unit whichUnit, location whichLocation returns nothing\r\n */\r\nfunction SetUnitPositionLoc(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichLocation = lua_touserdata(L, 2);\r\n  console.warn('SetUnitPositionLoc was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitFacing takes unit whichUnit, real facingAngle returns nothing\r\n */\r\nfunction SetUnitFacing(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _facingAngle = luaL_checknumber(L, 2);\r\n  console.warn('SetUnitFacing was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitFacingTimed takes unit whichUnit, real facingAngle, real duration returns nothing\r\n */\r\nfunction SetUnitFacingTimed(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _facingAngle = luaL_checknumber(L, 2);\r\n  const _duration = luaL_checknumber(L, 3);\r\n  console.warn('SetUnitFacingTimed was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitMoveSpeed takes unit whichUnit, real newSpeed returns nothing\r\n */\r\nfunction SetUnitMoveSpeed(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _newSpeed = luaL_checknumber(L, 2);\r\n  console.warn('SetUnitMoveSpeed was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitFlyHeight takes unit whichUnit, real newHeight, real rate returns nothing\r\n */\r\nfunction SetUnitFlyHeight(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _newHeight = luaL_checknumber(L, 2);\r\n  const _rate = luaL_checknumber(L, 3);\r\n  console.warn('SetUnitFlyHeight was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitTurnSpeed takes unit whichUnit, real newTurnSpeed returns nothing\r\n */\r\nfunction SetUnitTurnSpeed(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _newTurnSpeed = luaL_checknumber(L, 2);\r\n  console.warn('SetUnitTurnSpeed was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitPropWindow takes unit whichUnit, real newPropWindowAngle returns nothing\r\n */\r\nfunction SetUnitPropWindow(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _newPropWindowAngle = luaL_checknumber(L, 2);\r\n  console.warn('SetUnitPropWindow was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitAcquireRange takes unit whichUnit, real newAcquireRange returns nothing\r\n */\r\nfunction SetUnitAcquireRange(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _newAcquireRange = luaL_checknumber(L, 2);\r\n  console.warn('SetUnitAcquireRange was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitCreepGuard takes unit whichUnit, boolean creepGuard returns nothing\r\n */\r\nfunction SetUnitCreepGuard(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _creepGuard = lua_toboolean(L, 2);\r\n  console.warn('SetUnitCreepGuard was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetUnitAcquireRange takes unit whichUnit returns real\r\n */\r\nfunction GetUnitAcquireRange(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitAcquireRange was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetUnitTurnSpeed takes unit whichUnit returns real\r\n */\r\nfunction GetUnitTurnSpeed(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitTurnSpeed was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetUnitPropWindow takes unit whichUnit returns real\r\n */\r\nfunction GetUnitPropWindow(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitPropWindow was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetUnitFlyHeight takes unit whichUnit returns real\r\n */\r\nfunction GetUnitFlyHeight(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitFlyHeight was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetUnitDefaultAcquireRange takes unit whichUnit returns real\r\n */\r\nfunction GetUnitDefaultAcquireRange(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitDefaultAcquireRange was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetUnitDefaultTurnSpeed takes unit whichUnit returns real\r\n */\r\nfunction GetUnitDefaultTurnSpeed(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitDefaultTurnSpeed was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetUnitDefaultPropWindow takes unit whichUnit returns real\r\n */\r\nfunction GetUnitDefaultPropWindow(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitDefaultPropWindow was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetUnitDefaultFlyHeight takes unit whichUnit returns real\r\n */\r\nfunction GetUnitDefaultFlyHeight(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitDefaultFlyHeight was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetUnitOwner takes unit whichUnit, player whichPlayer, boolean changeColor returns nothing\r\n */\r\nfunction SetUnitOwner(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  const _changeColor = lua_toboolean(L, 3);\r\n  console.warn('SetUnitOwner was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitColor takes unit whichUnit, playercolor whichColor returns nothing\r\n */\r\nfunction SetUnitColor(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichColor = lua_touserdata(L, 2);\r\n  console.warn('SetUnitColor was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitScale takes unit whichUnit, real scaleX, real scaleY, real scaleZ returns nothing\r\n */\r\nfunction SetUnitScale(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _scaleX = luaL_checknumber(L, 2);\r\n  const _scaleY = luaL_checknumber(L, 3);\r\n  const _scaleZ = luaL_checknumber(L, 4);\r\n  console.warn('SetUnitScale was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitTimeScale takes unit whichUnit, real timeScale returns nothing\r\n */\r\nfunction SetUnitTimeScale(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _timeScale = luaL_checknumber(L, 2);\r\n  console.warn('SetUnitTimeScale was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitBlendTime takes unit whichUnit, real blendTime returns nothing\r\n */\r\nfunction SetUnitBlendTime(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _blendTime = luaL_checknumber(L, 2);\r\n  console.warn('SetUnitBlendTime was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitVertexColor takes unit whichUnit, integer red, integer green, integer blue, integer alpha returns nothing\r\n */\r\nfunction SetUnitVertexColor(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _red = luaL_checkinteger(L, 2);\r\n  const _green = luaL_checkinteger(L, 3);\r\n  const _blue = luaL_checkinteger(L, 4);\r\n  const _alpha = luaL_checkinteger(L, 5);\r\n  console.warn('SetUnitVertexColor was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native QueueUnitAnimation takes unit whichUnit, string whichAnimation returns nothing\r\n */\r\nfunction QueueUnitAnimation(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichAnimation = luaL_checkstring(L, 2);\r\n  console.warn('QueueUnitAnimation was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitAnimation takes unit whichUnit, string whichAnimation returns nothing\r\n */\r\nfunction SetUnitAnimation(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichAnimation = luaL_checkstring(L, 2);\r\n  console.warn('SetUnitAnimation was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitAnimationByIndex takes unit whichUnit, integer whichAnimation returns nothing\r\n */\r\nfunction SetUnitAnimationByIndex(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichAnimation = luaL_checkinteger(L, 2);\r\n  console.warn('SetUnitAnimationByIndex was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitAnimationWithRarity takes unit whichUnit, string whichAnimation, raritycontrol rarity returns nothing\r\n */\r\nfunction SetUnitAnimationWithRarity(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichAnimation = luaL_checkstring(L, 2);\r\n  const _rarity = lua_touserdata(L, 3);\r\n  console.warn('SetUnitAnimationWithRarity was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native AddUnitAnimationProperties takes unit whichUnit, string animProperties, boolean add returns nothing\r\n */\r\nfunction AddUnitAnimationProperties(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _animProperties = luaL_checkstring(L, 2);\r\n  const _add = lua_toboolean(L, 3);\r\n  console.warn('AddUnitAnimationProperties was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitLookAt takes unit whichUnit, string whichBone, unit lookAtTarget, real offsetX, real offsetY, real offsetZ returns nothing\r\n */\r\nfunction SetUnitLookAt(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichBone = luaL_checkstring(L, 2);\r\n  const _lookAtTarget = lua_touserdata(L, 3);\r\n  const _offsetX = luaL_checknumber(L, 4);\r\n  const _offsetY = luaL_checknumber(L, 5);\r\n  const _offsetZ = luaL_checknumber(L, 6);\r\n  console.warn('SetUnitLookAt was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ResetUnitLookAt takes unit whichUnit returns nothing\r\n */\r\nfunction ResetUnitLookAt(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('ResetUnitLookAt was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitRescuable takes unit whichUnit, player byWhichPlayer, boolean flag returns nothing\r\n */\r\nfunction SetUnitRescuable(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _byWhichPlayer = lua_touserdata(L, 2);\r\n  const _flag = lua_toboolean(L, 3);\r\n  console.warn('SetUnitRescuable was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitRescueRange takes unit whichUnit, real range returns nothing\r\n */\r\nfunction SetUnitRescueRange(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _range = luaL_checknumber(L, 2);\r\n  console.warn('SetUnitRescueRange was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetHeroStr takes unit whichHero, integer newStr, boolean permanent returns nothing\r\n */\r\nfunction SetHeroStr(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  const _newStr = luaL_checkinteger(L, 2);\r\n  const _permanent = lua_toboolean(L, 3);\r\n  console.warn('SetHeroStr was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetHeroAgi takes unit whichHero, integer newAgi, boolean permanent returns nothing\r\n */\r\nfunction SetHeroAgi(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  const _newAgi = luaL_checkinteger(L, 2);\r\n  const _permanent = lua_toboolean(L, 3);\r\n  console.warn('SetHeroAgi was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetHeroInt takes unit whichHero, integer newInt, boolean permanent returns nothing\r\n */\r\nfunction SetHeroInt(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  const _newInt = luaL_checkinteger(L, 2);\r\n  const _permanent = lua_toboolean(L, 3);\r\n  console.warn('SetHeroInt was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetHeroStr takes unit whichHero, boolean includeBonuses returns integer\r\n */\r\nfunction GetHeroStr(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  const _includeBonuses = lua_toboolean(L, 2);\r\n  console.warn('GetHeroStr was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetHeroAgi takes unit whichHero, boolean includeBonuses returns integer\r\n */\r\nfunction GetHeroAgi(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  const _includeBonuses = lua_toboolean(L, 2);\r\n  console.warn('GetHeroAgi was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetHeroInt takes unit whichHero, boolean includeBonuses returns integer\r\n */\r\nfunction GetHeroInt(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  const _includeBonuses = lua_toboolean(L, 2);\r\n  console.warn('GetHeroInt was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitStripHeroLevel takes unit whichHero, integer howManyLevels returns boolean\r\n */\r\nfunction UnitStripHeroLevel(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  const _howManyLevels = luaL_checkinteger(L, 2);\r\n  console.warn('UnitStripHeroLevel was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetHeroXP takes unit whichHero returns integer\r\n */\r\nfunction GetHeroXP(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  console.warn('GetHeroXP was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetHeroXP takes unit whichHero, integer newXpVal, boolean showEyeCandy returns nothing\r\n */\r\nfunction SetHeroXP(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  const _newXpVal = luaL_checkinteger(L, 2);\r\n  const _showEyeCandy = lua_toboolean(L, 3);\r\n  console.warn('SetHeroXP was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetHeroSkillPoints takes unit whichHero returns integer\r\n */\r\nfunction GetHeroSkillPoints(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  console.warn('GetHeroSkillPoints was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitModifySkillPoints takes unit whichHero, integer skillPointDelta returns boolean\r\n */\r\nfunction UnitModifySkillPoints(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  const _skillPointDelta = luaL_checkinteger(L, 2);\r\n  console.warn('UnitModifySkillPoints was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native AddHeroXP takes unit whichHero, integer xpToAdd, boolean showEyeCandy returns nothing\r\n */\r\nfunction AddHeroXP(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  const _xpToAdd = luaL_checkinteger(L, 2);\r\n  const _showEyeCandy = lua_toboolean(L, 3);\r\n  console.warn('AddHeroXP was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetHeroLevel takes unit whichHero, integer level, boolean showEyeCandy returns nothing\r\n */\r\nfunction SetHeroLevel(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  const _level = luaL_checkinteger(L, 2);\r\n  const _showEyeCandy = lua_toboolean(L, 3);\r\n  console.warn('SetHeroLevel was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * constant native GetHeroLevel takes unit whichHero returns integer\r\n */\r\nfunction GetHeroLevel(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  console.warn('GetHeroLevel was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetUnitLevel takes unit whichUnit returns integer\r\n */\r\nfunction GetUnitLevel(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitLevel was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetHeroProperName takes unit whichHero returns string\r\n */\r\nfunction GetHeroProperName(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  console.warn('GetHeroProperName was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SuspendHeroXP takes unit whichHero, boolean flag returns nothing\r\n */\r\nfunction SuspendHeroXP(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('SuspendHeroXP was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native IsSuspendedXP takes unit whichHero returns boolean\r\n */\r\nfunction IsSuspendedXP(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  console.warn('IsSuspendedXP was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SelectHeroSkill takes unit whichHero, integer abilcode returns nothing\r\n */\r\nfunction SelectHeroSkill(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  const _abilcode = luaL_checkinteger(L, 2);\r\n  console.warn('SelectHeroSkill was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetUnitAbilityLevel takes unit whichUnit, integer abilcode returns integer\r\n */\r\nfunction GetUnitAbilityLevel(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _abilcode = luaL_checkinteger(L, 2);\r\n  console.warn('GetUnitAbilityLevel was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DecUnitAbilityLevel takes unit whichUnit, integer abilcode returns integer\r\n */\r\nfunction DecUnitAbilityLevel(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _abilcode = luaL_checkinteger(L, 2);\r\n  console.warn('DecUnitAbilityLevel was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IncUnitAbilityLevel takes unit whichUnit, integer abilcode returns integer\r\n */\r\nfunction IncUnitAbilityLevel(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _abilcode = luaL_checkinteger(L, 2);\r\n  console.warn('IncUnitAbilityLevel was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetUnitAbilityLevel takes unit whichUnit, integer abilcode, integer level returns integer\r\n */\r\nfunction SetUnitAbilityLevel(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _abilcode = luaL_checkinteger(L, 2);\r\n  const _level = luaL_checkinteger(L, 3);\r\n  console.warn('SetUnitAbilityLevel was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native ReviveHero takes unit whichHero, real x, real y, boolean doEyecandy returns boolean\r\n */\r\nfunction ReviveHero(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _doEyecandy = lua_toboolean(L, 4);\r\n  console.warn('ReviveHero was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native ReviveHeroLoc takes unit whichHero, location loc, boolean doEyecandy returns boolean\r\n */\r\nfunction ReviveHeroLoc(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  const _loc = lua_touserdata(L, 2);\r\n  const _doEyecandy = lua_toboolean(L, 3);\r\n  console.warn('ReviveHeroLoc was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetUnitExploded takes unit whichUnit, boolean exploded returns nothing\r\n */\r\nfunction SetUnitExploded(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _exploded = lua_toboolean(L, 2);\r\n  console.warn('SetUnitExploded was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitInvulnerable takes unit whichUnit, boolean flag returns nothing\r\n */\r\nfunction SetUnitInvulnerable(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('SetUnitInvulnerable was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PauseUnit takes unit whichUnit, boolean flag returns nothing\r\n */\r\nfunction PauseUnit(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('PauseUnit was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native IsUnitPaused takes unit whichHero returns boolean\r\n */\r\nfunction IsUnitPaused(C: Context, L: lua_State): number {\r\n  const _whichHero = lua_touserdata(L, 1);\r\n  console.warn('IsUnitPaused was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetUnitPathing takes unit whichUnit, boolean flag returns nothing\r\n */\r\nfunction SetUnitPathing(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('SetUnitPathing was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ClearSelection takes nothing returns nothing\r\n */\r\nfunction ClearSelection(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('ClearSelection was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SelectUnit takes unit whichUnit, boolean flag returns nothing\r\n */\r\nfunction SelectUnit(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('SelectUnit was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetUnitPointValue takes unit whichUnit returns integer\r\n */\r\nfunction GetUnitPointValue(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitPointValue was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetUnitPointValueByType takes integer unitType returns integer\r\n */\r\nfunction GetUnitPointValueByType(C: Context, L: lua_State): number {\r\n  const _unitType = luaL_checkinteger(L, 1);\r\n  console.warn('GetUnitPointValueByType was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitAddItem takes unit whichUnit, item whichItem returns boolean\r\n */\r\nfunction UnitAddItem(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichItem = lua_touserdata(L, 2);\r\n  console.warn('UnitAddItem was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitAddItemById takes unit whichUnit, integer itemId returns item\r\n */\r\nfunction UnitAddItemById(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _itemId = luaL_checkinteger(L, 2);\r\n  console.warn('UnitAddItemById was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitAddItemToSlotById takes unit whichUnit, integer itemId, integer itemSlot returns boolean\r\n */\r\nfunction UnitAddItemToSlotById(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _itemId = luaL_checkinteger(L, 2);\r\n  const _itemSlot = luaL_checkinteger(L, 3);\r\n  console.warn('UnitAddItemToSlotById was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitRemoveItem takes unit whichUnit, item whichItem returns nothing\r\n */\r\nfunction UnitRemoveItem(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichItem = lua_touserdata(L, 2);\r\n  console.warn('UnitRemoveItem was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native UnitRemoveItemFromSlot takes unit whichUnit, integer itemSlot returns item\r\n */\r\nfunction UnitRemoveItemFromSlot(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _itemSlot = luaL_checkinteger(L, 2);\r\n  console.warn('UnitRemoveItemFromSlot was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitHasItem takes unit whichUnit, item whichItem returns boolean\r\n */\r\nfunction UnitHasItem(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichItem = lua_touserdata(L, 2);\r\n  console.warn('UnitHasItem was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitItemInSlot takes unit whichUnit, integer itemSlot returns item\r\n */\r\nfunction UnitItemInSlot(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _itemSlot = luaL_checkinteger(L, 2);\r\n  console.warn('UnitItemInSlot was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitInventorySize takes unit whichUnit returns integer\r\n */\r\nfunction UnitInventorySize(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('UnitInventorySize was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitDropItemPoint takes unit whichUnit, item whichItem, real x, real y returns boolean\r\n */\r\nfunction UnitDropItemPoint(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichItem = lua_touserdata(L, 2);\r\n  const _x = luaL_checknumber(L, 3);\r\n  const _y = luaL_checknumber(L, 4);\r\n  console.warn('UnitDropItemPoint was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitDropItemSlot takes unit whichUnit, item whichItem, integer slot returns boolean\r\n */\r\nfunction UnitDropItemSlot(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichItem = lua_touserdata(L, 2);\r\n  const _slot = luaL_checkinteger(L, 3);\r\n  console.warn('UnitDropItemSlot was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitDropItemTarget takes unit whichUnit, item whichItem, widget target returns boolean\r\n */\r\nfunction UnitDropItemTarget(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichItem = lua_touserdata(L, 2);\r\n  const _target = lua_touserdata(L, 3);\r\n  console.warn('UnitDropItemTarget was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitUseItem takes unit whichUnit, item whichItem returns boolean\r\n */\r\nfunction UnitUseItem(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichItem = lua_touserdata(L, 2);\r\n  console.warn('UnitUseItem was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitUseItemPoint takes unit whichUnit, item whichItem, real x, real y returns boolean\r\n */\r\nfunction UnitUseItemPoint(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichItem = lua_touserdata(L, 2);\r\n  const _x = luaL_checknumber(L, 3);\r\n  const _y = luaL_checknumber(L, 4);\r\n  console.warn('UnitUseItemPoint was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitUseItemTarget takes unit whichUnit, item whichItem, widget target returns boolean\r\n */\r\nfunction UnitUseItemTarget(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichItem = lua_touserdata(L, 2);\r\n  const _target = lua_touserdata(L, 3);\r\n  console.warn('UnitUseItemTarget was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetUnitX takes unit whichUnit returns real\r\n */\r\nfunction GetUnitX(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitX was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetUnitY takes unit whichUnit returns real\r\n */\r\nfunction GetUnitY(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitY was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetUnitLoc takes unit whichUnit returns location\r\n */\r\nfunction GetUnitLoc(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitLoc was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetUnitFacing takes unit whichUnit returns real\r\n */\r\nfunction GetUnitFacing(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitFacing was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetUnitMoveSpeed takes unit whichUnit returns real\r\n */\r\nfunction GetUnitMoveSpeed(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitMoveSpeed was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetUnitDefaultMoveSpeed takes unit whichUnit returns real\r\n */\r\nfunction GetUnitDefaultMoveSpeed(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitDefaultMoveSpeed was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetUnitState takes unit whichUnit, unitstate whichUnitState returns real\r\n */\r\nfunction GetUnitState(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichUnitState = lua_touserdata(L, 2);\r\n  console.warn('GetUnitState was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetOwningPlayer takes unit whichUnit returns player\r\n */\r\nfunction GetOwningPlayer(C: Context, L: lua_State): number {\r\n  const whichUnit = <JassUnit>lua_touserdata(L, 1);\r\n\r\n  lua_pushlightuserdata(L, whichUnit.player);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetUnitTypeId takes unit whichUnit returns integer\r\n */\r\nfunction GetUnitTypeId(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitTypeId was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetUnitRace takes unit whichUnit returns race\r\n */\r\nfunction GetUnitRace(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitRace was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetUnitName takes unit whichUnit returns string\r\n */\r\nfunction GetUnitName(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitName was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetUnitFoodUsed takes unit whichUnit returns integer\r\n */\r\nfunction GetUnitFoodUsed(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitFoodUsed was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetUnitFoodMade takes unit whichUnit returns integer\r\n */\r\nfunction GetUnitFoodMade(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitFoodMade was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetFoodMade takes integer unitId returns integer\r\n */\r\nfunction GetFoodMade(C: Context, L: lua_State): number {\r\n  const _unitId = luaL_checkinteger(L, 1);\r\n  console.warn('GetFoodMade was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetFoodUsed takes integer unitId returns integer\r\n */\r\nfunction GetFoodUsed(C: Context, L: lua_State): number {\r\n  const _unitId = luaL_checkinteger(L, 1);\r\n  console.warn('GetFoodUsed was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetUnitUseFood takes unit whichUnit, boolean useFood returns nothing\r\n */\r\nfunction SetUnitUseFood(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _useFood = lua_toboolean(L, 2);\r\n  console.warn('SetUnitUseFood was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * constant native GetUnitRallyPoint takes unit whichUnit returns location\r\n */\r\nfunction GetUnitRallyPoint(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitRallyPoint was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetUnitRallyUnit takes unit whichUnit returns unit\r\n */\r\nfunction GetUnitRallyUnit(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitRallyUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetUnitRallyDestructable takes unit whichUnit returns destructable\r\n */\r\nfunction GetUnitRallyDestructable(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitRallyDestructable was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitInGroup takes unit whichUnit, group whichGroup returns boolean\r\n */\r\nfunction IsUnitInGroup(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichGroup = lua_touserdata(L, 2);\r\n  console.warn('IsUnitInGroup was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitInForce takes unit whichUnit, force whichForce returns boolean\r\n */\r\nfunction IsUnitInForce(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichForce = lua_touserdata(L, 2);\r\n  console.warn('IsUnitInForce was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitOwnedByPlayer takes unit whichUnit, player whichPlayer returns boolean\r\n */\r\nfunction IsUnitOwnedByPlayer(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  console.warn('IsUnitOwnedByPlayer was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitAlly takes unit whichUnit, player whichPlayer returns boolean\r\n */\r\nfunction IsUnitAlly(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  console.warn('IsUnitAlly was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitEnemy takes unit whichUnit, player whichPlayer returns boolean\r\n */\r\nfunction IsUnitEnemy(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  console.warn('IsUnitEnemy was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitVisible takes unit whichUnit, player whichPlayer returns boolean\r\n */\r\nfunction IsUnitVisible(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  console.warn('IsUnitVisible was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitDetected takes unit whichUnit, player whichPlayer returns boolean\r\n */\r\nfunction IsUnitDetected(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  console.warn('IsUnitDetected was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitInvisible takes unit whichUnit, player whichPlayer returns boolean\r\n */\r\nfunction IsUnitInvisible(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  console.warn('IsUnitInvisible was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitFogged takes unit whichUnit, player whichPlayer returns boolean\r\n */\r\nfunction IsUnitFogged(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  console.warn('IsUnitFogged was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitMasked takes unit whichUnit, player whichPlayer returns boolean\r\n */\r\nfunction IsUnitMasked(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  console.warn('IsUnitMasked was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitSelected takes unit whichUnit, player whichPlayer returns boolean\r\n */\r\nfunction IsUnitSelected(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  console.warn('IsUnitSelected was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitRace takes unit whichUnit, race whichRace returns boolean\r\n */\r\nfunction IsUnitRace(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichRace = lua_touserdata(L, 2);\r\n  console.warn('IsUnitRace was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitType takes unit whichUnit, unittype whichUnitType returns boolean\r\n */\r\nfunction IsUnitType(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichUnitType = lua_touserdata(L, 2);\r\n  console.warn('IsUnitType was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnit takes unit whichUnit, unit whichSpecifiedUnit returns boolean\r\n */\r\nfunction IsUnit(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichSpecifiedUnit = lua_touserdata(L, 2);\r\n  console.warn('IsUnit was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitInRange takes unit whichUnit, unit otherUnit, real distance returns boolean\r\n */\r\nfunction IsUnitInRange(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _otherUnit = lua_touserdata(L, 2);\r\n  const _distance = luaL_checknumber(L, 3);\r\n  console.warn('IsUnitInRange was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitInRangeXY takes unit whichUnit, real x, real y, real distance returns boolean\r\n */\r\nfunction IsUnitInRangeXY(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _distance = luaL_checknumber(L, 4);\r\n  console.warn('IsUnitInRangeXY was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitInRangeLoc takes unit whichUnit, location whichLocation, real distance returns boolean\r\n */\r\nfunction IsUnitInRangeLoc(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichLocation = lua_touserdata(L, 2);\r\n  const _distance = luaL_checknumber(L, 3);\r\n  console.warn('IsUnitInRangeLoc was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitHidden takes unit whichUnit returns boolean\r\n */\r\nfunction IsUnitHidden(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('IsUnitHidden was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitIllusion takes unit whichUnit returns boolean\r\n */\r\nfunction IsUnitIllusion(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('IsUnitIllusion was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitInTransport takes unit whichUnit, unit whichTransport returns boolean\r\n */\r\nfunction IsUnitInTransport(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichTransport = lua_touserdata(L, 2);\r\n  console.warn('IsUnitInTransport was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitLoaded takes unit whichUnit returns boolean\r\n */\r\nfunction IsUnitLoaded(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('IsUnitLoaded was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsHeroUnitId takes integer unitId returns boolean\r\n */\r\nfunction IsHeroUnitId(C: Context, L: lua_State): number {\r\n  const _unitId = luaL_checkinteger(L, 1);\r\n  console.warn('IsHeroUnitId was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsUnitIdType takes integer unitId, unittype whichUnitType returns boolean\r\n */\r\nfunction IsUnitIdType(C: Context, L: lua_State): number {\r\n  const _unitId = luaL_checkinteger(L, 1);\r\n  const _whichUnitType = lua_touserdata(L, 2);\r\n  console.warn('IsUnitIdType was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitShareVision takes unit whichUnit, player whichPlayer, boolean share returns nothing\r\n */\r\nfunction UnitShareVision(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  const _share = lua_toboolean(L, 3);\r\n  console.warn('UnitShareVision was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native UnitSuspendDecay takes unit whichUnit, boolean suspend returns nothing\r\n */\r\nfunction UnitSuspendDecay(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _suspend = lua_toboolean(L, 2);\r\n  console.warn('UnitSuspendDecay was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native UnitAddType takes unit whichUnit, unittype whichUnitType returns boolean\r\n */\r\nfunction UnitAddType(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichUnitType = lua_touserdata(L, 2);\r\n  console.warn('UnitAddType was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitRemoveType takes unit whichUnit, unittype whichUnitType returns boolean\r\n */\r\nfunction UnitRemoveType(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _whichUnitType = lua_touserdata(L, 2);\r\n  console.warn('UnitRemoveType was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitAddAbility takes unit whichUnit, integer abilityId returns boolean\r\n */\r\nfunction UnitAddAbility(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _abilityId = luaL_checkinteger(L, 2);\r\n  console.warn('UnitAddAbility was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitRemoveAbility takes unit whichUnit, integer abilityId returns boolean\r\n */\r\nfunction UnitRemoveAbility(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _abilityId = luaL_checkinteger(L, 2);\r\n  console.warn('UnitRemoveAbility was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitMakeAbilityPermanent takes unit whichUnit, boolean permanent, integer abilityId returns boolean\r\n */\r\nfunction UnitMakeAbilityPermanent(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _permanent = lua_toboolean(L, 2);\r\n  const _abilityId = luaL_checkinteger(L, 3);\r\n  console.warn('UnitMakeAbilityPermanent was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitRemoveBuffs takes unit whichUnit, boolean removePositive, boolean removeNegative returns nothing\r\n */\r\nfunction UnitRemoveBuffs(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _removePositive = lua_toboolean(L, 2);\r\n  const _removeNegative = lua_toboolean(L, 3);\r\n  console.warn('UnitRemoveBuffs was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native UnitRemoveBuffsEx takes unit whichUnit, boolean removePositive, boolean removeNegative, boolean magic, boolean physical, boolean timedLife, boolean aura, boolean autoDispel returns nothing\r\n */\r\nfunction UnitRemoveBuffsEx(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _removePositive = lua_toboolean(L, 2);\r\n  const _removeNegative = lua_toboolean(L, 3);\r\n  const _magic = lua_toboolean(L, 4);\r\n  const _physical = lua_toboolean(L, 5);\r\n  const _timedLife = lua_toboolean(L, 6);\r\n  const _aura = lua_toboolean(L, 7);\r\n  const _autoDispel = lua_toboolean(L, 8);\r\n  console.warn('UnitRemoveBuffsEx was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native UnitHasBuffsEx takes unit whichUnit, boolean removePositive, boolean removeNegative, boolean magic, boolean physical, boolean timedLife, boolean aura, boolean autoDispel returns boolean\r\n */\r\nfunction UnitHasBuffsEx(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _removePositive = lua_toboolean(L, 2);\r\n  const _removeNegative = lua_toboolean(L, 3);\r\n  const _magic = lua_toboolean(L, 4);\r\n  const _physical = lua_toboolean(L, 5);\r\n  const _timedLife = lua_toboolean(L, 6);\r\n  const _aura = lua_toboolean(L, 7);\r\n  const _autoDispel = lua_toboolean(L, 8);\r\n  console.warn('UnitHasBuffsEx was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitCountBuffsEx takes unit whichUnit, boolean removePositive, boolean removeNegative, boolean magic, boolean physical, boolean timedLife, boolean aura, boolean autoDispel returns integer\r\n */\r\nfunction UnitCountBuffsEx(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _removePositive = lua_toboolean(L, 2);\r\n  const _removeNegative = lua_toboolean(L, 3);\r\n  const _magic = lua_toboolean(L, 4);\r\n  const _physical = lua_toboolean(L, 5);\r\n  const _timedLife = lua_toboolean(L, 6);\r\n  const _aura = lua_toboolean(L, 7);\r\n  const _autoDispel = lua_toboolean(L, 8);\r\n  console.warn('UnitCountBuffsEx was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitAddSleep takes unit whichUnit, boolean add returns nothing\r\n */\r\nfunction UnitAddSleep(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _add = lua_toboolean(L, 2);\r\n  console.warn('UnitAddSleep was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native UnitCanSleep takes unit whichUnit returns boolean\r\n */\r\nfunction UnitCanSleep(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('UnitCanSleep was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitAddSleepPerm takes unit whichUnit, boolean add returns nothing\r\n */\r\nfunction UnitAddSleepPerm(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _add = lua_toboolean(L, 2);\r\n  console.warn('UnitAddSleepPerm was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native UnitCanSleepPerm takes unit whichUnit returns boolean\r\n */\r\nfunction UnitCanSleepPerm(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('UnitCanSleepPerm was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitIsSleeping takes unit whichUnit returns boolean\r\n */\r\nfunction UnitIsSleeping(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('UnitIsSleeping was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitWakeUp takes unit whichUnit returns nothing\r\n */\r\nfunction UnitWakeUp(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('UnitWakeUp was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native UnitApplyTimedLife takes unit whichUnit, integer buffId, real duration returns nothing\r\n */\r\nfunction UnitApplyTimedLife(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _buffId = luaL_checkinteger(L, 2);\r\n  const _duration = luaL_checknumber(L, 3);\r\n  console.warn('UnitApplyTimedLife was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native UnitIgnoreAlarm takes unit whichUnit, boolean flag returns boolean\r\n */\r\nfunction UnitIgnoreAlarm(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('UnitIgnoreAlarm was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitIgnoreAlarmToggled takes unit whichUnit returns boolean\r\n */\r\nfunction UnitIgnoreAlarmToggled(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('UnitIgnoreAlarmToggled was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitResetCooldown takes unit whichUnit returns nothing\r\n */\r\nfunction UnitResetCooldown(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('UnitResetCooldown was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native UnitSetConstructionProgress takes unit whichUnit, integer constructionPercentage returns nothing\r\n */\r\nfunction UnitSetConstructionProgress(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _constructionPercentage = luaL_checkinteger(L, 2);\r\n  console.warn('UnitSetConstructionProgress was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native UnitSetUpgradeProgress takes unit whichUnit, integer upgradePercentage returns nothing\r\n */\r\nfunction UnitSetUpgradeProgress(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _upgradePercentage = luaL_checkinteger(L, 2);\r\n  console.warn('UnitSetUpgradeProgress was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native UnitPauseTimedLife takes unit whichUnit, boolean flag returns nothing\r\n */\r\nfunction UnitPauseTimedLife(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('UnitPauseTimedLife was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native UnitSetUsesAltIcon takes unit whichUnit, boolean flag returns nothing\r\n */\r\nfunction UnitSetUsesAltIcon(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('UnitSetUsesAltIcon was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native UnitDamagePoint takes unit whichUnit, real delay, real radius, real x, real y, real amount, boolean attack, boolean ranged, attacktype attackType, damagetype damageType, weapontype weaponType returns boolean\r\n */\r\nfunction UnitDamagePoint(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _delay = luaL_checknumber(L, 2);\r\n  const _radius = luaL_checknumber(L, 3);\r\n  const _x = luaL_checknumber(L, 4);\r\n  const _y = luaL_checknumber(L, 5);\r\n  const _amount = luaL_checknumber(L, 6);\r\n  const _attack = lua_toboolean(L, 7);\r\n  const _ranged = lua_toboolean(L, 8);\r\n  const _attackType = lua_touserdata(L, 9);\r\n  const _damageType = lua_touserdata(L, 10);\r\n  const _weaponType = lua_touserdata(L, 11);\r\n  console.warn('UnitDamagePoint was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native UnitDamageTarget takes unit whichUnit, widget target, real amount, boolean attack, boolean ranged, attacktype attackType, damagetype damageType, weapontype weaponType returns boolean\r\n */\r\nfunction UnitDamageTarget(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _target = lua_touserdata(L, 2);\r\n  const _amount = luaL_checknumber(L, 3);\r\n  const _attack = lua_toboolean(L, 4);\r\n  const _ranged = lua_toboolean(L, 5);\r\n  const _attackType = lua_touserdata(L, 6);\r\n  const _damageType = lua_touserdata(L, 7);\r\n  const _weaponType = lua_touserdata(L, 8);\r\n  console.warn('UnitDamageTarget was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IssueImmediateOrder takes unit whichUnit, string order returns boolean\r\n */\r\nfunction IssueImmediateOrder(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _order = luaL_checkstring(L, 2);\r\n  console.warn('IssueImmediateOrder was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IssueImmediateOrderById takes unit whichUnit, integer order returns boolean\r\n */\r\nfunction IssueImmediateOrderById(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _order = luaL_checkinteger(L, 2);\r\n  console.warn('IssueImmediateOrderById was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IssuePointOrder takes unit whichUnit, string order, real x, real y returns boolean\r\n */\r\nfunction IssuePointOrder(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _order = luaL_checkstring(L, 2);\r\n  const _x = luaL_checknumber(L, 3);\r\n  const _y = luaL_checknumber(L, 4);\r\n  console.warn('IssuePointOrder was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IssuePointOrderLoc takes unit whichUnit, string order, location whichLocation returns boolean\r\n */\r\nfunction IssuePointOrderLoc(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _order = luaL_checkstring(L, 2);\r\n  const _whichLocation = lua_touserdata(L, 3);\r\n  console.warn('IssuePointOrderLoc was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IssuePointOrderById takes unit whichUnit, integer order, real x, real y returns boolean\r\n */\r\nfunction IssuePointOrderById(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _order = luaL_checkinteger(L, 2);\r\n  const _x = luaL_checknumber(L, 3);\r\n  const _y = luaL_checknumber(L, 4);\r\n  console.warn('IssuePointOrderById was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IssuePointOrderByIdLoc takes unit whichUnit, integer order, location whichLocation returns boolean\r\n */\r\nfunction IssuePointOrderByIdLoc(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _order = luaL_checkinteger(L, 2);\r\n  const _whichLocation = lua_touserdata(L, 3);\r\n  console.warn('IssuePointOrderByIdLoc was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IssueTargetOrder takes unit whichUnit, string order, widget targetWidget returns boolean\r\n */\r\nfunction IssueTargetOrder(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _order = luaL_checkstring(L, 2);\r\n  const _targetWidget = lua_touserdata(L, 3);\r\n  console.warn('IssueTargetOrder was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IssueTargetOrderById takes unit whichUnit, integer order, widget targetWidget returns boolean\r\n */\r\nfunction IssueTargetOrderById(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _order = luaL_checkinteger(L, 2);\r\n  const _targetWidget = lua_touserdata(L, 3);\r\n  console.warn('IssueTargetOrderById was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IssueInstantPointOrder takes unit whichUnit, string order, real x, real y, widget instantTargetWidget returns boolean\r\n */\r\nfunction IssueInstantPointOrder(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _order = luaL_checkstring(L, 2);\r\n  const _x = luaL_checknumber(L, 3);\r\n  const _y = luaL_checknumber(L, 4);\r\n  const _instantTargetWidget = lua_touserdata(L, 5);\r\n  console.warn('IssueInstantPointOrder was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IssueInstantPointOrderById takes unit whichUnit, integer order, real x, real y, widget instantTargetWidget returns boolean\r\n */\r\nfunction IssueInstantPointOrderById(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _order = luaL_checkinteger(L, 2);\r\n  const _x = luaL_checknumber(L, 3);\r\n  const _y = luaL_checknumber(L, 4);\r\n  const _instantTargetWidget = lua_touserdata(L, 5);\r\n  console.warn('IssueInstantPointOrderById was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IssueInstantTargetOrder takes unit whichUnit, string order, widget targetWidget, widget instantTargetWidget returns boolean\r\n */\r\nfunction IssueInstantTargetOrder(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _order = luaL_checkstring(L, 2);\r\n  const _targetWidget = lua_touserdata(L, 3);\r\n  const _instantTargetWidget = lua_touserdata(L, 4);\r\n  console.warn('IssueInstantTargetOrder was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IssueInstantTargetOrderById takes unit whichUnit, integer order, widget targetWidget, widget instantTargetWidget returns boolean\r\n */\r\nfunction IssueInstantTargetOrderById(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _order = luaL_checkinteger(L, 2);\r\n  const _targetWidget = lua_touserdata(L, 3);\r\n  const _instantTargetWidget = lua_touserdata(L, 4);\r\n  console.warn('IssueInstantTargetOrderById was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IssueBuildOrder takes unit whichPeon, string unitToBuild, real x, real y returns boolean\r\n */\r\nfunction IssueBuildOrder(C: Context, L: lua_State): number {\r\n  const _whichPeon = lua_touserdata(L, 1);\r\n  const _unitToBuild = luaL_checkstring(L, 2);\r\n  const _x = luaL_checknumber(L, 3);\r\n  const _y = luaL_checknumber(L, 4);\r\n  console.warn('IssueBuildOrder was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IssueBuildOrderById takes unit whichPeon, integer unitId, real x, real y returns boolean\r\n */\r\nfunction IssueBuildOrderById(C: Context, L: lua_State): number {\r\n  const _whichPeon = lua_touserdata(L, 1);\r\n  const _unitId = luaL_checkinteger(L, 2);\r\n  const _x = luaL_checknumber(L, 3);\r\n  const _y = luaL_checknumber(L, 4);\r\n  console.warn('IssueBuildOrderById was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IssueNeutralImmediateOrder takes player forWhichPlayer, unit neutralStructure, string unitToBuild returns boolean\r\n */\r\nfunction IssueNeutralImmediateOrder(C: Context, L: lua_State): number {\r\n  const _forWhichPlayer = lua_touserdata(L, 1);\r\n  const _neutralStructure = lua_touserdata(L, 2);\r\n  const _unitToBuild = luaL_checkstring(L, 3);\r\n  console.warn('IssueNeutralImmediateOrder was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IssueNeutralImmediateOrderById takes player forWhichPlayer, unit neutralStructure, integer unitId returns boolean\r\n */\r\nfunction IssueNeutralImmediateOrderById(C: Context, L: lua_State): number {\r\n  const _forWhichPlayer = lua_touserdata(L, 1);\r\n  const _neutralStructure = lua_touserdata(L, 2);\r\n  const _unitId = luaL_checkinteger(L, 3);\r\n  console.warn('IssueNeutralImmediateOrderById was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IssueNeutralPointOrder takes player forWhichPlayer, unit neutralStructure, string unitToBuild, real x, real y returns boolean\r\n */\r\nfunction IssueNeutralPointOrder(C: Context, L: lua_State): number {\r\n  const _forWhichPlayer = lua_touserdata(L, 1);\r\n  const _neutralStructure = lua_touserdata(L, 2);\r\n  const _unitToBuild = luaL_checkstring(L, 3);\r\n  const _x = luaL_checknumber(L, 4);\r\n  const _y = luaL_checknumber(L, 5);\r\n  console.warn('IssueNeutralPointOrder was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IssueNeutralPointOrderById takes player forWhichPlayer, unit neutralStructure, integer unitId, real x, real y returns boolean\r\n */\r\nfunction IssueNeutralPointOrderById(C: Context, L: lua_State): number {\r\n  const _forWhichPlayer = lua_touserdata(L, 1);\r\n  const _neutralStructure = lua_touserdata(L, 2);\r\n  const _unitId = luaL_checkinteger(L, 3);\r\n  const _x = luaL_checknumber(L, 4);\r\n  const _y = luaL_checknumber(L, 5);\r\n  console.warn('IssueNeutralPointOrderById was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IssueNeutralTargetOrder takes player forWhichPlayer, unit neutralStructure, string unitToBuild, widget target returns boolean\r\n */\r\nfunction IssueNeutralTargetOrder(C: Context, L: lua_State): number {\r\n  const _forWhichPlayer = lua_touserdata(L, 1);\r\n  const _neutralStructure = lua_touserdata(L, 2);\r\n  const _unitToBuild = luaL_checkstring(L, 3);\r\n  const _target = lua_touserdata(L, 4);\r\n  console.warn('IssueNeutralTargetOrder was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IssueNeutralTargetOrderById takes player forWhichPlayer, unit neutralStructure, integer unitId, widget target returns boolean\r\n */\r\nfunction IssueNeutralTargetOrderById(C: Context, L: lua_State): number {\r\n  const _forWhichPlayer = lua_touserdata(L, 1);\r\n  const _neutralStructure = lua_touserdata(L, 2);\r\n  const _unitId = luaL_checkinteger(L, 3);\r\n  const _target = lua_touserdata(L, 4);\r\n  console.warn('IssueNeutralTargetOrderById was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetUnitCurrentOrder takes unit whichUnit returns integer\r\n */\r\nfunction GetUnitCurrentOrder(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitCurrentOrder was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetResourceAmount takes unit whichUnit, integer amount returns nothing\r\n */\r\nfunction SetResourceAmount(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _amount = luaL_checkinteger(L, 2);\r\n  console.warn('SetResourceAmount was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native AddResourceAmount takes unit whichUnit, integer amount returns nothing\r\n */\r\nfunction AddResourceAmount(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _amount = luaL_checkinteger(L, 2);\r\n  console.warn('AddResourceAmount was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetResourceAmount takes unit whichUnit returns integer\r\n */\r\nfunction GetResourceAmount(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetResourceAmount was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native WaygateGetDestinationX takes unit waygate returns real\r\n */\r\nfunction WaygateGetDestinationX(C: Context, L: lua_State): number {\r\n  const _waygate = lua_touserdata(L, 1);\r\n  console.warn('WaygateGetDestinationX was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native WaygateGetDestinationY takes unit waygate returns real\r\n */\r\nfunction WaygateGetDestinationY(C: Context, L: lua_State): number {\r\n  const _waygate = lua_touserdata(L, 1);\r\n  console.warn('WaygateGetDestinationY was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native WaygateSetDestination takes unit waygate, real x, real y returns nothing\r\n */\r\nfunction WaygateSetDestination(C: Context, L: lua_State): number {\r\n  const _waygate = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  console.warn('WaygateSetDestination was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native WaygateActivate takes unit waygate, boolean activate returns nothing\r\n */\r\nfunction WaygateActivate(C: Context, L: lua_State): number {\r\n  const _waygate = lua_touserdata(L, 1);\r\n  const _activate = lua_toboolean(L, 2);\r\n  console.warn('WaygateActivate was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native WaygateIsActive takes unit waygate returns boolean\r\n */\r\nfunction WaygateIsActive(C: Context, L: lua_State): number {\r\n  const _waygate = lua_touserdata(L, 1);\r\n  console.warn('WaygateIsActive was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native AddItemToAllStock takes integer itemId, integer currentStock, integer stockMax returns nothing\r\n */\r\nfunction AddItemToAllStock(C: Context, L: lua_State): number {\r\n  const _itemId = luaL_checkinteger(L, 1);\r\n  const _currentStock = luaL_checkinteger(L, 2);\r\n  const _stockMax = luaL_checkinteger(L, 3);\r\n  console.warn('AddItemToAllStock was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native AddItemToStock takes unit whichUnit, integer itemId, integer currentStock, integer stockMax returns nothing\r\n */\r\nfunction AddItemToStock(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _itemId = luaL_checkinteger(L, 2);\r\n  const _currentStock = luaL_checkinteger(L, 3);\r\n  const _stockMax = luaL_checkinteger(L, 4);\r\n  console.warn('AddItemToStock was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native AddUnitToAllStock takes integer unitId, integer currentStock, integer stockMax returns nothing\r\n */\r\nfunction AddUnitToAllStock(C: Context, L: lua_State): number {\r\n  const _unitId = luaL_checkinteger(L, 1);\r\n  const _currentStock = luaL_checkinteger(L, 2);\r\n  const _stockMax = luaL_checkinteger(L, 3);\r\n  console.warn('AddUnitToAllStock was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native AddUnitToStock takes unit whichUnit, integer unitId, integer currentStock, integer stockMax returns nothing\r\n */\r\nfunction AddUnitToStock(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _unitId = luaL_checkinteger(L, 2);\r\n  const _currentStock = luaL_checkinteger(L, 3);\r\n  const _stockMax = luaL_checkinteger(L, 4);\r\n  console.warn('AddUnitToStock was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native RemoveItemFromAllStock takes integer itemId returns nothing\r\n */\r\nfunction RemoveItemFromAllStock(C: Context, L: lua_State): number {\r\n  const _itemId = luaL_checkinteger(L, 1);\r\n  console.warn('RemoveItemFromAllStock was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native RemoveItemFromStock takes unit whichUnit, integer itemId returns nothing\r\n */\r\nfunction RemoveItemFromStock(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _itemId = luaL_checkinteger(L, 2);\r\n  console.warn('RemoveItemFromStock was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native RemoveUnitFromAllStock takes integer unitId returns nothing\r\n */\r\nfunction RemoveUnitFromAllStock(C: Context, L: lua_State): number {\r\n  const _unitId = luaL_checkinteger(L, 1);\r\n  console.warn('RemoveUnitFromAllStock was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native RemoveUnitFromStock takes unit whichUnit, integer unitId returns nothing\r\n */\r\nfunction RemoveUnitFromStock(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _unitId = luaL_checkinteger(L, 2);\r\n  console.warn('RemoveUnitFromStock was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetAllItemTypeSlots takes integer slots returns nothing\r\n */\r\nfunction SetAllItemTypeSlots(C: Context, L: lua_State): number {\r\n  const _slots = luaL_checkinteger(L, 1);\r\n  console.warn('SetAllItemTypeSlots was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetAllUnitTypeSlots takes integer slots returns nothing\r\n */\r\nfunction SetAllUnitTypeSlots(C: Context, L: lua_State): number {\r\n  const _slots = luaL_checkinteger(L, 1);\r\n  console.warn('SetAllUnitTypeSlots was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetItemTypeSlots takes unit whichUnit, integer slots returns nothing\r\n */\r\nfunction SetItemTypeSlots(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _slots = luaL_checkinteger(L, 2);\r\n  console.warn('SetItemTypeSlots was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitTypeSlots takes unit whichUnit, integer slots returns nothing\r\n */\r\nfunction SetUnitTypeSlots(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _slots = luaL_checkinteger(L, 2);\r\n  console.warn('SetUnitTypeSlots was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetUnitUserData takes unit whichUnit returns integer\r\n */\r\nfunction GetUnitUserData(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('GetUnitUserData was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetUnitUserData takes unit whichUnit, integer data returns nothing\r\n */\r\nfunction SetUnitUserData(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _data = luaL_checkinteger(L, 2);\r\n  console.warn('SetUnitUserData was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * constant native Player takes integer number returns player\r\n */\r\nfunction Player(C: Context, L: lua_State): number {\r\n  const number = luaL_checkinteger(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.players[number]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetLocalPlayer takes nothing returns player\r\n */\r\nfunction GetLocalPlayer(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetLocalPlayer was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsPlayerAlly takes player whichPlayer, player otherPlayer returns boolean\r\n */\r\nfunction IsPlayerAlly(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _otherPlayer = lua_touserdata(L, 2);\r\n  console.warn('IsPlayerAlly was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsPlayerEnemy takes player whichPlayer, player otherPlayer returns boolean\r\n */\r\nfunction IsPlayerEnemy(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _otherPlayer = lua_touserdata(L, 2);\r\n  console.warn('IsPlayerEnemy was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsPlayerInForce takes player whichPlayer, force whichForce returns boolean\r\n */\r\nfunction IsPlayerInForce(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _whichForce = lua_touserdata(L, 2);\r\n  console.warn('IsPlayerInForce was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsPlayerObserver takes player whichPlayer returns boolean\r\n */\r\nfunction IsPlayerObserver(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  console.warn('IsPlayerObserver was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsVisibleToPlayer takes real x, real y, player whichPlayer returns boolean\r\n */\r\nfunction IsVisibleToPlayer(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  const _whichPlayer = lua_touserdata(L, 3);\r\n  console.warn('IsVisibleToPlayer was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsLocationVisibleToPlayer takes location whichLocation, player whichPlayer returns boolean\r\n */\r\nfunction IsLocationVisibleToPlayer(C: Context, L: lua_State): number {\r\n  const _whichLocation = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  console.warn('IsLocationVisibleToPlayer was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsFoggedToPlayer takes real x, real y, player whichPlayer returns boolean\r\n */\r\nfunction IsFoggedToPlayer(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  const _whichPlayer = lua_touserdata(L, 3);\r\n  console.warn('IsFoggedToPlayer was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsLocationFoggedToPlayer takes location whichLocation, player whichPlayer returns boolean\r\n */\r\nfunction IsLocationFoggedToPlayer(C: Context, L: lua_State): number {\r\n  const _whichLocation = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  console.warn('IsLocationFoggedToPlayer was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsMaskedToPlayer takes real x, real y, player whichPlayer returns boolean\r\n */\r\nfunction IsMaskedToPlayer(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  const _whichPlayer = lua_touserdata(L, 3);\r\n  console.warn('IsMaskedToPlayer was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native IsLocationMaskedToPlayer takes location whichLocation, player whichPlayer returns boolean\r\n */\r\nfunction IsLocationMaskedToPlayer(C: Context, L: lua_State): number {\r\n  const _whichLocation = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  console.warn('IsLocationMaskedToPlayer was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetPlayerRace takes player whichPlayer returns race\r\n */\r\nfunction GetPlayerRace(C: Context, L: lua_State): number {\r\n  const whichPlayer = <JassPlayer>lua_touserdata(L, 1);\r\n\r\n  lua_pushlightuserdata(L, C.constantHandles.races[whichPlayer.racePreference]);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetPlayerId takes player whichPlayer returns integer\r\n */\r\nfunction GetPlayerId(C: Context, L: lua_State): number {\r\n  const whichPlayer = <JassPlayer>lua_touserdata(L, 1);\r\n\r\n  lua_pushinteger(L, whichPlayer.index);\r\n\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetPlayerUnitCount takes player whichPlayer, boolean includeIncomplete returns integer\r\n */\r\nfunction GetPlayerUnitCount(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _includeIncomplete = lua_toboolean(L, 2);\r\n  console.warn('GetPlayerUnitCount was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetPlayerTypedUnitCount takes player whichPlayer, string unitName, boolean includeIncomplete, boolean includeUpgrades returns integer\r\n */\r\nfunction GetPlayerTypedUnitCount(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _unitName = luaL_checkstring(L, 2);\r\n  const _includeIncomplete = lua_toboolean(L, 3);\r\n  const _includeUpgrades = lua_toboolean(L, 4);\r\n  console.warn('GetPlayerTypedUnitCount was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetPlayerStructureCount takes player whichPlayer, boolean includeIncomplete returns integer\r\n */\r\nfunction GetPlayerStructureCount(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _includeIncomplete = lua_toboolean(L, 2);\r\n  console.warn('GetPlayerStructureCount was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetPlayerState takes player whichPlayer, playerstate whichPlayerState returns integer\r\n */\r\nfunction GetPlayerState(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _whichPlayerState = lua_touserdata(L, 2);\r\n  console.warn('GetPlayerState was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetPlayerScore takes player whichPlayer, playerscore whichPlayerScore returns integer\r\n */\r\nfunction GetPlayerScore(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _whichPlayerScore = lua_touserdata(L, 2);\r\n  console.warn('GetPlayerScore was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetPlayerAlliance takes player sourcePlayer, player otherPlayer, alliancetype whichAllianceSetting returns boolean\r\n */\r\nfunction GetPlayerAlliance(C: Context, L: lua_State): number {\r\n  const _sourcePlayer = lua_touserdata(L, 1);\r\n  const _otherPlayer = lua_touserdata(L, 2);\r\n  const _whichAllianceSetting = lua_touserdata(L, 3);\r\n  console.warn('GetPlayerAlliance was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetPlayerHandicap takes player whichPlayer returns real\r\n */\r\nfunction GetPlayerHandicap(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  console.warn('GetPlayerHandicap was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetPlayerHandicapXP takes player whichPlayer returns real\r\n */\r\nfunction GetPlayerHandicapXP(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  console.warn('GetPlayerHandicapXP was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native SetPlayerHandicap takes player whichPlayer, real handicap returns nothing\r\n */\r\nfunction SetPlayerHandicap(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _handicap = luaL_checknumber(L, 2);\r\n  console.warn('SetPlayerHandicap was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * constant native SetPlayerHandicapXP takes player whichPlayer, real handicap returns nothing\r\n */\r\nfunction SetPlayerHandicapXP(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _handicap = luaL_checknumber(L, 2);\r\n  console.warn('SetPlayerHandicapXP was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * constant native SetPlayerTechMaxAllowed takes player whichPlayer, integer techid, integer maximum returns nothing\r\n */\r\nfunction SetPlayerTechMaxAllowed(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _techid = luaL_checkinteger(L, 2);\r\n  const _maximum = luaL_checkinteger(L, 3);\r\n  console.warn('SetPlayerTechMaxAllowed was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * constant native GetPlayerTechMaxAllowed takes player whichPlayer, integer techid returns integer\r\n */\r\nfunction GetPlayerTechMaxAllowed(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _techid = luaL_checkinteger(L, 2);\r\n  console.warn('GetPlayerTechMaxAllowed was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native AddPlayerTechResearched takes player whichPlayer, integer techid, integer levels returns nothing\r\n */\r\nfunction AddPlayerTechResearched(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _techid = luaL_checkinteger(L, 2);\r\n  const _levels = luaL_checkinteger(L, 3);\r\n  console.warn('AddPlayerTechResearched was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * constant native SetPlayerTechResearched takes player whichPlayer, integer techid, integer setToLevel returns nothing\r\n */\r\nfunction SetPlayerTechResearched(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _techid = luaL_checkinteger(L, 2);\r\n  const _setToLevel = luaL_checkinteger(L, 3);\r\n  console.warn('SetPlayerTechResearched was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * constant native GetPlayerTechResearched takes player whichPlayer, integer techid, boolean specificonly returns boolean\r\n */\r\nfunction GetPlayerTechResearched(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _techid = luaL_checkinteger(L, 2);\r\n  const _specificonly = lua_toboolean(L, 3);\r\n  console.warn('GetPlayerTechResearched was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetPlayerTechCount takes player whichPlayer, integer techid, boolean specificonly returns integer\r\n */\r\nfunction GetPlayerTechCount(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _techid = luaL_checkinteger(L, 2);\r\n  const _specificonly = lua_toboolean(L, 3);\r\n  console.warn('GetPlayerTechCount was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetPlayerUnitsOwner takes player whichPlayer, integer newOwner returns nothing\r\n */\r\nfunction SetPlayerUnitsOwner(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _newOwner = luaL_checkinteger(L, 2);\r\n  console.warn('SetPlayerUnitsOwner was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CripplePlayer takes player whichPlayer, force toWhichPlayers, boolean flag returns nothing\r\n */\r\nfunction CripplePlayer(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _toWhichPlayers = lua_touserdata(L, 2);\r\n  const _flag = lua_toboolean(L, 3);\r\n  console.warn('CripplePlayer was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetPlayerAbilityAvailable takes player whichPlayer, integer abilid, boolean avail returns nothing\r\n */\r\nfunction SetPlayerAbilityAvailable(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _abilid = luaL_checkinteger(L, 2);\r\n  const _avail = lua_toboolean(L, 3);\r\n  console.warn('SetPlayerAbilityAvailable was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetPlayerState takes player whichPlayer, playerstate whichPlayerState, integer value returns nothing\r\n */\r\nfunction SetPlayerState(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _whichPlayerState = lua_touserdata(L, 2);\r\n  const _value = luaL_checkinteger(L, 3);\r\n  console.warn('SetPlayerState was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native RemovePlayer takes player whichPlayer, playergameresult gameResult returns nothing\r\n */\r\nfunction RemovePlayer(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _gameResult = lua_touserdata(L, 2);\r\n  console.warn('RemovePlayer was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CachePlayerHeroData takes player whichPlayer returns nothing\r\n */\r\nfunction CachePlayerHeroData(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  console.warn('CachePlayerHeroData was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetFogStateRect takes player forWhichPlayer, fogstate whichState, rect where, boolean useSharedVision returns nothing\r\n */\r\nfunction SetFogStateRect(C: Context, L: lua_State): number {\r\n  const _forWhichPlayer = lua_touserdata(L, 1);\r\n  const _whichState = lua_touserdata(L, 2);\r\n  const _where = lua_touserdata(L, 3);\r\n  const _useSharedVision = lua_toboolean(L, 4);\r\n  console.warn('SetFogStateRect was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetFogStateRadius takes player forWhichPlayer, fogstate whichState, real centerx, real centerY, real radius, boolean useSharedVision returns nothing\r\n */\r\nfunction SetFogStateRadius(C: Context, L: lua_State): number {\r\n  const _forWhichPlayer = lua_touserdata(L, 1);\r\n  const _whichState = lua_touserdata(L, 2);\r\n  const _centerx = luaL_checknumber(L, 3);\r\n  const _centerY = luaL_checknumber(L, 4);\r\n  const _radius = luaL_checknumber(L, 5);\r\n  const _useSharedVision = lua_toboolean(L, 6);\r\n  console.warn('SetFogStateRadius was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetFogStateRadiusLoc takes player forWhichPlayer, fogstate whichState, location center, real radius, boolean useSharedVision returns nothing\r\n */\r\nfunction SetFogStateRadiusLoc(C: Context, L: lua_State): number {\r\n  const _forWhichPlayer = lua_touserdata(L, 1);\r\n  const _whichState = lua_touserdata(L, 2);\r\n  const _center = lua_touserdata(L, 3);\r\n  const _radius = luaL_checknumber(L, 4);\r\n  const _useSharedVision = lua_toboolean(L, 5);\r\n  console.warn('SetFogStateRadiusLoc was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native FogMaskEnable takes boolean enable returns nothing\r\n */\r\nfunction FogMaskEnable(C: Context, L: lua_State): number {\r\n  const _enable = lua_toboolean(L, 1);\r\n  console.warn('FogMaskEnable was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native IsFogMaskEnabled takes nothing returns boolean\r\n */\r\nfunction IsFogMaskEnabled(C: Context, L: lua_State): number {\r\n\r\n  console.warn('IsFogMaskEnabled was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native FogEnable takes boolean enable returns nothing\r\n */\r\nfunction FogEnable(C: Context, L: lua_State): number {\r\n  const _enable = lua_toboolean(L, 1);\r\n  console.warn('FogEnable was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native IsFogEnabled takes nothing returns boolean\r\n */\r\nfunction IsFogEnabled(C: Context, L: lua_State): number {\r\n\r\n  console.warn('IsFogEnabled was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateFogModifierRect takes player forWhichPlayer, fogstate whichState, rect where, boolean useSharedVision, boolean afterUnits returns fogmodifier\r\n */\r\nfunction CreateFogModifierRect(C: Context, L: lua_State): number {\r\n  const _forWhichPlayer = lua_touserdata(L, 1);\r\n  const _whichState = lua_touserdata(L, 2);\r\n  const _where = lua_touserdata(L, 3);\r\n  const _useSharedVision = lua_toboolean(L, 4);\r\n  const _afterUnits = lua_toboolean(L, 5);\r\n  console.warn('CreateFogModifierRect was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateFogModifierRadius takes player forWhichPlayer, fogstate whichState, real centerx, real centerY, real radius, boolean useSharedVision, boolean afterUnits returns fogmodifier\r\n */\r\nfunction CreateFogModifierRadius(C: Context, L: lua_State): number {\r\n  const _forWhichPlayer = lua_touserdata(L, 1);\r\n  const _whichState = lua_touserdata(L, 2);\r\n  const _centerx = luaL_checknumber(L, 3);\r\n  const _centerY = luaL_checknumber(L, 4);\r\n  const _radius = luaL_checknumber(L, 5);\r\n  const _useSharedVision = lua_toboolean(L, 6);\r\n  const _afterUnits = lua_toboolean(L, 7);\r\n  console.warn('CreateFogModifierRadius was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateFogModifierRadiusLoc takes player forWhichPlayer, fogstate whichState, location center, real radius, boolean useSharedVision, boolean afterUnits returns fogmodifier\r\n */\r\nfunction CreateFogModifierRadiusLoc(C: Context, L: lua_State): number {\r\n  const _forWhichPlayer = lua_touserdata(L, 1);\r\n  const _whichState = lua_touserdata(L, 2);\r\n  const _center = lua_touserdata(L, 3);\r\n  const _radius = luaL_checknumber(L, 4);\r\n  const _useSharedVision = lua_toboolean(L, 5);\r\n  const _afterUnits = lua_toboolean(L, 6);\r\n  console.warn('CreateFogModifierRadiusLoc was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DestroyFogModifier takes fogmodifier whichFogModifier returns nothing\r\n */\r\nfunction DestroyFogModifier(C: Context, L: lua_State): number {\r\n  const _whichFogModifier = lua_touserdata(L, 1);\r\n  console.warn('DestroyFogModifier was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native FogModifierStart takes fogmodifier whichFogModifier returns nothing\r\n */\r\nfunction FogModifierStart(C: Context, L: lua_State): number {\r\n  const _whichFogModifier = lua_touserdata(L, 1);\r\n  console.warn('FogModifierStart was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native FogModifierStop takes fogmodifier whichFogModifier returns nothing\r\n */\r\nfunction FogModifierStop(C: Context, L: lua_State): number {\r\n  const _whichFogModifier = lua_touserdata(L, 1);\r\n  console.warn('FogModifierStop was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native VersionGet takes nothing returns version\r\n */\r\nfunction VersionGet(C: Context, L: lua_State): number {\r\n\r\n  console.warn('VersionGet was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native VersionCompatible takes version whichVersion returns boolean\r\n */\r\nfunction VersionCompatible(C: Context, L: lua_State): number {\r\n  const _whichVersion = lua_touserdata(L, 1);\r\n  console.warn('VersionCompatible was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native VersionSupported takes version whichVersion returns boolean\r\n */\r\nfunction VersionSupported(C: Context, L: lua_State): number {\r\n  const _whichVersion = lua_touserdata(L, 1);\r\n  console.warn('VersionSupported was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native EndGame takes boolean doScoreScreen returns nothing\r\n */\r\nfunction EndGame(C: Context, L: lua_State): number {\r\n  const _doScoreScreen = lua_toboolean(L, 1);\r\n  console.warn('EndGame was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ChangeLevel takes string newLevel, boolean doScoreScreen returns nothing\r\n */\r\nfunction ChangeLevel(C: Context, L: lua_State): number {\r\n  const _newLevel = luaL_checkstring(L, 1);\r\n  const _doScoreScreen = lua_toboolean(L, 2);\r\n  console.warn('ChangeLevel was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native RestartGame takes boolean doScoreScreen returns nothing\r\n */\r\nfunction RestartGame(C: Context, L: lua_State): number {\r\n  const _doScoreScreen = lua_toboolean(L, 1);\r\n  console.warn('RestartGame was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ReloadGame takes nothing returns nothing\r\n */\r\nfunction ReloadGame(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('ReloadGame was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCampaignMenuRace takes race r returns nothing\r\n */\r\nfunction SetCampaignMenuRace(C: Context, L: lua_State): number {\r\n  const _r = lua_touserdata(L, 1);\r\n  console.warn('SetCampaignMenuRace was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCampaignMenuRaceEx takes integer campaignIndex returns nothing\r\n */\r\nfunction SetCampaignMenuRaceEx(C: Context, L: lua_State): number {\r\n  const _campaignIndex = luaL_checkinteger(L, 1);\r\n  console.warn('SetCampaignMenuRaceEx was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ForceCampaignSelectScreen takes nothing returns nothing\r\n */\r\nfunction ForceCampaignSelectScreen(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('ForceCampaignSelectScreen was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native LoadGame takes string saveFileName, boolean doScoreScreen returns nothing\r\n */\r\nfunction LoadGame(C: Context, L: lua_State): number {\r\n  const _saveFileName = luaL_checkstring(L, 1);\r\n  const _doScoreScreen = lua_toboolean(L, 2);\r\n  console.warn('LoadGame was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SaveGame takes string saveFileName returns nothing\r\n */\r\nfunction SaveGame(C: Context, L: lua_State): number {\r\n  const _saveFileName = luaL_checkstring(L, 1);\r\n  console.warn('SaveGame was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native RenameSaveDirectory takes string sourceDirName, string destDirName returns boolean\r\n */\r\nfunction RenameSaveDirectory(C: Context, L: lua_State): number {\r\n  const _sourceDirName = luaL_checkstring(L, 1);\r\n  const _destDirName = luaL_checkstring(L, 2);\r\n  console.warn('RenameSaveDirectory was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native RemoveSaveDirectory takes string sourceDirName returns boolean\r\n */\r\nfunction RemoveSaveDirectory(C: Context, L: lua_State): number {\r\n  const _sourceDirName = luaL_checkstring(L, 1);\r\n  console.warn('RemoveSaveDirectory was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CopySaveGame takes string sourceSaveName, string destSaveName returns boolean\r\n */\r\nfunction CopySaveGame(C: Context, L: lua_State): number {\r\n  const _sourceSaveName = luaL_checkstring(L, 1);\r\n  const _destSaveName = luaL_checkstring(L, 2);\r\n  console.warn('CopySaveGame was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveGameExists takes string saveName returns boolean\r\n */\r\nfunction SaveGameExists(C: Context, L: lua_State): number {\r\n  const _saveName = luaL_checkstring(L, 1);\r\n  console.warn('SaveGameExists was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SyncSelections takes nothing returns nothing\r\n */\r\nfunction SyncSelections(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('SyncSelections was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetFloatGameState takes fgamestate whichFloatGameState, real value returns nothing\r\n */\r\nfunction SetFloatGameState(C: Context, L: lua_State): number {\r\n  const _whichFloatGameState = lua_touserdata(L, 1);\r\n  const _value = luaL_checknumber(L, 2);\r\n  console.warn('SetFloatGameState was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * constant native GetFloatGameState takes fgamestate whichFloatGameState returns real\r\n */\r\nfunction GetFloatGameState(C: Context, L: lua_State): number {\r\n  const _whichFloatGameState = lua_touserdata(L, 1);\r\n  console.warn('GetFloatGameState was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetIntegerGameState takes igamestate whichIntegerGameState, integer value returns nothing\r\n */\r\nfunction SetIntegerGameState(C: Context, L: lua_State): number {\r\n  const _whichIntegerGameState = lua_touserdata(L, 1);\r\n  const _value = luaL_checkinteger(L, 2);\r\n  console.warn('SetIntegerGameState was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * constant native GetIntegerGameState takes igamestate whichIntegerGameState returns integer\r\n */\r\nfunction GetIntegerGameState(C: Context, L: lua_State): number {\r\n  const _whichIntegerGameState = lua_touserdata(L, 1);\r\n  console.warn('GetIntegerGameState was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetTutorialCleared takes boolean cleared returns nothing\r\n */\r\nfunction SetTutorialCleared(C: Context, L: lua_State): number {\r\n  const _cleared = lua_toboolean(L, 1);\r\n  console.warn('SetTutorialCleared was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetMissionAvailable takes integer campaignNumber, integer missionNumber, boolean available returns nothing\r\n */\r\nfunction SetMissionAvailable(C: Context, L: lua_State): number {\r\n  const _campaignNumber = luaL_checkinteger(L, 1);\r\n  const _missionNumber = luaL_checkinteger(L, 2);\r\n  const _available = lua_toboolean(L, 3);\r\n  console.warn('SetMissionAvailable was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCampaignAvailable takes integer campaignNumber, boolean available returns nothing\r\n */\r\nfunction SetCampaignAvailable(C: Context, L: lua_State): number {\r\n  const _campaignNumber = luaL_checkinteger(L, 1);\r\n  const _available = lua_toboolean(L, 2);\r\n  console.warn('SetCampaignAvailable was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetOpCinematicAvailable takes integer campaignNumber, boolean available returns nothing\r\n */\r\nfunction SetOpCinematicAvailable(C: Context, L: lua_State): number {\r\n  const _campaignNumber = luaL_checkinteger(L, 1);\r\n  const _available = lua_toboolean(L, 2);\r\n  console.warn('SetOpCinematicAvailable was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetEdCinematicAvailable takes integer campaignNumber, boolean available returns nothing\r\n */\r\nfunction SetEdCinematicAvailable(C: Context, L: lua_State): number {\r\n  const _campaignNumber = luaL_checkinteger(L, 1);\r\n  const _available = lua_toboolean(L, 2);\r\n  console.warn('SetEdCinematicAvailable was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetDefaultDifficulty takes nothing returns gamedifficulty\r\n */\r\nfunction GetDefaultDifficulty(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetDefaultDifficulty was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetDefaultDifficulty takes gamedifficulty g returns nothing\r\n */\r\nfunction SetDefaultDifficulty(C: Context, L: lua_State): number {\r\n  const _g = lua_touserdata(L, 1);\r\n  console.warn('SetDefaultDifficulty was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCustomCampaignButtonVisible takes integer whichButton, boolean visible returns nothing\r\n */\r\nfunction SetCustomCampaignButtonVisible(C: Context, L: lua_State): number {\r\n  const _whichButton = luaL_checkinteger(L, 1);\r\n  const _visible = lua_toboolean(L, 2);\r\n  console.warn('SetCustomCampaignButtonVisible was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetCustomCampaignButtonVisible takes integer whichButton returns boolean\r\n */\r\nfunction GetCustomCampaignButtonVisible(C: Context, L: lua_State): number {\r\n  const _whichButton = luaL_checkinteger(L, 1);\r\n  console.warn('GetCustomCampaignButtonVisible was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DoNotSaveReplay takes nothing returns nothing\r\n */\r\nfunction DoNotSaveReplay(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('DoNotSaveReplay was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native DialogCreate takes nothing returns dialog\r\n */\r\nfunction DialogCreate(C: Context, L: lua_State): number {\r\n\r\n  console.warn('DialogCreate was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DialogDestroy takes dialog whichDialog returns nothing\r\n */\r\nfunction DialogDestroy(C: Context, L: lua_State): number {\r\n  const _whichDialog = lua_touserdata(L, 1);\r\n  console.warn('DialogDestroy was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native DialogClear takes dialog whichDialog returns nothing\r\n */\r\nfunction DialogClear(C: Context, L: lua_State): number {\r\n  const _whichDialog = lua_touserdata(L, 1);\r\n  console.warn('DialogClear was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native DialogSetMessage takes dialog whichDialog, string messageText returns nothing\r\n */\r\nfunction DialogSetMessage(C: Context, L: lua_State): number {\r\n  const _whichDialog = lua_touserdata(L, 1);\r\n  const _messageText = luaL_checkstring(L, 2);\r\n  console.warn('DialogSetMessage was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native DialogAddButton takes dialog whichDialog, string buttonText, integer hotkey returns button\r\n */\r\nfunction DialogAddButton(C: Context, L: lua_State): number {\r\n  const _whichDialog = lua_touserdata(L, 1);\r\n  const _buttonText = luaL_checkstring(L, 2);\r\n  const _hotkey = luaL_checkinteger(L, 3);\r\n  console.warn('DialogAddButton was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DialogAddQuitButton takes dialog whichDialog, boolean doScoreScreen, string buttonText, integer hotkey returns button\r\n */\r\nfunction DialogAddQuitButton(C: Context, L: lua_State): number {\r\n  const _whichDialog = lua_touserdata(L, 1);\r\n  const _doScoreScreen = lua_toboolean(L, 2);\r\n  const _buttonText = luaL_checkstring(L, 3);\r\n  const _hotkey = luaL_checkinteger(L, 4);\r\n  console.warn('DialogAddQuitButton was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DialogDisplay takes player whichPlayer, dialog whichDialog, boolean flag returns nothing\r\n */\r\nfunction DialogDisplay(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _whichDialog = lua_touserdata(L, 2);\r\n  const _flag = lua_toboolean(L, 3);\r\n  console.warn('DialogDisplay was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ReloadGameCachesFromDisk takes nothing returns boolean\r\n */\r\nfunction ReloadGameCachesFromDisk(C: Context, L: lua_State): number {\r\n\r\n  console.warn('ReloadGameCachesFromDisk was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native InitGameCache takes string campaignFile returns gamecache\r\n */\r\nfunction InitGameCache(C: Context, L: lua_State): number {\r\n  const _campaignFile = luaL_checkstring(L, 1);\r\n  console.warn('InitGameCache was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveGameCache takes gamecache whichCache returns boolean\r\n */\r\nfunction SaveGameCache(C: Context, L: lua_State): number {\r\n  const _whichCache = lua_touserdata(L, 1);\r\n  console.warn('SaveGameCache was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native StoreInteger takes gamecache cache, string missionKey, string key, integer value returns nothing\r\n */\r\nfunction StoreInteger(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  const _value = luaL_checkinteger(L, 4);\r\n  console.warn('StoreInteger was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native StoreReal takes gamecache cache, string missionKey, string key, real value returns nothing\r\n */\r\nfunction StoreReal(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  const _value = luaL_checknumber(L, 4);\r\n  console.warn('StoreReal was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native StoreBoolean takes gamecache cache, string missionKey, string key, boolean value returns nothing\r\n */\r\nfunction StoreBoolean(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  const _value = lua_toboolean(L, 4);\r\n  console.warn('StoreBoolean was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native StoreUnit takes gamecache cache, string missionKey, string key, unit whichUnit returns boolean\r\n */\r\nfunction StoreUnit(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  const _whichUnit = lua_touserdata(L, 4);\r\n  console.warn('StoreUnit was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native StoreString takes gamecache cache, string missionKey, string key, string value returns boolean\r\n */\r\nfunction StoreString(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  const _value = luaL_checkstring(L, 4);\r\n  console.warn('StoreString was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SyncStoredInteger takes gamecache cache, string missionKey, string key returns nothing\r\n */\r\nfunction SyncStoredInteger(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  console.warn('SyncStoredInteger was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SyncStoredReal takes gamecache cache, string missionKey, string key returns nothing\r\n */\r\nfunction SyncStoredReal(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  console.warn('SyncStoredReal was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SyncStoredBoolean takes gamecache cache, string missionKey, string key returns nothing\r\n */\r\nfunction SyncStoredBoolean(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  console.warn('SyncStoredBoolean was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SyncStoredUnit takes gamecache cache, string missionKey, string key returns nothing\r\n */\r\nfunction SyncStoredUnit(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  console.warn('SyncStoredUnit was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SyncStoredString takes gamecache cache, string missionKey, string key returns nothing\r\n */\r\nfunction SyncStoredString(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  console.warn('SyncStoredString was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native HaveStoredInteger takes gamecache cache, string missionKey, string key returns boolean\r\n */\r\nfunction HaveStoredInteger(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  console.warn('HaveStoredInteger was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native HaveStoredReal takes gamecache cache, string missionKey, string key returns boolean\r\n */\r\nfunction HaveStoredReal(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  console.warn('HaveStoredReal was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native HaveStoredBoolean takes gamecache cache, string missionKey, string key returns boolean\r\n */\r\nfunction HaveStoredBoolean(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  console.warn('HaveStoredBoolean was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native HaveStoredUnit takes gamecache cache, string missionKey, string key returns boolean\r\n */\r\nfunction HaveStoredUnit(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  console.warn('HaveStoredUnit was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native HaveStoredString takes gamecache cache, string missionKey, string key returns boolean\r\n */\r\nfunction HaveStoredString(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  console.warn('HaveStoredString was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native FlushGameCache takes gamecache cache returns nothing\r\n */\r\nfunction FlushGameCache(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  console.warn('FlushGameCache was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native FlushStoredMission takes gamecache cache, string missionKey returns nothing\r\n */\r\nfunction FlushStoredMission(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  console.warn('FlushStoredMission was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native FlushStoredInteger takes gamecache cache, string missionKey, string key returns nothing\r\n */\r\nfunction FlushStoredInteger(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  console.warn('FlushStoredInteger was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native FlushStoredReal takes gamecache cache, string missionKey, string key returns nothing\r\n */\r\nfunction FlushStoredReal(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  console.warn('FlushStoredReal was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native FlushStoredBoolean takes gamecache cache, string missionKey, string key returns nothing\r\n */\r\nfunction FlushStoredBoolean(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  console.warn('FlushStoredBoolean was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native FlushStoredUnit takes gamecache cache, string missionKey, string key returns nothing\r\n */\r\nfunction FlushStoredUnit(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  console.warn('FlushStoredUnit was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native FlushStoredString takes gamecache cache, string missionKey, string key returns nothing\r\n */\r\nfunction FlushStoredString(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  console.warn('FlushStoredString was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetStoredInteger takes gamecache cache, string missionKey, string key returns integer\r\n */\r\nfunction GetStoredInteger(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  console.warn('GetStoredInteger was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetStoredReal takes gamecache cache, string missionKey, string key returns real\r\n */\r\nfunction GetStoredReal(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  console.warn('GetStoredReal was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetStoredBoolean takes gamecache cache, string missionKey, string key returns boolean\r\n */\r\nfunction GetStoredBoolean(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  console.warn('GetStoredBoolean was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetStoredString takes gamecache cache, string missionKey, string key returns string\r\n */\r\nfunction GetStoredString(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  console.warn('GetStoredString was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native RestoreUnit takes gamecache cache, string missionKey, string key, player forWhichPlayer, real x, real y, real facing returns unit\r\n */\r\nfunction RestoreUnit(C: Context, L: lua_State): number {\r\n  const _cache = lua_touserdata(L, 1);\r\n  const _missionKey = luaL_checkstring(L, 2);\r\n  const _key = luaL_checkstring(L, 3);\r\n  const _forWhichPlayer = lua_touserdata(L, 4);\r\n  const _x = luaL_checknumber(L, 5);\r\n  const _y = luaL_checknumber(L, 6);\r\n  const _facing = luaL_checknumber(L, 7);\r\n  console.warn('RestoreUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native InitHashtable takes nothing returns hashtable\r\n */\r\nfunction InitHashtable(C: Context, L: lua_State): number {\r\n\r\n  console.warn('InitHashtable was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveInteger takes hashtable table, integer parentKey, integer childKey, integer value returns nothing\r\n */\r\nfunction SaveInteger(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _value = luaL_checkinteger(L, 4);\r\n  console.warn('SaveInteger was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SaveReal takes hashtable table, integer parentKey, integer childKey, real value returns nothing\r\n */\r\nfunction SaveReal(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _value = luaL_checknumber(L, 4);\r\n  console.warn('SaveReal was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SaveBoolean takes hashtable table, integer parentKey, integer childKey, boolean value returns nothing\r\n */\r\nfunction SaveBoolean(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _value = lua_toboolean(L, 4);\r\n  console.warn('SaveBoolean was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SaveStr takes hashtable table, integer parentKey, integer childKey, string value returns boolean\r\n */\r\nfunction SaveStr(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _value = luaL_checkstring(L, 4);\r\n  console.warn('SaveStr was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SavePlayerHandle takes hashtable table, integer parentKey, integer childKey, player whichPlayer returns boolean\r\n */\r\nfunction SavePlayerHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichPlayer = lua_touserdata(L, 4);\r\n  console.warn('SavePlayerHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveWidgetHandle takes hashtable table, integer parentKey, integer childKey, widget whichWidget returns boolean\r\n */\r\nfunction SaveWidgetHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichWidget = lua_touserdata(L, 4);\r\n  console.warn('SaveWidgetHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveDestructableHandle takes hashtable table, integer parentKey, integer childKey, destructable whichDestructable returns boolean\r\n */\r\nfunction SaveDestructableHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichDestructable = lua_touserdata(L, 4);\r\n  console.warn('SaveDestructableHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveItemHandle takes hashtable table, integer parentKey, integer childKey, item whichItem returns boolean\r\n */\r\nfunction SaveItemHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichItem = lua_touserdata(L, 4);\r\n  console.warn('SaveItemHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveUnitHandle takes hashtable table, integer parentKey, integer childKey, unit whichUnit returns boolean\r\n */\r\nfunction SaveUnitHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichUnit = lua_touserdata(L, 4);\r\n  console.warn('SaveUnitHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveAbilityHandle takes hashtable table, integer parentKey, integer childKey, ability whichAbility returns boolean\r\n */\r\nfunction SaveAbilityHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichAbility = lua_touserdata(L, 4);\r\n  console.warn('SaveAbilityHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveTimerHandle takes hashtable table, integer parentKey, integer childKey, timer whichTimer returns boolean\r\n */\r\nfunction SaveTimerHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichTimer = lua_touserdata(L, 4);\r\n  console.warn('SaveTimerHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveTriggerHandle takes hashtable table, integer parentKey, integer childKey, trigger whichTrigger returns boolean\r\n */\r\nfunction SaveTriggerHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichTrigger = lua_touserdata(L, 4);\r\n  console.warn('SaveTriggerHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveTriggerConditionHandle takes hashtable table, integer parentKey, integer childKey, triggercondition whichTriggercondition returns boolean\r\n */\r\nfunction SaveTriggerConditionHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichTriggercondition = lua_touserdata(L, 4);\r\n  console.warn('SaveTriggerConditionHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveTriggerActionHandle takes hashtable table, integer parentKey, integer childKey, triggeraction whichTriggeraction returns boolean\r\n */\r\nfunction SaveTriggerActionHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichTriggeraction = lua_touserdata(L, 4);\r\n  console.warn('SaveTriggerActionHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveTriggerEventHandle takes hashtable table, integer parentKey, integer childKey, event whichEvent returns boolean\r\n */\r\nfunction SaveTriggerEventHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichEvent = lua_touserdata(L, 4);\r\n  console.warn('SaveTriggerEventHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveForceHandle takes hashtable table, integer parentKey, integer childKey, force whichForce returns boolean\r\n */\r\nfunction SaveForceHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichForce = lua_touserdata(L, 4);\r\n  console.warn('SaveForceHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveGroupHandle takes hashtable table, integer parentKey, integer childKey, group whichGroup returns boolean\r\n */\r\nfunction SaveGroupHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichGroup = lua_touserdata(L, 4);\r\n  console.warn('SaveGroupHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveLocationHandle takes hashtable table, integer parentKey, integer childKey, location whichLocation returns boolean\r\n */\r\nfunction SaveLocationHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichLocation = lua_touserdata(L, 4);\r\n  console.warn('SaveLocationHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveRectHandle takes hashtable table, integer parentKey, integer childKey, rect whichRect returns boolean\r\n */\r\nfunction SaveRectHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichRect = lua_touserdata(L, 4);\r\n  console.warn('SaveRectHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveBooleanExprHandle takes hashtable table, integer parentKey, integer childKey, boolexpr whichBoolexpr returns boolean\r\n */\r\nfunction SaveBooleanExprHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichBoolexpr = lua_touserdata(L, 4);\r\n  console.warn('SaveBooleanExprHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveSoundHandle takes hashtable table, integer parentKey, integer childKey, sound whichSound returns boolean\r\n */\r\nfunction SaveSoundHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichSound = lua_touserdata(L, 4);\r\n  console.warn('SaveSoundHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveEffectHandle takes hashtable table, integer parentKey, integer childKey, effect whichEffect returns boolean\r\n */\r\nfunction SaveEffectHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichEffect = lua_touserdata(L, 4);\r\n  console.warn('SaveEffectHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveUnitPoolHandle takes hashtable table, integer parentKey, integer childKey, unitpool whichUnitpool returns boolean\r\n */\r\nfunction SaveUnitPoolHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichUnitpool = lua_touserdata(L, 4);\r\n  console.warn('SaveUnitPoolHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveItemPoolHandle takes hashtable table, integer parentKey, integer childKey, itempool whichItempool returns boolean\r\n */\r\nfunction SaveItemPoolHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichItempool = lua_touserdata(L, 4);\r\n  console.warn('SaveItemPoolHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveQuestHandle takes hashtable table, integer parentKey, integer childKey, quest whichQuest returns boolean\r\n */\r\nfunction SaveQuestHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichQuest = lua_touserdata(L, 4);\r\n  console.warn('SaveQuestHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveQuestItemHandle takes hashtable table, integer parentKey, integer childKey, questitem whichQuestitem returns boolean\r\n */\r\nfunction SaveQuestItemHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichQuestitem = lua_touserdata(L, 4);\r\n  console.warn('SaveQuestItemHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveDefeatConditionHandle takes hashtable table, integer parentKey, integer childKey, defeatcondition whichDefeatcondition returns boolean\r\n */\r\nfunction SaveDefeatConditionHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichDefeatcondition = lua_touserdata(L, 4);\r\n  console.warn('SaveDefeatConditionHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveTimerDialogHandle takes hashtable table, integer parentKey, integer childKey, timerdialog whichTimerdialog returns boolean\r\n */\r\nfunction SaveTimerDialogHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichTimerdialog = lua_touserdata(L, 4);\r\n  console.warn('SaveTimerDialogHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveLeaderboardHandle takes hashtable table, integer parentKey, integer childKey, leaderboard whichLeaderboard returns boolean\r\n */\r\nfunction SaveLeaderboardHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichLeaderboard = lua_touserdata(L, 4);\r\n  console.warn('SaveLeaderboardHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveMultiboardHandle takes hashtable table, integer parentKey, integer childKey, multiboard whichMultiboard returns boolean\r\n */\r\nfunction SaveMultiboardHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichMultiboard = lua_touserdata(L, 4);\r\n  console.warn('SaveMultiboardHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveMultiboardItemHandle takes hashtable table, integer parentKey, integer childKey, multiboarditem whichMultiboarditem returns boolean\r\n */\r\nfunction SaveMultiboardItemHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichMultiboarditem = lua_touserdata(L, 4);\r\n  console.warn('SaveMultiboardItemHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveTrackableHandle takes hashtable table, integer parentKey, integer childKey, trackable whichTrackable returns boolean\r\n */\r\nfunction SaveTrackableHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichTrackable = lua_touserdata(L, 4);\r\n  console.warn('SaveTrackableHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveDialogHandle takes hashtable table, integer parentKey, integer childKey, dialog whichDialog returns boolean\r\n */\r\nfunction SaveDialogHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichDialog = lua_touserdata(L, 4);\r\n  console.warn('SaveDialogHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveButtonHandle takes hashtable table, integer parentKey, integer childKey, button whichButton returns boolean\r\n */\r\nfunction SaveButtonHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichButton = lua_touserdata(L, 4);\r\n  console.warn('SaveButtonHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveTextTagHandle takes hashtable table, integer parentKey, integer childKey, texttag whichTexttag returns boolean\r\n */\r\nfunction SaveTextTagHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichTexttag = lua_touserdata(L, 4);\r\n  console.warn('SaveTextTagHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveLightningHandle takes hashtable table, integer parentKey, integer childKey, lightning whichLightning returns boolean\r\n */\r\nfunction SaveLightningHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichLightning = lua_touserdata(L, 4);\r\n  console.warn('SaveLightningHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveImageHandle takes hashtable table, integer parentKey, integer childKey, image whichImage returns boolean\r\n */\r\nfunction SaveImageHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichImage = lua_touserdata(L, 4);\r\n  console.warn('SaveImageHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveUbersplatHandle takes hashtable table, integer parentKey, integer childKey, ubersplat whichUbersplat returns boolean\r\n */\r\nfunction SaveUbersplatHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichUbersplat = lua_touserdata(L, 4);\r\n  console.warn('SaveUbersplatHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveRegionHandle takes hashtable table, integer parentKey, integer childKey, region whichRegion returns boolean\r\n */\r\nfunction SaveRegionHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichRegion = lua_touserdata(L, 4);\r\n  console.warn('SaveRegionHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveFogStateHandle takes hashtable table, integer parentKey, integer childKey, fogstate whichFogState returns boolean\r\n */\r\nfunction SaveFogStateHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichFogState = lua_touserdata(L, 4);\r\n  console.warn('SaveFogStateHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveFogModifierHandle takes hashtable table, integer parentKey, integer childKey, fogmodifier whichFogModifier returns boolean\r\n */\r\nfunction SaveFogModifierHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichFogModifier = lua_touserdata(L, 4);\r\n  console.warn('SaveFogModifierHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveAgentHandle takes hashtable table, integer parentKey, integer childKey, agent whichAgent returns boolean\r\n */\r\nfunction SaveAgentHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichAgent = lua_touserdata(L, 4);\r\n  console.warn('SaveAgentHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SaveHashtableHandle takes hashtable table, integer parentKey, integer childKey, hashtable whichHashtable returns boolean\r\n */\r\nfunction SaveHashtableHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  const _whichHashtable = lua_touserdata(L, 4);\r\n  console.warn('SaveHashtableHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadInteger takes hashtable table, integer parentKey, integer childKey returns integer\r\n */\r\nfunction LoadInteger(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadInteger was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadReal takes hashtable table, integer parentKey, integer childKey returns real\r\n */\r\nfunction LoadReal(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadReal was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadBoolean takes hashtable table, integer parentKey, integer childKey returns boolean\r\n */\r\nfunction LoadBoolean(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadBoolean was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadStr takes hashtable table, integer parentKey, integer childKey returns string\r\n */\r\nfunction LoadStr(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadStr was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadPlayerHandle takes hashtable table, integer parentKey, integer childKey returns player\r\n */\r\nfunction LoadPlayerHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadPlayerHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadWidgetHandle takes hashtable table, integer parentKey, integer childKey returns widget\r\n */\r\nfunction LoadWidgetHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadWidgetHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadDestructableHandle takes hashtable table, integer parentKey, integer childKey returns destructable\r\n */\r\nfunction LoadDestructableHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadDestructableHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadItemHandle takes hashtable table, integer parentKey, integer childKey returns item\r\n */\r\nfunction LoadItemHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadItemHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadUnitHandle takes hashtable table, integer parentKey, integer childKey returns unit\r\n */\r\nfunction LoadUnitHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadUnitHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadAbilityHandle takes hashtable table, integer parentKey, integer childKey returns ability\r\n */\r\nfunction LoadAbilityHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadAbilityHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadTimerHandle takes hashtable table, integer parentKey, integer childKey returns timer\r\n */\r\nfunction LoadTimerHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadTimerHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadTriggerHandle takes hashtable table, integer parentKey, integer childKey returns trigger\r\n */\r\nfunction LoadTriggerHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadTriggerHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadTriggerConditionHandle takes hashtable table, integer parentKey, integer childKey returns triggercondition\r\n */\r\nfunction LoadTriggerConditionHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadTriggerConditionHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadTriggerActionHandle takes hashtable table, integer parentKey, integer childKey returns triggeraction\r\n */\r\nfunction LoadTriggerActionHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadTriggerActionHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadTriggerEventHandle takes hashtable table, integer parentKey, integer childKey returns event\r\n */\r\nfunction LoadTriggerEventHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadTriggerEventHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadForceHandle takes hashtable table, integer parentKey, integer childKey returns force\r\n */\r\nfunction LoadForceHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadForceHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadGroupHandle takes hashtable table, integer parentKey, integer childKey returns group\r\n */\r\nfunction LoadGroupHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadGroupHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadLocationHandle takes hashtable table, integer parentKey, integer childKey returns location\r\n */\r\nfunction LoadLocationHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadLocationHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadRectHandle takes hashtable table, integer parentKey, integer childKey returns rect\r\n */\r\nfunction LoadRectHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadRectHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadBooleanExprHandle takes hashtable table, integer parentKey, integer childKey returns boolexpr\r\n */\r\nfunction LoadBooleanExprHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadBooleanExprHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadSoundHandle takes hashtable table, integer parentKey, integer childKey returns sound\r\n */\r\nfunction LoadSoundHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadSoundHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadEffectHandle takes hashtable table, integer parentKey, integer childKey returns effect\r\n */\r\nfunction LoadEffectHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadEffectHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadUnitPoolHandle takes hashtable table, integer parentKey, integer childKey returns unitpool\r\n */\r\nfunction LoadUnitPoolHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadUnitPoolHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadItemPoolHandle takes hashtable table, integer parentKey, integer childKey returns itempool\r\n */\r\nfunction LoadItemPoolHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadItemPoolHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadQuestHandle takes hashtable table, integer parentKey, integer childKey returns quest\r\n */\r\nfunction LoadQuestHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadQuestHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadQuestItemHandle takes hashtable table, integer parentKey, integer childKey returns questitem\r\n */\r\nfunction LoadQuestItemHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadQuestItemHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadDefeatConditionHandle takes hashtable table, integer parentKey, integer childKey returns defeatcondition\r\n */\r\nfunction LoadDefeatConditionHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadDefeatConditionHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadTimerDialogHandle takes hashtable table, integer parentKey, integer childKey returns timerdialog\r\n */\r\nfunction LoadTimerDialogHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadTimerDialogHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadLeaderboardHandle takes hashtable table, integer parentKey, integer childKey returns leaderboard\r\n */\r\nfunction LoadLeaderboardHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadLeaderboardHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadMultiboardHandle takes hashtable table, integer parentKey, integer childKey returns multiboard\r\n */\r\nfunction LoadMultiboardHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadMultiboardHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadMultiboardItemHandle takes hashtable table, integer parentKey, integer childKey returns multiboarditem\r\n */\r\nfunction LoadMultiboardItemHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadMultiboardItemHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadTrackableHandle takes hashtable table, integer parentKey, integer childKey returns trackable\r\n */\r\nfunction LoadTrackableHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadTrackableHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadDialogHandle takes hashtable table, integer parentKey, integer childKey returns dialog\r\n */\r\nfunction LoadDialogHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadDialogHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadButtonHandle takes hashtable table, integer parentKey, integer childKey returns button\r\n */\r\nfunction LoadButtonHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadButtonHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadTextTagHandle takes hashtable table, integer parentKey, integer childKey returns texttag\r\n */\r\nfunction LoadTextTagHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadTextTagHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadLightningHandle takes hashtable table, integer parentKey, integer childKey returns lightning\r\n */\r\nfunction LoadLightningHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadLightningHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadImageHandle takes hashtable table, integer parentKey, integer childKey returns image\r\n */\r\nfunction LoadImageHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadImageHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadUbersplatHandle takes hashtable table, integer parentKey, integer childKey returns ubersplat\r\n */\r\nfunction LoadUbersplatHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadUbersplatHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadRegionHandle takes hashtable table, integer parentKey, integer childKey returns region\r\n */\r\nfunction LoadRegionHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadRegionHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadFogStateHandle takes hashtable table, integer parentKey, integer childKey returns fogstate\r\n */\r\nfunction LoadFogStateHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadFogStateHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadFogModifierHandle takes hashtable table, integer parentKey, integer childKey returns fogmodifier\r\n */\r\nfunction LoadFogModifierHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadFogModifierHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LoadHashtableHandle takes hashtable table, integer parentKey, integer childKey returns hashtable\r\n */\r\nfunction LoadHashtableHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('LoadHashtableHandle was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native HaveSavedInteger takes hashtable table, integer parentKey, integer childKey returns boolean\r\n */\r\nfunction HaveSavedInteger(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('HaveSavedInteger was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native HaveSavedReal takes hashtable table, integer parentKey, integer childKey returns boolean\r\n */\r\nfunction HaveSavedReal(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('HaveSavedReal was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native HaveSavedBoolean takes hashtable table, integer parentKey, integer childKey returns boolean\r\n */\r\nfunction HaveSavedBoolean(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('HaveSavedBoolean was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native HaveSavedString takes hashtable table, integer parentKey, integer childKey returns boolean\r\n */\r\nfunction HaveSavedString(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('HaveSavedString was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native HaveSavedHandle takes hashtable table, integer parentKey, integer childKey returns boolean\r\n */\r\nfunction HaveSavedHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('HaveSavedHandle was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native RemoveSavedInteger takes hashtable table, integer parentKey, integer childKey returns nothing\r\n */\r\nfunction RemoveSavedInteger(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('RemoveSavedInteger was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native RemoveSavedReal takes hashtable table, integer parentKey, integer childKey returns nothing\r\n */\r\nfunction RemoveSavedReal(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('RemoveSavedReal was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native RemoveSavedBoolean takes hashtable table, integer parentKey, integer childKey returns nothing\r\n */\r\nfunction RemoveSavedBoolean(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('RemoveSavedBoolean was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native RemoveSavedString takes hashtable table, integer parentKey, integer childKey returns nothing\r\n */\r\nfunction RemoveSavedString(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('RemoveSavedString was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native RemoveSavedHandle takes hashtable table, integer parentKey, integer childKey returns nothing\r\n */\r\nfunction RemoveSavedHandle(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  const _childKey = luaL_checkinteger(L, 3);\r\n  console.warn('RemoveSavedHandle was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native FlushParentHashtable takes hashtable table returns nothing\r\n */\r\nfunction FlushParentHashtable(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  console.warn('FlushParentHashtable was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native FlushChildHashtable takes hashtable table, integer parentKey returns nothing\r\n */\r\nfunction FlushChildHashtable(C: Context, L: lua_State): number {\r\n  const _table = lua_touserdata(L, 1);\r\n  const _parentKey = luaL_checkinteger(L, 2);\r\n  console.warn('FlushChildHashtable was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetRandomInt takes integer lowBound, integer highBound returns integer\r\n */\r\nfunction GetRandomInt(C: Context, L: lua_State): number {\r\n  const _lowBound = luaL_checkinteger(L, 1);\r\n  const _highBound = luaL_checkinteger(L, 2);\r\n  console.warn('GetRandomInt was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetRandomReal takes real lowBound, real highBound returns real\r\n */\r\nfunction GetRandomReal(C: Context, L: lua_State): number {\r\n  const _lowBound = luaL_checknumber(L, 1);\r\n  const _highBound = luaL_checknumber(L, 2);\r\n  console.warn('GetRandomReal was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateUnitPool takes nothing returns unitpool\r\n */\r\nfunction CreateUnitPool(C: Context, L: lua_State): number {\r\n\r\n  console.warn('CreateUnitPool was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DestroyUnitPool takes unitpool whichPool returns nothing\r\n */\r\nfunction DestroyUnitPool(C: Context, L: lua_State): number {\r\n  const _whichPool = lua_touserdata(L, 1);\r\n  console.warn('DestroyUnitPool was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native UnitPoolAddUnitType takes unitpool whichPool, integer unitId, real weight returns nothing\r\n */\r\nfunction UnitPoolAddUnitType(C: Context, L: lua_State): number {\r\n  const _whichPool = lua_touserdata(L, 1);\r\n  const _unitId = luaL_checkinteger(L, 2);\r\n  const _weight = luaL_checknumber(L, 3);\r\n  console.warn('UnitPoolAddUnitType was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native UnitPoolRemoveUnitType takes unitpool whichPool, integer unitId returns nothing\r\n */\r\nfunction UnitPoolRemoveUnitType(C: Context, L: lua_State): number {\r\n  const _whichPool = lua_touserdata(L, 1);\r\n  const _unitId = luaL_checkinteger(L, 2);\r\n  console.warn('UnitPoolRemoveUnitType was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PlaceRandomUnit takes unitpool whichPool, player forWhichPlayer, real x, real y, real facing returns unit\r\n */\r\nfunction PlaceRandomUnit(C: Context, L: lua_State): number {\r\n  const _whichPool = lua_touserdata(L, 1);\r\n  const _forWhichPlayer = lua_touserdata(L, 2);\r\n  const _x = luaL_checknumber(L, 3);\r\n  const _y = luaL_checknumber(L, 4);\r\n  const _facing = luaL_checknumber(L, 5);\r\n  console.warn('PlaceRandomUnit was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateItemPool takes nothing returns itempool\r\n */\r\nfunction CreateItemPool(C: Context, L: lua_State): number {\r\n\r\n  console.warn('CreateItemPool was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DestroyItemPool takes itempool whichItemPool returns nothing\r\n */\r\nfunction DestroyItemPool(C: Context, L: lua_State): number {\r\n  const _whichItemPool = lua_touserdata(L, 1);\r\n  console.warn('DestroyItemPool was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ItemPoolAddItemType takes itempool whichItemPool, integer itemId, real weight returns nothing\r\n */\r\nfunction ItemPoolAddItemType(C: Context, L: lua_State): number {\r\n  const _whichItemPool = lua_touserdata(L, 1);\r\n  const _itemId = luaL_checkinteger(L, 2);\r\n  const _weight = luaL_checknumber(L, 3);\r\n  console.warn('ItemPoolAddItemType was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ItemPoolRemoveItemType takes itempool whichItemPool, integer itemId returns nothing\r\n */\r\nfunction ItemPoolRemoveItemType(C: Context, L: lua_State): number {\r\n  const _whichItemPool = lua_touserdata(L, 1);\r\n  const _itemId = luaL_checkinteger(L, 2);\r\n  console.warn('ItemPoolRemoveItemType was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PlaceRandomItem takes itempool whichItemPool, real x, real y returns item\r\n */\r\nfunction PlaceRandomItem(C: Context, L: lua_State): number {\r\n  const _whichItemPool = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  console.warn('PlaceRandomItem was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native ChooseRandomCreep takes integer level returns integer\r\n */\r\nfunction ChooseRandomCreep(C: Context, L: lua_State): number {\r\n  const _level = luaL_checkinteger(L, 1);\r\n  console.warn('ChooseRandomCreep was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native ChooseRandomNPBuilding takes nothing returns integer\r\n */\r\nfunction ChooseRandomNPBuilding(C: Context, L: lua_State): number {\r\n\r\n  console.warn('ChooseRandomNPBuilding was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native ChooseRandomItem takes integer level returns integer\r\n */\r\nfunction ChooseRandomItem(C: Context, L: lua_State): number {\r\n  const _level = luaL_checkinteger(L, 1);\r\n  console.warn('ChooseRandomItem was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native ChooseRandomItemEx takes itemtype whichType, integer level returns integer\r\n */\r\nfunction ChooseRandomItemEx(C: Context, L: lua_State): number {\r\n  const _whichType = lua_touserdata(L, 1);\r\n  const _level = luaL_checkinteger(L, 2);\r\n  console.warn('ChooseRandomItemEx was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetRandomSeed takes integer seed returns nothing\r\n */\r\nfunction SetRandomSeed(C: Context, L: lua_State): number {\r\n  const _seed = luaL_checkinteger(L, 1);\r\n  console.warn('SetRandomSeed was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetTerrainFog takes real a, real b, real c, real d, real e returns nothing\r\n */\r\nfunction SetTerrainFog(C: Context, L: lua_State): number {\r\n  const _a = luaL_checknumber(L, 1);\r\n  const _b = luaL_checknumber(L, 2);\r\n  const _c = luaL_checknumber(L, 3);\r\n  const _d = luaL_checknumber(L, 4);\r\n  const _e = luaL_checknumber(L, 5);\r\n  console.warn('SetTerrainFog was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ResetTerrainFog takes nothing returns nothing\r\n */\r\nfunction ResetTerrainFog(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('ResetTerrainFog was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUnitFog takes real a, real b, real c, real d, real e returns nothing\r\n */\r\nfunction SetUnitFog(C: Context, L: lua_State): number {\r\n  const _a = luaL_checknumber(L, 1);\r\n  const _b = luaL_checknumber(L, 2);\r\n  const _c = luaL_checknumber(L, 3);\r\n  const _d = luaL_checknumber(L, 4);\r\n  const _e = luaL_checknumber(L, 5);\r\n  console.warn('SetUnitFog was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetTerrainFogEx takes integer style, real zstart, real zend, real density, real red, real green, real blue returns nothing\r\n */\r\nfunction SetTerrainFogEx(C: Context, L: lua_State): number {\r\n  const _style = luaL_checkinteger(L, 1);\r\n  const _zstart = luaL_checknumber(L, 2);\r\n  const _zend = luaL_checknumber(L, 3);\r\n  const _density = luaL_checknumber(L, 4);\r\n  const _red = luaL_checknumber(L, 5);\r\n  const _green = luaL_checknumber(L, 6);\r\n  const _blue = luaL_checknumber(L, 7);\r\n  console.warn('SetTerrainFogEx was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native DisplayTextToPlayer takes player toPlayer, real x, real y, string message returns nothing\r\n */\r\nfunction DisplayTextToPlayer(C: Context, L: lua_State): number {\r\n  const _toPlayer = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _message = luaL_checkstring(L, 4);\r\n  console.warn('DisplayTextToPlayer was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native DisplayTimedTextToPlayer takes player toPlayer, real x, real y, real duration, string message returns nothing\r\n */\r\nfunction DisplayTimedTextToPlayer(C: Context, L: lua_State): number {\r\n  const _toPlayer = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _duration = luaL_checknumber(L, 4);\r\n  const _message = luaL_checkstring(L, 5);\r\n  console.warn('DisplayTimedTextToPlayer was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native DisplayTimedTextFromPlayer takes player toPlayer, real x, real y, real duration, string message returns nothing\r\n */\r\nfunction DisplayTimedTextFromPlayer(C: Context, L: lua_State): number {\r\n  const _toPlayer = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _duration = luaL_checknumber(L, 4);\r\n  const _message = luaL_checkstring(L, 5);\r\n  console.warn('DisplayTimedTextFromPlayer was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ClearTextMessages takes nothing returns nothing\r\n */\r\nfunction ClearTextMessages(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('ClearTextMessages was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetDayNightModels takes string terrainDNCFile, string unitDNCFile returns nothing\r\n */\r\nfunction SetDayNightModels(C: Context, L: lua_State): number {\r\n  const _terrainDNCFile = luaL_checkstring(L, 1);\r\n  const _unitDNCFile = luaL_checkstring(L, 2);\r\n  console.warn('SetDayNightModels was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetSkyModel takes string skyModelFile returns nothing\r\n */\r\nfunction SetSkyModel(C: Context, L: lua_State): number {\r\n  const _skyModelFile = luaL_checkstring(L, 1);\r\n  console.warn('SetSkyModel was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native EnableUserControl takes boolean b returns nothing\r\n */\r\nfunction EnableUserControl(C: Context, L: lua_State): number {\r\n  const _b = lua_toboolean(L, 1);\r\n  console.warn('EnableUserControl was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native EnableUserUI takes boolean b returns nothing\r\n */\r\nfunction EnableUserUI(C: Context, L: lua_State): number {\r\n  const _b = lua_toboolean(L, 1);\r\n  console.warn('EnableUserUI was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SuspendTimeOfDay takes boolean b returns nothing\r\n */\r\nfunction SuspendTimeOfDay(C: Context, L: lua_State): number {\r\n  const _b = lua_toboolean(L, 1);\r\n  console.warn('SuspendTimeOfDay was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetTimeOfDayScale takes real r returns nothing\r\n */\r\nfunction SetTimeOfDayScale(C: Context, L: lua_State): number {\r\n  const _r = luaL_checknumber(L, 1);\r\n  console.warn('SetTimeOfDayScale was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetTimeOfDayScale takes nothing returns real\r\n */\r\nfunction GetTimeOfDayScale(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetTimeOfDayScale was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native ShowInterface takes boolean flag, real fadeDuration returns nothing\r\n */\r\nfunction ShowInterface(C: Context, L: lua_State): number {\r\n  const _flag = lua_toboolean(L, 1);\r\n  const _fadeDuration = luaL_checknumber(L, 2);\r\n  console.warn('ShowInterface was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PauseGame takes boolean flag returns nothing\r\n */\r\nfunction PauseGame(C: Context, L: lua_State): number {\r\n  const _flag = lua_toboolean(L, 1);\r\n  console.warn('PauseGame was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native UnitAddIndicator takes unit whichUnit, integer red, integer green, integer blue, integer alpha returns nothing\r\n */\r\nfunction UnitAddIndicator(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _red = luaL_checkinteger(L, 2);\r\n  const _green = luaL_checkinteger(L, 3);\r\n  const _blue = luaL_checkinteger(L, 4);\r\n  const _alpha = luaL_checkinteger(L, 5);\r\n  console.warn('UnitAddIndicator was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native AddIndicator takes widget whichWidget, integer red, integer green, integer blue, integer alpha returns nothing\r\n */\r\nfunction AddIndicator(C: Context, L: lua_State): number {\r\n  const _whichWidget = lua_touserdata(L, 1);\r\n  const _red = luaL_checkinteger(L, 2);\r\n  const _green = luaL_checkinteger(L, 3);\r\n  const _blue = luaL_checkinteger(L, 4);\r\n  const _alpha = luaL_checkinteger(L, 5);\r\n  console.warn('AddIndicator was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PingMinimap takes real x, real y, real duration returns nothing\r\n */\r\nfunction PingMinimap(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  const _duration = luaL_checknumber(L, 3);\r\n  console.warn('PingMinimap was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PingMinimapEx takes real x, real y, real duration, integer red, integer green, integer blue, boolean extraEffects returns nothing\r\n */\r\nfunction PingMinimapEx(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  const _duration = luaL_checknumber(L, 3);\r\n  const _red = luaL_checkinteger(L, 4);\r\n  const _green = luaL_checkinteger(L, 5);\r\n  const _blue = luaL_checkinteger(L, 6);\r\n  const _extraEffects = lua_toboolean(L, 7);\r\n  console.warn('PingMinimapEx was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native EnableOcclusion takes boolean flag returns nothing\r\n */\r\nfunction EnableOcclusion(C: Context, L: lua_State): number {\r\n  const _flag = lua_toboolean(L, 1);\r\n  console.warn('EnableOcclusion was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetIntroShotText takes string introText returns nothing\r\n */\r\nfunction SetIntroShotText(C: Context, L: lua_State): number {\r\n  const _introText = luaL_checkstring(L, 1);\r\n  console.warn('SetIntroShotText was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetIntroShotModel takes string introModelPath returns nothing\r\n */\r\nfunction SetIntroShotModel(C: Context, L: lua_State): number {\r\n  const _introModelPath = luaL_checkstring(L, 1);\r\n  console.warn('SetIntroShotModel was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native EnableWorldFogBoundary takes boolean b returns nothing\r\n */\r\nfunction EnableWorldFogBoundary(C: Context, L: lua_State): number {\r\n  const _b = lua_toboolean(L, 1);\r\n  console.warn('EnableWorldFogBoundary was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PlayModelCinematic takes string modelName returns nothing\r\n */\r\nfunction PlayModelCinematic(C: Context, L: lua_State): number {\r\n  const _modelName = luaL_checkstring(L, 1);\r\n  console.warn('PlayModelCinematic was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PlayCinematic takes string movieName returns nothing\r\n */\r\nfunction PlayCinematic(C: Context, L: lua_State): number {\r\n  const _movieName = luaL_checkstring(L, 1);\r\n  console.warn('PlayCinematic was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ForceUIKey takes string key returns nothing\r\n */\r\nfunction ForceUIKey(C: Context, L: lua_State): number {\r\n  const _key = luaL_checkstring(L, 1);\r\n  console.warn('ForceUIKey was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ForceUICancel takes nothing returns nothing\r\n */\r\nfunction ForceUICancel(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('ForceUICancel was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native DisplayLoadDialog takes nothing returns nothing\r\n */\r\nfunction DisplayLoadDialog(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('DisplayLoadDialog was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetAltMinimapIcon takes string iconPath returns nothing\r\n */\r\nfunction SetAltMinimapIcon(C: Context, L: lua_State): number {\r\n  const _iconPath = luaL_checkstring(L, 1);\r\n  console.warn('SetAltMinimapIcon was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native DisableRestartMission takes boolean flag returns nothing\r\n */\r\nfunction DisableRestartMission(C: Context, L: lua_State): number {\r\n  const _flag = lua_toboolean(L, 1);\r\n  console.warn('DisableRestartMission was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CreateTextTag takes nothing returns texttag\r\n */\r\nfunction CreateTextTag(C: Context, L: lua_State): number {\r\n\r\n  console.warn('CreateTextTag was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DestroyTextTag takes texttag t returns nothing\r\n */\r\nfunction DestroyTextTag(C: Context, L: lua_State): number {\r\n  const _t = lua_touserdata(L, 1);\r\n  console.warn('DestroyTextTag was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetTextTagText takes texttag t, string s, real height returns nothing\r\n */\r\nfunction SetTextTagText(C: Context, L: lua_State): number {\r\n  const _t = lua_touserdata(L, 1);\r\n  const _s = luaL_checkstring(L, 2);\r\n  const _height = luaL_checknumber(L, 3);\r\n  console.warn('SetTextTagText was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetTextTagPos takes texttag t, real x, real y, real heightOffset returns nothing\r\n */\r\nfunction SetTextTagPos(C: Context, L: lua_State): number {\r\n  const _t = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _heightOffset = luaL_checknumber(L, 4);\r\n  console.warn('SetTextTagPos was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetTextTagPosUnit takes texttag t, unit whichUnit, real heightOffset returns nothing\r\n */\r\nfunction SetTextTagPosUnit(C: Context, L: lua_State): number {\r\n  const _t = lua_touserdata(L, 1);\r\n  const _whichUnit = lua_touserdata(L, 2);\r\n  const _heightOffset = luaL_checknumber(L, 3);\r\n  console.warn('SetTextTagPosUnit was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetTextTagColor takes texttag t, integer red, integer green, integer blue, integer alpha returns nothing\r\n */\r\nfunction SetTextTagColor(C: Context, L: lua_State): number {\r\n  const _t = lua_touserdata(L, 1);\r\n  const _red = luaL_checkinteger(L, 2);\r\n  const _green = luaL_checkinteger(L, 3);\r\n  const _blue = luaL_checkinteger(L, 4);\r\n  const _alpha = luaL_checkinteger(L, 5);\r\n  console.warn('SetTextTagColor was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetTextTagVelocity takes texttag t, real xvel, real yvel returns nothing\r\n */\r\nfunction SetTextTagVelocity(C: Context, L: lua_State): number {\r\n  const _t = lua_touserdata(L, 1);\r\n  const _xvel = luaL_checknumber(L, 2);\r\n  const _yvel = luaL_checknumber(L, 3);\r\n  console.warn('SetTextTagVelocity was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetTextTagVisibility takes texttag t, boolean flag returns nothing\r\n */\r\nfunction SetTextTagVisibility(C: Context, L: lua_State): number {\r\n  const _t = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('SetTextTagVisibility was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetTextTagSuspended takes texttag t, boolean flag returns nothing\r\n */\r\nfunction SetTextTagSuspended(C: Context, L: lua_State): number {\r\n  const _t = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('SetTextTagSuspended was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetTextTagPermanent takes texttag t, boolean flag returns nothing\r\n */\r\nfunction SetTextTagPermanent(C: Context, L: lua_State): number {\r\n  const _t = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('SetTextTagPermanent was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetTextTagAge takes texttag t, real age returns nothing\r\n */\r\nfunction SetTextTagAge(C: Context, L: lua_State): number {\r\n  const _t = lua_touserdata(L, 1);\r\n  const _age = luaL_checknumber(L, 2);\r\n  console.warn('SetTextTagAge was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetTextTagLifespan takes texttag t, real lifespan returns nothing\r\n */\r\nfunction SetTextTagLifespan(C: Context, L: lua_State): number {\r\n  const _t = lua_touserdata(L, 1);\r\n  const _lifespan = luaL_checknumber(L, 2);\r\n  console.warn('SetTextTagLifespan was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetTextTagFadepoint takes texttag t, real fadepoint returns nothing\r\n */\r\nfunction SetTextTagFadepoint(C: Context, L: lua_State): number {\r\n  const _t = lua_touserdata(L, 1);\r\n  const _fadepoint = luaL_checknumber(L, 2);\r\n  console.warn('SetTextTagFadepoint was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetReservedLocalHeroButtons takes integer reserved returns nothing\r\n */\r\nfunction SetReservedLocalHeroButtons(C: Context, L: lua_State): number {\r\n  const _reserved = luaL_checkinteger(L, 1);\r\n  console.warn('SetReservedLocalHeroButtons was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetAllyColorFilterState takes nothing returns integer\r\n */\r\nfunction GetAllyColorFilterState(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetAllyColorFilterState was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetAllyColorFilterState takes integer state returns nothing\r\n */\r\nfunction SetAllyColorFilterState(C: Context, L: lua_State): number {\r\n  const _state = luaL_checkinteger(L, 1);\r\n  console.warn('SetAllyColorFilterState was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetCreepCampFilterState takes nothing returns boolean\r\n */\r\nfunction GetCreepCampFilterState(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetCreepCampFilterState was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetCreepCampFilterState takes boolean state returns nothing\r\n */\r\nfunction SetCreepCampFilterState(C: Context, L: lua_State): number {\r\n  const _state = lua_toboolean(L, 1);\r\n  console.warn('SetCreepCampFilterState was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native EnableMinimapFilterButtons takes boolean enableAlly, boolean enableCreep returns nothing\r\n */\r\nfunction EnableMinimapFilterButtons(C: Context, L: lua_State): number {\r\n  const _enableAlly = lua_toboolean(L, 1);\r\n  const _enableCreep = lua_toboolean(L, 2);\r\n  console.warn('EnableMinimapFilterButtons was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native EnableDragSelect takes boolean state, boolean ui returns nothing\r\n */\r\nfunction EnableDragSelect(C: Context, L: lua_State): number {\r\n  const _state = lua_toboolean(L, 1);\r\n  const _ui = lua_toboolean(L, 2);\r\n  console.warn('EnableDragSelect was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native EnablePreSelect takes boolean state, boolean ui returns nothing\r\n */\r\nfunction EnablePreSelect(C: Context, L: lua_State): number {\r\n  const _state = lua_toboolean(L, 1);\r\n  const _ui = lua_toboolean(L, 2);\r\n  console.warn('EnablePreSelect was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native EnableSelect takes boolean state, boolean ui returns nothing\r\n */\r\nfunction EnableSelect(C: Context, L: lua_State): number {\r\n  const _state = lua_toboolean(L, 1);\r\n  const _ui = lua_toboolean(L, 2);\r\n  console.warn('EnableSelect was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CreateTrackable takes string trackableModelPath, real x, real y, real facing returns trackable\r\n */\r\nfunction CreateTrackable(C: Context, L: lua_State): number {\r\n  const _trackableModelPath = luaL_checkstring(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _facing = luaL_checknumber(L, 4);\r\n  console.warn('CreateTrackable was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateQuest takes nothing returns quest\r\n */\r\nfunction CreateQuest(C: Context, L: lua_State): number {\r\n\r\n  console.warn('CreateQuest was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DestroyQuest takes quest whichQuest returns nothing\r\n */\r\nfunction DestroyQuest(C: Context, L: lua_State): number {\r\n  const _whichQuest = lua_touserdata(L, 1);\r\n  console.warn('DestroyQuest was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native QuestSetTitle takes quest whichQuest, string title returns nothing\r\n */\r\nfunction QuestSetTitle(C: Context, L: lua_State): number {\r\n  const _whichQuest = lua_touserdata(L, 1);\r\n  const _title = luaL_checkstring(L, 2);\r\n  console.warn('QuestSetTitle was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native QuestSetDescription takes quest whichQuest, string description returns nothing\r\n */\r\nfunction QuestSetDescription(C: Context, L: lua_State): number {\r\n  const _whichQuest = lua_touserdata(L, 1);\r\n  const _description = luaL_checkstring(L, 2);\r\n  console.warn('QuestSetDescription was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native QuestSetIconPath takes quest whichQuest, string iconPath returns nothing\r\n */\r\nfunction QuestSetIconPath(C: Context, L: lua_State): number {\r\n  const _whichQuest = lua_touserdata(L, 1);\r\n  const _iconPath = luaL_checkstring(L, 2);\r\n  console.warn('QuestSetIconPath was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native QuestSetRequired takes quest whichQuest, boolean required returns nothing\r\n */\r\nfunction QuestSetRequired(C: Context, L: lua_State): number {\r\n  const _whichQuest = lua_touserdata(L, 1);\r\n  const _required = lua_toboolean(L, 2);\r\n  console.warn('QuestSetRequired was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native QuestSetCompleted takes quest whichQuest, boolean completed returns nothing\r\n */\r\nfunction QuestSetCompleted(C: Context, L: lua_State): number {\r\n  const _whichQuest = lua_touserdata(L, 1);\r\n  const _completed = lua_toboolean(L, 2);\r\n  console.warn('QuestSetCompleted was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native QuestSetDiscovered takes quest whichQuest, boolean discovered returns nothing\r\n */\r\nfunction QuestSetDiscovered(C: Context, L: lua_State): number {\r\n  const _whichQuest = lua_touserdata(L, 1);\r\n  const _discovered = lua_toboolean(L, 2);\r\n  console.warn('QuestSetDiscovered was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native QuestSetFailed takes quest whichQuest, boolean failed returns nothing\r\n */\r\nfunction QuestSetFailed(C: Context, L: lua_State): number {\r\n  const _whichQuest = lua_touserdata(L, 1);\r\n  const _failed = lua_toboolean(L, 2);\r\n  console.warn('QuestSetFailed was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native QuestSetEnabled takes quest whichQuest, boolean enabled returns nothing\r\n */\r\nfunction QuestSetEnabled(C: Context, L: lua_State): number {\r\n  const _whichQuest = lua_touserdata(L, 1);\r\n  const _enabled = lua_toboolean(L, 2);\r\n  console.warn('QuestSetEnabled was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native IsQuestRequired takes quest whichQuest returns boolean\r\n */\r\nfunction IsQuestRequired(C: Context, L: lua_State): number {\r\n  const _whichQuest = lua_touserdata(L, 1);\r\n  console.warn('IsQuestRequired was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IsQuestCompleted takes quest whichQuest returns boolean\r\n */\r\nfunction IsQuestCompleted(C: Context, L: lua_State): number {\r\n  const _whichQuest = lua_touserdata(L, 1);\r\n  console.warn('IsQuestCompleted was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IsQuestDiscovered takes quest whichQuest returns boolean\r\n */\r\nfunction IsQuestDiscovered(C: Context, L: lua_State): number {\r\n  const _whichQuest = lua_touserdata(L, 1);\r\n  console.warn('IsQuestDiscovered was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IsQuestFailed takes quest whichQuest returns boolean\r\n */\r\nfunction IsQuestFailed(C: Context, L: lua_State): number {\r\n  const _whichQuest = lua_touserdata(L, 1);\r\n  console.warn('IsQuestFailed was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IsQuestEnabled takes quest whichQuest returns boolean\r\n */\r\nfunction IsQuestEnabled(C: Context, L: lua_State): number {\r\n  const _whichQuest = lua_touserdata(L, 1);\r\n  console.warn('IsQuestEnabled was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native QuestCreateItem takes quest whichQuest returns questitem\r\n */\r\nfunction QuestCreateItem(C: Context, L: lua_State): number {\r\n  const _whichQuest = lua_touserdata(L, 1);\r\n  console.warn('QuestCreateItem was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native QuestItemSetDescription takes questitem whichQuestItem, string description returns nothing\r\n */\r\nfunction QuestItemSetDescription(C: Context, L: lua_State): number {\r\n  const _whichQuestItem = lua_touserdata(L, 1);\r\n  const _description = luaL_checkstring(L, 2);\r\n  console.warn('QuestItemSetDescription was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native QuestItemSetCompleted takes questitem whichQuestItem, boolean completed returns nothing\r\n */\r\nfunction QuestItemSetCompleted(C: Context, L: lua_State): number {\r\n  const _whichQuestItem = lua_touserdata(L, 1);\r\n  const _completed = lua_toboolean(L, 2);\r\n  console.warn('QuestItemSetCompleted was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native IsQuestItemCompleted takes questitem whichQuestItem returns boolean\r\n */\r\nfunction IsQuestItemCompleted(C: Context, L: lua_State): number {\r\n  const _whichQuestItem = lua_touserdata(L, 1);\r\n  console.warn('IsQuestItemCompleted was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateDefeatCondition takes nothing returns defeatcondition\r\n */\r\nfunction CreateDefeatCondition(C: Context, L: lua_State): number {\r\n\r\n  console.warn('CreateDefeatCondition was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DestroyDefeatCondition takes defeatcondition whichCondition returns nothing\r\n */\r\nfunction DestroyDefeatCondition(C: Context, L: lua_State): number {\r\n  const _whichCondition = lua_touserdata(L, 1);\r\n  console.warn('DestroyDefeatCondition was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native DefeatConditionSetDescription takes defeatcondition whichCondition, string description returns nothing\r\n */\r\nfunction DefeatConditionSetDescription(C: Context, L: lua_State): number {\r\n  const _whichCondition = lua_touserdata(L, 1);\r\n  const _description = luaL_checkstring(L, 2);\r\n  console.warn('DefeatConditionSetDescription was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native FlashQuestDialogButton takes nothing returns nothing\r\n */\r\nfunction FlashQuestDialogButton(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('FlashQuestDialogButton was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ForceQuestDialogUpdate takes nothing returns nothing\r\n */\r\nfunction ForceQuestDialogUpdate(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('ForceQuestDialogUpdate was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CreateTimerDialog takes timer t returns timerdialog\r\n */\r\nfunction CreateTimerDialog(C: Context, L: lua_State): number {\r\n  const _t = lua_touserdata(L, 1);\r\n  console.warn('CreateTimerDialog was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DestroyTimerDialog takes timerdialog whichDialog returns nothing\r\n */\r\nfunction DestroyTimerDialog(C: Context, L: lua_State): number {\r\n  const _whichDialog = lua_touserdata(L, 1);\r\n  console.warn('DestroyTimerDialog was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native TimerDialogSetTitle takes timerdialog whichDialog, string title returns nothing\r\n */\r\nfunction TimerDialogSetTitle(C: Context, L: lua_State): number {\r\n  const _whichDialog = lua_touserdata(L, 1);\r\n  const _title = luaL_checkstring(L, 2);\r\n  console.warn('TimerDialogSetTitle was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native TimerDialogSetTitleColor takes timerdialog whichDialog, integer red, integer green, integer blue, integer alpha returns nothing\r\n */\r\nfunction TimerDialogSetTitleColor(C: Context, L: lua_State): number {\r\n  const _whichDialog = lua_touserdata(L, 1);\r\n  const _red = luaL_checkinteger(L, 2);\r\n  const _green = luaL_checkinteger(L, 3);\r\n  const _blue = luaL_checkinteger(L, 4);\r\n  const _alpha = luaL_checkinteger(L, 5);\r\n  console.warn('TimerDialogSetTitleColor was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native TimerDialogSetTimeColor takes timerdialog whichDialog, integer red, integer green, integer blue, integer alpha returns nothing\r\n */\r\nfunction TimerDialogSetTimeColor(C: Context, L: lua_State): number {\r\n  const _whichDialog = lua_touserdata(L, 1);\r\n  const _red = luaL_checkinteger(L, 2);\r\n  const _green = luaL_checkinteger(L, 3);\r\n  const _blue = luaL_checkinteger(L, 4);\r\n  const _alpha = luaL_checkinteger(L, 5);\r\n  console.warn('TimerDialogSetTimeColor was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native TimerDialogSetSpeed takes timerdialog whichDialog, real speedMultFactor returns nothing\r\n */\r\nfunction TimerDialogSetSpeed(C: Context, L: lua_State): number {\r\n  const _whichDialog = lua_touserdata(L, 1);\r\n  const _speedMultFactor = luaL_checknumber(L, 2);\r\n  console.warn('TimerDialogSetSpeed was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native TimerDialogDisplay takes timerdialog whichDialog, boolean display returns nothing\r\n */\r\nfunction TimerDialogDisplay(C: Context, L: lua_State): number {\r\n  const _whichDialog = lua_touserdata(L, 1);\r\n  const _display = lua_toboolean(L, 2);\r\n  console.warn('TimerDialogDisplay was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native IsTimerDialogDisplayed takes timerdialog whichDialog returns boolean\r\n */\r\nfunction IsTimerDialogDisplayed(C: Context, L: lua_State): number {\r\n  const _whichDialog = lua_touserdata(L, 1);\r\n  console.warn('IsTimerDialogDisplayed was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TimerDialogSetRealTimeRemaining takes timerdialog whichDialog, real timeRemaining returns nothing\r\n */\r\nfunction TimerDialogSetRealTimeRemaining(C: Context, L: lua_State): number {\r\n  const _whichDialog = lua_touserdata(L, 1);\r\n  const _timeRemaining = luaL_checknumber(L, 2);\r\n  console.warn('TimerDialogSetRealTimeRemaining was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CreateLeaderboard takes nothing returns leaderboard\r\n */\r\nfunction CreateLeaderboard(C: Context, L: lua_State): number {\r\n\r\n  console.warn('CreateLeaderboard was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DestroyLeaderboard takes leaderboard lb returns nothing\r\n */\r\nfunction DestroyLeaderboard(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  console.warn('DestroyLeaderboard was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native LeaderboardDisplay takes leaderboard lb, boolean show returns nothing\r\n */\r\nfunction LeaderboardDisplay(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _show = lua_toboolean(L, 2);\r\n  console.warn('LeaderboardDisplay was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native IsLeaderboardDisplayed takes leaderboard lb returns boolean\r\n */\r\nfunction IsLeaderboardDisplayed(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  console.warn('IsLeaderboardDisplayed was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LeaderboardGetItemCount takes leaderboard lb returns integer\r\n */\r\nfunction LeaderboardGetItemCount(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  console.warn('LeaderboardGetItemCount was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LeaderboardSetSizeByItemCount takes leaderboard lb, integer count returns nothing\r\n */\r\nfunction LeaderboardSetSizeByItemCount(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _count = luaL_checkinteger(L, 2);\r\n  console.warn('LeaderboardSetSizeByItemCount was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native LeaderboardAddItem takes leaderboard lb, string label, integer value, player p returns nothing\r\n */\r\nfunction LeaderboardAddItem(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _label = luaL_checkstring(L, 2);\r\n  const _value = luaL_checkinteger(L, 3);\r\n  const _p = lua_touserdata(L, 4);\r\n  console.warn('LeaderboardAddItem was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native LeaderboardRemoveItem takes leaderboard lb, integer index returns nothing\r\n */\r\nfunction LeaderboardRemoveItem(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _index = luaL_checkinteger(L, 2);\r\n  console.warn('LeaderboardRemoveItem was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native LeaderboardRemovePlayerItem takes leaderboard lb, player p returns nothing\r\n */\r\nfunction LeaderboardRemovePlayerItem(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _p = lua_touserdata(L, 2);\r\n  console.warn('LeaderboardRemovePlayerItem was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native LeaderboardClear takes leaderboard lb returns nothing\r\n */\r\nfunction LeaderboardClear(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  console.warn('LeaderboardClear was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native LeaderboardSortItemsByValue takes leaderboard lb, boolean ascending returns nothing\r\n */\r\nfunction LeaderboardSortItemsByValue(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _ascending = lua_toboolean(L, 2);\r\n  console.warn('LeaderboardSortItemsByValue was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native LeaderboardSortItemsByPlayer takes leaderboard lb, boolean ascending returns nothing\r\n */\r\nfunction LeaderboardSortItemsByPlayer(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _ascending = lua_toboolean(L, 2);\r\n  console.warn('LeaderboardSortItemsByPlayer was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native LeaderboardSortItemsByLabel takes leaderboard lb, boolean ascending returns nothing\r\n */\r\nfunction LeaderboardSortItemsByLabel(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _ascending = lua_toboolean(L, 2);\r\n  console.warn('LeaderboardSortItemsByLabel was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native LeaderboardHasPlayerItem takes leaderboard lb, player p returns boolean\r\n */\r\nfunction LeaderboardHasPlayerItem(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _p = lua_touserdata(L, 2);\r\n  console.warn('LeaderboardHasPlayerItem was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LeaderboardGetPlayerIndex takes leaderboard lb, player p returns integer\r\n */\r\nfunction LeaderboardGetPlayerIndex(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _p = lua_touserdata(L, 2);\r\n  console.warn('LeaderboardGetPlayerIndex was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LeaderboardSetLabel takes leaderboard lb, string label returns nothing\r\n */\r\nfunction LeaderboardSetLabel(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _label = luaL_checkstring(L, 2);\r\n  console.warn('LeaderboardSetLabel was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native LeaderboardGetLabelText takes leaderboard lb returns string\r\n */\r\nfunction LeaderboardGetLabelText(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  console.warn('LeaderboardGetLabelText was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native PlayerSetLeaderboard takes player toPlayer, leaderboard lb returns nothing\r\n */\r\nfunction PlayerSetLeaderboard(C: Context, L: lua_State): number {\r\n  const _toPlayer = lua_touserdata(L, 1);\r\n  const _lb = lua_touserdata(L, 2);\r\n  console.warn('PlayerSetLeaderboard was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PlayerGetLeaderboard takes player toPlayer returns leaderboard\r\n */\r\nfunction PlayerGetLeaderboard(C: Context, L: lua_State): number {\r\n  const _toPlayer = lua_touserdata(L, 1);\r\n  console.warn('PlayerGetLeaderboard was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native LeaderboardSetLabelColor takes leaderboard lb, integer red, integer green, integer blue, integer alpha returns nothing\r\n */\r\nfunction LeaderboardSetLabelColor(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _red = luaL_checkinteger(L, 2);\r\n  const _green = luaL_checkinteger(L, 3);\r\n  const _blue = luaL_checkinteger(L, 4);\r\n  const _alpha = luaL_checkinteger(L, 5);\r\n  console.warn('LeaderboardSetLabelColor was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native LeaderboardSetValueColor takes leaderboard lb, integer red, integer green, integer blue, integer alpha returns nothing\r\n */\r\nfunction LeaderboardSetValueColor(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _red = luaL_checkinteger(L, 2);\r\n  const _green = luaL_checkinteger(L, 3);\r\n  const _blue = luaL_checkinteger(L, 4);\r\n  const _alpha = luaL_checkinteger(L, 5);\r\n  console.warn('LeaderboardSetValueColor was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native LeaderboardSetStyle takes leaderboard lb, boolean showLabel, boolean showNames, boolean showValues, boolean showIcons returns nothing\r\n */\r\nfunction LeaderboardSetStyle(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _showLabel = lua_toboolean(L, 2);\r\n  const _showNames = lua_toboolean(L, 3);\r\n  const _showValues = lua_toboolean(L, 4);\r\n  const _showIcons = lua_toboolean(L, 5);\r\n  console.warn('LeaderboardSetStyle was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native LeaderboardSetItemValue takes leaderboard lb, integer whichItem, integer val returns nothing\r\n */\r\nfunction LeaderboardSetItemValue(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _whichItem = luaL_checkinteger(L, 2);\r\n  const _val = luaL_checkinteger(L, 3);\r\n  console.warn('LeaderboardSetItemValue was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native LeaderboardSetItemLabel takes leaderboard lb, integer whichItem, string val returns nothing\r\n */\r\nfunction LeaderboardSetItemLabel(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _whichItem = luaL_checkinteger(L, 2);\r\n  const _val = luaL_checkstring(L, 3);\r\n  console.warn('LeaderboardSetItemLabel was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native LeaderboardSetItemStyle takes leaderboard lb, integer whichItem, boolean showLabel, boolean showValue, boolean showIcon returns nothing\r\n */\r\nfunction LeaderboardSetItemStyle(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _whichItem = luaL_checkinteger(L, 2);\r\n  const _showLabel = lua_toboolean(L, 3);\r\n  const _showValue = lua_toboolean(L, 4);\r\n  const _showIcon = lua_toboolean(L, 5);\r\n  console.warn('LeaderboardSetItemStyle was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native LeaderboardSetItemLabelColor takes leaderboard lb, integer whichItem, integer red, integer green, integer blue, integer alpha returns nothing\r\n */\r\nfunction LeaderboardSetItemLabelColor(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _whichItem = luaL_checkinteger(L, 2);\r\n  const _red = luaL_checkinteger(L, 3);\r\n  const _green = luaL_checkinteger(L, 4);\r\n  const _blue = luaL_checkinteger(L, 5);\r\n  const _alpha = luaL_checkinteger(L, 6);\r\n  console.warn('LeaderboardSetItemLabelColor was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native LeaderboardSetItemValueColor takes leaderboard lb, integer whichItem, integer red, integer green, integer blue, integer alpha returns nothing\r\n */\r\nfunction LeaderboardSetItemValueColor(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _whichItem = luaL_checkinteger(L, 2);\r\n  const _red = luaL_checkinteger(L, 3);\r\n  const _green = luaL_checkinteger(L, 4);\r\n  const _blue = luaL_checkinteger(L, 5);\r\n  const _alpha = luaL_checkinteger(L, 6);\r\n  console.warn('LeaderboardSetItemValueColor was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CreateMultiboard takes nothing returns multiboard\r\n */\r\nfunction CreateMultiboard(C: Context, L: lua_State): number {\r\n\r\n  console.warn('CreateMultiboard was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DestroyMultiboard takes multiboard lb returns nothing\r\n */\r\nfunction DestroyMultiboard(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  console.warn('DestroyMultiboard was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native MultiboardDisplay takes multiboard lb, boolean show returns nothing\r\n */\r\nfunction MultiboardDisplay(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _show = lua_toboolean(L, 2);\r\n  console.warn('MultiboardDisplay was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native IsMultiboardDisplayed takes multiboard lb returns boolean\r\n */\r\nfunction IsMultiboardDisplayed(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  console.warn('IsMultiboardDisplayed was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native MultiboardMinimize takes multiboard lb, boolean minimize returns nothing\r\n */\r\nfunction MultiboardMinimize(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _minimize = lua_toboolean(L, 2);\r\n  console.warn('MultiboardMinimize was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native IsMultiboardMinimized takes multiboard lb returns boolean\r\n */\r\nfunction IsMultiboardMinimized(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  console.warn('IsMultiboardMinimized was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native MultiboardClear takes multiboard lb returns nothing\r\n */\r\nfunction MultiboardClear(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  console.warn('MultiboardClear was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native MultiboardSetTitleText takes multiboard lb, string label returns nothing\r\n */\r\nfunction MultiboardSetTitleText(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _label = luaL_checkstring(L, 2);\r\n  console.warn('MultiboardSetTitleText was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native MultiboardGetTitleText takes multiboard lb returns string\r\n */\r\nfunction MultiboardGetTitleText(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  console.warn('MultiboardGetTitleText was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native MultiboardSetTitleTextColor takes multiboard lb, integer red, integer green, integer blue, integer alpha returns nothing\r\n */\r\nfunction MultiboardSetTitleTextColor(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _red = luaL_checkinteger(L, 2);\r\n  const _green = luaL_checkinteger(L, 3);\r\n  const _blue = luaL_checkinteger(L, 4);\r\n  const _alpha = luaL_checkinteger(L, 5);\r\n  console.warn('MultiboardSetTitleTextColor was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native MultiboardGetRowCount takes multiboard lb returns integer\r\n */\r\nfunction MultiboardGetRowCount(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  console.warn('MultiboardGetRowCount was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native MultiboardGetColumnCount takes multiboard lb returns integer\r\n */\r\nfunction MultiboardGetColumnCount(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  console.warn('MultiboardGetColumnCount was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native MultiboardSetColumnCount takes multiboard lb, integer count returns nothing\r\n */\r\nfunction MultiboardSetColumnCount(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _count = luaL_checkinteger(L, 2);\r\n  console.warn('MultiboardSetColumnCount was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native MultiboardSetRowCount takes multiboard lb, integer count returns nothing\r\n */\r\nfunction MultiboardSetRowCount(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _count = luaL_checkinteger(L, 2);\r\n  console.warn('MultiboardSetRowCount was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native MultiboardSetItemsStyle takes multiboard lb, boolean showValues, boolean showIcons returns nothing\r\n */\r\nfunction MultiboardSetItemsStyle(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _showValues = lua_toboolean(L, 2);\r\n  const _showIcons = lua_toboolean(L, 3);\r\n  console.warn('MultiboardSetItemsStyle was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native MultiboardSetItemsValue takes multiboard lb, string value returns nothing\r\n */\r\nfunction MultiboardSetItemsValue(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _value = luaL_checkstring(L, 2);\r\n  console.warn('MultiboardSetItemsValue was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native MultiboardSetItemsValueColor takes multiboard lb, integer red, integer green, integer blue, integer alpha returns nothing\r\n */\r\nfunction MultiboardSetItemsValueColor(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _red = luaL_checkinteger(L, 2);\r\n  const _green = luaL_checkinteger(L, 3);\r\n  const _blue = luaL_checkinteger(L, 4);\r\n  const _alpha = luaL_checkinteger(L, 5);\r\n  console.warn('MultiboardSetItemsValueColor was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native MultiboardSetItemsWidth takes multiboard lb, real width returns nothing\r\n */\r\nfunction MultiboardSetItemsWidth(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _width = luaL_checknumber(L, 2);\r\n  console.warn('MultiboardSetItemsWidth was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native MultiboardSetItemsIcon takes multiboard lb, string iconPath returns nothing\r\n */\r\nfunction MultiboardSetItemsIcon(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _iconPath = luaL_checkstring(L, 2);\r\n  console.warn('MultiboardSetItemsIcon was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native MultiboardGetItem takes multiboard lb, integer row, integer column returns multiboarditem\r\n */\r\nfunction MultiboardGetItem(C: Context, L: lua_State): number {\r\n  const _lb = lua_touserdata(L, 1);\r\n  const _row = luaL_checkinteger(L, 2);\r\n  const _column = luaL_checkinteger(L, 3);\r\n  console.warn('MultiboardGetItem was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native MultiboardReleaseItem takes multiboarditem mbi returns nothing\r\n */\r\nfunction MultiboardReleaseItem(C: Context, L: lua_State): number {\r\n  const _mbi = lua_touserdata(L, 1);\r\n  console.warn('MultiboardReleaseItem was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native MultiboardSetItemStyle takes multiboarditem mbi, boolean showValue, boolean showIcon returns nothing\r\n */\r\nfunction MultiboardSetItemStyle(C: Context, L: lua_State): number {\r\n  const _mbi = lua_touserdata(L, 1);\r\n  const _showValue = lua_toboolean(L, 2);\r\n  const _showIcon = lua_toboolean(L, 3);\r\n  console.warn('MultiboardSetItemStyle was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native MultiboardSetItemValue takes multiboarditem mbi, string val returns nothing\r\n */\r\nfunction MultiboardSetItemValue(C: Context, L: lua_State): number {\r\n  const _mbi = lua_touserdata(L, 1);\r\n  const _val = luaL_checkstring(L, 2);\r\n  console.warn('MultiboardSetItemValue was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native MultiboardSetItemValueColor takes multiboarditem mbi, integer red, integer green, integer blue, integer alpha returns nothing\r\n */\r\nfunction MultiboardSetItemValueColor(C: Context, L: lua_State): number {\r\n  const _mbi = lua_touserdata(L, 1);\r\n  const _red = luaL_checkinteger(L, 2);\r\n  const _green = luaL_checkinteger(L, 3);\r\n  const _blue = luaL_checkinteger(L, 4);\r\n  const _alpha = luaL_checkinteger(L, 5);\r\n  console.warn('MultiboardSetItemValueColor was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native MultiboardSetItemWidth takes multiboarditem mbi, real width returns nothing\r\n */\r\nfunction MultiboardSetItemWidth(C: Context, L: lua_State): number {\r\n  const _mbi = lua_touserdata(L, 1);\r\n  const _width = luaL_checknumber(L, 2);\r\n  console.warn('MultiboardSetItemWidth was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native MultiboardSetItemIcon takes multiboarditem mbi, string iconFileName returns nothing\r\n */\r\nfunction MultiboardSetItemIcon(C: Context, L: lua_State): number {\r\n  const _mbi = lua_touserdata(L, 1);\r\n  const _iconFileName = luaL_checkstring(L, 2);\r\n  console.warn('MultiboardSetItemIcon was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native MultiboardSuppressDisplay takes boolean flag returns nothing\r\n */\r\nfunction MultiboardSuppressDisplay(C: Context, L: lua_State): number {\r\n  const _flag = lua_toboolean(L, 1);\r\n  console.warn('MultiboardSuppressDisplay was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCameraPosition takes real x, real y returns nothing\r\n */\r\nfunction SetCameraPosition(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  console.warn('SetCameraPosition was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCameraQuickPosition takes real x, real y returns nothing\r\n */\r\nfunction SetCameraQuickPosition(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  console.warn('SetCameraQuickPosition was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCameraBounds takes real x1, real y1, real x2, real y2, real x3, real y3, real x4, real y4 returns nothing\r\n */\r\nfunction SetCameraBounds(C: Context, L: lua_State): number {\r\n  const _x1 = luaL_checknumber(L, 1);\r\n  const _y1 = luaL_checknumber(L, 2);\r\n  const _x2 = luaL_checknumber(L, 3);\r\n  const _y2 = luaL_checknumber(L, 4);\r\n  const _x3 = luaL_checknumber(L, 5);\r\n  const _y3 = luaL_checknumber(L, 6);\r\n  const _x4 = luaL_checknumber(L, 7);\r\n  const _y4 = luaL_checknumber(L, 8);\r\n  console.warn('SetCameraBounds was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native StopCamera takes nothing returns nothing\r\n */\r\nfunction StopCamera(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('StopCamera was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ResetToGameCamera takes real duration returns nothing\r\n */\r\nfunction ResetToGameCamera(C: Context, L: lua_State): number {\r\n  const _duration = luaL_checknumber(L, 1);\r\n  console.warn('ResetToGameCamera was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PanCameraTo takes real x, real y returns nothing\r\n */\r\nfunction PanCameraTo(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  console.warn('PanCameraTo was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PanCameraToTimed takes real x, real y, real duration returns nothing\r\n */\r\nfunction PanCameraToTimed(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  const _duration = luaL_checknumber(L, 3);\r\n  console.warn('PanCameraToTimed was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PanCameraToWithZ takes real x, real y, real zOffsetDest returns nothing\r\n */\r\nfunction PanCameraToWithZ(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  const _zOffsetDest = luaL_checknumber(L, 3);\r\n  console.warn('PanCameraToWithZ was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PanCameraToTimedWithZ takes real x, real y, real zOffsetDest, real duration returns nothing\r\n */\r\nfunction PanCameraToTimedWithZ(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  const _zOffsetDest = luaL_checknumber(L, 3);\r\n  const _duration = luaL_checknumber(L, 4);\r\n  console.warn('PanCameraToTimedWithZ was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCinematicCamera takes string cameraModelFile returns nothing\r\n */\r\nfunction SetCinematicCamera(C: Context, L: lua_State): number {\r\n  const _cameraModelFile = luaL_checkstring(L, 1);\r\n  console.warn('SetCinematicCamera was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCameraRotateMode takes real x, real y, real radiansToSweep, real duration returns nothing\r\n */\r\nfunction SetCameraRotateMode(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  const _radiansToSweep = luaL_checknumber(L, 3);\r\n  const _duration = luaL_checknumber(L, 4);\r\n  console.warn('SetCameraRotateMode was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCameraField takes camerafield whichField, real value, real duration returns nothing\r\n */\r\nfunction SetCameraField(C: Context, L: lua_State): number {\r\n  const _whichField = lua_touserdata(L, 1);\r\n  const _value = luaL_checknumber(L, 2);\r\n  const _duration = luaL_checknumber(L, 3);\r\n  console.warn('SetCameraField was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native AdjustCameraField takes camerafield whichField, real offset, real duration returns nothing\r\n */\r\nfunction AdjustCameraField(C: Context, L: lua_State): number {\r\n  const _whichField = lua_touserdata(L, 1);\r\n  const _offset = luaL_checknumber(L, 2);\r\n  const _duration = luaL_checknumber(L, 3);\r\n  console.warn('AdjustCameraField was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCameraTargetController takes unit whichUnit, real xoffset, real yoffset, boolean inheritOrientation returns nothing\r\n */\r\nfunction SetCameraTargetController(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _xoffset = luaL_checknumber(L, 2);\r\n  const _yoffset = luaL_checknumber(L, 3);\r\n  const _inheritOrientation = lua_toboolean(L, 4);\r\n  console.warn('SetCameraTargetController was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCameraOrientController takes unit whichUnit, real xoffset, real yoffset returns nothing\r\n */\r\nfunction SetCameraOrientController(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _xoffset = luaL_checknumber(L, 2);\r\n  const _yoffset = luaL_checknumber(L, 3);\r\n  console.warn('SetCameraOrientController was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CreateCameraSetup takes nothing returns camerasetup\r\n */\r\nfunction CreateCameraSetup(C: Context, L: lua_State): number {\r\n\r\n  console.warn('CreateCameraSetup was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CameraSetupSetField takes camerasetup whichSetup, camerafield whichField, real value, real duration returns nothing\r\n */\r\nfunction CameraSetupSetField(C: Context, L: lua_State): number {\r\n  const _whichSetup = lua_touserdata(L, 1);\r\n  const _whichField = lua_touserdata(L, 2);\r\n  const _value = luaL_checknumber(L, 3);\r\n  const _duration = luaL_checknumber(L, 4);\r\n  console.warn('CameraSetupSetField was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CameraSetupGetField takes camerasetup whichSetup, camerafield whichField returns real\r\n */\r\nfunction CameraSetupGetField(C: Context, L: lua_State): number {\r\n  const _whichSetup = lua_touserdata(L, 1);\r\n  const _whichField = lua_touserdata(L, 2);\r\n  console.warn('CameraSetupGetField was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CameraSetupSetDestPosition takes camerasetup whichSetup, real x, real y, real duration returns nothing\r\n */\r\nfunction CameraSetupSetDestPosition(C: Context, L: lua_State): number {\r\n  const _whichSetup = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _duration = luaL_checknumber(L, 4);\r\n  console.warn('CameraSetupSetDestPosition was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CameraSetupGetDestPositionLoc takes camerasetup whichSetup returns location\r\n */\r\nfunction CameraSetupGetDestPositionLoc(C: Context, L: lua_State): number {\r\n  const _whichSetup = lua_touserdata(L, 1);\r\n  console.warn('CameraSetupGetDestPositionLoc was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CameraSetupGetDestPositionX takes camerasetup whichSetup returns real\r\n */\r\nfunction CameraSetupGetDestPositionX(C: Context, L: lua_State): number {\r\n  const _whichSetup = lua_touserdata(L, 1);\r\n  console.warn('CameraSetupGetDestPositionX was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CameraSetupGetDestPositionY takes camerasetup whichSetup returns real\r\n */\r\nfunction CameraSetupGetDestPositionY(C: Context, L: lua_State): number {\r\n  const _whichSetup = lua_touserdata(L, 1);\r\n  console.warn('CameraSetupGetDestPositionY was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CameraSetupApply takes camerasetup whichSetup, boolean doPan, boolean panTimed returns nothing\r\n */\r\nfunction CameraSetupApply(C: Context, L: lua_State): number {\r\n  const _whichSetup = lua_touserdata(L, 1);\r\n  const _doPan = lua_toboolean(L, 2);\r\n  const _panTimed = lua_toboolean(L, 3);\r\n  console.warn('CameraSetupApply was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CameraSetupApplyWithZ takes camerasetup whichSetup, real zDestOffset returns nothing\r\n */\r\nfunction CameraSetupApplyWithZ(C: Context, L: lua_State): number {\r\n  const _whichSetup = lua_touserdata(L, 1);\r\n  const _zDestOffset = luaL_checknumber(L, 2);\r\n  console.warn('CameraSetupApplyWithZ was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CameraSetupApplyForceDuration takes camerasetup whichSetup, boolean doPan, real forceDuration returns nothing\r\n */\r\nfunction CameraSetupApplyForceDuration(C: Context, L: lua_State): number {\r\n  const _whichSetup = lua_touserdata(L, 1);\r\n  const _doPan = lua_toboolean(L, 2);\r\n  const _forceDuration = luaL_checknumber(L, 3);\r\n  console.warn('CameraSetupApplyForceDuration was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CameraSetupApplyForceDurationWithZ takes camerasetup whichSetup, real zDestOffset, real forceDuration returns nothing\r\n */\r\nfunction CameraSetupApplyForceDurationWithZ(C: Context, L: lua_State): number {\r\n  const _whichSetup = lua_touserdata(L, 1);\r\n  const _zDestOffset = luaL_checknumber(L, 2);\r\n  const _forceDuration = luaL_checknumber(L, 3);\r\n  console.warn('CameraSetupApplyForceDurationWithZ was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CameraSetTargetNoise takes real mag, real velocity returns nothing\r\n */\r\nfunction CameraSetTargetNoise(C: Context, L: lua_State): number {\r\n  const _mag = luaL_checknumber(L, 1);\r\n  const _velocity = luaL_checknumber(L, 2);\r\n  console.warn('CameraSetTargetNoise was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CameraSetSourceNoise takes real mag, real velocity returns nothing\r\n */\r\nfunction CameraSetSourceNoise(C: Context, L: lua_State): number {\r\n  const _mag = luaL_checknumber(L, 1);\r\n  const _velocity = luaL_checknumber(L, 2);\r\n  console.warn('CameraSetSourceNoise was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CameraSetTargetNoiseEx takes real mag, real velocity, boolean vertOnly returns nothing\r\n */\r\nfunction CameraSetTargetNoiseEx(C: Context, L: lua_State): number {\r\n  const _mag = luaL_checknumber(L, 1);\r\n  const _velocity = luaL_checknumber(L, 2);\r\n  const _vertOnly = lua_toboolean(L, 3);\r\n  console.warn('CameraSetTargetNoiseEx was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CameraSetSourceNoiseEx takes real mag, real velocity, boolean vertOnly returns nothing\r\n */\r\nfunction CameraSetSourceNoiseEx(C: Context, L: lua_State): number {\r\n  const _mag = luaL_checknumber(L, 1);\r\n  const _velocity = luaL_checknumber(L, 2);\r\n  const _vertOnly = lua_toboolean(L, 3);\r\n  console.warn('CameraSetSourceNoiseEx was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CameraSetSmoothingFactor takes real factor returns nothing\r\n */\r\nfunction CameraSetSmoothingFactor(C: Context, L: lua_State): number {\r\n  const _factor = luaL_checknumber(L, 1);\r\n  console.warn('CameraSetSmoothingFactor was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCineFilterTexture takes string filename returns nothing\r\n */\r\nfunction SetCineFilterTexture(C: Context, L: lua_State): number {\r\n  const _filename = luaL_checkstring(L, 1);\r\n  console.warn('SetCineFilterTexture was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCineFilterBlendMode takes blendmode whichMode returns nothing\r\n */\r\nfunction SetCineFilterBlendMode(C: Context, L: lua_State): number {\r\n  const _whichMode = lua_touserdata(L, 1);\r\n  console.warn('SetCineFilterBlendMode was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCineFilterTexMapFlags takes texmapflags whichFlags returns nothing\r\n */\r\nfunction SetCineFilterTexMapFlags(C: Context, L: lua_State): number {\r\n  const _whichFlags = lua_touserdata(L, 1);\r\n  console.warn('SetCineFilterTexMapFlags was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCineFilterStartUV takes real minu, real minv, real maxu, real maxv returns nothing\r\n */\r\nfunction SetCineFilterStartUV(C: Context, L: lua_State): number {\r\n  const _minu = luaL_checknumber(L, 1);\r\n  const _minv = luaL_checknumber(L, 2);\r\n  const _maxu = luaL_checknumber(L, 3);\r\n  const _maxv = luaL_checknumber(L, 4);\r\n  console.warn('SetCineFilterStartUV was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCineFilterEndUV takes real minu, real minv, real maxu, real maxv returns nothing\r\n */\r\nfunction SetCineFilterEndUV(C: Context, L: lua_State): number {\r\n  const _minu = luaL_checknumber(L, 1);\r\n  const _minv = luaL_checknumber(L, 2);\r\n  const _maxu = luaL_checknumber(L, 3);\r\n  const _maxv = luaL_checknumber(L, 4);\r\n  console.warn('SetCineFilterEndUV was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCineFilterStartColor takes integer red, integer green, integer blue, integer alpha returns nothing\r\n */\r\nfunction SetCineFilterStartColor(C: Context, L: lua_State): number {\r\n  const _red = luaL_checkinteger(L, 1);\r\n  const _green = luaL_checkinteger(L, 2);\r\n  const _blue = luaL_checkinteger(L, 3);\r\n  const _alpha = luaL_checkinteger(L, 4);\r\n  console.warn('SetCineFilterStartColor was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCineFilterEndColor takes integer red, integer green, integer blue, integer alpha returns nothing\r\n */\r\nfunction SetCineFilterEndColor(C: Context, L: lua_State): number {\r\n  const _red = luaL_checkinteger(L, 1);\r\n  const _green = luaL_checkinteger(L, 2);\r\n  const _blue = luaL_checkinteger(L, 3);\r\n  const _alpha = luaL_checkinteger(L, 4);\r\n  console.warn('SetCineFilterEndColor was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetCineFilterDuration takes real duration returns nothing\r\n */\r\nfunction SetCineFilterDuration(C: Context, L: lua_State): number {\r\n  const _duration = luaL_checknumber(L, 1);\r\n  console.warn('SetCineFilterDuration was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native DisplayCineFilter takes boolean flag returns nothing\r\n */\r\nfunction DisplayCineFilter(C: Context, L: lua_State): number {\r\n  const _flag = lua_toboolean(L, 1);\r\n  console.warn('DisplayCineFilter was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native IsCineFilterDisplayed takes nothing returns boolean\r\n */\r\nfunction IsCineFilterDisplayed(C: Context, L: lua_State): number {\r\n\r\n  console.warn('IsCineFilterDisplayed was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetCinematicScene takes integer portraitUnitId, playercolor color, string speakerTitle, string text, real sceneDuration, real voiceoverDuration returns nothing\r\n */\r\nfunction SetCinematicScene(C: Context, L: lua_State): number {\r\n  const _portraitUnitId = luaL_checkinteger(L, 1);\r\n  const _color = lua_touserdata(L, 2);\r\n  const _speakerTitle = luaL_checkstring(L, 3);\r\n  const _text = luaL_checkstring(L, 4);\r\n  const _sceneDuration = luaL_checknumber(L, 5);\r\n  const _voiceoverDuration = luaL_checknumber(L, 6);\r\n  console.warn('SetCinematicScene was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native EndCinematicScene takes nothing returns nothing\r\n */\r\nfunction EndCinematicScene(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('EndCinematicScene was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ForceCinematicSubtitles takes boolean flag returns nothing\r\n */\r\nfunction ForceCinematicSubtitles(C: Context, L: lua_State): number {\r\n  const _flag = lua_toboolean(L, 1);\r\n  console.warn('ForceCinematicSubtitles was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetCameraMargin takes integer whichMargin returns real\r\n */\r\nfunction GetCameraMargin(C: Context, L: lua_State): number {\r\n  const _whichMargin = luaL_checkinteger(L, 1);\r\n  console.warn('GetCameraMargin was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetCameraBoundMinX takes nothing returns real\r\n */\r\nfunction GetCameraBoundMinX(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetCameraBoundMinX was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetCameraBoundMinY takes nothing returns real\r\n */\r\nfunction GetCameraBoundMinY(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetCameraBoundMinY was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetCameraBoundMaxX takes nothing returns real\r\n */\r\nfunction GetCameraBoundMaxX(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetCameraBoundMaxX was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetCameraBoundMaxY takes nothing returns real\r\n */\r\nfunction GetCameraBoundMaxY(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetCameraBoundMaxY was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetCameraField takes camerafield whichField returns real\r\n */\r\nfunction GetCameraField(C: Context, L: lua_State): number {\r\n  const _whichField = lua_touserdata(L, 1);\r\n  console.warn('GetCameraField was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetCameraTargetPositionX takes nothing returns real\r\n */\r\nfunction GetCameraTargetPositionX(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetCameraTargetPositionX was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetCameraTargetPositionY takes nothing returns real\r\n */\r\nfunction GetCameraTargetPositionY(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetCameraTargetPositionY was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetCameraTargetPositionZ takes nothing returns real\r\n */\r\nfunction GetCameraTargetPositionZ(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetCameraTargetPositionZ was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetCameraTargetPositionLoc takes nothing returns location\r\n */\r\nfunction GetCameraTargetPositionLoc(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetCameraTargetPositionLoc was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetCameraEyePositionX takes nothing returns real\r\n */\r\nfunction GetCameraEyePositionX(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetCameraEyePositionX was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetCameraEyePositionY takes nothing returns real\r\n */\r\nfunction GetCameraEyePositionY(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetCameraEyePositionY was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetCameraEyePositionZ takes nothing returns real\r\n */\r\nfunction GetCameraEyePositionZ(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetCameraEyePositionZ was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * constant native GetCameraEyePositionLoc takes nothing returns location\r\n */\r\nfunction GetCameraEyePositionLoc(C: Context, L: lua_State): number {\r\n\r\n  console.warn('GetCameraEyePositionLoc was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native NewSoundEnvironment takes string environmentName returns nothing\r\n */\r\nfunction NewSoundEnvironment(C: Context, L: lua_State): number {\r\n  const _environmentName = luaL_checkstring(L, 1);\r\n  console.warn('NewSoundEnvironment was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CreateSound takes string fileName, boolean looping, boolean is3D, boolean stopwhenoutofrange, integer fadeInRate, integer fadeOutRate, string eaxSetting returns sound\r\n */\r\nfunction CreateSound(C: Context, L: lua_State): number {\r\n  const _fileName = luaL_checkstring(L, 1);\r\n  const _looping = lua_toboolean(L, 2);\r\n  const _is3D = lua_toboolean(L, 3);\r\n  const _stopwhenoutofrange = lua_toboolean(L, 4);\r\n  const _fadeInRate = luaL_checkinteger(L, 5);\r\n  const _fadeOutRate = luaL_checkinteger(L, 6);\r\n  const _eaxSetting = luaL_checkstring(L, 7);\r\n  console.warn('CreateSound was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateSoundFilenameWithLabel takes string fileName, boolean looping, boolean is3D, boolean stopwhenoutofrange, integer fadeInRate, integer fadeOutRate, string SLKEntryName returns sound\r\n */\r\nfunction CreateSoundFilenameWithLabel(C: Context, L: lua_State): number {\r\n  const _fileName = luaL_checkstring(L, 1);\r\n  const _looping = lua_toboolean(L, 2);\r\n  const _is3D = lua_toboolean(L, 3);\r\n  const _stopwhenoutofrange = lua_toboolean(L, 4);\r\n  const _fadeInRate = luaL_checkinteger(L, 5);\r\n  const _fadeOutRate = luaL_checkinteger(L, 6);\r\n  const _SLKEntryName = luaL_checkstring(L, 7);\r\n  console.warn('CreateSoundFilenameWithLabel was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateSoundFromLabel takes string soundLabel, boolean looping, boolean is3D, boolean stopwhenoutofrange, integer fadeInRate, integer fadeOutRate returns sound\r\n */\r\nfunction CreateSoundFromLabel(C: Context, L: lua_State): number {\r\n  const _soundLabel = luaL_checkstring(L, 1);\r\n  const _looping = lua_toboolean(L, 2);\r\n  const _is3D = lua_toboolean(L, 3);\r\n  const _stopwhenoutofrange = lua_toboolean(L, 4);\r\n  const _fadeInRate = luaL_checkinteger(L, 5);\r\n  const _fadeOutRate = luaL_checkinteger(L, 6);\r\n  console.warn('CreateSoundFromLabel was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native CreateMIDISound takes string soundLabel, integer fadeInRate, integer fadeOutRate returns sound\r\n */\r\nfunction CreateMIDISound(C: Context, L: lua_State): number {\r\n  const _soundLabel = luaL_checkstring(L, 1);\r\n  const _fadeInRate = luaL_checkinteger(L, 2);\r\n  const _fadeOutRate = luaL_checkinteger(L, 3);\r\n  console.warn('CreateMIDISound was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetSoundParamsFromLabel takes sound soundHandle, string soundLabel returns nothing\r\n */\r\nfunction SetSoundParamsFromLabel(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  const _soundLabel = luaL_checkstring(L, 2);\r\n  console.warn('SetSoundParamsFromLabel was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetSoundDistanceCutoff takes sound soundHandle, real cutoff returns nothing\r\n */\r\nfunction SetSoundDistanceCutoff(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  const _cutoff = luaL_checknumber(L, 2);\r\n  console.warn('SetSoundDistanceCutoff was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetSoundChannel takes sound soundHandle, integer channel returns nothing\r\n */\r\nfunction SetSoundChannel(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  const _channel = luaL_checkinteger(L, 2);\r\n  console.warn('SetSoundChannel was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetSoundVolume takes sound soundHandle, integer volume returns nothing\r\n */\r\nfunction SetSoundVolume(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  const _volume = luaL_checkinteger(L, 2);\r\n  console.warn('SetSoundVolume was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetSoundPitch takes sound soundHandle, real pitch returns nothing\r\n */\r\nfunction SetSoundPitch(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  const _pitch = luaL_checknumber(L, 2);\r\n  console.warn('SetSoundPitch was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetSoundPlayPosition takes sound soundHandle, integer millisecs returns nothing\r\n */\r\nfunction SetSoundPlayPosition(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  const _millisecs = luaL_checkinteger(L, 2);\r\n  console.warn('SetSoundPlayPosition was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetSoundDistances takes sound soundHandle, real minDist, real maxDist returns nothing\r\n */\r\nfunction SetSoundDistances(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  const _minDist = luaL_checknumber(L, 2);\r\n  const _maxDist = luaL_checknumber(L, 3);\r\n  console.warn('SetSoundDistances was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetSoundConeAngles takes sound soundHandle, real inside, real outside, integer outsideVolume returns nothing\r\n */\r\nfunction SetSoundConeAngles(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  const _inside = luaL_checknumber(L, 2);\r\n  const _outside = luaL_checknumber(L, 3);\r\n  const _outsideVolume = luaL_checkinteger(L, 4);\r\n  console.warn('SetSoundConeAngles was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetSoundConeOrientation takes sound soundHandle, real x, real y, real z returns nothing\r\n */\r\nfunction SetSoundConeOrientation(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _z = luaL_checknumber(L, 4);\r\n  console.warn('SetSoundConeOrientation was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetSoundPosition takes sound soundHandle, real x, real y, real z returns nothing\r\n */\r\nfunction SetSoundPosition(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _z = luaL_checknumber(L, 4);\r\n  console.warn('SetSoundPosition was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetSoundVelocity takes sound soundHandle, real x, real y, real z returns nothing\r\n */\r\nfunction SetSoundVelocity(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _z = luaL_checknumber(L, 4);\r\n  console.warn('SetSoundVelocity was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native AttachSoundToUnit takes sound soundHandle, unit whichUnit returns nothing\r\n */\r\nfunction AttachSoundToUnit(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  const _whichUnit = lua_touserdata(L, 2);\r\n  console.warn('AttachSoundToUnit was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native StartSound takes sound soundHandle returns nothing\r\n */\r\nfunction StartSound(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  console.warn('StartSound was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native StopSound takes sound soundHandle, boolean killWhenDone, boolean fadeOut returns nothing\r\n */\r\nfunction StopSound(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  const _killWhenDone = lua_toboolean(L, 2);\r\n  const _fadeOut = lua_toboolean(L, 3);\r\n  console.warn('StopSound was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native KillSoundWhenDone takes sound soundHandle returns nothing\r\n */\r\nfunction KillSoundWhenDone(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  console.warn('KillSoundWhenDone was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetMapMusic takes string musicName, boolean random, integer index returns nothing\r\n */\r\nfunction SetMapMusic(C: Context, L: lua_State): number {\r\n  const _musicName = luaL_checkstring(L, 1);\r\n  const _random = lua_toboolean(L, 2);\r\n  const _index = luaL_checkinteger(L, 3);\r\n  console.warn('SetMapMusic was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ClearMapMusic takes nothing returns nothing\r\n */\r\nfunction ClearMapMusic(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('ClearMapMusic was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PlayMusic takes string musicName returns nothing\r\n */\r\nfunction PlayMusic(C: Context, L: lua_State): number {\r\n  const _musicName = luaL_checkstring(L, 1);\r\n  console.warn('PlayMusic was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PlayMusicEx takes string musicName, integer frommsecs, integer fadeinmsecs returns nothing\r\n */\r\nfunction PlayMusicEx(C: Context, L: lua_State): number {\r\n  const _musicName = luaL_checkstring(L, 1);\r\n  const _frommsecs = luaL_checkinteger(L, 2);\r\n  const _fadeinmsecs = luaL_checkinteger(L, 3);\r\n  console.warn('PlayMusicEx was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native StopMusic takes boolean fadeOut returns nothing\r\n */\r\nfunction StopMusic(C: Context, L: lua_State): number {\r\n  const _fadeOut = lua_toboolean(L, 1);\r\n  console.warn('StopMusic was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ResumeMusic takes nothing returns nothing\r\n */\r\nfunction ResumeMusic(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('ResumeMusic was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PlayThematicMusic takes string musicFileName returns nothing\r\n */\r\nfunction PlayThematicMusic(C: Context, L: lua_State): number {\r\n  const _musicFileName = luaL_checkstring(L, 1);\r\n  console.warn('PlayThematicMusic was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PlayThematicMusicEx takes string musicFileName, integer frommsecs returns nothing\r\n */\r\nfunction PlayThematicMusicEx(C: Context, L: lua_State): number {\r\n  const _musicFileName = luaL_checkstring(L, 1);\r\n  const _frommsecs = luaL_checkinteger(L, 2);\r\n  console.warn('PlayThematicMusicEx was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native EndThematicMusic takes nothing returns nothing\r\n */\r\nfunction EndThematicMusic(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('EndThematicMusic was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetMusicVolume takes integer volume returns nothing\r\n */\r\nfunction SetMusicVolume(C: Context, L: lua_State): number {\r\n  const _volume = luaL_checkinteger(L, 1);\r\n  console.warn('SetMusicVolume was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetMusicPlayPosition takes integer millisecs returns nothing\r\n */\r\nfunction SetMusicPlayPosition(C: Context, L: lua_State): number {\r\n  const _millisecs = luaL_checkinteger(L, 1);\r\n  console.warn('SetMusicPlayPosition was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetThematicMusicPlayPosition takes integer millisecs returns nothing\r\n */\r\nfunction SetThematicMusicPlayPosition(C: Context, L: lua_State): number {\r\n  const _millisecs = luaL_checkinteger(L, 1);\r\n  console.warn('SetThematicMusicPlayPosition was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetSoundDuration takes sound soundHandle, integer duration returns nothing\r\n */\r\nfunction SetSoundDuration(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  const _duration = luaL_checkinteger(L, 2);\r\n  console.warn('SetSoundDuration was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetSoundDuration takes sound soundHandle returns integer\r\n */\r\nfunction GetSoundDuration(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  console.warn('GetSoundDuration was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetSoundFileDuration takes string musicFileName returns integer\r\n */\r\nfunction GetSoundFileDuration(C: Context, L: lua_State): number {\r\n  const _musicFileName = luaL_checkstring(L, 1);\r\n  console.warn('GetSoundFileDuration was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native VolumeGroupSetVolume takes volumegroup vgroup, real scale returns nothing\r\n */\r\nfunction VolumeGroupSetVolume(C: Context, L: lua_State): number {\r\n  const _vgroup = lua_touserdata(L, 1);\r\n  const _scale = luaL_checknumber(L, 2);\r\n  console.warn('VolumeGroupSetVolume was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native VolumeGroupReset takes nothing returns nothing\r\n */\r\nfunction VolumeGroupReset(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('VolumeGroupReset was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetSoundIsPlaying takes sound soundHandle returns boolean\r\n */\r\nfunction GetSoundIsPlaying(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  console.warn('GetSoundIsPlaying was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetSoundIsLoading takes sound soundHandle returns boolean\r\n */\r\nfunction GetSoundIsLoading(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  console.warn('GetSoundIsLoading was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native RegisterStackedSound takes sound soundHandle, boolean byPosition, real rectwidth, real rectheight returns nothing\r\n */\r\nfunction RegisterStackedSound(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  const _byPosition = lua_toboolean(L, 2);\r\n  const _rectwidth = luaL_checknumber(L, 3);\r\n  const _rectheight = luaL_checknumber(L, 4);\r\n  console.warn('RegisterStackedSound was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native UnregisterStackedSound takes sound soundHandle, boolean byPosition, real rectwidth, real rectheight returns nothing\r\n */\r\nfunction UnregisterStackedSound(C: Context, L: lua_State): number {\r\n  const _soundHandle = lua_touserdata(L, 1);\r\n  const _byPosition = lua_toboolean(L, 2);\r\n  const _rectwidth = luaL_checknumber(L, 3);\r\n  const _rectheight = luaL_checknumber(L, 4);\r\n  console.warn('UnregisterStackedSound was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native AddWeatherEffect takes rect where, integer effectID returns weathereffect\r\n */\r\nfunction AddWeatherEffect(C: Context, L: lua_State): number {\r\n  const _where = lua_touserdata(L, 1);\r\n  const _effectID = luaL_checkinteger(L, 2);\r\n  console.warn('AddWeatherEffect was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native RemoveWeatherEffect takes weathereffect whichEffect returns nothing\r\n */\r\nfunction RemoveWeatherEffect(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  console.warn('RemoveWeatherEffect was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native EnableWeatherEffect takes weathereffect whichEffect, boolean enable returns nothing\r\n */\r\nfunction EnableWeatherEffect(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  const _enable = lua_toboolean(L, 2);\r\n  console.warn('EnableWeatherEffect was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native TerrainDeformCrater takes real x, real y, real radius, real depth, integer duration, boolean permanent returns terraindeformation\r\n */\r\nfunction TerrainDeformCrater(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  const _radius = luaL_checknumber(L, 3);\r\n  const _depth = luaL_checknumber(L, 4);\r\n  const _duration = luaL_checkinteger(L, 5);\r\n  const _permanent = lua_toboolean(L, 6);\r\n  console.warn('TerrainDeformCrater was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TerrainDeformRipple takes real x, real y, real radius, real depth, integer duration, integer count, real spaceWaves, real timeWaves, real radiusStartPct, boolean limitNeg returns terraindeformation\r\n */\r\nfunction TerrainDeformRipple(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  const _radius = luaL_checknumber(L, 3);\r\n  const _depth = luaL_checknumber(L, 4);\r\n  const _duration = luaL_checkinteger(L, 5);\r\n  const _count = luaL_checkinteger(L, 6);\r\n  const _spaceWaves = luaL_checknumber(L, 7);\r\n  const _timeWaves = luaL_checknumber(L, 8);\r\n  const _radiusStartPct = luaL_checknumber(L, 9);\r\n  const _limitNeg = lua_toboolean(L, 10);\r\n  console.warn('TerrainDeformRipple was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TerrainDeformWave takes real x, real y, real dirX, real dirY, real distance, real speed, real radius, real depth, integer trailTime, integer count returns terraindeformation\r\n */\r\nfunction TerrainDeformWave(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  const _dirX = luaL_checknumber(L, 3);\r\n  const _dirY = luaL_checknumber(L, 4);\r\n  const _distance = luaL_checknumber(L, 5);\r\n  const _speed = luaL_checknumber(L, 6);\r\n  const _radius = luaL_checknumber(L, 7);\r\n  const _depth = luaL_checknumber(L, 8);\r\n  const _trailTime = luaL_checkinteger(L, 9);\r\n  const _count = luaL_checkinteger(L, 10);\r\n  console.warn('TerrainDeformWave was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TerrainDeformRandom takes real x, real y, real radius, real minDelta, real maxDelta, integer duration, integer updateInterval returns terraindeformation\r\n */\r\nfunction TerrainDeformRandom(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  const _radius = luaL_checknumber(L, 3);\r\n  const _minDelta = luaL_checknumber(L, 4);\r\n  const _maxDelta = luaL_checknumber(L, 5);\r\n  const _duration = luaL_checkinteger(L, 6);\r\n  const _updateInterval = luaL_checkinteger(L, 7);\r\n  console.warn('TerrainDeformRandom was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native TerrainDeformStop takes terraindeformation deformation, integer duration returns nothing\r\n */\r\nfunction TerrainDeformStop(C: Context, L: lua_State): number {\r\n  const _deformation = lua_touserdata(L, 1);\r\n  const _duration = luaL_checkinteger(L, 2);\r\n  console.warn('TerrainDeformStop was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native TerrainDeformStopAll takes nothing returns nothing\r\n */\r\nfunction TerrainDeformStopAll(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('TerrainDeformStopAll was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native AddSpecialEffect takes string modelName, real x, real y returns effect\r\n */\r\nfunction AddSpecialEffect(C: Context, L: lua_State): number {\r\n  const _modelName = luaL_checkstring(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  console.warn('AddSpecialEffect was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native AddSpecialEffectLoc takes string modelName, location where returns effect\r\n */\r\nfunction AddSpecialEffectLoc(C: Context, L: lua_State): number {\r\n  const _modelName = luaL_checkstring(L, 1);\r\n  const _where = lua_touserdata(L, 2);\r\n  console.warn('AddSpecialEffectLoc was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native AddSpecialEffectTarget takes string modelName, widget targetWidget, string attachPointName returns effect\r\n */\r\nfunction AddSpecialEffectTarget(C: Context, L: lua_State): number {\r\n  const _modelName = luaL_checkstring(L, 1);\r\n  const _targetWidget = lua_touserdata(L, 2);\r\n  const _attachPointName = luaL_checkstring(L, 3);\r\n  console.warn('AddSpecialEffectTarget was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DestroyEffect takes effect whichEffect returns nothing\r\n */\r\nfunction DestroyEffect(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  console.warn('DestroyEffect was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native AddSpellEffect takes string abilityString, effecttype t, real x, real y returns effect\r\n */\r\nfunction AddSpellEffect(C: Context, L: lua_State): number {\r\n  const _abilityString = luaL_checkstring(L, 1);\r\n  const _t = lua_touserdata(L, 2);\r\n  const _x = luaL_checknumber(L, 3);\r\n  const _y = luaL_checknumber(L, 4);\r\n  console.warn('AddSpellEffect was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native AddSpellEffectLoc takes string abilityString, effecttype t, location where returns effect\r\n */\r\nfunction AddSpellEffectLoc(C: Context, L: lua_State): number {\r\n  const _abilityString = luaL_checkstring(L, 1);\r\n  const _t = lua_touserdata(L, 2);\r\n  const _where = lua_touserdata(L, 3);\r\n  console.warn('AddSpellEffectLoc was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native AddSpellEffectById takes integer abilityId, effecttype t, real x, real y returns effect\r\n */\r\nfunction AddSpellEffectById(C: Context, L: lua_State): number {\r\n  const _abilityId = luaL_checkinteger(L, 1);\r\n  const _t = lua_touserdata(L, 2);\r\n  const _x = luaL_checknumber(L, 3);\r\n  const _y = luaL_checknumber(L, 4);\r\n  console.warn('AddSpellEffectById was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native AddSpellEffectByIdLoc takes integer abilityId, effecttype t, location where returns effect\r\n */\r\nfunction AddSpellEffectByIdLoc(C: Context, L: lua_State): number {\r\n  const _abilityId = luaL_checkinteger(L, 1);\r\n  const _t = lua_touserdata(L, 2);\r\n  const _where = lua_touserdata(L, 3);\r\n  console.warn('AddSpellEffectByIdLoc was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native AddSpellEffectTarget takes string modelName, effecttype t, widget targetWidget, string attachPoint returns effect\r\n */\r\nfunction AddSpellEffectTarget(C: Context, L: lua_State): number {\r\n  const _modelName = luaL_checkstring(L, 1);\r\n  const _t = lua_touserdata(L, 2);\r\n  const _targetWidget = lua_touserdata(L, 3);\r\n  const _attachPoint = luaL_checkstring(L, 4);\r\n  console.warn('AddSpellEffectTarget was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native AddSpellEffectTargetById takes integer abilityId, effecttype t, widget targetWidget, string attachPoint returns effect\r\n */\r\nfunction AddSpellEffectTargetById(C: Context, L: lua_State): number {\r\n  const _abilityId = luaL_checkinteger(L, 1);\r\n  const _t = lua_touserdata(L, 2);\r\n  const _targetWidget = lua_touserdata(L, 3);\r\n  const _attachPoint = luaL_checkstring(L, 4);\r\n  console.warn('AddSpellEffectTargetById was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native AddLightning takes string codeName, boolean checkVisibility, real x1, real y1, real x2, real y2 returns lightning\r\n */\r\nfunction AddLightning(C: Context, L: lua_State): number {\r\n  const _codeName = luaL_checkstring(L, 1);\r\n  const _checkVisibility = lua_toboolean(L, 2);\r\n  const _x1 = luaL_checknumber(L, 3);\r\n  const _y1 = luaL_checknumber(L, 4);\r\n  const _x2 = luaL_checknumber(L, 5);\r\n  const _y2 = luaL_checknumber(L, 6);\r\n  console.warn('AddLightning was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native AddLightningEx takes string codeName, boolean checkVisibility, real x1, real y1, real z1, real x2, real y2, real z2 returns lightning\r\n */\r\nfunction AddLightningEx(C: Context, L: lua_State): number {\r\n  const _codeName = luaL_checkstring(L, 1);\r\n  const _checkVisibility = lua_toboolean(L, 2);\r\n  const _x1 = luaL_checknumber(L, 3);\r\n  const _y1 = luaL_checknumber(L, 4);\r\n  const _z1 = luaL_checknumber(L, 5);\r\n  const _x2 = luaL_checknumber(L, 6);\r\n  const _y2 = luaL_checknumber(L, 7);\r\n  const _z2 = luaL_checknumber(L, 8);\r\n  console.warn('AddLightningEx was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DestroyLightning takes lightning whichBolt returns boolean\r\n */\r\nfunction DestroyLightning(C: Context, L: lua_State): number {\r\n  const _whichBolt = lua_touserdata(L, 1);\r\n  console.warn('DestroyLightning was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native MoveLightning takes lightning whichBolt, boolean checkVisibility, real x1, real y1, real x2, real y2 returns boolean\r\n */\r\nfunction MoveLightning(C: Context, L: lua_State): number {\r\n  const _whichBolt = lua_touserdata(L, 1);\r\n  const _checkVisibility = lua_toboolean(L, 2);\r\n  const _x1 = luaL_checknumber(L, 3);\r\n  const _y1 = luaL_checknumber(L, 4);\r\n  const _x2 = luaL_checknumber(L, 5);\r\n  const _y2 = luaL_checknumber(L, 6);\r\n  console.warn('MoveLightning was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native MoveLightningEx takes lightning whichBolt, boolean checkVisibility, real x1, real y1, real z1, real x2, real y2, real z2 returns boolean\r\n */\r\nfunction MoveLightningEx(C: Context, L: lua_State): number {\r\n  const _whichBolt = lua_touserdata(L, 1);\r\n  const _checkVisibility = lua_toboolean(L, 2);\r\n  const _x1 = luaL_checknumber(L, 3);\r\n  const _y1 = luaL_checknumber(L, 4);\r\n  const _z1 = luaL_checknumber(L, 5);\r\n  const _x2 = luaL_checknumber(L, 6);\r\n  const _y2 = luaL_checknumber(L, 7);\r\n  const _z2 = luaL_checknumber(L, 8);\r\n  console.warn('MoveLightningEx was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetLightningColorA takes lightning whichBolt returns real\r\n */\r\nfunction GetLightningColorA(C: Context, L: lua_State): number {\r\n  const _whichBolt = lua_touserdata(L, 1);\r\n  console.warn('GetLightningColorA was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetLightningColorR takes lightning whichBolt returns real\r\n */\r\nfunction GetLightningColorR(C: Context, L: lua_State): number {\r\n  const _whichBolt = lua_touserdata(L, 1);\r\n  console.warn('GetLightningColorR was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetLightningColorG takes lightning whichBolt returns real\r\n */\r\nfunction GetLightningColorG(C: Context, L: lua_State): number {\r\n  const _whichBolt = lua_touserdata(L, 1);\r\n  console.warn('GetLightningColorG was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetLightningColorB takes lightning whichBolt returns real\r\n */\r\nfunction GetLightningColorB(C: Context, L: lua_State): number {\r\n  const _whichBolt = lua_touserdata(L, 1);\r\n  console.warn('GetLightningColorB was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetLightningColor takes lightning whichBolt, real r, real g, real b, real a returns boolean\r\n */\r\nfunction SetLightningColor(C: Context, L: lua_State): number {\r\n  const _whichBolt = lua_touserdata(L, 1);\r\n  const _r = luaL_checknumber(L, 2);\r\n  const _g = luaL_checknumber(L, 3);\r\n  const _b = luaL_checknumber(L, 4);\r\n  const _a = luaL_checknumber(L, 5);\r\n  console.warn('SetLightningColor was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetAbilityEffect takes string abilityString, effecttype t, integer index returns string\r\n */\r\nfunction GetAbilityEffect(C: Context, L: lua_State): number {\r\n  const _abilityString = luaL_checkstring(L, 1);\r\n  const _t = lua_touserdata(L, 2);\r\n  const _index = luaL_checkinteger(L, 3);\r\n  console.warn('GetAbilityEffect was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetAbilityEffectById takes integer abilityId, effecttype t, integer index returns string\r\n */\r\nfunction GetAbilityEffectById(C: Context, L: lua_State): number {\r\n  const _abilityId = luaL_checkinteger(L, 1);\r\n  const _t = lua_touserdata(L, 2);\r\n  const _index = luaL_checkinteger(L, 3);\r\n  console.warn('GetAbilityEffectById was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetAbilitySound takes string abilityString, soundtype t returns string\r\n */\r\nfunction GetAbilitySound(C: Context, L: lua_State): number {\r\n  const _abilityString = luaL_checkstring(L, 1);\r\n  const _t = lua_touserdata(L, 2);\r\n  console.warn('GetAbilitySound was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetAbilitySoundById takes integer abilityId, soundtype t returns string\r\n */\r\nfunction GetAbilitySoundById(C: Context, L: lua_State): number {\r\n  const _abilityId = luaL_checkinteger(L, 1);\r\n  const _t = lua_touserdata(L, 2);\r\n  console.warn('GetAbilitySoundById was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetTerrainCliffLevel takes real x, real y returns integer\r\n */\r\nfunction GetTerrainCliffLevel(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  console.warn('GetTerrainCliffLevel was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetWaterBaseColor takes integer red, integer green, integer blue, integer alpha returns nothing\r\n */\r\nfunction SetWaterBaseColor(C: Context, L: lua_State): number {\r\n  const _red = luaL_checkinteger(L, 1);\r\n  const _green = luaL_checkinteger(L, 2);\r\n  const _blue = luaL_checkinteger(L, 3);\r\n  const _alpha = luaL_checkinteger(L, 4);\r\n  console.warn('SetWaterBaseColor was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetWaterDeforms takes boolean val returns nothing\r\n */\r\nfunction SetWaterDeforms(C: Context, L: lua_State): number {\r\n  const _val = lua_toboolean(L, 1);\r\n  console.warn('SetWaterDeforms was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetTerrainType takes real x, real y returns integer\r\n */\r\nfunction GetTerrainType(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  console.warn('GetTerrainType was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native GetTerrainVariance takes real x, real y returns integer\r\n */\r\nfunction GetTerrainVariance(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  console.warn('GetTerrainVariance was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetTerrainType takes real x, real y, integer terrainType, integer variation, integer area, integer shape returns nothing\r\n */\r\nfunction SetTerrainType(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  const _terrainType = luaL_checkinteger(L, 3);\r\n  const _variation = luaL_checkinteger(L, 4);\r\n  const _area = luaL_checkinteger(L, 5);\r\n  const _shape = luaL_checkinteger(L, 6);\r\n  console.warn('SetTerrainType was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native IsTerrainPathable takes real x, real y, pathingtype t returns boolean\r\n */\r\nfunction IsTerrainPathable(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  const _t = lua_touserdata(L, 3);\r\n  console.warn('IsTerrainPathable was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetTerrainPathable takes real x, real y, pathingtype t, boolean flag returns nothing\r\n */\r\nfunction SetTerrainPathable(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  const _t = lua_touserdata(L, 3);\r\n  const _flag = lua_toboolean(L, 4);\r\n  console.warn('SetTerrainPathable was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CreateImage takes string file, real sizeX, real sizeY, real sizeZ, real posX, real posY, real posZ, real originX, real originY, real originZ, integer imageType returns image\r\n */\r\nfunction CreateImage(C: Context, L: lua_State): number {\r\n  const _file = luaL_checkstring(L, 1);\r\n  const _sizeX = luaL_checknumber(L, 2);\r\n  const _sizeY = luaL_checknumber(L, 3);\r\n  const _sizeZ = luaL_checknumber(L, 4);\r\n  const _posX = luaL_checknumber(L, 5);\r\n  const _posY = luaL_checknumber(L, 6);\r\n  const _posZ = luaL_checknumber(L, 7);\r\n  const _originX = luaL_checknumber(L, 8);\r\n  const _originY = luaL_checknumber(L, 9);\r\n  const _originZ = luaL_checknumber(L, 10);\r\n  const _imageType = luaL_checkinteger(L, 11);\r\n  console.warn('CreateImage was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DestroyImage takes image whichImage returns nothing\r\n */\r\nfunction DestroyImage(C: Context, L: lua_State): number {\r\n  const _whichImage = lua_touserdata(L, 1);\r\n  console.warn('DestroyImage was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ShowImage takes image whichImage, boolean flag returns nothing\r\n */\r\nfunction ShowImage(C: Context, L: lua_State): number {\r\n  const _whichImage = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('ShowImage was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetImageConstantHeight takes image whichImage, boolean flag, real height returns nothing\r\n */\r\nfunction SetImageConstantHeight(C: Context, L: lua_State): number {\r\n  const _whichImage = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  const _height = luaL_checknumber(L, 3);\r\n  console.warn('SetImageConstantHeight was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetImagePosition takes image whichImage, real x, real y, real z returns nothing\r\n */\r\nfunction SetImagePosition(C: Context, L: lua_State): number {\r\n  const _whichImage = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _z = luaL_checknumber(L, 4);\r\n  console.warn('SetImagePosition was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetImageColor takes image whichImage, integer red, integer green, integer blue, integer alpha returns nothing\r\n */\r\nfunction SetImageColor(C: Context, L: lua_State): number {\r\n  const _whichImage = lua_touserdata(L, 1);\r\n  const _red = luaL_checkinteger(L, 2);\r\n  const _green = luaL_checkinteger(L, 3);\r\n  const _blue = luaL_checkinteger(L, 4);\r\n  const _alpha = luaL_checkinteger(L, 5);\r\n  console.warn('SetImageColor was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetImageRender takes image whichImage, boolean flag returns nothing\r\n */\r\nfunction SetImageRender(C: Context, L: lua_State): number {\r\n  const _whichImage = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('SetImageRender was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetImageRenderAlways takes image whichImage, boolean flag returns nothing\r\n */\r\nfunction SetImageRenderAlways(C: Context, L: lua_State): number {\r\n  const _whichImage = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('SetImageRenderAlways was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetImageAboveWater takes image whichImage, boolean flag, boolean useWaterAlpha returns nothing\r\n */\r\nfunction SetImageAboveWater(C: Context, L: lua_State): number {\r\n  const _whichImage = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  const _useWaterAlpha = lua_toboolean(L, 3);\r\n  console.warn('SetImageAboveWater was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetImageType takes image whichImage, integer imageType returns nothing\r\n */\r\nfunction SetImageType(C: Context, L: lua_State): number {\r\n  const _whichImage = lua_touserdata(L, 1);\r\n  const _imageType = luaL_checkinteger(L, 2);\r\n  console.warn('SetImageType was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CreateUbersplat takes real x, real y, string name, integer red, integer green, integer blue, integer alpha, boolean forcePaused, boolean noBirthTime returns ubersplat\r\n */\r\nfunction CreateUbersplat(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  const _name = luaL_checkstring(L, 3);\r\n  const _red = luaL_checkinteger(L, 4);\r\n  const _green = luaL_checkinteger(L, 5);\r\n  const _blue = luaL_checkinteger(L, 6);\r\n  const _alpha = luaL_checkinteger(L, 7);\r\n  const _forcePaused = lua_toboolean(L, 8);\r\n  const _noBirthTime = lua_toboolean(L, 9);\r\n  console.warn('CreateUbersplat was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native DestroyUbersplat takes ubersplat whichSplat returns nothing\r\n */\r\nfunction DestroyUbersplat(C: Context, L: lua_State): number {\r\n  const _whichSplat = lua_touserdata(L, 1);\r\n  console.warn('DestroyUbersplat was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ResetUbersplat takes ubersplat whichSplat returns nothing\r\n */\r\nfunction ResetUbersplat(C: Context, L: lua_State): number {\r\n  const _whichSplat = lua_touserdata(L, 1);\r\n  console.warn('ResetUbersplat was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native FinishUbersplat takes ubersplat whichSplat returns nothing\r\n */\r\nfunction FinishUbersplat(C: Context, L: lua_State): number {\r\n  const _whichSplat = lua_touserdata(L, 1);\r\n  console.warn('FinishUbersplat was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native ShowUbersplat takes ubersplat whichSplat, boolean flag returns nothing\r\n */\r\nfunction ShowUbersplat(C: Context, L: lua_State): number {\r\n  const _whichSplat = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('ShowUbersplat was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUbersplatRender takes ubersplat whichSplat, boolean flag returns nothing\r\n */\r\nfunction SetUbersplatRender(C: Context, L: lua_State): number {\r\n  const _whichSplat = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('SetUbersplatRender was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetUbersplatRenderAlways takes ubersplat whichSplat, boolean flag returns nothing\r\n */\r\nfunction SetUbersplatRenderAlways(C: Context, L: lua_State): number {\r\n  const _whichSplat = lua_touserdata(L, 1);\r\n  const _flag = lua_toboolean(L, 2);\r\n  console.warn('SetUbersplatRenderAlways was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetBlight takes player whichPlayer, real x, real y, real radius, boolean addBlight returns nothing\r\n */\r\nfunction SetBlight(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _radius = luaL_checknumber(L, 4);\r\n  const _addBlight = lua_toboolean(L, 5);\r\n  console.warn('SetBlight was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetBlightRect takes player whichPlayer, rect r, boolean addBlight returns nothing\r\n */\r\nfunction SetBlightRect(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _r = lua_touserdata(L, 2);\r\n  const _addBlight = lua_toboolean(L, 3);\r\n  console.warn('SetBlightRect was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetBlightPoint takes player whichPlayer, real x, real y, boolean addBlight returns nothing\r\n */\r\nfunction SetBlightPoint(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _addBlight = lua_toboolean(L, 4);\r\n  console.warn('SetBlightPoint was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetBlightLoc takes player whichPlayer, location whichLocation, real radius, boolean addBlight returns nothing\r\n */\r\nfunction SetBlightLoc(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _whichLocation = lua_touserdata(L, 2);\r\n  const _radius = luaL_checknumber(L, 3);\r\n  const _addBlight = lua_toboolean(L, 4);\r\n  console.warn('SetBlightLoc was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CreateBlightedGoldmine takes player id, real x, real y, real face returns unit\r\n */\r\nfunction CreateBlightedGoldmine(C: Context, L: lua_State): number {\r\n  const _id = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _face = luaL_checknumber(L, 4);\r\n  console.warn('CreateBlightedGoldmine was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IsPointBlighted takes real x, real y returns boolean\r\n */\r\nfunction IsPointBlighted(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  console.warn('IsPointBlighted was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native SetDoodadAnimation takes real x, real y, real radius, integer doodadID, boolean nearestOnly, string animName, boolean animRandom returns nothing\r\n */\r\nfunction SetDoodadAnimation(C: Context, L: lua_State): number {\r\n  const _x = luaL_checknumber(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  const _radius = luaL_checknumber(L, 3);\r\n  const _doodadID = luaL_checkinteger(L, 4);\r\n  const _nearestOnly = lua_toboolean(L, 5);\r\n  const _animName = luaL_checkstring(L, 6);\r\n  const _animRandom = lua_toboolean(L, 7);\r\n  console.warn('SetDoodadAnimation was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native SetDoodadAnimationRect takes rect r, integer doodadID, string animName, boolean animRandom returns nothing\r\n */\r\nfunction SetDoodadAnimationRect(C: Context, L: lua_State): number {\r\n  const _r = lua_touserdata(L, 1);\r\n  const _doodadID = luaL_checkinteger(L, 2);\r\n  const _animName = luaL_checkstring(L, 3);\r\n  const _animRandom = lua_toboolean(L, 4);\r\n  console.warn('SetDoodadAnimationRect was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native StartMeleeAI takes player num, string script returns nothing\r\n */\r\nfunction StartMeleeAI(C: Context, L: lua_State): number {\r\n  const _num = lua_touserdata(L, 1);\r\n  const _script = luaL_checkstring(L, 2);\r\n  console.warn('StartMeleeAI was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native StartCampaignAI takes player num, string script returns nothing\r\n */\r\nfunction StartCampaignAI(C: Context, L: lua_State): number {\r\n  const _num = lua_touserdata(L, 1);\r\n  const _script = luaL_checkstring(L, 2);\r\n  console.warn('StartCampaignAI was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native CommandAI takes player num, integer command, integer data returns nothing\r\n */\r\nfunction CommandAI(C: Context, L: lua_State): number {\r\n  const _num = lua_touserdata(L, 1);\r\n  const _command = luaL_checkinteger(L, 2);\r\n  const _data = luaL_checkinteger(L, 3);\r\n  console.warn('CommandAI was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PauseCompAI takes player p, boolean pause returns nothing\r\n */\r\nfunction PauseCompAI(C: Context, L: lua_State): number {\r\n  const _p = lua_touserdata(L, 1);\r\n  const _pause = lua_toboolean(L, 2);\r\n  console.warn('PauseCompAI was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native GetAIDifficulty takes player num returns aidifficulty\r\n */\r\nfunction GetAIDifficulty(C: Context, L: lua_State): number {\r\n  const _num = lua_touserdata(L, 1);\r\n  console.warn('GetAIDifficulty was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native RemoveGuardPosition takes unit hUnit returns nothing\r\n */\r\nfunction RemoveGuardPosition(C: Context, L: lua_State): number {\r\n  const _hUnit = lua_touserdata(L, 1);\r\n  console.warn('RemoveGuardPosition was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native RecycleGuardPosition takes unit hUnit returns nothing\r\n */\r\nfunction RecycleGuardPosition(C: Context, L: lua_State): number {\r\n  const _hUnit = lua_touserdata(L, 1);\r\n  console.warn('RecycleGuardPosition was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native RemoveAllGuardPositions takes player num returns nothing\r\n */\r\nfunction RemoveAllGuardPositions(C: Context, L: lua_State): number {\r\n  const _num = lua_touserdata(L, 1);\r\n  console.warn('RemoveAllGuardPositions was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native Cheat takes string cheatStr returns nothing\r\n */\r\nfunction Cheat(C: Context, L: lua_State): number {\r\n  const _cheatStr = luaL_checkstring(L, 1);\r\n  console.warn('Cheat was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native IsNoVictoryCheat takes nothing returns boolean\r\n */\r\nfunction IsNoVictoryCheat(C: Context, L: lua_State): number {\r\n\r\n  console.warn('IsNoVictoryCheat was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native IsNoDefeatCheat takes nothing returns boolean\r\n */\r\nfunction IsNoDefeatCheat(C: Context, L: lua_State): number {\r\n\r\n  console.warn('IsNoDefeatCheat was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native Preload takes string filename returns nothing\r\n */\r\nfunction Preload(C: Context, L: lua_State): number {\r\n  const _filename = luaL_checkstring(L, 1);\r\n  console.warn('Preload was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PreloadEnd takes real timeout returns nothing\r\n */\r\nfunction PreloadEnd(C: Context, L: lua_State): number {\r\n  const _timeout = luaL_checknumber(L, 1);\r\n  console.warn('PreloadEnd was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PreloadStart takes nothing returns nothing\r\n */\r\nfunction PreloadStart(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('PreloadStart was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PreloadRefresh takes nothing returns nothing\r\n */\r\nfunction PreloadRefresh(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('PreloadRefresh was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PreloadEndEx takes nothing returns nothing\r\n */\r\nfunction PreloadEndEx(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('PreloadEndEx was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PreloadGenClear takes nothing returns nothing\r\n */\r\nfunction PreloadGenClear(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('PreloadGenClear was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PreloadGenStart takes nothing returns nothing\r\n */\r\nfunction PreloadGenStart(_C: Context, _L: lua_State): number {\r\n\r\n  console.warn('PreloadGenStart was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native PreloadGenEnd takes string filename returns nothing\r\n */\r\nfunction PreloadGenEnd(C: Context, L: lua_State): number {\r\n  const _filename = luaL_checkstring(L, 1);\r\n  console.warn('PreloadGenEnd was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native Preloader takes string filename returns nothing\r\n */\r\nfunction Preloader(C: Context, L: lua_State): number {\r\n  const _filename = luaL_checkstring(L, 1);\r\n  console.warn('Preloader was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native AutomationTestStart takes string testName returns nothing\r\n */\r\nfunction AutomationTestStart(C: Context, L: lua_State): number {\r\n  const _testName = luaL_checkstring(L, 1);\r\n  console.warn('AutomationTestStart was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native AutomationTestEnd takes string testName returns nothing\r\n */\r\nfunction AutomationTestEnd(C: Context, L: lua_State): number {\r\n  const _testName = luaL_checkstring(L, 1);\r\n  console.warn('AutomationTestEnd was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzGetTriggerPlayerMouseX takes nothing returns real\r\n */\r\nfunction BlzGetTriggerPlayerMouseX(C: Context, L: lua_State): number {\r\n\r\n  console.warn('BlzGetTriggerPlayerMouseX was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzGetTriggerPlayerMouseY takes nothing returns real\r\n */\r\nfunction BlzGetTriggerPlayerMouseY(C: Context, L: lua_State): number {\r\n\r\n  console.warn('BlzGetTriggerPlayerMouseY was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzGetTriggerPlayerMousePosition takes nothing returns location\r\n */\r\nfunction BlzGetTriggerPlayerMousePosition(C: Context, L: lua_State): number {\r\n\r\n  console.warn('BlzGetTriggerPlayerMousePosition was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzGetTriggerPlayerMouseButton takes nothing returns mousebuttontype\r\n */\r\nfunction BlzGetTriggerPlayerMouseButton(C: Context, L: lua_State): number {\r\n\r\n  console.warn('BlzGetTriggerPlayerMouseButton was called but is not implemented :(');\r\n  lua_pushlightuserdata(L, { name: 'FAKE' });\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzSetAbilityTooltip takes integer abilCode, string tooltip, integer level returns nothing\r\n */\r\nfunction BlzSetAbilityTooltip(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  const _tooltip = luaL_checkstring(L, 2);\r\n  const _level = luaL_checkinteger(L, 3);\r\n  console.warn('BlzSetAbilityTooltip was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetAbilityActivatedTooltip takes integer abilCode, string tooltip, integer level returns nothing\r\n */\r\nfunction BlzSetAbilityActivatedTooltip(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  const _tooltip = luaL_checkstring(L, 2);\r\n  const _level = luaL_checkinteger(L, 3);\r\n  console.warn('BlzSetAbilityActivatedTooltip was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetAbilityExtendedTooltip takes integer abilCode, string ExtendedTooltip, integer level returns nothing\r\n */\r\nfunction BlzSetAbilityExtendedTooltip(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  const _ExtendedTooltip = luaL_checkstring(L, 2);\r\n  const _level = luaL_checkinteger(L, 3);\r\n  console.warn('BlzSetAbilityExtendedTooltip was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetAbilityActivatedExtendedTooltip takes integer abilCode, string ExtendedTooltip, integer level returns nothing\r\n */\r\nfunction BlzSetAbilityActivatedExtendedTooltip(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  const _ExtendedTooltip = luaL_checkstring(L, 2);\r\n  const _level = luaL_checkinteger(L, 3);\r\n  console.warn('BlzSetAbilityActivatedExtendedTooltip was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetAbilityResearchTooltip takes integer abilCode, string researchTooltip, integer level returns nothing\r\n */\r\nfunction BlzSetAbilityResearchTooltip(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  const _researchTooltip = luaL_checkstring(L, 2);\r\n  const _level = luaL_checkinteger(L, 3);\r\n  console.warn('BlzSetAbilityResearchTooltip was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetAbilityResearchExtendedTooltip takes integer abilCode, string researchExtendedTooltip, integer level returns nothing\r\n */\r\nfunction BlzSetAbilityResearchExtendedTooltip(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  const _researchExtendedTooltip = luaL_checkstring(L, 2);\r\n  const _level = luaL_checkinteger(L, 3);\r\n  console.warn('BlzSetAbilityResearchExtendedTooltip was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzGetAbilityTooltip takes integer abilCode, integer level returns string\r\n */\r\nfunction BlzGetAbilityTooltip(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  const _level = luaL_checkinteger(L, 2);\r\n  console.warn('BlzGetAbilityTooltip was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzGetAbilityActivatedTooltip takes integer abilCode, integer level returns string\r\n */\r\nfunction BlzGetAbilityActivatedTooltip(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  const _level = luaL_checkinteger(L, 2);\r\n  console.warn('BlzGetAbilityActivatedTooltip was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzGetAbilityExtendedTooltip takes integer abilCode, integer level returns string\r\n */\r\nfunction BlzGetAbilityExtendedTooltip(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  const _level = luaL_checkinteger(L, 2);\r\n  console.warn('BlzGetAbilityExtendedTooltip was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzGetAbilityActivatedExtendedTooltip takes integer abilCode, integer level returns string\r\n */\r\nfunction BlzGetAbilityActivatedExtendedTooltip(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  const _level = luaL_checkinteger(L, 2);\r\n  console.warn('BlzGetAbilityActivatedExtendedTooltip was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzGetAbilityResearchTooltip takes integer abilCode, integer level returns string\r\n */\r\nfunction BlzGetAbilityResearchTooltip(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  const _level = luaL_checkinteger(L, 2);\r\n  console.warn('BlzGetAbilityResearchTooltip was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzGetAbilityResearchExtendedTooltip takes integer abilCode, integer level returns string\r\n */\r\nfunction BlzGetAbilityResearchExtendedTooltip(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  const _level = luaL_checkinteger(L, 2);\r\n  console.warn('BlzGetAbilityResearchExtendedTooltip was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzSetAbilityIcon takes integer abilCode, string iconPath returns nothing\r\n */\r\nfunction BlzSetAbilityIcon(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  const _iconPath = luaL_checkstring(L, 2);\r\n  console.warn('BlzSetAbilityIcon was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzGetAbilityIcon takes integer abilCode returns string\r\n */\r\nfunction BlzGetAbilityIcon(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  console.warn('BlzGetAbilityIcon was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzSetAbilityActivatedIcon takes integer abilCode, string iconPath returns nothing\r\n */\r\nfunction BlzSetAbilityActivatedIcon(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  const _iconPath = luaL_checkstring(L, 2);\r\n  console.warn('BlzSetAbilityActivatedIcon was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzGetAbilityActivatedIcon takes integer abilCode returns string\r\n */\r\nfunction BlzGetAbilityActivatedIcon(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  console.warn('BlzGetAbilityActivatedIcon was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzGetAbilityPosX takes integer abilCode returns integer\r\n */\r\nfunction BlzGetAbilityPosX(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  console.warn('BlzGetAbilityPosX was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzGetAbilityPosY takes integer abilCode returns integer\r\n */\r\nfunction BlzGetAbilityPosY(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  console.warn('BlzGetAbilityPosY was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzSetAbilityPosX takes integer abilCode, integer x returns nothing\r\n */\r\nfunction BlzSetAbilityPosX(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  const _x = luaL_checkinteger(L, 2);\r\n  console.warn('BlzSetAbilityPosX was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetAbilityPosY takes integer abilCode, integer y returns nothing\r\n */\r\nfunction BlzSetAbilityPosY(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  const _y = luaL_checkinteger(L, 2);\r\n  console.warn('BlzSetAbilityPosY was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzGetAbilityActivatedPosX takes integer abilCode returns integer\r\n */\r\nfunction BlzGetAbilityActivatedPosX(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  console.warn('BlzGetAbilityActivatedPosX was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzGetAbilityActivatedPosY takes integer abilCode returns integer\r\n */\r\nfunction BlzGetAbilityActivatedPosY(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  console.warn('BlzGetAbilityActivatedPosY was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzSetAbilityActivatedPosX takes integer abilCode, integer x returns nothing\r\n */\r\nfunction BlzSetAbilityActivatedPosX(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  const _x = luaL_checkinteger(L, 2);\r\n  console.warn('BlzSetAbilityActivatedPosX was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetAbilityActivatedPosY takes integer abilCode, integer y returns nothing\r\n */\r\nfunction BlzSetAbilityActivatedPosY(C: Context, L: lua_State): number {\r\n  const _abilCode = luaL_checkinteger(L, 1);\r\n  const _y = luaL_checkinteger(L, 2);\r\n  console.warn('BlzSetAbilityActivatedPosY was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzGetUnitMaxHP takes unit whichUnit returns integer\r\n */\r\nfunction BlzGetUnitMaxHP(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('BlzGetUnitMaxHP was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzSetUnitMaxHP takes unit whichUnit, integer hp returns nothing\r\n */\r\nfunction BlzSetUnitMaxHP(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _hp = luaL_checkinteger(L, 2);\r\n  console.warn('BlzSetUnitMaxHP was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzGetUnitMaxMana takes unit whichUnit returns integer\r\n */\r\nfunction BlzGetUnitMaxMana(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('BlzGetUnitMaxMana was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzSetUnitMaxMana takes unit whichUnit, integer mana returns nothing\r\n */\r\nfunction BlzSetUnitMaxMana(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _mana = luaL_checkinteger(L, 2);\r\n  console.warn('BlzSetUnitMaxMana was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzDeleteHeroAbility takes unit whichUnit, integer abilCode returns nothing\r\n */\r\nfunction BlzDeleteHeroAbility(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _abilCode = luaL_checkinteger(L, 2);\r\n  console.warn('BlzDeleteHeroAbility was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetItemName takes item whichItem, string name returns nothing\r\n */\r\nfunction BlzSetItemName(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  const _name = luaL_checkstring(L, 2);\r\n  console.warn('BlzSetItemName was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetItemDescription takes item whichItem, string name returns nothing\r\n */\r\nfunction BlzSetItemDescription(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  const _name = luaL_checkstring(L, 2);\r\n  console.warn('BlzSetItemDescription was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzGetItemDescription takes item whichItem returns string\r\n */\r\nfunction BlzGetItemDescription(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  console.warn('BlzGetItemDescription was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzSetItemTooltip takes item whichItem, string name returns nothing\r\n */\r\nfunction BlzSetItemTooltip(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  const _name = luaL_checkstring(L, 2);\r\n  console.warn('BlzSetItemTooltip was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzGetItemTooltip takes item whichItem returns string\r\n */\r\nfunction BlzGetItemTooltip(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  console.warn('BlzGetItemTooltip was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzSetItemExtendedTooltip takes item whichItem, string name returns nothing\r\n */\r\nfunction BlzSetItemExtendedTooltip(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  const _name = luaL_checkstring(L, 2);\r\n  console.warn('BlzSetItemExtendedTooltip was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzGetItemExtendedTooltip takes item whichItem returns string\r\n */\r\nfunction BlzGetItemExtendedTooltip(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  console.warn('BlzGetItemExtendedTooltip was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzSetItemIconPath takes item whichItem, string name returns nothing\r\n */\r\nfunction BlzSetItemIconPath(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  const _name = luaL_checkstring(L, 2);\r\n  console.warn('BlzSetItemIconPath was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzGetItemIconPath takes item whichItem returns string\r\n */\r\nfunction BlzGetItemIconPath(C: Context, L: lua_State): number {\r\n  const _whichItem = lua_touserdata(L, 1);\r\n  console.warn('BlzGetItemIconPath was called but is not implemented :(');\r\n  lua_pushstring(L, '');\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzSetUnitName takes unit whichUnit, string name returns nothing\r\n */\r\nfunction BlzSetUnitName(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _name = luaL_checkstring(L, 2);\r\n  console.warn('BlzSetUnitName was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetHeroProperName takes unit whichUnit, string name returns nothing\r\n */\r\nfunction BlzSetHeroProperName(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _name = luaL_checkstring(L, 2);\r\n  console.warn('BlzSetHeroProperName was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzGetUnitBaseDamage takes unit whichUnit, integer weaponIndex returns integer\r\n */\r\nfunction BlzGetUnitBaseDamage(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _weaponIndex = luaL_checkinteger(L, 2);\r\n  console.warn('BlzGetUnitBaseDamage was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzSetUnitBaseDamage takes unit whichUnit, integer baseDamage, integer weaponIndex returns nothing\r\n */\r\nfunction BlzSetUnitBaseDamage(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _baseDamage = luaL_checkinteger(L, 2);\r\n  const _weaponIndex = luaL_checkinteger(L, 3);\r\n  console.warn('BlzSetUnitBaseDamage was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzGetUnitDiceNumber takes unit whichUnit, integer weaponIndex returns integer\r\n */\r\nfunction BlzGetUnitDiceNumber(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _weaponIndex = luaL_checkinteger(L, 2);\r\n  console.warn('BlzGetUnitDiceNumber was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzSetUnitDiceNumber takes unit whichUnit, integer diceNumber, integer weaponIndex returns nothing\r\n */\r\nfunction BlzSetUnitDiceNumber(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _diceNumber = luaL_checkinteger(L, 2);\r\n  const _weaponIndex = luaL_checkinteger(L, 3);\r\n  console.warn('BlzSetUnitDiceNumber was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzGetUnitDiceSides takes unit whichUnit, integer weaponIndex returns integer\r\n */\r\nfunction BlzGetUnitDiceSides(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _weaponIndex = luaL_checkinteger(L, 2);\r\n  console.warn('BlzGetUnitDiceSides was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzSetUnitDiceSides takes unit whichUnit, integer diceSides, integer weaponIndex returns nothing\r\n */\r\nfunction BlzSetUnitDiceSides(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _diceSides = luaL_checkinteger(L, 2);\r\n  const _weaponIndex = luaL_checkinteger(L, 3);\r\n  console.warn('BlzSetUnitDiceSides was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzGetUnitAttackCooldown takes unit whichUnit, integer weaponIndex returns real\r\n */\r\nfunction BlzGetUnitAttackCooldown(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _weaponIndex = luaL_checkinteger(L, 2);\r\n  console.warn('BlzGetUnitAttackCooldown was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzSetUnitAttackCooldown takes unit whichUnit, real cooldown, integer weaponIndex returns nothing\r\n */\r\nfunction BlzSetUnitAttackCooldown(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _cooldown = luaL_checknumber(L, 2);\r\n  const _weaponIndex = luaL_checkinteger(L, 3);\r\n  console.warn('BlzSetUnitAttackCooldown was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetSpecialEffectColorByPlayer takes effect whichEffect, player whichPlayer returns nothing\r\n */\r\nfunction BlzSetSpecialEffectColorByPlayer(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  const _whichPlayer = lua_touserdata(L, 2);\r\n  console.warn('BlzSetSpecialEffectColorByPlayer was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetSpecialEffectColor takes effect whichEffect, integer r, integer g, integer b returns nothing\r\n */\r\nfunction BlzSetSpecialEffectColor(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  const _r = luaL_checkinteger(L, 2);\r\n  const _g = luaL_checkinteger(L, 3);\r\n  const _b = luaL_checkinteger(L, 4);\r\n  console.warn('BlzSetSpecialEffectColor was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetSpecialEffectAlpha takes effect whichEffect, integer alpha returns nothing\r\n */\r\nfunction BlzSetSpecialEffectAlpha(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  const _alpha = luaL_checkinteger(L, 2);\r\n  console.warn('BlzSetSpecialEffectAlpha was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetSpecialEffectScale takes effect whichEffect, real scale returns nothing\r\n */\r\nfunction BlzSetSpecialEffectScale(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  const _scale = luaL_checknumber(L, 2);\r\n  console.warn('BlzSetSpecialEffectScale was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetSpecialEffectPosition takes effect whichEffect, real x, real y, real z returns nothing\r\n */\r\nfunction BlzSetSpecialEffectPosition(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  const _y = luaL_checknumber(L, 3);\r\n  const _z = luaL_checknumber(L, 4);\r\n  console.warn('BlzSetSpecialEffectPosition was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetSpecialEffectHeight takes effect whichEffect, real height returns nothing\r\n */\r\nfunction BlzSetSpecialEffectHeight(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  const _height = luaL_checknumber(L, 2);\r\n  console.warn('BlzSetSpecialEffectHeight was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetSpecialEffectTimeScale takes effect whichEffect, real timeScale returns nothing\r\n */\r\nfunction BlzSetSpecialEffectTimeScale(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  const _timeScale = luaL_checknumber(L, 2);\r\n  console.warn('BlzSetSpecialEffectTimeScale was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetSpecialEffectTime takes effect whichEffect, real time returns nothing\r\n */\r\nfunction BlzSetSpecialEffectTime(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  const _time = luaL_checknumber(L, 2);\r\n  console.warn('BlzSetSpecialEffectTime was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetSpecialEffectOrientation takes effect whichEffect, real yaw, real pitch, real roll returns nothing\r\n */\r\nfunction BlzSetSpecialEffectOrientation(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  const _yaw = luaL_checknumber(L, 2);\r\n  const _pitch = luaL_checknumber(L, 3);\r\n  const _roll = luaL_checknumber(L, 4);\r\n  console.warn('BlzSetSpecialEffectOrientation was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetSpecialEffectYaw takes effect whichEffect, real yaw returns nothing\r\n */\r\nfunction BlzSetSpecialEffectYaw(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  const _yaw = luaL_checknumber(L, 2);\r\n  console.warn('BlzSetSpecialEffectYaw was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetSpecialEffectPitch takes effect whichEffect, real pitch returns nothing\r\n */\r\nfunction BlzSetSpecialEffectPitch(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  const _pitch = luaL_checknumber(L, 2);\r\n  console.warn('BlzSetSpecialEffectPitch was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetSpecialEffectRoll takes effect whichEffect, real roll returns nothing\r\n */\r\nfunction BlzSetSpecialEffectRoll(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  const _roll = luaL_checknumber(L, 2);\r\n  console.warn('BlzSetSpecialEffectRoll was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetSpecialEffectX takes effect whichEffect, real x returns nothing\r\n */\r\nfunction BlzSetSpecialEffectX(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  const _x = luaL_checknumber(L, 2);\r\n  console.warn('BlzSetSpecialEffectX was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetSpecialEffectY takes effect whichEffect, real y returns nothing\r\n */\r\nfunction BlzSetSpecialEffectY(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  const _y = luaL_checknumber(L, 2);\r\n  console.warn('BlzSetSpecialEffectY was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetSpecialEffectZ takes effect whichEffect, real z returns nothing\r\n */\r\nfunction BlzSetSpecialEffectZ(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  const _z = luaL_checknumber(L, 2);\r\n  console.warn('BlzSetSpecialEffectZ was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetSpecialEffectPositionLoc takes effect whichEffect, location loc returns nothing\r\n */\r\nfunction BlzSetSpecialEffectPositionLoc(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  const _loc = lua_touserdata(L, 2);\r\n  console.warn('BlzSetSpecialEffectPositionLoc was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzGetLocalSpecialEffectX takes effect whichEffect returns real\r\n */\r\nfunction BlzGetLocalSpecialEffectX(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  console.warn('BlzGetLocalSpecialEffectX was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzGetLocalSpecialEffectY takes effect whichEffect returns real\r\n */\r\nfunction BlzGetLocalSpecialEffectY(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  console.warn('BlzGetLocalSpecialEffectY was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzGetLocalSpecialEffectZ takes effect whichEffect returns real\r\n */\r\nfunction BlzGetLocalSpecialEffectZ(C: Context, L: lua_State): number {\r\n  const _whichEffect = lua_touserdata(L, 1);\r\n  console.warn('BlzGetLocalSpecialEffectZ was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzGetUnitArmor takes unit whichUnit returns real\r\n */\r\nfunction BlzGetUnitArmor(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('BlzGetUnitArmor was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzSetUnitArmor takes unit whichUnit, real armorAmount returns nothing\r\n */\r\nfunction BlzSetUnitArmor(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _armorAmount = luaL_checknumber(L, 2);\r\n  console.warn('BlzSetUnitArmor was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzUnitHideAbility takes unit whichUnit, integer abilId, boolean flag returns nothing\r\n */\r\nfunction BlzUnitHideAbility(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _abilId = luaL_checkinteger(L, 2);\r\n  const _flag = lua_toboolean(L, 3);\r\n  console.warn('BlzUnitHideAbility was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzUnitDisableAbility takes unit whichUnit, integer abilId, boolean flag, boolean hideUI returns nothing\r\n */\r\nfunction BlzUnitDisableAbility(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _abilId = luaL_checkinteger(L, 2);\r\n  const _flag = lua_toboolean(L, 3);\r\n  const _hideUI = lua_toboolean(L, 4);\r\n  console.warn('BlzUnitDisableAbility was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzUnitCancelTimedLife takes unit whichUnit returns nothing\r\n */\r\nfunction BlzUnitCancelTimedLife(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('BlzUnitCancelTimedLife was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzIsUnitSelectable takes unit whichUnit returns boolean\r\n */\r\nfunction BlzIsUnitSelectable(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('BlzIsUnitSelectable was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzIsUnitInvulnerable takes unit whichUnit returns boolean\r\n */\r\nfunction BlzIsUnitInvulnerable(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('BlzIsUnitInvulnerable was called but is not implemented :(');\r\n  lua_pushboolean(L, false);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzUnitInterruptAttack takes unit whichUnit returns nothing\r\n */\r\nfunction BlzUnitInterruptAttack(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('BlzUnitInterruptAttack was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzGetUnitCollisionSize takes unit whichUnit returns real\r\n */\r\nfunction BlzGetUnitCollisionSize(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('BlzGetUnitCollisionSize was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzGetAbilityManaCost takes integer abilId, integer level returns integer\r\n */\r\nfunction BlzGetAbilityManaCost(C: Context, L: lua_State): number {\r\n  const _abilId = luaL_checkinteger(L, 1);\r\n  const _level = luaL_checkinteger(L, 2);\r\n  console.warn('BlzGetAbilityManaCost was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzGetAbilityCooldown takes integer abilId, integer level returns real\r\n */\r\nfunction BlzGetAbilityCooldown(C: Context, L: lua_State): number {\r\n  const _abilId = luaL_checkinteger(L, 1);\r\n  const _level = luaL_checkinteger(L, 2);\r\n  console.warn('BlzGetAbilityCooldown was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzSetUnitAbilityCooldown takes unit whichUnit, integer abilId, integer level, real cooldown returns nothing\r\n */\r\nfunction BlzSetUnitAbilityCooldown(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _abilId = luaL_checkinteger(L, 2);\r\n  const _level = luaL_checkinteger(L, 3);\r\n  const _cooldown = luaL_checknumber(L, 4);\r\n  console.warn('BlzSetUnitAbilityCooldown was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzGetUnitAbilityCooldown takes unit whichUnit, integer abilId, integer level returns real\r\n */\r\nfunction BlzGetUnitAbilityCooldown(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _abilId = luaL_checkinteger(L, 2);\r\n  const _level = luaL_checkinteger(L, 3);\r\n  console.warn('BlzGetUnitAbilityCooldown was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzGetUnitAbilityCooldownRemaining takes unit whichUnit, integer abilId returns real\r\n */\r\nfunction BlzGetUnitAbilityCooldownRemaining(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _abilId = luaL_checkinteger(L, 2);\r\n  console.warn('BlzGetUnitAbilityCooldownRemaining was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzEndUnitAbilityCooldown takes unit whichUnit, integer abilCode returns nothing\r\n */\r\nfunction BlzEndUnitAbilityCooldown(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _abilCode = luaL_checkinteger(L, 2);\r\n  console.warn('BlzEndUnitAbilityCooldown was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzGetUnitAbilityManaCost takes unit whichUnit, integer abilId, integer level returns integer\r\n */\r\nfunction BlzGetUnitAbilityManaCost(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _abilId = luaL_checkinteger(L, 2);\r\n  const _level = luaL_checkinteger(L, 3);\r\n  console.warn('BlzGetUnitAbilityManaCost was called but is not implemented :(');\r\n  lua_pushinteger(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzSetUnitAbilityManaCost takes unit whichUnit, integer abilId, integer level, integer manaCost returns nothing\r\n */\r\nfunction BlzSetUnitAbilityManaCost(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  const _abilId = luaL_checkinteger(L, 2);\r\n  const _level = luaL_checkinteger(L, 3);\r\n  const _manaCost = luaL_checkinteger(L, 4);\r\n  console.warn('BlzSetUnitAbilityManaCost was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzGetLocalUnitZ takes unit whichUnit returns real\r\n */\r\nfunction BlzGetLocalUnitZ(C: Context, L: lua_State): number {\r\n  const _whichUnit = lua_touserdata(L, 1);\r\n  console.warn('BlzGetLocalUnitZ was called but is not implemented :(');\r\n  lua_pushnumber(L, 0);\r\n  return 1;\r\n}\r\n\r\n/**\r\n * native BlzDecPlayerTechResearched takes player whichPlayer, integer techid, integer levels returns nothing\r\n */\r\nfunction BlzDecPlayerTechResearched(C: Context, L: lua_State): number {\r\n  const _whichPlayer = lua_touserdata(L, 1);\r\n  const _techid = luaL_checkinteger(L, 2);\r\n  const _levels = luaL_checkinteger(L, 3);\r\n  console.warn('BlzDecPlayerTechResearched was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\n/**\r\n * native BlzSetEventDamage takes real damage returns nothing\r\n */\r\nfunction BlzSetEventDamage(C: Context, L: lua_State): number {\r\n  const _damage = luaL_checknumber(L, 1);\r\n  console.warn('BlzSetEventDamage was called but is not implemented :(');\r\n  return 0;\r\n}\r\n\r\nexport default function bindNatives(C: Context): void {\r\n  const L = C.L;\r\n\r\n  lua_register(L, 'ConvertRace', ConvertRace.bind(null, C));\r\n  lua_register(L, 'ConvertAllianceType', ConvertAllianceType.bind(null, C));\r\n  lua_register(L, 'ConvertRacePref', ConvertRacePref.bind(null, C));\r\n  lua_register(L, 'ConvertIGameState', ConvertIGameState.bind(null, C));\r\n  lua_register(L, 'ConvertFGameState', ConvertFGameState.bind(null, C));\r\n  lua_register(L, 'ConvertPlayerState', ConvertPlayerState.bind(null, C));\r\n  lua_register(L, 'ConvertPlayerScore', ConvertPlayerScore.bind(null, C));\r\n  lua_register(L, 'ConvertPlayerGameResult', ConvertPlayerGameResult.bind(null, C));\r\n  lua_register(L, 'ConvertUnitState', ConvertUnitState.bind(null, C));\r\n  lua_register(L, 'ConvertAIDifficulty', ConvertAIDifficulty.bind(null, C));\r\n  lua_register(L, 'ConvertGameEvent', ConvertGameEvent.bind(null, C));\r\n  lua_register(L, 'ConvertPlayerEvent', ConvertPlayerEvent.bind(null, C));\r\n  lua_register(L, 'ConvertPlayerUnitEvent', ConvertPlayerUnitEvent.bind(null, C));\r\n  lua_register(L, 'ConvertWidgetEvent', ConvertWidgetEvent.bind(null, C));\r\n  lua_register(L, 'ConvertDialogEvent', ConvertDialogEvent.bind(null, C));\r\n  lua_register(L, 'ConvertUnitEvent', ConvertUnitEvent.bind(null, C));\r\n  lua_register(L, 'ConvertLimitOp', ConvertLimitOp.bind(null, C));\r\n  lua_register(L, 'ConvertUnitType', ConvertUnitType.bind(null, C));\r\n  lua_register(L, 'ConvertGameSpeed', ConvertGameSpeed.bind(null, C));\r\n  lua_register(L, 'ConvertPlacement', ConvertPlacement.bind(null, C));\r\n  lua_register(L, 'ConvertStartLocPrio', ConvertStartLocPrio.bind(null, C));\r\n  lua_register(L, 'ConvertGameDifficulty', ConvertGameDifficulty.bind(null, C));\r\n  lua_register(L, 'ConvertGameType', ConvertGameType.bind(null, C));\r\n  lua_register(L, 'ConvertMapFlag', ConvertMapFlag.bind(null, C));\r\n  lua_register(L, 'ConvertMapVisibility', ConvertMapVisibility.bind(null, C));\r\n  lua_register(L, 'ConvertMapSetting', ConvertMapSetting.bind(null, C));\r\n  lua_register(L, 'ConvertMapDensity', ConvertMapDensity.bind(null, C));\r\n  lua_register(L, 'ConvertMapControl', ConvertMapControl.bind(null, C));\r\n  lua_register(L, 'ConvertPlayerColor', ConvertPlayerColor.bind(null, C));\r\n  lua_register(L, 'ConvertPlayerSlotState', ConvertPlayerSlotState.bind(null, C));\r\n  lua_register(L, 'ConvertVolumeGroup', ConvertVolumeGroup.bind(null, C));\r\n  lua_register(L, 'ConvertCameraField', ConvertCameraField.bind(null, C));\r\n  lua_register(L, 'ConvertBlendMode', ConvertBlendMode.bind(null, C));\r\n  lua_register(L, 'ConvertRarityControl', ConvertRarityControl.bind(null, C));\r\n  lua_register(L, 'ConvertTexMapFlags', ConvertTexMapFlags.bind(null, C));\r\n  lua_register(L, 'ConvertFogState', ConvertFogState.bind(null, C));\r\n  lua_register(L, 'ConvertEffectType', ConvertEffectType.bind(null, C));\r\n  lua_register(L, 'ConvertVersion', ConvertVersion.bind(null, C));\r\n  lua_register(L, 'ConvertItemType', ConvertItemType.bind(null, C));\r\n  lua_register(L, 'ConvertAttackType', ConvertAttackType.bind(null, C));\r\n  lua_register(L, 'ConvertDamageType', ConvertDamageType.bind(null, C));\r\n  lua_register(L, 'ConvertWeaponType', ConvertWeaponType.bind(null, C));\r\n  lua_register(L, 'ConvertSoundType', ConvertSoundType.bind(null, C));\r\n  lua_register(L, 'ConvertPathingType', ConvertPathingType.bind(null, C));\r\n  lua_register(L, 'ConvertMouseButtonType', ConvertMouseButtonType.bind(null, C));\r\n  lua_register(L, 'ConvertAnimType', ConvertAnimType.bind(null, C));\r\n  lua_register(L, 'ConvertSubAnimType', ConvertSubAnimType.bind(null, C));\r\n  lua_register(L, 'OrderId', OrderId.bind(null, C));\r\n  lua_register(L, 'OrderId2String', OrderId2String.bind(null, C));\r\n  lua_register(L, 'UnitId', UnitId.bind(null, C));\r\n  lua_register(L, 'UnitId2String', UnitId2String.bind(null, C));\r\n  lua_register(L, 'AbilityId', AbilityId.bind(null, C));\r\n  lua_register(L, 'AbilityId2String', AbilityId2String.bind(null, C));\r\n  lua_register(L, 'GetObjectName', GetObjectName.bind(null, C));\r\n  lua_register(L, 'GetBJMaxPlayers', GetBJMaxPlayers.bind(null, C));\r\n  lua_register(L, 'GetBJPlayerNeutralVictim', GetBJPlayerNeutralVictim.bind(null, C));\r\n  lua_register(L, 'GetBJPlayerNeutralExtra', GetBJPlayerNeutralExtra.bind(null, C));\r\n  lua_register(L, 'GetBJMaxPlayerSlots', GetBJMaxPlayerSlots.bind(null, C));\r\n  lua_register(L, 'GetPlayerNeutralPassive', GetPlayerNeutralPassive.bind(null, C));\r\n  lua_register(L, 'GetPlayerNeutralAggressive', GetPlayerNeutralAggressive.bind(null, C));\r\n  lua_register(L, 'Deg2Rad', Deg2Rad.bind(null, C));\r\n  lua_register(L, 'Rad2Deg', Rad2Deg.bind(null, C));\r\n  lua_register(L, 'Sin', Sin.bind(null, C));\r\n  lua_register(L, 'Cos', Cos.bind(null, C));\r\n  lua_register(L, 'Tan', Tan.bind(null, C));\r\n  lua_register(L, 'Asin', Asin.bind(null, C));\r\n  lua_register(L, 'Acos', Acos.bind(null, C));\r\n  lua_register(L, 'Atan', Atan.bind(null, C));\r\n  lua_register(L, 'Atan2', Atan2.bind(null, C));\r\n  lua_register(L, 'SquareRoot', SquareRoot.bind(null, C));\r\n  lua_register(L, 'Pow', Pow.bind(null, C));\r\n  lua_register(L, 'I2R', I2R.bind(null, C));\r\n  lua_register(L, 'R2I', R2I.bind(null, C));\r\n  lua_register(L, 'I2S', I2S.bind(null, C));\r\n  lua_register(L, 'R2S', R2S.bind(null, C));\r\n  lua_register(L, 'R2SW', R2SW.bind(null, C));\r\n  lua_register(L, 'S2I', S2I.bind(null, C));\r\n  lua_register(L, 'S2R', S2R.bind(null, C));\r\n  lua_register(L, 'GetHandleId', GetHandleId.bind(null, C));\r\n  lua_register(L, 'SubString', SubString.bind(null, C));\r\n  lua_register(L, 'StringLength', StringLength.bind(null, C));\r\n  lua_register(L, 'StringCase', StringCase.bind(null, C));\r\n  lua_register(L, 'StringHash', StringHash.bind(null, C));\r\n  lua_register(L, 'GetLocalizedString', GetLocalizedString.bind(null, C));\r\n  lua_register(L, 'GetLocalizedHotkey', GetLocalizedHotkey.bind(null, C));\r\n  lua_register(L, 'SetMapName', SetMapName.bind(null, C));\r\n  lua_register(L, 'SetMapDescription', SetMapDescription.bind(null, C));\r\n  lua_register(L, 'SetTeams', SetTeams.bind(null, C));\r\n  lua_register(L, 'SetPlayers', SetPlayers.bind(null, C));\r\n  lua_register(L, 'DefineStartLocation', DefineStartLocation.bind(null, C));\r\n  lua_register(L, 'DefineStartLocationLoc', DefineStartLocationLoc.bind(null, C));\r\n  lua_register(L, 'SetStartLocPrioCount', SetStartLocPrioCount.bind(null, C));\r\n  lua_register(L, 'SetStartLocPrio', SetStartLocPrio.bind(null, C));\r\n  lua_register(L, 'GetStartLocPrioSlot', GetStartLocPrioSlot.bind(null, C));\r\n  lua_register(L, 'GetStartLocPrio', GetStartLocPrio.bind(null, C));\r\n  lua_register(L, 'SetGameTypeSupported', SetGameTypeSupported.bind(null, C));\r\n  lua_register(L, 'SetMapFlag', SetMapFlag.bind(null, C));\r\n  lua_register(L, 'SetGamePlacement', SetGamePlacement.bind(null, C));\r\n  lua_register(L, 'SetGameSpeed', SetGameSpeed.bind(null, C));\r\n  lua_register(L, 'SetGameDifficulty', SetGameDifficulty.bind(null, C));\r\n  lua_register(L, 'SetResourceDensity', SetResourceDensity.bind(null, C));\r\n  lua_register(L, 'SetCreatureDensity', SetCreatureDensity.bind(null, C));\r\n  lua_register(L, 'GetTeams', GetTeams.bind(null, C));\r\n  lua_register(L, 'GetPlayers', GetPlayers.bind(null, C));\r\n  lua_register(L, 'IsGameTypeSupported', IsGameTypeSupported.bind(null, C));\r\n  lua_register(L, 'GetGameTypeSelected', GetGameTypeSelected.bind(null, C));\r\n  lua_register(L, 'IsMapFlagSet', IsMapFlagSet.bind(null, C));\r\n  lua_register(L, 'GetGamePlacement', GetGamePlacement.bind(null, C));\r\n  lua_register(L, 'GetGameSpeed', GetGameSpeed.bind(null, C));\r\n  lua_register(L, 'GetGameDifficulty', GetGameDifficulty.bind(null, C));\r\n  lua_register(L, 'GetResourceDensity', GetResourceDensity.bind(null, C));\r\n  lua_register(L, 'GetCreatureDensity', GetCreatureDensity.bind(null, C));\r\n  lua_register(L, 'GetStartLocationX', GetStartLocationX.bind(null, C));\r\n  lua_register(L, 'GetStartLocationY', GetStartLocationY.bind(null, C));\r\n  lua_register(L, 'GetStartLocationLoc', GetStartLocationLoc.bind(null, C));\r\n  lua_register(L, 'SetPlayerTeam', SetPlayerTeam.bind(null, C));\r\n  lua_register(L, 'SetPlayerStartLocation', SetPlayerStartLocation.bind(null, C));\r\n  lua_register(L, 'ForcePlayerStartLocation', ForcePlayerStartLocation.bind(null, C));\r\n  lua_register(L, 'SetPlayerColor', SetPlayerColor.bind(null, C));\r\n  lua_register(L, 'SetPlayerAlliance', SetPlayerAlliance.bind(null, C));\r\n  lua_register(L, 'SetPlayerTaxRate', SetPlayerTaxRate.bind(null, C));\r\n  lua_register(L, 'SetPlayerRacePreference', SetPlayerRacePreference.bind(null, C));\r\n  lua_register(L, 'SetPlayerRaceSelectable', SetPlayerRaceSelectable.bind(null, C));\r\n  lua_register(L, 'SetPlayerController', SetPlayerController.bind(null, C));\r\n  lua_register(L, 'SetPlayerName', SetPlayerName.bind(null, C));\r\n  lua_register(L, 'SetPlayerOnScoreScreen', SetPlayerOnScoreScreen.bind(null, C));\r\n  lua_register(L, 'GetPlayerTeam', GetPlayerTeam.bind(null, C));\r\n  lua_register(L, 'GetPlayerStartLocation', GetPlayerStartLocation.bind(null, C));\r\n  lua_register(L, 'GetPlayerColor', GetPlayerColor.bind(null, C));\r\n  lua_register(L, 'GetPlayerSelectable', GetPlayerSelectable.bind(null, C));\r\n  lua_register(L, 'GetPlayerController', GetPlayerController.bind(null, C));\r\n  lua_register(L, 'GetPlayerSlotState', GetPlayerSlotState.bind(null, C));\r\n  lua_register(L, 'GetPlayerTaxRate', GetPlayerTaxRate.bind(null, C));\r\n  lua_register(L, 'IsPlayerRacePrefSet', IsPlayerRacePrefSet.bind(null, C));\r\n  lua_register(L, 'GetPlayerName', GetPlayerName.bind(null, C));\r\n  lua_register(L, 'CreateTimer', CreateTimer.bind(null, C));\r\n  lua_register(L, 'DestroyTimer', DestroyTimer.bind(null, C));\r\n  lua_register(L, 'TimerStart', TimerStart.bind(null, C));\r\n  lua_register(L, 'TimerGetElapsed', TimerGetElapsed.bind(null, C));\r\n  lua_register(L, 'TimerGetRemaining', TimerGetRemaining.bind(null, C));\r\n  lua_register(L, 'TimerGetTimeout', TimerGetTimeout.bind(null, C));\r\n  lua_register(L, 'PauseTimer', PauseTimer.bind(null, C));\r\n  lua_register(L, 'ResumeTimer', ResumeTimer.bind(null, C));\r\n  lua_register(L, 'GetExpiredTimer', GetExpiredTimer.bind(null, C));\r\n  lua_register(L, 'CreateGroup', CreateGroup.bind(null, C));\r\n  lua_register(L, 'DestroyGroup', DestroyGroup.bind(null, C));\r\n  lua_register(L, 'GroupAddUnit', GroupAddUnit.bind(null, C));\r\n  lua_register(L, 'GroupRemoveUnit', GroupRemoveUnit.bind(null, C));\r\n  lua_register(L, 'GroupClear', GroupClear.bind(null, C));\r\n  lua_register(L, 'GroupEnumUnitsOfType', GroupEnumUnitsOfType.bind(null, C));\r\n  lua_register(L, 'GroupEnumUnitsOfPlayer', GroupEnumUnitsOfPlayer.bind(null, C));\r\n  lua_register(L, 'GroupEnumUnitsOfTypeCounted', GroupEnumUnitsOfTypeCounted.bind(null, C));\r\n  lua_register(L, 'GroupEnumUnitsInRect', GroupEnumUnitsInRect.bind(null, C));\r\n  lua_register(L, 'GroupEnumUnitsInRectCounted', GroupEnumUnitsInRectCounted.bind(null, C));\r\n  lua_register(L, 'GroupEnumUnitsInRange', GroupEnumUnitsInRange.bind(null, C));\r\n  lua_register(L, 'GroupEnumUnitsInRangeOfLoc', GroupEnumUnitsInRangeOfLoc.bind(null, C));\r\n  lua_register(L, 'GroupEnumUnitsInRangeCounted', GroupEnumUnitsInRangeCounted.bind(null, C));\r\n  lua_register(L, 'GroupEnumUnitsInRangeOfLocCounted', GroupEnumUnitsInRangeOfLocCounted.bind(null, C));\r\n  lua_register(L, 'GroupEnumUnitsSelected', GroupEnumUnitsSelected.bind(null, C));\r\n  lua_register(L, 'GroupImmediateOrder', GroupImmediateOrder.bind(null, C));\r\n  lua_register(L, 'GroupImmediateOrderById', GroupImmediateOrderById.bind(null, C));\r\n  lua_register(L, 'GroupPointOrder', GroupPointOrder.bind(null, C));\r\n  lua_register(L, 'GroupPointOrderLoc', GroupPointOrderLoc.bind(null, C));\r\n  lua_register(L, 'GroupPointOrderById', GroupPointOrderById.bind(null, C));\r\n  lua_register(L, 'GroupPointOrderByIdLoc', GroupPointOrderByIdLoc.bind(null, C));\r\n  lua_register(L, 'GroupTargetOrder', GroupTargetOrder.bind(null, C));\r\n  lua_register(L, 'GroupTargetOrderById', GroupTargetOrderById.bind(null, C));\r\n  lua_register(L, 'ForGroup', ForGroup.bind(null, C));\r\n  lua_register(L, 'FirstOfGroup', FirstOfGroup.bind(null, C));\r\n  lua_register(L, 'CreateForce', CreateForce.bind(null, C));\r\n  lua_register(L, 'DestroyForce', DestroyForce.bind(null, C));\r\n  lua_register(L, 'ForceAddPlayer', ForceAddPlayer.bind(null, C));\r\n  lua_register(L, 'ForceRemovePlayer', ForceRemovePlayer.bind(null, C));\r\n  lua_register(L, 'ForceClear', ForceClear.bind(null, C));\r\n  lua_register(L, 'ForceEnumPlayers', ForceEnumPlayers.bind(null, C));\r\n  lua_register(L, 'ForceEnumPlayersCounted', ForceEnumPlayersCounted.bind(null, C));\r\n  lua_register(L, 'ForceEnumAllies', ForceEnumAllies.bind(null, C));\r\n  lua_register(L, 'ForceEnumEnemies', ForceEnumEnemies.bind(null, C));\r\n  lua_register(L, 'ForForce', ForForce.bind(null, C));\r\n  lua_register(L, 'Rect', Rect.bind(null, C));\r\n  lua_register(L, 'RectFromLoc', RectFromLoc.bind(null, C));\r\n  lua_register(L, 'RemoveRect', RemoveRect.bind(null, C));\r\n  lua_register(L, 'SetRect', SetRect.bind(null, C));\r\n  lua_register(L, 'SetRectFromLoc', SetRectFromLoc.bind(null, C));\r\n  lua_register(L, 'MoveRectTo', MoveRectTo.bind(null, C));\r\n  lua_register(L, 'MoveRectToLoc', MoveRectToLoc.bind(null, C));\r\n  lua_register(L, 'GetRectCenterX', GetRectCenterX.bind(null, C));\r\n  lua_register(L, 'GetRectCenterY', GetRectCenterY.bind(null, C));\r\n  lua_register(L, 'GetRectMinX', GetRectMinX.bind(null, C));\r\n  lua_register(L, 'GetRectMinY', GetRectMinY.bind(null, C));\r\n  lua_register(L, 'GetRectMaxX', GetRectMaxX.bind(null, C));\r\n  lua_register(L, 'GetRectMaxY', GetRectMaxY.bind(null, C));\r\n  lua_register(L, 'CreateRegion', CreateRegion.bind(null, C));\r\n  lua_register(L, 'RemoveRegion', RemoveRegion.bind(null, C));\r\n  lua_register(L, 'RegionAddRect', RegionAddRect.bind(null, C));\r\n  lua_register(L, 'RegionClearRect', RegionClearRect.bind(null, C));\r\n  lua_register(L, 'RegionAddCell', RegionAddCell.bind(null, C));\r\n  lua_register(L, 'RegionAddCellAtLoc', RegionAddCellAtLoc.bind(null, C));\r\n  lua_register(L, 'RegionClearCell', RegionClearCell.bind(null, C));\r\n  lua_register(L, 'RegionClearCellAtLoc', RegionClearCellAtLoc.bind(null, C));\r\n  lua_register(L, 'Location', Location.bind(null, C));\r\n  lua_register(L, 'RemoveLocation', RemoveLocation.bind(null, C));\r\n  lua_register(L, 'MoveLocation', MoveLocation.bind(null, C));\r\n  lua_register(L, 'GetLocationX', GetLocationX.bind(null, C));\r\n  lua_register(L, 'GetLocationY', GetLocationY.bind(null, C));\r\n  lua_register(L, 'GetLocationZ', GetLocationZ.bind(null, C));\r\n  lua_register(L, 'IsUnitInRegion', IsUnitInRegion.bind(null, C));\r\n  lua_register(L, 'IsPointInRegion', IsPointInRegion.bind(null, C));\r\n  lua_register(L, 'IsLocationInRegion', IsLocationInRegion.bind(null, C));\r\n  lua_register(L, 'GetWorldBounds', GetWorldBounds.bind(null, C));\r\n  lua_register(L, 'CreateTrigger', CreateTrigger.bind(null, C));\r\n  lua_register(L, 'DestroyTrigger', DestroyTrigger.bind(null, C));\r\n  lua_register(L, 'ResetTrigger', ResetTrigger.bind(null, C));\r\n  lua_register(L, 'EnableTrigger', EnableTrigger.bind(null, C));\r\n  lua_register(L, 'DisableTrigger', DisableTrigger.bind(null, C));\r\n  lua_register(L, 'IsTriggerEnabled', IsTriggerEnabled.bind(null, C));\r\n  lua_register(L, 'TriggerWaitOnSleeps', TriggerWaitOnSleeps.bind(null, C));\r\n  lua_register(L, 'IsTriggerWaitOnSleeps', IsTriggerWaitOnSleeps.bind(null, C));\r\n  lua_register(L, 'GetFilterUnit', GetFilterUnit.bind(null, C));\r\n  lua_register(L, 'GetEnumUnit', GetEnumUnit.bind(null, C));\r\n  lua_register(L, 'GetFilterDestructable', GetFilterDestructable.bind(null, C));\r\n  lua_register(L, 'GetEnumDestructable', GetEnumDestructable.bind(null, C));\r\n  lua_register(L, 'GetFilterItem', GetFilterItem.bind(null, C));\r\n  lua_register(L, 'GetEnumItem', GetEnumItem.bind(null, C));\r\n  lua_register(L, 'GetFilterPlayer', GetFilterPlayer.bind(null, C));\r\n  lua_register(L, 'GetEnumPlayer', GetEnumPlayer.bind(null, C));\r\n  lua_register(L, 'GetTriggeringTrigger', GetTriggeringTrigger.bind(null, C));\r\n  lua_register(L, 'GetTriggerEventId', GetTriggerEventId.bind(null, C));\r\n  lua_register(L, 'GetTriggerEvalCount', GetTriggerEvalCount.bind(null, C));\r\n  lua_register(L, 'GetTriggerExecCount', GetTriggerExecCount.bind(null, C));\r\n  lua_register(L, 'ExecuteFunc', ExecuteFunc.bind(null, C));\r\n  lua_register(L, 'And', And.bind(null, C));\r\n  lua_register(L, 'Or', Or.bind(null, C));\r\n  lua_register(L, 'Not', Not.bind(null, C));\r\n  lua_register(L, 'Condition', Condition.bind(null, C));\r\n  lua_register(L, 'DestroyCondition', DestroyCondition.bind(null, C));\r\n  lua_register(L, 'Filter', Filter.bind(null, C));\r\n  lua_register(L, 'DestroyFilter', DestroyFilter.bind(null, C));\r\n  lua_register(L, 'DestroyBoolExpr', DestroyBoolExpr.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterVariableEvent', TriggerRegisterVariableEvent.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterTimerEvent', TriggerRegisterTimerEvent.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterTimerExpireEvent', TriggerRegisterTimerExpireEvent.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterGameStateEvent', TriggerRegisterGameStateEvent.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterDialogEvent', TriggerRegisterDialogEvent.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterDialogButtonEvent', TriggerRegisterDialogButtonEvent.bind(null, C));\r\n  lua_register(L, 'GetEventGameState', GetEventGameState.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterGameEvent', TriggerRegisterGameEvent.bind(null, C));\r\n  lua_register(L, 'GetWinningPlayer', GetWinningPlayer.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterEnterRegion', TriggerRegisterEnterRegion.bind(null, C));\r\n  lua_register(L, 'GetTriggeringRegion', GetTriggeringRegion.bind(null, C));\r\n  lua_register(L, 'GetEnteringUnit', GetEnteringUnit.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterLeaveRegion', TriggerRegisterLeaveRegion.bind(null, C));\r\n  lua_register(L, 'GetLeavingUnit', GetLeavingUnit.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterTrackableHitEvent', TriggerRegisterTrackableHitEvent.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterTrackableTrackEvent', TriggerRegisterTrackableTrackEvent.bind(null, C));\r\n  lua_register(L, 'GetTriggeringTrackable', GetTriggeringTrackable.bind(null, C));\r\n  lua_register(L, 'GetClickedButton', GetClickedButton.bind(null, C));\r\n  lua_register(L, 'GetClickedDialog', GetClickedDialog.bind(null, C));\r\n  lua_register(L, 'GetTournamentFinishSoonTimeRemaining', GetTournamentFinishSoonTimeRemaining.bind(null, C));\r\n  lua_register(L, 'GetTournamentFinishNowRule', GetTournamentFinishNowRule.bind(null, C));\r\n  lua_register(L, 'GetTournamentFinishNowPlayer', GetTournamentFinishNowPlayer.bind(null, C));\r\n  lua_register(L, 'GetTournamentScore', GetTournamentScore.bind(null, C));\r\n  lua_register(L, 'GetSaveBasicFilename', GetSaveBasicFilename.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterPlayerEvent', TriggerRegisterPlayerEvent.bind(null, C));\r\n  lua_register(L, 'GetTriggerPlayer', GetTriggerPlayer.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterPlayerUnitEvent', TriggerRegisterPlayerUnitEvent.bind(null, C));\r\n  lua_register(L, 'GetLevelingUnit', GetLevelingUnit.bind(null, C));\r\n  lua_register(L, 'GetLearningUnit', GetLearningUnit.bind(null, C));\r\n  lua_register(L, 'GetLearnedSkill', GetLearnedSkill.bind(null, C));\r\n  lua_register(L, 'GetLearnedSkillLevel', GetLearnedSkillLevel.bind(null, C));\r\n  lua_register(L, 'GetRevivableUnit', GetRevivableUnit.bind(null, C));\r\n  lua_register(L, 'GetRevivingUnit', GetRevivingUnit.bind(null, C));\r\n  lua_register(L, 'GetAttacker', GetAttacker.bind(null, C));\r\n  lua_register(L, 'GetRescuer', GetRescuer.bind(null, C));\r\n  lua_register(L, 'GetDyingUnit', GetDyingUnit.bind(null, C));\r\n  lua_register(L, 'GetKillingUnit', GetKillingUnit.bind(null, C));\r\n  lua_register(L, 'GetDecayingUnit', GetDecayingUnit.bind(null, C));\r\n  lua_register(L, 'GetConstructingStructure', GetConstructingStructure.bind(null, C));\r\n  lua_register(L, 'GetCancelledStructure', GetCancelledStructure.bind(null, C));\r\n  lua_register(L, 'GetConstructedStructure', GetConstructedStructure.bind(null, C));\r\n  lua_register(L, 'GetResearchingUnit', GetResearchingUnit.bind(null, C));\r\n  lua_register(L, 'GetResearched', GetResearched.bind(null, C));\r\n  lua_register(L, 'GetTrainedUnitType', GetTrainedUnitType.bind(null, C));\r\n  lua_register(L, 'GetTrainedUnit', GetTrainedUnit.bind(null, C));\r\n  lua_register(L, 'GetDetectedUnit', GetDetectedUnit.bind(null, C));\r\n  lua_register(L, 'GetSummoningUnit', GetSummoningUnit.bind(null, C));\r\n  lua_register(L, 'GetSummonedUnit', GetSummonedUnit.bind(null, C));\r\n  lua_register(L, 'GetTransportUnit', GetTransportUnit.bind(null, C));\r\n  lua_register(L, 'GetLoadedUnit', GetLoadedUnit.bind(null, C));\r\n  lua_register(L, 'GetSellingUnit', GetSellingUnit.bind(null, C));\r\n  lua_register(L, 'GetSoldUnit', GetSoldUnit.bind(null, C));\r\n  lua_register(L, 'GetBuyingUnit', GetBuyingUnit.bind(null, C));\r\n  lua_register(L, 'GetSoldItem', GetSoldItem.bind(null, C));\r\n  lua_register(L, 'GetChangingUnit', GetChangingUnit.bind(null, C));\r\n  lua_register(L, 'GetChangingUnitPrevOwner', GetChangingUnitPrevOwner.bind(null, C));\r\n  lua_register(L, 'GetManipulatingUnit', GetManipulatingUnit.bind(null, C));\r\n  lua_register(L, 'GetManipulatedItem', GetManipulatedItem.bind(null, C));\r\n  lua_register(L, 'GetOrderedUnit', GetOrderedUnit.bind(null, C));\r\n  lua_register(L, 'GetIssuedOrderId', GetIssuedOrderId.bind(null, C));\r\n  lua_register(L, 'GetOrderPointX', GetOrderPointX.bind(null, C));\r\n  lua_register(L, 'GetOrderPointY', GetOrderPointY.bind(null, C));\r\n  lua_register(L, 'GetOrderPointLoc', GetOrderPointLoc.bind(null, C));\r\n  lua_register(L, 'GetOrderTarget', GetOrderTarget.bind(null, C));\r\n  lua_register(L, 'GetOrderTargetDestructable', GetOrderTargetDestructable.bind(null, C));\r\n  lua_register(L, 'GetOrderTargetItem', GetOrderTargetItem.bind(null, C));\r\n  lua_register(L, 'GetOrderTargetUnit', GetOrderTargetUnit.bind(null, C));\r\n  lua_register(L, 'GetSpellAbilityUnit', GetSpellAbilityUnit.bind(null, C));\r\n  lua_register(L, 'GetSpellAbilityId', GetSpellAbilityId.bind(null, C));\r\n  lua_register(L, 'GetSpellAbility', GetSpellAbility.bind(null, C));\r\n  lua_register(L, 'GetSpellTargetLoc', GetSpellTargetLoc.bind(null, C));\r\n  lua_register(L, 'GetSpellTargetX', GetSpellTargetX.bind(null, C));\r\n  lua_register(L, 'GetSpellTargetY', GetSpellTargetY.bind(null, C));\r\n  lua_register(L, 'GetSpellTargetDestructable', GetSpellTargetDestructable.bind(null, C));\r\n  lua_register(L, 'GetSpellTargetItem', GetSpellTargetItem.bind(null, C));\r\n  lua_register(L, 'GetSpellTargetUnit', GetSpellTargetUnit.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterPlayerAllianceChange', TriggerRegisterPlayerAllianceChange.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterPlayerStateEvent', TriggerRegisterPlayerStateEvent.bind(null, C));\r\n  lua_register(L, 'GetEventPlayerState', GetEventPlayerState.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterPlayerChatEvent', TriggerRegisterPlayerChatEvent.bind(null, C));\r\n  lua_register(L, 'GetEventPlayerChatString', GetEventPlayerChatString.bind(null, C));\r\n  lua_register(L, 'GetEventPlayerChatStringMatched', GetEventPlayerChatStringMatched.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterDeathEvent', TriggerRegisterDeathEvent.bind(null, C));\r\n  lua_register(L, 'GetTriggerUnit', GetTriggerUnit.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterUnitStateEvent', TriggerRegisterUnitStateEvent.bind(null, C));\r\n  lua_register(L, 'GetEventUnitState', GetEventUnitState.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterUnitEvent', TriggerRegisterUnitEvent.bind(null, C));\r\n  lua_register(L, 'GetEventDamage', GetEventDamage.bind(null, C));\r\n  lua_register(L, 'GetEventDamageSource', GetEventDamageSource.bind(null, C));\r\n  lua_register(L, 'GetEventDetectingPlayer', GetEventDetectingPlayer.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterFilterUnitEvent', TriggerRegisterFilterUnitEvent.bind(null, C));\r\n  lua_register(L, 'GetEventTargetUnit', GetEventTargetUnit.bind(null, C));\r\n  lua_register(L, 'TriggerRegisterUnitInRange', TriggerRegisterUnitInRange.bind(null, C));\r\n  lua_register(L, 'TriggerAddCondition', TriggerAddCondition.bind(null, C));\r\n  lua_register(L, 'TriggerRemoveCondition', TriggerRemoveCondition.bind(null, C));\r\n  lua_register(L, 'TriggerClearConditions', TriggerClearConditions.bind(null, C));\r\n  lua_register(L, 'TriggerAddAction', TriggerAddAction.bind(null, C));\r\n  lua_register(L, 'TriggerRemoveAction', TriggerRemoveAction.bind(null, C));\r\n  lua_register(L, 'TriggerClearActions', TriggerClearActions.bind(null, C));\r\n  lua_register(L, 'TriggerSleepAction', TriggerSleepAction.bind(null, C));\r\n  lua_register(L, 'TriggerWaitForSound', TriggerWaitForSound.bind(null, C));\r\n  lua_register(L, 'TriggerEvaluate', TriggerEvaluate.bind(null, C));\r\n  lua_register(L, 'TriggerExecute', TriggerExecute.bind(null, C));\r\n  lua_register(L, 'TriggerExecuteWait', TriggerExecuteWait.bind(null, C));\r\n  lua_register(L, 'TriggerSyncStart', TriggerSyncStart.bind(null, C));\r\n  lua_register(L, 'TriggerSyncReady', TriggerSyncReady.bind(null, C));\r\n  lua_register(L, 'GetWidgetLife', GetWidgetLife.bind(null, C));\r\n  lua_register(L, 'SetWidgetLife', SetWidgetLife.bind(null, C));\r\n  lua_register(L, 'GetWidgetX', GetWidgetX.bind(null, C));\r\n  lua_register(L, 'GetWidgetY', GetWidgetY.bind(null, C));\r\n  lua_register(L, 'GetTriggerWidget', GetTriggerWidget.bind(null, C));\r\n  lua_register(L, 'CreateDestructable', CreateDestructable.bind(null, C));\r\n  lua_register(L, 'CreateDestructableZ', CreateDestructableZ.bind(null, C));\r\n  lua_register(L, 'CreateDeadDestructable', CreateDeadDestructable.bind(null, C));\r\n  lua_register(L, 'CreateDeadDestructableZ', CreateDeadDestructableZ.bind(null, C));\r\n  lua_register(L, 'RemoveDestructable', RemoveDestructable.bind(null, C));\r\n  lua_register(L, 'KillDestructable', KillDestructable.bind(null, C));\r\n  lua_register(L, 'SetDestructableInvulnerable', SetDestructableInvulnerable.bind(null, C));\r\n  lua_register(L, 'IsDestructableInvulnerable', IsDestructableInvulnerable.bind(null, C));\r\n  lua_register(L, 'EnumDestructablesInRect', EnumDestructablesInRect.bind(null, C));\r\n  lua_register(L, 'GetDestructableTypeId', GetDestructableTypeId.bind(null, C));\r\n  lua_register(L, 'GetDestructableX', GetDestructableX.bind(null, C));\r\n  lua_register(L, 'GetDestructableY', GetDestructableY.bind(null, C));\r\n  lua_register(L, 'SetDestructableLife', SetDestructableLife.bind(null, C));\r\n  lua_register(L, 'GetDestructableLife', GetDestructableLife.bind(null, C));\r\n  lua_register(L, 'SetDestructableMaxLife', SetDestructableMaxLife.bind(null, C));\r\n  lua_register(L, 'GetDestructableMaxLife', GetDestructableMaxLife.bind(null, C));\r\n  lua_register(L, 'DestructableRestoreLife', DestructableRestoreLife.bind(null, C));\r\n  lua_register(L, 'QueueDestructableAnimation', QueueDestructableAnimation.bind(null, C));\r\n  lua_register(L, 'SetDestructableAnimation', SetDestructableAnimation.bind(null, C));\r\n  lua_register(L, 'SetDestructableAnimationSpeed', SetDestructableAnimationSpeed.bind(null, C));\r\n  lua_register(L, 'ShowDestructable', ShowDestructable.bind(null, C));\r\n  lua_register(L, 'GetDestructableOccluderHeight', GetDestructableOccluderHeight.bind(null, C));\r\n  lua_register(L, 'SetDestructableOccluderHeight', SetDestructableOccluderHeight.bind(null, C));\r\n  lua_register(L, 'GetDestructableName', GetDestructableName.bind(null, C));\r\n  lua_register(L, 'GetTriggerDestructable', GetTriggerDestructable.bind(null, C));\r\n  lua_register(L, 'CreateItem', CreateItem.bind(null, C));\r\n  lua_register(L, 'RemoveItem', RemoveItem.bind(null, C));\r\n  lua_register(L, 'GetItemPlayer', GetItemPlayer.bind(null, C));\r\n  lua_register(L, 'GetItemTypeId', GetItemTypeId.bind(null, C));\r\n  lua_register(L, 'GetItemX', GetItemX.bind(null, C));\r\n  lua_register(L, 'GetItemY', GetItemY.bind(null, C));\r\n  lua_register(L, 'SetItemPosition', SetItemPosition.bind(null, C));\r\n  lua_register(L, 'SetItemDropOnDeath', SetItemDropOnDeath.bind(null, C));\r\n  lua_register(L, 'SetItemDroppable', SetItemDroppable.bind(null, C));\r\n  lua_register(L, 'SetItemPawnable', SetItemPawnable.bind(null, C));\r\n  lua_register(L, 'SetItemPlayer', SetItemPlayer.bind(null, C));\r\n  lua_register(L, 'SetItemInvulnerable', SetItemInvulnerable.bind(null, C));\r\n  lua_register(L, 'IsItemInvulnerable', IsItemInvulnerable.bind(null, C));\r\n  lua_register(L, 'SetItemVisible', SetItemVisible.bind(null, C));\r\n  lua_register(L, 'IsItemVisible', IsItemVisible.bind(null, C));\r\n  lua_register(L, 'IsItemOwned', IsItemOwned.bind(null, C));\r\n  lua_register(L, 'IsItemPowerup', IsItemPowerup.bind(null, C));\r\n  lua_register(L, 'IsItemSellable', IsItemSellable.bind(null, C));\r\n  lua_register(L, 'IsItemPawnable', IsItemPawnable.bind(null, C));\r\n  lua_register(L, 'IsItemIdPowerup', IsItemIdPowerup.bind(null, C));\r\n  lua_register(L, 'IsItemIdSellable', IsItemIdSellable.bind(null, C));\r\n  lua_register(L, 'IsItemIdPawnable', IsItemIdPawnable.bind(null, C));\r\n  lua_register(L, 'EnumItemsInRect', EnumItemsInRect.bind(null, C));\r\n  lua_register(L, 'GetItemLevel', GetItemLevel.bind(null, C));\r\n  lua_register(L, 'GetItemType', GetItemType.bind(null, C));\r\n  lua_register(L, 'SetItemDropID', SetItemDropID.bind(null, C));\r\n  lua_register(L, 'GetItemName', GetItemName.bind(null, C));\r\n  lua_register(L, 'GetItemCharges', GetItemCharges.bind(null, C));\r\n  lua_register(L, 'SetItemCharges', SetItemCharges.bind(null, C));\r\n  lua_register(L, 'GetItemUserData', GetItemUserData.bind(null, C));\r\n  lua_register(L, 'SetItemUserData', SetItemUserData.bind(null, C));\r\n  lua_register(L, 'CreateUnit', CreateUnit.bind(null, C));\r\n  lua_register(L, 'CreateUnitByName', CreateUnitByName.bind(null, C));\r\n  lua_register(L, 'CreateUnitAtLoc', CreateUnitAtLoc.bind(null, C));\r\n  lua_register(L, 'CreateUnitAtLocByName', CreateUnitAtLocByName.bind(null, C));\r\n  lua_register(L, 'CreateCorpse', CreateCorpse.bind(null, C));\r\n  lua_register(L, 'KillUnit', KillUnit.bind(null, C));\r\n  lua_register(L, 'RemoveUnit', RemoveUnit.bind(null, C));\r\n  lua_register(L, 'ShowUnit', ShowUnit.bind(null, C));\r\n  lua_register(L, 'SetUnitState', SetUnitState.bind(null, C));\r\n  lua_register(L, 'SetUnitX', SetUnitX.bind(null, C));\r\n  lua_register(L, 'SetUnitY', SetUnitY.bind(null, C));\r\n  lua_register(L, 'SetUnitPosition', SetUnitPosition.bind(null, C));\r\n  lua_register(L, 'SetUnitPositionLoc', SetUnitPositionLoc.bind(null, C));\r\n  lua_register(L, 'SetUnitFacing', SetUnitFacing.bind(null, C));\r\n  lua_register(L, 'SetUnitFacingTimed', SetUnitFacingTimed.bind(null, C));\r\n  lua_register(L, 'SetUnitMoveSpeed', SetUnitMoveSpeed.bind(null, C));\r\n  lua_register(L, 'SetUnitFlyHeight', SetUnitFlyHeight.bind(null, C));\r\n  lua_register(L, 'SetUnitTurnSpeed', SetUnitTurnSpeed.bind(null, C));\r\n  lua_register(L, 'SetUnitPropWindow', SetUnitPropWindow.bind(null, C));\r\n  lua_register(L, 'SetUnitAcquireRange', SetUnitAcquireRange.bind(null, C));\r\n  lua_register(L, 'SetUnitCreepGuard', SetUnitCreepGuard.bind(null, C));\r\n  lua_register(L, 'GetUnitAcquireRange', GetUnitAcquireRange.bind(null, C));\r\n  lua_register(L, 'GetUnitTurnSpeed', GetUnitTurnSpeed.bind(null, C));\r\n  lua_register(L, 'GetUnitPropWindow', GetUnitPropWindow.bind(null, C));\r\n  lua_register(L, 'GetUnitFlyHeight', GetUnitFlyHeight.bind(null, C));\r\n  lua_register(L, 'GetUnitDefaultAcquireRange', GetUnitDefaultAcquireRange.bind(null, C));\r\n  lua_register(L, 'GetUnitDefaultTurnSpeed', GetUnitDefaultTurnSpeed.bind(null, C));\r\n  lua_register(L, 'GetUnitDefaultPropWindow', GetUnitDefaultPropWindow.bind(null, C));\r\n  lua_register(L, 'GetUnitDefaultFlyHeight', GetUnitDefaultFlyHeight.bind(null, C));\r\n  lua_register(L, 'SetUnitOwner', SetUnitOwner.bind(null, C));\r\n  lua_register(L, 'SetUnitColor', SetUnitColor.bind(null, C));\r\n  lua_register(L, 'SetUnitScale', SetUnitScale.bind(null, C));\r\n  lua_register(L, 'SetUnitTimeScale', SetUnitTimeScale.bind(null, C));\r\n  lua_register(L, 'SetUnitBlendTime', SetUnitBlendTime.bind(null, C));\r\n  lua_register(L, 'SetUnitVertexColor', SetUnitVertexColor.bind(null, C));\r\n  lua_register(L, 'QueueUnitAnimation', QueueUnitAnimation.bind(null, C));\r\n  lua_register(L, 'SetUnitAnimation', SetUnitAnimation.bind(null, C));\r\n  lua_register(L, 'SetUnitAnimationByIndex', SetUnitAnimationByIndex.bind(null, C));\r\n  lua_register(L, 'SetUnitAnimationWithRarity', SetUnitAnimationWithRarity.bind(null, C));\r\n  lua_register(L, 'AddUnitAnimationProperties', AddUnitAnimationProperties.bind(null, C));\r\n  lua_register(L, 'SetUnitLookAt', SetUnitLookAt.bind(null, C));\r\n  lua_register(L, 'ResetUnitLookAt', ResetUnitLookAt.bind(null, C));\r\n  lua_register(L, 'SetUnitRescuable', SetUnitRescuable.bind(null, C));\r\n  lua_register(L, 'SetUnitRescueRange', SetUnitRescueRange.bind(null, C));\r\n  lua_register(L, 'SetHeroStr', SetHeroStr.bind(null, C));\r\n  lua_register(L, 'SetHeroAgi', SetHeroAgi.bind(null, C));\r\n  lua_register(L, 'SetHeroInt', SetHeroInt.bind(null, C));\r\n  lua_register(L, 'GetHeroStr', GetHeroStr.bind(null, C));\r\n  lua_register(L, 'GetHeroAgi', GetHeroAgi.bind(null, C));\r\n  lua_register(L, 'GetHeroInt', GetHeroInt.bind(null, C));\r\n  lua_register(L, 'UnitStripHeroLevel', UnitStripHeroLevel.bind(null, C));\r\n  lua_register(L, 'GetHeroXP', GetHeroXP.bind(null, C));\r\n  lua_register(L, 'SetHeroXP', SetHeroXP.bind(null, C));\r\n  lua_register(L, 'GetHeroSkillPoints', GetHeroSkillPoints.bind(null, C));\r\n  lua_register(L, 'UnitModifySkillPoints', UnitModifySkillPoints.bind(null, C));\r\n  lua_register(L, 'AddHeroXP', AddHeroXP.bind(null, C));\r\n  lua_register(L, 'SetHeroLevel', SetHeroLevel.bind(null, C));\r\n  lua_register(L, 'GetHeroLevel', GetHeroLevel.bind(null, C));\r\n  lua_register(L, 'GetUnitLevel', GetUnitLevel.bind(null, C));\r\n  lua_register(L, 'GetHeroProperName', GetHeroProperName.bind(null, C));\r\n  lua_register(L, 'SuspendHeroXP', SuspendHeroXP.bind(null, C));\r\n  lua_register(L, 'IsSuspendedXP', IsSuspendedXP.bind(null, C));\r\n  lua_register(L, 'SelectHeroSkill', SelectHeroSkill.bind(null, C));\r\n  lua_register(L, 'GetUnitAbilityLevel', GetUnitAbilityLevel.bind(null, C));\r\n  lua_register(L, 'DecUnitAbilityLevel', DecUnitAbilityLevel.bind(null, C));\r\n  lua_register(L, 'IncUnitAbilityLevel', IncUnitAbilityLevel.bind(null, C));\r\n  lua_register(L, 'SetUnitAbilityLevel', SetUnitAbilityLevel.bind(null, C));\r\n  lua_register(L, 'ReviveHero', ReviveHero.bind(null, C));\r\n  lua_register(L, 'ReviveHeroLoc', ReviveHeroLoc.bind(null, C));\r\n  lua_register(L, 'SetUnitExploded', SetUnitExploded.bind(null, C));\r\n  lua_register(L, 'SetUnitInvulnerable', SetUnitInvulnerable.bind(null, C));\r\n  lua_register(L, 'PauseUnit', PauseUnit.bind(null, C));\r\n  lua_register(L, 'IsUnitPaused', IsUnitPaused.bind(null, C));\r\n  lua_register(L, 'SetUnitPathing', SetUnitPathing.bind(null, C));\r\n  lua_register(L, 'ClearSelection', ClearSelection.bind(null, C));\r\n  lua_register(L, 'SelectUnit', SelectUnit.bind(null, C));\r\n  lua_register(L, 'GetUnitPointValue', GetUnitPointValue.bind(null, C));\r\n  lua_register(L, 'GetUnitPointValueByType', GetUnitPointValueByType.bind(null, C));\r\n  lua_register(L, 'UnitAddItem', UnitAddItem.bind(null, C));\r\n  lua_register(L, 'UnitAddItemById', UnitAddItemById.bind(null, C));\r\n  lua_register(L, 'UnitAddItemToSlotById', UnitAddItemToSlotById.bind(null, C));\r\n  lua_register(L, 'UnitRemoveItem', UnitRemoveItem.bind(null, C));\r\n  lua_register(L, 'UnitRemoveItemFromSlot', UnitRemoveItemFromSlot.bind(null, C));\r\n  lua_register(L, 'UnitHasItem', UnitHasItem.bind(null, C));\r\n  lua_register(L, 'UnitItemInSlot', UnitItemInSlot.bind(null, C));\r\n  lua_register(L, 'UnitInventorySize', UnitInventorySize.bind(null, C));\r\n  lua_register(L, 'UnitDropItemPoint', UnitDropItemPoint.bind(null, C));\r\n  lua_register(L, 'UnitDropItemSlot', UnitDropItemSlot.bind(null, C));\r\n  lua_register(L, 'UnitDropItemTarget', UnitDropItemTarget.bind(null, C));\r\n  lua_register(L, 'UnitUseItem', UnitUseItem.bind(null, C));\r\n  lua_register(L, 'UnitUseItemPoint', UnitUseItemPoint.bind(null, C));\r\n  lua_register(L, 'UnitUseItemTarget', UnitUseItemTarget.bind(null, C));\r\n  lua_register(L, 'GetUnitX', GetUnitX.bind(null, C));\r\n  lua_register(L, 'GetUnitY', GetUnitY.bind(null, C));\r\n  lua_register(L, 'GetUnitLoc', GetUnitLoc.bind(null, C));\r\n  lua_register(L, 'GetUnitFacing', GetUnitFacing.bind(null, C));\r\n  lua_register(L, 'GetUnitMoveSpeed', GetUnitMoveSpeed.bind(null, C));\r\n  lua_register(L, 'GetUnitDefaultMoveSpeed', GetUnitDefaultMoveSpeed.bind(null, C));\r\n  lua_register(L, 'GetUnitState', GetUnitState.bind(null, C));\r\n  lua_register(L, 'GetOwningPlayer', GetOwningPlayer.bind(null, C));\r\n  lua_register(L, 'GetUnitTypeId', GetUnitTypeId.bind(null, C));\r\n  lua_register(L, 'GetUnitRace', GetUnitRace.bind(null, C));\r\n  lua_register(L, 'GetUnitName', GetUnitName.bind(null, C));\r\n  lua_register(L, 'GetUnitFoodUsed', GetUnitFoodUsed.bind(null, C));\r\n  lua_register(L, 'GetUnitFoodMade', GetUnitFoodMade.bind(null, C));\r\n  lua_register(L, 'GetFoodMade', GetFoodMade.bind(null, C));\r\n  lua_register(L, 'GetFoodUsed', GetFoodUsed.bind(null, C));\r\n  lua_register(L, 'SetUnitUseFood', SetUnitUseFood.bind(null, C));\r\n  lua_register(L, 'GetUnitRallyPoint', GetUnitRallyPoint.bind(null, C));\r\n  lua_register(L, 'GetUnitRallyUnit', GetUnitRallyUnit.bind(null, C));\r\n  lua_register(L, 'GetUnitRallyDestructable', GetUnitRallyDestructable.bind(null, C));\r\n  lua_register(L, 'IsUnitInGroup', IsUnitInGroup.bind(null, C));\r\n  lua_register(L, 'IsUnitInForce', IsUnitInForce.bind(null, C));\r\n  lua_register(L, 'IsUnitOwnedByPlayer', IsUnitOwnedByPlayer.bind(null, C));\r\n  lua_register(L, 'IsUnitAlly', IsUnitAlly.bind(null, C));\r\n  lua_register(L, 'IsUnitEnemy', IsUnitEnemy.bind(null, C));\r\n  lua_register(L, 'IsUnitVisible', IsUnitVisible.bind(null, C));\r\n  lua_register(L, 'IsUnitDetected', IsUnitDetected.bind(null, C));\r\n  lua_register(L, 'IsUnitInvisible', IsUnitInvisible.bind(null, C));\r\n  lua_register(L, 'IsUnitFogged', IsUnitFogged.bind(null, C));\r\n  lua_register(L, 'IsUnitMasked', IsUnitMasked.bind(null, C));\r\n  lua_register(L, 'IsUnitSelected', IsUnitSelected.bind(null, C));\r\n  lua_register(L, 'IsUnitRace', IsUnitRace.bind(null, C));\r\n  lua_register(L, 'IsUnitType', IsUnitType.bind(null, C));\r\n  lua_register(L, 'IsUnit', IsUnit.bind(null, C));\r\n  lua_register(L, 'IsUnitInRange', IsUnitInRange.bind(null, C));\r\n  lua_register(L, 'IsUnitInRangeXY', IsUnitInRangeXY.bind(null, C));\r\n  lua_register(L, 'IsUnitInRangeLoc', IsUnitInRangeLoc.bind(null, C));\r\n  lua_register(L, 'IsUnitHidden', IsUnitHidden.bind(null, C));\r\n  lua_register(L, 'IsUnitIllusion', IsUnitIllusion.bind(null, C));\r\n  lua_register(L, 'IsUnitInTransport', IsUnitInTransport.bind(null, C));\r\n  lua_register(L, 'IsUnitLoaded', IsUnitLoaded.bind(null, C));\r\n  lua_register(L, 'IsHeroUnitId', IsHeroUnitId.bind(null, C));\r\n  lua_register(L, 'IsUnitIdType', IsUnitIdType.bind(null, C));\r\n  lua_register(L, 'UnitShareVision', UnitShareVision.bind(null, C));\r\n  lua_register(L, 'UnitSuspendDecay', UnitSuspendDecay.bind(null, C));\r\n  lua_register(L, 'UnitAddType', UnitAddType.bind(null, C));\r\n  lua_register(L, 'UnitRemoveType', UnitRemoveType.bind(null, C));\r\n  lua_register(L, 'UnitAddAbility', UnitAddAbility.bind(null, C));\r\n  lua_register(L, 'UnitRemoveAbility', UnitRemoveAbility.bind(null, C));\r\n  lua_register(L, 'UnitMakeAbilityPermanent', UnitMakeAbilityPermanent.bind(null, C));\r\n  lua_register(L, 'UnitRemoveBuffs', UnitRemoveBuffs.bind(null, C));\r\n  lua_register(L, 'UnitRemoveBuffsEx', UnitRemoveBuffsEx.bind(null, C));\r\n  lua_register(L, 'UnitHasBuffsEx', UnitHasBuffsEx.bind(null, C));\r\n  lua_register(L, 'UnitCountBuffsEx', UnitCountBuffsEx.bind(null, C));\r\n  lua_register(L, 'UnitAddSleep', UnitAddSleep.bind(null, C));\r\n  lua_register(L, 'UnitCanSleep', UnitCanSleep.bind(null, C));\r\n  lua_register(L, 'UnitAddSleepPerm', UnitAddSleepPerm.bind(null, C));\r\n  lua_register(L, 'UnitCanSleepPerm', UnitCanSleepPerm.bind(null, C));\r\n  lua_register(L, 'UnitIsSleeping', UnitIsSleeping.bind(null, C));\r\n  lua_register(L, 'UnitWakeUp', UnitWakeUp.bind(null, C));\r\n  lua_register(L, 'UnitApplyTimedLife', UnitApplyTimedLife.bind(null, C));\r\n  lua_register(L, 'UnitIgnoreAlarm', UnitIgnoreAlarm.bind(null, C));\r\n  lua_register(L, 'UnitIgnoreAlarmToggled', UnitIgnoreAlarmToggled.bind(null, C));\r\n  lua_register(L, 'UnitResetCooldown', UnitResetCooldown.bind(null, C));\r\n  lua_register(L, 'UnitSetConstructionProgress', UnitSetConstructionProgress.bind(null, C));\r\n  lua_register(L, 'UnitSetUpgradeProgress', UnitSetUpgradeProgress.bind(null, C));\r\n  lua_register(L, 'UnitPauseTimedLife', UnitPauseTimedLife.bind(null, C));\r\n  lua_register(L, 'UnitSetUsesAltIcon', UnitSetUsesAltIcon.bind(null, C));\r\n  lua_register(L, 'UnitDamagePoint', UnitDamagePoint.bind(null, C));\r\n  lua_register(L, 'UnitDamageTarget', UnitDamageTarget.bind(null, C));\r\n  lua_register(L, 'IssueImmediateOrder', IssueImmediateOrder.bind(null, C));\r\n  lua_register(L, 'IssueImmediateOrderById', IssueImmediateOrderById.bind(null, C));\r\n  lua_register(L, 'IssuePointOrder', IssuePointOrder.bind(null, C));\r\n  lua_register(L, 'IssuePointOrderLoc', IssuePointOrderLoc.bind(null, C));\r\n  lua_register(L, 'IssuePointOrderById', IssuePointOrderById.bind(null, C));\r\n  lua_register(L, 'IssuePointOrderByIdLoc', IssuePointOrderByIdLoc.bind(null, C));\r\n  lua_register(L, 'IssueTargetOrder', IssueTargetOrder.bind(null, C));\r\n  lua_register(L, 'IssueTargetOrderById', IssueTargetOrderById.bind(null, C));\r\n  lua_register(L, 'IssueInstantPointOrder', IssueInstantPointOrder.bind(null, C));\r\n  lua_register(L, 'IssueInstantPointOrderById', IssueInstantPointOrderById.bind(null, C));\r\n  lua_register(L, 'IssueInstantTargetOrder', IssueInstantTargetOrder.bind(null, C));\r\n  lua_register(L, 'IssueInstantTargetOrderById', IssueInstantTargetOrderById.bind(null, C));\r\n  lua_register(L, 'IssueBuildOrder', IssueBuildOrder.bind(null, C));\r\n  lua_register(L, 'IssueBuildOrderById', IssueBuildOrderById.bind(null, C));\r\n  lua_register(L, 'IssueNeutralImmediateOrder', IssueNeutralImmediateOrder.bind(null, C));\r\n  lua_register(L, 'IssueNeutralImmediateOrderById', IssueNeutralImmediateOrderById.bind(null, C));\r\n  lua_register(L, 'IssueNeutralPointOrder', IssueNeutralPointOrder.bind(null, C));\r\n  lua_register(L, 'IssueNeutralPointOrderById', IssueNeutralPointOrderById.bind(null, C));\r\n  lua_register(L, 'IssueNeutralTargetOrder', IssueNeutralTargetOrder.bind(null, C));\r\n  lua_register(L, 'IssueNeutralTargetOrderById', IssueNeutralTargetOrderById.bind(null, C));\r\n  lua_register(L, 'GetUnitCurrentOrder', GetUnitCurrentOrder.bind(null, C));\r\n  lua_register(L, 'SetResourceAmount', SetResourceAmount.bind(null, C));\r\n  lua_register(L, 'AddResourceAmount', AddResourceAmount.bind(null, C));\r\n  lua_register(L, 'GetResourceAmount', GetResourceAmount.bind(null, C));\r\n  lua_register(L, 'WaygateGetDestinationX', WaygateGetDestinationX.bind(null, C));\r\n  lua_register(L, 'WaygateGetDestinationY', WaygateGetDestinationY.bind(null, C));\r\n  lua_register(L, 'WaygateSetDestination', WaygateSetDestination.bind(null, C));\r\n  lua_register(L, 'WaygateActivate', WaygateActivate.bind(null, C));\r\n  lua_register(L, 'WaygateIsActive', WaygateIsActive.bind(null, C));\r\n  lua_register(L, 'AddItemToAllStock', AddItemToAllStock.bind(null, C));\r\n  lua_register(L, 'AddItemToStock', AddItemToStock.bind(null, C));\r\n  lua_register(L, 'AddUnitToAllStock', AddUnitToAllStock.bind(null, C));\r\n  lua_register(L, 'AddUnitToStock', AddUnitToStock.bind(null, C));\r\n  lua_register(L, 'RemoveItemFromAllStock', RemoveItemFromAllStock.bind(null, C));\r\n  lua_register(L, 'RemoveItemFromStock', RemoveItemFromStock.bind(null, C));\r\n  lua_register(L, 'RemoveUnitFromAllStock', RemoveUnitFromAllStock.bind(null, C));\r\n  lua_register(L, 'RemoveUnitFromStock', RemoveUnitFromStock.bind(null, C));\r\n  lua_register(L, 'SetAllItemTypeSlots', SetAllItemTypeSlots.bind(null, C));\r\n  lua_register(L, 'SetAllUnitTypeSlots', SetAllUnitTypeSlots.bind(null, C));\r\n  lua_register(L, 'SetItemTypeSlots', SetItemTypeSlots.bind(null, C));\r\n  lua_register(L, 'SetUnitTypeSlots', SetUnitTypeSlots.bind(null, C));\r\n  lua_register(L, 'GetUnitUserData', GetUnitUserData.bind(null, C));\r\n  lua_register(L, 'SetUnitUserData', SetUnitUserData.bind(null, C));\r\n  lua_register(L, 'Player', Player.bind(null, C));\r\n  lua_register(L, 'GetLocalPlayer', GetLocalPlayer.bind(null, C));\r\n  lua_register(L, 'IsPlayerAlly', IsPlayerAlly.bind(null, C));\r\n  lua_register(L, 'IsPlayerEnemy', IsPlayerEnemy.bind(null, C));\r\n  lua_register(L, 'IsPlayerInForce', IsPlayerInForce.bind(null, C));\r\n  lua_register(L, 'IsPlayerObserver', IsPlayerObserver.bind(null, C));\r\n  lua_register(L, 'IsVisibleToPlayer', IsVisibleToPlayer.bind(null, C));\r\n  lua_register(L, 'IsLocationVisibleToPlayer', IsLocationVisibleToPlayer.bind(null, C));\r\n  lua_register(L, 'IsFoggedToPlayer', IsFoggedToPlayer.bind(null, C));\r\n  lua_register(L, 'IsLocationFoggedToPlayer', IsLocationFoggedToPlayer.bind(null, C));\r\n  lua_register(L, 'IsMaskedToPlayer', IsMaskedToPlayer.bind(null, C));\r\n  lua_register(L, 'IsLocationMaskedToPlayer', IsLocationMaskedToPlayer.bind(null, C));\r\n  lua_register(L, 'GetPlayerRace', GetPlayerRace.bind(null, C));\r\n  lua_register(L, 'GetPlayerId', GetPlayerId.bind(null, C));\r\n  lua_register(L, 'GetPlayerUnitCount', GetPlayerUnitCount.bind(null, C));\r\n  lua_register(L, 'GetPlayerTypedUnitCount', GetPlayerTypedUnitCount.bind(null, C));\r\n  lua_register(L, 'GetPlayerStructureCount', GetPlayerStructureCount.bind(null, C));\r\n  lua_register(L, 'GetPlayerState', GetPlayerState.bind(null, C));\r\n  lua_register(L, 'GetPlayerScore', GetPlayerScore.bind(null, C));\r\n  lua_register(L, 'GetPlayerAlliance', GetPlayerAlliance.bind(null, C));\r\n  lua_register(L, 'GetPlayerHandicap', GetPlayerHandicap.bind(null, C));\r\n  lua_register(L, 'GetPlayerHandicapXP', GetPlayerHandicapXP.bind(null, C));\r\n  lua_register(L, 'SetPlayerHandicap', SetPlayerHandicap.bind(null, C));\r\n  lua_register(L, 'SetPlayerHandicapXP', SetPlayerHandicapXP.bind(null, C));\r\n  lua_register(L, 'SetPlayerTechMaxAllowed', SetPlayerTechMaxAllowed.bind(null, C));\r\n  lua_register(L, 'GetPlayerTechMaxAllowed', GetPlayerTechMaxAllowed.bind(null, C));\r\n  lua_register(L, 'AddPlayerTechResearched', AddPlayerTechResearched.bind(null, C));\r\n  lua_register(L, 'SetPlayerTechResearched', SetPlayerTechResearched.bind(null, C));\r\n  lua_register(L, 'GetPlayerTechResearched', GetPlayerTechResearched.bind(null, C));\r\n  lua_register(L, 'GetPlayerTechCount', GetPlayerTechCount.bind(null, C));\r\n  lua_register(L, 'SetPlayerUnitsOwner', SetPlayerUnitsOwner.bind(null, C));\r\n  lua_register(L, 'CripplePlayer', CripplePlayer.bind(null, C));\r\n  lua_register(L, 'SetPlayerAbilityAvailable', SetPlayerAbilityAvailable.bind(null, C));\r\n  lua_register(L, 'SetPlayerState', SetPlayerState.bind(null, C));\r\n  lua_register(L, 'RemovePlayer', RemovePlayer.bind(null, C));\r\n  lua_register(L, 'CachePlayerHeroData', CachePlayerHeroData.bind(null, C));\r\n  lua_register(L, 'SetFogStateRect', SetFogStateRect.bind(null, C));\r\n  lua_register(L, 'SetFogStateRadius', SetFogStateRadius.bind(null, C));\r\n  lua_register(L, 'SetFogStateRadiusLoc', SetFogStateRadiusLoc.bind(null, C));\r\n  lua_register(L, 'FogMaskEnable', FogMaskEnable.bind(null, C));\r\n  lua_register(L, 'IsFogMaskEnabled', IsFogMaskEnabled.bind(null, C));\r\n  lua_register(L, 'FogEnable', FogEnable.bind(null, C));\r\n  lua_register(L, 'IsFogEnabled', IsFogEnabled.bind(null, C));\r\n  lua_register(L, 'CreateFogModifierRect', CreateFogModifierRect.bind(null, C));\r\n  lua_register(L, 'CreateFogModifierRadius', CreateFogModifierRadius.bind(null, C));\r\n  lua_register(L, 'CreateFogModifierRadiusLoc', CreateFogModifierRadiusLoc.bind(null, C));\r\n  lua_register(L, 'DestroyFogModifier', DestroyFogModifier.bind(null, C));\r\n  lua_register(L, 'FogModifierStart', FogModifierStart.bind(null, C));\r\n  lua_register(L, 'FogModifierStop', FogModifierStop.bind(null, C));\r\n  lua_register(L, 'VersionGet', VersionGet.bind(null, C));\r\n  lua_register(L, 'VersionCompatible', VersionCompatible.bind(null, C));\r\n  lua_register(L, 'VersionSupported', VersionSupported.bind(null, C));\r\n  lua_register(L, 'EndGame', EndGame.bind(null, C));\r\n  lua_register(L, 'ChangeLevel', ChangeLevel.bind(null, C));\r\n  lua_register(L, 'RestartGame', RestartGame.bind(null, C));\r\n  lua_register(L, 'ReloadGame', ReloadGame.bind(null, C));\r\n  lua_register(L, 'SetCampaignMenuRace', SetCampaignMenuRace.bind(null, C));\r\n  lua_register(L, 'SetCampaignMenuRaceEx', SetCampaignMenuRaceEx.bind(null, C));\r\n  lua_register(L, 'ForceCampaignSelectScreen', ForceCampaignSelectScreen.bind(null, C));\r\n  lua_register(L, 'LoadGame', LoadGame.bind(null, C));\r\n  lua_register(L, 'SaveGame', SaveGame.bind(null, C));\r\n  lua_register(L, 'RenameSaveDirectory', RenameSaveDirectory.bind(null, C));\r\n  lua_register(L, 'RemoveSaveDirectory', RemoveSaveDirectory.bind(null, C));\r\n  lua_register(L, 'CopySaveGame', CopySaveGame.bind(null, C));\r\n  lua_register(L, 'SaveGameExists', SaveGameExists.bind(null, C));\r\n  lua_register(L, 'SyncSelections', SyncSelections.bind(null, C));\r\n  lua_register(L, 'SetFloatGameState', SetFloatGameState.bind(null, C));\r\n  lua_register(L, 'GetFloatGameState', GetFloatGameState.bind(null, C));\r\n  lua_register(L, 'SetIntegerGameState', SetIntegerGameState.bind(null, C));\r\n  lua_register(L, 'GetIntegerGameState', GetIntegerGameState.bind(null, C));\r\n  lua_register(L, 'SetTutorialCleared', SetTutorialCleared.bind(null, C));\r\n  lua_register(L, 'SetMissionAvailable', SetMissionAvailable.bind(null, C));\r\n  lua_register(L, 'SetCampaignAvailable', SetCampaignAvailable.bind(null, C));\r\n  lua_register(L, 'SetOpCinematicAvailable', SetOpCinematicAvailable.bind(null, C));\r\n  lua_register(L, 'SetEdCinematicAvailable', SetEdCinematicAvailable.bind(null, C));\r\n  lua_register(L, 'GetDefaultDifficulty', GetDefaultDifficulty.bind(null, C));\r\n  lua_register(L, 'SetDefaultDifficulty', SetDefaultDifficulty.bind(null, C));\r\n  lua_register(L, 'SetCustomCampaignButtonVisible', SetCustomCampaignButtonVisible.bind(null, C));\r\n  lua_register(L, 'GetCustomCampaignButtonVisible', GetCustomCampaignButtonVisible.bind(null, C));\r\n  lua_register(L, 'DoNotSaveReplay', DoNotSaveReplay.bind(null, C));\r\n  lua_register(L, 'DialogCreate', DialogCreate.bind(null, C));\r\n  lua_register(L, 'DialogDestroy', DialogDestroy.bind(null, C));\r\n  lua_register(L, 'DialogClear', DialogClear.bind(null, C));\r\n  lua_register(L, 'DialogSetMessage', DialogSetMessage.bind(null, C));\r\n  lua_register(L, 'DialogAddButton', DialogAddButton.bind(null, C));\r\n  lua_register(L, 'DialogAddQuitButton', DialogAddQuitButton.bind(null, C));\r\n  lua_register(L, 'DialogDisplay', DialogDisplay.bind(null, C));\r\n  lua_register(L, 'ReloadGameCachesFromDisk', ReloadGameCachesFromDisk.bind(null, C));\r\n  lua_register(L, 'InitGameCache', InitGameCache.bind(null, C));\r\n  lua_register(L, 'SaveGameCache', SaveGameCache.bind(null, C));\r\n  lua_register(L, 'StoreInteger', StoreInteger.bind(null, C));\r\n  lua_register(L, 'StoreReal', StoreReal.bind(null, C));\r\n  lua_register(L, 'StoreBoolean', StoreBoolean.bind(null, C));\r\n  lua_register(L, 'StoreUnit', StoreUnit.bind(null, C));\r\n  lua_register(L, 'StoreString', StoreString.bind(null, C));\r\n  lua_register(L, 'SyncStoredInteger', SyncStoredInteger.bind(null, C));\r\n  lua_register(L, 'SyncStoredReal', SyncStoredReal.bind(null, C));\r\n  lua_register(L, 'SyncStoredBoolean', SyncStoredBoolean.bind(null, C));\r\n  lua_register(L, 'SyncStoredUnit', SyncStoredUnit.bind(null, C));\r\n  lua_register(L, 'SyncStoredString', SyncStoredString.bind(null, C));\r\n  lua_register(L, 'HaveStoredInteger', HaveStoredInteger.bind(null, C));\r\n  lua_register(L, 'HaveStoredReal', HaveStoredReal.bind(null, C));\r\n  lua_register(L, 'HaveStoredBoolean', HaveStoredBoolean.bind(null, C));\r\n  lua_register(L, 'HaveStoredUnit', HaveStoredUnit.bind(null, C));\r\n  lua_register(L, 'HaveStoredString', HaveStoredString.bind(null, C));\r\n  lua_register(L, 'FlushGameCache', FlushGameCache.bind(null, C));\r\n  lua_register(L, 'FlushStoredMission', FlushStoredMission.bind(null, C));\r\n  lua_register(L, 'FlushStoredInteger', FlushStoredInteger.bind(null, C));\r\n  lua_register(L, 'FlushStoredReal', FlushStoredReal.bind(null, C));\r\n  lua_register(L, 'FlushStoredBoolean', FlushStoredBoolean.bind(null, C));\r\n  lua_register(L, 'FlushStoredUnit', FlushStoredUnit.bind(null, C));\r\n  lua_register(L, 'FlushStoredString', FlushStoredString.bind(null, C));\r\n  lua_register(L, 'GetStoredInteger', GetStoredInteger.bind(null, C));\r\n  lua_register(L, 'GetStoredReal', GetStoredReal.bind(null, C));\r\n  lua_register(L, 'GetStoredBoolean', GetStoredBoolean.bind(null, C));\r\n  lua_register(L, 'GetStoredString', GetStoredString.bind(null, C));\r\n  lua_register(L, 'RestoreUnit', RestoreUnit.bind(null, C));\r\n  lua_register(L, 'InitHashtable', InitHashtable.bind(null, C));\r\n  lua_register(L, 'SaveInteger', SaveInteger.bind(null, C));\r\n  lua_register(L, 'SaveReal', SaveReal.bind(null, C));\r\n  lua_register(L, 'SaveBoolean', SaveBoolean.bind(null, C));\r\n  lua_register(L, 'SaveStr', SaveStr.bind(null, C));\r\n  lua_register(L, 'SavePlayerHandle', SavePlayerHandle.bind(null, C));\r\n  lua_register(L, 'SaveWidgetHandle', SaveWidgetHandle.bind(null, C));\r\n  lua_register(L, 'SaveDestructableHandle', SaveDestructableHandle.bind(null, C));\r\n  lua_register(L, 'SaveItemHandle', SaveItemHandle.bind(null, C));\r\n  lua_register(L, 'SaveUnitHandle', SaveUnitHandle.bind(null, C));\r\n  lua_register(L, 'SaveAbilityHandle', SaveAbilityHandle.bind(null, C));\r\n  lua_register(L, 'SaveTimerHandle', SaveTimerHandle.bind(null, C));\r\n  lua_register(L, 'SaveTriggerHandle', SaveTriggerHandle.bind(null, C));\r\n  lua_register(L, 'SaveTriggerConditionHandle', SaveTriggerConditionHandle.bind(null, C));\r\n  lua_register(L, 'SaveTriggerActionHandle', SaveTriggerActionHandle.bind(null, C));\r\n  lua_register(L, 'SaveTriggerEventHandle', SaveTriggerEventHandle.bind(null, C));\r\n  lua_register(L, 'SaveForceHandle', SaveForceHandle.bind(null, C));\r\n  lua_register(L, 'SaveGroupHandle', SaveGroupHandle.bind(null, C));\r\n  lua_register(L, 'SaveLocationHandle', SaveLocationHandle.bind(null, C));\r\n  lua_register(L, 'SaveRectHandle', SaveRectHandle.bind(null, C));\r\n  lua_register(L, 'SaveBooleanExprHandle', SaveBooleanExprHandle.bind(null, C));\r\n  lua_register(L, 'SaveSoundHandle', SaveSoundHandle.bind(null, C));\r\n  lua_register(L, 'SaveEffectHandle', SaveEffectHandle.bind(null, C));\r\n  lua_register(L, 'SaveUnitPoolHandle', SaveUnitPoolHandle.bind(null, C));\r\n  lua_register(L, 'SaveItemPoolHandle', SaveItemPoolHandle.bind(null, C));\r\n  lua_register(L, 'SaveQuestHandle', SaveQuestHandle.bind(null, C));\r\n  lua_register(L, 'SaveQuestItemHandle', SaveQuestItemHandle.bind(null, C));\r\n  lua_register(L, 'SaveDefeatConditionHandle', SaveDefeatConditionHandle.bind(null, C));\r\n  lua_register(L, 'SaveTimerDialogHandle', SaveTimerDialogHandle.bind(null, C));\r\n  lua_register(L, 'SaveLeaderboardHandle', SaveLeaderboardHandle.bind(null, C));\r\n  lua_register(L, 'SaveMultiboardHandle', SaveMultiboardHandle.bind(null, C));\r\n  lua_register(L, 'SaveMultiboardItemHandle', SaveMultiboardItemHandle.bind(null, C));\r\n  lua_register(L, 'SaveTrackableHandle', SaveTrackableHandle.bind(null, C));\r\n  lua_register(L, 'SaveDialogHandle', SaveDialogHandle.bind(null, C));\r\n  lua_register(L, 'SaveButtonHandle', SaveButtonHandle.bind(null, C));\r\n  lua_register(L, 'SaveTextTagHandle', SaveTextTagHandle.bind(null, C));\r\n  lua_register(L, 'SaveLightningHandle', SaveLightningHandle.bind(null, C));\r\n  lua_register(L, 'SaveImageHandle', SaveImageHandle.bind(null, C));\r\n  lua_register(L, 'SaveUbersplatHandle', SaveUbersplatHandle.bind(null, C));\r\n  lua_register(L, 'SaveRegionHandle', SaveRegionHandle.bind(null, C));\r\n  lua_register(L, 'SaveFogStateHandle', SaveFogStateHandle.bind(null, C));\r\n  lua_register(L, 'SaveFogModifierHandle', SaveFogModifierHandle.bind(null, C));\r\n  lua_register(L, 'SaveAgentHandle', SaveAgentHandle.bind(null, C));\r\n  lua_register(L, 'SaveHashtableHandle', SaveHashtableHandle.bind(null, C));\r\n  lua_register(L, 'LoadInteger', LoadInteger.bind(null, C));\r\n  lua_register(L, 'LoadReal', LoadReal.bind(null, C));\r\n  lua_register(L, 'LoadBoolean', LoadBoolean.bind(null, C));\r\n  lua_register(L, 'LoadStr', LoadStr.bind(null, C));\r\n  lua_register(L, 'LoadPlayerHandle', LoadPlayerHandle.bind(null, C));\r\n  lua_register(L, 'LoadWidgetHandle', LoadWidgetHandle.bind(null, C));\r\n  lua_register(L, 'LoadDestructableHandle', LoadDestructableHandle.bind(null, C));\r\n  lua_register(L, 'LoadItemHandle', LoadItemHandle.bind(null, C));\r\n  lua_register(L, 'LoadUnitHandle', LoadUnitHandle.bind(null, C));\r\n  lua_register(L, 'LoadAbilityHandle', LoadAbilityHandle.bind(null, C));\r\n  lua_register(L, 'LoadTimerHandle', LoadTimerHandle.bind(null, C));\r\n  lua_register(L, 'LoadTriggerHandle', LoadTriggerHandle.bind(null, C));\r\n  lua_register(L, 'LoadTriggerConditionHandle', LoadTriggerConditionHandle.bind(null, C));\r\n  lua_register(L, 'LoadTriggerActionHandle', LoadTriggerActionHandle.bind(null, C));\r\n  lua_register(L, 'LoadTriggerEventHandle', LoadTriggerEventHandle.bind(null, C));\r\n  lua_register(L, 'LoadForceHandle', LoadForceHandle.bind(null, C));\r\n  lua_register(L, 'LoadGroupHandle', LoadGroupHandle.bind(null, C));\r\n  lua_register(L, 'LoadLocationHandle', LoadLocationHandle.bind(null, C));\r\n  lua_register(L, 'LoadRectHandle', LoadRectHandle.bind(null, C));\r\n  lua_register(L, 'LoadBooleanExprHandle', LoadBooleanExprHandle.bind(null, C));\r\n  lua_register(L, 'LoadSoundHandle', LoadSoundHandle.bind(null, C));\r\n  lua_register(L, 'LoadEffectHandle', LoadEffectHandle.bind(null, C));\r\n  lua_register(L, 'LoadUnitPoolHandle', LoadUnitPoolHandle.bind(null, C));\r\n  lua_register(L, 'LoadItemPoolHandle', LoadItemPoolHandle.bind(null, C));\r\n  lua_register(L, 'LoadQuestHandle', LoadQuestHandle.bind(null, C));\r\n  lua_register(L, 'LoadQuestItemHandle', LoadQuestItemHandle.bind(null, C));\r\n  lua_register(L, 'LoadDefeatConditionHandle', LoadDefeatConditionHandle.bind(null, C));\r\n  lua_register(L, 'LoadTimerDialogHandle', LoadTimerDialogHandle.bind(null, C));\r\n  lua_register(L, 'LoadLeaderboardHandle', LoadLeaderboardHandle.bind(null, C));\r\n  lua_register(L, 'LoadMultiboardHandle', LoadMultiboardHandle.bind(null, C));\r\n  lua_register(L, 'LoadMultiboardItemHandle', LoadMultiboardItemHandle.bind(null, C));\r\n  lua_register(L, 'LoadTrackableHandle', LoadTrackableHandle.bind(null, C));\r\n  lua_register(L, 'LoadDialogHandle', LoadDialogHandle.bind(null, C));\r\n  lua_register(L, 'LoadButtonHandle', LoadButtonHandle.bind(null, C));\r\n  lua_register(L, 'LoadTextTagHandle', LoadTextTagHandle.bind(null, C));\r\n  lua_register(L, 'LoadLightningHandle', LoadLightningHandle.bind(null, C));\r\n  lua_register(L, 'LoadImageHandle', LoadImageHandle.bind(null, C));\r\n  lua_register(L, 'LoadUbersplatHandle', LoadUbersplatHandle.bind(null, C));\r\n  lua_register(L, 'LoadRegionHandle', LoadRegionHandle.bind(null, C));\r\n  lua_register(L, 'LoadFogStateHandle', LoadFogStateHandle.bind(null, C));\r\n  lua_register(L, 'LoadFogModifierHandle', LoadFogModifierHandle.bind(null, C));\r\n  lua_register(L, 'LoadHashtableHandle', LoadHashtableHandle.bind(null, C));\r\n  lua_register(L, 'HaveSavedInteger', HaveSavedInteger.bind(null, C));\r\n  lua_register(L, 'HaveSavedReal', HaveSavedReal.bind(null, C));\r\n  lua_register(L, 'HaveSavedBoolean', HaveSavedBoolean.bind(null, C));\r\n  lua_register(L, 'HaveSavedString', HaveSavedString.bind(null, C));\r\n  lua_register(L, 'HaveSavedHandle', HaveSavedHandle.bind(null, C));\r\n  lua_register(L, 'RemoveSavedInteger', RemoveSavedInteger.bind(null, C));\r\n  lua_register(L, 'RemoveSavedReal', RemoveSavedReal.bind(null, C));\r\n  lua_register(L, 'RemoveSavedBoolean', RemoveSavedBoolean.bind(null, C));\r\n  lua_register(L, 'RemoveSavedString', RemoveSavedString.bind(null, C));\r\n  lua_register(L, 'RemoveSavedHandle', RemoveSavedHandle.bind(null, C));\r\n  lua_register(L, 'FlushParentHashtable', FlushParentHashtable.bind(null, C));\r\n  lua_register(L, 'FlushChildHashtable', FlushChildHashtable.bind(null, C));\r\n  lua_register(L, 'GetRandomInt', GetRandomInt.bind(null, C));\r\n  lua_register(L, 'GetRandomReal', GetRandomReal.bind(null, C));\r\n  lua_register(L, 'CreateUnitPool', CreateUnitPool.bind(null, C));\r\n  lua_register(L, 'DestroyUnitPool', DestroyUnitPool.bind(null, C));\r\n  lua_register(L, 'UnitPoolAddUnitType', UnitPoolAddUnitType.bind(null, C));\r\n  lua_register(L, 'UnitPoolRemoveUnitType', UnitPoolRemoveUnitType.bind(null, C));\r\n  lua_register(L, 'PlaceRandomUnit', PlaceRandomUnit.bind(null, C));\r\n  lua_register(L, 'CreateItemPool', CreateItemPool.bind(null, C));\r\n  lua_register(L, 'DestroyItemPool', DestroyItemPool.bind(null, C));\r\n  lua_register(L, 'ItemPoolAddItemType', ItemPoolAddItemType.bind(null, C));\r\n  lua_register(L, 'ItemPoolRemoveItemType', ItemPoolRemoveItemType.bind(null, C));\r\n  lua_register(L, 'PlaceRandomItem', PlaceRandomItem.bind(null, C));\r\n  lua_register(L, 'ChooseRandomCreep', ChooseRandomCreep.bind(null, C));\r\n  lua_register(L, 'ChooseRandomNPBuilding', ChooseRandomNPBuilding.bind(null, C));\r\n  lua_register(L, 'ChooseRandomItem', ChooseRandomItem.bind(null, C));\r\n  lua_register(L, 'ChooseRandomItemEx', ChooseRandomItemEx.bind(null, C));\r\n  lua_register(L, 'SetRandomSeed', SetRandomSeed.bind(null, C));\r\n  lua_register(L, 'SetTerrainFog', SetTerrainFog.bind(null, C));\r\n  lua_register(L, 'ResetTerrainFog', ResetTerrainFog.bind(null, C));\r\n  lua_register(L, 'SetUnitFog', SetUnitFog.bind(null, C));\r\n  lua_register(L, 'SetTerrainFogEx', SetTerrainFogEx.bind(null, C));\r\n  lua_register(L, 'DisplayTextToPlayer', DisplayTextToPlayer.bind(null, C));\r\n  lua_register(L, 'DisplayTimedTextToPlayer', DisplayTimedTextToPlayer.bind(null, C));\r\n  lua_register(L, 'DisplayTimedTextFromPlayer', DisplayTimedTextFromPlayer.bind(null, C));\r\n  lua_register(L, 'ClearTextMessages', ClearTextMessages.bind(null, C));\r\n  lua_register(L, 'SetDayNightModels', SetDayNightModels.bind(null, C));\r\n  lua_register(L, 'SetSkyModel', SetSkyModel.bind(null, C));\r\n  lua_register(L, 'EnableUserControl', EnableUserControl.bind(null, C));\r\n  lua_register(L, 'EnableUserUI', EnableUserUI.bind(null, C));\r\n  lua_register(L, 'SuspendTimeOfDay', SuspendTimeOfDay.bind(null, C));\r\n  lua_register(L, 'SetTimeOfDayScale', SetTimeOfDayScale.bind(null, C));\r\n  lua_register(L, 'GetTimeOfDayScale', GetTimeOfDayScale.bind(null, C));\r\n  lua_register(L, 'ShowInterface', ShowInterface.bind(null, C));\r\n  lua_register(L, 'PauseGame', PauseGame.bind(null, C));\r\n  lua_register(L, 'UnitAddIndicator', UnitAddIndicator.bind(null, C));\r\n  lua_register(L, 'AddIndicator', AddIndicator.bind(null, C));\r\n  lua_register(L, 'PingMinimap', PingMinimap.bind(null, C));\r\n  lua_register(L, 'PingMinimapEx', PingMinimapEx.bind(null, C));\r\n  lua_register(L, 'EnableOcclusion', EnableOcclusion.bind(null, C));\r\n  lua_register(L, 'SetIntroShotText', SetIntroShotText.bind(null, C));\r\n  lua_register(L, 'SetIntroShotModel', SetIntroShotModel.bind(null, C));\r\n  lua_register(L, 'EnableWorldFogBoundary', EnableWorldFogBoundary.bind(null, C));\r\n  lua_register(L, 'PlayModelCinematic', PlayModelCinematic.bind(null, C));\r\n  lua_register(L, 'PlayCinematic', PlayCinematic.bind(null, C));\r\n  lua_register(L, 'ForceUIKey', ForceUIKey.bind(null, C));\r\n  lua_register(L, 'ForceUICancel', ForceUICancel.bind(null, C));\r\n  lua_register(L, 'DisplayLoadDialog', DisplayLoadDialog.bind(null, C));\r\n  lua_register(L, 'SetAltMinimapIcon', SetAltMinimapIcon.bind(null, C));\r\n  lua_register(L, 'DisableRestartMission', DisableRestartMission.bind(null, C));\r\n  lua_register(L, 'CreateTextTag', CreateTextTag.bind(null, C));\r\n  lua_register(L, 'DestroyTextTag', DestroyTextTag.bind(null, C));\r\n  lua_register(L, 'SetTextTagText', SetTextTagText.bind(null, C));\r\n  lua_register(L, 'SetTextTagPos', SetTextTagPos.bind(null, C));\r\n  lua_register(L, 'SetTextTagPosUnit', SetTextTagPosUnit.bind(null, C));\r\n  lua_register(L, 'SetTextTagColor', SetTextTagColor.bind(null, C));\r\n  lua_register(L, 'SetTextTagVelocity', SetTextTagVelocity.bind(null, C));\r\n  lua_register(L, 'SetTextTagVisibility', SetTextTagVisibility.bind(null, C));\r\n  lua_register(L, 'SetTextTagSuspended', SetTextTagSuspended.bind(null, C));\r\n  lua_register(L, 'SetTextTagPermanent', SetTextTagPermanent.bind(null, C));\r\n  lua_register(L, 'SetTextTagAge', SetTextTagAge.bind(null, C));\r\n  lua_register(L, 'SetTextTagLifespan', SetTextTagLifespan.bind(null, C));\r\n  lua_register(L, 'SetTextTagFadepoint', SetTextTagFadepoint.bind(null, C));\r\n  lua_register(L, 'SetReservedLocalHeroButtons', SetReservedLocalHeroButtons.bind(null, C));\r\n  lua_register(L, 'GetAllyColorFilterState', GetAllyColorFilterState.bind(null, C));\r\n  lua_register(L, 'SetAllyColorFilterState', SetAllyColorFilterState.bind(null, C));\r\n  lua_register(L, 'GetCreepCampFilterState', GetCreepCampFilterState.bind(null, C));\r\n  lua_register(L, 'SetCreepCampFilterState', SetCreepCampFilterState.bind(null, C));\r\n  lua_register(L, 'EnableMinimapFilterButtons', EnableMinimapFilterButtons.bind(null, C));\r\n  lua_register(L, 'EnableDragSelect', EnableDragSelect.bind(null, C));\r\n  lua_register(L, 'EnablePreSelect', EnablePreSelect.bind(null, C));\r\n  lua_register(L, 'EnableSelect', EnableSelect.bind(null, C));\r\n  lua_register(L, 'CreateTrackable', CreateTrackable.bind(null, C));\r\n  lua_register(L, 'CreateQuest', CreateQuest.bind(null, C));\r\n  lua_register(L, 'DestroyQuest', DestroyQuest.bind(null, C));\r\n  lua_register(L, 'QuestSetTitle', QuestSetTitle.bind(null, C));\r\n  lua_register(L, 'QuestSetDescription', QuestSetDescription.bind(null, C));\r\n  lua_register(L, 'QuestSetIconPath', QuestSetIconPath.bind(null, C));\r\n  lua_register(L, 'QuestSetRequired', QuestSetRequired.bind(null, C));\r\n  lua_register(L, 'QuestSetCompleted', QuestSetCompleted.bind(null, C));\r\n  lua_register(L, 'QuestSetDiscovered', QuestSetDiscovered.bind(null, C));\r\n  lua_register(L, 'QuestSetFailed', QuestSetFailed.bind(null, C));\r\n  lua_register(L, 'QuestSetEnabled', QuestSetEnabled.bind(null, C));\r\n  lua_register(L, 'IsQuestRequired', IsQuestRequired.bind(null, C));\r\n  lua_register(L, 'IsQuestCompleted', IsQuestCompleted.bind(null, C));\r\n  lua_register(L, 'IsQuestDiscovered', IsQuestDiscovered.bind(null, C));\r\n  lua_register(L, 'IsQuestFailed', IsQuestFailed.bind(null, C));\r\n  lua_register(L, 'IsQuestEnabled', IsQuestEnabled.bind(null, C));\r\n  lua_register(L, 'QuestCreateItem', QuestCreateItem.bind(null, C));\r\n  lua_register(L, 'QuestItemSetDescription', QuestItemSetDescription.bind(null, C));\r\n  lua_register(L, 'QuestItemSetCompleted', QuestItemSetCompleted.bind(null, C));\r\n  lua_register(L, 'IsQuestItemCompleted', IsQuestItemCompleted.bind(null, C));\r\n  lua_register(L, 'CreateDefeatCondition', CreateDefeatCondition.bind(null, C));\r\n  lua_register(L, 'DestroyDefeatCondition', DestroyDefeatCondition.bind(null, C));\r\n  lua_register(L, 'DefeatConditionSetDescription', DefeatConditionSetDescription.bind(null, C));\r\n  lua_register(L, 'FlashQuestDialogButton', FlashQuestDialogButton.bind(null, C));\r\n  lua_register(L, 'ForceQuestDialogUpdate', ForceQuestDialogUpdate.bind(null, C));\r\n  lua_register(L, 'CreateTimerDialog', CreateTimerDialog.bind(null, C));\r\n  lua_register(L, 'DestroyTimerDialog', DestroyTimerDialog.bind(null, C));\r\n  lua_register(L, 'TimerDialogSetTitle', TimerDialogSetTitle.bind(null, C));\r\n  lua_register(L, 'TimerDialogSetTitleColor', TimerDialogSetTitleColor.bind(null, C));\r\n  lua_register(L, 'TimerDialogSetTimeColor', TimerDialogSetTimeColor.bind(null, C));\r\n  lua_register(L, 'TimerDialogSetSpeed', TimerDialogSetSpeed.bind(null, C));\r\n  lua_register(L, 'TimerDialogDisplay', TimerDialogDisplay.bind(null, C));\r\n  lua_register(L, 'IsTimerDialogDisplayed', IsTimerDialogDisplayed.bind(null, C));\r\n  lua_register(L, 'TimerDialogSetRealTimeRemaining', TimerDialogSetRealTimeRemaining.bind(null, C));\r\n  lua_register(L, 'CreateLeaderboard', CreateLeaderboard.bind(null, C));\r\n  lua_register(L, 'DestroyLeaderboard', DestroyLeaderboard.bind(null, C));\r\n  lua_register(L, 'LeaderboardDisplay', LeaderboardDisplay.bind(null, C));\r\n  lua_register(L, 'IsLeaderboardDisplayed', IsLeaderboardDisplayed.bind(null, C));\r\n  lua_register(L, 'LeaderboardGetItemCount', LeaderboardGetItemCount.bind(null, C));\r\n  lua_register(L, 'LeaderboardSetSizeByItemCount', LeaderboardSetSizeByItemCount.bind(null, C));\r\n  lua_register(L, 'LeaderboardAddItem', LeaderboardAddItem.bind(null, C));\r\n  lua_register(L, 'LeaderboardRemoveItem', LeaderboardRemoveItem.bind(null, C));\r\n  lua_register(L, 'LeaderboardRemovePlayerItem', LeaderboardRemovePlayerItem.bind(null, C));\r\n  lua_register(L, 'LeaderboardClear', LeaderboardClear.bind(null, C));\r\n  lua_register(L, 'LeaderboardSortItemsByValue', LeaderboardSortItemsByValue.bind(null, C));\r\n  lua_register(L, 'LeaderboardSortItemsByPlayer', LeaderboardSortItemsByPlayer.bind(null, C));\r\n  lua_register(L, 'LeaderboardSortItemsByLabel', LeaderboardSortItemsByLabel.bind(null, C));\r\n  lua_register(L, 'LeaderboardHasPlayerItem', LeaderboardHasPlayerItem.bind(null, C));\r\n  lua_register(L, 'LeaderboardGetPlayerIndex', LeaderboardGetPlayerIndex.bind(null, C));\r\n  lua_register(L, 'LeaderboardSetLabel', LeaderboardSetLabel.bind(null, C));\r\n  lua_register(L, 'LeaderboardGetLabelText', LeaderboardGetLabelText.bind(null, C));\r\n  lua_register(L, 'PlayerSetLeaderboard', PlayerSetLeaderboard.bind(null, C));\r\n  lua_register(L, 'PlayerGetLeaderboard', PlayerGetLeaderboard.bind(null, C));\r\n  lua_register(L, 'LeaderboardSetLabelColor', LeaderboardSetLabelColor.bind(null, C));\r\n  lua_register(L, 'LeaderboardSetValueColor', LeaderboardSetValueColor.bind(null, C));\r\n  lua_register(L, 'LeaderboardSetStyle', LeaderboardSetStyle.bind(null, C));\r\n  lua_register(L, 'LeaderboardSetItemValue', LeaderboardSetItemValue.bind(null, C));\r\n  lua_register(L, 'LeaderboardSetItemLabel', LeaderboardSetItemLabel.bind(null, C));\r\n  lua_register(L, 'LeaderboardSetItemStyle', LeaderboardSetItemStyle.bind(null, C));\r\n  lua_register(L, 'LeaderboardSetItemLabelColor', LeaderboardSetItemLabelColor.bind(null, C));\r\n  lua_register(L, 'LeaderboardSetItemValueColor', LeaderboardSetItemValueColor.bind(null, C));\r\n  lua_register(L, 'CreateMultiboard', CreateMultiboard.bind(null, C));\r\n  lua_register(L, 'DestroyMultiboard', DestroyMultiboard.bind(null, C));\r\n  lua_register(L, 'MultiboardDisplay', MultiboardDisplay.bind(null, C));\r\n  lua_register(L, 'IsMultiboardDisplayed', IsMultiboardDisplayed.bind(null, C));\r\n  lua_register(L, 'MultiboardMinimize', MultiboardMinimize.bind(null, C));\r\n  lua_register(L, 'IsMultiboardMinimized', IsMultiboardMinimized.bind(null, C));\r\n  lua_register(L, 'MultiboardClear', MultiboardClear.bind(null, C));\r\n  lua_register(L, 'MultiboardSetTitleText', MultiboardSetTitleText.bind(null, C));\r\n  lua_register(L, 'MultiboardGetTitleText', MultiboardGetTitleText.bind(null, C));\r\n  lua_register(L, 'MultiboardSetTitleTextColor', MultiboardSetTitleTextColor.bind(null, C));\r\n  lua_register(L, 'MultiboardGetRowCount', MultiboardGetRowCount.bind(null, C));\r\n  lua_register(L, 'MultiboardGetColumnCount', MultiboardGetColumnCount.bind(null, C));\r\n  lua_register(L, 'MultiboardSetColumnCount', MultiboardSetColumnCount.bind(null, C));\r\n  lua_register(L, 'MultiboardSetRowCount', MultiboardSetRowCount.bind(null, C));\r\n  lua_register(L, 'MultiboardSetItemsStyle', MultiboardSetItemsStyle.bind(null, C));\r\n  lua_register(L, 'MultiboardSetItemsValue', MultiboardSetItemsValue.bind(null, C));\r\n  lua_register(L, 'MultiboardSetItemsValueColor', MultiboardSetItemsValueColor.bind(null, C));\r\n  lua_register(L, 'MultiboardSetItemsWidth', MultiboardSetItemsWidth.bind(null, C));\r\n  lua_register(L, 'MultiboardSetItemsIcon', MultiboardSetItemsIcon.bind(null, C));\r\n  lua_register(L, 'MultiboardGetItem', MultiboardGetItem.bind(null, C));\r\n  lua_register(L, 'MultiboardReleaseItem', MultiboardReleaseItem.bind(null, C));\r\n  lua_register(L, 'MultiboardSetItemStyle', MultiboardSetItemStyle.bind(null, C));\r\n  lua_register(L, 'MultiboardSetItemValue', MultiboardSetItemValue.bind(null, C));\r\n  lua_register(L, 'MultiboardSetItemValueColor', MultiboardSetItemValueColor.bind(null, C));\r\n  lua_register(L, 'MultiboardSetItemWidth', MultiboardSetItemWidth.bind(null, C));\r\n  lua_register(L, 'MultiboardSetItemIcon', MultiboardSetItemIcon.bind(null, C));\r\n  lua_register(L, 'MultiboardSuppressDisplay', MultiboardSuppressDisplay.bind(null, C));\r\n  lua_register(L, 'SetCameraPosition', SetCameraPosition.bind(null, C));\r\n  lua_register(L, 'SetCameraQuickPosition', SetCameraQuickPosition.bind(null, C));\r\n  lua_register(L, 'SetCameraBounds', SetCameraBounds.bind(null, C));\r\n  lua_register(L, 'StopCamera', StopCamera.bind(null, C));\r\n  lua_register(L, 'ResetToGameCamera', ResetToGameCamera.bind(null, C));\r\n  lua_register(L, 'PanCameraTo', PanCameraTo.bind(null, C));\r\n  lua_register(L, 'PanCameraToTimed', PanCameraToTimed.bind(null, C));\r\n  lua_register(L, 'PanCameraToWithZ', PanCameraToWithZ.bind(null, C));\r\n  lua_register(L, 'PanCameraToTimedWithZ', PanCameraToTimedWithZ.bind(null, C));\r\n  lua_register(L, 'SetCinematicCamera', SetCinematicCamera.bind(null, C));\r\n  lua_register(L, 'SetCameraRotateMode', SetCameraRotateMode.bind(null, C));\r\n  lua_register(L, 'SetCameraField', SetCameraField.bind(null, C));\r\n  lua_register(L, 'AdjustCameraField', AdjustCameraField.bind(null, C));\r\n  lua_register(L, 'SetCameraTargetController', SetCameraTargetController.bind(null, C));\r\n  lua_register(L, 'SetCameraOrientController', SetCameraOrientController.bind(null, C));\r\n  lua_register(L, 'CreateCameraSetup', CreateCameraSetup.bind(null, C));\r\n  lua_register(L, 'CameraSetupSetField', CameraSetupSetField.bind(null, C));\r\n  lua_register(L, 'CameraSetupGetField', CameraSetupGetField.bind(null, C));\r\n  lua_register(L, 'CameraSetupSetDestPosition', CameraSetupSetDestPosition.bind(null, C));\r\n  lua_register(L, 'CameraSetupGetDestPositionLoc', CameraSetupGetDestPositionLoc.bind(null, C));\r\n  lua_register(L, 'CameraSetupGetDestPositionX', CameraSetupGetDestPositionX.bind(null, C));\r\n  lua_register(L, 'CameraSetupGetDestPositionY', CameraSetupGetDestPositionY.bind(null, C));\r\n  lua_register(L, 'CameraSetupApply', CameraSetupApply.bind(null, C));\r\n  lua_register(L, 'CameraSetupApplyWithZ', CameraSetupApplyWithZ.bind(null, C));\r\n  lua_register(L, 'CameraSetupApplyForceDuration', CameraSetupApplyForceDuration.bind(null, C));\r\n  lua_register(L, 'CameraSetupApplyForceDurationWithZ', CameraSetupApplyForceDurationWithZ.bind(null, C));\r\n  lua_register(L, 'CameraSetTargetNoise', CameraSetTargetNoise.bind(null, C));\r\n  lua_register(L, 'CameraSetSourceNoise', CameraSetSourceNoise.bind(null, C));\r\n  lua_register(L, 'CameraSetTargetNoiseEx', CameraSetTargetNoiseEx.bind(null, C));\r\n  lua_register(L, 'CameraSetSourceNoiseEx', CameraSetSourceNoiseEx.bind(null, C));\r\n  lua_register(L, 'CameraSetSmoothingFactor', CameraSetSmoothingFactor.bind(null, C));\r\n  lua_register(L, 'SetCineFilterTexture', SetCineFilterTexture.bind(null, C));\r\n  lua_register(L, 'SetCineFilterBlendMode', SetCineFilterBlendMode.bind(null, C));\r\n  lua_register(L, 'SetCineFilterTexMapFlags', SetCineFilterTexMapFlags.bind(null, C));\r\n  lua_register(L, 'SetCineFilterStartUV', SetCineFilterStartUV.bind(null, C));\r\n  lua_register(L, 'SetCineFilterEndUV', SetCineFilterEndUV.bind(null, C));\r\n  lua_register(L, 'SetCineFilterStartColor', SetCineFilterStartColor.bind(null, C));\r\n  lua_register(L, 'SetCineFilterEndColor', SetCineFilterEndColor.bind(null, C));\r\n  lua_register(L, 'SetCineFilterDuration', SetCineFilterDuration.bind(null, C));\r\n  lua_register(L, 'DisplayCineFilter', DisplayCineFilter.bind(null, C));\r\n  lua_register(L, 'IsCineFilterDisplayed', IsCineFilterDisplayed.bind(null, C));\r\n  lua_register(L, 'SetCinematicScene', SetCinematicScene.bind(null, C));\r\n  lua_register(L, 'EndCinematicScene', EndCinematicScene.bind(null, C));\r\n  lua_register(L, 'ForceCinematicSubtitles', ForceCinematicSubtitles.bind(null, C));\r\n  lua_register(L, 'GetCameraMargin', GetCameraMargin.bind(null, C));\r\n  lua_register(L, 'GetCameraBoundMinX', GetCameraBoundMinX.bind(null, C));\r\n  lua_register(L, 'GetCameraBoundMinY', GetCameraBoundMinY.bind(null, C));\r\n  lua_register(L, 'GetCameraBoundMaxX', GetCameraBoundMaxX.bind(null, C));\r\n  lua_register(L, 'GetCameraBoundMaxY', GetCameraBoundMaxY.bind(null, C));\r\n  lua_register(L, 'GetCameraField', GetCameraField.bind(null, C));\r\n  lua_register(L, 'GetCameraTargetPositionX', GetCameraTargetPositionX.bind(null, C));\r\n  lua_register(L, 'GetCameraTargetPositionY', GetCameraTargetPositionY.bind(null, C));\r\n  lua_register(L, 'GetCameraTargetPositionZ', GetCameraTargetPositionZ.bind(null, C));\r\n  lua_register(L, 'GetCameraTargetPositionLoc', GetCameraTargetPositionLoc.bind(null, C));\r\n  lua_register(L, 'GetCameraEyePositionX', GetCameraEyePositionX.bind(null, C));\r\n  lua_register(L, 'GetCameraEyePositionY', GetCameraEyePositionY.bind(null, C));\r\n  lua_register(L, 'GetCameraEyePositionZ', GetCameraEyePositionZ.bind(null, C));\r\n  lua_register(L, 'GetCameraEyePositionLoc', GetCameraEyePositionLoc.bind(null, C));\r\n  lua_register(L, 'NewSoundEnvironment', NewSoundEnvironment.bind(null, C));\r\n  lua_register(L, 'CreateSound', CreateSound.bind(null, C));\r\n  lua_register(L, 'CreateSoundFilenameWithLabel', CreateSoundFilenameWithLabel.bind(null, C));\r\n  lua_register(L, 'CreateSoundFromLabel', CreateSoundFromLabel.bind(null, C));\r\n  lua_register(L, 'CreateMIDISound', CreateMIDISound.bind(null, C));\r\n  lua_register(L, 'SetSoundParamsFromLabel', SetSoundParamsFromLabel.bind(null, C));\r\n  lua_register(L, 'SetSoundDistanceCutoff', SetSoundDistanceCutoff.bind(null, C));\r\n  lua_register(L, 'SetSoundChannel', SetSoundChannel.bind(null, C));\r\n  lua_register(L, 'SetSoundVolume', SetSoundVolume.bind(null, C));\r\n  lua_register(L, 'SetSoundPitch', SetSoundPitch.bind(null, C));\r\n  lua_register(L, 'SetSoundPlayPosition', SetSoundPlayPosition.bind(null, C));\r\n  lua_register(L, 'SetSoundDistances', SetSoundDistances.bind(null, C));\r\n  lua_register(L, 'SetSoundConeAngles', SetSoundConeAngles.bind(null, C));\r\n  lua_register(L, 'SetSoundConeOrientation', SetSoundConeOrientation.bind(null, C));\r\n  lua_register(L, 'SetSoundPosition', SetSoundPosition.bind(null, C));\r\n  lua_register(L, 'SetSoundVelocity', SetSoundVelocity.bind(null, C));\r\n  lua_register(L, 'AttachSoundToUnit', AttachSoundToUnit.bind(null, C));\r\n  lua_register(L, 'StartSound', StartSound.bind(null, C));\r\n  lua_register(L, 'StopSound', StopSound.bind(null, C));\r\n  lua_register(L, 'KillSoundWhenDone', KillSoundWhenDone.bind(null, C));\r\n  lua_register(L, 'SetMapMusic', SetMapMusic.bind(null, C));\r\n  lua_register(L, 'ClearMapMusic', ClearMapMusic.bind(null, C));\r\n  lua_register(L, 'PlayMusic', PlayMusic.bind(null, C));\r\n  lua_register(L, 'PlayMusicEx', PlayMusicEx.bind(null, C));\r\n  lua_register(L, 'StopMusic', StopMusic.bind(null, C));\r\n  lua_register(L, 'ResumeMusic', ResumeMusic.bind(null, C));\r\n  lua_register(L, 'PlayThematicMusic', PlayThematicMusic.bind(null, C));\r\n  lua_register(L, 'PlayThematicMusicEx', PlayThematicMusicEx.bind(null, C));\r\n  lua_register(L, 'EndThematicMusic', EndThematicMusic.bind(null, C));\r\n  lua_register(L, 'SetMusicVolume', SetMusicVolume.bind(null, C));\r\n  lua_register(L, 'SetMusicPlayPosition', SetMusicPlayPosition.bind(null, C));\r\n  lua_register(L, 'SetThematicMusicPlayPosition', SetThematicMusicPlayPosition.bind(null, C));\r\n  lua_register(L, 'SetSoundDuration', SetSoundDuration.bind(null, C));\r\n  lua_register(L, 'GetSoundDuration', GetSoundDuration.bind(null, C));\r\n  lua_register(L, 'GetSoundFileDuration', GetSoundFileDuration.bind(null, C));\r\n  lua_register(L, 'VolumeGroupSetVolume', VolumeGroupSetVolume.bind(null, C));\r\n  lua_register(L, 'VolumeGroupReset', VolumeGroupReset.bind(null, C));\r\n  lua_register(L, 'GetSoundIsPlaying', GetSoundIsPlaying.bind(null, C));\r\n  lua_register(L, 'GetSoundIsLoading', GetSoundIsLoading.bind(null, C));\r\n  lua_register(L, 'RegisterStackedSound', RegisterStackedSound.bind(null, C));\r\n  lua_register(L, 'UnregisterStackedSound', UnregisterStackedSound.bind(null, C));\r\n  lua_register(L, 'AddWeatherEffect', AddWeatherEffect.bind(null, C));\r\n  lua_register(L, 'RemoveWeatherEffect', RemoveWeatherEffect.bind(null, C));\r\n  lua_register(L, 'EnableWeatherEffect', EnableWeatherEffect.bind(null, C));\r\n  lua_register(L, 'TerrainDeformCrater', TerrainDeformCrater.bind(null, C));\r\n  lua_register(L, 'TerrainDeformRipple', TerrainDeformRipple.bind(null, C));\r\n  lua_register(L, 'TerrainDeformWave', TerrainDeformWave.bind(null, C));\r\n  lua_register(L, 'TerrainDeformRandom', TerrainDeformRandom.bind(null, C));\r\n  lua_register(L, 'TerrainDeformStop', TerrainDeformStop.bind(null, C));\r\n  lua_register(L, 'TerrainDeformStopAll', TerrainDeformStopAll.bind(null, C));\r\n  lua_register(L, 'AddSpecialEffect', AddSpecialEffect.bind(null, C));\r\n  lua_register(L, 'AddSpecialEffectLoc', AddSpecialEffectLoc.bind(null, C));\r\n  lua_register(L, 'AddSpecialEffectTarget', AddSpecialEffectTarget.bind(null, C));\r\n  lua_register(L, 'DestroyEffect', DestroyEffect.bind(null, C));\r\n  lua_register(L, 'AddSpellEffect', AddSpellEffect.bind(null, C));\r\n  lua_register(L, 'AddSpellEffectLoc', AddSpellEffectLoc.bind(null, C));\r\n  lua_register(L, 'AddSpellEffectById', AddSpellEffectById.bind(null, C));\r\n  lua_register(L, 'AddSpellEffectByIdLoc', AddSpellEffectByIdLoc.bind(null, C));\r\n  lua_register(L, 'AddSpellEffectTarget', AddSpellEffectTarget.bind(null, C));\r\n  lua_register(L, 'AddSpellEffectTargetById', AddSpellEffectTargetById.bind(null, C));\r\n  lua_register(L, 'AddLightning', AddLightning.bind(null, C));\r\n  lua_register(L, 'AddLightningEx', AddLightningEx.bind(null, C));\r\n  lua_register(L, 'DestroyLightning', DestroyLightning.bind(null, C));\r\n  lua_register(L, 'MoveLightning', MoveLightning.bind(null, C));\r\n  lua_register(L, 'MoveLightningEx', MoveLightningEx.bind(null, C));\r\n  lua_register(L, 'GetLightningColorA', GetLightningColorA.bind(null, C));\r\n  lua_register(L, 'GetLightningColorR', GetLightningColorR.bind(null, C));\r\n  lua_register(L, 'GetLightningColorG', GetLightningColorG.bind(null, C));\r\n  lua_register(L, 'GetLightningColorB', GetLightningColorB.bind(null, C));\r\n  lua_register(L, 'SetLightningColor', SetLightningColor.bind(null, C));\r\n  lua_register(L, 'GetAbilityEffect', GetAbilityEffect.bind(null, C));\r\n  lua_register(L, 'GetAbilityEffectById', GetAbilityEffectById.bind(null, C));\r\n  lua_register(L, 'GetAbilitySound', GetAbilitySound.bind(null, C));\r\n  lua_register(L, 'GetAbilitySoundById', GetAbilitySoundById.bind(null, C));\r\n  lua_register(L, 'GetTerrainCliffLevel', GetTerrainCliffLevel.bind(null, C));\r\n  lua_register(L, 'SetWaterBaseColor', SetWaterBaseColor.bind(null, C));\r\n  lua_register(L, 'SetWaterDeforms', SetWaterDeforms.bind(null, C));\r\n  lua_register(L, 'GetTerrainType', GetTerrainType.bind(null, C));\r\n  lua_register(L, 'GetTerrainVariance', GetTerrainVariance.bind(null, C));\r\n  lua_register(L, 'SetTerrainType', SetTerrainType.bind(null, C));\r\n  lua_register(L, 'IsTerrainPathable', IsTerrainPathable.bind(null, C));\r\n  lua_register(L, 'SetTerrainPathable', SetTerrainPathable.bind(null, C));\r\n  lua_register(L, 'CreateImage', CreateImage.bind(null, C));\r\n  lua_register(L, 'DestroyImage', DestroyImage.bind(null, C));\r\n  lua_register(L, 'ShowImage', ShowImage.bind(null, C));\r\n  lua_register(L, 'SetImageConstantHeight', SetImageConstantHeight.bind(null, C));\r\n  lua_register(L, 'SetImagePosition', SetImagePosition.bind(null, C));\r\n  lua_register(L, 'SetImageColor', SetImageColor.bind(null, C));\r\n  lua_register(L, 'SetImageRender', SetImageRender.bind(null, C));\r\n  lua_register(L, 'SetImageRenderAlways', SetImageRenderAlways.bind(null, C));\r\n  lua_register(L, 'SetImageAboveWater', SetImageAboveWater.bind(null, C));\r\n  lua_register(L, 'SetImageType', SetImageType.bind(null, C));\r\n  lua_register(L, 'CreateUbersplat', CreateUbersplat.bind(null, C));\r\n  lua_register(L, 'DestroyUbersplat', DestroyUbersplat.bind(null, C));\r\n  lua_register(L, 'ResetUbersplat', ResetUbersplat.bind(null, C));\r\n  lua_register(L, 'FinishUbersplat', FinishUbersplat.bind(null, C));\r\n  lua_register(L, 'ShowUbersplat', ShowUbersplat.bind(null, C));\r\n  lua_register(L, 'SetUbersplatRender', SetUbersplatRender.bind(null, C));\r\n  lua_register(L, 'SetUbersplatRenderAlways', SetUbersplatRenderAlways.bind(null, C));\r\n  lua_register(L, 'SetBlight', SetBlight.bind(null, C));\r\n  lua_register(L, 'SetBlightRect', SetBlightRect.bind(null, C));\r\n  lua_register(L, 'SetBlightPoint', SetBlightPoint.bind(null, C));\r\n  lua_register(L, 'SetBlightLoc', SetBlightLoc.bind(null, C));\r\n  lua_register(L, 'CreateBlightedGoldmine', CreateBlightedGoldmine.bind(null, C));\r\n  lua_register(L, 'IsPointBlighted', IsPointBlighted.bind(null, C));\r\n  lua_register(L, 'SetDoodadAnimation', SetDoodadAnimation.bind(null, C));\r\n  lua_register(L, 'SetDoodadAnimationRect', SetDoodadAnimationRect.bind(null, C));\r\n  lua_register(L, 'StartMeleeAI', StartMeleeAI.bind(null, C));\r\n  lua_register(L, 'StartCampaignAI', StartCampaignAI.bind(null, C));\r\n  lua_register(L, 'CommandAI', CommandAI.bind(null, C));\r\n  lua_register(L, 'PauseCompAI', PauseCompAI.bind(null, C));\r\n  lua_register(L, 'GetAIDifficulty', GetAIDifficulty.bind(null, C));\r\n  lua_register(L, 'RemoveGuardPosition', RemoveGuardPosition.bind(null, C));\r\n  lua_register(L, 'RecycleGuardPosition', RecycleGuardPosition.bind(null, C));\r\n  lua_register(L, 'RemoveAllGuardPositions', RemoveAllGuardPositions.bind(null, C));\r\n  lua_register(L, 'Cheat', Cheat.bind(null, C));\r\n  lua_register(L, 'IsNoVictoryCheat', IsNoVictoryCheat.bind(null, C));\r\n  lua_register(L, 'IsNoDefeatCheat', IsNoDefeatCheat.bind(null, C));\r\n  lua_register(L, 'Preload', Preload.bind(null, C));\r\n  lua_register(L, 'PreloadEnd', PreloadEnd.bind(null, C));\r\n  lua_register(L, 'PreloadStart', PreloadStart.bind(null, C));\r\n  lua_register(L, 'PreloadRefresh', PreloadRefresh.bind(null, C));\r\n  lua_register(L, 'PreloadEndEx', PreloadEndEx.bind(null, C));\r\n  lua_register(L, 'PreloadGenClear', PreloadGenClear.bind(null, C));\r\n  lua_register(L, 'PreloadGenStart', PreloadGenStart.bind(null, C));\r\n  lua_register(L, 'PreloadGenEnd', PreloadGenEnd.bind(null, C));\r\n  lua_register(L, 'Preloader', Preloader.bind(null, C));\r\n  lua_register(L, 'AutomationTestStart', AutomationTestStart.bind(null, C));\r\n  lua_register(L, 'AutomationTestEnd', AutomationTestEnd.bind(null, C));\r\n  lua_register(L, 'BlzGetTriggerPlayerMouseX', BlzGetTriggerPlayerMouseX.bind(null, C));\r\n  lua_register(L, 'BlzGetTriggerPlayerMouseY', BlzGetTriggerPlayerMouseY.bind(null, C));\r\n  lua_register(L, 'BlzGetTriggerPlayerMousePosition', BlzGetTriggerPlayerMousePosition.bind(null, C));\r\n  lua_register(L, 'BlzGetTriggerPlayerMouseButton', BlzGetTriggerPlayerMouseButton.bind(null, C));\r\n  lua_register(L, 'BlzSetAbilityTooltip', BlzSetAbilityTooltip.bind(null, C));\r\n  lua_register(L, 'BlzSetAbilityActivatedTooltip', BlzSetAbilityActivatedTooltip.bind(null, C));\r\n  lua_register(L, 'BlzSetAbilityExtendedTooltip', BlzSetAbilityExtendedTooltip.bind(null, C));\r\n  lua_register(L, 'BlzSetAbilityActivatedExtendedTooltip', BlzSetAbilityActivatedExtendedTooltip.bind(null, C));\r\n  lua_register(L, 'BlzSetAbilityResearchTooltip', BlzSetAbilityResearchTooltip.bind(null, C));\r\n  lua_register(L, 'BlzSetAbilityResearchExtendedTooltip', BlzSetAbilityResearchExtendedTooltip.bind(null, C));\r\n  lua_register(L, 'BlzGetAbilityTooltip', BlzGetAbilityTooltip.bind(null, C));\r\n  lua_register(L, 'BlzGetAbilityActivatedTooltip', BlzGetAbilityActivatedTooltip.bind(null, C));\r\n  lua_register(L, 'BlzGetAbilityExtendedTooltip', BlzGetAbilityExtendedTooltip.bind(null, C));\r\n  lua_register(L, 'BlzGetAbilityActivatedExtendedTooltip', BlzGetAbilityActivatedExtendedTooltip.bind(null, C));\r\n  lua_register(L, 'BlzGetAbilityResearchTooltip', BlzGetAbilityResearchTooltip.bind(null, C));\r\n  lua_register(L, 'BlzGetAbilityResearchExtendedTooltip', BlzGetAbilityResearchExtendedTooltip.bind(null, C));\r\n  lua_register(L, 'BlzSetAbilityIcon', BlzSetAbilityIcon.bind(null, C));\r\n  lua_register(L, 'BlzGetAbilityIcon', BlzGetAbilityIcon.bind(null, C));\r\n  lua_register(L, 'BlzSetAbilityActivatedIcon', BlzSetAbilityActivatedIcon.bind(null, C));\r\n  lua_register(L, 'BlzGetAbilityActivatedIcon', BlzGetAbilityActivatedIcon.bind(null, C));\r\n  lua_register(L, 'BlzGetAbilityPosX', BlzGetAbilityPosX.bind(null, C));\r\n  lua_register(L, 'BlzGetAbilityPosY', BlzGetAbilityPosY.bind(null, C));\r\n  lua_register(L, 'BlzSetAbilityPosX', BlzSetAbilityPosX.bind(null, C));\r\n  lua_register(L, 'BlzSetAbilityPosY', BlzSetAbilityPosY.bind(null, C));\r\n  lua_register(L, 'BlzGetAbilityActivatedPosX', BlzGetAbilityActivatedPosX.bind(null, C));\r\n  lua_register(L, 'BlzGetAbilityActivatedPosY', BlzGetAbilityActivatedPosY.bind(null, C));\r\n  lua_register(L, 'BlzSetAbilityActivatedPosX', BlzSetAbilityActivatedPosX.bind(null, C));\r\n  lua_register(L, 'BlzSetAbilityActivatedPosY', BlzSetAbilityActivatedPosY.bind(null, C));\r\n  lua_register(L, 'BlzGetUnitMaxHP', BlzGetUnitMaxHP.bind(null, C));\r\n  lua_register(L, 'BlzSetUnitMaxHP', BlzSetUnitMaxHP.bind(null, C));\r\n  lua_register(L, 'BlzGetUnitMaxMana', BlzGetUnitMaxMana.bind(null, C));\r\n  lua_register(L, 'BlzSetUnitMaxMana', BlzSetUnitMaxMana.bind(null, C));\r\n  lua_register(L, 'BlzDeleteHeroAbility', BlzDeleteHeroAbility.bind(null, C));\r\n  lua_register(L, 'BlzSetItemName', BlzSetItemName.bind(null, C));\r\n  lua_register(L, 'BlzSetItemDescription', BlzSetItemDescription.bind(null, C));\r\n  lua_register(L, 'BlzGetItemDescription', BlzGetItemDescription.bind(null, C));\r\n  lua_register(L, 'BlzSetItemTooltip', BlzSetItemTooltip.bind(null, C));\r\n  lua_register(L, 'BlzGetItemTooltip', BlzGetItemTooltip.bind(null, C));\r\n  lua_register(L, 'BlzSetItemExtendedTooltip', BlzSetItemExtendedTooltip.bind(null, C));\r\n  lua_register(L, 'BlzGetItemExtendedTooltip', BlzGetItemExtendedTooltip.bind(null, C));\r\n  lua_register(L, 'BlzSetItemIconPath', BlzSetItemIconPath.bind(null, C));\r\n  lua_register(L, 'BlzGetItemIconPath', BlzGetItemIconPath.bind(null, C));\r\n  lua_register(L, 'BlzSetUnitName', BlzSetUnitName.bind(null, C));\r\n  lua_register(L, 'BlzSetHeroProperName', BlzSetHeroProperName.bind(null, C));\r\n  lua_register(L, 'BlzGetUnitBaseDamage', BlzGetUnitBaseDamage.bind(null, C));\r\n  lua_register(L, 'BlzSetUnitBaseDamage', BlzSetUnitBaseDamage.bind(null, C));\r\n  lua_register(L, 'BlzGetUnitDiceNumber', BlzGetUnitDiceNumber.bind(null, C));\r\n  lua_register(L, 'BlzSetUnitDiceNumber', BlzSetUnitDiceNumber.bind(null, C));\r\n  lua_register(L, 'BlzGetUnitDiceSides', BlzGetUnitDiceSides.bind(null, C));\r\n  lua_register(L, 'BlzSetUnitDiceSides', BlzSetUnitDiceSides.bind(null, C));\r\n  lua_register(L, 'BlzGetUnitAttackCooldown', BlzGetUnitAttackCooldown.bind(null, C));\r\n  lua_register(L, 'BlzSetUnitAttackCooldown', BlzSetUnitAttackCooldown.bind(null, C));\r\n  lua_register(L, 'BlzSetSpecialEffectColorByPlayer', BlzSetSpecialEffectColorByPlayer.bind(null, C));\r\n  lua_register(L, 'BlzSetSpecialEffectColor', BlzSetSpecialEffectColor.bind(null, C));\r\n  lua_register(L, 'BlzSetSpecialEffectAlpha', BlzSetSpecialEffectAlpha.bind(null, C));\r\n  lua_register(L, 'BlzSetSpecialEffectScale', BlzSetSpecialEffectScale.bind(null, C));\r\n  lua_register(L, 'BlzSetSpecialEffectPosition', BlzSetSpecialEffectPosition.bind(null, C));\r\n  lua_register(L, 'BlzSetSpecialEffectHeight', BlzSetSpecialEffectHeight.bind(null, C));\r\n  lua_register(L, 'BlzSetSpecialEffectTimeScale', BlzSetSpecialEffectTimeScale.bind(null, C));\r\n  lua_register(L, 'BlzSetSpecialEffectTime', BlzSetSpecialEffectTime.bind(null, C));\r\n  lua_register(L, 'BlzSetSpecialEffectOrientation', BlzSetSpecialEffectOrientation.bind(null, C));\r\n  lua_register(L, 'BlzSetSpecialEffectYaw', BlzSetSpecialEffectYaw.bind(null, C));\r\n  lua_register(L, 'BlzSetSpecialEffectPitch', BlzSetSpecialEffectPitch.bind(null, C));\r\n  lua_register(L, 'BlzSetSpecialEffectRoll', BlzSetSpecialEffectRoll.bind(null, C));\r\n  lua_register(L, 'BlzSetSpecialEffectX', BlzSetSpecialEffectX.bind(null, C));\r\n  lua_register(L, 'BlzSetSpecialEffectY', BlzSetSpecialEffectY.bind(null, C));\r\n  lua_register(L, 'BlzSetSpecialEffectZ', BlzSetSpecialEffectZ.bind(null, C));\r\n  lua_register(L, 'BlzSetSpecialEffectPositionLoc', BlzSetSpecialEffectPositionLoc.bind(null, C));\r\n  lua_register(L, 'BlzGetLocalSpecialEffectX', BlzGetLocalSpecialEffectX.bind(null, C));\r\n  lua_register(L, 'BlzGetLocalSpecialEffectY', BlzGetLocalSpecialEffectY.bind(null, C));\r\n  lua_register(L, 'BlzGetLocalSpecialEffectZ', BlzGetLocalSpecialEffectZ.bind(null, C));\r\n  lua_register(L, 'BlzGetUnitArmor', BlzGetUnitArmor.bind(null, C));\r\n  lua_register(L, 'BlzSetUnitArmor', BlzSetUnitArmor.bind(null, C));\r\n  lua_register(L, 'BlzUnitHideAbility', BlzUnitHideAbility.bind(null, C));\r\n  lua_register(L, 'BlzUnitDisableAbility', BlzUnitDisableAbility.bind(null, C));\r\n  lua_register(L, 'BlzUnitCancelTimedLife', BlzUnitCancelTimedLife.bind(null, C));\r\n  lua_register(L, 'BlzIsUnitSelectable', BlzIsUnitSelectable.bind(null, C));\r\n  lua_register(L, 'BlzIsUnitInvulnerable', BlzIsUnitInvulnerable.bind(null, C));\r\n  lua_register(L, 'BlzUnitInterruptAttack', BlzUnitInterruptAttack.bind(null, C));\r\n  lua_register(L, 'BlzGetUnitCollisionSize', BlzGetUnitCollisionSize.bind(null, C));\r\n  lua_register(L, 'BlzGetAbilityManaCost', BlzGetAbilityManaCost.bind(null, C));\r\n  lua_register(L, 'BlzGetAbilityCooldown', BlzGetAbilityCooldown.bind(null, C));\r\n  lua_register(L, 'BlzSetUnitAbilityCooldown', BlzSetUnitAbilityCooldown.bind(null, C));\r\n  lua_register(L, 'BlzGetUnitAbilityCooldown', BlzGetUnitAbilityCooldown.bind(null, C));\r\n  lua_register(L, 'BlzGetUnitAbilityCooldownRemaining', BlzGetUnitAbilityCooldownRemaining.bind(null, C));\r\n  lua_register(L, 'BlzEndUnitAbilityCooldown', BlzEndUnitAbilityCooldown.bind(null, C));\r\n  lua_register(L, 'BlzGetUnitAbilityManaCost', BlzGetUnitAbilityManaCost.bind(null, C));\r\n  lua_register(L, 'BlzSetUnitAbilityManaCost', BlzSetUnitAbilityManaCost.bind(null, C));\r\n  lua_register(L, 'BlzGetLocalUnitZ', BlzGetLocalUnitZ.bind(null, C));\r\n  lua_register(L, 'BlzDecPlayerTechResearched', BlzDecPlayerTechResearched.bind(null, C));\r\n  lua_register(L, 'BlzSetEventDamage', BlzSetEventDamage.bind(null, C));\r\n}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type buttontype\r\n */\r\nexport default class JassMouseButtonType extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type animtype\r\n */\r\nexport default class JassAnimType extends JassEnum {}\r\n","import JassEnum from './enum';\r\n\r\n/**\r\n * type subanimtype\r\n */\r\nexport default class JassSubAnimType extends JassEnum {}\r\n","import { lua_newthread, lua_State } from 'fengari/src/lstate';\r\nimport JassTrigger from './types/trigger';\r\nimport JassTimer from './types/timer';\r\nimport JassUnit from './types/unit';\r\n\r\n/**\r\n * A thread.\r\n */\r\nexport default class Thread {\r\n  L: lua_State;\r\n  sleep = 0;\r\n  expiredTimer: JassTimer | null;\r\n  triggerUnit: JassUnit | null;\r\n  triggeringTrigger: JassTrigger | null;\r\n\r\n  constructor(L: lua_State, data: { expiredTimer?: JassTimer, triggerUnit?: JassUnit, triggeringTrigger?: JassTrigger }) {\r\n    this.L = lua_newthread(L);\r\n    this.expiredTimer = data.expiredTimer || null;\r\n    this.triggerUnit = data.triggerUnit || null;\r\n    this.triggeringTrigger = data.triggeringTrigger || null;\r\n  }\r\n}\r\n","\r\nimport { EventEmitter } from 'events';\r\nimport { lua_State } from 'fengari/src/lstate';\r\nimport { lua_atnativeerror, lua_getglobal, lua_pcall, lua_pop, lua_pushstring, lua_rawgeti, lua_touserdata } from 'fengari/src/lapi';\r\nimport { LUA_REGISTRYINDEX, thread_status, to_jsstring, to_luastring } from 'fengari/src/defs';\r\nimport { luaL_checknumber, luaL_loadstring, luaL_newstate, luaL_tolstring } from 'fengari/src/lauxlib';\r\nimport { lua_resume } from 'fengari/src/ldo';\r\nimport War3Map from '../../parsers/w3x/map';\r\nimport jass2lua from './jass2lua';\r\nimport bindNatives from './natives';\r\nimport JassPlayer from './types/player';\r\nimport constantHandles from './constanthandles';\r\nimport Thread from './thread';\r\nimport JassHandle from './types/handle';\r\nimport JassLocation from './types/location';\r\nimport JassTimer from './types/timer';\r\nimport { JassTrigger } from './types/index';\r\n\r\n/**\r\n * A Jass2 context.\r\n */\r\nexport default class Context extends EventEmitter {\r\n  L: lua_State;\r\n  map: War3Map | null = null;\r\n  handle = 0;\r\n  freeHandles: number[] = [];\r\n  handles: (JassHandle | null)[] = [];\r\n  name = '';\r\n  description = '';\r\n  players: JassPlayer[] = [];\r\n  actualPlayers = 0;\r\n  startLocations: JassLocation[] = [];\r\n  constantHandles = constantHandles();\r\n  timers: Set<JassTimer> = new Set();\r\n  triggers: Set<JassTrigger> = new Set();\r\n  threads: Set<Thread> = new Set();\r\n  currentThread: Thread | null = null;\r\n  enumUnit: JassHandle | null = null;\r\n  filterUnit: JassHandle | null = null;\r\n  enumPlayer: JassHandle | null = null;\r\n  t = 0;\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.L = luaL_newstate();\r\n\r\n    //luaL_openlibs(this.L);\r\n\r\n    bindNatives(this);\r\n\r\n    lua_atnativeerror(this.L, (L: lua_State) => {\r\n      const e = <Error>lua_touserdata(L, -1);\r\n\r\n      lua_pushstring(L, e.stack || 'An unknown error occured');\r\n\r\n      return 1;\r\n    });\r\n\r\n    for (let i = 0; i < 28; i++) {\r\n      this.players[i] = <JassPlayer>this.addHandle(new JassPlayer(i, 28));\r\n    }\r\n\r\n    // this.mappedData = new MappedData();\r\n\r\n    // this.mapName = '';\r\n    // this.mapDescription = '';\r\n    // this.gamePlacement = null;\r\n    // this.gameSpeed = null;\r\n    // this.gameDifficulty = null;\r\n    // this.playerCount = 0;\r\n    // this.teamCount = 0;\r\n    // this.startLocations = [];\r\n    // this.players = [];\r\n    // this.teams = [];\r\n\r\n    // this.stringTable = map.readStringTable();\r\n  }\r\n\r\n  start(): void {\r\n    this.t = performance.now();\r\n  }\r\n\r\n  step(): void {\r\n    const t = performance.now();\r\n    const dt = (t - this.t) * 0.001;\r\n    const timers = this.timers;\r\n    const threads = this.threads;\r\n\r\n    for (const timer of timers) {\r\n      timer.elapsed += dt;\r\n\r\n      if (timer.elapsed >= timer.timeout) {\r\n        const thread = new Thread(this.L, { expiredTimer: timer });\r\n        const L = thread.L;\r\n\r\n        // Push the entry point onto the thread's stack, so when the thread is resumed it will immediately be called.\r\n        lua_rawgeti(L, LUA_REGISTRYINDEX, timer.handlerFunc);\r\n\r\n        this.threads.add(thread);\r\n\r\n        if (timer.periodic) {\r\n          timer.elapsed = 0;\r\n        } else {\r\n          timers.delete(timer);\r\n\r\n          /// TODO: better way to clean references.\r\n          // If the timer isn't periodic, the callback reference can be collected.\r\n          ///luaL_unref(timer.handlerFunc);\r\n        }\r\n      }\r\n    }\r\n\r\n    for (const thread of threads) {\r\n      thread.sleep -= dt;\r\n\r\n      if (thread.sleep <= 0) {\r\n        this.currentThread = thread;\r\n\r\n        const L = thread.L;\r\n        const status = lua_resume(L, this.L, 0);\r\n\r\n        if (status === thread_status.LUA_OK) {\r\n          threads.delete(thread);\r\n        } else if (status === thread_status.LUA_YIELD) {\r\n          thread.sleep = luaL_checknumber(L, 1);\r\n        } else {\r\n          console.log('[JS] Something went wrong during execution');\r\n          console.log(to_jsstring(luaL_tolstring(L, -1)));\r\n          lua_pop(L, 2);\r\n        }\r\n      }\r\n    }\r\n\r\n    this.t = t;\r\n  }\r\n\r\n  addHandle(handle: JassHandle): JassHandle {\r\n    if (handle.handleId === -1) {\r\n      let handleId;\r\n\r\n      if (this.freeHandles.length) {\r\n        handleId = <number>this.freeHandles.pop();\r\n      } else {\r\n        handleId = this.handle++;\r\n      }\r\n\r\n      this.handles[handleId] = handle;\r\n\r\n      handle.handleId = handleId;\r\n    }\r\n\r\n    return handle;\r\n  }\r\n\r\n  freeHandle(handle: JassHandle): void {\r\n    if (handle.handleId !== -1) {\r\n      this.freeHandles.push(handle.handleId);\r\n\r\n      this.handles[handle.handleId] = null;\r\n\r\n      handle.handleId = -1;\r\n    }\r\n  }\r\n\r\n  call(name?: string | number): void {\r\n    const L = this.L;\r\n\r\n    if (typeof name === 'string') {\r\n      lua_getglobal(L, name);\r\n    } else if (typeof name === 'number') {\r\n      lua_rawgeti(L, LUA_REGISTRYINDEX, name);\r\n    }\r\n\r\n    if (lua_pcall(L, 0, 0, 0)) {\r\n      console.log('Something went wrong during execution');\r\n      console.log(to_jsstring(luaL_tolstring(L, -1)));\r\n      lua_pop(L, 2);\r\n    }\r\n  }\r\n\r\n  run(code: string, isJass: boolean): void {\r\n    const L = this.L;\r\n\r\n    if (isJass) {\r\n      code = jass2lua(code);\r\n    }\r\n\r\n    if (luaL_loadstring(L, to_luastring(code))) {\r\n      console.log('Something went wrong during execution');\r\n      console.log(to_jsstring(luaL_tolstring(L, -1)));\r\n      lua_pop(L, 2);\r\n    }\r\n\r\n    if (lua_pcall(L, 0, 0, 0)) {\r\n      console.log('Something went wrong during execution');\r\n      console.log(to_jsstring(luaL_tolstring(L, -1)));\r\n      lua_pop(L, 2);\r\n    }\r\n  }\r\n\r\n  open(map: War3Map): void {\r\n    this.map = map;\r\n\r\n    const file = map.getScriptFile();\r\n\r\n    if (file) {\r\n      const buffer = file.text();\r\n\r\n      if (buffer) {\r\n        const isJass = file.name.endsWith('.j');\r\n\r\n        this.run(buffer, isJass);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import JassPlayerColor from './types/playercolor';\r\nimport JassRace from './types/race';\r\nimport JassPlayerGameResult from './types/playergameresult';\r\nimport JassAllianceType from './types/alliancetype';\r\nimport JassVersion from './types/version';\r\nimport JassAttackType from './types/attacktype';\r\nimport JassDamageType from './types/damagetype';\r\nimport JassWeaponType from './types/weapontype';\r\nimport JassPathingType from './types/pathingtype';\r\nimport JassMouseButtonType from './types/mousebuttontype';\r\nimport JassAnimType from './types/animtype';\r\nimport JassSubAnimType from './types/subanimtype';\r\nimport JassRacePreference from './types/racepreference';\r\nimport JassMapControl from './types/mapcontrol';\r\nimport JassGameType from './types/gametype';\r\nimport JassMapFlag from './types/mapflag';\r\nimport JassPlacement from './types/placement';\r\nimport JassStartLocPrio from './types/startlocprio';\r\nimport JassMapDensity from './types/mapdensity';\r\nimport JassGameDifficulty from './types/gamedifficulty';\r\nimport JassGameSpeed from './types/gamespeed';\r\nimport JassPlayerSlotState from './types/playerslotstate';\r\nimport JassVolumeGroup from './types/volumegroup';\r\nimport JassIGameState from './types/igamestate';\r\nimport JassFGameState from './types/fgamestate';\r\nimport JassPlayerState from './types/playerstate';\r\nimport JassUnitState from './types/unitstate';\r\nimport JassAiDifficulty from './types/aidifficulty';\r\nimport JassPlayerScore from './types/playerscore';\r\nimport JassGameEvent from './types/gameevent';\r\nimport JassPlayerEvent from './types/playerevent';\r\nimport JassPlayerUnitEvent from './types/playerunitevent';\r\nimport JassUnitEvent from './types/unitevent';\r\nimport JassWidgetEvent from './types/widgetevent';\r\nimport JassDialogEvent from './types/dialogevent';\r\nimport JassLimitOp from './types/limitop';\r\nimport JassUnitType from './types/unittype';\r\nimport JassItemType from './types/itemtype';\r\nimport JassCameraField from './types/camerafield';\r\nimport JassBlendMode from './types/blendmode';\r\nimport JassRarityControl from './types/raritycontrol';\r\nimport JassTexMapFlags from './types/texmapflags';\r\nimport JassFogState from './types/fogstate';\r\nimport JassEffectType from './types/effecttype';\r\nimport JassSoundType from './types/soundtype';\r\nimport { JassEventId, JassGameState } from './types';\r\n\r\nexport interface ConstantHandles {\r\n  playerColors: JassPlayerColor[];\r\n  races: JassRace[];\r\n  playerGameResults: JassPlayerGameResult[];\r\n  allianceTypes: JassAllianceType[];\r\n  versions: JassVersion[];\r\n  attackTypes: JassAttackType[];\r\n  damageTypes: JassDamageType[];\r\n  weaponTypes: JassWeaponType[];\r\n  pathingTypes: JassPathingType[];\r\n  mouseButtonTypes: JassMouseButtonType[];\r\n  animTypes: JassAnimType[];\r\n  subAnimTypes: JassSubAnimType[];\r\n  racePrefs: JassRacePreference[];\r\n  mapControls: JassMapControl[];\r\n  gameTypes: JassGameType[];\r\n  mapFlags: JassMapFlag[];\r\n  placements: JassPlacement[];\r\n  startLocPrios: JassStartLocPrio[];\r\n  mapDensities: JassMapDensity[];\r\n  gameDifficulties: JassGameDifficulty[];\r\n  gameSpeeds: JassGameSpeed[];\r\n  playerSlotStates: JassPlayerSlotState[];\r\n  volumeGroups: JassVolumeGroup[];\r\n  gameStates: JassGameState[];\r\n  playerStates: JassPlayerState[];\r\n  unitStates: JassUnitState[];\r\n  aiDifficulties: JassAiDifficulty[];\r\n  playerScores: JassPlayerScore[];\r\n  events: JassEventId[];\r\n  limitOps: JassLimitOp[];\r\n  unitTypes: JassUnitType[];\r\n  itemTypes: JassItemType[];\r\n  cameraFields: JassCameraField[];\r\n  blendModes: JassBlendMode[];\r\n  rarityControls: JassRarityControl[];\r\n  texMapFlags: JassTexMapFlags[];\r\n  fogStates: JassFogState[];\r\n  effectTypes: JassEffectType[];\r\n  soundTypes: JassSoundType[];\r\n}\r\n\r\nexport default function constantHandles(): ConstantHandles {\r\n  const playerColors = [];\r\n  const races = [];\r\n  const playerGameResults = [];\r\n  const allianceTypes = [];\r\n  const versions = [];\r\n  const attackTypes = [];\r\n  const damageTypes = [];\r\n  const weaponTypes = [];\r\n  const pathingTypes = [];\r\n  const mouseButtonTypes = [];\r\n  const animTypes = [];\r\n  const subAnimTypes = [];\r\n  const racePrefs = [];\r\n  const mapControls = [];\r\n  const gameTypes = [];\r\n  const mapFlags = [];\r\n  const placements = [];\r\n  const startLocPrios = [];\r\n  const mapDensities = [];\r\n  const gameDifficulties = [];\r\n  const gameSpeeds = [];\r\n  const playerSlotStates = [];\r\n  const volumeGroups = [];\r\n  const gameStates = [];\r\n  const playerStates = [];\r\n  const unitStates = [];\r\n  const aiDifficulties = [];\r\n  const playerScores = [];\r\n  const events = [];\r\n  const limitOps = [];\r\n  const unitTypes = [];\r\n  const itemTypes = [];\r\n  const cameraFields = [];\r\n  const blendModes = [];\r\n  const rarityControls = [];\r\n  const texMapFlags = [];\r\n  const fogStates = [];\r\n  const effectTypes = [];\r\n  const soundTypes = [];\r\n\r\n  for (let i = 0; i < 24; i++) {\r\n    playerColors[i] = new JassPlayerColor(i);\r\n  }\r\n\r\n  for (let i = 0; i < 8; i++) {\r\n    races[i] = new JassRace(i);\r\n  }\r\n\r\n  for (let i = 0; i < 4; i++) {\r\n    playerGameResults[i] = new JassPlayerGameResult(i);\r\n  }\r\n\r\n  for (let i = 0; i < 10; i++) {\r\n    allianceTypes[i] = new JassAllianceType(i);\r\n  }\r\n\r\n  for (let i = 0; i < 2; i++) {\r\n    versions[i] = new JassVersion(i);\r\n  }\r\n\r\n  for (let i = 0; i < 7; i++) {\r\n    attackTypes[i] = new JassAttackType(i);\r\n  }\r\n\r\n  for (let i = 0; i < 27; i++) {\r\n    // Note: 1, 2, 3, 6, and 7 not exposed in common.j\r\n    damageTypes[i] = new JassDamageType(i);\r\n  }\r\n\r\n  for (let i = 0; i < 24; i++) {\r\n    weaponTypes[i] = new JassWeaponType(i);\r\n  }\r\n\r\n  for (let i = 0; i < 8; i++) {\r\n    pathingTypes[i] = new JassPathingType(i);\r\n  }\r\n\r\n  for (let i = 0; i < 4; i++) {\r\n    mouseButtonTypes[i] = new JassMouseButtonType(i);\r\n  }\r\n\r\n  for (let i = 0; i < 11; i++) {\r\n    animTypes[i] = new JassAnimType(i);\r\n  }\r\n\r\n  for (let i = 11; i < 63; i++) {\r\n    subAnimTypes[i] = new JassSubAnimType(i);\r\n  }\r\n\r\n  for (let i = 0; i < 8; i++) {\r\n    const p = Math.pow(2, i);\r\n\r\n    racePrefs[p] = new JassRacePreference(p);\r\n  }\r\n\r\n  for (let i = 0; i < 6; i++) {\r\n    mapControls[i] = new JassMapControl(i);\r\n  }\r\n\r\n  for (let i = 0; i < 8; i++) {\r\n    const p = Math.pow(2, i);\r\n\r\n    gameTypes[p] = new JassGameType(p);\r\n  }\r\n\r\n  for (let i = 0; i < 20; i++) {\r\n    const p = Math.pow(2, i);\r\n\r\n    mapFlags[p] = new JassMapFlag(p);\r\n  }\r\n\r\n  for (let i = 0; i < 4; i++) {\r\n    placements[i] = new JassPlacement(i);\r\n  }\r\n\r\n  for (let i = 0; i < 3; i++) {\r\n    startLocPrios[i] = new JassStartLocPrio(i);\r\n  }\r\n\r\n  for (let i = 0; i < 4; i++) {\r\n    mapDensities[i] = new JassMapDensity(i);\r\n  }\r\n\r\n  for (let i = 0; i < 4; i++) {\r\n    gameDifficulties[i] = new JassGameDifficulty(i);\r\n  }\r\n\r\n  for (let i = 0; i < 5; i++) {\r\n    gameSpeeds[i] = new JassGameSpeed(i);\r\n  }\r\n\r\n  for (let i = 0; i < 3; i++) {\r\n    playerSlotStates[i] = new JassPlayerSlotState(i);\r\n  }\r\n\r\n  for (let i = 0; i < 8; i++) {\r\n    volumeGroups[i] = new JassVolumeGroup(i);\r\n  }\r\n\r\n  for (let i = 0; i < 2; i++) {\r\n    gameStates[i] = new JassIGameState(i);\r\n  }\r\n\r\n  for (let i = 2; i < 3; i++) {\r\n    gameStates[i] = new JassFGameState(i);\r\n  }\r\n\r\n  for (let i = 0; i < 26; i++) {\r\n    // Note: 17-24 not exposed in common.j\r\n    playerStates[i] = new JassPlayerState(i);\r\n  }\r\n\r\n  for (let i = 0; i < 4; i++) {\r\n    unitStates[i] = new JassUnitState(i);\r\n  }\r\n\r\n  for (let i = 0; i < 3; i++) {\r\n    aiDifficulties[i] = new JassAiDifficulty(i);\r\n  }\r\n\r\n  for (let i = 0; i < 25; i++) {\r\n    playerScores[i] = new JassPlayerScore(i);\r\n  }\r\n\r\n  for (let i = 0; i < 11; i++) {\r\n    events[i] = new JassGameEvent(i);\r\n  }\r\n\r\n  for (let i = 11; i < 18; i++) {\r\n    events[i] = new JassPlayerEvent(i);\r\n  }\r\n\r\n  for (let i = 18; i < 52; i++) {\r\n    events[i] = new JassPlayerUnitEvent(i);\r\n  }\r\n\r\n  for (let i = 52; i < 89; i++) {\r\n    events[i] = new JassUnitEvent(i);\r\n  }\r\n\r\n  for (let i = 89; i < 90; i++) {\r\n    events[i] = new JassWidgetEvent(i);\r\n  }\r\n\r\n  for (let i = 90; i < 92; i++) {\r\n    events[i] = new JassDialogEvent(i);\r\n  }\r\n\r\n  for (let i = 256; i < 260; i++) {\r\n    events[i] = new JassGameEvent(i);\r\n  }\r\n\r\n  for (let i = 261; i < 269; i++) {\r\n    events[i] = new JassPlayerEvent(i);\r\n  }\r\n\r\n  for (let i = 269; i < 278; i++) {\r\n    events[i] = new JassPlayerUnitEvent(i);\r\n  }\r\n\r\n  for (let i = 286; i < 295; i++) {\r\n    events[i] = new JassUnitEvent(i);\r\n  }\r\n\r\n  for (let i = 0; i < 6; i++) {\r\n    limitOps[i] = new JassLimitOp(i);\r\n  }\r\n\r\n  for (let i = 0; i < 27; i++) {\r\n    unitTypes[i] = new JassUnitType(i);\r\n  }\r\n\r\n  for (let i = 0; i < 9; i++) {\r\n    itemTypes[i] = new JassItemType(i);\r\n  }\r\n\r\n  for (let i = 0; i < 7; i++) {\r\n    cameraFields[i] = new JassCameraField(i);\r\n  }\r\n\r\n  for (let i = 0; i < 6; i++) {\r\n    blendModes[i] = new JassBlendMode(i);\r\n  }\r\n\r\n  for (let i = 0; i < 1; i++) {\r\n    rarityControls[i] = new JassRarityControl(i);\r\n  }\r\n\r\n  for (let i = 0; i < 4; i++) {\r\n    texMapFlags[i] = new JassTexMapFlags(i);\r\n  }\r\n\r\n  for (let i = 0; i < 3; i++) {\r\n    const p = Math.pow(2, i);\r\n\r\n    fogStates[p] = new JassFogState(p);\r\n  }\r\n\r\n  for (let i = 0; i < 7; i++) {\r\n    effectTypes[i] = new JassEffectType(i);\r\n  }\r\n\r\n  for (let i = 0; i < 2; i++) {\r\n    soundTypes[i] = new JassSoundType(i);\r\n  }\r\n\r\n  return {\r\n    playerColors,\r\n    races,\r\n    playerGameResults,\r\n    allianceTypes,\r\n    versions,\r\n    attackTypes,\r\n    damageTypes,\r\n    weaponTypes,\r\n    pathingTypes,\r\n    mouseButtonTypes,\r\n    animTypes,\r\n    subAnimTypes,\r\n    racePrefs,\r\n    mapControls,\r\n    gameTypes,\r\n    mapFlags,\r\n    placements,\r\n    startLocPrios,\r\n    mapDensities,\r\n    gameDifficulties,\r\n    gameSpeeds,\r\n    playerSlotStates,\r\n    volumeGroups,\r\n    gameStates,\r\n    playerStates,\r\n    unitStates,\r\n    aiDifficulties,\r\n    playerScores,\r\n    events,\r\n    limitOps,\r\n    unitTypes,\r\n    itemTypes,\r\n    cameraFields,\r\n    blendModes,\r\n    rarityControls,\r\n    texMapFlags,\r\n    fogStates,\r\n    effectTypes,\r\n    soundTypes,\r\n  };\r\n}\r\n","import TokenStream from './tokenstream';\r\n\r\nfunction compileGetters(params: { type: string, name: string }[]): string {\r\n  return params.map((p, i) => {\r\n    const type = p.type;\r\n\r\n    if (type === 'code') {\r\n      return `let _${p.name} = luaL_ref(L, LUA_REGISTRYINDEX);`;\r\n    } else {\r\n      let func;\r\n\r\n      if (type === 'integer') {\r\n        func = 'luaL_checkinteger';\r\n      } else if (type === 'real') {\r\n        func = 'luaL_checknumber';\r\n      } else if (type === 'boolean') {\r\n        func = 'lua_toboolean';\r\n      } else if (type === 'string') {\r\n        func = 'luaL_checkstring';\r\n      } else {\r\n        func = 'lua_touserdata';\r\n      }\r\n\r\n      return `let _${p.name} = ${func}(L, ${i + 1});`;\r\n    }\r\n  }).join('\\n');\r\n}\r\n\r\nfunction compileReturn(type: string): string {\r\n  if (type === 'nothing') {\r\n    return 'return 0';\r\n  } else {\r\n    let func;\r\n    let value;\r\n\r\n    if (type === 'integer') {\r\n      func = 'lua_pushinteger';\r\n      value = '0';\r\n    } else if (type === 'real') {\r\n      func = 'lua_pushnumber';\r\n      value = '0';\r\n    } else if (type === 'boolean') {\r\n      func = 'lua_pushboolean';\r\n      value = 'false';\r\n    } else if (type === 'string') {\r\n      func = 'lua_pushstring';\r\n      value = `''`;\r\n    } else if (type === 'code') {\r\n      throw 'CODE??';\r\n    } else {\r\n      func = 'lua_pushlightuserdata';\r\n      value = `{name: 'FAKE'}`;\r\n    }\r\n\r\n    return `${func}(L, ${value});\\nreturn 1;`;\r\n  }\r\n}\r\n\r\nfunction compileNative(stream: TokenStream, isConstant: boolean): { name: string, decl: string } {\r\n  const name = stream.readSafe();\r\n  const params = [];\r\n\r\n  stream.read(); // takes\r\n\r\n  const token = stream.readSafe(); // nothing or type\r\n\r\n  if (token !== 'nothing') {\r\n    params.push({ type: token, name: stream.readSafe() });\r\n\r\n    while (stream.read() === ',') {\r\n      params.push({ type: stream.readSafe(), name: stream.readSafe() });\r\n    }\r\n  } else {\r\n    stream.read(); // returns\r\n  }\r\n\r\n  const returnType = stream.readSafe();\r\n  let luaParams;\r\n\r\n  if (params.length) {\r\n    luaParams = 'C: Context, L: lua_State';\r\n  } else {\r\n    luaParams = '_C: Context, _L: lua_State';\r\n  }\r\n\r\n  const decl = `\r\n/**\r\n * ${isConstant ? 'constant ' : ''}native ${name} takes ${params.length ? params.map((p) => `${p.type} ${p.name}`).join(', ') : 'nothing'} returns ${returnType}\r\n */\r\nfunction ${name}(${luaParams}): number {\r\n  ${compileGetters(params)}\r\n  console.warn('${name} was called but is not implemented :(');\r\n  ${compileReturn(returnType)}\r\n}`;\r\n\r\n  return { name, decl };\r\n}\r\n\r\nfunction compileBindings(names: string[]): string {\r\n  return `\r\n/**\r\n * Bind natives to the given context.\r\n */\r\nexport default function bind(C: Context): void {\\nlet L = C.L;\\n${names.map((name) => `  lua_register(L, '${name}', ${name}.bind(null, C));`).join('\\n')}\\n}`;\r\n}\r\n\r\nexport default function compileNatives(jass: string): string {\r\n  const stream = new TokenStream(jass);\r\n  const names = [];\r\n  const decls = [];\r\n  let token;\r\n\r\n  while ((token = stream.read()) !== undefined) {\r\n    let isConstant = false;\r\n\r\n    if (token === 'constant') {\r\n      isConstant = true;\r\n\r\n      token = stream.read();\r\n    }\r\n\r\n    if (token === 'native') {\r\n      const { name, decl } = compileNative(stream, isConstant);\r\n\r\n      names.push(name);\r\n      decls.push(decl);\r\n    }\r\n  }\r\n\r\n  return `${decls.join('\\n')}\\n${compileBindings(names)}\\n`;\r\n}\r\n","import Context from './context';\r\nimport jass2lua from './jass2lua';\r\nimport * as types from './types';\r\nimport compileNatives from './compilenatives';\r\n\r\nexport default {\r\n  Context,\r\n  jass2lua,\r\n  types,\r\n  compileNatives,\r\n};\r\n","import { Animation, InterpolationType } from '../../../parsers/mdlx/animations';\r\nimport EventObject from '../../../parsers/mdlx/eventobject';\r\nimport SanityTestData from './data';\r\nimport { testReference } from './utils';\r\n\r\nfunction getSequenceFromFrame(data: SanityTestData, frame: number, globalSequenceId: number): number {\r\n  if (globalSequenceId === -1) {\r\n    const sequences = data.model.sequences;\r\n\r\n    for (let i = 0, l = sequences.length; i < l; i++) {\r\n      const interval = sequences[i].interval;\r\n\r\n      if (frame >= interval[0] && frame <= interval[1]) {\r\n        return i;\r\n      }\r\n    }\r\n  } else {\r\n    const end = data.model.globalSequences[globalSequenceId];\r\n\r\n    if (frame >= 0 && frame <= end) {\r\n      return globalSequenceId;\r\n    }\r\n  }\r\n\r\n  return -1;\r\n}\r\n\r\nfunction seprateTracks(data: SanityTestData, frames: number[] | Uint32Array, globalSequenceId: number, separated: number[][]): void {\r\n  let lastFrame = -Infinity;\r\n\r\n  for (let i = 0, l = frames.length; i < l; i++) {\r\n    const frame = frames[i];\r\n\r\n    data.assertWarning(frame >= 0, `Track ${i} has a negative frame ${frame}`);\r\n\r\n    if (frame === lastFrame) {\r\n      data.addWarning(`Track ${i} has the same frame ${frame} as track ${i - 1}`);\r\n    } else if (frame < lastFrame) {\r\n      data.addSevere(`Track ${i} at frame ${frame} is lower than the track before it at ${lastFrame}`);\r\n    }\r\n\r\n    const sequence = getSequenceFromFrame(data, frame, globalSequenceId);\r\n\r\n    if (sequence !== -1) {\r\n      separated[sequence].push(i);\r\n    } else {\r\n      // Frame 0 seems to be special.\r\n      // Or maybe it's the first keyframe regardless of the frame.\r\n      // Who knows.\r\n      if (frame !== 0 && frames.length > 1) {\r\n        if (globalSequenceId === -1) {\r\n          data.addUnused(`Track ${i} at frame ${frame} is not in any sequence`);\r\n        } else {\r\n          data.addUnused(`Track ${i} at frame ${frame} is not in global sequence ${globalSequenceId}`);\r\n        }\r\n      }\r\n    }\r\n\r\n    lastFrame = frame;\r\n  }\r\n}\r\n\r\nfunction getSequenceName(data: SanityTestData, sequence: number, globalSequenceId: number): string {\r\n  if (globalSequenceId === -1) {\r\n    return `sequence \"${data.model.sequences[sequence].name}\"`;\r\n  } else {\r\n    return `global sequence ${globalSequenceId}`;\r\n  }\r\n}\r\n\r\nconst EPSILON = 0.001;\r\n\r\nexport function getValuesDiff(a: Uint32Array | Float32Array, b: Uint32Array | Float32Array, c: Uint32Array | Float32Array): number {\r\n  let d = 0;\r\n\r\n  for (let i = 0, l = a.length; i < l; i++) {\r\n    const ai = a[i];\r\n    const d1 = Math.abs(ai - b[i]);\r\n    const d2 = Math.abs(ai - c[i]);\r\n\r\n    if (d1 > d) {\r\n      d = d1;\r\n    }\r\n\r\n    if (d2 > d) {\r\n      d = d2;\r\n    }\r\n  }\r\n\r\n  return d;\r\n}\r\n\r\nexport function areValuesEqual(a: Uint32Array | Float32Array, b: Uint32Array | Float32Array): boolean {\r\n  for (let i = 0, l = a.length; i < l; i++) {\r\n    if (a[i] !== b[i]) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\nfunction testSequenceTracks(data: SanityTestData, indices: number[], sequence: number, object: Animation, frames: number[] | Uint32Array): void {\r\n  const { globalSequenceId, interpolationType, values } = object;\r\n  let start;\r\n\r\n  if (globalSequenceId === -1) {\r\n    start = data.model.sequences[sequence].interval[0];\r\n  } else {\r\n    start = 0;\r\n  }\r\n\r\n  const firstIndex = indices[0];\r\n  const lastIndex = indices[indices.length - 1];\r\n  const firstFrame = frames[firstIndex];\r\n\r\n  // Missing the opening track for a specific sequence can cause bugged warping with negative interpolations.\r\n  if (interpolationType !== InterpolationType.DontInterp && firstFrame !== start) {\r\n    const firstValue = values[firstIndex];\r\n    const lastValue = values[lastIndex];\r\n\r\n    // If the first and last values are equal, even though there's warping, it won't do anything.\r\n    if (!areValuesEqual(firstValue, lastValue)) {\r\n      data.addSevere(`Missing opening track for ${getSequenceName(data, sequence, globalSequenceId)} at frame ${start} where it is needed`);\r\n    }\r\n  }\r\n\r\n  // Check for consecutive tracks with the same values.\r\n  if (indices.length > 2) {\r\n    let a = values[indices[0]];\r\n    let b = values[indices[1]];\r\n\r\n    for (let i = 2, l = indices.length; i < l; i++) {\r\n      const c = values[indices[i]];\r\n      const index = indices[i - 1];\r\n      const d = getValuesDiff(a, b, c);\r\n\r\n      if (d === 0) {\r\n        data.addUnused(`Track ${index} at frame ${frames[index]} has exactly the same value as tracks ${index - 1} and ${index + 1}`);\r\n      } else if (d < EPSILON) {\r\n        data.addUnused(`Track ${index} at frame ${frames[index]} has roughly the same value as tracks ${index - 1} and ${index + 1}`);\r\n      }\r\n\r\n      a = b;\r\n      b = c;\r\n    }\r\n  }\r\n}\r\n\r\nexport default function testTracks(data: SanityTestData, object: Animation | EventObject): void {\r\n  let framesOrTracks;\r\n\r\n  if (object instanceof Animation) {\r\n    data.assertWarning(object.frames.length > 0, 'Zero tracks');\r\n\r\n    framesOrTracks = object.frames;\r\n  } else {\r\n    data.assertError(object.tracks.length > 0, 'Zero tracks');\r\n\r\n    framesOrTracks = object.tracks;\r\n  }\r\n\r\n  const globalSequenceId = object.globalSequenceId;\r\n  const separated: number[][] = [];\r\n\r\n  if (globalSequenceId === -1) {\r\n    data.assertWarning(data.model.sequences.length > 0, 'This animation exists, but the model has no sequences');\r\n\r\n    for (let i = 0, l = data.model.sequences.length; i < l; i++) {\r\n      separated.push([]);\r\n    }\r\n  } else if (testReference(data, data.model.globalSequences, globalSequenceId, 'global sequence')) {\r\n    separated[globalSequenceId] = [];\r\n  } else {\r\n    return;\r\n  }\r\n\r\n  seprateTracks(data, framesOrTracks, globalSequenceId, separated);\r\n\r\n  // Since event objects work on the concept of notes, where a keyframe denotes emission, check just animation keyframe values.\r\n  if (object instanceof Animation) {\r\n    for (let i = 0, l = separated.length; i < l; i++) {\r\n      const indices = separated[i];\r\n\r\n      if (indices && indices.length > 1) {\r\n        testSequenceTracks(data, indices, i, object, framesOrTracks);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import unique from '../../../common/arrayunique';\r\nimport { basename } from '../../../common/path';\r\nimport { Animation, InterpolationType } from '../../../parsers/mdlx/animations';\r\nimport AnimatedObject from '../../../parsers/mdlx/animatedobject';\r\nimport GenericObject from '../../../parsers/mdlx/genericobject';\r\nimport Extent from '../../../parsers/mdlx/extent';\r\nimport Sequence from '../../../parsers/mdlx/sequence';\r\nimport Texture from '../../../parsers/mdlx/texture';\r\nimport Material from '../../../parsers/mdlx/material';\r\nimport Layer from '../../../parsers/mdlx/layer';\r\nimport TextureAnimation from '../../../parsers/mdlx/textureanimation';\r\nimport Geoset from '../../../parsers/mdlx/geoset';\r\nimport GeosetAnimation from '../../../parsers/mdlx/geosetanimation';\r\nimport Bone from '../../../parsers/mdlx/bone';\r\nimport Light from '../../../parsers/mdlx/light';\r\nimport Helper from '../../../parsers/mdlx/helper';\r\nimport Attachment from '../../../parsers/mdlx/attachment';\r\nimport ParticleEmitter from '../../../parsers/mdlx/particleemitter';\r\nimport ParticleEmitter2 from '../../../parsers/mdlx/particleemitter2';\r\nimport ParticleEmitterPopcorn from '../../../parsers/mdlx/particleemitterpopcorn';\r\nimport RibbonEmitter from '../../../parsers/mdlx/ribbonemitter';\r\nimport EventObject from '../../../parsers/mdlx/eventobject';\r\nimport Camera from '../../../parsers/mdlx/camera';\r\nimport CollisionShape from '../../../parsers/mdlx/collisionshape';\r\nimport FaceEffect from '../../../parsers/mdlx/faceeffect';\r\nimport SanityTestData from './data';\r\nimport testTracks from './tracks';\r\nimport { SanityTestNode } from './data';\r\n\r\nexport function isBetween(x: number, minVal: number, maxVal: number): boolean {\r\n  return x >= minVal && x <= maxVal;\r\n}\r\n\r\nexport const sequenceNames = new Set([\r\n  'attack',\r\n  'birth',\r\n  'cinematic',\r\n  'death',\r\n  'decay',\r\n  'dissipate',\r\n  'morph',\r\n  'portrait',\r\n  'sleep',\r\n  'spell',\r\n  'stand',\r\n  'walk',\r\n  'ready', // HeroMountainKing.mdx has \"Alternate Ready\" which I assume is the same as or a replacement to \"Alternate Stand Ready\"?\r\n]);\r\n\r\nexport const replaceableIds = new Set([\r\n  1,\r\n  2,\r\n  11,\r\n  21,\r\n  31,\r\n  32,\r\n  33,\r\n  34,\r\n  35,\r\n  36,\r\n  37,\r\n]);\r\n\r\nexport const animatedTypeNames = new Map([\r\n  // Layer\r\n  ['KMTF', 'Texture ID'],\r\n  ['KMTA', 'Alpha'],\r\n  ['KMTE', 'Emissive Gain'],\r\n  ['KFC3', 'Fresnel Color'],\r\n  ['KFCA', 'Fresnel Opacity'],\r\n  ['KFTC', 'Fresnel Team Color'],\r\n  // TextureAnimation\r\n  ['KTAT', 'Translation'],\r\n  ['KTAR', 'Rotation'],\r\n  ['KTAS', 'Scaling'],\r\n  // GeosetAnimation\r\n  ['KGAO', 'Alpha'],\r\n  ['KGAC', 'Color'],\r\n  // GenericObject\r\n  ['KGTR', 'Translation'],\r\n  ['KGRT', 'Rotation'],\r\n  ['KGSC', 'Scaling'],\r\n  // Light\r\n  ['KLAS', 'Attenuation Start'],\r\n  ['KLAE', 'Attenuation End'],\r\n  ['KLAC', 'Color'],\r\n  ['KLAI', 'Intensity'],\r\n  ['KLBI', 'Ambient Intensity'],\r\n  ['KLBC', 'Ambient Color'],\r\n  ['KLAV', 'Visibility'],\r\n  // Attachment\r\n  ['KATV', 'Visibility'],\r\n  // ParticleEmitter\r\n  ['KPEE', 'Emission Rate'],\r\n  ['KPEG', 'Gravity'],\r\n  ['KPLN', 'Longitude'],\r\n  ['KPLT', 'Latitude'],\r\n  ['KPEL', 'Lifespan'],\r\n  ['KPES', 'Speed'],\r\n  ['KPEV', 'Visibility'],\r\n  // ParticleEmitter2\r\n  ['KP2E', 'Emission Rate'],\r\n  ['KP2G', 'Gravity'],\r\n  ['KP2L', 'Latitude'],\r\n  ['KP2R', 'Variation'],\r\n  ['KP2N', 'Length'],\r\n  ['KP2W', 'Width'],\r\n  ['KP2S', 'Speed'],\r\n  ['KP2V', 'Visibility'],\r\n  // ParticleEmitterCorn\r\n  ['KPPA', 'Alpha'],\r\n  ['KPPC', 'Color'],\r\n  ['KPPE', 'EmissionRate'],\r\n  ['KPPL', 'LifeSpan'],\r\n  ['KPPS', 'Speed'],\r\n  ['KPPV', 'Visibility'],\r\n  // RibbonEmitter\r\n  ['KRHA', 'Height Above'],\r\n  ['KRHB', 'Height Below'],\r\n  ['KRAL', 'Alpha'],\r\n  ['KRCO', 'Color'],\r\n  ['KRTX', 'Texture Slot'],\r\n  ['KRVS', 'Visibility'],\r\n  // Camera\r\n  ['KCTR', 'Translation'],\r\n  ['KTTR', 'Rotation'],\r\n  ['KCRL', 'Target Translation'],\r\n]);\r\n\r\nexport function hasAnimation(object: AnimatedObject, name: string): boolean {\r\n  for (const animation of object.animations) {\r\n    if (animation.name === name) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nexport type MdlxType = Extent | Sequence | number | Texture | Material | Layer | TextureAnimation | Geoset | GeosetAnimation | Bone | Light | Helper | Attachment | ParticleEmitter | ParticleEmitter2 | ParticleEmitterPopcorn | RibbonEmitter | EventObject | Camera | CollisionShape | FaceEffect | Animation;\r\n\r\nexport function getObjectTypeName(object: MdlxType): string {\r\n  if (object instanceof Extent) {\r\n    return 'Extent';\r\n  } else if (object instanceof Sequence) {\r\n    return 'Sequence';\r\n  } else if (typeof object === 'number') {\r\n    return 'GlobalSequence';\r\n  } else if (object instanceof Texture) {\r\n    return 'Texture';\r\n  } else if (object instanceof Material) {\r\n    return 'Material';\r\n  } else if (object instanceof Layer) {\r\n    return 'Layer';\r\n  } else if (object instanceof TextureAnimation) {\r\n    return 'TextureAnimation';\r\n  } else if (object instanceof Geoset) {\r\n    return 'Geoset';\r\n  } else if (object instanceof GeosetAnimation) {\r\n    return 'GeosetAnimation';\r\n  } else if (object instanceof Bone) {\r\n    return 'Bone';\r\n  } else if (object instanceof Light) {\r\n    return 'Light';\r\n  } else if (object instanceof Helper) {\r\n    return 'Helper';\r\n  } else if (object instanceof Attachment) {\r\n    return 'Attachment';\r\n  } else if (object instanceof ParticleEmitter) {\r\n    return 'ParticleEmitter';\r\n  } else if (object instanceof ParticleEmitter2) {\r\n    return 'ParticleEmitter2';\r\n  } else if (object instanceof ParticleEmitterPopcorn) {\r\n    return 'ParticleEmitterPopcorn';\r\n  } else if (object instanceof RibbonEmitter) {\r\n    return 'RibbonEmitter';\r\n  } else if (object instanceof EventObject) {\r\n    return 'EventObject';\r\n  } else if (object instanceof Camera) {\r\n    return 'Camera';\r\n  } else if (object instanceof CollisionShape) {\r\n    return 'CollisionShape';\r\n  } else if (object instanceof FaceEffect) {\r\n    return 'FaceEffect';\r\n  } else if (object instanceof Animation) {\r\n    return <string>animatedTypeNames.get(object.name);\r\n  } else {\r\n    console.warn('Unknown object type', object);\r\n    return 'Unknown';\r\n  }\r\n}\r\n\r\nexport function getObjectName(object: MdlxType, index: number): string {\r\n  let name = getObjectTypeName(object);\r\n\r\n  if (!(object instanceof Animation) && !(object instanceof Extent)) {\r\n    name += ` ${index}`;\r\n  }\r\n\r\n  if (object instanceof Sequence || object instanceof GenericObject || object instanceof Camera) {\r\n    name += ` - \"${object.name}\"`;\r\n  }\r\n\r\n  if (object instanceof Texture || object instanceof FaceEffect) {\r\n    if (object.path.length) {\r\n      name += ` - \"${basename(object.path)}\"`;\r\n    }\r\n\r\n    if (object instanceof Texture) {\r\n      if (object.replaceableId === 1) {\r\n        name += ' - Team color';\r\n      } else if (object.replaceableId === 2) {\r\n        name += ' - Team glow';\r\n      } else if (object.replaceableId > 0) {\r\n        name += ` - Replaceable ID ${object.replaceableId}`;\r\n      }\r\n    }\r\n  }\r\n\r\n  return name;\r\n}\r\n\r\nexport function testObjects<T extends MdlxType>(data: SanityTestData, objects: T[], handler?: (data: SanityTestData, object: T, index: number) => void): void {\r\n  const l = objects.length;\r\n\r\n  if (l) {\r\n    const isAnimated = objects[0] instanceof AnimatedObject;\r\n    const isGeneric = objects[0] instanceof GenericObject;\r\n\r\n    for (let i = 0; i < l; i++) {\r\n      const object = objects[i];\r\n\r\n      data.push(object, i);\r\n\r\n      if (handler) {\r\n        handler(data, object, i);\r\n      }\r\n\r\n      if (isAnimated) {\r\n        const asAnimated = <AnimatedObject>object;\r\n\r\n        testObjects(data, asAnimated.animations, testAnimation);\r\n      }\r\n\r\n      if (isGeneric) {\r\n        const asGeneric = <GenericObject>object;\r\n\r\n        const objectId = asGeneric.objectId;\r\n        const parentId = asGeneric.parentId;\r\n\r\n        data.assertError(parentId === -1 || hasGenericObject(data, parentId), `Invalid parent ${parentId}`);\r\n        data.assertError(objectId !== parentId, 'Same object and parent');\r\n      }\r\n\r\n      data.pop();\r\n    }\r\n  }\r\n}\r\n\r\nexport function testAndGetReference<T extends MdlxType>(data: SanityTestData, objects: T[], index: number, typeNameIfError: string): T | undefined {\r\n  if (index >= 0 && index < objects.length) {\r\n    data.addReference(objects[index]);\r\n\r\n    return objects[index];\r\n  } else {\r\n    data.addError(`Invalid ${typeNameIfError} ${index}`);\r\n\r\n    return;\r\n  }\r\n}\r\n\r\nexport function testReference<T extends MdlxType>(data: SanityTestData, objects: T[], index: number, typeNameIfError: string): boolean {\r\n  // This explicit test against undefined is needed because global sequences are numbers and could be equal to 0.\r\n  return testAndGetReference(data, objects, index, typeNameIfError) !== undefined;\r\n}\r\n\r\n/**\r\n * Get all of the texture indices referenced by a layer.\r\n */\r\nexport function getTextureIds(layer: Layer): number[] {\r\n  for (const animation of layer.animations) {\r\n    if (animation.name === 'KMTF') {\r\n      return unique(animation.values.map((value) => value[0]));\r\n    }\r\n  }\r\n\r\n  return [layer.textureId];\r\n}\r\n\r\nfunction testVertexSkinning(data: SanityTestData, vertex: number, bone: number, isHd: boolean): void {\r\n  const object = data.objects[bone];\r\n\r\n  if (isHd) {\r\n    data.assertError(isBetween(bone, 0, 255), `Vertex ${vertex}: References bone ${bone} but there can only be 256 bones in an HD model`);\r\n  }\r\n\r\n  if (object) {\r\n    if (!(object instanceof Bone)) {\r\n      data.addSevere(`Vertex ${vertex}: Attached to \"${object.name}\" which is not a bone`);\r\n    } else {\r\n      // Add a use for this bone, to check later if bones have vertices attached to them.\r\n      const uses = data.boneUsageMap.get(bone) || 0;\r\n     \r\n      data.boneUsageMap.set(bone, uses + 1);\r\n    }\r\n  } else {\r\n    data.addError(`Vertex ${vertex}: Attached to object ${bone} which does not exist`);\r\n  }\r\n}\r\n\r\n/**\r\n * Test geoset skinning.\r\n */\r\nexport function testGeosetSkinning(data: SanityTestData, geoset: Geoset): void {\r\n  if (data.model.version > 800 && geoset.skin.length) {\r\n    data.assertWarning(geoset.vertexGroups.length === 0, 'This geoset has both skin/weights and vertex groups');\r\n\r\n    const skin = geoset.skin;\r\n\r\n    for (let i = 0, l = skin.length / 8; i < l; i++) {\r\n      const offset = i * 8;\r\n      const bone0 = skin[offset];\r\n      const bone1 = skin[offset + 1];\r\n      const bone2 = skin[offset + 2];\r\n      const bone3 = skin[offset + 3];\r\n      const weight0 = skin[offset + 4];\r\n      const weight1 = skin[offset + 5];\r\n      const weight2 = skin[offset + 6];\r\n      const weight3 = skin[offset + 7];\r\n\r\n      if (weight0 > 0) {\r\n        testVertexSkinning(data, i, bone0, true);\r\n      }\r\n\r\n      if (weight1 > 0) {\r\n        testVertexSkinning(data, i, bone1, true);\r\n      }\r\n\r\n      if (weight2 > 0) {\r\n        testVertexSkinning(data, i, bone2, true);\r\n      }\r\n\r\n      if (weight3 > 0) {\r\n        testVertexSkinning(data, i, bone3, true);\r\n      }\r\n\r\n      const weight = weight0 + weight1 + weight2 + weight3;\r\n\r\n      if (weight === 0) {\r\n        data.addSevere(`Vertex ${i}: Not attached to anything`);\r\n      } else if (weight !== 255) {\r\n        data.addSevere(`Vertex ${i}: The weights are not normalized to 1`);\r\n      }\r\n    }\r\n  } else {\r\n    // A model having no bones at all is also valid.\r\n    // I don't know if the skinning information in that case can be anything whatsoever, or if there are rules.\r\n    if (data.model.bones.length) {\r\n      const vertexGroups = geoset.vertexGroups;\r\n      const matrixGroups = geoset.matrixGroups;\r\n      const matrixIndices = geoset.matrixIndices;\r\n      const slices = [];\r\n\r\n      for (let i = 0, l = matrixGroups.length, k = 0; i < l; i++) {\r\n        slices.push(matrixIndices.subarray(k, k + matrixGroups[i]));\r\n        k += matrixGroups[i];\r\n      }\r\n\r\n      for (let i = 0, l = vertexGroups.length; i < l; i++) {\r\n        const slice = slices[vertexGroups[i]];\r\n\r\n        if (slice) {\r\n          for (const bone of slice) {\r\n            testVertexSkinning(data, i, bone, false);\r\n          }\r\n        } else {\r\n          const vertexGroup = vertexGroups[i];\r\n\r\n          if (vertexGroup === 255) {\r\n            data.addSevere(`Vertex ${i}: Not attached to anything`);\r\n          } else {\r\n            data.addSevere(`Vertex ${i}: Attached to vertex group ${vertexGroup} which does not exist`);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Is the given ID a valid generic object?\r\n */\r\nfunction hasGenericObject(data: SanityTestData, id: number): boolean {\r\n  for (const object of data.objects) {\r\n    if (object.objectId === id) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nexport function testAnimation(data: SanityTestData, animation: Animation): void {\r\n  const name = animation.name;\r\n  const interpolationType = animation.interpolationType;\r\n\r\n  // Particle emitter 2 variation animations are not implemented in Magos for the MDX format.\r\n  data.assertWarning(name !== 'KP2R', 'Using a variation animation.');\r\n\r\n  // Particle emitter 2 gravity animations are not implemented in Magos for the MDX format.\r\n  data.assertWarning(name !== 'KP2G', 'Using a gravity animation.');\r\n\r\n  // The game seems to force visiblity (and others?) interpolation types to none.\r\n  data.assertWarning(animatedTypeNames.get(name) !== 'Visibility' || interpolationType === InterpolationType.DontInterp, 'Interpolation type not set to None');\r\n\r\n  testTracks(data, animation);\r\n}\r\n\r\nexport function cleanNode(node: SanityTestNode): void {\r\n  const nodes = node.nodes;\r\n\r\n  for (let i = nodes.length - 1; i >= 0; i--) {\r\n    const child = nodes[i];\r\n\r\n    if (child.type === 'node') {\r\n      if (child.errors || child.severe || child.warnings || child.unused || (child.uses !== undefined && !child.uses)) {\r\n        cleanNode(child);\r\n      } else {\r\n        nodes.splice(i, 1);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function getAnimation(object: AnimatedObject, name: string): Animation | undefined {\r\n  for (const animation of object.animations) {\r\n    if (animation.name === name) {\r\n      return animation;\r\n    }\r\n  }\r\n\r\n  return;\r\n}\r\n\r\nexport function testExtent(data: SanityTestData, extent: Extent): void {\r\n  data.push(extent, 0);\r\n\r\n  const { max, min } = extent;\r\n\r\n  if ((max[0] - min[0] < 0) || (max[1] - min[1] < 0) || (max[2] - min[2] < 0)) {\r\n    data.addWarning('Negative extents');\r\n  }\r\n\r\n  data.pop();\r\n}\r\n\r\n/*\r\nlet attachmentNames = new Set([\r\n    'chest',\r\n    'feet',\r\n    'foot',\r\n    'hand',\r\n    'head',\r\n    'origin',\r\n    'overhead',\r\n    'sprite',\r\n    'weapon',\r\n]);\r\n\r\nlet attachmentQualifiers = new Set([\r\n    'alternate',\r\n    'left',\r\n    'mount',\r\n    'right',\r\n    'rear',\r\n    'smart',\r\n    'first',\r\n    'second',\r\n    'third',\r\n    'fourth',\r\n    'fifth',\r\n    'sixth',\r\n    'small',\r\n    'medium',\r\n    'large',\r\n    'gold',\r\n    'rallypoint',\r\n    'eattree',\r\n]);\r\n\r\nfunction testAttachmentName(attachment) {\r\n    let tokens = attachment.node.name.toLowerCase().trim().split(/\\s+/),\r\n        valid = true;\r\n\r\n    if (tokens.length > 1) {\r\n        let names = attachmentNames,\r\n            firstToken = tokens[0],\r\n            lastToken = tokens[tokens.length - 1];\r\n\r\n        if (!names.has(tokens[0]) || lastToken !== 'ref') {\r\n            valid = false;\r\n        }\r\n\r\n        if (tokens.length > 2) {\r\n            let qualifiers = attachmentQualifiers;\r\n\r\n            for (let i = 1, l = tokens.length - 1; i < l; i++) {\r\n                if (!qualifiers.has(tokens[i])) {\r\n                    valid = false;\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        valid = false;\r\n    }\r\n\r\n    return valid;\r\n}\r\n*/\r\n","import Model from '../../../parsers/mdlx/model';\r\nimport GenericObject from '../../../parsers/mdlx/genericobject';\r\nimport { getObjectName, MdlxType } from './utils';\r\n\r\nexport interface SanityTestMessage {\r\n  type: 'error' | 'severe' | 'warning' | 'unused';\r\n  message: string;\r\n}\r\n\r\nexport interface SanityTestNode {\r\n  type: 'node';\r\n  name: string;\r\n  errors: number;\r\n  severe: number;\r\n  warnings: number;\r\n  unused: number;\r\n  nodes: (SanityTestNode | SanityTestMessage)[];\r\n  uses?: number;\r\n}\r\n\r\nexport default class SanityTestData {\r\n  model: Model;\r\n  objects: GenericObject[] = [];\r\n  current: SanityTestNode;\r\n  stack: SanityTestNode[];\r\n  map: Map<MdlxType, SanityTestNode> = new Map();\r\n  foundStand = false;\r\n  foundDeath = false;\r\n  boneUsageMap = new Map();\r\n\r\n  constructor(model: Model) {\r\n    this.model = model;\r\n    this.current = { type: 'node', name: '', errors: 0, severe: 0, warnings: 0, unused: 0, nodes: []};\r\n    this.stack = [this.current];\r\n\r\n    this.addObjects(model.sequences);\r\n    this.addObjects(model.globalSequences);\r\n    this.addObjects(model.textures);\r\n    this.addObjects(model.materials);\r\n    this.addObjects(model.textureAnimations);\r\n    this.addObjects(model.geosets);\r\n    this.addObjects(model.geosetAnimations);\r\n    this.addObjects(model.bones);\r\n    this.addObjects(model.lights);\r\n    this.addObjects(model.helpers);\r\n    this.addObjects(model.attachments);\r\n    this.addObjects(model.particleEmitters);\r\n    this.addObjects(model.particleEmitters2);\r\n    this.addObjects(model.particleEmittersPopcorn);\r\n    this.addObjects(model.ribbonEmitters);\r\n    this.addObjects(model.cameras);\r\n    this.addObjects(model.eventObjects);\r\n    this.addObjects(model.collisionShapes);\r\n    this.addObjects(model.faceEffects);\r\n  }\r\n\r\n  /**\r\n   * Adds nodes for all of the given objects.\r\n   * Also handles the flat array of generic objects.\r\n   */\r\n  addObjects(objects: MdlxType[]): void {\r\n    if (objects.length) {\r\n      const areGeneric = objects[0] instanceof GenericObject;\r\n\r\n      for (let i = 0, l = objects.length; i < l; i++) {\r\n        const object = objects[i];\r\n        const name = getObjectName(object, i);\r\n        const node = <SanityTestNode>{ type: 'node', name, errors: 0, severe: 0, warnings: 0, unused: 0, nodes: []};\r\n\r\n        if (!areGeneric) {\r\n          node.uses = 0;\r\n        }\r\n\r\n        this.map.set(object, node);\r\n      }\r\n\r\n      if (areGeneric) {\r\n        this.objects.push(...<GenericObject[]>objects);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Pushes to the stack the node the given object maps to.\r\n   * If this node does not exist, a new one will be created, which is used by internal nodes like material layers.\r\n   */\r\n  push(object: MdlxType, index: number): void {\r\n    let node = this.map.get(object);\r\n\r\n    if (!node) {\r\n      const name = getObjectName(object, index);\r\n\r\n      node = <SanityTestNode>{ type: 'node', name, errors: 0, severe: 0, warnings: 0, unused: 0, nodes: []};\r\n    }\r\n\r\n    this.current.nodes.push(node);\r\n    this.current = node;\r\n    this.stack.unshift(node);\r\n  }\r\n\r\n  /**\r\n   * Pops the current node from the stack.\r\n   */\r\n  pop(): void {\r\n    this.stack.shift();\r\n    this.current = this.stack[0];\r\n  }\r\n\r\n  /**\r\n   * Adds a reference to the node the given object maps to.\r\n   */\r\n  addReference(object: MdlxType): void {\r\n    const node = <SanityTestNode>this.map.get(object);\r\n\r\n    if (node.uses !== undefined) {\r\n      node.uses += 1;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add a reference to the current node.\r\n   */\r\n  addImplicitReference(): void {\r\n    const node = this.current;\r\n\r\n    if (node.uses !== undefined) {\r\n      node.uses += 1;\r\n    }\r\n  }\r\n\r\n  addError(message: string): void {\r\n    this.current.nodes.push({ type: 'error', message });\r\n\r\n    for (const node of this.stack) {\r\n      node.errors += 1;\r\n    }\r\n  }\r\n\r\n  addSevere(message: string): void {\r\n    this.current.nodes.push({ type: 'severe', message });\r\n\r\n    for (const node of this.stack) {\r\n      node.severe += 1;\r\n    }\r\n  }\r\n\r\n  addWarning(message: string): void {\r\n    this.current.nodes.push({ type: 'warning', message });\r\n\r\n    for (const node of this.stack) {\r\n      node.warnings += 1;\r\n    }\r\n  }\r\n\r\n  addUnused(message: string): void {\r\n    this.current.nodes.push({ type: 'unused', message });\r\n\r\n    for (const node of this.stack) {\r\n      node.unused += 1;\r\n    }\r\n  }\r\n\r\n  assertError(condition: boolean, message: string): void {\r\n    if (!condition) {\r\n      this.addError(message);\r\n    }\r\n  }\r\n\r\n  assertSevere(condition: boolean, message: string): void {\r\n    if (!condition) {\r\n      this.addSevere(message);\r\n    }\r\n  }\r\n\r\n  assertWarning(condition: boolean, message: string): void {\r\n    if (!condition) {\r\n      this.addWarning(message);\r\n    }\r\n  }\r\n\r\n  assertUnused(condition: boolean, message: string): void {\r\n    if (!condition) {\r\n      this.addUnused(message);\r\n    }\r\n  }\r\n}\r\n","import { extname } from '../../../common/path';\r\nimport Sequence from '../../../parsers/mdlx/sequence';\r\nimport Texture from '../../../parsers/mdlx/texture';\r\nimport Material from '../../../parsers/mdlx/material';\r\nimport Layer, { FilterMode as LayerFilterMode } from '../../../parsers/mdlx/layer';\r\nimport Geoset from '../../../parsers/mdlx/geoset';\r\nimport GeosetAnimation from '../../../parsers/mdlx/geosetanimation';\r\nimport Bone from '../../../parsers/mdlx/bone';\r\nimport Light from '../../../parsers/mdlx/light';\r\nimport ParticleEmitter from '../../../parsers/mdlx/particleemitter';\r\nimport ParticleEmitter2, { FilterMode as Particle2FilterMode, Flags as Particle2Flags } from '../../../parsers/mdlx/particleemitter2';\r\nimport ParticleEmitterPopcorn from '../../../parsers/mdlx/particleemitterpopcorn';\r\nimport RibbonEmitter from '../../../parsers/mdlx/ribbonemitter';\r\nimport EventObject from '../../../parsers/mdlx/eventobject';\r\nimport Camera from '../../../parsers/mdlx/camera';\r\nimport FaceEffect from '../../../parsers/mdlx/faceeffect';\r\nimport SanityTestData from './data';\r\nimport { sequenceNames, replaceableIds, testObjects, testReference, getTextureIds, testGeosetSkinning, hasAnimation, getAnimation, testExtent, testAndGetReference } from './utils';\r\nimport testTracks from './tracks';\r\n\r\nexport function testHeader(data: SanityTestData): void {\r\n  const version = data.model.version;\r\n\r\n  if (version !== 800 && version !== 900 && version !== 1000) {\r\n    data.addWarning(`Unknown version: ${version}`);\r\n  }\r\n\r\n  if (version === 900) {\r\n    data.addError('Version 900 is not supported by Warcrft 3');\r\n  }\r\n\r\n  if (data.model.animationFile !== '') {\r\n    data.addWarning(`The animation file should probably be empty, currently set to: \"${data.model.animationFile}\"`);\r\n  }\r\n\r\n  testExtent(data, data.model.extent);\r\n}\r\n\r\nexport function testSequences(data: SanityTestData): void {\r\n  const sequences = data.model.sequences;\r\n\r\n  if (sequences.length) {\r\n    testObjects(data, sequences, testSequence);\r\n\r\n    data.assertSevere(data.foundStand, 'Missing \"Stand\" sequence');\r\n    data.assertSevere(data.foundDeath, 'Missing \"Death\" sequence');\r\n  } else {\r\n    data.addWarning('No sequences');\r\n  }\r\n}\r\n\r\nfunction testSequence(data: SanityTestData, sequence: Sequence, index: number): void {\r\n  const name = sequence.name;\r\n  const tokens = name.toLowerCase().trim().split('-')[0].split(/\\s+/);\r\n  let token = tokens[0];\r\n  const interval = sequence.interval;\r\n  const length = interval[1] - interval[0];\r\n  const sequences = data.model.sequences;\r\n\r\n  for (let i = 0; i < index; i++) {\r\n    const otherSequence = sequences[i];\r\n    const otherInterval = otherSequence.interval;\r\n\r\n    // Reforged fixed these weird issues with sequence ordering.\r\n    if (data.model.version === 800) {\r\n      if (interval[0] === otherInterval[0]) {\r\n        data.addSevere(`This sequence starts at the same frame as sequence ${i} \"${otherSequence.name}\"`);\r\n      } else if (interval[0] < otherInterval[1]) {\r\n        data.addSevere(`This sequence starts before sequence ${i} \"${otherSequence.name}\" ends`);\r\n      }\r\n    }\r\n  }\r\n\r\n  if (token === 'alternate') {\r\n    token = tokens[1];\r\n  }\r\n\r\n  if (token === 'stand') {\r\n    data.foundStand = true;\r\n  }\r\n\r\n  if (token === 'death') {\r\n    data.foundDeath = true;\r\n  }\r\n\r\n  data.addImplicitReference();\r\n\r\n  data.assertWarning(sequenceNames.has(token), `\"${token}\" is not a standard name`);\r\n  data.assertWarning(length !== 0, 'Zero length');\r\n  data.assertWarning(length > -1, `Negative length: ${length}`);\r\n\r\n  testExtent(data, sequence.extent);\r\n}\r\n\r\nexport function testGlobalSequence(data: SanityTestData, sequence: number): void {\r\n  data.assertWarning(sequence !== 0, 'Zero length');\r\n  data.assertWarning(sequence >= 0, `Negative length: ${sequence}`);\r\n}\r\n\r\nexport function testTextures(data: SanityTestData): void {\r\n  const textures = data.model.textures;\r\n\r\n  if (textures.length) {\r\n    testObjects(data, textures, testTexture);\r\n  } else {\r\n    data.addWarning('No textures');\r\n  }\r\n}\r\n\r\nfunction testTexture(data: SanityTestData, texture: Texture): void {\r\n  const replaceableId = texture.replaceableId;\r\n  const path = texture.path.toLowerCase();\r\n  const ext = extname(path);\r\n\r\n  data.assertError(path === '' || ext === '.blp' || ext === '.tga' || ext === '.tif' || ext === '.dds', `Corrupted path: \"${path}\"`);\r\n  data.assertError(replaceableId === 0 || replaceableIds.has(replaceableId), `Unknown replaceable ID: ${replaceableId}`);\r\n  data.assertWarning(path === '' || replaceableId === 0, `Path \"${path}\" and replaceable ID ${replaceableId} used together`);\r\n}\r\n\r\nexport function testMaterial(data: SanityTestData, material: Material): void {\r\n  const layers = material.layers;\r\n  const shader = material.shader;\r\n\r\n  if (data.model.version > 800) {\r\n    data.assertWarning(shader === '' || shader === 'Shader_SD_FixedFunction' || shader === 'Shader_HD_DefaultUnit', `Unknown shader: \"${shader}\"`);\r\n  }\r\n\r\n  if (layers.length) {\r\n    testObjects(data, layers, testLayer);\r\n  } else {\r\n    data.addWarning('No layers');\r\n  }\r\n}\r\n\r\nfunction testLayer(data: SanityTestData, layer: Layer): void {\r\n  const textures = data.model.textures;\r\n  const textureAnimations = data.model.textureAnimations;\r\n\r\n  for (const textureId of getTextureIds(layer)) {\r\n    testReference(data, textures, textureId, 'texture');\r\n  }\r\n\r\n  const textureAnimationId = layer.textureAnimationId;\r\n\r\n  if (textureAnimationId !== -1) {\r\n    testReference(data, textureAnimations, textureAnimationId, 'texture animation');\r\n  }\r\n\r\n  const filterMode = layer.filterMode;\r\n\r\n  data.assertWarning(filterMode >= LayerFilterMode.None && filterMode <= LayerFilterMode.Modulate2x, `Invalid filter mode: ${layer.filterMode}`);\r\n}\r\n\r\nexport function testGeoset(data: SanityTestData, geoset: Geoset, index: number): void {\r\n  const geosetAnimations = data.model.geosetAnimations;\r\n  const material = testAndGetReference(data, data.model.materials, geoset.materialId, 'material');\r\n  let isHd = false;\r\n\r\n  if (material && material.shader === 'Shader_HD_DefaultUnit') {\r\n    isHd = true;\r\n  }\r\n\r\n  if (!isHd) {\r\n    // When a geoset has too many vertices (or faces? or both?) it will render completely bugged in WC3.\r\n    // I don't know the exact number, but here are numbers that I tested:\r\n    //\r\n    //     Verts   Faces   Result\r\n    //     ----------------------\r\n    //     7433    16386   Bugged\r\n    //     7394    16290   Good\r\n    //\r\n    const GUESSED_MAX_VERTICES = 7433 * 3;\r\n\r\n    data.assertSevere(geoset.vertices.length < GUESSED_MAX_VERTICES, `Too many vertices in one geoset: ${geoset.vertices.length / 3}`);\r\n  }\r\n\r\n  testGeosetSkinning(data, geoset);\r\n\r\n  if (geosetAnimations.length) {\r\n    const references = [];\r\n\r\n    for (let j = 0, k = geosetAnimations.length; j < k; j++) {\r\n      if (geosetAnimations[j].geosetId === index) {\r\n        references.push(j);\r\n      }\r\n    }\r\n\r\n    data.assertWarning(references.length <= 1, `Referenced by ${references.length} geoset animations: ${references.join(', ')}`);\r\n  }\r\n\r\n  if (geoset.faces.length) {\r\n    data.addImplicitReference();\r\n  } else {\r\n    // The game and my code have no issue with geosets containing no faces, but Magos crashes, so add a warning in addition to it being useless.\r\n    data.addWarning('Zero faces');\r\n  }\r\n\r\n  // The game and my code have no issue with geosets having any number of sequence extents, but Magos fails to parse, so add a warning.\r\n  // Either way this is only relevant to version 800, because there seem to always be 0 extents in >800 models.\r\n  if (geoset.sequenceExtents.length !== data.model.sequences.length && data.model.version === 800) {\r\n    data.addWarning(`Number of sequence extents (${geoset.sequenceExtents.length}) does not match the number of sequences (${data.model.sequences.length})`);\r\n  }\r\n\r\n  testExtent(data, geoset.extent);\r\n\r\n  for (const extent of geoset.sequenceExtents) {\r\n    testExtent(data, extent);\r\n  }\r\n}\r\n\r\nexport function testGeosetAnimation(data: SanityTestData, geosetAnimation: GeosetAnimation): void {\r\n  const geosets = data.model.geosets;\r\n  const geosetId = geosetAnimation.geosetId;\r\n\r\n  data.addImplicitReference();\r\n\r\n  testReference(data, geosets, geosetId, 'geoset');\r\n}\r\n\r\nconst SUPPOSED_ALPHA_THRESHOLD = 0.1;\r\n\r\nexport function testBone(data: SanityTestData, bone: Bone, index: number): void {\r\n  const geosets = data.model.geosets;\r\n  const geosetAnimations = data.model.geosetAnimations;\r\n  const geosetId = bone.geosetId;\r\n  const geosetAnimationId = bone.geosetAnimationId;\r\n\r\n  if (geosetId !== -1) {\r\n    testReference(data, geosets, geosetId, 'geoset');\r\n  }\r\n\r\n  if (geosetAnimationId !== -1 && testReference(data, geosetAnimations, geosetAnimationId, 'geoset animation')) {\r\n    const geosetAnimation = geosetAnimations[geosetAnimationId];\r\n\r\n    if (geosetId !== -1 && geosetAnimation.alpha < SUPPOSED_ALPHA_THRESHOLD && !hasAnimation(geosetAnimation, 'KGAO')) {\r\n      data.addSevere(`Referencing geoset ${geosetId} and geoset animation ${geosetAnimationId} with a 0 alpha, the geoset may be invisible`);\r\n    }\r\n  }\r\n\r\n  data.assertWarning(data.boneUsageMap.get(index) > 0, `There are no vertices attached to this bone`);\r\n}\r\n\r\nexport function testLight(data: SanityTestData, light: Light): void {\r\n  const attenuation = light.attenuation;\r\n\r\n  data.assertWarning(attenuation[0] >= 80, `Minimum attenuation should probably be bigger than or equal to 80, but is ${attenuation[0]}`);\r\n  data.assertWarning(attenuation[1] <= 200, `Maximum attenuation should probably be smaller than or equal to 200, but is ${attenuation[1]}`);\r\n  data.assertWarning(attenuation[1] - attenuation[0] > 0, `The maximum attenuation should be bigger than the minimum, but isn't`);\r\n}\r\n\r\nexport function testAttachments(data: SanityTestData): void {\r\n  const attachments = data.model.attachments;\r\n  let foundOrigin = false;\r\n\r\n  for (const attachment of attachments) {\r\n    const path = attachment.path;\r\n\r\n    if (path.length) {\r\n      const lowerCase = path.toLowerCase();\r\n\r\n      data.assertError(lowerCase.endsWith('.mdl') || lowerCase.endsWith('.mdx'), `Invalid path \"${path}\"`);\r\n    }\r\n  \r\n    if (attachment.name.startsWith('Origin Ref')) {\r\n      foundOrigin = true;\r\n    }\r\n  }\r\n\r\n  if (!foundOrigin) {\r\n    data.addWarning('Missing the Origin attachment point');\r\n  }\r\n}\r\n\r\nexport function testPivotPoints(data: SanityTestData): void {\r\n  const pivotPoints = data.model.pivotPoints;\r\n  const objects = data.objects;\r\n\r\n  data.assertWarning(pivotPoints.length === objects.length, `Expected ${objects.length} pivot points, got ${pivotPoints.length}`);\r\n}\r\n\r\nexport function testParticleEmitter(data: SanityTestData, emitter: ParticleEmitter): void {\r\n  const path = emitter.path.toLowerCase();\r\n\r\n  data.assertError(path.endsWith('.mdl') || path.endsWith('.mdx'), 'Invalid path');\r\n}\r\n\r\nexport function testParticleEmitter2(data: SanityTestData, emitter: ParticleEmitter2): void {\r\n  const replaceableId = emitter.replaceableId;\r\n\r\n  testReference(data, data.model.textures, emitter.textureId, 'texture');\r\n\r\n  const filterMode = emitter.filterMode;\r\n\r\n  data.assertWarning(filterMode >= Particle2FilterMode.Blend && filterMode <= Particle2FilterMode.AlphaKey, `Invalid filter mode: ${emitter.filterMode}`);\r\n  data.assertError(replaceableId === 0 || replaceableIds.has(replaceableId), `Invalid replaceable ID: ${replaceableId}`);\r\n\r\n  if (emitter.flags & Particle2Flags.XYQuad) {\r\n    data.assertSevere(emitter.speed !== 0 && emitter.latitude !== 0, 'XY Quad emitters must have a non-zero speed and latitude');\r\n  }\r\n\r\n  data.assertSevere(emitter.timeMiddle >= 0 && emitter.timeMiddle <= 1, `Expected time middle to be between 0 and 1, got ${emitter.timeMiddle}`);\r\n\r\n  if (emitter.squirt && !getAnimation(emitter, 'KP2E')) {\r\n    data.addSevere('Using squirt without animating the emission rate');\r\n  }\r\n}\r\n\r\nexport function testParticleEmitterPopcorn(data: SanityTestData, emitter: ParticleEmitterPopcorn): void {\r\n  data.assertSevere(emitter.animationVisiblityGuide.length > 0, 'No animation visibility guide');\r\n}\r\n\r\nexport function testRibbonEmitter(data: SanityTestData, emitter: RibbonEmitter): void {\r\n  testReference(data, data.model.materials, emitter.materialId, 'material');\r\n}\r\n\r\nexport function testEventObject(data: SanityTestData, eventObject: EventObject): void {\r\n  testTracks(data, eventObject);\r\n}\r\n\r\nexport function testCamera(data: SanityTestData, _camera: Camera): void {\r\n  // I don't know what the rules are as to when cameras are used for portraits.\r\n  // Therefore, for now never report them as not used.\r\n  data.addImplicitReference();\r\n}\r\n\r\nexport function testFaceEffect(data: SanityTestData, faceEffect: FaceEffect): void {\r\n  const path = faceEffect.path;\r\n\r\n  if (path.length) {\r\n    data.assertError(path.endsWith('.facefx') || path.endsWith('.facefx_ingame'), `Corrupted face effect path: \"${path}\"`);\r\n  }\r\n\r\n  data.addImplicitReference();\r\n}\r\n\r\nexport function testBindPose(data: SanityTestData): void {\r\n  const matrices = data.model.bindPose;\r\n  const objects = data.objects;\r\n\r\n  if (matrices.length && objects.length) { \r\n    // There's always an extra matrix for some reason.\r\n    // Face effects? but also models with no face effects have it.\r\n    data.assertWarning(matrices.length === objects.length + 1, `Expected ${objects.length + 1} matrices, got ${matrices.length}`);\r\n  }\r\n}\r\n","interface PrimitiveShape {\r\n  vertices: Float32Array;\r\n  uvs: Float32Array;\r\n  faces: Uint16Array;\r\n  edges: Uint16Array;\r\n  boundingRadius: number;\r\n}\r\n\r\n/**\r\n * Creates a rectangle geometry object.\r\n */\r\nexport function createRectangle(w: number, d: number): PrimitiveShape {\r\n  return {\r\n    vertices: new Float32Array([-w, d, 0, -w, -d, 0, w, -d, 0, w, d, 0]),\r\n    uvs: new Float32Array([0, 0, 0, 1, 1, 1, 1, 0]),\r\n    faces: new Uint16Array([0, 1, 2, 0, 2, 3]),\r\n    edges: new Uint16Array([0, 1, 1, 2, 2, 3, 3, 0]),\r\n    boundingRadius: Math.hypot(w, d),\r\n  };\r\n}\r\n\r\n/**\r\n * Creates a unit rectangle geometry object.\r\n */\r\nexport function createUnitRectangle(): PrimitiveShape {\r\n  return createRectangle(1, 1);\r\n}\r\n\r\n/**\r\n * Creates a cube geometry object.\r\n */\r\nexport function createCube(w: number, d: number, h: number): PrimitiveShape {\r\n  return {\r\n    vertices: new Float32Array([-w, -d, -h, -w, -d, h, -w, d, -h, -w, d, h, w, d, -h, w, d, h, w, -d, -h, w, -d, h]),\r\n    uvs: new Float32Array([0, 0, 0, 1, 0.25, 0, 0.25, 1, 0.5, 0, 0.5, 1, 0.75, 0, 0.75, 1]),\r\n    faces: new Uint16Array([0, 1, 2, 1, 3, 2, 2, 3, 4, 3, 5, 4, 4, 5, 6, 5, 7, 6, 6, 7, 0, 7, 1, 0, 0, 2, 4, 0, 4, 6, 1, 5, 3, 1, 7, 5]),\r\n    edges: new Uint16Array([0, 1, 2, 3, 4, 5, 6, 7, 0, 2, 2, 4, 4, 6, 6, 0, 1, 3, 3, 5, 5, 7, 7, 1]),\r\n    boundingRadius: Math.hypot(w, d, h),\r\n  };\r\n}\r\n\r\n/**\r\n * Creates a unit cube geometry object.\r\n */\r\nexport function createUnitCube(): PrimitiveShape {\r\n  return createCube(1, 1, 1);\r\n}\r\n\r\n/**\r\n * Creates a sphere geometry object.\r\n */\r\nexport function createSphere(radius: number, stacks: number, slices: number): PrimitiveShape {\r\n  const points = (stacks + 1) * (slices + 1);\r\n  const vertices = new Float32Array(points * 3);\r\n  const uvs = new Float32Array(points * 2);\r\n  const faces = new Uint16Array(stacks * slices * 6);\r\n  const edges = new Uint16Array(stacks * slices * 6);\r\n\r\n  for (let stack = 0, vOffset = 0, uOffset = 0; stack <= stacks; stack++) {\r\n    const theta = stack * Math.PI / stacks;\r\n    const sinTheta = Math.sin(theta);\r\n    const cosTheta = Math.cos(theta);\r\n\r\n    for (let slice = 0; slice <= slices; slice += 1, vOffset += 3, uOffset += 2) {\r\n      const phi = slice * 2 * Math.PI / slices;\r\n      const sinPhi = Math.sin(phi);\r\n      const cosPhi = Math.cos(phi);\r\n\r\n      vertices[vOffset + 0] = cosPhi * sinTheta * radius;\r\n      vertices[vOffset + 1] = sinPhi * sinTheta * radius;\r\n      vertices[vOffset + 2] = cosTheta * radius;\r\n\r\n      uvs[uOffset + 0] = slice / slices;\r\n      uvs[uOffset + 1] = 1 - (stack / stacks);\r\n    }\r\n  }\r\n\r\n  for (let stack = 0, fOffset = 0; stack < stacks; stack++) {\r\n    for (let slice = 0; slice < slices; slice += 1, fOffset += 6) {\r\n      const first = (stack * (slices + 1)) + slice;\r\n      const second = first + slices + 1;\r\n\r\n      // Faces\r\n      faces[fOffset + 0] = first;\r\n      faces[fOffset + 1] = second;\r\n      faces[fOffset + 2] = first + 1;\r\n\r\n      faces[fOffset + 3] = second;\r\n      faces[fOffset + 4] = second + 1;\r\n      faces[fOffset + 5] = first + 1;\r\n\r\n      // Edges\r\n      edges[fOffset + 0] = first;\r\n      edges[fOffset + 1] = second;\r\n\r\n      edges[fOffset + 2] = first;\r\n      edges[fOffset + 3] = first + 1;\r\n\r\n      edges[fOffset + 4] = second;\r\n      edges[fOffset + 5] = second + 1;\r\n    }\r\n  }\r\n\r\n  return {\r\n    vertices: vertices,\r\n    uvs: uvs,\r\n    faces: faces,\r\n    edges: edges,\r\n    boundingRadius: radius,\r\n  };\r\n}\r\n\r\n/**\r\n * Creates a unit sphere geometry object.\r\n */\r\nexport function createUnitSphere(stacks: number, slices: number): PrimitiveShape {\r\n  return createSphere(1, stacks, slices);\r\n}\r\n\r\n/**\r\n * Creates a cylinder geometry object.\r\n */\r\nexport function createCylinder(radius: number, height: number, slices: number): PrimitiveShape {\r\n  slices = Math.max(slices, 3);\r\n\r\n  const points = (slices + 1) * 2 + 2;\r\n  const vertices = new Float32Array(points * 3);\r\n  const uvs = new Float32Array(points * 2);\r\n  const faces = new Uint16Array(slices * 12);\r\n  const edges = new Uint16Array(slices * 10);\r\n  const step = (Math.PI * 2) / slices;\r\n  let vOffset = 0;\r\n  let uOffset = 0;\r\n\r\n  for (let slice = 0; slice < slices + 1; slice += 1, vOffset += 6, uOffset += 4) {\r\n    const x = Math.cos(step * slice) * radius;\r\n    const y = Math.sin(step * slice) * radius;\r\n    const u = slice / slices;\r\n\r\n    vertices[vOffset + 0] = x;\r\n    vertices[vOffset + 1] = y;\r\n    vertices[vOffset + 2] = height;\r\n    vertices[vOffset + 3] = x;\r\n    vertices[vOffset + 4] = y;\r\n    vertices[vOffset + 5] = -height;\r\n\r\n    uvs[uOffset + 0] = u;\r\n    uvs[uOffset + 1] = 1;\r\n    uvs[uOffset + 2] = u;\r\n    uvs[uOffset + 3] = 0;\r\n  }\r\n\r\n  // Poles\r\n  vertices[vOffset + 0] = 0;\r\n  vertices[vOffset + 1] = 0;\r\n  vertices[vOffset + 2] = height;\r\n\r\n  vertices[vOffset + 3] = 0;\r\n  vertices[vOffset + 4] = 0;\r\n  vertices[vOffset + 5] = -height;\r\n\r\n  uvs[uOffset + 0] = 0;\r\n  uvs[uOffset + 1] = 1;\r\n\r\n  uvs[uOffset + 2] = 0;\r\n  uvs[uOffset + 3] = 0;\r\n\r\n  for (let slice = 0, fOffset = 0, eOffset = 0; slice < slices; slice += 1, fOffset += 12, eOffset += 10) {\r\n    const first = slice * 2;\r\n\r\n    // Faces\r\n    faces[fOffset + 0] = first + 0;\r\n    faces[fOffset + 1] = first + 1;\r\n    faces[fOffset + 2] = (first + 3) % (points - 2);\r\n\r\n    faces[fOffset + 3] = first + 0;\r\n    faces[fOffset + 4] = (first + 3) % (points - 2);\r\n    faces[fOffset + 5] = (first + 2) % (points - 2);\r\n\r\n    faces[fOffset + 6] = first + 0;\r\n    faces[fOffset + 7] = (first + 2) % (points - 2);\r\n    faces[fOffset + 8] = points - 2;\r\n\r\n    faces[fOffset + 9] = first + 1;\r\n    faces[fOffset + 10] = (first + 3) % (points - 2);\r\n    faces[fOffset + 11] = points - 1;\r\n\r\n    // Edges\r\n    edges[eOffset + 0] = first + 0;\r\n    edges[eOffset + 1] = first + 1;\r\n\r\n    edges[eOffset + 2] = first + 0;\r\n    edges[eOffset + 3] = (first + 2) % (points - 2);\r\n\r\n    edges[eOffset + 4] = first + 1;\r\n    edges[eOffset + 5] = (first + 3) % (points - 2);\r\n\r\n    edges[eOffset + 6] = first + 0;\r\n    edges[eOffset + 7] = points - 2;\r\n\r\n    edges[eOffset + 8] = first + 1;\r\n    edges[eOffset + 9] = points - 1;\r\n  }\r\n\r\n  return {\r\n    vertices: vertices,\r\n    uvs: uvs,\r\n    faces: faces,\r\n    edges: edges,\r\n    boundingRadius: Math.hypot(radius, height),\r\n  };\r\n}\r\n\r\n/**\r\n * Creates a unit cylinder geometry object.\r\n */\r\nexport function createUnitCylinder(slices: number): PrimitiveShape {\r\n  return createCylinder(1, 1, slices);\r\n}\r\n\r\n/**\r\n * Create a furstum geometry.\r\n */\r\nexport function createFrustum(fieldOfView: number, aspectRatio: number, nearClipPlane: number, farClipPlane: number): PrimitiveShape {\r\n  const tanFov = 2 * Math.tan(fieldOfView / 2);\r\n  const nearHeight = (tanFov * nearClipPlane) / 2;\r\n  const nearWidth = (nearClipPlane * aspectRatio) / 2;\r\n  const farHeight = (tanFov * farClipPlane) / 2;\r\n  const farWidth = (farClipPlane * aspectRatio) / 2;\r\n\r\n  return {\r\n    vertices: new Float32Array([\r\n      -nearWidth, -nearHeight, nearClipPlane,\r\n      -nearWidth, nearHeight, nearClipPlane,\r\n      -farWidth, -farHeight, farClipPlane,\r\n      -farWidth, farHeight, farClipPlane,\r\n      farWidth, -farHeight, farClipPlane,\r\n      farWidth, farHeight, farClipPlane,\r\n      nearWidth, -nearHeight, nearClipPlane,\r\n      nearWidth, nearHeight, nearClipPlane]),\r\n    uvs: new Float32Array([0, 0, 0, 1, 0.25, 0, 0.25, 1, 0.5, 0, 0.5, 1, 0.75, 0, 0.75, 1]),\r\n    faces: new Uint16Array([0, 1, 2, 1, 3, 2, 2, 3, 4, 3, 5, 4, 4, 5, 6, 5, 7, 6, 6, 7, 0, 7, 1, 0, 0, 2, 4, 0, 4, 6, 1, 5, 3, 1, 7, 5]),\r\n    edges: new Uint16Array([0, 1, 2, 3, 4, 5, 6, 7, 0, 2, 2, 4, 4, 6, 6, 0, 1, 3, 3, 5, 5, 7, 7, 1]),\r\n    boundingRadius: Math.hypot(farWidth, farHeight),\r\n  };\r\n}\r\n","import Attachment from '../../parsers/mdlx/attachment';\r\nimport Bone from '../../parsers/mdlx/bone';\r\nimport Camera from '../../parsers/mdlx/camera';\r\nimport CollisionShape from '../../parsers/mdlx/collisionshape';\r\nimport FaceEffect from '../../parsers/mdlx/faceeffect';\r\nimport Geoset from '../../parsers/mdlx/geoset';\r\nimport GeosetAnimation from '../../parsers/mdlx/geosetanimation';\r\nimport Helper from '../../parsers/mdlx/helper';\r\nimport Layer from '../../parsers/mdlx/layer';\r\nimport Light from '../../parsers/mdlx/light';\r\nimport Model from '../../parsers/mdlx/model';\r\nimport ParticleEmitter from '../../parsers/mdlx/particleemitter';\r\nimport ParticleEmitter2 from '../../parsers/mdlx/particleemitter2';\r\nimport ParticleEmitterPopcorn from '../../parsers/mdlx/particleemitterpopcorn';\r\nimport RibbonEmitter from '../../parsers/mdlx/ribbonemitter';\r\nimport Sequence from '../../parsers/mdlx/sequence';\r\nimport Texture from '../../parsers/mdlx/texture';\r\nimport TextureAnimation from '../../parsers/mdlx/textureanimation';\r\nimport TokenStream from '../../parsers/mdlx/tokenstream';\r\nimport { getObjectName, getObjectTypeName } from './sanitytest/utils';\r\n\r\ninterface MdlStructureNode {\r\n  name: string;\r\n  source: string;\r\n  nodes?: MdlStructureNode[];\r\n}\r\n\r\nfunction mdlObjects(stream: TokenStream, model: Model, objects: (Sequence | Layer | Texture | TextureAnimation | Geoset | GeosetAnimation | Bone | Light | Helper | Attachment | ParticleEmitter | ParticleEmitter2 | ParticleEmitterPopcorn | RibbonEmitter | Camera | CollisionShape | FaceEffect)[], out: MdlStructureNode[]): void {\r\n  if (objects.length) {\r\n    for (const [index, object] of objects.entries()) {\r\n      object.writeMdl(stream, model.version);\r\n      out.push({ name: getObjectName(object, index), source: stream.buffer });\r\n      stream.clear();\r\n    }\r\n  }\r\n}\r\n\r\nfunction mdlObjectsBlock(stream: TokenStream, model: Model, objects: (Sequence | Texture | TextureAnimation)[], out: MdlStructureNode[]): void {\r\n  if (objects.length) {\r\n    const name = getObjectTypeName(objects[0]) + 's';\r\n    const nodes = <MdlStructureNode[]>[];\r\n\r\n    mdlObjects(stream, model, objects, nodes);\r\n\r\n    model.saveStaticObjectsBlock(stream, name, objects);\r\n    out.push({ name, source: stream.buffer, nodes });\r\n    stream.clear();\r\n  }\r\n}\r\n\r\nexport default function mdlStructure(model: Model): MdlStructureNode[] {\r\n  const stream = new TokenStream();\r\n  const out = <MdlStructureNode[]>[];\r\n\r\n  model.saveVersionBlock(stream);\r\n  out.push({ name: 'Version', source: stream.buffer });\r\n  stream.clear();\r\n\r\n  model.saveModelBlock(stream);\r\n  out.push({ name: 'Model', source: stream.buffer });\r\n  stream.clear();\r\n\r\n  mdlObjectsBlock(stream, model, model.sequences, out);\r\n\r\n  if (model.globalSequences.length) {\r\n    model.saveGlobalSequenceBlock(stream);\r\n    out.push({ name: 'GlobalSequences', source: stream.buffer });\r\n    stream.clear();\r\n  }\r\n\r\n  mdlObjectsBlock(stream, model, model.textures, out);\r\n\r\n  if (model.materials.length) {\r\n    const nodes = [];\r\n\r\n    for (const [index, material] of model.materials.entries()) {\r\n      const layerNodes = <MdlStructureNode[]>[];\r\n\r\n      mdlObjects(stream, model, material.layers, layerNodes);\r\n\r\n      material.writeMdl(stream, model.version);\r\n      nodes.push({ name: `Material ${index}`, source: stream.buffer, nodes: layerNodes });\r\n      stream.clear();\r\n    }\r\n\r\n    model.saveStaticObjectsBlock(stream, 'Materials', model.materials);\r\n    out.push({ name: 'Materials', source: stream.buffer, nodes });\r\n    stream.clear();\r\n  }\r\n\r\n  mdlObjectsBlock(stream, model, model.textureAnimations, out);\r\n  mdlObjects(stream, model, model.geosets, out);\r\n  mdlObjects(stream, model, model.geosetAnimations, out);\r\n  mdlObjects(stream, model, model.bones, out);\r\n  mdlObjects(stream, model, model.lights, out);\r\n  mdlObjects(stream, model, model.helpers, out);\r\n  mdlObjects(stream, model, model.attachments, out);\r\n\r\n  if (model.pivotPoints.length) {\r\n    model.savePivotPointBlock(stream);\r\n    out.push({ name: 'PivotPoints', source: stream.buffer });\r\n    stream.clear();\r\n  }\r\n\r\n  mdlObjects(stream, model, model.particleEmitters, out);\r\n  mdlObjects(stream, model, model.particleEmitters2, out);\r\n  mdlObjects(stream, model, model.particleEmittersPopcorn, out);\r\n  mdlObjects(stream, model, model.ribbonEmitters, out);\r\n  mdlObjects(stream, model, model.cameras, out);\r\n  mdlObjects(stream, model, model.eventObjects, out);\r\n  mdlObjects(stream, model, model.collisionShapes, out);\r\n  mdlObjects(stream, model, model.faceEffects, out);\r\n\r\n  if (model.bindPose.length) {\r\n    model.saveBindPoseBlock(stream);\r\n    out.push({ name: 'BindPose', source: stream.buffer });\r\n    stream.clear();\r\n  }\r\n\r\n  return out;\r\n}\r\n","import sanityTest from './sanitytest/sanitytest';\r\nimport createPrimitive from './primitives/createprimitive';\r\nimport * as primitives from './primitives/primitives';\r\nimport mdlStructure from './mdlstructure';\r\n\r\nexport default {\r\n  sanityTest,\r\n  createPrimitive,\r\n  primitives,\r\n  mdlStructure,\r\n};\r\n","import Model from '../../../parsers/mdlx/model';\r\nimport SanityTestData, { SanityTestMessage, SanityTestNode } from './data';\r\nimport { testObjects, cleanNode } from './utils';\r\nimport { testHeader, testSequences, testGlobalSequence, testTextures, testMaterial, testGeoset, testGeosetAnimation, testBone, testLight, testAttachments, testPivotPoints, testParticleEmitter, testParticleEmitter2, testParticleEmitterPopcorn, testRibbonEmitter, testEventObject, testCamera, testFaceEffect, testBindPose } from './testers';\r\n\r\nexport interface SanityTestResult {\r\n  type: string;\r\n  nodes: (SanityTestNode | SanityTestMessage)[];\r\n  errors: number;\r\n  severe: number;\r\n  warnings: number;\r\n  unused: number;\r\n}\r\n\r\n/**\r\n * Run a sanity test on the model and return the results.\r\n */\r\nexport default function sanityTest(model: Model): SanityTestResult {\r\n  const data = new SanityTestData(model);\r\n\r\n  // Run the tests.\r\n  testHeader(data);\r\n  testSequences(data);\r\n  testObjects(data, model.globalSequences, testGlobalSequence);\r\n  testTextures(data);\r\n  testObjects(data, model.materials, testMaterial);\r\n  testObjects(data, model.textureAnimations);\r\n  testObjects(data, model.geosets, testGeoset);\r\n  testObjects(data, model.geosetAnimations, testGeosetAnimation);\r\n  testObjects(data, model.bones, testBone);\r\n  testObjects(data, model.lights, testLight);\r\n  testObjects(data, model.helpers);\r\n  testAttachments(data);\r\n  testPivotPoints(data);\r\n  testObjects(data, model.particleEmitters, testParticleEmitter);\r\n  testObjects(data, model.particleEmitters2, testParticleEmitter2);\r\n\r\n  if (model.version > 800) {\r\n    testObjects(data, model.particleEmittersPopcorn, testParticleEmitterPopcorn);\r\n  }\r\n\r\n  testObjects(data, model.ribbonEmitters, testRibbonEmitter);\r\n  testObjects(data, model.eventObjects, testEventObject);\r\n  testObjects(data, model.cameras, testCamera);\r\n  testObjects(data, model.collisionShapes);\r\n\r\n  if (model.version > 800) {\r\n    testObjects(data, model.faceEffects, testFaceEffect);\r\n    testBindPose(data);\r\n  }\r\n\r\n  const root = data.stack[0];\r\n\r\n  // Remove nodes that passed the test.\r\n  cleanNode(root);\r\n\r\n  const { nodes, errors, severe, warnings } = root;\r\n  let { unused } = root;\r\n\r\n  // Add top-level objects that are not used.\r\n  for (const node of nodes) {\r\n    if (node.type === 'node') {\r\n      if (node.uses === 0) {\r\n        unused += 1;\r\n      }\r\n    }\r\n  }\r\n\r\n  return { type: 'node', nodes, errors, severe, warnings, unused };\r\n}\r\n","import MdlxModel from '../../../parsers/mdlx/model';\r\nimport MdlxTexture from '../../../parsers/mdlx/texture';\r\nimport MdlxMaterial from '../../../parsers/mdlx/material';\r\nimport MdlxLayer, { Flags } from '../../../parsers/mdlx/layer';\r\nimport MdlxGeoset from '../../../parsers/mdlx/geoset';\r\nimport MdlxGeosetAnimation from '../../../parsers/mdlx/geosetanimation';\r\nimport MdlxBone from '../../../parsers/mdlx/bone';\r\nimport ModelViewer from '../../../viewer/viewer';\r\nimport Texture from '../../../viewer/texture';\r\nimport { PathSolver } from '../../../viewer/handlerresource';\r\nimport MdxModel from '../../../viewer/handlers/mdx/model';\r\n\r\ninterface Primitive {\r\n  vertices: Float32Array;\r\n  uvs: Float32Array;\r\n  faces: Uint16Array;\r\n  edges: Uint16Array;\r\n  boundingRadius: number;\r\n}\r\n\r\ninterface Material {\r\n  lines?: boolean;\r\n  color?: Float32Array;\r\n  texture?: Texture | Promise<Texture>;\r\n  twoSided?: boolean;\r\n}\r\n\r\nexport default function createPrimitive(viewer: ModelViewer, primitive: Primitive, material: Material): Promise<MdxModel | undefined> {\r\n  let lines: boolean | undefined;\r\n  let color: Float32Array | undefined;\r\n  let texture: Texture | Promise<Texture> | undefined;\r\n  let layerFlags = Flags.Unshaded;\r\n\r\n  if (material) {\r\n    lines = material.lines;\r\n    color = material.color;\r\n    texture = material.texture;\r\n\r\n    if (material.twoSided) {\r\n      layerFlags |= Flags.TwoSided;\r\n    }\r\n  }\r\n\r\n  const model = new MdlxModel();\r\n\r\n  // Extent\r\n  const extent = model.extent;\r\n  const r = primitive.boundingRadius;\r\n\r\n  extent.min.fill(-r);\r\n  extent.max.fill(r);\r\n  extent.boundsRadius = r;\r\n\r\n  // Texture\r\n  const tex = new MdlxTexture();\r\n\r\n  tex.path = 'PLACEHOLDER';\r\n\r\n  model.textures[0] = tex;\r\n\r\n  const pathSolver: PathSolver = (src: unknown): unknown => {\r\n    if (src === model) {\r\n      return model;\r\n    }\r\n\r\n    return texture;\r\n  };\r\n\r\n  // Material\r\n  const mat = new MdlxMaterial();\r\n\r\n  const layer = new MdlxLayer();\r\n\r\n  layer.textureId = 0;\r\n  layer.flags = layerFlags;\r\n\r\n  mat.layers[0] = layer;\r\n\r\n  model.materials[0] = mat;\r\n\r\n  // Geoset\r\n  const geoset = new MdlxGeoset();\r\n\r\n  geoset.vertices = primitive.vertices;\r\n  geoset.uvSets[0] = primitive.uvs;\r\n  geoset.matrixGroups = new Uint32Array([1]);\r\n  geoset.matrixIndices = new Uint32Array([0]);\r\n  geoset.vertexGroups = new Uint8Array(primitive.vertices.length / 3);\r\n\r\n  let faceTypeGroup = 4;\r\n  let indices = primitive.faces;\r\n\r\n  if (lines) {\r\n    faceTypeGroup = 1;\r\n    indices = primitive.edges;\r\n  }\r\n\r\n  geoset.faceTypeGroups = new Uint32Array([faceTypeGroup]);\r\n  geoset.faceGroups = new Uint32Array([indices.length]);\r\n  geoset.faces = indices;\r\n\r\n  model.geosets[0] = geoset;\r\n\r\n  // Color via a geoset animation.\r\n  if (color) {\r\n    const geosetAnimation = new MdlxGeosetAnimation();\r\n\r\n    geosetAnimation.geosetId = 0;\r\n    geosetAnimation.color = color;\r\n\r\n    model.geosetAnimations[0] = geosetAnimation;\r\n  }\r\n\r\n  // Bone - otherwise can't transform the instance.\r\n  const bone = new MdlxBone();\r\n\r\n  bone.objectId = 0;\r\n\r\n  model.bones[0] = bone;\r\n\r\n  // Load and return the promise.\r\n  return <Promise<MdxModel | undefined>>viewer.load(model, pathSolver);\r\n}\r\n","import War3Map from '../../../parsers/w3x/map';\r\nimport War3MapWtg from '../../../parsers/w3x/wtg/file';\r\nimport ECA from '../../../parsers/w3x/wtg/eca';\r\nimport SubParameters from '../../../parsers/w3x/wtg/subparameters';\r\nimport { FunctionSignature, TriggerData } from '../../../parsers/w3x/wtg/triggerdata';\r\nimport WeuData from './data';\r\n\r\nfunction typeFunctionCall(wtg: War3MapWtg, object: ECA | SubParameters, signatures: Map<string, FunctionSignature>, customTriggerData: TriggerData): void {\r\n  // If this object's signature was unknown, attempt to fill in the argument types.\r\n  // Note that this is done every time the signature is encountered.\r\n  // If a parameter's type isn't known in one call, maybe it will be known in another call.\r\n  if (signatures.has(object.name)) {\r\n    const signature = <FunctionSignature>signatures.get(object.name);\r\n    const args = signature.args;\r\n\r\n    for (const [index, parameter] of object.parameters.entries()) {\r\n      const { type, value } = parameter;\r\n\r\n      if (type === 1) {\r\n        for (const variable of wtg.variables) {\r\n          if (variable.name === value) {\r\n            args[index] = variable.type;\r\n            break;\r\n          }\r\n        }\r\n      } else if (type === 2) {\r\n        if (parameter.subParameters) {\r\n          const subParameters = parameter.subParameters;\r\n          const childSignature = customTriggerData.getFunction(subParameters.type, subParameters.name);\r\n\r\n          if (childSignature) {\r\n            const returnType = childSignature.returnType;\r\n\r\n            if (returnType && returnType !== 'AnyType') {\r\n              args[index] = returnType;\r\n            }\r\n          }\r\n        }\r\n      } else if (type === 3) {\r\n        if (value.startsWith('TRIGSTER_') || value.includes('\\\\')) {\r\n          args[index] = 'string';\r\n        } else if (value === 'true' || value === 'false') {\r\n          args[index] = 'boolean';\r\n        }  else if (!isNaN(parseFloat(value))) {\r\n          const valueAsFloat = parseFloat(value);\r\n\r\n          if (!isNaN(valueAsFloat)) {\r\n            if (Number.isInteger(valueAsFloat) && !value.includes('.')) {\r\n              args[index] = 'integer';\r\n            } else {\r\n              args[index] = 'real';\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Continue the hierarchy down any function call parameter.\r\n  for (const parameter of object.parameters) {\r\n    if (parameter.type === 2 && parameter.subParameters) {\r\n      typeFunctionCall(wtg, parameter.subParameters, signatures, customTriggerData);\r\n    }\r\n  }\r\n\r\n  // Continue the hierarchy down any ECA.\r\n  if (object instanceof ECA) {\r\n    for (const child of object.ecas) {\r\n      typeFunctionCall(wtg, child, signatures, customTriggerData);\r\n    }\r\n  }\r\n}\r\n\r\nconst BIGGEST_SIGNATURE = 20;\r\n\r\n/**\r\n * Parses a WTG file, but with a twist - it also tries to fill in unknown function signatures.\r\n * \r\n * This lets the WEU converter to handle maps with small TriggerData modifications that are unknown.\r\n * \r\n * Unfortunately it only handles simple cases - if there is an unknown signature in an unknown signature, there is no way to parse it as far as I can tell.\r\n * \r\n * With that being said, it already managed to parse and mostly fill the signatures of relevant test maps.\r\n */\r\nexport default function parseWtg(map: War3Map, customTriggerData: TriggerData, data: WeuData): War3MapWtg | undefined {\r\n  let wtg;\r\n  const signatures: Map<string, FunctionSignature> = new Map();\r\n  let currentName: string | undefined;\r\n  let currentSignature: FunctionSignature | undefined;\r\n  let searching = true;\r\n\r\n  // If there's an unknown signature exception while parsing the triggers, a new signature will be injected.\r\n  // Initially the signature starts with 0 arguments.\r\n  // The triggers are then read again.\r\n  // If there's an exception, another argument is added to the signature, and this goes on up to BIGGEST_SIGNATURE arguments. \r\n  // If there's another unknown signature exception, the current signature is considered complete.\r\n  // If the triggers are fully parsed, the current signature is considered complete.\r\n  // Note that this will not work if there is an unknown signature with a child unknown signature.\r\n  // For example, a function call given as an argument to a function call.\r\n  // This is also the case if it's not a direct child, but anywhere down the hierarchy.\r\n  // If both have unknown signatures, there is no deterministic way (that I can tell) to parse the data.\r\n  while (searching) {\r\n    try {\r\n      wtg = map.readTriggers(customTriggerData);\r\n\r\n      searching = false;\r\n    } catch (e) {\r\n      if (e instanceof Error) {\r\n        const message = e.message;\r\n\r\n        if (message.endsWith('Unknown signature')) {\r\n          const end = message.lastIndexOf('\"');\r\n          const start = message.lastIndexOf('\"', end - 1) + 1;\r\n          const nameAndType = message.slice(start, end);\r\n          const [name, type] = nameAndType.split(':');\r\n          const typeAsNumber = parseInt(type);\r\n          const signature: FunctionSignature = { args: [], scriptName: null, returnType: typeAsNumber === 3 ? 'AnyType' : null };\r\n\r\n          currentName = name.toLowerCase();\r\n          currentSignature = signature;\r\n\r\n          signatures.set(name, signature);\r\n\r\n          customTriggerData.externalFunctions[typeAsNumber][currentName] = currentSignature;\r\n        } else if (currentName && currentSignature) {\r\n          currentSignature.args.push('AnyType');\r\n\r\n          if (currentSignature.args.length > BIGGEST_SIGNATURE) {\r\n            searching = false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  if (signatures.size) {\r\n    if (wtg) {\r\n      for (const trigger of wtg.triggers) {\r\n        for (const eca of trigger.ecas) {\r\n          typeFunctionCall(wtg, eca, signatures, customTriggerData);\r\n        }\r\n      }\r\n    }\r\n\r\n    for (const [name, signature] of signatures) {\r\n      data.change('unknownsignature', `Unknown signature`, `${name}(${signature.args.join(', ')}) => ${signature.returnType ? signature.returnType : 'void'}`);\r\n    }\r\n  }\r\n\r\n  return wtg;\r\n}\r\n","import Trigger from '../../../parsers/w3x/wtg/trigger';\r\nimport ECA from '../../../parsers/w3x/wtg/eca';\r\nimport Parameter from '../../../parsers/w3x/wtg/parameter';\r\nimport SubParameters from '../../../parsers/w3x/wtg/subparameters';\r\nimport CustomTextTrigger from '../../../parsers/w3x/wct/customtexttrigger';\r\nimport { TriggerData } from '../../../parsers/w3x/wtg/triggerdata';\r\nimport War3MapWts from '../../../parsers/w3x/wts/file';\r\n\r\nexport interface WEUChange {\r\n  type: string;\r\n  reason: string;\r\n  data: string;\r\n  stack: string;\r\n}\r\n\r\nexport default class WeuData {\r\n  triggerData: TriggerData;\r\n  stringTable: War3MapWts;\r\n  preplacedObjects: Map<string, boolean> = new Map();\r\n  changes: WEUChange[] = [];\r\n  stack: (Trigger | ECA | Parameter | SubParameters)[] = [];\r\n\r\n  constructor(triggerData: TriggerData, stringTable: War3MapWts) {\r\n    this.triggerData = triggerData;\r\n    this.stringTable = stringTable;\r\n  }\r\n\r\n  push(object: Trigger | ECA | Parameter | SubParameters): void {\r\n    this.stack.unshift(object);\r\n  }\r\n\r\n  pop(): void {\r\n    this.stack.shift();\r\n  }\r\n\r\n  change(type: string, reason: string, data: string): void {\r\n    this.changes.push({ type, reason, data, stack: this.stackToString() });\r\n  }\r\n\r\n  stackToString(): string {\r\n    return this.stack.map((object) => {\r\n      if (object instanceof Parameter) {\r\n        return object.value;\r\n      } else {\r\n        return object.name;\r\n      }\r\n    }).reverse().join(' > ');\r\n  }\r\n\r\n  getTriggerName(): string {\r\n    for (const node of this.stack) {\r\n      if (node instanceof Trigger) {\r\n        return node.name;\r\n      }\r\n    }\r\n\r\n    return '';\r\n  }\r\n\r\n  /**\r\n   * Every time a reference to a preplaced object is encountered while testing the GUI, this will be called with isGUI being true.\r\n   * Every time a reference to a preplaced object is converted to custom script, this will be called with isGUI being false.\r\n   * This is used to track references that existed in GUI before the conversion, but that will be only in custom scripts afterwards.\r\n   * References that are lost due to the conversion are then added in a new trigger called PreplacedObjectReferences.\r\n   */\r\n  updateGUIReference(name: string, isGUI: boolean): void {\r\n    // For now track only units and destructibles.\r\n    // Not sure what else needs tracking.\r\n    if (name.startsWith('gg_unit') || name.startsWith('gg_dest')) {\r\n      const preplacedObjects = this.preplacedObjects;\r\n\r\n      // If the reference is already known to be used by GUI, no need to do anything.\r\n      if (!preplacedObjects.get(name)) {\r\n        preplacedObjects.set(name, isGUI);\r\n      }\r\n    }\r\n  }\r\n\r\n  saveGUIReferences(triggers: Trigger[], customTextTriggers: CustomTextTrigger[]): void {\r\n    const references = [];\r\n\r\n    // Get all of the references that are no longer references.\r\n    for (const [name, isGUI] of this.preplacedObjects) {\r\n      if (!isGUI) {\r\n        references.push(name);\r\n      }\r\n    }\r\n\r\n    // If there are indeed missing references, add them to a new trigger.\r\n    if (references.length) {\r\n      const trigger = new Trigger();\r\n      trigger.name = 'PreplacedObjectReferences';\r\n      trigger.isEnabled = 1;\r\n      trigger.isInitiallyOff = 1;\r\n\r\n      for (const reference of references) {\r\n        const eca = new ECA();\r\n        eca.type = 2;\r\n        eca.isEnabled = 1;\r\n\r\n        if (reference.startsWith('gg_unit')) {\r\n          eca.name = 'RemoveUnit';\r\n        } else if (reference.startsWith('gg_dest')) {\r\n          eca.name = 'RemoveDestructable';\r\n        }\r\n\r\n        const parameter = new Parameter();\r\n        parameter.type = 1;\r\n        parameter.value = reference;\r\n\r\n        eca.parameters[0] = parameter;\r\n\r\n        trigger.ecas.push(eca);\r\n      }\r\n\r\n      triggers.push(trigger);\r\n      customTextTriggers.push(new CustomTextTrigger());\r\n\r\n      this.change('references', 'Saved references to preplaced objects lost due to conversions', references.join('\\n'));\r\n    }\r\n  }\r\n}\r\n","import { byteLengthUtf8, splitUtf8ByteLength } from '../../../common/utf8';\r\nimport ECA from '../../../parsers/w3x/wtg/eca';\r\nimport Parameter from '../../../parsers/w3x/wtg/parameter';\r\nimport SubParameters from '../../../parsers/w3x/wtg/subparameters';\r\n\r\n/**\r\n * Creates a new Custom Script or comment ECA with the given data.\r\n */\r\nexport function createCustomScriptOrCommentECA(data: string, isComment: boolean): ECA {\r\n  const eca = new ECA();\r\n\r\n  eca.type = 2; // Action\r\n\r\n  if (isComment) {\r\n    eca.name = 'CommentString';\r\n  } else {\r\n    eca.name = 'CustomScriptCode';\r\n  }\r\n\r\n  eca.isEnabled = 1;\r\n\r\n  const parameter = new Parameter();\r\n\r\n  parameter.type = 3; // String\r\n  parameter.value = data;\r\n\r\n  eca.parameters[0] = parameter;\r\n\r\n  return eca;\r\n}\r\n\r\n/**\r\n * Creates a new Custom Script ECA with the given script.\r\n */\r\nexport function createCustomScriptECA(script: string): ECA {\r\n  return createCustomScriptOrCommentECA(script, false);\r\n}\r\n\r\n// /**\r\n//  * Creates a new comment ECA with the given comment.\r\n//  */\r\n// function createCommentECA(comment: string) {\r\n//   return createCustomScriptOrCommentECA(comment, true);\r\n// }\r\n\r\nfunction subParametersToEca(subParameters: SubParameters, group: number): ECA {\r\n  const eca = new ECA();\r\n\r\n  eca.name = subParameters.name;\r\n  eca.type = subParameters.type;\r\n  eca.group = group;\r\n  eca.isEnabled = 1;\r\n  eca.parameters.push(...subParameters.parameters);\r\n\r\n  return eca;\r\n}\r\n\r\nexport function convertSingleToMultiple(eca: ECA): boolean {\r\n  if (eca.name === 'IfThenElse') {\r\n    const parameters = eca.parameters;\r\n    const ifParam = subParametersToEca(<SubParameters>parameters[0].subParameters, 0);\r\n    const thenParam = subParametersToEca(<SubParameters>parameters[1].subParameters, 1);\r\n    const elseParam = subParametersToEca(<SubParameters>parameters[2].subParameters, 2);\r\n\r\n    eca.name = 'IfThenElseMultiple';\r\n    eca.parameters.length = 0;\r\n    eca.ecas.push(ifParam, thenParam, elseParam);\r\n\r\n    return true;\r\n  } else if (eca.name === 'ForGroup' || eca.name === 'ForForce') {\r\n    const action = subParametersToEca(<SubParameters>eca.parameters[1].subParameters, 0);\r\n\r\n    eca.name = `${eca.name}Multiple`;\r\n    eca.parameters.length = 1;\r\n    eca.ecas.push(action);\r\n\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n/**\r\n * Given the name of the parent of some child ECA, and the child's group, determine if it's a condition.\r\n */\r\nexport function isConditionECA(name: string, group: number): boolean {\r\n  if (group !== 0) {\r\n    return false;\r\n  }\r\n\r\n  return name === 'AndMultiple' || name === 'OrMultiple' || name === 'IfThenElseMultiple';\r\n}\r\n\r\n// The number of bytes that each custom script action can contain.\r\nconst SCRIPT_LINE_LENGTH = 239;\r\n\r\n/**\r\n * CustomScriptCode ECAs have a maximum length for their (typically) string parameter.\r\n * If the script length exceeds the maximum length, WE will fail to load the map properly.\r\n * Either it crashes, or it loads the map and GUI up until the invalid ECA, after which everything is an error.\r\n * This function is used to split such ECAs.\r\n * Splitting is possible, because the Jass parser seems to not consider multiline comments as token delimiters.\r\n * For example, the following lines:\r\n * \r\n *   call BJDebug/*\r\n *   /*Msg(\"hi\")\r\n * \r\n * When compiled result in the correct call:\r\n * \r\n *   call BJDebugMsg(\"hi\")\r\n */\r\nexport function ensureCustomScriptCodeSafety(ecas: ECA[]): ECA[] {\r\n  const outputEcas = [];\r\n\r\n  for (const eca of ecas) {\r\n    if (eca.name === 'CustomScriptCode') {\r\n      const script = eca.parameters[0].value;\r\n      const scriptByteLength = byteLengthUtf8(script);\r\n\r\n      if (scriptByteLength > SCRIPT_LINE_LENGTH) {\r\n        const chunks = splitUtf8ByteLength(script, SCRIPT_LINE_LENGTH);\r\n        const lines = chunks.length;\r\n        const lastLine = lines - 1;\r\n\r\n        for (let i = 0; i < lines; i++) {\r\n          let text = '';\r\n\r\n          // If this is not the first line, end the previous line's comment.\r\n          if (i > 0) {\r\n            text += '*/';\r\n          }\r\n\r\n          text += chunks[i];\r\n\r\n          // If this is not the last line, start a new comment.\r\n          if (i < lastLine) {\r\n            text += '/*';\r\n          }\r\n\r\n          const customScript = createCustomScriptECA(text);\r\n\r\n          customScript.group = eca.group;\r\n\r\n          outputEcas.push(customScript);\r\n        }\r\n      } else {\r\n        outputEcas.push(eca);\r\n      }\r\n    } else {\r\n      outputEcas.push(eca);\r\n    }\r\n  }\r\n\r\n  return outputEcas;\r\n}\r\n\r\n/**\r\n * Given a name, converts all of the non-ASCII characters and space characters to underlines.\r\n */\r\nexport function ensureNameSafety(name: string): string {\r\n  // Convert non-ASCII characters to underlines, for locales other than en.\r\n  return name.split('').map((c) => c.charCodeAt(0) > 127 ? '_' : c).join('').replace(/\\s/g, '_');\r\n}\r\n","import Trigger from '../../../parsers/w3x/wtg/trigger';\r\nimport ECA from '../../../parsers/w3x/wtg/eca';\r\nimport Parameter from '../../../parsers/w3x/wtg/parameter';\r\nimport SubParameters from '../../../parsers/w3x/wtg/subparameters';\r\nimport WeuData from './data';\r\nimport { createCustomScriptECA, ensureNameSafety } from './utils';\r\n\r\n/**\r\n * A list of vanilla operators that take 3 parameters.\r\n * The only one not here, which takes 2 parameters, is OperatorString.\r\n */\r\nconst OPERATOR_NAMES = new Set([\r\n  'OperatorCompareBoolean',\r\n  'OperatorCompareAbilityId',\r\n  'OperatorCompareBuffId',\r\n  'OperatorCompareDestructible',\r\n  'OperatorCompareDestructableCode',\r\n  'OperatorCompareButton',\r\n  'OperatorCompareGameDifficulty',\r\n  'OperatorCompareGameSpeed',\r\n  'OperatorCompareHeroSkill',\r\n  'OperatorCompareInteger',\r\n  'OperatorCompareItem',\r\n  'OperatorCompareItemType',\r\n  'OperatorCompareItemCode',\r\n  'OperatorCompareMouseButton',\r\n  'OperatorCompareMeleeDifficulty',\r\n  'OperatorCompareOrderCode',\r\n  'OperatorComparePlayer',\r\n  'OperatorComparePlayerColor',\r\n  'OperatorComparePlayerControl',\r\n  'OperatorComparePlayerSlotStatus',\r\n  'OperatorCompareRace',\r\n  'OperatorCompareReal',\r\n  'OperatorCompareString',\r\n  'OperatorCompareTechCode',\r\n  'OperatorCompareTerrainType',\r\n  'OperatorCompareTrigger',\r\n  'OperatorCompareUnit',\r\n  'OperatorCompareUnitCode',\r\n  'OperatorInt',\r\n  'OperatorReal',\r\n]);\r\n\r\n/**\r\n * A list of vanilla functions which have an implicit code parameter.\r\n * The control flow \"functions\" such as IfThenElseMultiple and ForLoopAMultiple are handled specifically.\r\n */\r\nconst HAS_IMPLICIT_CODE = new Set([\r\n  'EnumDestructablesInRectAllMultiple',\r\n  'EnumDestructablesInCircleBJMultiple',\r\n  'EnumItemsInRectBJMultiple',\r\n  'ForForceMultiple',\r\n  'ForGroupMultiple',\r\n]);\r\n\r\n/**\r\n * Converts a Trigger to a custom script string.\r\n * Callbacks that are generated due to the conversion are added to the input callbacks array.\r\n */\r\nexport function convertTrigger(data: WeuData, trigger: Trigger, callbacks: string[]): string {\r\n  const name = ensureNameSafety(trigger.name);\r\n  const events = [];\r\n  const conditions = [];\r\n  const actions = [];\r\n\r\n  // Separate the events/conditions/actions.\r\n  for (const eca of trigger.ecas) {\r\n    if (eca.type === 0) {\r\n      events.push(eca);\r\n    } else if (eca.type === 1) {\r\n      conditions.push(eca);\r\n    } else {\r\n      actions.push(eca);\r\n    }\r\n  }\r\n\r\n  const functions = [];\r\n\r\n  if (events.length || conditions.length || actions.length) {\r\n    const initBody = [];\r\n    const conditionsBody = [];\r\n    const actionsBody = [];\r\n\r\n    // Reference the global trigger that WE generates.\r\n    const triggerName = `gg_trg_${name}`;\r\n\r\n    // Events don't explicitly define the trigger parameter.\r\n    // Therefore it is created here, and prepended below to the parameters of each event.\r\n    const triggerParameter = new Parameter();\r\n    triggerParameter.type = 3;\r\n    triggerParameter.value = triggerName;\r\n\r\n    initBody.push(`set ${triggerName} = CreateTrigger()`);\r\n\r\n    // Convert the events.\r\n    for (const event of events) {\r\n      event.parameters.unshift(triggerParameter);\r\n\r\n      for (const eca of convertFunctionCall(data, event, callbacks)) {\r\n        initBody.push(eca.parameters[0].value);\r\n      }\r\n    }\r\n\r\n    // Convert the conditions.\r\n    if (conditions.length) {\r\n      initBody.push(`call TriggerAddCondition(${triggerName}, Condition(function Trig_${name}_Conditions)`);\r\n\r\n      for (const condition of conditions) {\r\n        for (const eca of convertFunctionCall(data, condition, callbacks)) {\r\n          conditionsBody.push(`if ${eca.parameters[0].value} then\\r\\n return true\\r\\nendif`);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Convert the actions.\r\n    if (actions.length) {\r\n      initBody.push(`call TriggerAddAction(${triggerName}, function Trig_${name}_Actions)`);\r\n\r\n      for (const action of actions) {\r\n        for (const eca of convertFunctionCall(data, action, callbacks)) {\r\n          actionsBody.push(eca.parameters[0].value);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Add the actions function.\r\n    if (actionsBody.length) {\r\n      functions.push(`function Trig_${name}_Actions takes nothing returns nothing\\r\\n${actionsBody.join('\\r\\n')}\\r\\nendfunction`);\r\n    }\r\n\r\n    // Add the conditions function.\r\n    if (conditionsBody.length) {\r\n      functions.push(`function Trig_${name}_Conditions takes nothing returns boolean\\r\\n${conditionsBody.join('\\r\\n')}\\r\\nreturn false\\r\\nendfunction`);\r\n    }\r\n\r\n    // Add the initalization function.\r\n    functions.push(`function InitTrig_${name} takes nothing returns nothing\\r\\n${initBody.join('\\r\\n')}\\r\\nendfunction`);\r\n  }\r\n\r\n  // Finally, return the whole trigger as Jass.\r\n  return functions.join('\\r\\n');\r\n}\r\n\r\n/**\r\n * Converts an ECA or SubParameters to an array of custom script ECAs.\r\n * Callbacks that are generated due to the conversion are added to the input callbacks array.\r\n */\r\nexport function convertFunctionCall(data: WeuData, object: ECA | SubParameters, callbacks: string[]): ECA[] {\r\n  const name = object.name;\r\n  const ecas: string[] = [];\r\n  const parameters = object.parameters;\r\n  const signature = data.triggerData.getFunction(object.type, object.name);\r\n\r\n  if (!signature) {\r\n    throw new Error(`Could not find a function signature: ${name}. Stack: ${data.stackToString()}`);\r\n  }\r\n\r\n  let { args, scriptName } = signature;\r\n  const argCount = args.length;\r\n  let isCode = false;\r\n  let isBoolexpr = false;\r\n  let isScriptCode = false;\r\n  const ecaObject = <ECA>object; // Get correct typing for the cases where the object is known to be an ECA.\r\n\r\n  scriptName = scriptName || object.name;\r\n\r\n  if (argCount) {\r\n    const lastArg = args[argCount - 1];\r\n\r\n    if (lastArg === 'code' || HAS_IMPLICIT_CODE.has(name)) {\r\n      isCode = true;\r\n    } else if (lastArg === 'boolexpr') {\r\n      isBoolexpr = true;\r\n    } else if (lastArg === 'scriptcode') {\r\n      isScriptCode = true;\r\n    }\r\n  }\r\n\r\n  // IfThenElse and other control flow \"functions\" must come before the generic code/boolexpr callback handling, since they don't follow the same rules.\r\n  if (name === 'IfThenElse') {\r\n    ecas.push(`if ${convertParameter(data, parameters[0], args[0], callbacks)} then`);\r\n    ecas.push(`call ${convertParameter(data, parameters[1], args[1], callbacks)}`);\r\n    ecas.push('else');\r\n    ecas.push(`call ${convertParameter(data, parameters[2], args[2], callbacks)}`);\r\n    ecas.push('endif');\r\n  } else if (name === 'OrMultiple') {\r\n    ecas.push(ecaObject.ecas.slice().map((eca) => convertFunctionCall(data, eca, callbacks).map((eca) => eca.parameters[0].value)).join(' or '));\r\n  } else if (name === 'AndMultiple') {\r\n    ecas.push(ecaObject.ecas.slice().map((eca) => convertFunctionCall(data, eca, callbacks).map((eca) => eca.parameters[0].value)).join(' and '));\r\n  } else if (name === 'ForLoopAMultiple' || name === 'ForLoopBMultiple' || name === 'ForLoopVarMultiple') {\r\n    let loopName = 'A';\r\n\r\n    if (name === 'ForLoopBMultiple') {\r\n      loopName = 'B';\r\n    } else if (name === 'ForLoopVarMultiple') {\r\n      loopName = 'Var';\r\n    }\r\n\r\n    let index;\r\n\r\n    if (loopName === 'A' || loopName === 'B') {\r\n      index = `bj_forLoop${loopName}Index`;\r\n\r\n      const indexEnd = `${index}End`;\r\n\r\n      ecas.push(`set ${index} = ${convertParameter(data, parameters[0], args[0], callbacks)}`);\r\n      ecas.push(`set ${indexEnd} = ${convertParameter(data, parameters[1], args[1], callbacks)}`);\r\n      ecas.push('loop');\r\n      ecas.push(`exitwhen ${index} > ${indexEnd}`);\r\n    } else {\r\n      index = convertParameter(data, parameters[0], args[0], callbacks);\r\n\r\n      ecas.push(`set ${index} = ${convertParameter(data, parameters[1], args[1], callbacks)}`);\r\n      ecas.push('loop');\r\n      ecas.push(`exitwhen ${index} > ${convertParameter(data, parameters[2], args[2], callbacks)}`);\r\n    }\r\n\r\n    for (const action of ecaObject.ecas) {\r\n      const replacements = convertFunctionCall(data, action, callbacks);\r\n\r\n      for (const replacement of replacements) {\r\n        ecas.push(`${replacement.parameters[0].value}`);\r\n      }\r\n    }\r\n\r\n    ecas.push(`set ${index} = ${index} + 1`);\r\n    ecas.push('endloop');\r\n  } else if (name === 'IfThenElseMultiple') {\r\n    let condition;\r\n    const thenActions = [];\r\n    const elseActions = [];\r\n\r\n    for (const eca of ecaObject.ecas) {\r\n      if (eca.group === 0) {\r\n        condition = eca;\r\n      } else if (eca.group === 1) {\r\n        thenActions.push(eca);\r\n      } else if (eca.group === 2) {\r\n        elseActions.push(eca);\r\n      }\r\n    }\r\n\r\n    if (condition) {\r\n      ecas.push(`if ${convertFunctionCall(data, condition, callbacks)[0].parameters[0].value} then`);\r\n    }\r\n\r\n    for (const action of thenActions) {\r\n      const replacements = convertFunctionCall(data, action, callbacks);\r\n\r\n      for (const replacement of replacements) {\r\n        ecas.push(`${replacement.parameters[0].value}`);\r\n      }\r\n    }\r\n\r\n    if (elseActions.length) {\r\n      ecas.push('else');\r\n\r\n      for (const action of elseActions) {\r\n        const replacements = convertFunctionCall(data, action, callbacks);\r\n\r\n        for (const replacement of replacements) {\r\n          ecas.push(`${replacement.parameters[0].value}`);\r\n        }\r\n      }\r\n    }\r\n\r\n    ecas.push('endif');\r\n  } else if (isCode || isBoolexpr) {\r\n    const triggerName = data.getTriggerName();\r\n    const callbackName = `Trig_${ensureNameSafety(triggerName)}_Func${callbacks.length}`;\r\n    let call = `function ${callbackName}`;\r\n    let returnType = 'nothing';\r\n    let callOrReturn = 'call';\r\n    let lastParam = parameters.length - 1;\r\n    const isMultiple = object.name.endsWith('Multiple');\r\n\r\n    if (isBoolexpr) {\r\n      call = `Filter(${call})`;\r\n      returnType = 'boolean';\r\n      callOrReturn = 'return';\r\n    }\r\n\r\n    if (isMultiple) {\r\n      lastParam = parameters.length;\r\n    }\r\n\r\n    // The callback names are based on where they are in the callback array.\r\n    // This breaks when one of the convert functions below need to create more callbacks before actually adding this one to the callbacks array.\r\n    // To solve this, add a placeholder and save the index, and then use the index after converting everything.\r\n    const callbackIndex = callbacks.length;\r\n    callbacks[callbackIndex] = 'NOTHING';\r\n\r\n    const callParams = [...parameters.slice(0, lastParam).map((value, index) => convertParameter(data, value, args[index], callbacks)), call];\r\n\r\n    if (object instanceof ECA) {\r\n      ecas.push(`call ${scriptName}(${callParams.join(', ')})`);\r\n    } else {\r\n      ecas.push(`${scriptName}(${callParams.join(', ')})`);\r\n    }\r\n\r\n    let body;\r\n\r\n    if (isMultiple) {\r\n      body = ecaObject.ecas.map((eca) => convertFunctionCall(data, eca, callbacks).map((customScript) => customScript.parameters[0].value).join('\\r\\n')).join('\\r\\n');\r\n    } else {\r\n      body = `${callOrReturn} ${convertParameter(data, parameters[lastParam], args[lastParam], callbacks)}`;\r\n    }\r\n\r\n    // Now use the callback index and replace the placeholder.\r\n    callbacks[callbackIndex] = `function ${callbackName} takes nothing returns ${returnType}\\r\\n${body}\\r\\nendfunction`;\r\n  } else if (isScriptCode) {\r\n    ecas.push(convertParameter(data, ecaObject.parameters[0], 'scriptcode', callbacks));\r\n  } else if (name === 'SetVariable') {\r\n    ecas.push(`set ${convertParameter(data, parameters[0], args[0], callbacks)} = ${convertParameter(data, parameters[1], args[1], callbacks)}`);\r\n  } else if (name === 'OperatorString') { // String concat\r\n    ecas.push(`${convertParameter(data, parameters[0], args[0], callbacks)} + ${convertParameter(data, parameters[1], args[1], callbacks)}`);\r\n  } else if (OPERATOR_NAMES.has(name)) { // All other operators\r\n    ecas.push(`${convertParameter(data, parameters[0], args[0], callbacks)} ${convertParameter(data, parameters[1], args[1], callbacks)} ${convertParameter(data, parameters[2], args[2], callbacks)}`);\r\n  } else if (name === 'CommentString') { // Comment\r\n    ecas.push(`// ${parameters[0].value}`);\r\n  } else if (name === 'GetBooleanAnd') {\r\n    ecas.push(`(${convertParameter(data, parameters[0], args[0], callbacks)} and ${convertParameter(data, parameters[1], args[1], callbacks)})`);\r\n  } else if (name === 'GetBooleanOr') {\r\n    ecas.push(`(${convertParameter(data, parameters[0], args[0], callbacks)} or ${convertParameter(data, parameters[1], args[1], callbacks)})`);\r\n  } else if (object instanceof ECA) {\r\n    // If this is a trigger event, there is the implicit trigger parameter at the beginning.\r\n    if (object.type === 0) {\r\n      args = ['trigger', ...args];\r\n    }\r\n\r\n    ecas.push(`call ${scriptName}(${parameters.map((value, index) => convertParameter(data, value, args[index], callbacks)).join(', ')})`);\r\n  } else if (object instanceof SubParameters) {\r\n    ecas.push(`${scriptName}(${parameters.map((value, index) => convertParameter(data, value, args[index], callbacks)).join(', ')})`);\r\n  }\r\n\r\n  return ecas.map((eca) => createCustomScriptECA(eca));\r\n}\r\n\r\n/**\r\n * Converts a parameter to custom script.\r\n * Callbacks that are generated due to the conversion are added to the input callbacks array.\r\n */\r\nexport function convertParameter(data: WeuData, parameter: Parameter, dataType: string, callbacks: string[]): string {\r\n  const { type, value } = parameter;\r\n\r\n  if (type === 0) {\r\n    const preset = data.triggerData.getPreset(value);\r\n\r\n    if (preset === undefined) {\r\n      throw new Error(`Failed to find a preset: \"${value}\"`);\r\n    }\r\n\r\n    return preset;\r\n  } else if (type === 1) {\r\n    if (value.startsWith('gg_')) {\r\n      // Used to track global generated variables and their status.\r\n      data.updateGUIReference(value, false);\r\n\r\n      return value;\r\n    } else {\r\n      let global = `udg_${value}`;\r\n\r\n      if (parameter.isArray && parameter.arrayIndex) {\r\n        global += `[${convertParameter(data, parameter.arrayIndex, 'integer', callbacks)}]`;\r\n      }\r\n\r\n      return global;\r\n    }\r\n  } else if (parameter.type === 2) {\r\n    return convertFunctionCall(data, <SubParameters>parameter.subParameters, callbacks)[0].parameters[0].value;\r\n  } else if (parameter.type === 3) {\r\n    const baseType = data.triggerData.getBaseType(dataType);\r\n\r\n    // \"value\"\r\n    // scriptcode needs to be converted as-is, and doesn't need quotes.\r\n    if (baseType === 'string' && dataType !== 'scriptcode') {\r\n      // Inline string table entries.\r\n      if (value.startsWith('TRIGSTR') && data.stringTable) {\r\n        const string = data.stringTable.getString(value);\r\n\r\n        if (string !== undefined) {\r\n          return `\"${string.replace(/\\r\\n/g, '\\\\r\\n')}\"`;\r\n        } else {\r\n          data.change('missingstring', 'Entry not found in the string table', value);\r\n        }\r\n      }\r\n\r\n      return `\"${value.replace(/\\\\/g, '\\\\\\\\')}\"`;\r\n    }\r\n\r\n    // 'value'\r\n    if (baseType === 'integer' && isNaN(parseInt(value))) {\r\n      return `'${value}'`;\r\n    }\r\n\r\n    // value\r\n    return value;\r\n  } else {\r\n    return '';\r\n  }\r\n}\r\n\r\n/**\r\n * Convert a parameter to a custom script string, discarding any generated callbacks.\r\n */\r\nexport function convertParameterInline(data: WeuData, parameter: Parameter, dataType: string): string {\r\n  return convertParameter(data, parameter, dataType, []);\r\n}\r\n","import ECA from '../../../../parsers/w3x/wtg/eca';\r\nimport Parameter from '../../../../parsers/w3x/wtg/parameter';\r\nimport SubParameters from '../../../../parsers/w3x/wtg/subparameters';\r\nimport WeuData from '../data';\r\nimport { convertParameterInline } from '../conversions';\r\n\r\ntype WEUTransformerTest = [number, string];\r\n\r\ntype WEUTransformerOp = [number, '+' | '-' | '*' | '/', number];\r\n\r\ntype WEUTransformerParameter = number | string | WEUTransformerOp;\r\n\r\ninterface WEUTransformerTransformation {\r\n  test?: WEUTransformerTest;\r\n  tests?: WEUTransformerTest[];\r\n  parameters?: WEUTransformerParameter[];\r\n}\r\n\r\ninterface WEUTransformerTransformations {\r\n  [keyof: string]: WEUTransformerTransformation | WEUTransformerTransformation[];\r\n}\r\n\r\nfunction runTests(data: WeuData, object: ECA | SubParameters, args: string[], mapping: WEUTransformerTransformation, convertedParameters: string[]): boolean {\r\n  const parameters = object.parameters;\r\n  const tests = [];\r\n\r\n  if (mapping.test) {\r\n    tests.push(mapping.test);\r\n  }\r\n\r\n  if (mapping.tests) {\r\n    tests.push(...mapping.tests);\r\n  }\r\n\r\n  for (const [index, value] of tests) {\r\n    // Convert and cache the parameter.\r\n    if (convertedParameters[index] === undefined) {\r\n      convertedParameters[index] = convertParameterInline(data, parameters[index], args[index]);\r\n    }\r\n\r\n    if (value !== convertedParameters[index]) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\nfunction setNameAndType(data: WeuData, object: ECA | SubParameters, name: string): void {\r\n  object.name = name;\r\n  object.type = data.triggerData.getFunctionType(name);\r\n\r\n  if (object instanceof SubParameters) {\r\n    const parameter = <Parameter>data.stack[1];\r\n\r\n    parameter.value = name;\r\n  }\r\n}\r\n\r\nfunction setParameters(data: WeuData, object: ECA | SubParameters, args: string[], mapping: WEUTransformerTransformation): void {\r\n  if (mapping.parameters) {\r\n    const parameters = object.parameters;\r\n\r\n    object.parameters = mapping.parameters.map((value) => {\r\n      if (typeof value === 'number') {\r\n        return parameters[value];\r\n      } else if (typeof value === 'string') {\r\n        const parameter = new Parameter();\r\n\r\n        if (data.triggerData.getPreset(value)) {\r\n          parameter.type = 0;\r\n        } else {\r\n          parameter.type = 3;\r\n        }\r\n\r\n        parameter.value = value;\r\n\r\n        return parameter;\r\n      } else {\r\n        const whichParameter = value[0];\r\n        const whichOperator = value[1];\r\n        const operandValue = value[2];\r\n        const argType = args[whichParameter];\r\n        let typedFunction;\r\n        let mathOp;\r\n\r\n        if (argType === 'integer') {\r\n          typedFunction = 'OperatorInt';\r\n        } else if (argType === 'real') {\r\n          typedFunction = 'OperatorReal';\r\n        } else {\r\n          throw new Error(`Attempted to use an operator on a non-number parameter of type \"${argType}`);\r\n        }\r\n\r\n        if (whichOperator === '+') {\r\n          mathOp = 'OperatorAdd';\r\n        } else if (whichOperator === '-') {\r\n          mathOp = 'OperatorSubtract';\r\n        } else if (whichOperator === '*') {\r\n          mathOp = 'OperatorMultiply';\r\n        } else {\r\n          mathOp = 'OperatorDivide';\r\n        }\r\n\r\n        const parameter = new Parameter();\r\n\r\n        parameter.value = typedFunction;\r\n        parameter.type = 2;\r\n\r\n        const subParameters = new SubParameters();\r\n\r\n        subParameters.name = typedFunction;\r\n        subParameters.type = 3;\r\n\r\n        const operandA = parameters[whichParameter];\r\n\r\n        const operator = new Parameter();\r\n\r\n        operator.type = 0;\r\n        operator.value = mathOp;\r\n\r\n        const operandB = new Parameter();\r\n\r\n        operandB.type = 3;\r\n        operandB.value = `${operandValue}`;\r\n\r\n        subParameters.beginParameters = 1;\r\n        subParameters.parameters = [operandA, operator, operandB];\r\n\r\n        parameter.subParameters = subParameters;\r\n\r\n        return parameter;\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport default function transformer(transformations: WEUTransformerTransformations) {\r\n  return function (data: WeuData, object: ECA | SubParameters): boolean {\r\n    // The signature for the input (to be replaced) function.\r\n    const signature = data.triggerData.getFunction(object.type, object.name);\r\n\r\n    // This can happen if there is a transformer that is implemented, however it's not found in the custom TriggerData.txt\r\n    // Perhaps it will be worthwhile in the future to also query the signature from common.j, however that's an extra download etc.\r\n    // For now I am going to assume the used YDWE TriggerData.txt exposes more or less everything.\r\n    if (!signature) {\r\n      console.warn(`transformer failed to get the signature for the input function: ${object.name}`);\r\n\r\n      return false;\r\n    }\r\n\r\n    const args = signature.args;\r\n\r\n    // A cache for converted parameters.\r\n    // If there are multiple transformations, or transformations with multiple mappings, usually they branch on the same parameter(s).\r\n    // The first time a parameter is tested, it will be converted, and stored here.\r\n    // The next time it is tested, it will be fetched directly.\r\n    const convertedParameters: string[] = [];\r\n\r\n    for (const [name, mappings] of Object.entries(transformations)) {\r\n      let mappingAsArray;\r\n\r\n      if (Array.isArray(mappings)) {\r\n        mappingAsArray = mappings;\r\n      } else {\r\n        mappingAsArray = [mappings];\r\n      }\r\n\r\n      for (const mapping of mappingAsArray) {\r\n        if (runTests(data, object, args, mapping, convertedParameters)) {\r\n          setNameAndType(data, object, name);\r\n          setParameters(data, object, args, mapping);\r\n\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n\r\n    return false;\r\n  };\r\n}\r\n\r\nexport type Transformer = ReturnType<typeof transformer>;\r\n","import ECA from '../../../../parsers/w3x/wtg/eca';\r\nimport Parameter from '../../../../parsers/w3x/wtg/parameter';\r\nimport SubParameters from '../../../../parsers/w3x/wtg/subparameters';\r\nimport WeuData from '../data';\r\nimport { convertParameterInline } from '../conversions';\r\n\r\n/**\r\n * IsUnitOwnedByPlayer(whichUnit, whichPlayer) == boolean\r\n * =>\r\n * GetOwningPlayer(whichUnit) == whichPlayer\r\n */\r\nexport function transformerIsUnitOwnedByPlayer(data: WeuData, object: ECA | SubParameters): boolean {\r\n  const parameter = <Parameter>data.stack[1];\r\n  const comparator = <ECA>data.stack[2];\r\n  const comparatorParameters = comparator.parameters;\r\n\r\n  if (comparator.name !== 'OperatorCompareBoolean') {\r\n    return false;\r\n  }\r\n\r\n  let otherParameter;\r\n\r\n  if (comparator.parameters[0] === parameter) {\r\n    otherParameter = comparatorParameters[2];\r\n  } else {\r\n    otherParameter = comparatorParameters[0];\r\n  }\r\n\r\n  const trueOrFalse = convertParameterInline(data, otherParameter, 'boolean');\r\n\r\n  if (trueOrFalse !== 'true' && trueOrFalse !== 'false') {\r\n    return false;\r\n  }\r\n\r\n  // Change to a player comparison.\r\n  comparator.name = 'OperatorComparePlayer';\r\n\r\n  const parameters = object.parameters;\r\n  const whichPlayer = parameters[1];\r\n\r\n  // Change IsUnitOwnedByPlayer(whichUnit, whichPlayer) to GetOwningPlayer(whichUnit)\r\n  parameter.value = 'GetOwningPlayer';\r\n\r\n  object.name = 'GetOwningPlayer';\r\n  object.parameters.length = 1;\r\n\r\n  comparatorParameters[0] = parameter;\r\n\r\n  // Equal or not equal.\r\n  if (trueOrFalse === 'true') {\r\n    comparatorParameters[1].value = 'OperatorEqualENE';\r\n  } else {\r\n    comparatorParameters[1].value = 'OperatorNotEqualENE';\r\n  }\r\n\r\n  // Change the boolean to whichPlayer.\r\n  comparatorParameters[2] = whichPlayer;\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * IsUnitRace(whichUnit, whichRace) == boolean\r\n * =>\r\n * GetUnitRace(whichUnit) == whichRace\r\n */\r\nexport function transformerIsUnitRace(data: WeuData, object: ECA | SubParameters): boolean {\r\n  const parameter = <Parameter>data.stack[1];\r\n  const comparator = <ECA>data.stack[2];\r\n  const comparatorParameters = comparator.parameters;\r\n\r\n  if (comparator.name !== 'OperatorCompareBoolean') {\r\n    return false;\r\n  }\r\n\r\n  let otherParameter;\r\n\r\n  if (comparator.parameters[0] === parameter) {\r\n    otherParameter = comparatorParameters[2];\r\n  } else {\r\n    otherParameter = comparatorParameters[0];\r\n  }\r\n\r\n  const trueOrFalse = convertParameterInline(data, otherParameter, 'boolean');\r\n\r\n  if (trueOrFalse !== 'true' && trueOrFalse !== 'false') {\r\n    return false;\r\n  }\r\n\r\n  // Change to a race comparison.\r\n  comparator.name = 'OperatorCompareRace';\r\n\r\n  const parameters = object.parameters;\r\n  const whichRace = parameters[1];\r\n\r\n  // Change IsUnitRace(whichUnit, whichRace) to GetUnitRace(whichUnit)\r\n  parameter.value = 'GetUnitRace';\r\n\r\n  object.name = 'GetUnitRace';\r\n  object.parameters.length = 1;\r\n\r\n  comparatorParameters[0] = parameter;\r\n\r\n  const isEqual = comparatorParameters[1].value === 'OperatorEqualENE';\r\n  const isTrue = trueOrFalse === 'true';\r\n\r\n  // Essentially a XOR between the booleans.\r\n  if (isEqual === isTrue) {\r\n    comparatorParameters[1].value = 'OperatorEqualENE';\r\n  } else {\r\n    comparatorParameters[1].value = 'OperatorNotEqualENE';\r\n  }\r\n\r\n  comparatorParameters[1] = whichRace;\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * IsUnitType(whichUnit, UNIT_TYPE_DEAD) == boolean\r\n * =>\r\n * IsUnitDeadBJ(whichUnit) == boolean\r\n */\r\nexport function transformerIsUnitType(data: WeuData, object: ECA | SubParameters): boolean {\r\n  const comparator = <ECA>data.stack[2];\r\n\r\n  if (comparator.name !== 'OperatorCompareBoolean') {\r\n    return false;\r\n  }\r\n\r\n  const whichUnitType = convertParameterInline(data, object.parameters[1], 'unittype');\r\n\r\n  if (whichUnitType !== 'UNIT_TYPE_DEAD') {\r\n    return false;\r\n  }\r\n\r\n  const parameter = <Parameter>data.stack[1];\r\n\r\n  // Change IsUnitType(whichUnit, UNIT_TYPE_DEAD) to IsUnitDeadBJ(whichUnit)\r\n  parameter.value = 'IsUnitDeadBJ';\r\n\r\n  object.name = 'IsUnitDeadBJ';\r\n  object.parameters.length = 1;\r\n\r\n  return true;\r\n}\r\n","import ECA from '../../../../parsers/w3x/wtg/eca';\r\nimport SubParameters from '../../../../parsers/w3x/wtg/subparameters';\r\nimport WeuData from '../data';\r\nimport transformer, { Transformer } from './transformer';\r\nimport { transformerIsUnitOwnedByPlayer, transformerIsUnitRace, transformerIsUnitType } from './specific';\r\nimport transformBlz from './blz';\r\n\r\nlet initialized = false;\r\nlet transformers: {[keyof: string]: (data: WeuData, object: ECA | SubParameters) => boolean };\r\n\r\nfunction rename(name: string): Transformer {\r\n  return transformer({\r\n    [name]: {}\r\n  });\r\n}\r\n\r\nfunction swap(parameters: number[]): (name: string) => Transformer {\r\n  return function (name: string): Transformer {\r\n    return transformer({\r\n      [name]: {\r\n        parameters\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nfunction initialize(): void {\r\n  if (!initialized) {\r\n    initialized = true;\r\n\r\n    const swap10 = swap([1, 0]);\r\n    const swap102 = swap([1, 0, 2]);\r\n    const swap120 = swap([1, 2, 0]);\r\n    const swap201 = swap([2, 0, 1]);\r\n    const swap210 = swap([2, 1, 0]);\r\n    const swap0231 = swap([0, 2, 3, 1]);\r\n    const swap1023 = swap([1, 0, 2, 3]);\r\n    const swap3012 = swap([3, 0, 1, 2]);\r\n    const swap3201 = swap([3, 2, 0, 1]);\r\n    const swap3210 = swap([3, 2, 1, 0]);\r\n\r\n    transformers = {\r\n      UnitId: rename('String2UnitIdBJ'),\r\n      UnitId2String: rename('UnitId2StringBJ'),\r\n      GetObjectName: rename('GetAbilityName'),\r\n      // Math API\r\n      Sin: transformer({\r\n        SinBJ: {\r\n          parameters: [[0, '/', Math.PI / 180]]\r\n        }\r\n      }),\r\n      Cos: transformer({\r\n        CosBJ: {\r\n          parameters: [[0, '/', Math.PI / 180]]\r\n        }\r\n      }),\r\n      Tan: transformer({\r\n        TanBJ: {\r\n          parameters: [[0, '/', Math.PI / 180]]\r\n        }\r\n      }),\r\n      // String Utility API\r\n      GetHandleId: rename('GetHandleIdBJ'),\r\n      SubString: transformer({\r\n        SubStringBJ: {\r\n          parameters: [0, [1, '+', 1], 2]\r\n        }\r\n      }),\r\n      StringHash: rename('StringHashBJ'),\r\n      GetLocalizedString: rename('StringIdentity'),\r\n      // Map Setup API\r\n      SetMapFlag: transformer({\r\n        LockGameSpeedBJ: {\r\n          tests: [[0, 'MAP_LOCK_SPEED'], [1, 'true']],\r\n          parameters: []\r\n        },\r\n        UnlockGameSpeedBJ: {\r\n          tests: [[0, 'MAP_LOCK_SPEED'], [1, 'false']],\r\n          parameters: []\r\n        }\r\n      }),\r\n      SetPlayerColor: transformer({\r\n        SetPlayerColorBJ: {\r\n          parameters: [0, 1, 'PlayerChangeColorRetain']\r\n        }\r\n      }),\r\n      SetPlayerAlliance: swap0231('SetPlayerAllianceBJ'),\r\n      SetPlayerTaxRate: swap3201('SetPlayerTaxRateBJ'),\r\n      SetPlayerOnScoreScreen: swap10('SetPlayerOnScoreScreenBJ'),\r\n      GetPlayerTaxRate: swap201('GetPlayerTaxRateBJ'),\r\n      // Timer API\r\n      TimerStart: transformer({\r\n        StartTimerBJ: {\r\n          test: [3, 'null'],\r\n          parameters: [0, 2, 1]\r\n        }\r\n      }),\r\n      PauseTimer: transformer({\r\n        PauseTimerBJ: {\r\n          parameters: ['PauseResumePause', 0]\r\n        }\r\n      }),\r\n      ResumeTimer: transformer({\r\n        PauseTimerBJ: {\r\n          parameters: ['PauseResumeResume', 0]\r\n        }\r\n      }),\r\n      // Group API\r\n      GroupAddUnit: swap10('GroupAddUnitSimple'),\r\n      GroupRemoveUnit: swap10('GroupRemoveUnitSimple'),\r\n      GroupImmediateOrderById: rename('GroupTrainOrderByIdBJ'),\r\n      // Force API\r\n      ForceAddPlayer: swap10('ForceAddPlayerSimple'),\r\n      ForceRemovePlayer: swap10('ForceRemovePlayerSimple'),\r\n      // Region and Location API\r\n      GetWorldBounds: rename('GetEntireMapRect'),\r\n      // Trigger Game Event API\r\n      TriggerRegisterTimerEvent: transformer({\r\n        TriggerRegisterTimerEventPeriodic: {\r\n          test: [2, 'true'],\r\n          parameters: [0, 1]\r\n        },\r\n        TriggerRegisterTimerEventSingle: {\r\n          test: [2, 'false'],\r\n          parameters: [0, 1]\r\n        }\r\n      }),\r\n      TriggerRegisterTimerExpireEvent: rename('TriggerRegisterTimerExpireEventBJ'),\r\n      TriggerRegisterGameStateEvent: transformer({\r\n        TriggerRegisterGameStateEventTimeOfDay: {\r\n          test: [1, 'GAME_STATE_TIME_OF_DAY'],\r\n          parameters: [0, 2, 3]\r\n        }\r\n      }),\r\n      TriggerRegisterDialogEvent: rename('TriggerRegisterDialogEventBJ'),\r\n      TriggerRegisterGameEvent: transformer({\r\n        TriggerRegisterShowSkillEventBJ: {\r\n          test: [1, 'EVENT_GAME_SHOW_SKILL'],\r\n          parameters: [0]\r\n        },\r\n        TriggerRegisterBuildSubmenuEventBJ: {\r\n          test: [1, 'EVENT_GAME_BUILD_SUBMENU'],\r\n          parameters: [0]\r\n        },\r\n        TriggerRegisterGameLoadedEventBJ: {\r\n          test: [1, 'EVENT_GAME_LOADED'],\r\n          parameters: [0]\r\n        },\r\n        TriggerRegisterGameSavedEventBJ: {\r\n          test: [1, 'EVENT_GAME_SAVE'],\r\n          parameters: [0]\r\n        }\r\n      }),\r\n      GetClickedButton: rename('GetClickedButtonBJ'),\r\n      GetClickedDialog: rename('GetClickedDialogBJ'),\r\n      // Trigger Player Based Event API\r\n      TriggerRegisterPlayerEvent: transformer({\r\n        TriggerRegisterPlayerKeyEventBJ: [\r\n          {\r\n            test: [2, 'EVENT_PLAYER_ARROW_LEFT_DOWN'],\r\n            parameters: [0, 1, 'KeyEventTypeDepress', 'KeyEventKeyLeft']\r\n          },\r\n          {\r\n            test: [2, 'EVENT_PLAYER_ARROW_RIGHT_DOWN'],\r\n            parameters: [0, 1, 'KeyEventTypeDepress', 'KeyEventKeyRight']\r\n          },\r\n          {\r\n            test: [2, 'EVENT_PLAYER_ARROW_DOWN_DOWN'],\r\n            parameters: [0, 1, 'KeyEventTypeDepress', 'KeyEventKeyDown']\r\n          },\r\n          {\r\n            test: [2, 'EVENT_PLAYER_ARROW_UP_DOWN'],\r\n            parameters: [0, 1, 'KeyEventTypeDepress', 'KeyEventKeyUp']\r\n          },\r\n          {\r\n            test: [2, 'EVENT_PLAYER_ARROW_LEFT_UP'],\r\n            parameters: [0, 1, 'KeyEventTypeRelease', 'KeyEventKeyLeft']\r\n          },\r\n          {\r\n            test: [2, 'EVENT_PLAYER_ARROW_RIGHT_UP'],\r\n            parameters: [0, 1, 'KeyEventTypeRelease', 'KeyEventKeyRight']\r\n          },\r\n          {\r\n            test: [2, 'EVENT_PLAYER_ARROW_DOWN_UP'],\r\n            parameters: [0, 1, 'KeyEventTypeRelease', 'KeyEventKeyDown']\r\n          },\r\n          {\r\n            test: [2, 'EVENT_PLAYER_ARROW_UP_UP'],\r\n            parameters: [0, 1, 'KeyEventTypeRelease', 'KeyEventKeyUp']\r\n          }\r\n        ],\r\n        TriggerRegisterPlayerMouseEventBJ: [\r\n          {\r\n            test: [2, 'EVENT_PLAYER_MOUSE_DOWN'],\r\n            parameters: [0, 1, 'MouseEventTypeDown']\r\n          },\r\n          {\r\n            test: [2, 'EVENT_PLAYER_MOUSE_UP'],\r\n            parameters: [0, 1, 'MouseEventTypeUp']\r\n          },\r\n          {\r\n            test: [2, 'EVENT_PLAYER_MOUSE_MOVE'],\r\n            parameters: [0, 1, 'MouseEventTypeMove']\r\n          },\r\n        ],\r\n        TriggerRegisterPlayerEventVictory: {\r\n          test: [2, 'EVENT_PLAYER_VICTORY'],\r\n          parameters: [0, 1]\r\n        },\r\n        TriggerRegisterPlayerEventDefeat: {\r\n          test: [2, 'EVENT_PLAYER_DEFEAT'],\r\n          parameters: [0, 1]\r\n        },\r\n        TriggerRegisterPlayerEventLeave: {\r\n          test: [2, 'EVENT_PLAYER_LEAVE'],\r\n          parameters: [0, 1]\r\n        },\r\n        TriggerRegisterPlayerEventAllianceChanged: {\r\n          test: [2, 'EVENT_PLAYER_ALLIANCE_CHANGED'],\r\n          parameters: [0, 1]\r\n        },\r\n        TriggerRegisterPlayerEventEndCinematic: {\r\n          test: [2, 'EVENT_PLAYER_END_CINEMATIC'],\r\n          parameters: [0, 1]\r\n        }\r\n      }),\r\n      TriggerRegisterPlayerUnitEvent: transformer({\r\n        TriggerRegisterPlayerUnitEventSimple: {\r\n          test: [3, 'null'],\r\n          parameters: [0, 1, 2]\r\n        }\r\n      }),\r\n      GetLearnedSkill: rename('GetLearnedSkillBJ'),\r\n      GetKillingUnit: rename('GetKillingUnitBJ'),\r\n      GetTransportUnit: rename('GetTransportUnitBJ'),\r\n      GetLoadedUnit: rename('GetLoadedUnitBJ'),\r\n      GetIssuedOrderId: rename('GetIssuedOrderIdBJ'),\r\n      // Trigger Unit Based Event API\r\n      TriggerRegisterUnitStateEvent: transformer({\r\n        TriggerRegisterUnitLifeEvent: {\r\n          test: [1, 'UNIT_STATE_LIFE'],\r\n          parameters: [0, 2, 3]\r\n        },\r\n        TriggerRegisterUnitManaEvent: {\r\n          test: [1, 'UNIT_STATE_MANA'],\r\n          parameters: [0, 2, 3]\r\n        }\r\n      }),\r\n      TriggerWaitForSound: rename('WaitForSoundBJ'),\r\n      // Widget API\r\n      GetWidgetLife: rename('GetItemLifeBJ'),\r\n      SetWidgetLife: rename('SetItemLifeBJ'),\r\n      // Destructable Object API\r\n      SetDestructableInvulnerable: rename('SetDestructableInvulnerableBJ'),\r\n      IsDestructableInvulnerable: rename('IsDestructableInvulnerableBJ'),\r\n      EnumDestructablesInRect: transformer({\r\n        EnumDestructablesInRectAll: {\r\n          test: [1, 'null'],\r\n          parameters: [0, 2]\r\n        }\r\n      }),\r\n      SetDestructableMaxLife: rename('SetDestructableMaxLifeBJ'),\r\n      QueueDestructableAnimation: rename('QueueDestructableAnimationBJ'),\r\n      SetDestructableAnimation: rename('SetDestructableAnimationBJ'),\r\n      SetDestructableAnimationSpeed: transformer({\r\n        SetDestAnimationSpeedPercent: {\r\n          parameters: [0, [1, '*', 100]]\r\n        }\r\n      }),\r\n      ShowDestructable: swap10('ShowDestructableBJ'),\r\n      GetTriggerDestructable: rename('GetDyingDestructable'),\r\n      // Item API\r\n      SetItemDropOnDeath: rename('SetItemDropOnDeathBJ'),\r\n      SetItemDroppable: rename('SetItemDroppableBJ'),\r\n      SetItemPlayer: rename('SetItemPlayerBJ'),\r\n      SetItemInvulnerable: rename('SetItemInvulnerableBJ'),\r\n      SetItemVisible: swap10('SetItemVisibleBJ'),\r\n      IsItemOwned: transformer({\r\n        CheckItemStatus: {\r\n          parameters: [0, 'ItemStatusOwned']\r\n        }\r\n      }),\r\n      IsItemPowerup: transformer({\r\n        CheckItemStatus: {\r\n          parameters: [0, 'ItemStatusPowerup']\r\n        }\r\n      }),\r\n      IsItemSellable: transformer({\r\n        CheckItemStatus: {\r\n          parameters: [0, 'ItemStatusSellable']\r\n        }\r\n      }),\r\n      IsItemPawnable: transformer({\r\n        CheckItemStatus: {\r\n          parameters: [0, 'ItemStatusPawnable']\r\n        }\r\n      }),\r\n      IsItemIdPowerup: transformer({\r\n        CheckItemcodeStatus: {\r\n          parameters: [0, 'ItemcodeStatusPowerup']\r\n        }\r\n      }),\r\n      IsItemIdSellable: transformer({\r\n        CheckItemcodeStatus: {\r\n          parameters: [0, 'ItemcodeStatusSellable']\r\n        }\r\n      }),\r\n      IsItemIdPawnable: transformer({\r\n        CheckItemcodeStatus: {\r\n          parameters: [0, 'ItemcodeStatusPawnable']\r\n        }\r\n      }),\r\n      EnumItemsInRect: transformer({\r\n        EnumItemsInRectBJ: {\r\n          test: [1, 'null'],\r\n          parameters: [0, 2]\r\n        }\r\n      }),\r\n      // Unit API\r\n      ShowUnit: transformer({\r\n        ShowUnitShow: {\r\n          test: [1, 'true'],\r\n          parameters: [0]\r\n        },\r\n        ShowUnitHide: {\r\n          test: [1, 'false'],\r\n          parameters: [0]\r\n        }\r\n      }),\r\n      SetUnitState: transformer({\r\n        SetUnitLifeBJ: {\r\n          test: [1, 'UNIT_STATE_LIFE'],\r\n          parameters: [0, 2]\r\n        },\r\n        SetUnitManaBJ: {\r\n          test: [1, 'UNIT_STATE_MANA'],\r\n          parameters: [0, 2]\r\n        }\r\n      }),\r\n      SetUnitFlyHeight: rename('SetUnitFlyHeightBJ'),\r\n      SetUnitTurnSpeed: rename('SetUnitTurnSpeedBJ'),\r\n      SetUnitAcquireRange: rename('SetUnitAcquireRangeBJ'),\r\n      SetUnitCreepGuard: transformer({\r\n        LockGuardPosition: {\r\n          test: [1, 'true'],\r\n          parameters: [0]\r\n        }\r\n      }),\r\n      GetUnitDefaultPropWindow: rename('GetUnitDefaultPropWindowBJ'),\r\n      SetUnitScale: transformer({\r\n        SetUnitScalePercent: {\r\n          parameters: [0, [1, '*', 100], [2, '*', 100], [3, '*', 100]]\r\n        }\r\n      }),\r\n      SetUnitTimeScale: transformer({\r\n        SetUnitTimeScalePercent: {\r\n          parameters: [0, [1, '*', 100]]\r\n        }\r\n      }),\r\n      SetUnitBlendTime: rename('SetUnitBlendTimeBJ'),\r\n      QueueUnitAnimation: rename('QueueUnitAnimationBJ'),\r\n      SetUnitAnimation: transformer({\r\n        ResetUnitAnimation: {\r\n          test: [1, '\"stand\"'],\r\n          parameters: [0]\r\n        }\r\n      }),\r\n      AddUnitAnimationProperties: swap210('AddUnitAnimationPropertiesBJ'),\r\n      SetHeroStr: transformer({\r\n        ModifyHeroStat: {\r\n          test: [2, 'true'],\r\n          parameters: ['HeroStatStr', 0, 'ModifyMethodSet', 1]\r\n        }\r\n      }),\r\n      SetHeroAgi: transformer({\r\n        ModifyHeroStat: {\r\n          test: [2, 'true'],\r\n          parameters: ['HeroStatAgi', 0, 'ModifyMethodSet', 1]\r\n        }\r\n      }),\r\n      SetHeroInt: transformer({\r\n        ModifyHeroStat: {\r\n          test: [2, 'true'],\r\n          parameters: ['HeroStatInt', 0, 'ModifyMethodSet', 1]\r\n        }\r\n      }),\r\n      GetHeroStr: transformer({\r\n        GetHeroStatBJ: {\r\n          parameters: ['HeroStatStr', 0, 1]\r\n        }\r\n      }),\r\n      GetHeroAgi: transformer({\r\n        GetHeroStatBJ: {\r\n          parameters: ['HeroStatAgi', 0, 1]\r\n        }\r\n      }),\r\n      GetHeroInt: transformer({\r\n        GetHeroStatBJ: {\r\n          parameters: ['HeroStatInt', 0, 1]\r\n        }\r\n      }),\r\n      UnitModifySkillPoints: transformer({\r\n        ModifyHeroSkillPoints: {\r\n          parameters: [0, '0', 1]\r\n        }\r\n      }),\r\n      AddHeroXP: swap102('AddHeroXPSwapped'),\r\n      GetUnitAbilityLevel: swap10('GetUnitAbilityLevelSwapped'),\r\n      DecUnitAbilityLevel: swap10('DecUnitAbilityLevelSwapped'),\r\n      IncUnitAbilityLevel: swap10('IncUnitAbilityLevelSwapped'),\r\n      SetUnitAbilityLevel: swap102('SetUnitAbilityLevelSwapped'),\r\n      SetUnitExploded: rename('SetUnitExplodedBJ'),\r\n      PauseUnit: swap10('PauseUnitBJ'),\r\n      IsUnitPaused: rename('IsUnitPausedBJ'),\r\n      SelectUnit: transformer({\r\n        SelectUnitAdd: {\r\n          test: [1, 'true'],\r\n          parameters: [0]\r\n        },\r\n        SelectUnitRemove: {\r\n          test: [1, 'false'],\r\n          parameters: [0]\r\n        }\r\n      }),\r\n      UnitAddItem: swap10('UnitAddItemSwapped'),\r\n      UnitRemoveItem: swap10('UnitRemoveItemSwapped'),\r\n      UnitRemoveItemFromSlot: transformer({\r\n        UnitRemoveItemFromSlotSwapped: {\r\n          parameters: [0, [1, '+', 1]]\r\n        }\r\n      }),\r\n      UnitItemInSlot: transformer({\r\n        UnitItemInSlotBJ: {\r\n          parameters: [0, [1, '+', 1]]\r\n        }\r\n      }),\r\n      UnitInventorySize: rename('UnitInventorySizeBJ'),\r\n      UnitDropItemSlot: transformer({\r\n        UnitDropItemSlotBJ: {\r\n          parameters: [0, 1, [2, '+', 1]]\r\n        }\r\n      }),\r\n      UnitDropItemTarget: rename('UnitDropItemTargetBJ'),\r\n      GetUnitState: swap10('GetUnitStateSwap'),\r\n      SetUnitUseFood: swap10('SetUnitUseFoodBJ'),\r\n      IsUnitOwnedByPlayer: transformerIsUnitOwnedByPlayer,\r\n      IsUnitRace: transformerIsUnitRace,\r\n      IsUnitType: transformerIsUnitType,\r\n      IsUnitHidden: rename('IsUnitHiddenBJ'),\r\n      IsUnitIllusion: rename('IsUnitIllusionBJ'),\r\n      IsUnitInTransport: rename('IsUnitInTransportBJ'),\r\n      IsUnitLoaded: rename('IsUnitLoadedBJ'),\r\n      UnitShareVision: swap201('UnitShareVisionBJ'),\r\n      UnitSuspendDecay: swap10('UnitSuspendDecayBJ'),\r\n      UnitAddType: swap10('UnitAddTypeBJ'),\r\n      UnitRemoveType: swap10('UnitRemoveTypeBJ'),\r\n      UnitAddAbility: swap10('UnitAddAbilityBJ'),\r\n      UnitRemoveAbility: swap10('UnitRemoveAbilityBJ'),\r\n      UnitRemoveBuffs: transformer({\r\n        UnitRemoveBuffsBJ: [\r\n          {\r\n            tests: [[1, 'true'], [2, 'false']],\r\n            parameters: ['BuffTypePositive', 0]\r\n          },\r\n          {\r\n            tests: [[1, 'false'], [2, 'true']],\r\n            parameters: ['BuffTypeNegative', 0]\r\n          },\r\n          {\r\n            tests: [[1, 'true'], [2, 'true']],\r\n            parameters: ['BuffTypeAll', 0]\r\n          }\r\n        ]\r\n      }),\r\n      UnitRemoveBuffsEx: transformer({\r\n        UnitRemoveBuffsBJ: {\r\n          tests: [[1, 'true'], [2, 'true'], [3, 'false'], [4, 'false'], [5, 'false'], [6, 'true'], [7, 'false']],\r\n          parameters: ['BuffTypeNonTLife', 0]\r\n        }\r\n      }),\r\n      UnitAddSleep: rename('UnitSetCanSleepBJ'),\r\n      UnitCanSleep: rename('UnitCanSleepBJ'),\r\n      UnitIsSleeping: rename('UnitIsSleepingBJ'),\r\n      UnitWakeUp: rename('UnitWakeUpBJ'),\r\n      UnitApplyTimedLife: swap210('UnitApplyTimedLifeBJ'),\r\n      UnitPauseTimedLife: swap10('UnitPauseTimedLifeBJ'),\r\n      UnitSetUsesAltIcon: swap10('UnitSetUsesAltIconBJ'),\r\n      UnitDamageTarget: transformer({\r\n        UnitDamageTargetBJ: {\r\n          tests: [[3, 'true'], [4, 'false'], [7, 'WEAPON_TYPE_WHOKNOWS']],\r\n          parameters: [0, 1, 2, 5, 6]\r\n        }\r\n      }),\r\n      IssueImmediateOrderById: rename('IssueTrainOrderByIdBJ'),\r\n      AddResourceAmount: swap10('AddResourceAmountBJ'),\r\n      WaygateActivate: swap10('WaygateActivateBJ'),\r\n      WaygateIsActive: rename('WaygateIsActiveBJ'),\r\n      AddItemToStock: swap1023('AddItemToStockBJ'),\r\n      AddUnitToStock: swap1023('AddUnitToStockBJ'),\r\n      RemoveItemFromStock: swap10('RemoveItemFromStockBJ'),\r\n      RemoveUnitFromStock: swap10('RemoveUnitFromStockBJ'),\r\n      // Player API\r\n      Player: transformer({\r\n        ConvertedPlayer: {\r\n          parameters: [[0, '+', 1]]\r\n        }\r\n      }),\r\n      SetPlayerHandicap: transformer({\r\n        SetPlayerHandicapBJ: {\r\n          parameters: [0, [1, '*', 100]]\r\n        }\r\n      }),\r\n      SetPlayerHandicapXP: transformer({\r\n        SetPlayerHandicapXPBJ: {\r\n          parameters: [0, [1, '*', 100]]\r\n        }\r\n      }),\r\n      SetPlayerTechMaxAllowed: swap120('SetPlayerTechMaxAllowedSwap'),\r\n      GetPlayerTechMaxAllowed: swap10('GetPlayerTechMaxAllowedSwap'),\r\n      SetPlayerTechResearched: swap120('SetPlayerTechResearchedSwap'),\r\n      GetPlayerTechCount: transformer({\r\n        GetPlayerTechCountSimple: {\r\n          test: [2, 'true'],\r\n          parameters: [1, 0]\r\n        }\r\n      }),\r\n      SetPlayerAbilityAvailable: swap210('SetPlayerAbilityAvailableBJ'),\r\n      // Fog of War API\r\n      FogMaskEnable: transformer({\r\n        FogMaskEnableOn: {\r\n          test: [0, 'true'],\r\n          parameters: []\r\n        },\r\n        FogMaskEnableOff: {\r\n          test: [0, 'false'],\r\n          parameters: []\r\n        }\r\n      }),\r\n      FogEnable: transformer({\r\n        FogEnableOn: {\r\n          test: [0, 'true'],\r\n          parameters: []\r\n        },\r\n        FogEnableOff: {\r\n          test: [0, 'false'],\r\n          parameters: []\r\n        }\r\n      }),\r\n      // Game API\r\n      SetCampaignMenuRace: transformer({\r\n        SetCampaignMenuRaceBJ: [\r\n          {\r\n            test: [0, 'RACE_OTHER'],\r\n            parameters: ['CampaignIndexT']\r\n          },\r\n          {\r\n            test: [0, 'RACE_HUMAN'],\r\n            parameters: ['CampaignIndexH']\r\n          },\r\n          {\r\n            test: [0, 'RACE_UNDEAD'],\r\n            parameters: ['CampaignIndexU']\r\n          },\r\n          {\r\n            test: [0, 'RACE_ORC'],\r\n            parameters: ['CampaignIndexO']\r\n          },\r\n          {\r\n            test: [0, 'RACE_NIGHTELF'],\r\n            parameters: ['CampaignIndexN']\r\n          }\r\n        ]\r\n      }),\r\n      SetCampaignMenuRaceEx: transformer({\r\n        SetCampaignMenuRaceBJ: [\r\n          {\r\n            test: [0, 'bj_CAMPAIGN_OFFSET_XN'],\r\n            parameters: ['CampaignIndexXN']\r\n          },\r\n          {\r\n            test: [0, 'bj_CAMPAIGN_OFFSET_XH'],\r\n            parameters: ['CampaignIndexXH']\r\n          },\r\n          {\r\n            test: [0, 'bj_CAMPAIGN_OFFSET_XU'],\r\n            parameters: ['CampaignIndexXU']\r\n          },\r\n          {\r\n            test: [0, 'bj_CAMPAIGN_OFFSET_XO'],\r\n            parameters: ['CampaignIndexXO']\r\n          }\r\n        ]\r\n      }),\r\n      LoadGame: rename('LoadGameBJ'),\r\n      RenameSaveDirectory: rename('RenameSaveDirectoryBJ'),\r\n      RemoveSaveDirectory: rename('RemoveSaveDirectoryBJ'),\r\n      CopySaveGame: rename('CopySaveGameBJ'),\r\n      GetFloatGameState: transformer({\r\n        GetTimeOfDay: {\r\n          test: [0, 'GAME_STATE_TIME_OF_DAY'],\r\n          parameters: []\r\n        }\r\n      }),\r\n      SetFloatGameState: transformer({\r\n        SetTimeOfDay: {\r\n          test: [0, 'GAME_STATE_TIME_OF_DAY'],\r\n          parameters: [1]\r\n        }\r\n      }),\r\n      // Campaign API\r\n      SetCustomCampaignButtonVisible: transformer({\r\n        ShowCustomCampaignButton: {\r\n          parameters: [[0, '+', 1], 1]\r\n        }\r\n      }),\r\n      GetCustomCampaignButtonVisible: transformer({\r\n        IsCustomCampaignButtonVisibile: {\r\n          parameters: [[0, '+', 1]]\r\n        }\r\n      }),\r\n      // Dialog API\r\n      DialogClear: rename('DialogClearBJ'),\r\n      DialogSetMessage: rename('DialogSetMessageBJ'),\r\n      DialogDisplay: swap210('DialogDisplayBJ'),\r\n      InitGameCache: rename('InitGameCacheBJ'),\r\n      SaveGameCache: rename('SaveGameCacheBJ'),\r\n      StoreInteger: swap3210('StoreIntegerBJ'),\r\n      StoreReal: swap3210('StoreRealBJ'),\r\n      StoreBoolean: swap3210('StoreBooleanBJ'),\r\n      StoreUnit: swap3210('StoreUnitBJ'),\r\n      StoreString: swap3210('StoreStringBJ'),\r\n      HaveStoredBoolean: transformer({\r\n        HaveStoredValue: {\r\n          parameters: [2, 'CacheValueTypeBoolean', 1, 0]\r\n        }\r\n      }),\r\n      HaveStoredInteger: transformer({\r\n        HaveStoredValue: {\r\n          parameters: [2, 'CacheValueTypeInteger', 1, 0]\r\n        }\r\n      }),\r\n      HaveStoredReal: transformer({\r\n        HaveStoredValue: {\r\n          parameters: [2, 'CacheValueTypeReal', 1, 0]\r\n        }\r\n      }),\r\n      HaveStoredUnit: transformer({\r\n        HaveStoredValue: {\r\n          parameters: [2, 'CacheValueTypeUnit', 1, 0]\r\n        }\r\n      }),\r\n      HaveStoredString: transformer({\r\n        HaveStoredValue: {\r\n          parameters: [2, 'CacheValueTypeString', 1, 0]\r\n        }\r\n      }),\r\n      FlushGameCache: rename('FlushGameCacheBJ'),\r\n      FlushStoredMission: swap10('FlushStoredMissionBJ'),\r\n      GetStoredInteger: swap210('GetStoredIntegerBJ'),\r\n      GetStoredReal: swap210('GetStoredRealBJ'),\r\n      GetStoredBoolean: swap210('GetStoredBooleanBJ'),\r\n      GetStoredString: swap210('GetStoredStringBJ'),\r\n      InitHashtable: rename('InitHashtableBJ'),\r\n      SaveInteger: swap3210('SaveIntegerBJ'),\r\n      SaveReal: swap3210('SaveRealBJ'),\r\n      SaveBoolean: swap3210('SaveBooleanBJ'),\r\n      SaveStr: swap3210('SaveStringBJ'),\r\n      SavePlayerHandle: swap3210('SavePlayerHandleBJ'),\r\n      SaveWidgetHandle: swap3210('SaveWidgetHandleBJ'),\r\n      SaveDestructableHandle: swap3210('SaveDestructableHandleBJ'),\r\n      SaveItemHandle: swap3210('SaveItemHandleBJ'),\r\n      SaveUnitHandle: swap3210('SaveUnitHandleBJ'),\r\n      SaveAbilityHandle: swap3210('SaveAbilityHandleBJ'),\r\n      SaveTimerHandle: swap3210('SaveTimerHandleBJ'),\r\n      SaveTriggerHandle: swap3210('SaveTriggerHandleBJ'),\r\n      SaveTriggerConditionHandle: swap3210('SaveTriggerConditionHandleBJ'),\r\n      SaveTriggerActionHandle: swap3210('SaveTriggerActionHandleBJ'),\r\n      SaveTriggerEventHandle: swap3210('SaveTriggerEventHandleBJ'),\r\n      SaveForceHandle: swap3210('SaveForceHandleBJ'),\r\n      SaveGroupHandle: swap3210('SaveGroupHandleBJ'),\r\n      SaveLocationHandle: swap3210('SaveLocationHandleBJ'),\r\n      SaveRectHandle: swap3210('SaveRectHandleBJ'),\r\n      SaveBooleanExprHandle: swap3210('SaveBooleanExprHandleBJ'),\r\n      SaveSoundHandle: swap3210('SaveSoundHandleBJ'),\r\n      SaveEffectHandle: swap3210('SaveEffectHandleBJ'),\r\n      SaveUnitPoolHandle: swap3210('SaveUnitPoolHandleBJ'),\r\n      SaveItemPoolHandle: swap3210('SaveItemPoolHandleBJ'),\r\n      SaveQuestHandle: swap3210('SaveQuestHandleBJ'),\r\n      SaveQuestItemHandle: swap3210('SaveQuestItemHandleBJ'),\r\n      SaveDefeatConditionHandle: swap3210('SaveDefeatConditionHandleBJ'),\r\n      SaveTimerDialogHandle: swap3210('SaveTimerDialogHandleBJ'),\r\n      SaveLeaderboardHandle: swap3210('SaveLeaderboardHandleBJ'),\r\n      SaveMultiboardHandle: swap3210('SaveMultiboardHandleBJ'),\r\n      SaveMultiboardItemHandle: swap3210('SaveMultiboardItemHandleBJ'),\r\n      SaveTrackableHandle: swap3210('SaveTrackableHandleBJ'),\r\n      SaveDialogHandle: swap3210('SaveDialogHandleBJ'),\r\n      SaveButtonHandle: swap3210('SaveButtonHandleBJ'),\r\n      SaveTextTagHandle: swap3210('SaveTextTagHandleBJ'),\r\n      SaveLightningHandle: swap3210('SaveLightningHandleBJ'),\r\n      SaveImageHandle: swap3210('SaveImageHandleBJ'),\r\n      SaveUbersplatHandle: swap3210('SaveUbersplatHandleBJ'),\r\n      SaveRegionHandle: swap3210('SaveRegionHandleBJ'),\r\n      SaveFogStateHandle: swap3210('SaveFogStateHandleBJ'),\r\n      SaveFogModifierHandle: swap3210('SaveFogModifierHandleBJ'),\r\n      LoadInteger: swap210('LoadIntegerBJ'),\r\n      LoadReal: swap210('LoadRealBJ'),\r\n      LoadBoolean: swap210('LoadBooleanBJ'),\r\n      LoadStr: swap210('LoadStringBJ'),\r\n      LoadPlayerHandle: swap210('LoadPlayerHandleBJ'),\r\n      LoadWidgetHandle: swap210('LoadWidgetHandleBJ'),\r\n      LoadDestructableHandle: swap210('LoadDestructableHandleBJ'),\r\n      LoadItemHandle: swap210('LoadItemHandleBJ'),\r\n      LoadUnitHandle: swap210('LoadUnitHandleBJ'),\r\n      LoadAbilityHandle: swap210('LoadAbilityHandleBJ'),\r\n      LoadTimerHandle: swap210('LoadTimerHandleBJ'),\r\n      LoadTriggerHandle: swap210('LoadTriggerHandleBJ'),\r\n      LoadTriggerConditionHandle: swap210('LoadTriggerConditionHandleBJ'),\r\n      LoadTriggerActionHandle: swap210('LoadTriggerActionHandleBJ'),\r\n      LoadTriggerEventHandle: swap210('LoadTriggerEventHandleBJ'),\r\n      LoadForceHandle: swap210('LoadForceHandleBJ'),\r\n      LoadGroupHandle: swap210('LoadGroupHandleBJ'),\r\n      LoadLocationHandle: swap210('LoadLocationHandleBJ'),\r\n      LoadRectHandle: swap210('LoadRectHandleBJ'),\r\n      LoadBooleanExprHandle: swap210('LoadBooleanExprHandleBJ'),\r\n      LoadSoundHandle: swap210('LoadSoundHandleBJ'),\r\n      LoadEffectHandle: swap210('LoadEffectHandleBJ'),\r\n      LoadUnitPoolHandle: swap210('LoadUnitPoolHandleBJ'),\r\n      LoadItemPoolHandle: swap210('LoadItemPoolHandleBJ'),\r\n      LoadQuestHandle: swap210('LoadQuestHandleBJ'),\r\n      LoadQuestItemHandle: swap210('LoadQuestItemHandleBJ'),\r\n      LoadDefeatConditionHandle: swap210('LoadDefeatConditionHandleBJ'),\r\n      LoadTimerDialogHandle: swap210('LoadTimerDialogHandleBJ'),\r\n      LoadLeaderboardHandle: swap210('LoadLeaderboardHandleBJ'),\r\n      LoadMultiboardHandle: swap210('LoadMultiboardHandleBJ'),\r\n      LoadMultiboardItemHandle: swap210('LoadMultiboardItemHandleBJ'),\r\n      LoadTrackableHandle: swap210('LoadTrackableHandleBJ'),\r\n      LoadDialogHandle: swap210('LoadDialogHandleBJ'),\r\n      LoadButtonHandle: swap210('LoadButtonHandleBJ'),\r\n      LoadTextTagHandle: swap210('LoadTextTagHandleBJ'),\r\n      LoadLightningHandle: swap210('LoadLightningHandleBJ'),\r\n      LoadImageHandle: swap210('LoadImageHandleBJ'),\r\n      LoadUbersplatHandle: swap210('LoadUbersplatHandleBJ'),\r\n      LoadRegionHandle: swap210('LoadRegionHandleBJ'),\r\n      LoadFogStateHandle: swap210('LoadFogStateHandleBJ'),\r\n      LoadFogModifierHandle: swap210('LoadFogModifierHandleBJ'),\r\n      HaveSavedBoolean: transformer({\r\n        HaveSavedValue: {\r\n          parameters: [2, 'HashtableValueTypeBoolean', 1, 0]\r\n        }\r\n      }),\r\n      HaveSavedInteger: transformer({\r\n        HaveSavedValue: {\r\n          parameters: [2, 'HashtableValueTypeInteger', 1, 0]\r\n        }\r\n      }),\r\n      HaveSavedReal: transformer({\r\n        HaveSavedValue: {\r\n          parameters: [2, 'HashtableValueTypeReal', 1, 0]\r\n        }\r\n      }),\r\n      HaveSavedString: transformer({\r\n        HaveSavedValue: {\r\n          parameters: [2, 'HashtableValueTypeString', 1, 0]\r\n        }\r\n      }),\r\n      HaveSavedHandle: transformer({\r\n        HaveSavedValue: {\r\n          parameters: [2, 'HashtableValueTypeHandle', 1, 0]\r\n        }\r\n      }),\r\n      FlushParentHashtable: rename('FlushParentHashtableBJ'),\r\n      FlushChildHashtable: swap10('FlushChildHashtableBJ'),\r\n      // Randomization API\r\n      ChooseRandomCreep: rename('ChooseRandomCreepBJ'),\r\n      ChooseRandomNPBuilding: rename('ChooseRandomNPBuildingBJ'),\r\n      ChooseRandomItem: rename('ChooseRandomItemBJ'),\r\n      ChooseRandomItemEx: swap10('ChooseRandomItemExBJ'),\r\n      // Visual API\r\n      ResetTerrainFog: rename('ResetTerrainFogBJ'),\r\n      SetTerrainFogEx: transformer({\r\n        SetTerrainFogExBJ: {\r\n          parameters: [0, 1, 2, 3, [4, '*', 100], [5, '*', 100], [6, '*', 100]]\r\n        }\r\n      }),\r\n      SetTimeOfDayScale: transformer({\r\n        SetTimeOfDayScalePercentBJ: {\r\n          parameters: [[0, '*', 100]]\r\n        }\r\n      }),\r\n      PauseGame: transformer({\r\n        PauseGameOn: {\r\n          test: [0, 'true'],\r\n          parameters: []\r\n        },\r\n        PauseGameOff: {\r\n          test: [0, 'false'],\r\n          parameters: []\r\n        }\r\n      }),\r\n      DestroyTextTag: rename('DestroyTextTagBJ'),\r\n      SetTextTagPosUnit: rename('SetTextTagPosUnitBJ'),\r\n      SetTextTagSuspended: rename('SetTextTagSuspendedBJ'),\r\n      SetTextTagPermanent: rename('SetTextTagPermanentBJ'),\r\n      SetTextTagAge: rename('SetTextTagAgeBJ'),\r\n      SetTextTagLifespan: rename('SetTextTagLifespanBJ'),\r\n      SetTextTagFadepoint: rename('SetTextTagFadepointBJ'),\r\n      // Quest API\r\n      DestroyQuest: rename('DestroyQuestBJ'),\r\n      QuestSetTitle: rename('QuestSetTitleBJ'),\r\n      QuestSetDescription: rename('QuestSetDescriptionBJ'),\r\n      QuestSetCompleted: rename('QuestSetCompletedBJ'),\r\n      QuestSetDiscovered: rename('QuestSetDiscoveredBJ'),\r\n      QuestSetFailed: rename('QuestSetFailedBJ'),\r\n      QuestSetEnabled: swap10('QuestSetEnabledBJ'),\r\n      QuestItemSetDescription: rename('QuestItemSetDescriptionBJ'),\r\n      QuestItemSetCompleted: rename('QuestItemSetCompletedBJ'),\r\n      DestroyDefeatCondition: rename('DestroyDefeatConditionBJ'),\r\n      DefeatConditionSetDescription: rename('DefeatConditionSetDescriptionBJ'),\r\n      FlashQuestDialogButton: rename('FlashQuestDialogButtonBJ'),\r\n      // Timer Dialog API\r\n      DestroyTimerDialog: rename('DestroyTimerDialogBJ'),\r\n      TimerDialogSetTitle: rename('TimerDialogSetTitleBJ'),\r\n      TimerDialogDisplay: swap10('TimerDialogDisplayBJ'),\r\n      // Leaderboard API\r\n      DestroyLeaderboard: rename('DestroyLeaderboardBJ'),\r\n      LeaderboardDisplay: swap10('LeaderboardDisplayBJ'),\r\n      LeaderboardRemovePlayerItem: swap10('LeaderboardRemovePlayerItemBJ'),\r\n      LeaderboardSortItemsByValue: transformer({\r\n        LeaderboardSortItemsBJ: {\r\n          parameters: [0, 'LeaderboardSortByValue', 1]\r\n        }\r\n      }),\r\n      LeaderboardSortItemsByPlayer: transformer({\r\n        LeaderboardSortItemsBJ: {\r\n          parameters: [0, 'LeaderboardSortByPlayer', 1]\r\n        }\r\n      }),\r\n      LeaderboardSortItemsByLabel: transformer({\r\n        LeaderboardSortItemsBJ: {\r\n          parameters: [0, 'LeaderboardSortByLabel', 1]\r\n        }\r\n      }),\r\n      LeaderboardHasPlayerItem: rename('LeaderboardHasPlayerItemBJ'),\r\n      LeaderboardSetLabel: rename('LeaderboardSetLabelBJ'),\r\n      PlayerGetLeaderboard: rename('PlayerGetLeaderboardBJ'),\r\n      LeaderboardSetStyle: rename('LeaderboardSetStyleBJ'),\r\n      // Multiboard API\r\n      DestroyMultiboard: rename('DestroyMultiboardBJ'),\r\n      MultiboardDisplay: swap10('MultiboardDisplayBJ'),\r\n      MultiboardMinimize: swap10('MultiboardMinimizeBJ'),\r\n      // Camera API\r\n      CameraSetupGetField: swap10('CameraSetupGetFieldSwap'),\r\n      CameraSetSmoothingFactor: rename('CameraSetSmoothingFactorBJ'),\r\n      DisplayCineFilter: rename('DisplayCineFilterBJ'),\r\n      ForceCinematicSubtitles: rename('ForceCinematicSubtitlesBJ'),\r\n      // Sound API\r\n      SetSoundDistanceCutoff: rename('SetSoundDistanceCutoffBJ'),\r\n      SetSoundPitch: rename('SetSoundPitchBJ'),\r\n      AttachSoundToUnit: rename('AttachSoundToUnitBJ'),\r\n      StopSound: transformer({\r\n        StopSoundBJ: {\r\n          test: [1, 'false'],\r\n          parameters: [0, 2]\r\n        }\r\n      }),\r\n      KillSoundWhenDone: rename('KillSoundWhenDoneBJ'),\r\n      SetMapMusic: transformer({\r\n        SetMapMusicIndexedBJ: {\r\n          test: [1, 'false'],\r\n          parameters: [0, 2]\r\n        },\r\n        SetMapMusicRandomBJ: {\r\n          tests: [[1, 'true'], [2, '0']],\r\n          parameters: [0]\r\n        }\r\n      }),\r\n      ClearMapMusic: rename('ClearMapMusicBJ'),\r\n      PlayMusic: rename('PlayMusicBJ'),\r\n      StopMusic: rename('StopMusicBJ'),\r\n      ResumeMusic: rename('ResumeMusicBJ'),\r\n      PlayThematicMusic: rename('PlayThematicMusicBJ'),\r\n      EndThematicMusic: rename('EndThematicMusicBJ'),\r\n      VolumeGroupSetVolume: transformer({\r\n        VolumeGroupSetVolumeBJ: {\r\n          parameters: [0, [1, '*', 100]]\r\n        }\r\n      }),\r\n      // Effects API\r\n      AddWeatherEffect: rename('AddWeatherEffectSaveLast'),\r\n      RemoveWeatherEffect: rename('RemoveWeatherEffectBJ'),\r\n      AddSpecialEffectLoc: swap10('AddSpecialEffectLocBJ'),\r\n      AddSpecialEffectTarget: swap210('AddSpecialEffectTargetUnitBJ'),\r\n      DestroyEffect: rename('DestroyEffectBJ'),\r\n      DestroyLightning: rename('DestroyLightningBJ'),\r\n      GetLightningColorA: rename('GetLightningColorABJ'),\r\n      GetLightningColorR: rename('GetLightningColorRBJ'),\r\n      GetLightningColorG: rename('GetLightningColorGBJ'),\r\n      GetLightningColorB: rename('GetLightningColorBBJ'),\r\n      SetLightningColor: rename('SetLightningColorBJ'),\r\n      GetAbilityEffectById: rename('GetAbilityEffectBJ'),\r\n      GetAbilitySoundById: rename('GetAbilitySoundBJ'),\r\n      // Image API\r\n      ShowImage: swap10('ShowImageBJ'),\r\n      // Ubersplat API\r\n      ShowUbersplat: swap10('ShowUbersplatBJ'),\r\n      // Blight API\r\n      SetBlightRect: swap201('SetBlightRectBJ'),\r\n      SetBlightLoc: swap3012('SetBlightRadiusLocBJ'),\r\n      // Doodad API\r\n      SetDoodadAnimationRect: transformer({\r\n        SetDoodadAnimationRectBJ: {\r\n          test: [3, 'false'],\r\n          parameters: [2, 1, 0]\r\n        },\r\n      }),\r\n    };\r\n  }\r\n}\r\n\r\nexport default function transformFunction(data: WeuData, object: ECA | SubParameters): boolean {\r\n  if (!initialized) {\r\n    initialize();\r\n  }\r\n\r\n  const transform = transformers[object.name];\r\n\r\n  if (transform) {\r\n    return transform(data, object);\r\n  }\r\n\r\n  return transformBlz(data, object);\r\n}\r\n","import ECA from '../../../../parsers/w3x/wtg/eca';\r\nimport Parameter from '../../../../parsers/w3x/wtg/parameter';\r\nimport SubParameters from '../../../../parsers/w3x/wtg/subparameters';\r\nimport WeuData from '../data';\r\n\r\n/**\r\n * The Warcraft 3 1.29 PTR introduced many new functions.\r\n * A lot were later prepended with Blz to avoid name clashes with user functions.\r\n * This returns whether the given name matches one of these functions.\r\n */\r\nfunction isBlzNeeded(name: string): boolean {\r\n  return name === 'GetTriggerPlayerMouseX' || name === 'GetTriggerPlayerMouseY' || name === 'GetTriggerPlayerMousePosition' || name === 'GetTriggerPlayerMouseButton' ||\r\n    name === 'SetAbilityTooltip' || name === 'SetAbilityExtendedTooltip' || name === 'SetAbilityResearchTooltip' || name === 'SetAbilityResearchExtendedTooltip' ||\r\n    name === 'GetAbilityTooltip' || name === 'GetAbilityExtendedTooltip' || name === 'GetAbilityResearchTooltip' || name === 'GetAbilityResearchExtendedTooltip' ||\r\n    name === 'SetAbilityIcon' || name === 'GetAbilityIcon' || name === 'GetAbilityPosX' || name === 'GetAbilityPosY' || name === 'SetAbilityPosX' || name === 'SetAbilityPosY' ||\r\n    name === 'GetUnitMaxHP' || name === 'SetUnitMaxHP' || name === 'GetUnitMaxMana' || name === 'SetUnitMaxMana' || name === 'SetItemName' || name === 'SetItemDescription' ||\r\n    name === 'GetItemDescription' || name === 'SetItemTooltip' || name === 'GetItemTooltip' || name === 'SetItemExtendedTooltip' || name === 'GetItemExtendedTooltip' ||\r\n    name === 'SetItemIconPath' || name === 'GetItemIconPath' || name === 'SetUnitName' || name === 'SetHeroProperName' || name === 'GetUnitBaseDamage' ||\r\n    name === 'SetUnitBaseDamage' || name === 'GetUnitDiceNumber' || name === 'SetUnitDiceNumber' || name === 'GetUnitDiceSides' || name === 'SetUnitDiceSides' ||\r\n    name === 'GetUnitAttackCooldown' || name === 'SetUnitAttackCooldown' || name === 'SetSpcialEffectColorByPlayer' || name === 'SetSpecialEffectColor' ||\r\n    name === 'SetSpecialEffectAlpha' || name === 'SetSpecialEffectScale' || name === 'SetSpecialEffectPosition' || name === 'SetSpecialEffectHeight' ||\r\n    name === 'SetSpecialEffectTimeScale' || name === 'SetSpecialEffectTime' || name === 'SetSpecialEffectOrientation' || name === 'SetSpecialEffectYaw' ||\r\n    name === 'SetSpecialEffectPitch' || name === 'SetSpecialEffectRoll' || name === 'SetSpecialEffectX' || name === 'SetSpecialEffectY' || name === 'SetSpecialEffectZ' ||\r\n    name === 'SetSpecialEffectPositionLoc' || name === 'GetLocalSpecialEffectX' || name === 'GetLocalSpecialEffectY' || name === 'GetLocalSpecialEffectZ' ||\r\n    name === 'GetUnitArmor' || name === 'SetUnitArmor' || name === 'UnitHideAbility' || name === 'UnitDisableAbility' || name === 'UnitCancelTimedLife' ||\r\n    name === 'IsUnitSelectable' || name === 'IsUnitInvulnerable' || name === 'UnitInterruptAttack' || name === 'GetUnitCollisionSize' || name === 'GetAbilityManaCost' ||\r\n    name === 'GetAbilityCooldown' || name === 'SetUnitAbilityCooldown' || name === 'GetUnitAbilityCooldown' || name === 'GetUnitAbilityCooldownRemaining' ||\r\n    name === 'EndUnitAbilityCooldown' || name === 'GetUnitAbilityManaCost' || name === 'SetEventDamage' ||\r\n    // Note, the following two functions are available in the 1.29 PTR, but not in the public version!\r\n    // They require version 1.30, which at the time of writing is in PTR.\r\n    name === 'PlaySpecialEffect' || name === 'PlaySpecialEffectWithTimeScale';\r\n}\r\n\r\nexport default function transformBlz(data: WeuData, object: ECA | SubParameters): boolean {\r\n  const name = object.name;\r\n\r\n  if (!isBlzNeeded(name)) {\r\n    return false;\r\n  }\r\n\r\n  object.name = `Blz${name}`;\r\n\r\n  // If this is a subparameters object, need to change the name also for the parent parameter.\r\n  if (object instanceof SubParameters) {\r\n    (<Parameter>data.stack[1]).value = `Blz${name}`;\r\n  }\r\n\r\n  const parameters = object.parameters;\r\n\r\n  // In the PTR these functions had 3 parameters, but later it became 2.\r\n  if ((name === 'GetAbilityIcon' || name === 'SetAbilityIcon') && parameters.length === 3) {\r\n    parameters.pop();\r\n  }\r\n\r\n  return true;\r\n}\r\n","import Parameter from '../../../../parsers/w3x/wtg/parameter';\r\nimport SubParameters from '../../../../parsers/w3x/wtg/subparameters';\r\nimport WeuData from '../data';\r\n\r\nlet initialized = false;\r\nlet transformers: {[keyof: string]: (data: WeuData, object: Parameter) => boolean };\r\n\r\nfunction preset(name: string) {\r\n  return function (data: WeuData, object: Parameter): boolean {\r\n    const subParameters = new SubParameters();\r\n\r\n    subParameters.name = name;\r\n    subParameters.type = data.triggerData.getFunctionType(name);\r\n\r\n    object.value = name;\r\n    object.type = 2;\r\n    object.subParameters = subParameters;\r\n\r\n    return true;\r\n  };\r\n}\r\n\r\nfunction initialize(): void {\r\n  if (!initialized) {\r\n    initialized = true;\r\n    transformers = {\r\n      bj_forLoopAIndex: preset('GetForLoopIndexA'),\r\n      bj_forLoopBIndex: preset('GetForLoopIndexB'),\r\n      bj_queuedExecTotal: preset('QueuedTriggerCountBJ'),\r\n      bj_mapInitialCameraBounds: preset('GetCameraBoundsMapRect'),\r\n      bj_mapInitialPlayableArea: preset('GetPlayableMapRect'),\r\n      bj_lastCreatedWeatherEffect: preset('GetLastCreatedWeatherEffect'),\r\n      bj_lastCreatedTerrainDeformation: preset('GetLastCreatedTerrainDeformation'),\r\n      bj_lastCreatedLightning: preset('GetLastCreatedLightningBJ'),\r\n      bj_lastCreatedFogModifier: preset('GetLastCreatedFogModifier'),\r\n      bj_lastCreatedImage: preset('GetLastCreatedImage'),\r\n      bj_lastCreatedUbersplat: preset('GetLastCreatedUbersplat'),\r\n      bj_lastPlayedSound: preset('GetLastPlayedSound'),\r\n      bj_lastPlayedMusic: preset('GetLastPlayedMusic'),\r\n      bj_useDawnDuskSounds: preset('IsDawnDuskEnabled'),\r\n      bj_lastCreatedEffect: preset('GetLastCreatedEffectBJ'),\r\n      bj_lastCreatedItem: preset('GetLastCreatedItem'),\r\n      bj_lastRemovedItem: preset('GetLastRemovedItem'),\r\n      bj_lastCreatedUnit: preset('GetLastCreatedUnit'),\r\n      bj_lastReplacedUnit: preset('GetLastReplacedUnitBJ'),\r\n      bj_lastCreatedDestructable: preset('GetLastCreatedDestructable'),\r\n      bj_FORCE_ALL_PLAYERS: preset('GetPlayersAll'),\r\n      bj_lastCreatedButton: preset('GetLastCreatedButtonBJ'),\r\n      bj_lastCreatedQuest: preset('GetLastCreatedQuestBJ'),\r\n      bj_lastCreatedQuestItem: preset('GetLastCreatedQuestItemBJ'),\r\n      bj_lastCreatedDefeatCondition: preset('GetLastCreatedDefeatConditionBJ'),\r\n      bj_lastStartedTimer: preset('GetLastCreatedTimerBJ'),\r\n      bj_lastCreatedTimerDialog: preset('GetLastCreatedTimerDialogBJ'),\r\n      bj_lastCreatedLeaderboard: preset('GetLastCreatedLeaderboard'),\r\n      bj_lastCreatedMultiboard: preset('GetLastCreatedMultiboard'),\r\n      bj_lastCreatedTextTag: preset('GetLastCreatedTextTag'),\r\n      bj_lastTransmissionDuration: preset('GetLastTransmissionDurationBJ'),\r\n      bj_lastCreatedGameCache: preset('GetLastCreatedGameCacheBJ'),\r\n      bj_lastCreatedHashtable: preset('GetLastCreatedHashtableBJ'),\r\n      bj_lastLoadedUnit: preset('GetLastRestoredUnitBJ'),\r\n      bj_lastHauntedGoldMine: preset('GetLastHauntedGoldMine'),\r\n    };\r\n  }\r\n}\r\n\r\nexport default function transformPreset(data: WeuData, parameter: Parameter): boolean {\r\n  if (!initialized) {\r\n    initialize();\r\n  }\r\n\r\n  const transform = transformers[parameter.value];\r\n\r\n  if (transform) {\r\n    return transform(data, parameter);\r\n  }\r\n\r\n  return false;\r\n}\r\n","import Trigger from '../../../parsers/w3x/wtg/trigger';\r\nimport ECA from '../../../parsers/w3x/wtg/eca';\r\nimport Parameter from '../../../parsers/w3x/wtg/parameter';\r\nimport SubParameters from '../../../parsers/w3x/wtg/subparameters';\r\nimport WeuData from './data';\r\nimport { createCustomScriptECA, convertSingleToMultiple, isConditionECA, ensureCustomScriptCodeSafety } from './utils';\r\nimport { convertFunctionCall } from './conversions';\r\nimport transformFunction from './transformations/functions';\r\nimport transformPreset from './transformations/presets';\r\n\r\ninterface ConvertionResult {\r\n  convert: boolean;\r\n  reason: string;\r\n}\r\n\r\nexport function processTrigger(data: WeuData, trigger: Trigger, callbacks: string[]): ConvertionResult {\r\n  data.push(trigger);\r\n\r\n  const eventsAndConditions = [];\r\n  const actions = [];\r\n\r\n  for (const eca of trigger.ecas) {\r\n    const type = eca.type;\r\n\r\n    if (type === 0 || type === 1) {\r\n      eventsAndConditions.push(eca);\r\n    } else if (type === 2) {\r\n      actions.push(eca);\r\n    }\r\n  }\r\n\r\n  const outputEcas = [];\r\n\r\n  for (const eventOrCondition of eventsAndConditions) {\r\n    const result = processECA(data, eventOrCondition, callbacks);\r\n\r\n    if (result.convert) {\r\n      data.pop();\r\n      return result;\r\n    }\r\n\r\n    outputEcas.push(eventOrCondition);\r\n  }\r\n\r\n  for (const action of actions) {\r\n    const result = processECA(data, action, callbacks);\r\n\r\n    if (result.convert) {\r\n      const customScripts = convertFunctionCall(data, action, callbacks);\r\n\r\n      data.change('inlinecustomscript', result.reason, customScripts.map((eca) => eca.parameters[0].value).join('\\n'));\r\n      outputEcas.push(...customScripts);\r\n    } else {\r\n      outputEcas.push(action);\r\n    }\r\n  }\r\n\r\n  trigger.ecas = ensureCustomScriptCodeSafety(outputEcas);\r\n\r\n  data.pop();\r\n  return { convert: false, reason: '' };\r\n}\r\n\r\nexport function processECA(data: WeuData, eca: ECA, callbacks: string[]): ConvertionResult {\r\n  data.push(eca);\r\n\r\n  // Test if this function call, or anything down its hierarchy, needs to be converted to custom script.\r\n  const result = processFunctionCall(data, eca, callbacks);\r\n\r\n  if (result.convert) {\r\n    const reason = result.reason;\r\n\r\n    // If conversion is needed, try first to see if this is a RoC control flow ECA, and convert it to its TFT equivalent.\r\n    // This includes things like IfThenElse (RoC) and IfThenElseMultiple (TFT).\r\n    // This allows to potentially only convert to custom script one part of the control flow block, rather than all of it.\r\n    if (convertSingleToMultiple(eca)) {\r\n      // If the test passes here (that is, false is returned), the TFT conversion allowed to handle the conversion down the hierarchy.\r\n      // In this case, this ECA no longer needs to be converted to custom script.\r\n      const result = processFunctionCall(data, eca, callbacks);\r\n\r\n      if (result.convert) {\r\n        data.pop();\r\n        return result;\r\n      } else {\r\n        data.change('singletomultiple', reason, eca.name);\r\n      }\r\n    } else {\r\n      data.pop();\r\n      return result;\r\n    }\r\n  }\r\n\r\n  const outputEcas = [];\r\n\r\n  // Test the child ECAs if there are any.\r\n  for (const child of eca.ecas) {\r\n    const result = processECA(data, child, callbacks);\r\n\r\n    if (result.convert) {\r\n      let customScripts;\r\n\r\n      // If this is a condition ECA, make a custom script condition.\r\n      if (isConditionECA(eca.name, child.group)) {\r\n        let condition = convertFunctionCall(data, child, callbacks)[0].parameters[0].value;\r\n\r\n        // Normally type 2 (function) ECAs have the call keyword prepended to them.\r\n        // If one was added, remove it now, since this is a condition.\r\n        if (condition.startsWith('call ')) {\r\n          condition = condition.slice(5);\r\n        }\r\n\r\n        let finalCondition;\r\n        let returnValue;\r\n\r\n        // IfThenElseMultiple and AndMultiple return false if any condition is false.\r\n        // OrMultiple needs to return true if any condition is true.\r\n        if (eca.name === 'OrMultiple') {\r\n          finalCondition = condition;\r\n          returnValue = 'true';\r\n        } else {\r\n          finalCondition = `not (${condition})`;\r\n          returnValue = 'false';\r\n        }\r\n\r\n        customScripts = [\r\n          createCustomScriptECA(`if ${finalCondition} then`),\r\n          createCustomScriptECA(`return ${returnValue}`),\r\n          createCustomScriptECA('endif'),\r\n        ];\r\n      } else {\r\n        customScripts = convertFunctionCall(data, child, callbacks);\r\n      }\r\n\r\n      // All of the custom scripts should be in the same group as the original child.\r\n      for (const script of customScripts) {\r\n        script.group = child.group;\r\n      }\r\n\r\n      data.change('inlinecustomscript', result.reason, customScripts.map((eca) => eca.parameters[0].value).join('\\n'));\r\n      outputEcas.push(...customScripts);\r\n    } else {\r\n      outputEcas.push(child);\r\n    }\r\n  }\r\n\r\n  eca.ecas = ensureCustomScriptCodeSafety(outputEcas);\r\n\r\n  data.pop();\r\n  return { convert: false, reason: '' };\r\n}\r\n\r\nfunction processFunctionCall(data: WeuData, object: ECA | SubParameters, callbacks: string[]): ConvertionResult {\r\n  const name = object.name;\r\n\r\n  // Check if this object can be converted back to normal GUI.\r\n  // If it's already normal GUI, nothing will happen.\r\n  if (transformFunction(data, object)) {\r\n    data.change('inlinegui', name, object.name);\r\n  }\r\n\r\n  // If this function is not from normal GUI, it has to be converted.\r\n  if (!data.triggerData.isBaseFunction(object.type, object.name)) {\r\n    return { convert: true, reason: object.name };\r\n  }\r\n\r\n  // Check the parameters.\r\n  // Note that they will also be checked if GUI was inlined.\r\n  // This is needed, because the inline functions don't check the parameters, only move them around.\r\n  for (const parameter of object.parameters) {\r\n    // Check for custom presets.\r\n    if (parameter.type === 0 && data.triggerData.isCustomPreset(parameter.value)) {\r\n      const value = parameter.value;\r\n\r\n      if (transformPreset(data, parameter)) {\r\n        data.change('inlinepreset', value, parameter.value);\r\n      } else {\r\n        return { convert: true, reason: value };\r\n      }\r\n    }\r\n\r\n    const result = processParameter(data, parameter, callbacks);\r\n\r\n    if (result.convert) {\r\n      return result;\r\n    }\r\n  }\r\n\r\n  return { convert: false, reason: '' };\r\n}\r\n\r\nfunction processParameter(data: WeuData, parameter: Parameter, callbacks: string[]): { convert: boolean, reason: string } {\r\n  data.push(parameter);\r\n\r\n  const type = parameter.type;\r\n  const value = parameter.value;\r\n\r\n  if (type === 1) {\r\n    if (value.startsWith('gg_')) {\r\n      // Used to track global generated variables and their status.\r\n      data.updateGUIReference(value, true);\r\n    }\r\n  } else if (type === 2) {\r\n    const result = processSubParameters(data, <SubParameters>parameter.subParameters, callbacks);\r\n\r\n    if (result.convert) {\r\n      data.pop();\r\n      return result;\r\n    }\r\n  }\r\n\r\n  // If this is an array element, test the array index.\r\n  const index = parameter.arrayIndex;\r\n\r\n  if (index) {\r\n    const result = processParameter(data, index, callbacks);\r\n\r\n    if (result.convert) {\r\n      data.pop();\r\n      return result;\r\n    }\r\n  }\r\n\r\n  data.pop();\r\n  return { convert: false, reason: '' };\r\n}\r\n\r\nfunction processSubParameters(data: WeuData, subParameters: SubParameters, callbacks: string[]): ConvertionResult {\r\n  data.push(subParameters);\r\n\r\n  const result = processFunctionCall(data, subParameters, callbacks);\r\n\r\n  if (result.convert) {\r\n    data.pop();\r\n    return result;\r\n  }\r\n\r\n  data.pop();\r\n  return { convert: false, reason: '' };\r\n}\r\n","import { basename } from '../../common/path';\r\nimport { IniFile } from '../../parsers/ini/file';\r\nimport MdlxModel from '../../parsers/mdlx/model';\r\nimport War3MapImp from '../../parsers/w3x/imp/file';\r\nimport War3Map from '../../parsers/w3x/map';\r\nimport War3MapW3d from '../../parsers/w3x/w3d/file';\r\nimport War3MapW3i from '../../parsers/w3x/w3i/file';\r\nimport War3MapW3s from '../../parsers/w3x/w3s/file';\r\nimport War3MapW3u from '../../parsers/w3x/w3u/file';\r\nimport TokenStream from '../jass2/tokenstream';\r\n\r\nfunction isModel(file: string): boolean {\r\n  return file.endsWith('.mdx') || file.endsWith('.mdl');\r\n}\r\n\r\nfunction isTexture(file: string): boolean {\r\n  return file.endsWith('.blp') || file.endsWith('.dds') || file.endsWith('.tga');\r\n}\r\n\r\nfunction isOther(file: string): boolean {\r\n  return file.endsWith('.wav') || file.endsWith('.mp3') || file.endsWith('.slk') || file.endsWith('.txt');\r\n}\r\n\r\nfunction filterFile(files: string[], file: string): void {\r\n  if (file.length > 6 && (isModel(file) || isTexture(file) || isOther(file))) {\r\n    if (file.endsWith('.mdl')) {\r\n      file = `${file.slice(0, -4)}.mdx`;\r\n    }\r\n\r\n    files.push(file.replace(/\\\\\\\\/g, '\\\\'));\r\n  }\r\n}\r\n\r\n/**\r\n * Given a map, attempt to find all file names referenced in it.\r\n * \r\n * Can be used with MpqArchive.applyListfile() to actually attempt to resolve the files in the archive.\r\n * \r\n * Based on code generously shared by Ralle.\r\n */\r\nexport default function generateListfile(map: War3Map): Set<string> {\r\n  const files = [\r\n    '(listfile)',\r\n    '(signature)',\r\n    '(attributes)',\r\n    'war3map.w3e',\r\n    'war3map.w3i',\r\n    'war3map.wtg',\r\n    'war3map.wct',\r\n    'war3map.wts',\r\n    'war3map.j',\r\n    'scripts\\\\war3map.j',\r\n    'war3map.lua',\r\n    'scripts\\\\war3map.lua',\r\n    'war3map.shd',\r\n    'war3mapMap.blp',\r\n    'war3mapMap.b00',\r\n    'war3mapMap.tga',\r\n    'war3mapPreview.tga',\r\n    'war3map.mmp',\r\n    'war3mapPath.tga',\r\n    'war3map.wpm',\r\n    'war3map.doo',\r\n    'war3mapUnits.doo',\r\n    'war3map.w3r',\r\n    'war3map.w3c',\r\n    'war3map.w3s',\r\n    'war3map.w3u',\r\n    'war3map.w3t',\r\n    'war3map.w3a',\r\n    'war3map.w3b',\r\n    'war3map.w3d',\r\n    'war3map.w3q',\r\n    'war3mapMisc.txt',\r\n    'war3mapSkin.txt',\r\n    'war3mapExtra.txt',\r\n    'war3map.imp',\r\n  ];\r\n\r\n  // Listfile.\r\n  let file = map.get('(listfile)');\r\n\r\n  if (file) {\r\n    try {\r\n      const text = file.text();\r\n      const lines = text.split(/\\r\\n/g);\r\n\r\n      for (const line of lines) {\r\n        files.push(line.trim());\r\n      }\r\n    } catch (e) {\r\n      console.warn('(listfile)', e);\r\n    }\r\n  }\r\n\r\n  // Object files.\r\n  for (const objectFile of ['.w3u', '.w3t', '.w3b', '.w3d', '.w3a', '.w3h', '.w3q']) {\r\n    file = map.get('war3map' + objectFile);\r\n\r\n    if (file) {\r\n      try {\r\n        const bytes = file.bytes();\r\n        let parser;\r\n\r\n        if (objectFile === '.w3d' || objectFile === '.w3q' || objectFile === '.w3a') {\r\n          parser = new War3MapW3d();\r\n        } else {\r\n          parser = new War3MapW3u();\r\n        }\r\n\r\n        parser.load(bytes);\r\n\r\n        const tables = [\r\n          parser.originalTable,\r\n          parser.customTable,\r\n        ];\r\n\r\n        for (const table of tables) {\r\n          for (const object of table.objects) {\r\n            for (const modification of object.modifications) {\r\n              // String\r\n              if (modification.variableType === 3) {\r\n                filterFile(files, <string>modification.value);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.warn(file.name, e);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Sounds.\r\n  file = map.get('war3map.w3s');\r\n\r\n  if (file) {\r\n    try {\r\n      const bytes = file.bytes();\r\n      const parser = new War3MapW3s();\r\n\r\n      parser.load(bytes);\r\n\r\n      for (const sound of parser.sounds) {\r\n        files.push(sound.file);\r\n      }\r\n    } catch (e) {\r\n      console.warn('war3map.w3s', e);\r\n    }\r\n  }\r\n\r\n\r\n  // Scripts.\r\n  file = map.get('war3map.j') || map.get('Scripts\\\\war3map.j') || map.get('war3map.lua') || map.get('Scripts\\\\war3map.lua');\r\n\r\n  if (file) {\r\n    try {\r\n      const text = file.text();\r\n      const stream = new TokenStream(text);\r\n      let token;\r\n\r\n      while ((token = stream.read()) !== undefined) {\r\n        if (token[0] === '\"') {\r\n          filterFile(files, token.slice(1, -1));\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn(file.name, e);\r\n    }\r\n  }\r\n\r\n  // User interface replacements.\r\n  file = map.get('war3mapSkin.txt');\r\n\r\n  if (file) {\r\n    try {\r\n      const text = file.text();\r\n      const config = new IniFile();\r\n\r\n      config.load(text);\r\n\r\n      for (const section of config.sections.values()) {\r\n        for (const value of section.values()) {\r\n          // We know the values are going to be strings.\r\n          for (const token of value.split(',')) {\r\n            filterFile(files, token);\r\n          }\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn('war3mapSkin.txt', e);\r\n    }\r\n  }\r\n\r\n  // Imports\r\n  file = map.get('war3map.imp');\r\n\r\n  if (file) {\r\n    try {\r\n      const bytes = file.bytes();\r\n      const parser = new War3MapImp();\r\n\r\n      parser.load(bytes);\r\n\r\n      for (const file of parser.entries.keys()) {\r\n        files.push(file);\r\n      }\r\n    } catch (e) {\r\n      console.warn('war3map.imp', e);\r\n    }\r\n  }\r\n\r\n  // Map information.\r\n  file = map.get('war3map.w3i');\r\n\r\n  if (file) {\r\n    try {\r\n      const bytes = file.bytes();\r\n      const parser = new War3MapW3i();\r\n\r\n      parser.load(bytes);\r\n\r\n      filterFile(files, parser.loadingScreenModel);\r\n      filterFile(files, parser.prologueScreenModel);\r\n    } catch (e) {\r\n      console.warn('war3map.w3i', e);\r\n    }\r\n  }\r\n\r\n  // Model portraits\r\n  for (let i = 0, l = files.length; i < l; i++) {\r\n    const file = files[i];\r\n\r\n    if (isModel(file)) {\r\n      files.push(`${file.slice(0, -4)}_portrait.mdx`); // MDL portraits?\r\n    }\r\n  }\r\n\r\n  // Model textures.\r\n  for (let i = 0, l = files.length; i < l; i++) {\r\n    const file = files[i];\r\n\r\n    if (isModel(file)) {\r\n      const actualFile = map.get(file);\r\n\r\n      if (actualFile) {\r\n        try {\r\n          const bytes = actualFile.bytes();\r\n          const parser = new MdlxModel();\r\n\r\n          parser.load(bytes);\r\n\r\n          for (const texture of parser.textures) {\r\n            if (texture.path.length) {\r\n              files.push(texture.path);\r\n            }\r\n          }\r\n\r\n          for (const attachment of parser.attachments) {\r\n            filterFile(files, attachment.path);\r\n          }\r\n\r\n          for (const emitter of parser.particleEmitters) {\r\n            filterFile(files, emitter.path);\r\n          }\r\n        } catch (e) {\r\n          console.warn(file, e);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Disabled icon versions.\r\n  for (let i = 0, l = files.length; i < l; i++) {\r\n    const file = files[i];\r\n\r\n    if (isTexture(file)) {\r\n      files.push(`ReplaceableTextures\\\\CommandButtonsDisabled\\\\DIS${basename(file)}`);\r\n    }\r\n  }\r\n\r\n\r\n  return new Set(files);\r\n}\r\n","import convertWeu from './weu/weu';\r\nimport generateListfile from './generatelistfile';\r\n\r\nexport default {\r\n  convertWeu,\r\n  generateListfile,\r\n};\r\n","import War3Map from '../../../parsers/w3x/map';\r\nimport { TriggerData } from '../../../parsers/w3x/wtg/triggerdata';\r\nimport CustomTextTrigger from '../../../parsers/w3x/wct/customtexttrigger';\r\nimport parseWtg from './parsewtg';\r\nimport WeuData, { WEUChange } from './data';\r\nimport { processTrigger } from './processing';\r\nimport { convertTrigger } from './conversions';\r\n\r\nexport interface WeuConversionResult {\r\n  ok: boolean;\r\n  error?: string;\r\n  changes?: WEUChange[];\r\n}\r\n\r\nexport default function convertWeu(map: War3Map, customTriggerData: TriggerData, weTriggerData: TriggerData): WeuConversionResult {\r\n  let wts;\r\n  let wtg;\r\n  let wct;\r\n\r\n  // Try to read the string table.\r\n  try {\r\n    wts = map.readStringTable();\r\n  } catch (e) {\r\n    return { ok: false, error: `Failed to read the string table file: ${e}` };\r\n  }\r\n\r\n  if (!wts) {\r\n    return { ok: false, error: `The string table file doesn't exist` };\r\n  }\r\n\r\n  // Try to add function signatures from the map script.\r\n  // This handles the case of injected libraries, mostly seen in YDWE maps.\r\n  const scriptFile = map.getScriptFile();\r\n  if (scriptFile && scriptFile.name.endsWith('.j')) {\r\n    try {\r\n      customTriggerData.addJassFunctions(scriptFile.text());\r\n    } catch (e) {\r\n\r\n    }\r\n  }\r\n\r\n  const data = new WeuData(customTriggerData, wts);\r\n\r\n  // Try to read the triggers file using the custom trigger data.\r\n  // This will also try to analyze unknown signatures if such exist.\r\n  try {\r\n    wtg = parseWtg(map, customTriggerData, data);\r\n  } catch (e) {\r\n    return { ok: false, error: `Failed to read the triggers file: ${e}` };\r\n  }\r\n\r\n  if (!wtg) {\r\n    return { ok: false, error: `The triggers file doesn't exist` };\r\n  }\r\n\r\n  // Try to read the custom text triggers file.\r\n  try {\r\n    wct = map.readCustomTextTriggers();\r\n  } catch (e) {\r\n    return { ok: false, error: `Failed to read the custom text triggers file: ${e}` };\r\n  }\r\n\r\n  if (!wct) {\r\n    return { ok: false, error: `The custom text triggers file doesn't exist` };\r\n  }\r\n\r\n  const triggers = wtg.triggers;\r\n  const customTextTriggers = wct.triggers;\r\n  const mapHeader = wct.trigger;\r\n\r\n  // If there are less custom text triggers than triggers, WE does not crash, however it doesn't load the map.\r\n  if (customTextTriggers.length < triggers.length) {\r\n    for (let i = 0, l = triggers.length - customTextTriggers.length; i < l; i++) {\r\n      customTextTriggers.push(new CustomTextTrigger());\r\n    }\r\n  }\r\n\r\n  // Process and convert the triggers as needed.\r\n  for (let i = 0, l = triggers.length; i < l; i++) {\r\n    const trigger = triggers[i];\r\n\r\n    // Any callbacks that are generated due to conversions for this trigger will end up here.\r\n    const callbacks: string[] = [];\r\n\r\n    try {\r\n      // Process the trigger.\r\n      // If things inside it need to be converted, this will convert them.\r\n      const result = processTrigger(data, trigger, callbacks);\r\n\r\n      // If the trigger itself needs to be converted, convert it.\r\n      if (result.convert) {\r\n        data.push(trigger);\r\n\r\n        // The trigger body.\r\n        let body = convertTrigger(data, trigger, callbacks);\r\n\r\n        // If any callbacks were generated when converting the trigger, add them to the trigger.\r\n        if (callbacks.length) {\r\n          body = `${callbacks.join('\\r\\n')}\\r\\n${body}`;\r\n        }\r\n\r\n        customTextTriggers[i].text = body;\r\n\r\n        trigger.ecas.length = 0;\r\n        trigger.isCustom = 1;\r\n\r\n        data.change('convertedtrigger', result.reason, customTextTriggers[i].text);\r\n        data.pop();\r\n      } else if (callbacks.length) {\r\n        const callbacksText = callbacks.join('\\r\\n');\r\n\r\n        // If the trigger didn't need to be converted, but callbacks were generated due to things inside it being converted, add them to the map header.\r\n        mapHeader.text += `// Callbacks generated for trigger \"${trigger.name}\" due to conversions\\r\\n${callbacksText}\\r\\n`;\r\n\r\n        data.change('generatedcallbacks', trigger.name, callbacksText);\r\n      }\r\n    } catch (e) {\r\n      return { ok: false, error: `Error at ${data.stackToString()}: ${e}` };\r\n    }\r\n  }\r\n\r\n  // WE will only generate global variables for preplaced objects that are referenced directly by GUI.\r\n  // Referencing them in custom text ECAs or custom text triggers doesn't cut it.\r\n  // This function saves such references if they are deemed to be lost due to the conversion.\r\n  // It does this by adding a new trigger called PreplacedObjectReferences, which is not initially on.\r\n  // In it an ECA is added for each reference.\r\n  // Note that this is not the case for all preplaced objects.\r\n  // For example, triggers and regions seem to always be available.\r\n  // For now only units and destructibles are checked.\r\n  data.saveGUIReferences(triggers, customTextTriggers);\r\n\r\n  // Save the triggers file back.\r\n  map.set('war3map.wtg', wtg.save());\r\n\r\n  // Save the custom text triggers file back.\r\n  map.set('war3map.wct', wct.save());\r\n\r\n  // Now try to re-read the triggers file, but using the normal WE trigger data.\r\n  // If this fails, WE will fail too.\r\n  try {\r\n    wtg = map.readTriggers(weTriggerData);\r\n  } catch (e) {\r\n    return { ok: false, error: `Failed to validate the triggers file: ${e}` };\r\n  }\r\n\r\n  if (!wtg) {\r\n    return { ok: false, error: `Failed to re-read the triggers file` };\r\n  }\r\n\r\n  return { ok: true, changes: data.changes };\r\n}\r\n","import blp from './blp';\r\nimport dds from './dds';\r\nimport { MappedData } from './mappeddata';\r\nimport jass2 from './jass2';\r\nimport mdlx from './mdlx';\r\nimport w3x from './w3x';\r\n\r\nexport default {\r\n  blp,\r\n  dds,\r\n  MappedData,\r\n  jass2,\r\n  mdlx,\r\n  w3x,\r\n};\r\n"],"names":["ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","prototype","call","ownKeys","Object","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","value","EventEmitter","init","this","module","exports","once","emitter","name","Promise","resolve","reject","errorListener","err","removeListener","resolver","slice","arguments","eventTargetAgnosticAddListener","handler","flags","on","addErrorHandlerIfEventEmitter","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","type","prepend","m","events","existing","warning","create","newListener","emit","unshift","push","length","warned","w","Error","String","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","Array","i","unwrapListeners","arrayClone","listenerCount","n","copy","addEventListener","wrapListener","arg","removeEventListener","defineProperty","enumerable","get","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","message","context","len","listeners","addListener","prependListener","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","key","keys","rawListeners","eventNames","luastring_from","luastring_indexOf","luastring_of","Uint8Array","from","a","r","s","v","indexOf","array_indexOf","of","is_luastring","unicode_error_message","uri_allowed","split","reduce","c","charCodeAt","to_luastring_cache","to_luastring","str","cache","cached","outU8Array","outIdx","u","luastring_eq","b","to_jsstring","to","replacement_char","Math","min","u0","fromCharCode","u1","u2","s1","s2","u3","to_uristring","toString","from_userstring","LUA_SIGNATURE","LUA_VERSION","LUA_RELEASE","LUA_COPYRIGHT","LUA_VERSION_MAJOR","LUA_VERSION_MINOR","LUA_VERSION_NUM","LUA_VERSION_RELEASE","LUA_AUTHORS","constant_types","LUA_TNONE","LUA_TNIL","LUA_TBOOLEAN","LUA_TLIGHTUSERDATA","LUA_TNUMBER","LUA_TSTRING","LUA_TTABLE","LUA_TFUNCTION","LUA_TUSERDATA","LUA_TTHREAD","LUA_NUMTAGS","LUA_TSHRSTR","LUA_TLNGSTR","LUA_TNUMFLT","LUA_TNUMINT","LUA_TLCL","LUA_TLCF","LUA_TCCL","LUAI_MAXSTACK","LUA_REGISTRYINDEX","LUA_HOOKCALL","LUA_HOOKCOUNT","LUA_HOOKLINE","LUA_HOOKRET","LUA_HOOKTAILCALL","LUA_MASKCALL","LUA_MASKCOUNT","LUA_MASKLINE","LUA_MASKRET","LUA_MINSTACK","LUA_MULTRET","LUA_OPADD","LUA_OPBAND","LUA_OPBNOT","LUA_OPBOR","LUA_OPBXOR","LUA_OPDIV","LUA_OPEQ","LUA_OPIDIV","LUA_OPLE","LUA_OPLT","LUA_OPMOD","LUA_OPMUL","LUA_OPPOW","LUA_OPSHL","LUA_OPSHR","LUA_OPSUB","LUA_OPUNM","LUA_RIDX_GLOBALS","LUA_RIDX_LAST","LUA_RIDX_MAINTHREAD","lua_Debug","constructor","event","NaN","namewhat","what","source","currentline","linedefined","lastlinedefined","nups","nparams","isvararg","istailcall","short_src","i_ci","lua_upvalueindex","thread_status","LUA_OK","LUA_YIELD","LUA_ERRRUN","LUA_ERRSYNTAX","LUA_ERRMEM","LUA_ERRGCMM","LUA_ERRERR","defs","FENGARI_VERSION","FENGARI_RELEASE","FENGARI_AUTHORS","FENGARI_COPYRIGHT","FENGARI_VERSION_MAJOR","FENGARI_VERSION_MINOR","FENGARI_VERSION_NUM","FENGARI_VERSION_RELEASE","api_check","ldebug","ldo","luaU_dump","lfunc","lobject","lstate","luaS_bless","luaS_new","luaS_newliteral","ltm","lvm","ltable","ZIO","TValue","CClosure","api_incr_top","L","top","ci","api_checknelems","funcOff","fengari_argcheck","fengari_argcheckinteger","isvalid","o","luaO_nilobject","index2addr","idx","stack","l_G","l_registry","MAXUPVAL","func","ttislcf","nupvalues","upvalue","index2addr_","lua_settop","newtop","stack_last","adjust_top","lua_pop","reverse","fromtv","temp","setobjs2s","setobj2s","lua_rotate","t","pIdx","p","lua_copy","fromidx","toidx","setfrom","lua_pushcclosure","fn","cl","setclCvalue","lua_pushjsclosure","lua_pushcfunction","lua_pushjsfunction","auxsetstr","k","pushsvalue2s","settable","lua_setglobal","luaH_getint","auxgetstr","luaV_gettable","ttnov","lua_rawgeti","ttistable","pushobj2s","lua_createtable","narray","nrec","luaH_new","aux_upvalue","fi","ttype","f","val","upvalues","getstr","upvals","lua_tolstring","ttisstring","cvt2str","luaO_tostring","svalue","lua_tostring","lua_tointegerx","tointeger","lua_tonumberx","tonumber","seen","WeakMap","f_call","ud","luaD_callnoyield","nresults","lua_type","default_chunkname","checkresults","na","nr","lua_callk","nargs","ctx","callstatus","CIST_LUA","status","nny","c_k","c_ctx","luaD_call","lua_pcallk","errfunc","luaD_pcall","extra","c_old_errfunc","CIST_OAH","allowhook","CIST_YPCALL","getupvalref","fidx","ttisLclosure","lua_absindex","lua_arith","op","luaO_arith","lua_atpanic","panicf","old","panic","lua_atnativeerror","errorf","atnativeerror","lua_call","lua_checkstack","res","EXTRA_STACK","luaD_growstack","lua_compare","index1","index2","o1","o2","luaV_equalobj","luaV_lessthan","luaV_lessequal","lua_concat","luaV_concat","lua_dump","writer","data","strip","lua_error","luaG_errormsg","lua_gc","lua_getallocf","lua_getextraspace","lua_getfield","lua_getglobal","lua_geti","lua_getmetatable","objindex","mt","obj","metatable","lua_gettable","lua_gettop","lua_getupvalue","funcindex","up","lua_getuservalue","ttisfulluserdata","uv","uservalue","lua_insert","lua_isboolean","lua_iscfunction","ttisCclosure","lua_isfunction","lua_isinteger","ttisinteger","lua_islightuserdata","lua_isnil","lua_isnone","lua_isnoneornil","lua_isnumber","lua_isproxy","G","lua_isstring","lua_istable","lua_isthread","lua_isuserdata","ttislightuserdata","lua_len","tv","luaV_objlen","lua_load","reader","chunkname","mode","z","luaD_protectedparser","gt","lua_newtable","lua_newuserdata","size","Udata","luaS_newudata","lua_next","luaH_next","lua_pcall","lua_pushboolean","lua_pushfstring","fmt","argp","luaO_pushvfstring","lua_pushglobaltable","lua_pushinteger","lua_pushlightuserdata","lua_pushliteral","ts","lua_pushlstring","subarray","lua_pushnil","lua_pushnumber","lua_pushstring","lua_pushthread","mainthread","lua_pushvalue","lua_pushvfstring","lua_rawequal","lua_rawget","luaH_get","lua_rawgetp","lua_rawlen","vslen","luaH_getn","lua_rawset","luaH_setfrom","invalidateTMcache","lua_rawseti","luaH_setint","lua_rawsetp","lua_register","lua_remove","lua_replace","lua_setallocf","lua_setfield","lua_seti","lua_setmetatable","ttisnil","lua_settable","lua_setupvalue","aux","lua_setuservalue","lua_status","lua_stringtonumber","sz","luaO_str2num","lua_toboolean","l_isfalse","lua_tocfunction","lua_todataview","u8","DataView","buffer","byteOffset","byteLength","lua_tointeger","lua_tojsstring","jsstring","lua_tonumber","lua_topointer","lua_toproxy","proxy","lua_State","create_proxy","lua_tothread","ttisthread","lua_touserdata","lua_typename","ttypename","lua_upvalueid","ref","lua_upvaluejoin","fidx1","n1","fidx2","n2","ref1","ref2","up2","lua_version","version","lua_xmove","LUAL_BUFFERSIZE","lua_getinfo","lua_getstack","lua_newstate","LUA_ERRFILE","LUA_LOADED_TABLE","LUA_PRELOAD_TABLE","LUA_FILEHANDLE","__name","__tostring","empty","luaL_Buffer","findfield","objidx","level","pushglobalfuncname","ar","pushfuncname","msg","luaL_argerror","extramsg","luaL_error","typeerror","tname","typearg","luaL_getmetafield","luaL_typename","luaL_where","luaL_fileresult","stat","fname","e","errno","luaL_getmetatable","luaL_testudata","tag_error","tag","luaL_checklstring","luaL_checkstring","luaL_optlstring","def","luaL_optstring","luaL_checknumber","d","luaL_checkinteger","interror","luaL_prepbuffsize","B","newend","newsize","max","newbuff","luaL_buffinit","luaL_addlstring","l","luaL_addsize","luaL_addstring","luaL_pushresult","luaL_opt","getS","string","luaL_loadbufferx","buff","luaL_loadbuffer","luaL_loadstring","tt","luaL_callmeta","p_I","p_f","find_subarray","subarr","from_index","sl","loop","j","luaL_getsubtable","luaL_setfuncs","nup","luaL_checkstack","lib","space","errfile","fnameindex","serr","filename","getc","utf8_bom","skipcomment","lf","skipBOM","skipped","luaL_loadfilex","LoadF","pos","getF","bytes","path","xhr","XMLHttpRequest","open","window","responseType","send","statusText","response","com","readstatus","luaL_loadfile","luaL_checkversion_","ver","kind","lua_assert","llex","lopcodes","lparser","OpCodesI","NO_JUMP","BinOpr","OPR_ADD","OPR_SUB","OPR_MUL","OPR_MOD","OPR_POW","OPR_DIV","OPR_IDIV","OPR_BAND","OPR_BOR","OPR_BXOR","OPR_SHL","OPR_SHR","OPR_CONCAT","OPR_EQ","OPR_LT","OPR_LE","OPR_NE","OPR_GT","OPR_GE","OPR_AND","OPR_OR","OPR_NOBINOPR","UnOpr","OPR_MINUS","OPR_BNOT","OPR_NOT","OPR_LEN","OPR_NOUNOPR","hasjumps","tonumeral","make_tvalue","ek","expkind","VKINT","ival","VKFLT","nval","luaK_nil","fs","previous","pc","lasttarget","code","opcode","OP_LOADNIL","pfrom","A","pl","SETARG_A","SETARG_B","luaK_codeABC","getinstruction","info","getjump","offset","sBx","fixjump","dest","jmp","abs","MAXARG_sBx","luaX_syntaxerror","ls","SETARG_sBx","luaK_concat","l1","l2","next","luaK_jump","jpc","luaK_codeAsBx","OP_JMP","condjump","C","luaK_getlabel","getjumpcontroloffset","testTMode","getjumpcontrol","patchtestreg","node","reg","OP_TESTSET","NO_REG","CREATE_ABC","OP_TEST","removevalues","patchlistaux","vtarget","dtarget","luaK_patchtohere","luaK_patchlist","luaK_code","dischargejpc","lineinfo","lastline","getOpMode","iABC","getBMode","OpArgN","getCMode","MAXARG_A","MAXARG_B","MAXARG_C","luaK_codeABx","bc","iABx","iAsBx","MAXARG_Bx","CREATE_ABx","codeextraarg","MAXARG_Ax","CREATE_Ax","OP_EXTRAARG","luaK_codek","OP_LOADK","OP_LOADKX","luaK_checkstack","newstack","freereg","maxstacksize","luaK_reserveregs","ISK","nactvar","freeexp","VNONRELOC","freeexps","e1","e2","r1","r2","addk","h","nk","luaK_intK","luaK_numberK","boolK","luaK_setreturns","VCALL","SETARG_C","VVARARG","luaK_setoneret","VRELOCABLE","luaK_dischargevars","VLOCAL","VUPVAL","OP_GETUPVAL","VINDEXED","ind","vt","OP_GETTABLE","OP_GETTABUP","code_loadbool","jump","OP_LOADBOOL","discharge2reg","VNIL","VFALSE","VTRUE","VK","OP_MOVE","VJMP","discharge2anyreg","need_value","exp2reg","final","p_t","fj","luaK_exp2nextreg","luaK_exp2anyreg","luaK_exp2val","luaK_exp2RK","vk","nilK","MAXINDEXRK","RKASK","negatecondition","jumponcond","cond","ie","OP_NOT","luaK_goiftrue","luaK_goiffalse","constfolding","v1","v2","validop","codebinexpval","line","rk2","rk1","luaK_fixline","luaK_exp2anyregup","luaK_indexed","vkisinreg","luaK_infix","luaK_jumpto","luaK_patchclose","ins","luaK_posfix","OP_CONCAT","OP_ADD","opr","OP_EQ","codecomp","luaK_prefix","ef","expdesc","codeunexpval","OP_UNM","codenot","luaK_ret","first","nret","OP_RETURN","luaK_self","ereg","OP_SELF","luaK_setlist","base","nelems","tostore","LFIELDS_PER_FLUSH","OP_SETLIST","luaK_setmultret","luaK_storevar","vr","ex","OP_SETUPVAL","OP_SETTABLE","OP_SETTABUP","luaK_stringK","LUA_IDSIZE","lapi","currentpc","l_savedpc","swapextra","upvalname","findlocal","numparams","l_base","findvararg","luaF_getlocalname","funcinfo","luaO_chunkid","getfuncname","funcname","CIST_FIN","CIST_TAIL","funcnamefromcode","kname","kvalue","INDEXK","getobjname","filterpc","jmptarget","lastpc","setreg","OCi","OP_TFORCALL","OP_CALL","OP_TAILCALL","testAMode","findsetreg","vn","LUA_ENV","Bx","Ax","tm","CIST_HOOKED","TMS","TM_INDEX","TM_NEWINDEX","TM_ADD","OP_SUB","TM_SUB","OP_MUL","TM_MUL","OP_MOD","TM_MOD","OP_POW","TM_POW","OP_DIV","TM_DIV","OP_IDIV","TM_IDIV","OP_BAND","TM_BAND","OP_BOR","TM_BOR","OP_BXOR","TM_BXOR","OP_SHL","TM_SHL","OP_SHR","TM_SHR","TM_UNM","OP_BNOT","TM_BNOT","OP_LEN","TM_LEN","TM_CONCAT","TM_EQ","OP_LT","TM_LT","OP_LE","TM_LE","tmname","varinfo","getupvalname","stkid","isinstack","luaO_pushfstring","luaG_typeerror","luaT_objtypename","luaG_runerror","luaG_addinfo","src","luaD_throw","luaG_concaterror","p1","p2","luaG_opinterror","luaG_ordererror","t1","t2","luaG_tointerror","luaG_traceexec","mask","hookmask","counthook","hookcount","basehookcount","CIST_HOOKYIELD","luaD_hook","npc","newline","oldpc","lua_gethook","hook","lua_gethookcount","lua_gethookmask","ttisfunction","ttisclosure","is_vararg","auxgetinfo","collectvalidlines","lua_getlocal","local","base_ci","lua_sethook","lua_setlocal","LUAI_MAXCCALLS","lundump","MBuffer","seterrorobj","errcode","oldtop","current_top","setsvalue2s","ERRORSTACKSIZE","luaD_reallocstack","needed","luaD_checkstack","luaD_shrinkstack","inuse","lim","stackinuse","goodsize","floor","luaE_freeCI","luaD_precall","luaE_extendCI","luaD_poscall","fsize","adjust_varargs","l_code","callhook","tryfuncTM","firstResult","nres","wanted","moveresults","setnilvalue","ci_top","actual","nfixargs","fixed","luaT_gettmbyobj","TM_CALL","nResults","nCcalls","stackerror","luaV_execute","errorJmp","g","luaD_rawrunprotected","oldnCcalls","lj","finishCcall","unroll","luaV_finishOp","recover","findpcall","luaF_close","resume_error","narg","resume","firstArg","lua_yieldk","old_top","old_ci","old_allowhooks","old_nny","old_errfunc","SParser","dyd","Dyndata","checkmode","x","f_parser","zgetc","luaU_undump","luaY_parser","luaF_initupvals","luaD_inctop","lua_isyieldable","lua_resume","oldnny","lua_yield","LUAC_DATA","LUAC_VERSION","DumpState","write","DumpBlock","D","DumpByte","y","DumpInt","ab","ArrayBuffer","setInt32","DumpInteger","DumpNumber","setFloat64","DumpString","tsslen","DumpFunction","psource","map","DumpCode","tsvalue","DumpConstants","instack","DumpUpvalues","DumpProtos","locvars","varname","startpc","endpc","DumpDebug","DumpHeader","Proto","id","id_counter","luaF_findupval","local_number","luaF_newLclosure","LClosure","luai_ctype_","lisdigit","lislalnum","lislalpha","lisprint","lisspace","lisxdigit","LUA_MINBUFFER","MAX_INT","luaS_hash","luaS_hashlongstr","EOZ","luaZ_buffer","luaZ_buffremove","luaZ_resetbuffer","luaZ_resizebuffer","FIRST_RESERVED","TK_EOS","TK_FLT","TK_STRING","RESERVED","luaX_tokens","SemInfo","Token","token","seminfo","save","lexerror","luaX_token2str","currIsNewline","current","save_and_next","TVtrue","luaX_newstring","tpair","strong","inclinenumber","linenumber","check_next1","check_next2","read_numeral","expo","ttisfloat","txtToken","skip_sep","read_long_string","sep","skip","esccheck","gethexa","luaO_hexavalue","readhexaesc","utf8esc","UTF8BUFFSZ","luaO_utf8esc","readutf8desc","readdecesc","read_string","del","will","token_to_index","forEach","kidx","LexState","lookahead","envn","isreserved","luaX_lookahead","luaX_next","luaX_setinput","firstchar","luai_apicheck","luai_nummod","MIN_INT","LUA_COMPAT_FLOATSTRING","ldexp","lua_integer2str","lua_number2str","LUA_TPROTO","LUA_TDEADKEY","checktag","checktype","ttisnumber","ttisboolean","ttisshrstring","ttislngstring","ttisdeadkey","setfltvalue","chgfltvalue","setivalue","chgivalue","setfvalue","setpvalue","setbvalue","setsvalue","setuvalue","setthvalue","setclLvalue","sethvalue","setdeadvalue","newidx","freeze","RETS","PRE","POS","mfb","l_str2dloc","result","neg","sigdig","nosigdig","hasdot","neg1","exp1","lua_strx2number","exec","flt","parseFloat","lua_str2number","SIGILS","modes","MAXBY10","MAXLASTD","test","pushstr","Table","JSON","stringify","ids","intarith","luaV_imul","luaV_mod","luaV_div","luaV_shiftl","numarith","pow","LocVar","p3","i1","i2","luaT_trybinTM","bufflen","out","nli","out_i","luaO_int2fb","s2i","l_str2int","pmode","l_str2d","oldidx","oldtv","luaP_opmodes","SIZE_Bx","POS_C","POS_Bx","BITRK","MASK1","MASK0","setarg","fullins","SETARG_Bx","GET_OPCODE","GETARG_A","GETARG_B","GETARG_C","GETARG_Bx","GETARG_Ax","GETARG_sBx","OpArgK","OpArgR","OpArgU","OpCodes","OP_NEWTABLE","OP_FORLOOP","OP_FORPREP","OP_TFORLOOP","OP_CLOSURE","OP_VARARG","POS_A","POS_Ax","POS_B","POS_OP","SETARG_Ax","SET_OPCODE","SIZE_A","SIZE_Ax","SIZE_B","SIZE_C","SIZE_OP","iAx","luaS_eqlngstr","hasmultret","eqstr","BlockCnt","firstlabel","firstgoto","upval","isloop","VVOID","FuncState","prev","bl","np","firstlocal","nlocvars","Vardesc","Labeldesc","Labellist","semerror","error_expected","checklimit","limit","where","errorlimit","testnext","check","checknext","check_condition","check_match","who","str_checkname","TK_NAME","init_exp","codestring","checkname","new_localvar","registerlocalvar","actvar","new_localvarliteral","getlocvar","adjustlocalvars","nvars","newupvalue","singlevaraux","searchvar","markupval","searchupvalue","singlevar","adjust_assign","nexps","enterlevel","leavelevel","closegoto","label","gl","vname","findlabel","lb","newlabelentry","findgotos","enterblock","open_func","leaveblock","breaklabel","tolevel","removevars","movegotosout","undefgoto","close_func","block_follow","withuntil","TK_ELSE","TK_ELSEIF","TK_END","TK_UNTIL","statlist","TK_RETURN","statement","fieldsel","yindex","expr","ConsControl","nh","recfield","cc","rkkey","closelistfield","listfield","field","lastlistfield","body","ismethod","new_fs","clp","addprototype","TK_DOTS","parlist","TK_FUNCTION","codeclosure","explist","funcargs","suffixedexp","primaryexp","priority","left","right","subexpr","uop","TK_NOT","getunopr","TK_INT","TK_NIL","TK_TRUE","TK_FALSE","simpleexp","TK_IDIV","TK_SHL","TK_SHR","TK_CONCAT","TK_NE","TK_EQ","TK_LE","TK_GE","TK_AND","TK_OR","getbinopr","nextop","block","LHS_assign","assignment","lh","nv","conflict","check_conflict","gotostat","TK_GOTO","labelstat","ll","checkrepeated","TK_DBCOLON","skipnoopstat","forbody","isnum","endfor","TK_DO","prep","forstat","fornum","TK_IN","indexname","forlist","TK_FOR","test_then_block","escapelist","jf","TK_THEN","TK_BREAK","funcstat","TK_IF","ifstat","TK_WHILE","whileinit","condexit","whilestat","TK_REPEAT","repeat_init","bl1","bl2","repeatstat","TK_LOCAL","localfunc","localstat","retstat","exprstat","lexstate","funcstate","mainfunc","BASIC_STACK_SIZE","CallInfo","global_State","TM_N","stack_init","L1","freestack","f_luaopen","registry","init_registry","luaT_init","CIST_FRESH","CIST_LEQ","lua_close","close_state","lua_newthread","luaE_freethread","TString","hash","realstring","lightuserdata_hashes","get_lightuserdata_hash","table_hash","Map","dead_strong","dead_weak","add","clear","entry","mark_dead","delete","getgeneric","luaH_getstr","kv","table","keyI","keyO","luaT_typenames_","TM_GC","TM_MODE","luaT_callTM","hasres","luaT_callbinTM","luaT_gettm","ename","fasttm","et","luaT_callorderTM","lua_setallof","conf","LUA_PATH_SEP","LUA_PATH_MARK","LUA_EXEC_DIR","LUA_VDIR","LUA_DIRSEP","LUA_LDIR","LUA_JSDIR","LUA_PATH_DEFAULT","LUA_JSPATH_DEFAULT","LUA_MININTEGER","mantissa","exponent","steps","ceil","LUA_INTEGER_FMT","LUA_INTEGER_FRMLEN","LUA_MAXINTEGER","LUA_NUMBER_FMT","LUA_NUMBER_FRMLEN","frexp","bits","getUint32","lua_getlocaledecpoint","toPrecision","lua_numbertointeger","luaZ_read","BytecodeParser","Z","intSize","size_tSize","instructionSize","integerSize","numberSize","arraybuffer","dv","read","LoadByte","LoadInt","getInt32","LoadNumber","getFloat64","LoadInteger","LoadSize_t","LoadString","static","LoadCode","LoadConstants","LoadProtos","LoadFunction","LoadUpvalues","LoadDebug","checkliteral","checkHeader","checksize","why","byte","S","RA","RB","RKB","RKC","dojump","donextjump","LTnum","l_strcmp","LEnum","forlimit","step","stopnow","ilimit","luaV_tointeger","cvt2num","rs","ra","rb","imul","aLo","bLo","getcached","encup","pushclosure","ncl","tostring","isemptystr","copy2buff","tl","total","slot","newframe","konst","rc","numberop1","numberop2","op1","op2","numberop","rbIdx","nci","oci","nfunc","nfuncOff","ofuncOff","forlim","plimit","pstep","initv","nlimit","nstep","ninit","cb","last","inst","luaV_rawequalobj","luaZ_fill","b_offset","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","prop","hasOwnProperty","Symbol","toStringTag","EPSILON","ARRAY_TYPE","Float32Array","RANDOM","random","setMatrixArrayType","degree","PI","toRadian","equals","clone","identity","fromValues","m00","m01","m10","m11","transpose","a1","invert","a0","a2","a3","det","adjoint","determinant","multiply","b0","b1","b2","b3","rotate","rad","sin","cos","scale","v0","fromRotation","fromScaling","frob","hypot","LDU","U","subtract","exactEquals","multiplyScalar","multiplyScalarAndAdd","sqrt","mul","sub","tx","ty","aa","ac","ad","atx","aty","a4","a5","b4","b5","translate","fromTranslation","fromMat4","m02","m12","m20","m21","m22","a01","a02","a12","a00","a10","a11","a20","a21","a22","b01","b11","b21","b00","b02","b10","b12","b20","b22","fromMat2d","fromQuat","q","x2","y2","z2","xx","yx","yy","zx","zy","zz","wx","wy","wz","normalFromMat4","a03","a13","a23","a30","a31","a32","a33","b03","b04","b05","b06","b07","b08","b09","projection","width","height","a6","a7","a8","b6","b7","b8","m03","m13","m23","m30","m31","m32","m33","axis","rotateX","rotateY","rotateZ","fromXRotation","fromYRotation","fromZRotation","fromRotationTranslation","xy","xz","yz","fromQuat2","translation","bx","by","bz","bw","ax","ay","az","aw","magnitude","getTranslation","mat","getScaling","getRotation","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","fromRotationTranslationScale","sx","sy","fromRotationTranslationScaleOrigin","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","frustum","bottom","near","far","rl","tb","nf","perspective","fovy","aspect","tan","Infinity","perspectiveFromFieldOfView","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","ortho","lr","bt","lookAt","eye","center","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","targetTo","a9","a14","a15","b9","b13","b14","b15","divide","round","scaleAndAdd","distance","squaredDistance","squaredLength","negate","inverse","normalize","cross","lerp","hermite","factorTimes2","factor1","factor2","factor3","factor4","bezier","inverseFactor","inverseFactorTimesTwo","zScale","transformMat4","transformMat3","transformQuat","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","angle","mag","cosine","acos","zero","vec","div","dist","sqrDist","sqrLen","stride","dot","E","F","H","I","J","v3","v4","ix","iy","iz","iw","setAxisAngle","getAxisAngle","out_axis","getAngle","dotproduct","calculateW","exp","ln","atan2","log","slerp","omega","cosom","sinom","scale0","scale1","sqrt1MinusU1","sqrtU1","invDot","conjugate","fromMat3","fRoot","fTrace","fromEuler","halfToRad","cx","cy","cz","tmpvec3","xUnitVec3","yUnitVec3","temp1","temp2","matr","rotationTo","sqlerp","setAxes","view","dq","w1","fromRotationTranslationValues","outer","getReal","getDual","setReal","setDual","ax1","ay1","az1","aw1","bx1","by1","bz1","ax2","ay2","az2","aw2","rotateByQuatAppend","rotateByQuatPrepend","rotateAroundAxis","axisLength","ax0","ay0","az0","aw0","bw1","bx0","by0","bz0","bw0","sqlen","a_dot_b","transformMat2","transformMat2d","p0","sinC","cosC","VEC3_UNIT_X","VEC3_UNIT_Y","VEC3_UNIT_Z","VEC3_ZERO","VEC3_ONE","QUAT_ZERO","QUAT_DEFAULT","vec4Heap","unproject","inverseMatrix","viewport","distanceToPlane","plane","point","distanceToPlane2","distanceToPlane3","testSphere","planes","testCell","planeLength","normalizePlane","unpackPlanes","quatLookAt","worldUp","degToRad","degrees","radToDeg","radians","randomInRange","clamp","minVal","maxVal","invt","copysign","signy","sign","powerOfTwo","isPowerOfTwo","canvas","canvas2","ctx2","blobToImage","blob","url","URL","createObjectURL","image","Image","onload","onerror","blobToImageData","revokeObjectURL","drawImage","getImageData","imageDataToBlob","imageData","putImageData","toBlob","imageDataToDataUrl","toDataURL","imageDataToImage","imageToImageData","resizeImageData","ImageData","document","createElement","getContext","decoder","TextDecoder","encoder","TextEncoder","decodeUtf8","decode","encodeUtf8","utf8","encode","byteLengthUtf8","splitUtf8ByteLength","chunkBytelength","chunks","substr","bytesOf","isStringInBytes","start","end","whichByte","targetByte","int8","Int8Array","int16","Int16Array","int32","Int32Array","uint8","uint16","Uint16Array","uint32","Uint32Array","float32","float64","Float64Array","uint8ToInt8","uint8ToInt16","uint8ToInt32","uint8ToUint16","uint8ToUint32","uint8ToFloat32","uint8ToFloat64","int8ToUint8","int16ToUint8","int32ToUint8","uint16ToUint8","uint32ToUint8","float32ToUint8","float64ToUint8","numberToUint32","number","base256ToString","array","join","BinaryStream","uint8array","remaining","substream","seek","boundIndexOf","readNull","readBinary","readInt8","readInt16","readInt32","readUint8","readUint16","readUint32","readFloat32","readFloat64","readInt8Array","isView","readInt16Array","readInt32Array","readUint8Array","readUint16Array","readUint32Array","readFloat32Array","readFloat64Array","writeUint8Array","writeNull","writeBinary","writeInt8","writeInt16","writeInt32","writeUint8","writeUint16","writeUint32","writeFloat32","writeFloat64","writeInt8Array","writeInt16Array","writeInt32Array","writeUint16Array","writeUint32Array","writeFloat32Array","writeFloat64Array","BitStream","bitBuffer","peekBits","loadBits","readBits","skipBits","basename","lastIndexOf","extname","toLowerCase","isPng","isJpeg","isGif","isWebP","glMatrix","glMatrixAddon","math","urlWithParams","params","entries","encodedParams","separator","IniFile","properties","sections","load","section","startsWith","match","trim","lines","getSection","File","SlkFile","rows","valueString","substring","parseInt","rowCount","biggestColumn","row","columnCount","firstOfRow","encoded","Reference","stream","Md34","model","BoundingSphere","radius","BoundingShape","shape","bone","unknown0","matrix","unknown1","unknown2","unknown3","unknown4","unknown5","unknown6","AnimationReference","interpolationType","animFlags","animId","initValue","nullValue","readInitNullValues","PixelAnimationReference","Uint16AnimationReference","Uint32AnimationReference","Float32AnimationReference","Vector2AnimationReference","Vector3AnimationReference","Vector4AnimationReference","Sd","biggestKey","values","UnsupportedEntry","tagMapping","MD34","MODL","modelName","sequences","stc","stg","sts","bones","numberOfBonesToCheckForSkin","vertexFlags","vertices","divisions","boneLookup","boundings","unknown4To20","attachmentPoints","attachmentPointAddons","ligts","shbxData","cameras","unknown21","materialReferences","materials","particleEmitters","particleEmitterCopies","ribbonEmitters","projections","forces","warps","unknown22","rigidBodies","unknown23","physicsJoints","clothBehavior","unknown24","ikjtData","unknown25","unknown26","partsOfTurrentBehaviors","turrentBehaviors","absoluteInverseBoneRestPositions","tightHitTest","fuzzyHitTestObjects","attachmentVolumes","attachmentVolumesAddon0","attachmentVolumesAddon1","billboardBehaviors","tmdData","unknown27","unknown28","SEQS","interval","movementSpeed","frequency","boundingSphere","STC_","runsConcurrent","stsIndex","stsIndexCopy","animIds","animRefs","sd","STG_","stcIndices","STS_","BONE","parent","location","rotation","visibility","DIV_","triangles","regions","batches","MSEC","REGN","firstVertexIndex","verticesCount","firstTriangleIndex","triangleIndicesCount","bonesCount","firstBoneLookupIndex","boneLookupIndicesCount","boneWeightPairsCount","rootBoneIndex","_index","BAT_","regionIndex","materialReferenceIndex","MATM","materialType","materialIndex","MAT_","additionalFlags","blendMode","usedRTTChannels","specularity","depthBlendFalloff","cutoutThreshold","specMult","emisMult","diffuseLayer","decalLayer","specularLayer","glossLayer","emissiveLayer","emissive2Layer","evioLayer","evioMaskLayer","alphaMaskLayer","alphaMask2Layer","normalLayer","heightLayer","lightMapLayer","ambientOcclusionLayer","unknown7","unknown8","layerBlendType","emisBlendType","emisMode","specType","unknown9","unknown10","unknown11","LAYR","imagePath","color","uvSource","colorChannelSetting","brightMult","midtoneOffset","noiseAmp","noiseFreq","rttChannel","videoFrameRate","videoStartFrame","videoEndFrame","videoMode","videoSyncTiming","videoPlay","videoRestart","flipBookRows","flipBookColumns","flipBookFrame","uvOffset","uvAngle","uvTiling","brightness","triPlanarOffset","triPlanarScale","fresnelType","fresnelExponent","fresnelMin","fresnelMaxOffset","fresnelInvertedMaskX","fresnelInvertedMaskY","fresnelInvertedMaskZ","fresnelRotationYaw","fresnelRotationPitch","EVNT","BNDS","ATT_","unknown","CAM_","fieldOfView","farClip","nearClip","clip2","focalDepth","falloffStart","falloffEnd","depthOfField","SDEV","SDU6","SDFG","SDS6","SDR3","SD2V","SD3V","SD4Q","SDCC","SDMB","FLAG","LITE","ATVL","PATU","TRGD","DIS_","CMS_","CMP_","TER_","VOL_","VON_","CREP","STBM","LFSB","LFLR","PAR_","PARC","PROJ","PHYJ","PHCC","PHAC","PHCL","FOR_","DMSE","PHSH","PHRB","SSGS","BBSC","SRIB","RIB_","IKJT","SHBX","WRP_","IndexEntry","entriesCount","mapping","readerOffset","entrySize","Model","header","modelEntries","isM3","TokenStream","ident","indentSpaces","precision","readToken","inComment","inString","peek","readInt","readFloat","readVector","readVectorsBlock","readColor","writeLine","repeat","writeFlag","flag","writeFlagAttrib","writeNumberAttrib","floatDecimals","writeStringAttrib","writeVectorAttrib","floatArrayDecimals","writeColor","writeVector","writeVectorArrayBlock","startBlock","endBlock","headers","startObjectBlock","replace","endBlockComma","indent","unindent","trunc","Extent","boundsRadius","readMdx","writeMdx","writeMdl","moveSpeed","nonLooping","rarity","syncPoint","extent","readMdl","readBlock","Animation","globalSequenceId","frames","inTans","outTans","tracksCount","readMdxValue","writeMdxValue","readMdlValue","writeMdlValue","getByteLength","bytesPerValue","valuesPerTrack","UintAnimation","FloatAnimation","Vector3Animation","Vector4Animation","KMTF","KMTA","KMTE","KFC3","KFCA","KFTC","KTAT","KTAR","KTAS","KGAO","KGAC","KGTR","KGRT","KGSC","KLAS","KLAE","KLAC","KLAI","KLBI","KLBC","KLAV","KATV","KPEE","KPEG","KPLN","KPLT","KPEL","KPES","KPEV","KP2S","KP2R","KP2L","KP2G","KP2E","KP2N","KP2W","KP2V","KPPA","KPPC","KPPE","KPPL","KPPS","KPPV","KRHA","KRHB","KRAL","KRCO","KRTX","KRVS","KCTR","KTTR","KCRL","AnimatedObject","animations","readAnimations","animation","writeAnimations","readAnimation","writeAnimation","_version","stringToMode","filterMode","textureId","textureAnimationId","coordId","alpha","emissiveGain","fresnelColor","fresnelOpacity","fresnelTeamColor","super","readAnimatedBlock","Material","priorityPlane","shader","layers","layer","Texture","replaceableId","wrapMode","TextureAnimation","Geoset","normals","faceTypeGroups","faceGroups","faces","vertexGroups","matrixGroups","matrixIndices","materialId","selectionGroup","selectionFlags","lod","lodName","sequenceExtents","tangents","skin","uvSets","sequenceExtent","uvSet","vertexGroup","vectors","indices","groups","_","groupSize","GeosetAnimation","geosetId","GenericObject","objectId","parentId","getGenericByteLength","eachAnimation","writeNonGenericAnimationChunks","writeGenericHeader","writeGenericAnimations","wantGeneric","isGeneric","geosetAnimationId","readGenericBlock","Light","attenuation","intensity","ambientColor","ambientIntensity","Helper","Attachment","attachmentId","ParticleEmitter","emissionRate","gravity","longitude","latitude","lifeSpan","speed","ParticleEmitter2","variation","columns","headOrTail","tailLength","timeMiddle","segmentColors","segmentAlphas","segmentScaling","headIntervals","tailIntervals","squirt","ParticleEmitterPopcorn","animationVisiblityGuide","RibbonEmitter","heightAbove","heightBelow","textureSlot","farClippingPlane","nearClippingPlane","targetPosition","EventObject","tracks","track","CollisionShape","FaceEffect","UnknownChunk","chunk","isMdx","isMdl","isStringInString","animationFile","blendTime","globalSequences","textures","textureAnimations","geosets","geosetAnimations","lights","helpers","attachments","pivotPoints","particleEmitters2","particleEmittersPopcorn","eventObjects","collisionShapes","faceEffects","bindPose","unknownChunks","loadMdx","loadMdl","loadVersionChunk","loadModelChunk","loadStaticObjects","loadGlobalSequenceChunk","loadDynamicObjects","loadPivotPointChunk","loadBindPoseChunk","object","_size","saveMdx","saveVersionChunk","saveModelChunk","saveStaticObjectChunk","saveGlobalSequenceChunk","saveDynamicObjectChunk","savePivotPointChunk","saveBindPoseChunk","objects","globalSequence","getObjectsByteLength","pivotPoint","loadVersionBlock","loadModelBlock","loadNumberedObjectBlock","loadGlobalSequenceBlock","loadObject","loadPivotPointBlock","loadBindPoseBlock","matrices","saveMdl","saveVersionBlock","saveModelBlock","saveStaticObjectsBlock","saveGlobalSequenceBlock","saveObjects","savePivotPointBlock","saveBindPoseBlock","getStaticObjectsChunkByteLength","getDynamicObjectsChunkByteLength","getBindPoseChunkByteLength","Sequence","Layer","Bone","Camera","Block","compressedSize","normalSize","HASH_TABLE_KEY","HASH_ENTRY_DELETED","HASH_ENTRY_EMPTY","BLOCK_TABLE_KEY","FILE_ENCRYPTED","FILE_OFFSET_ADJUSTED_KEY","FILE_SINGLE_UNIT","FILE_EXISTS","BlockTable","addEmpties","howMany","uint32array","decryptBlock","encryptBlock","bytesHeap","longHeap","MpqCrypto","cryptTable","seed","seed1","seed2","toUpperCase","ch","decrypted","computeFileKey","sepIndex","pathlessName","encryptionKey","zero$1","buf","LITERALS$1","L_CODES$1","D_CODES$1","MAX_BITS$1","extra_lbits","extra_dbits","extra_blbits","bl_order","static_ltree","static_dtree","_dist_code","_length_code","MAX_MATCH$1","base_length","base_dist","StaticTreeDesc","static_tree","extra_bits","extra_base","elems","max_length","has_stree","static_l_desc","static_d_desc","static_bl_desc","TreeDesc","dyn_tree","stat_desc","max_code","d_code","put_short","pending_buf","pending","send_bits","bi_valid","bi_buf","send_code","tree","bi_reverse","gen_codes","bl_count","next_code","init_block","dyn_ltree","dyn_dtree","bl_tree","END_BLOCK","opt_len","static_len","sym_next","matches","bi_windup","smaller","depth","_n2","_m2","pqdownheap","heap","heap_len","compress_block","ltree","dtree","lc","sym_buf","build_tree","desc","stree","heap_max","xbits","overflow","gen_bitlen","scan_tree","curlen","prevlen","nextlen","max_count","min_count","REP_3_6","REPZ_3_10","REPZ_11_138","send_tree","static_init_done","_tr_stored_block$1","stored_len","_tr_init_1","LENGTH_CODES$1","tr_static_init","l_desc","d_desc","bl_desc","_tr_flush_block_1","opt_lenb","static_lenb","max_blindex","strm","data_type","block_mask","detect_data_type","BL_CODES$1","build_bl_tree","strategy","lcodes","dcodes","blcodes","rank","send_all_trees","_tr_tally_1","sym_end","_tr_align_1","STATIC_TREES","bi_flush","trees","_tr_init","_tr_stored_block","_tr_flush_block","_tr_tally","_tr_align","adler32_1","adler","crcTable","makeTable","crc32_1","crc","messages","constants$2","Z_NO_FLUSH","Z_PARTIAL_FLUSH","Z_SYNC_FLUSH","Z_FULL_FLUSH","Z_FINISH","Z_BLOCK","Z_TREES","Z_OK","Z_STREAM_END","Z_NEED_DICT","Z_ERRNO","Z_STREAM_ERROR","Z_DATA_ERROR","Z_MEM_ERROR","Z_BUF_ERROR","Z_NO_COMPRESSION","Z_BEST_SPEED","Z_BEST_COMPRESSION","Z_DEFAULT_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_DEFAULT_STRATEGY","Z_BINARY","Z_TEXT","Z_UNKNOWN","Z_DEFLATED","Z_NO_FLUSH$2","Z_FULL_FLUSH$1","Z_FINISH$3","Z_BLOCK$1","Z_OK$3","Z_STREAM_END$3","Z_STREAM_ERROR$2","Z_DATA_ERROR$2","Z_BUF_ERROR$1","Z_DEFAULT_COMPRESSION$1","Z_DEFAULT_STRATEGY$1","Z_DEFLATED$2","MAX_MATCH","MIN_LOOKAHEAD","INIT_STATE","BUSY_STATE","FINISH_STATE","errorCode","slide_hash","wsize","w_size","hash_size","head","HASH","hash_shift","hash_mask","flush_pending","avail_out","output","pending_out","next_out","total_out","flush_block_only","block_start","strstart","put_byte","putShortMSB","read_buf","avail_in","input","next_in","wrap","total_in","longest_match","cur_match","chain_length","max_chain_length","scan","best_len","prev_length","nice_match","_win","wmask","w_mask","strend","scan_end1","scan_end","good_match","match_start","fill_window","_w_size","more","window_size","insert","ins_h","deflate_stored","flush","have","min_block","pending_buf_size","used","high_water","deflate_fast","hash_head","bflush","match_length","max_lazy_match","MIN_MATCH","deflate_slow","max_insert","prev_match","match_available","Config","good_length","max_lazy","nice_length","max_chain","configuration_table","DeflateState","gzhead","gzindex","method","last_flush","w_bits","hash_bits","HEAP_SIZE","MAX_BITS","lit_bufsize","deflateStateCheck","deflateResetKeep","deflateReset","lm_init","deflateInit2","windowBits","memLevel","deflate_2$1","old_flush","level_flags","text","hcrc","comment","time","os","beg","gzhead_extra","bstate","deflate_huff","deflate_rle","deflateSetDictionary_1","dictionary","dictLength","tmpDict","avail","deflate_1$2","deflateInit","deflateSetHeader","deflate","deflateEnd","deflateSetDictionary","deflateInfo","_has","assign","sources","flattenChunks","STR_APPLY_UIA_OK","__","_utf8len","strings","string2buf","c2","m_pos","str_len","buf_len","buf2string","utf16buf","c_len","buf2binstring","utf8border","zstream","toString$1","Z_NO_FLUSH$1","Z_FINISH$2","Z_OK$2","Z_STREAM_END$2","Z_DEFLATED$1","Deflate$1","options","chunkSize","opt","raw","gzip","ended","dict","_dict_set","deflate$1","deflator","flush_mode","_flush_mode","onData","onEnd","deflate_1$1","Deflate","deflateRaw","constants","BAD$1","inffast","_in","_out","dmax","whave","wnext","s_window","hold","lcode","dcode","lmask","dmask","here","from_source","lencode","distcode","lenbits","distbits","dolen","dodist","sane","MAXBITS","lbase","lext","dbase","dext","inftrees","lens","lens_index","codes","table_index","work","opts","incr","fill","low","sym","root","curr","drop","huff","offs","here_bits","here_op","here_val","Z_FINISH$1","Z_OK$1","Z_STREAM_END$1","Z_NEED_DICT$1","Z_STREAM_ERROR$1","Z_DATA_ERROR$1","Z_MEM_ERROR$1","HEAD","DICT","TYPE","TYPEDO","COPY_","LEN_","LEN","CHECK","BAD","zswap32","InflateState","havedict","wbits","ncode","nlen","ndist","lendyn","distdyn","back","was","inflateStateCheck","inflateResetKeep","inflateReset","inflateReset2","inflateInit2","lenfix","distfix","virgin","fixedtables","updatewindow","inflate_2$1","put","last_bits","last_op","last_val","hbuf","order","inf_leave","done","xflags","extra_len","inflate_1$2","inflateInit","inflate","inflateEnd","inflateGetHeader","inflateSetDictionary","dictid","inflateInfo","gzheader","Inflate$1","inflate$1","inflator","last_avail_out","next_out_utf8","tail","utf8str","inflate_1$1","Inflate","inflateRaw","ungzip","deflate_1","inflate_1","CMP_BINARY","TDcmpStruct","in_buff","ctype","outputPos","dsize_bits","dsize_mask","bit_buff","in_pos","out_buff","PKDCL_OK","PKDCL_STREAM_END","DistBits","DistCode","ExLenBits","LenBase","LenBits","LenCode","ChBitsAsc","ChCodeAsc","generatedDecodeTabs","DistPosCodes","LengthCodes","generatedAscTabs","offs2C34","offs2D34","offs2E34","offs2EB4","GenDecodeTabs","positions","start_indexes","length_bits","elements","WasteBits","pWork","nBits","DecodeLit","extra_length_bits","length_code","extra_length","uncompressed_byte","DecodeDist","rep_length","dist_pos_code","explode","acc","pChCodeAsc","pChBitsAsc","bits_asc","GenAscTabs","next_literal","minus_dist","Expand","searchHeader","isArchive","MpqFile","archive","rawBuffer","headerOffset","blockIndex","padStart","nameResolved","arrayBuffer","readonly","locale","platform","hashTable","blockTable","splice","files","rename","newName","newHash","sector","decompressSector","sectorCount","sectorSize","sectorOffsets","uncompressedSize","decompressedSize","compressionMask","offsets","sectors","compression","sectorOffset","compressed","isCompressed","reEncrypt","newEncryptionKey","offsetChanged","MpqHash","nameA","nameB","localePlatform","MpqHashTable","getInsertionIndex","insertionIndex","MpqArchive","formatVersionSectorSize","hashPos","blockPos","hashSize","blockSize","listfile","headerSize","saveMemory","getFileNames","file","hashes","blocks","filesSize","archiveSize","log2","saved","removeBlock","names","countUnresolved","unresolved","applyListfile","has","resizeHashtable","oldEntries","Archive","Crypto","HashTable","Hash","Import","isCustom","War3MapImp","newPath","Modification","variableType","levelOrVariation","dataPointer","useOptionalInts","ModifiedObject","oldId","newId","sets","setsFlag","modifications","formatVersion","modification","ModificationTable","War3MapW3d","originalTable","customTable","bufferOrStream","War3MapW3u","CustomTextTrigger","textLength","War3MapWct","trigger","triggers","TriggerCategory","isComment","Variable","isArray","arraySize","isInitialized","initialValue","SubParameters","beginParameters","parameters","triggerData","signature","getFunction","parameter","Parameter","subParameters","arrayIndex","ECA","group","isEnabled","ecas","isChildECA","eca","Trigger","description","isInitiallyOff","runOnInitialization","category","War3MapWtg","categories","variables","variable","War3MapWts","stringMap","getString","setString","Force","playerMasks","Player","race","isFixedStartPosition","startLocation","allyLowPriorities","allyHighPriorities","RandomItem","chance","RandomItemSet","items","item","RandomItemTable","RandomUnit","RandomUnitTable","columnTypes","units","unit","TechAvailabilityChange","playerFlags","UpgradeAvailabilityChange","levelAffected","availability","War3MapW3i","saves","editorVersion","buildVersion","author","recommendedPlayers","cameraBounds","cameraBoundsComplements","playableSize","tileset","campaignBackground","loadingScreenModel","loadingScreenText","loadingScreenTitle","loadingScreenSubtitle","loadingScreen","prologueScreenModel","prologueScreenText","prologueScreenTitle","prologueScreenSubtitle","useTerrainFog","fogHeight","fogDensity","fogColor","globalWeather","soundEnvironment","lightEnvironmentTileset","waterVertexColor","scriptMode","graphicsMode","players","upgradeAvailabilityChanges","techAvailabilityChanges","randomUnitTables","randomItemTables","player","force","upgradeAvailabilityChange","techAvailabilityChange","randomUnitTable","randomItemTable","change","getBuildVersion","War3Map","maxPlayers","imports","readImports","setImportsFile","archiveBuffer","information","getMapInformation","getImportNames","import","getScriptFile","parser","readTriggers","readCustomTextTriggers","readStringTable","readModifications","fileNames","Doodad","life","itemTable","itemSets","editorId","itemSet","TerrainDoodad","War3MapDoo","doodads","terrainDoodads","doodad","terrainDoodad","MinimapIcon","icons","icon","shadows","targetLocation","angleOfAttack","roll","cinematicName","localPitch","localYaw","localRoll","camera","Corner","groundHeight","waterHeight","mapEdge","ramp","blight","water","boundary","groundTexture","cliffVariation","groundVariation","cliffTexture","layerHeight","waterAndEdge","textureAndFlags","cliffTextureAndLayer","War3MapW3e","haveCustomTileset","groundTilesets","cliffTilesets","mapSize","centerOffset","corners","column","corner","groundTileset","cliffTileset","destructables","abilities","buffs","upgrades","creationNumber","weatherEffectId","ambientSound","region","Region","Sound","eaxEffect","fadeInRate","fadeOutRate","volume","pitch","pitchVariance","channel","minDistance","maxDistance","distanceCutoff","coneInside","coneOutside","coneOutsideVolume","coneOrientationX","coneOrientationY","coneOrientationZ","War3MapW3s","sounds","sound","ModificationObject","pathing","inIdString","readSafe","stringToBase256","readUntil","delimiter","tokens","TriggerData","types","functions","presets","externalTypes","externalFunctions","externalPresets","addTriggerData","isExternal","addTriggerTypes","addTriggerDataFunctions","addTriggerDataPresets","scriptName","returnType","addJassFunctions","jass","getBaseType","isBaseFunction","getFunctionType","getPreset","preset","isCustomPreset","DroppedItem","DroppedItemSet","InventoryItem","ModifiedAbility","activeForAutocast","heroLevel","Unit","hitpoints","mana","droppedItemTable","droppedItemSets","goldAmount","targetAcquisition","heroStrength","heroAgility","heroIntelligence","itemsInInventory","modifiedAbilities","randomFlag","itemClass","unitGroup","positionInGroup","customTeamColor","waygate","subversion","modifiedAbility","randomUnit","droppedItemSet","itemInInventory","War3MapUnitsDoo","MapTitle","visible","chapterTitle","mapTitle","MapOrder","campaignVersion","difficulty","backgroundScreen","backgroundScreenPath","minimapImagePath","ambientSoundPath","terrainFog","fogStartZ","fogEndZ","userInterface","mapTitles","mapOrders","mapOrder","title","doo","imp","mmp","shd","w3c","w3d","w3e","w3i","w3o","w3r","w3s","w3u","wct","wpm","wtg","wts","unitsdoo","w3f","convertBitRange","fromBits","toBits","_typeof","iterator","JpegError","dctZigZag","dctCos1","dctSin1","dctCos3","dctSin3","dctCos6","dctSin6","dctSqrt2","dctSqrt1d2","buildHuffmanTable","codeLengths","children","getBlockBufferOffset","component","col","blocksPerLine","decodeScan","frame","components","resetInterval","spectralStart","spectralEnd","successivePrev","successive","mcusPerLine","progressive","startOffset","bitsData","bitsCount","readBit","nextByte","decodeHuffman","receive","receiveAndExtend","eobrun","successiveACNextValue","successiveACState","decodeMcu","mcu","mcuCol","decodeBlock","componentsLength","decodeFn","huffmanTableDC","diff","blockData","pred","huffmanTableAC","fileMarker","mcuExpected","blocksPerColumn","mcusPerColumn","mcuToRead","findNextFileMarker","invalid","marker","quantizeAndInverse","blockBufferOffset","qt","quantizationTable","v5","v6","v7","p4","p5","p6","p7","buildComponentData","computationBuffer","blockRow","blockCol","currentPos","startPos","peekUint16","maxPos","newPos","currentMarker","newMarker","JpegImage","decodeTransform","colorTransform","parse","readDataBlock","endOffset","prepareComponents","samplesPerLine","maxH","scanLines","maxV","blocksPerLineForMcu","blocksBufferSize","jfif","adobe","quantizationTables","huffmanTablesAC","huffmanTablesDC","appData","major","minor","densityUnits","xDensity","yDensity","thumbWidth","thumbHeight","thumbData","flags0","flags1","transformCode","quantizationTablesEnd","quantizationTableSpec","tableData","extended","componentIds","componentId","componentsCount","qId","quantizationId","huffmanLength","huffmanTableSpec","codeLengthSum","huffmanValues","selectorsCount","componentIndex","tableSpec","successiveApproximation","processed","scaleX","scaleY","numComponents","getData","lineData","lineOffset","scanLine","bufferOffset","offset2","sample","BlpImage","content","alphaBits","hasMipmaps","mipmapOffsets","mipmapSizes","jpgHeader","pallete","getMipmap","jpegImage","bitStream","bitsToByte","dataIndex","paletteIndex","mipmaps","fakeMipmaps","dxt4to8","dxt5to8","dxt6to8","dx1colors","dx3colors","dx5alphas","red","green","dx1Colors","color0","color1","r0","g0","g1","dx3Colors","rgColors","FOURCC_DXT1","FOURCC_DXT3","FOURCC_DXT5","FOURCC_ATI2","DdsImage","format","mipmapWidths","mipmapHeights","mipmapDatas","fourCC","extendedHeader","dxgiFormat","mipmap","dst","blockY","blockHeight","blockX","blockWidth","dstI","rowOffset","dstOffset","dstIndex","colorOffset","decodeDxt1","rowBytes","colorBits","colorIndex","decodeDxt3","alpha0","alpha1","alphaOffset","alphaIndex","decodeDxt5","blockOffset","redbits","greenbits","shifts","decodeRgtc","isDds","TgaImage","tga","_checkHeader","imageType","hasColorMap","colorMapLength","colorMapDepth","colorMapType","pixelDepth","_decodeRLE","_getImageData8bits","_getImageData16bits","_getImageData24bits","_getImageData32bits","_getImageDataGrey8bits","_getImageDataGrey16bits","idLength","colorMapIndex","offsetX","offsetY","hasEncoding","isGreyColor","palette","createImageData","Uint8ClampedArray","getCanvas","getDataURL","isTga","ini","slk","m3","mdlx","mpq","w3x","blp","dds","async","fetchDataType","dataType","ok","fetch","ClientBuffer","byteView","floatView","createBuffer","reserve","bindBuffer","ARRAY_BUFFER","bufferData","DYNAMIC_DRAW","bindAndUpdate","bufferSubData","ClientDataTexture","texture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","texImage2D","RGBA","FLOAT","texSubImage2D","DataTexture","channels","RGB","activeTexture","TEXTURE0","Shader","webgl","program","uniforms","attribs","attribsCount","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","use","useShader","WebGL","currentShader","extensions","twoByTwo","emptyTexture","UNSIGNED_BYTE","ensureExtension","ext","getExtension","createShader","vertexSource","fragmentSource","vertex","VERTEX_SHADER","shaderSource","compileShader","fragment","FRAGMENT_SHADER","createProgram","attachShader","linkProgram","LINK_STATUS","vertexLog","getShaderInfoLog","fragmentLog","enableVertexAttribs","enableVertexAttribArray","disableVertexAttribs","disableVertexAttribArray","oldAttribs","newAttribs","useProgram","webglResource","bindTextureAndWrap","wrapS","wrapT","setTextureMode","magFilter","minFilter","createClientBuffer","createDataTexture","createClientDataTexture","vectorHeap","vectorHeap2","vectorHeap3","quatHeap","facingCorrection","isPerspective","isOrtho","leftClipPlane","rightClipPlane","bottomClipPlane","topClipPlane","nearClipPlane","farClipPlane","inverseRotation","viewMatrix","projectionMatrix","viewProjectionMatrix","inverseViewMatrix","inverseViewProjectionMatrix","directionX","directionY","directionZ","billboardedVectors","update","setLocation","move","setRotation","face","moveToAndFace","reset","cameraToWorld","worldToCamera","worldToScreen","screenToWorldRay","Cell","instances","instance","remove","isVisible","Grid","cellWidth","cellDepth","cells","moved","bounds","worldLocation","worldScale","cell","EmittedObjectUpdater","alive","dt","timeScale","health","kill","Scene","viewer","grid","visibleCells","visibleInstances","updatedParticles","audioEnabled","audioContext","emittedObjectUpdater","lightPosition","AudioContext","disableAudio","suspend","addInstance","scene","removeInstance","detach","removeScene","forward","positionX","positionY","positionZ","forwardX","forwardY","forwardZ","upX","upY","upZ","rendered","updateFrame","sort","renderInstance","startFrame","scissor","depthMask","clearColor","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","renderOpaque","renderTranslucent","render","clearEmittedObjects","Resource","resourceData","blockers","fetchUrl","unload","GenericResource","HandlerResource","pathSolver","ImageTexture","LINEAR","LINEAR_MIPMAP_LINEAR","generateMipmap","DebugRenderMode","ModelViewer","resources","resourceMap","promiseMap","handlers","Set","scenes","sharedCache","debugRenderMode","None","directLoadId","depthFunc","LEQUAL","enable","DEPTH_TEST","SCISSOR_TEST","enableAudio","addHandler","isValidSource","reason","addScene","solverParams","finalSrc","promise","detectFormat","resource","then","actualSrc","HTMLImageElement","HTMLCanvasElement","HTMLVideoElement","isImageSource","detectMime","Blob","all","checkLoadingStatus","callback","fetchPromise","performance","now","setTimeout","whenAllLoaded","updateAndRender","locationHeap","rotationHeap","scalingHeap","Node","pivot","localLocation","localRotation","localScale","worldRotation","inverseWorldLocation","inverseWorldRotation","inverseWorldScale","localMatrix","worldMatrix","dontInheritTranslation","dontInheritRotation","dontInheritScaling","setPivot","recalculateTransformation","setScale","varying","setUniformScale","uniform","setTransformation","resetTransformation","movePivot","rotateLocal","uniformScale","setParent","computedLocation","parentPivot","computedRotation","computedScaling","parentInverseScale","parentScale","child","Bounds","fromExtents","ModelInstance","textureOverrides","show","hide","shown","hidden","overrideTexture","getBounds","setScene","updateAnimations","_dt","biggest","bufferOrImage","isPOT","compressedTextures","internalFormat","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","pixelStorei","UNPACK_ALIGNMENT","compressedTexImage2D","LUMINANCE_ALPHA","M3Texture","repeatS","repeatT","layerTypeToTextureUnit","diffuse","decal","specular","gloss","emissive","emissive2","evio","evioMask","alphaMask","alphaMask2","normal","heightMap","lightMap","ao","M3Layer","material","layerReference","active","colorChannels","uvCoordinate","textureUnit","clampResult","teamColorMode","settings","uniformMap","enabled","m3Texture","uniform1f","STANDARD_MATERIAL_OFFSET","uniform1i","unbind","M3StandardMaterial","doubleSided","bindCommon","BLEND","blendFunc","ONE","disable","CULL_FACE","uniform4f","M3Bone","inhertTranslation","inheritScale","inheritRotation","billboard1","billboard2","twoDProjection","animated","inverseKinematics","skinned","real","M3Sequence","sequence","M3Sts","hasData","animRef","M3Sd","M3SdContainer","addSds","sds","getValueUnsafe","animationReference","va","vb","fakeVa","M3Stc","uints","container","M3Stg","stcs","stss","M3Attachment","attachment","M3Camera","M3Region","elementArray","drawElements","TRIANGLES","UNSIGNED_SHORT","cameraRayHeap","rotationHeap2","SkeletalNode","billboarded","billboardedX","billboardedY","billboardedZ","dirty","wasDirty","convertBasis","_rotation","createSkeletalNodes","nodes","count3","count4","count16","pivots","localLocations","localRotations","localScales","worldLocations","worldRotations","worldScales","inverseWorldLocations","invereseWorldRotations","inverseWorldScales","localMatrices","worldMatrices","i3","i33","i4","i44","i16","i1616","M3Node","halfPI","M3Skeleton","sharedNodeData","modelNodes","initialReference","modelNode","getValue4","getValue3","getValue","getValue2","unsafeHeap","boneHeap","M3ModelInstance","skeleton","teamColor","vertexColor","sequenceLoopMode","sequenceEnded","forced","boneTexture","setSequence","setTexture","updateSkeletonAndBoneTexture","isAnimated","finalMatrix","m3Cache","vertexSize","uvSetCount","standardShaders","uniform4fv","uniformMatrix4fv","uniform3fv","vertexAttribPointer","SHORT","ELEMENT_ARRAY_BUFFER","elementBuffer","batch","sequenceId","setTeamColor","setVertexColor","setSequenceLoopMode","getAttachment","M3Batch","teamColors","uniform3f","handlerData","bufferOrParser","materialMaps","setupGeometry","standardMaterials","regionId","materialMap","stgs","addGlobalAnims","totalElements","STATIC_DRAW","mapMaterial","OfflineAudioContext","MappedDataRow","MappedData","mapped","property","getRow","getProperty","setRow","findRow","expectedValue","SdSequence","isGlobal","constant","defval","firstValue","every","element","startFrameIndex","endFrameIndex","lengthLessOne","endFrame","timeBetweenFrames","interpolate","forcedInterpMap","floatDefval","uintDefval","visibilityDefval","translationDefval","rotationDefval","scaleDefval","colorDefval","defVals","forcedInterp","counter","isVariant","ScalarSd","startValue","VectorSd","QuatSd","createTypedSd","variants","getScalarValue","defaultValue","getVectorValue","getQuatValue","addVariants","variantName","addVariantIntersection","textureAnimation","getScale","emitterFilterMode","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","ZERO","SRC_COLOR","DST_COLOR","layerId","blendSrc","blendDst","blended","unshaded","sphereEnvironmentMap","twoSided","unfogged","noDepthTest","noDepthSet","depthMaskValue","layerFilterMode","getAlpha","getTextureId","geosetAnimation","getColor","cameraAnchored","anyBillboarding","getVisibility","_sequence","_frame","_counter","light","getAttenuationStart","getAttenuationEnd","getIntensity","getAmbientIntensity","getAmbientColor","internalModel","ParticleEmitterObject","getSpeed","getLatitude","getLongitude","getLifeSpan","getGravity","getEmissionRate","startHeap","endHeap","BYTES_PER_OBJECT","FLOATS_PER_OBJECT","BYTE_OFFSET_COLOR","BYTE_OFFSET_TAIL","BYTE_OFFSET_LEFT_RIGHT_TOP","FLOAT_OFFSET_P0","BYTE_OFFSET_P0","FLOAT_OFFSET_HEALTH","BYTE_OFFSET_HEALTH","BYTE_OFFSET_TEAM_COLOR","EMITTER_PARTICLE2_TEXTURE_OFFSET","EMITTER_EVENT_TEXTURE_OFFSET","bindEventObjectEmitterBuffer","floatOffset","p0Offset","renderEmitter","emitterType","emitterObject","geometryEmitterType","instancedArrays","modelSpace","facing","velocity","bindParticleEmitter2Buffer","mdxCache","colors","intervals","replaceable","mdxTexture","internalTexture","teamGlows","xYQuad","teamColored","bindParticleEmitter2Shader","chainLengthFactor","leftRightTopOffset","bindRibbonEmitterBuffer","actualTexture","bindRibbonEmitterShader","intervalTimes","bindEventObjectSplEmitterShader","bindEventObjectUbrEmitterShader","drawArraysInstancedANGLE","MdxTexture","ParticleEmitter2Object","lineEmitter","texturesExt","reforged","cellHeight","blendModes","getWidth","getLength","getVariation","RibbonEmitterObject","getHeightBelow","getHeightAbove","getTextureSlot","keyframe","getTargetTranslation","EventObjectEmitterObject","eventObject","decodedBuffers","hd","getValueAtTime","collisionShape","SkinningType","geoset","layerOrMaterial","skinningType","isHd","positionOffset","normalOffset","tangentOffset","skinOffset","faceOffset","faceType","bindShared","bindVertexGroups","skinDataType","bytesPerSkinElement","bindVertexGroupsExtended","bindSkin","bindExtended","bindHd","Skin","ExtendedVertexGroups","BatchGroup","layerAlphas","normalsLayer","ormLayer","teamColorLayer","environmentMapLayer","layerAlpha","diffuseId","normalsId","ormId","emissiveId","teamColorId","environmentMapId","diffuseTexture","normalsTexture","ormTexture","emissiveTexture","teamColorTexture","environmentMapTexture","actualDiffuseTexture","actualNormalsTexture","actualOrmTexture","actualEmissiveTexture","actualTeamColorTexture","actualEnvironmentMapTexture","geosetColors","layerTextures","uvAnims","geosetIndex","layerIndex","geosetColor","textureIndex","layerTexture","uvAnim","uniform2f","EmitterGroup","particlesShader","rectBuffer","vertexAttribDivisorANGLE","getPrio","matchingGroup","createMatchingGroup","MdxNode","visibilityHeap","AttachmentInstance","internalInstance","Emitter","currentEmission","updateEmission","emitObject","emitData","createObject","otherObject","MdxEmitter","EmittedObject","velocityHeap","latitudeHeap","lifeSpanHeap","gravityHeap","speedHeap","Particle","emissionRateHeap","allowParticleSpawn","widthHeap","lengthHeap","variationHeap","Particle2","lastEmissionKey","belowHeap","aboveHeap","colorHeap","alphaHeap","slotHeap","Ribbon","ribbon","valueHeap","EventObjectEmitter","lastValue","EventObjectSpn","EventObjectSpnEmitter","vertexHeap","EventObjectSplUbr","EventObjectSplEmitter","EventObjectUbrEmitter","EventObjectSnd","panner","createPanner","createBufferSource","refDistance","connect","destination","EventObjectSndEmitter","translationHeap","scaleHeap","textureIdHeap","MdxModelInstance","eventObjectEmitters","sortedNodes","genericObjects","nodeIndex","initNode","helper","attachmentInstance","hierarchy","setParticle2Texture","setEventTexture","genericObject","resetAttachments","updateNodes","sortedGenericObjects","updateBatches","updateBoneTexture","opaqueGroups","translucentGroups","frameTime","resetEventEmitters","mappedDataCallback","decodedDataCallback","decodeAudioData","sdExtendedVert","sdDiffuse","sdTexcoords","sdNormals","hdExtendedVert","hdSkinVert","hdDiffuse","hdNormalMap","hdOcclusion","hdRoughness","hdMetallic","hdTCFactor","hdEmissive","hdTexCoords","hdNormals","hdTangents","sdShader","sdExtendedShader","hdShader","hdExtendedShader","hdSkinShader","sdDebugShaders","hdDebugShaders","shaders","Diffuse","TexCoords","Normals","VertexGroups","NormalMap","Occlusion","Roughness","Metallic","TCFactor","Emissive","Tangents","eventObjectTables","hasLayerAnims","hasGeosetAnims","hasTeamColors","vLayer","particleEmitter","particleEmitter2","ribbonEmitter","positionBytes","normalBytes","uvBytes","tangentBytes","skinBytes","faceBytes","skinTypes","biggestGroup","SkinTypedArray","skinGlType","BYTES_PER_ELEMENT","skinType","maxBones","matrixGroup","vGeoset","setupGeosets","opaqueBatches","translucentBatches","currentGroup","setupGroups","setupHierarchy","loadTeamTextures","teams","teamGlow","getEventObjectSoundFile","tables","raceRow","filePath","safePathSolver","paths","promises","loadGeneric","mappedData","lookupRow","fileName","filtered","filter","getBatchShader","unique","cliffVariations","AAAB","AAAC","AABA","AABB","AABC","AACA","AACB","AACC","ABAA","ABAB","ABAC","ABBA","ABBB","ABBC","ABCA","ABCB","ABCC","ACAA","ACAB","ACAC","ACBA","ACBB","ACBC","ACCA","ACCB","ACCC","BAAA","BAAB","BAAC","BABA","BABB","BABC","BACA","BACB","BACC","BBAA","BBAB","BBAC","BBBA","BBCA","BCAA","BCAB","BCAC","BCBA","BCCA","CAAA","CAAB","CAAC","CABA","CABB","CABC","CACA","CACB","CACC","CBAA","CBAB","CBAC","CBBA","CBCA","CCAA","CCAB","CCAC","CCBA","CCCA","cityCliffVariations","getCliffVariation","dir","TerrainModel","locations","vertexArrayObject","uvs","normalsOffset","uvsOffset","vao","createVertexArrayOES","bindVertexArrayOES","vertexBuffer","texturesOffset","locationAndTextureBuffer","faceBuffer","drawElementsInstancedANGLE","sequenceSorter","randomStandSequence","filterSequences","sequencesLeft","selectSequence","WidgetState","Widget","IDLE","worldScene","heapZ","centeroffset","normalHeap1","normalHeap2","War3MapViewerMap","waterIndex","waterIncreasePerFrame","waterHeightOffset","waterTextures","maxDeepColor","minDeepColor","maxShallowColor","minShallowColor","anyReady","terrainReady","cliffsReady","doodadsReady","unitsReady","tilesetTextures","cliffTextures","cliffModels","tilesets","blightTextureIndex","instanceBuffer","textureBuffer","variationBuffer","waterBuffer","waterHeightMap","cliffHeightMap","loadMapInformation","wc3PathSolver","loadTerrainCliffsAndWater","applyModificationFile","doodadsData","doodadMetaData","destructableMetaData","w3b","unitsData","unitMetaData","w3t","loadDoodadsAndDestructibles","loadUnitsAndItems","die","mpqFile","terrainData","K","N","O","Q","V","W","X","Y","cliffTypesData","waterRow","waterData","instanceCount","cliffHeights","cornerHeights","waterHeights","cornerTextures","cornerVariations","waterFlags","cliffs","bottomLeft","isWater","isCliff","bottomLeftLayer","bottomRightLayer","topLeftLayer","topRightLayer","cliffFileName","bottomLeftTexture","cornerTexture","bottomRightTexture","topLeftTexture","topRightTexture","bitset","ALPHA","currentValue","cliffShader","cliffPromisesForReal","cliff","loadBaseFile","numVar","endsWith","fileVar","renderGround","renderCliffs","renderWater","groundShader","instanceAttrib","positionAttrib","texturesAttrib","variationsAttrib","tilesetCount","uniform2fv","TEXTURE15","isExtended","waterShader","isWaterAttrib","TEXTURE1","TEXTURE2","bottomRight","topLeft","topRight","cliffGroundIndex","whichCliff","whichTileset","dataMap","metadataMap","modificationFile","applyModificationTable","modificationTable","modificationObject","metadata","groundNormal","cellX","cellY","mdx","War3MapViewer","isReforged","loadedBaseFiles","loadBaseFiles","reforgedPromises","terrain","cliffTypes","destructableData","unitData","unitUi","itemData","doodadSkins","destructableSkin","unitSkin","itemSkin","loadMap","isMipmapFake","whichMipmap","sanityTest","mipmapData","pixels","warnings","expectedMipmaps","jass2lua","arrayOrName","lastLine","JassHandle","handleId","JassAgent","JassPlayer","team","forcedStartLocation","racePreference","raceSelectable","controller","alliances","passive","helpRequest","helpResponse","sharedXp","sharedSpells","sharedVision","sharedControl","sharedAdvancedControl","rescuable","sharedVisionForced","JassWidget","maxHealth","JassUnit","unitId","acquireRange","JassForce","JassGroup","JassTrigger","conditions","actions","JassTimer","elapsed","timeout","periodic","handlerFunc","JassLocation","JassRegion","rects","JassRect","minx","miny","maxx","maxy","JassEnum","JassRace","JassAllianceType","JassRacePreference","JassGameState","JassIGameState","JassFGameState","JassPlayerState","JassPlayerScore","JassPlayerGameResult","JassUnitState","JassAiDifficulty","JassEventId","JassGameEvent","JassPlayerEvent","JassPlayerUnitEvent","JassUnitEvent","JassLimitOp","JassWidgetEvent","JassDialogEvent","JassUnitType","JassGameSpeed","JassGameDifficulty","JassGameType","JassMapFlag","JassMapVisibility","JassMapDensity","JassMapControl","JassPlayerSlotState","JassVolumeGroup","JassCameraField","JassCameraSetup","targetDistance","farZ","zOffset","destPosition","JassPlayerColor","JassPlacement","JassStartLocPrio","JassRarityControl","JassBlendMode","JassTexMapFlags","JassEffectType","JassWeatherEffect","whichRect","effectId","JassFogState","JassVersion","JassItemType","JassAttackType","JassDamageType","JassWeaponType","JassSoundType","JassPathingType","JassHashTable","parentKey","childKey","childTable","flushChild","ConvertRace","constantHandles","races","ConvertAllianceType","allianceTypes","ConvertRacePref","racePrefs","ConvertIGameState","gameStates","ConvertFGameState","ConvertPlayerState","playerStates","ConvertPlayerScore","playerScores","ConvertPlayerGameResult","playerGameResults","ConvertUnitState","unitStates","ConvertAIDifficulty","aiDifficulties","ConvertGameEvent","ConvertPlayerEvent","ConvertPlayerUnitEvent","ConvertWidgetEvent","ConvertDialogEvent","ConvertUnitEvent","ConvertLimitOp","limitOps","ConvertUnitType","unitTypes","ConvertGameSpeed","gameSpeeds","ConvertPlacement","placements","ConvertStartLocPrio","startLocPrios","ConvertGameDifficulty","gameDifficulties","ConvertGameType","gameTypes","ConvertMapFlag","mapFlags","ConvertMapVisibility","ConvertMapSetting","ConvertMapDensity","mapDensities","ConvertMapControl","mapControls","ConvertPlayerColor","playerColors","ConvertPlayerSlotState","playerSlotStates","ConvertVolumeGroup","volumeGroups","ConvertCameraField","cameraFields","ConvertBlendMode","ConvertRarityControl","rarityControls","ConvertTexMapFlags","texMapFlags","ConvertFogState","fogStates","ConvertEffectType","effectTypes","ConvertVersion","versions","ConvertItemType","itemTypes","ConvertAttackType","attackTypes","ConvertDamageType","damageTypes","ConvertWeaponType","weaponTypes","ConvertSoundType","soundTypes","ConvertPathingType","pathingTypes","ConvertMouseButtonType","mouseButtonTypes","ConvertAnimType","animTypes","ConvertSubAnimType","subAnimTypes","OrderId","OrderId2String","UnitId","UnitId2String","AbilityId","AbilityId2String","GetObjectName","GetBJMaxPlayers","GetBJPlayerNeutralVictim","GetBJPlayerNeutralExtra","GetBJMaxPlayerSlots","GetPlayerNeutralPassive","GetPlayerNeutralAggressive","Deg2Rad","Rad2Deg","Sin","Cos","Tan","Asin","asin","Acos","Atan","atan","Atan2","SquareRoot","Pow","power","I2R","R2I","I2S","R2S","R2SW","S2I","S2R","GetHandleId","SubString","StringLength","StringCase","StringHash","GetLocalizedString","GetLocalizedHotkey","SetMapName","SetMapDescription","SetTeams","SetPlayers","DefineStartLocation","whichStartLoc","startLocations","addHandle","DefineStartLocationLoc","SetStartLocPrioCount","SetStartLocPrio","GetStartLocPrioSlot","GetStartLocPrio","SetGameTypeSupported","SetMapFlag","SetGamePlacement","SetGameSpeed","SetGameDifficulty","SetResourceDensity","SetCreatureDensity","GetTeams","GetPlayers","IsGameTypeSupported","GetGameTypeSelected","IsMapFlagSet","GetGamePlacement","GetGameSpeed","GetGameDifficulty","GetResourceDensity","GetCreatureDensity","GetStartLocationX","GetStartLocationY","GetStartLocationLoc","SetPlayerTeam","SetPlayerStartLocation","whichPlayer","startLocIndex","ForcePlayerStartLocation","SetPlayerColor","SetPlayerAlliance","SetPlayerTaxRate","SetPlayerRacePreference","SetPlayerRaceSelectable","SetPlayerController","controlType","SetPlayerName","SetPlayerOnScoreScreen","GetPlayerTeam","GetPlayerStartLocation","GetPlayerColor","GetPlayerSelectable","GetPlayerController","GetPlayerSlotState","GetPlayerTaxRate","IsPlayerRacePrefSet","GetPlayerName","CreateTimer","DestroyTimer","whichTimer","timers","freeHandle","TimerStart","TimerGetElapsed","TimerGetRemaining","TimerGetTimeout","PauseTimer","ResumeTimer","GetExpiredTimer","thread","currentThread","expiredTimer","CreateGroup","DestroyGroup","whichGroup","GroupAddUnit","whichUnit","GroupRemoveUnit","GroupClear","GroupEnumUnitsOfType","GroupEnumUnitsOfPlayer","GroupEnumUnitsOfTypeCounted","GroupEnumUnitsInRect","GroupEnumUnitsInRectCounted","GroupEnumUnitsInRange","GroupEnumUnitsInRangeOfLoc","GroupEnumUnitsInRangeCounted","GroupEnumUnitsInRangeOfLocCounted","GroupEnumUnitsSelected","GroupImmediateOrder","GroupImmediateOrderById","GroupPointOrder","GroupPointOrderLoc","GroupPointOrderById","GroupPointOrderByIdLoc","GroupTargetOrder","GroupTargetOrderById","ForGroup","enumUnit","FirstOfGroup","CreateForce","DestroyForce","whichForce","ForceAddPlayer","ForceRemovePlayer","ForceClear","ForceEnumPlayers","ForceEnumPlayersCounted","ForceEnumAllies","ForceEnumEnemies","ForForce","enumPlayer","Rect","RectFromLoc","RemoveRect","SetRect","SetRectFromLoc","MoveRectTo","MoveRectToLoc","GetRectCenterX","GetRectCenterY","GetRectMinX","GetRectMinY","GetRectMaxX","GetRectMaxY","CreateRegion","RemoveRegion","RegionAddRect","RegionClearRect","RegionAddCell","RegionAddCellAtLoc","RegionClearCell","RegionClearCellAtLoc","Location","RemoveLocation","MoveLocation","GetLocationX","GetLocationY","GetLocationZ","IsUnitInRegion","IsPointInRegion","IsLocationInRegion","GetWorldBounds","CreateTrigger","DestroyTrigger","whichTrigger","ResetTrigger","EnableTrigger","DisableTrigger","IsTriggerEnabled","TriggerWaitOnSleeps","IsTriggerWaitOnSleeps","GetFilterUnit","filterUnit","GetEnumUnit","GetFilterDestructable","GetEnumDestructable","GetFilterItem","GetEnumItem","GetFilterPlayer","GetEnumPlayer","GetTriggeringTrigger","triggeringTrigger","GetTriggerEventId","GetTriggerEvalCount","GetTriggerExecCount","ExecuteFunc","And","Or","Not","Condition","DestroyCondition","Filter","DestroyFilter","DestroyBoolExpr","TriggerRegisterVariableEvent","TriggerRegisterTimerEvent","TriggerRegisterTimerExpireEvent","TriggerRegisterGameStateEvent","TriggerRegisterDialogEvent","TriggerRegisterDialogButtonEvent","GetEventGameState","TriggerRegisterGameEvent","GetWinningPlayer","TriggerRegisterEnterRegion","GetTriggeringRegion","GetEnteringUnit","TriggerRegisterLeaveRegion","GetLeavingUnit","TriggerRegisterTrackableHitEvent","TriggerRegisterTrackableTrackEvent","GetTriggeringTrackable","GetClickedButton","GetClickedDialog","GetTournamentFinishSoonTimeRemaining","GetTournamentFinishNowRule","GetTournamentFinishNowPlayer","GetTournamentScore","GetSaveBasicFilename","TriggerRegisterPlayerEvent","GetTriggerPlayer","TriggerRegisterPlayerUnitEvent","GetLevelingUnit","GetLearningUnit","GetLearnedSkill","GetLearnedSkillLevel","GetRevivableUnit","GetRevivingUnit","GetAttacker","GetRescuer","GetDyingUnit","GetKillingUnit","GetDecayingUnit","GetConstructingStructure","GetCancelledStructure","GetConstructedStructure","GetResearchingUnit","GetResearched","GetTrainedUnitType","GetTrainedUnit","GetDetectedUnit","GetSummoningUnit","GetSummonedUnit","GetTransportUnit","GetLoadedUnit","GetSellingUnit","GetSoldUnit","GetBuyingUnit","GetSoldItem","GetChangingUnit","GetChangingUnitPrevOwner","GetManipulatingUnit","GetManipulatedItem","GetOrderedUnit","GetIssuedOrderId","GetOrderPointX","GetOrderPointY","GetOrderPointLoc","GetOrderTarget","GetOrderTargetDestructable","GetOrderTargetItem","GetOrderTargetUnit","GetSpellAbilityUnit","GetSpellAbilityId","GetSpellAbility","GetSpellTargetLoc","GetSpellTargetX","GetSpellTargetY","GetSpellTargetDestructable","GetSpellTargetItem","GetSpellTargetUnit","TriggerRegisterPlayerAllianceChange","TriggerRegisterPlayerStateEvent","GetEventPlayerState","TriggerRegisterPlayerChatEvent","GetEventPlayerChatString","GetEventPlayerChatStringMatched","TriggerRegisterDeathEvent","GetTriggerUnit","triggerUnit","TriggerRegisterUnitStateEvent","GetEventUnitState","TriggerRegisterUnitEvent","GetEventDamage","GetEventDamageSource","GetEventDetectingPlayer","TriggerRegisterFilterUnitEvent","GetEventTargetUnit","TriggerRegisterUnitInRange","TriggerAddCondition","TriggerRemoveCondition","TriggerClearConditions","TriggerAddAction","TriggerRemoveAction","TriggerClearActions","TriggerSleepAction","TriggerWaitForSound","TriggerEvaluate","TriggerExecute","TriggerExecuteWait","TriggerSyncStart","_C","_L","TriggerSyncReady","GetWidgetLife","SetWidgetLife","GetWidgetX","GetWidgetY","GetTriggerWidget","CreateDestructable","CreateDestructableZ","CreateDeadDestructable","CreateDeadDestructableZ","RemoveDestructable","KillDestructable","SetDestructableInvulnerable","IsDestructableInvulnerable","EnumDestructablesInRect","GetDestructableTypeId","GetDestructableX","GetDestructableY","SetDestructableLife","GetDestructableLife","SetDestructableMaxLife","GetDestructableMaxLife","DestructableRestoreLife","QueueDestructableAnimation","SetDestructableAnimation","SetDestructableAnimationSpeed","ShowDestructable","GetDestructableOccluderHeight","SetDestructableOccluderHeight","GetDestructableName","GetTriggerDestructable","CreateItem","RemoveItem","GetItemPlayer","GetItemTypeId","GetItemX","GetItemY","SetItemPosition","SetItemDropOnDeath","SetItemDroppable","SetItemPawnable","SetItemPlayer","SetItemInvulnerable","IsItemInvulnerable","SetItemVisible","IsItemVisible","IsItemOwned","IsItemPowerup","IsItemSellable","IsItemPawnable","IsItemIdPowerup","IsItemIdSellable","IsItemIdPawnable","EnumItemsInRect","GetItemLevel","GetItemType","SetItemDropID","GetItemName","GetItemCharges","SetItemCharges","GetItemUserData","SetItemUserData","CreateUnit","unitid","CreateUnitByName","CreateUnitAtLoc","CreateUnitAtLocByName","CreateCorpse","KillUnit","RemoveUnit","ShowUnit","SetUnitState","SetUnitX","SetUnitY","SetUnitPosition","SetUnitPositionLoc","SetUnitFacing","SetUnitFacingTimed","SetUnitMoveSpeed","SetUnitFlyHeight","SetUnitTurnSpeed","SetUnitPropWindow","SetUnitAcquireRange","SetUnitCreepGuard","GetUnitAcquireRange","GetUnitTurnSpeed","GetUnitPropWindow","GetUnitFlyHeight","GetUnitDefaultAcquireRange","GetUnitDefaultTurnSpeed","GetUnitDefaultPropWindow","GetUnitDefaultFlyHeight","SetUnitOwner","SetUnitColor","SetUnitScale","SetUnitTimeScale","SetUnitBlendTime","SetUnitVertexColor","QueueUnitAnimation","SetUnitAnimation","SetUnitAnimationByIndex","SetUnitAnimationWithRarity","AddUnitAnimationProperties","SetUnitLookAt","ResetUnitLookAt","SetUnitRescuable","SetUnitRescueRange","SetHeroStr","SetHeroAgi","SetHeroInt","GetHeroStr","GetHeroAgi","GetHeroInt","UnitStripHeroLevel","GetHeroXP","SetHeroXP","GetHeroSkillPoints","UnitModifySkillPoints","AddHeroXP","SetHeroLevel","GetHeroLevel","GetUnitLevel","GetHeroProperName","SuspendHeroXP","IsSuspendedXP","SelectHeroSkill","GetUnitAbilityLevel","DecUnitAbilityLevel","IncUnitAbilityLevel","SetUnitAbilityLevel","ReviveHero","ReviveHeroLoc","SetUnitExploded","SetUnitInvulnerable","PauseUnit","IsUnitPaused","SetUnitPathing","ClearSelection","SelectUnit","GetUnitPointValue","GetUnitPointValueByType","UnitAddItem","UnitAddItemById","UnitAddItemToSlotById","UnitRemoveItem","UnitRemoveItemFromSlot","UnitHasItem","UnitItemInSlot","UnitInventorySize","UnitDropItemPoint","UnitDropItemSlot","UnitDropItemTarget","UnitUseItem","UnitUseItemPoint","UnitUseItemTarget","GetUnitX","GetUnitY","GetUnitLoc","GetUnitFacing","GetUnitMoveSpeed","GetUnitDefaultMoveSpeed","GetUnitState","GetOwningPlayer","GetUnitTypeId","GetUnitRace","GetUnitName","GetUnitFoodUsed","GetUnitFoodMade","GetFoodMade","GetFoodUsed","SetUnitUseFood","GetUnitRallyPoint","GetUnitRallyUnit","GetUnitRallyDestructable","IsUnitInGroup","IsUnitInForce","IsUnitOwnedByPlayer","IsUnitAlly","IsUnitEnemy","IsUnitVisible","IsUnitDetected","IsUnitInvisible","IsUnitFogged","IsUnitMasked","IsUnitSelected","IsUnitRace","IsUnitType","IsUnit","IsUnitInRange","IsUnitInRangeXY","IsUnitInRangeLoc","IsUnitHidden","IsUnitIllusion","IsUnitInTransport","IsUnitLoaded","IsHeroUnitId","IsUnitIdType","UnitShareVision","UnitSuspendDecay","UnitAddType","UnitRemoveType","UnitAddAbility","UnitRemoveAbility","UnitMakeAbilityPermanent","UnitRemoveBuffs","UnitRemoveBuffsEx","UnitHasBuffsEx","UnitCountBuffsEx","UnitAddSleep","UnitCanSleep","UnitAddSleepPerm","UnitCanSleepPerm","UnitIsSleeping","UnitWakeUp","UnitApplyTimedLife","UnitIgnoreAlarm","UnitIgnoreAlarmToggled","UnitResetCooldown","UnitSetConstructionProgress","UnitSetUpgradeProgress","UnitPauseTimedLife","UnitSetUsesAltIcon","UnitDamagePoint","UnitDamageTarget","IssueImmediateOrder","IssueImmediateOrderById","IssuePointOrder","IssuePointOrderLoc","IssuePointOrderById","IssuePointOrderByIdLoc","IssueTargetOrder","IssueTargetOrderById","IssueInstantPointOrder","IssueInstantPointOrderById","IssueInstantTargetOrder","IssueInstantTargetOrderById","IssueBuildOrder","IssueBuildOrderById","IssueNeutralImmediateOrder","IssueNeutralImmediateOrderById","IssueNeutralPointOrder","IssueNeutralPointOrderById","IssueNeutralTargetOrder","IssueNeutralTargetOrderById","GetUnitCurrentOrder","SetResourceAmount","AddResourceAmount","GetResourceAmount","WaygateGetDestinationX","WaygateGetDestinationY","WaygateSetDestination","WaygateActivate","WaygateIsActive","AddItemToAllStock","AddItemToStock","AddUnitToAllStock","AddUnitToStock","RemoveItemFromAllStock","RemoveItemFromStock","RemoveUnitFromAllStock","RemoveUnitFromStock","SetAllItemTypeSlots","SetAllUnitTypeSlots","SetItemTypeSlots","SetUnitTypeSlots","GetUnitUserData","SetUnitUserData","GetLocalPlayer","IsPlayerAlly","IsPlayerEnemy","IsPlayerInForce","IsPlayerObserver","IsVisibleToPlayer","IsLocationVisibleToPlayer","IsFoggedToPlayer","IsLocationFoggedToPlayer","IsMaskedToPlayer","IsLocationMaskedToPlayer","GetPlayerRace","GetPlayerId","GetPlayerUnitCount","GetPlayerTypedUnitCount","GetPlayerStructureCount","GetPlayerState","GetPlayerScore","GetPlayerAlliance","GetPlayerHandicap","GetPlayerHandicapXP","SetPlayerHandicap","SetPlayerHandicapXP","SetPlayerTechMaxAllowed","GetPlayerTechMaxAllowed","AddPlayerTechResearched","SetPlayerTechResearched","GetPlayerTechResearched","GetPlayerTechCount","SetPlayerUnitsOwner","CripplePlayer","SetPlayerAbilityAvailable","SetPlayerState","RemovePlayer","CachePlayerHeroData","SetFogStateRect","SetFogStateRadius","SetFogStateRadiusLoc","FogMaskEnable","IsFogMaskEnabled","FogEnable","IsFogEnabled","CreateFogModifierRect","CreateFogModifierRadius","CreateFogModifierRadiusLoc","DestroyFogModifier","FogModifierStart","FogModifierStop","VersionGet","VersionCompatible","VersionSupported","EndGame","ChangeLevel","RestartGame","ReloadGame","SetCampaignMenuRace","SetCampaignMenuRaceEx","ForceCampaignSelectScreen","LoadGame","SaveGame","RenameSaveDirectory","RemoveSaveDirectory","CopySaveGame","SaveGameExists","SyncSelections","SetFloatGameState","GetFloatGameState","SetIntegerGameState","GetIntegerGameState","SetTutorialCleared","SetMissionAvailable","SetCampaignAvailable","SetOpCinematicAvailable","SetEdCinematicAvailable","GetDefaultDifficulty","SetDefaultDifficulty","SetCustomCampaignButtonVisible","GetCustomCampaignButtonVisible","DoNotSaveReplay","DialogCreate","DialogDestroy","DialogClear","DialogSetMessage","DialogAddButton","DialogAddQuitButton","DialogDisplay","ReloadGameCachesFromDisk","InitGameCache","SaveGameCache","StoreInteger","StoreReal","StoreBoolean","StoreUnit","StoreString","SyncStoredInteger","SyncStoredReal","SyncStoredBoolean","SyncStoredUnit","SyncStoredString","HaveStoredInteger","HaveStoredReal","HaveStoredBoolean","HaveStoredUnit","HaveStoredString","FlushGameCache","FlushStoredMission","FlushStoredInteger","FlushStoredReal","FlushStoredBoolean","FlushStoredUnit","FlushStoredString","GetStoredInteger","GetStoredReal","GetStoredBoolean","GetStoredString","RestoreUnit","InitHashtable","SaveInteger","SaveReal","SaveBoolean","SaveStr","SavePlayerHandle","SaveWidgetHandle","SaveDestructableHandle","SaveItemHandle","SaveUnitHandle","SaveAbilityHandle","SaveTimerHandle","SaveTriggerHandle","SaveTriggerConditionHandle","SaveTriggerActionHandle","SaveTriggerEventHandle","SaveForceHandle","SaveGroupHandle","SaveLocationHandle","SaveRectHandle","SaveBooleanExprHandle","SaveSoundHandle","SaveEffectHandle","SaveUnitPoolHandle","SaveItemPoolHandle","SaveQuestHandle","SaveQuestItemHandle","SaveDefeatConditionHandle","SaveTimerDialogHandle","SaveLeaderboardHandle","SaveMultiboardHandle","SaveMultiboardItemHandle","SaveTrackableHandle","SaveDialogHandle","SaveButtonHandle","SaveTextTagHandle","SaveLightningHandle","SaveImageHandle","SaveUbersplatHandle","SaveRegionHandle","SaveFogStateHandle","SaveFogModifierHandle","SaveAgentHandle","SaveHashtableHandle","LoadReal","LoadBoolean","LoadStr","LoadPlayerHandle","LoadWidgetHandle","LoadDestructableHandle","LoadItemHandle","LoadUnitHandle","LoadAbilityHandle","LoadTimerHandle","LoadTriggerHandle","LoadTriggerConditionHandle","LoadTriggerActionHandle","LoadTriggerEventHandle","LoadForceHandle","LoadGroupHandle","LoadLocationHandle","LoadRectHandle","LoadBooleanExprHandle","LoadSoundHandle","LoadEffectHandle","LoadUnitPoolHandle","LoadItemPoolHandle","LoadQuestHandle","LoadQuestItemHandle","LoadDefeatConditionHandle","LoadTimerDialogHandle","LoadLeaderboardHandle","LoadMultiboardHandle","LoadMultiboardItemHandle","LoadTrackableHandle","LoadDialogHandle","LoadButtonHandle","LoadTextTagHandle","LoadLightningHandle","LoadImageHandle","LoadUbersplatHandle","LoadRegionHandle","LoadFogStateHandle","LoadFogModifierHandle","LoadHashtableHandle","HaveSavedInteger","HaveSavedReal","HaveSavedBoolean","HaveSavedString","HaveSavedHandle","RemoveSavedInteger","RemoveSavedReal","RemoveSavedBoolean","RemoveSavedString","RemoveSavedHandle","FlushParentHashtable","FlushChildHashtable","GetRandomInt","GetRandomReal","CreateUnitPool","DestroyUnitPool","UnitPoolAddUnitType","UnitPoolRemoveUnitType","PlaceRandomUnit","CreateItemPool","DestroyItemPool","ItemPoolAddItemType","ItemPoolRemoveItemType","PlaceRandomItem","ChooseRandomCreep","ChooseRandomNPBuilding","ChooseRandomItem","ChooseRandomItemEx","SetRandomSeed","SetTerrainFog","ResetTerrainFog","SetUnitFog","SetTerrainFogEx","DisplayTextToPlayer","DisplayTimedTextToPlayer","DisplayTimedTextFromPlayer","ClearTextMessages","SetDayNightModels","SetSkyModel","EnableUserControl","EnableUserUI","SuspendTimeOfDay","SetTimeOfDayScale","GetTimeOfDayScale","ShowInterface","PauseGame","UnitAddIndicator","AddIndicator","PingMinimap","PingMinimapEx","EnableOcclusion","SetIntroShotText","SetIntroShotModel","EnableWorldFogBoundary","PlayModelCinematic","PlayCinematic","ForceUIKey","ForceUICancel","DisplayLoadDialog","SetAltMinimapIcon","DisableRestartMission","CreateTextTag","DestroyTextTag","SetTextTagText","SetTextTagPos","SetTextTagPosUnit","SetTextTagColor","SetTextTagVelocity","SetTextTagVisibility","SetTextTagSuspended","SetTextTagPermanent","SetTextTagAge","SetTextTagLifespan","SetTextTagFadepoint","SetReservedLocalHeroButtons","GetAllyColorFilterState","SetAllyColorFilterState","GetCreepCampFilterState","SetCreepCampFilterState","EnableMinimapFilterButtons","EnableDragSelect","EnablePreSelect","EnableSelect","CreateTrackable","CreateQuest","DestroyQuest","QuestSetTitle","QuestSetDescription","QuestSetIconPath","QuestSetRequired","QuestSetCompleted","QuestSetDiscovered","QuestSetFailed","QuestSetEnabled","IsQuestRequired","IsQuestCompleted","IsQuestDiscovered","IsQuestFailed","IsQuestEnabled","QuestCreateItem","QuestItemSetDescription","QuestItemSetCompleted","IsQuestItemCompleted","CreateDefeatCondition","DestroyDefeatCondition","DefeatConditionSetDescription","FlashQuestDialogButton","ForceQuestDialogUpdate","CreateTimerDialog","DestroyTimerDialog","TimerDialogSetTitle","TimerDialogSetTitleColor","TimerDialogSetTimeColor","TimerDialogSetSpeed","TimerDialogDisplay","IsTimerDialogDisplayed","TimerDialogSetRealTimeRemaining","CreateLeaderboard","DestroyLeaderboard","LeaderboardDisplay","IsLeaderboardDisplayed","LeaderboardGetItemCount","LeaderboardSetSizeByItemCount","LeaderboardAddItem","LeaderboardRemoveItem","LeaderboardRemovePlayerItem","LeaderboardClear","LeaderboardSortItemsByValue","LeaderboardSortItemsByPlayer","LeaderboardSortItemsByLabel","LeaderboardHasPlayerItem","LeaderboardGetPlayerIndex","LeaderboardSetLabel","LeaderboardGetLabelText","PlayerSetLeaderboard","PlayerGetLeaderboard","LeaderboardSetLabelColor","LeaderboardSetValueColor","LeaderboardSetStyle","LeaderboardSetItemValue","LeaderboardSetItemLabel","LeaderboardSetItemStyle","LeaderboardSetItemLabelColor","LeaderboardSetItemValueColor","CreateMultiboard","DestroyMultiboard","MultiboardDisplay","IsMultiboardDisplayed","MultiboardMinimize","IsMultiboardMinimized","MultiboardClear","MultiboardSetTitleText","MultiboardGetTitleText","MultiboardSetTitleTextColor","MultiboardGetRowCount","MultiboardGetColumnCount","MultiboardSetColumnCount","MultiboardSetRowCount","MultiboardSetItemsStyle","MultiboardSetItemsValue","MultiboardSetItemsValueColor","MultiboardSetItemsWidth","MultiboardSetItemsIcon","MultiboardGetItem","MultiboardReleaseItem","MultiboardSetItemStyle","MultiboardSetItemValue","MultiboardSetItemValueColor","MultiboardSetItemWidth","MultiboardSetItemIcon","MultiboardSuppressDisplay","SetCameraPosition","SetCameraQuickPosition","SetCameraBounds","StopCamera","ResetToGameCamera","PanCameraTo","PanCameraToTimed","PanCameraToWithZ","PanCameraToTimedWithZ","SetCinematicCamera","SetCameraRotateMode","SetCameraField","AdjustCameraField","SetCameraTargetController","SetCameraOrientController","CreateCameraSetup","CameraSetupSetField","CameraSetupGetField","CameraSetupSetDestPosition","CameraSetupGetDestPositionLoc","CameraSetupGetDestPositionX","CameraSetupGetDestPositionY","CameraSetupApply","CameraSetupApplyWithZ","CameraSetupApplyForceDuration","CameraSetupApplyForceDurationWithZ","CameraSetTargetNoise","CameraSetSourceNoise","CameraSetTargetNoiseEx","CameraSetSourceNoiseEx","CameraSetSmoothingFactor","SetCineFilterTexture","SetCineFilterBlendMode","SetCineFilterTexMapFlags","SetCineFilterStartUV","SetCineFilterEndUV","SetCineFilterStartColor","SetCineFilterEndColor","SetCineFilterDuration","DisplayCineFilter","IsCineFilterDisplayed","SetCinematicScene","EndCinematicScene","ForceCinematicSubtitles","GetCameraMargin","GetCameraBoundMinX","GetCameraBoundMinY","GetCameraBoundMaxX","GetCameraBoundMaxY","GetCameraField","GetCameraTargetPositionX","GetCameraTargetPositionY","GetCameraTargetPositionZ","GetCameraTargetPositionLoc","GetCameraEyePositionX","GetCameraEyePositionY","GetCameraEyePositionZ","GetCameraEyePositionLoc","NewSoundEnvironment","CreateSound","CreateSoundFilenameWithLabel","CreateSoundFromLabel","CreateMIDISound","SetSoundParamsFromLabel","SetSoundDistanceCutoff","SetSoundChannel","SetSoundVolume","SetSoundPitch","SetSoundPlayPosition","SetSoundDistances","SetSoundConeAngles","SetSoundConeOrientation","SetSoundPosition","SetSoundVelocity","AttachSoundToUnit","StartSound","StopSound","KillSoundWhenDone","SetMapMusic","ClearMapMusic","PlayMusic","PlayMusicEx","StopMusic","ResumeMusic","PlayThematicMusic","PlayThematicMusicEx","EndThematicMusic","SetMusicVolume","SetMusicPlayPosition","SetThematicMusicPlayPosition","SetSoundDuration","GetSoundDuration","GetSoundFileDuration","VolumeGroupSetVolume","VolumeGroupReset","GetSoundIsPlaying","GetSoundIsLoading","RegisterStackedSound","UnregisterStackedSound","AddWeatherEffect","RemoveWeatherEffect","EnableWeatherEffect","TerrainDeformCrater","TerrainDeformRipple","TerrainDeformWave","TerrainDeformRandom","TerrainDeformStop","TerrainDeformStopAll","AddSpecialEffect","AddSpecialEffectLoc","AddSpecialEffectTarget","DestroyEffect","AddSpellEffect","AddSpellEffectLoc","AddSpellEffectById","AddSpellEffectByIdLoc","AddSpellEffectTarget","AddSpellEffectTargetById","AddLightning","AddLightningEx","DestroyLightning","MoveLightning","MoveLightningEx","GetLightningColorA","GetLightningColorR","GetLightningColorG","GetLightningColorB","SetLightningColor","GetAbilityEffect","GetAbilityEffectById","GetAbilitySound","GetAbilitySoundById","GetTerrainCliffLevel","SetWaterBaseColor","SetWaterDeforms","GetTerrainType","GetTerrainVariance","SetTerrainType","IsTerrainPathable","SetTerrainPathable","CreateImage","DestroyImage","ShowImage","SetImageConstantHeight","SetImagePosition","SetImageColor","SetImageRender","SetImageRenderAlways","SetImageAboveWater","SetImageType","CreateUbersplat","DestroyUbersplat","ResetUbersplat","FinishUbersplat","ShowUbersplat","SetUbersplatRender","SetUbersplatRenderAlways","SetBlight","SetBlightRect","SetBlightPoint","SetBlightLoc","CreateBlightedGoldmine","IsPointBlighted","SetDoodadAnimation","SetDoodadAnimationRect","StartMeleeAI","StartCampaignAI","CommandAI","PauseCompAI","GetAIDifficulty","RemoveGuardPosition","RecycleGuardPosition","RemoveAllGuardPositions","Cheat","IsNoVictoryCheat","IsNoDefeatCheat","Preload","PreloadEnd","PreloadStart","PreloadRefresh","PreloadEndEx","PreloadGenClear","PreloadGenStart","PreloadGenEnd","Preloader","AutomationTestStart","AutomationTestEnd","BlzGetTriggerPlayerMouseX","BlzGetTriggerPlayerMouseY","BlzGetTriggerPlayerMousePosition","BlzGetTriggerPlayerMouseButton","BlzSetAbilityTooltip","BlzSetAbilityActivatedTooltip","BlzSetAbilityExtendedTooltip","BlzSetAbilityActivatedExtendedTooltip","BlzSetAbilityResearchTooltip","BlzSetAbilityResearchExtendedTooltip","BlzGetAbilityTooltip","BlzGetAbilityActivatedTooltip","BlzGetAbilityExtendedTooltip","BlzGetAbilityActivatedExtendedTooltip","BlzGetAbilityResearchTooltip","BlzGetAbilityResearchExtendedTooltip","BlzSetAbilityIcon","BlzGetAbilityIcon","BlzSetAbilityActivatedIcon","BlzGetAbilityActivatedIcon","BlzGetAbilityPosX","BlzGetAbilityPosY","BlzSetAbilityPosX","BlzSetAbilityPosY","BlzGetAbilityActivatedPosX","BlzGetAbilityActivatedPosY","BlzSetAbilityActivatedPosX","BlzSetAbilityActivatedPosY","BlzGetUnitMaxHP","BlzSetUnitMaxHP","BlzGetUnitMaxMana","BlzSetUnitMaxMana","BlzDeleteHeroAbility","BlzSetItemName","BlzSetItemDescription","BlzGetItemDescription","BlzSetItemTooltip","BlzGetItemTooltip","BlzSetItemExtendedTooltip","BlzGetItemExtendedTooltip","BlzSetItemIconPath","BlzGetItemIconPath","BlzSetUnitName","BlzSetHeroProperName","BlzGetUnitBaseDamage","BlzSetUnitBaseDamage","BlzGetUnitDiceNumber","BlzSetUnitDiceNumber","BlzGetUnitDiceSides","BlzSetUnitDiceSides","BlzGetUnitAttackCooldown","BlzSetUnitAttackCooldown","BlzSetSpecialEffectColorByPlayer","BlzSetSpecialEffectColor","BlzSetSpecialEffectAlpha","BlzSetSpecialEffectScale","BlzSetSpecialEffectPosition","BlzSetSpecialEffectHeight","BlzSetSpecialEffectTimeScale","BlzSetSpecialEffectTime","BlzSetSpecialEffectOrientation","BlzSetSpecialEffectYaw","BlzSetSpecialEffectPitch","BlzSetSpecialEffectRoll","BlzSetSpecialEffectX","BlzSetSpecialEffectY","BlzSetSpecialEffectZ","BlzSetSpecialEffectPositionLoc","BlzGetLocalSpecialEffectX","BlzGetLocalSpecialEffectY","BlzGetLocalSpecialEffectZ","BlzGetUnitArmor","BlzSetUnitArmor","BlzUnitHideAbility","BlzUnitDisableAbility","BlzUnitCancelTimedLife","BlzIsUnitSelectable","BlzIsUnitInvulnerable","BlzUnitInterruptAttack","BlzGetUnitCollisionSize","BlzGetAbilityManaCost","BlzGetAbilityCooldown","BlzSetUnitAbilityCooldown","BlzGetUnitAbilityCooldown","BlzGetUnitAbilityCooldownRemaining","BlzEndUnitAbilityCooldown","BlzGetUnitAbilityManaCost","BlzSetUnitAbilityManaCost","BlzGetLocalUnitZ","BlzDecPlayerTechResearched","BlzSetEventDamage","bindNatives","JassMouseButtonType","JassAnimType","JassSubAnimType","Thread","sleep","Context","handle","freeHandles","handles","actualPlayers","threads","timer","run","isJass","compileNative","isConstant","luaParams","decl","compileGetters","compileReturn","compileNatives","decls","compileBindings","getSequenceFromFrame","getValuesDiff","ai","d1","d2","testSequenceTracks","firstIndex","lastIndex","firstFrame","areValuesEqual","addSevere","getSequenceName","addUnused","testTracks","framesOrTracks","assertWarning","assertError","separated","testReference","lastFrame","addWarning","seprateTracks","sequenceNames","replaceableIds","animatedTypeNames","getObjectTypeName","getObjectName","testObjects","testAnimation","asGeneric","hasGenericObject","testAndGetReference","typeNameIfError","addReference","addError","testVertexSkinning","uses","boneUsageMap","cleanNode","errors","severe","unused","testExtent","SanityTestData","foundStand","foundDeath","addObjects","areGeneric","addImplicitReference","condition","assertSevere","assertUnused","testSequence","otherSequence","otherInterval","testGlobalSequence","testTexture","testMaterial","testLayer","getTextureIds","testGeoset","GUESSED_MAX_VERTICES","bone0","bone1","bone2","bone3","weight0","weight1","weight2","weight3","weight","slices","testGeosetSkinning","references","testGeosetAnimation","SUPPOSED_ALPHA_THRESHOLD","testBone","hasAnimation","testLight","testParticleEmitter","testParticleEmitter2","getAnimation","testParticleEmitterPopcorn","testRibbonEmitter","testEventObject","testCamera","_camera","testFaceEffect","faceEffect","createRectangle","edges","boundingRadius","createUnitRectangle","createCube","createUnitCube","createSphere","stacks","points","vOffset","uOffset","theta","sinTheta","cosTheta","phi","sinPhi","cosPhi","fOffset","second","createUnitSphere","createCylinder","eOffset","createUnitCylinder","createFrustum","aspectRatio","tanFov","nearHeight","nearWidth","farHeight","farWidth","mdlObjects","mdlObjectsBlock","testHeader","testSequences","testTextures","foundOrigin","lowerCase","testAttachments","testPivotPoints","testBindPose","createPrimitive","primitive","layerFlags","tex","faceTypeGroup","primitives","mdlStructure","layerNodes","typeFunctionCall","signatures","customTriggerData","childSignature","includes","valueAsFloat","isInteger","BIGGEST_SIGNATURE","WeuData","stringTable","preplacedObjects","changes","stackToString","getTriggerName","updateGUIReference","isGUI","saveGUIReferences","customTextTriggers","reference","createCustomScriptECA","script","createCustomScriptOrCommentECA","subParametersToEca","SCRIPT_LINE_LENGTH","ensureCustomScriptCodeSafety","outputEcas","customScript","ensureNameSafety","OPERATOR_NAMES","HAS_IMPLICIT_CODE","convertTrigger","callbacks","initBody","conditionsBody","actionsBody","triggerName","triggerParameter","convertFunctionCall","action","argCount","isCode","isBoolexpr","isScriptCode","ecaObject","lastArg","convertParameter","loopName","indexEnd","replacements","replacement","thenActions","elseActions","callbackName","callOrReturn","lastParam","isMultiple","callbackIndex","callParams","global","baseType","convertParameterInline","runTests","convertedParameters","tests","setNameAndType","setParameters","whichParameter","whichOperator","operandValue","argType","typedFunction","mathOp","operandA","operator","operandB","transformer","transformations","mappings","mappingAsArray","transformerIsUnitOwnedByPlayer","comparator","comparatorParameters","otherParameter","trueOrFalse","transformerIsUnitRace","whichRace","isEqual","isTrue","transformerIsUnitType","transformers","initialized","swap","transformFunction","swap10","swap102","swap120","swap201","swap210","swap0231","swap1023","swap3012","swap3201","swap3210","SinBJ","CosBJ","TanBJ","SubStringBJ","LockGameSpeedBJ","UnlockGameSpeedBJ","SetPlayerColorBJ","StartTimerBJ","PauseTimerBJ","TriggerRegisterTimerEventPeriodic","TriggerRegisterTimerEventSingle","TriggerRegisterGameStateEventTimeOfDay","TriggerRegisterShowSkillEventBJ","TriggerRegisterBuildSubmenuEventBJ","TriggerRegisterGameLoadedEventBJ","TriggerRegisterGameSavedEventBJ","TriggerRegisterPlayerKeyEventBJ","TriggerRegisterPlayerMouseEventBJ","TriggerRegisterPlayerEventVictory","TriggerRegisterPlayerEventDefeat","TriggerRegisterPlayerEventLeave","TriggerRegisterPlayerEventAllianceChanged","TriggerRegisterPlayerEventEndCinematic","TriggerRegisterPlayerUnitEventSimple","TriggerRegisterUnitLifeEvent","TriggerRegisterUnitManaEvent","EnumDestructablesInRectAll","SetDestAnimationSpeedPercent","CheckItemStatus","CheckItemcodeStatus","EnumItemsInRectBJ","ShowUnitShow","ShowUnitHide","SetUnitLifeBJ","SetUnitManaBJ","LockGuardPosition","SetUnitScalePercent","SetUnitTimeScalePercent","ResetUnitAnimation","ModifyHeroStat","GetHeroStatBJ","ModifyHeroSkillPoints","SelectUnitAdd","SelectUnitRemove","UnitRemoveItemFromSlotSwapped","UnitItemInSlotBJ","UnitDropItemSlotBJ","UnitRemoveBuffsBJ","UnitDamageTargetBJ","ConvertedPlayer","SetPlayerHandicapBJ","SetPlayerHandicapXPBJ","GetPlayerTechCountSimple","FogMaskEnableOn","FogMaskEnableOff","FogEnableOn","FogEnableOff","SetCampaignMenuRaceBJ","GetTimeOfDay","SetTimeOfDay","ShowCustomCampaignButton","IsCustomCampaignButtonVisibile","HaveStoredValue","HaveSavedValue","SetTerrainFogExBJ","SetTimeOfDayScalePercentBJ","PauseGameOn","PauseGameOff","LeaderboardSortItemsBJ","StopSoundBJ","SetMapMusicIndexedBJ","SetMapMusicRandomBJ","VolumeGroupSetVolumeBJ","SetDoodadAnimationRectBJ","initialize","transform","isBlzNeeded","transformBlz","transformPreset","bj_forLoopAIndex","bj_forLoopBIndex","bj_queuedExecTotal","bj_mapInitialCameraBounds","bj_mapInitialPlayableArea","bj_lastCreatedWeatherEffect","bj_lastCreatedTerrainDeformation","bj_lastCreatedLightning","bj_lastCreatedFogModifier","bj_lastCreatedImage","bj_lastCreatedUbersplat","bj_lastPlayedSound","bj_lastPlayedMusic","bj_useDawnDuskSounds","bj_lastCreatedEffect","bj_lastCreatedItem","bj_lastRemovedItem","bj_lastCreatedUnit","bj_lastReplacedUnit","bj_lastCreatedDestructable","bj_FORCE_ALL_PLAYERS","bj_lastCreatedButton","bj_lastCreatedQuest","bj_lastCreatedQuestItem","bj_lastCreatedDefeatCondition","bj_lastStartedTimer","bj_lastCreatedTimerDialog","bj_lastCreatedLeaderboard","bj_lastCreatedMultiboard","bj_lastCreatedTextTag","bj_lastTransmissionDuration","bj_lastCreatedGameCache","bj_lastCreatedHashtable","bj_lastLoadedUnit","bj_lastHauntedGoldMine","processTrigger","eventsAndConditions","eventOrCondition","processECA","convert","customScripts","processFunctionCall","ifParam","thenParam","elseParam","convertSingleToMultiple","finalCondition","returnValue","processParameter","processSubParameters","isModel","isTexture","filterFile","isOther","convertWeu","weTriggerData","scriptFile","currentName","currentSignature","searching","nameAndType","typeAsNumber","parseWtg","mapHeader","callbacksText","generateListfile","objectFile","config","actualFile","jass2"],"sourceRoot":""}